var O1=Object.defineProperty;var N1=(t,e,n)=>e in t?O1(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Ht=(t,e,n)=>(N1(t,typeof e!="symbol"?e+"":e,n),n),M1=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)};var $h=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)};var nu=(t,e,n)=>(M1(t,e,"access private method"),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function If(t,e){const n=Object.create(null),r=t.split(",");for(let i=0;i<r.length;i++)n[r[i]]=!0;return e?i=>!!n[i.toLowerCase()]:i=>!!n[i]}const Wt={},_o=[],Tr=()=>{},L1=()=>!1,V1=/^on[^a-z]/,bc=t=>V1.test(t),Af=t=>t.startsWith("onUpdate:"),Rn=Object.assign,xf=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},U1=Object.prototype.hasOwnProperty,vt=(t,e)=>U1.call(t,e),Ue=Array.isArray,wo=t=>ul(t)==="[object Map]",qo=t=>ul(t)==="[object Set]",jm=t=>ul(t)==="[object Date]",at=t=>typeof t=="function",_n=t=>typeof t=="string",Ma=t=>typeof t=="symbol",Gt=t=>t!==null&&typeof t=="object",sw=t=>Gt(t)&&at(t.then)&&at(t.catch),ow=Object.prototype.toString,ul=t=>ow.call(t),F1=t=>ul(t).slice(8,-1),aw=t=>ul(t)==="[object Object]",Cf=t=>_n(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Au=If(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),kc=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},$1=/-(\w)/g,Co=kc(t=>t.replace($1,(e,n)=>n?n.toUpperCase():"")),B1=/\B([A-Z])/g,Ho=kc(t=>t.replace(B1,"-$1").toLowerCase()),lw=kc(t=>t.charAt(0).toUpperCase()+t.slice(1)),Bh=kc(t=>t?`on${lw(t)}`:""),La=(t,e)=>!Object.is(t,e),xu=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},Bu=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},zu=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let qm;const Sd=()=>qm||(qm=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Cs(t){if(Ue(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],i=_n(r)?H1(r):Cs(r);if(i)for(const s in i)e[s]=i[s]}return e}else{if(_n(t))return t;if(Gt(t))return t}}const z1=/;(?![^(]*\))/g,j1=/:([^]+)/,q1=/\/\*[^]*?\*\//g;function H1(t){const e={};return t.replace(q1,"").split(z1).forEach(n=>{if(n){const r=n.split(j1);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Sf(t){let e="";if(_n(t))e=t;else if(Ue(t))for(let n=0;n<t.length;n++){const r=Sf(t[n]);r&&(e+=r+" ")}else if(Gt(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const W1="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",K1=If(W1);function uw(t){return!!t||t===""}function G1(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=cl(t[r],e[r]);return n}function cl(t,e){if(t===e)return!0;let n=jm(t),r=jm(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=Ma(t),r=Ma(e),n||r)return t===e;if(n=Ue(t),r=Ue(e),n||r)return n&&r?G1(t,e):!1;if(n=Gt(t),r=Gt(e),n||r){if(!n||!r)return!1;const i=Object.keys(t).length,s=Object.keys(e).length;if(i!==s)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!cl(t[o],e[o]))return!1}}return String(t)===String(e)}function Rf(t,e){return t.findIndex(n=>cl(n,e))}const At=t=>_n(t)?t:t==null?"":Ue(t)||Gt(t)&&(t.toString===ow||!at(t.toString))?JSON.stringify(t,cw,2):String(t),cw=(t,e)=>e&&e.__v_isRef?cw(t,e.value):wo(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,i])=>(n[`${r} =>`]=i,n),{})}:qo(e)?{[`Set(${e.size})`]:[...e.values()]}:Gt(e)&&!Ue(e)&&!aw(e)?String(e):e;let yr;class Q1{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=yr,!e&&yr&&(this.index=(yr.scopes||(yr.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const n=yr;try{return yr=this,e()}finally{yr=n}}}on(){yr=this}off(){yr=this.parent}stop(e){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this._active=!1}}}function Y1(t,e=yr){e&&e.active&&e.effects.push(t)}function Z1(){return yr}const Pf=t=>{const e=new Set(t);return e.w=0,e.n=0,e},hw=t=>(t.w&Hi)>0,dw=t=>(t.n&Hi)>0,X1=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=Hi},J1=t=>{const{deps:e}=t;if(e.length){let n=0;for(let r=0;r<e.length;r++){const i=e[r];hw(i)&&!dw(i)?i.delete(t):e[n++]=i,i.w&=~Hi,i.n&=~Hi}e.length=n}},Rd=new WeakMap;let ga=0,Hi=1;const Pd=30;let br;const Es=Symbol(""),Dd=Symbol("");class Df{constructor(e,n=null,r){this.fn=e,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,Y1(this,r)}run(){if(!this.active)return this.fn();let e=br,n=Fi;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=br,br=this,Fi=!0,Hi=1<<++ga,ga<=Pd?X1(this):Hm(this),this.fn()}finally{ga<=Pd&&J1(this),Hi=1<<--ga,br=this.parent,Fi=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){br===this?this.deferStop=!0:this.active&&(Hm(this),this.onStop&&this.onStop(),this.active=!1)}}function Hm(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let Fi=!0;const fw=[];function Wo(){fw.push(Fi),Fi=!1}function Ko(){const t=fw.pop();Fi=t===void 0?!0:t}function rr(t,e,n){if(Fi&&br){let r=Rd.get(t);r||Rd.set(t,r=new Map);let i=r.get(n);i||r.set(n,i=Pf()),pw(i)}}function pw(t,e){let n=!1;ga<=Pd?dw(t)||(t.n|=Hi,n=!hw(t)):n=!t.has(br),n&&(t.add(br),br.deps.push(t))}function di(t,e,n,r,i,s){const o=Rd.get(t);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(n==="length"&&Ue(t)){const l=Number(r);o.forEach((u,d)=>{(d==="length"||d>=l)&&a.push(u)})}else switch(n!==void 0&&a.push(o.get(n)),e){case"add":Ue(t)?Cf(n)&&a.push(o.get("length")):(a.push(o.get(Es)),wo(t)&&a.push(o.get(Dd)));break;case"delete":Ue(t)||(a.push(o.get(Es)),wo(t)&&a.push(o.get(Dd)));break;case"set":wo(t)&&a.push(o.get(Es));break}if(a.length===1)a[0]&&Od(a[0]);else{const l=[];for(const u of a)u&&l.push(...u);Od(Pf(l))}}function Od(t,e){const n=Ue(t)?t:[...t];for(const r of n)r.computed&&Wm(r);for(const r of n)r.computed||Wm(r)}function Wm(t,e){(t!==br||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const ek=If("__proto__,__v_isRef,__isVue"),mw=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Ma)),tk=Of(),nk=Of(!1,!0),rk=Of(!0),Km=ik();function ik(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const r=Tt(this);for(let s=0,o=this.length;s<o;s++)rr(r,"get",s+"");const i=r[e](...n);return i===-1||i===!1?r[e](...n.map(Tt)):i}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){Wo();const r=Tt(this)[e].apply(this,n);return Ko(),r}}),t}function sk(t){const e=Tt(this);return rr(e,"has",t),e.hasOwnProperty(t)}function Of(t=!1,e=!1){return function(r,i,s){if(i==="__v_isReactive")return!t;if(i==="__v_isReadonly")return t;if(i==="__v_isShallow")return e;if(i==="__v_raw"&&s===(t?e?bk:vw:e?yw:ww).get(r))return r;const o=Ue(r);if(!t){if(o&&vt(Km,i))return Reflect.get(Km,i,s);if(i==="hasOwnProperty")return sk}const a=Reflect.get(r,i,s);return(Ma(i)?mw.has(i):ek(i))||(t||rr(r,"get",i),e)?a:Un(a)?o&&Cf(i)?a:a.value:Gt(a)?t?bw(a):Lf(a):a}}const ok=gw(),ak=gw(!0);function gw(t=!1){return function(n,r,i,s){let o=n[r];if(So(o)&&Un(o)&&!Un(i))return!1;if(!t&&(!ju(i)&&!So(i)&&(o=Tt(o),i=Tt(i)),!Ue(n)&&Un(o)&&!Un(i)))return o.value=i,!0;const a=Ue(n)&&Cf(r)?Number(r)<n.length:vt(n,r),l=Reflect.set(n,r,i,s);return n===Tt(s)&&(a?La(i,o)&&di(n,"set",r,i):di(n,"add",r,i)),l}}function lk(t,e){const n=vt(t,e);t[e];const r=Reflect.deleteProperty(t,e);return r&&n&&di(t,"delete",e,void 0),r}function uk(t,e){const n=Reflect.has(t,e);return(!Ma(e)||!mw.has(e))&&rr(t,"has",e),n}function ck(t){return rr(t,"iterate",Ue(t)?"length":Es),Reflect.ownKeys(t)}const _w={get:tk,set:ok,deleteProperty:lk,has:uk,ownKeys:ck},hk={get:rk,set(t,e){return!0},deleteProperty(t,e){return!0}},dk=Rn({},_w,{get:nk,set:ak}),Nf=t=>t,Ec=t=>Reflect.getPrototypeOf(t);function ru(t,e,n=!1,r=!1){t=t.__v_raw;const i=Tt(t),s=Tt(e);n||(e!==s&&rr(i,"get",e),rr(i,"get",s));const{has:o}=Ec(i),a=r?Nf:n?Uf:Va;if(o.call(i,e))return a(t.get(e));if(o.call(i,s))return a(t.get(s));t!==i&&t.get(e)}function iu(t,e=!1){const n=this.__v_raw,r=Tt(n),i=Tt(t);return e||(t!==i&&rr(r,"has",t),rr(r,"has",i)),t===i?n.has(t):n.has(t)||n.has(i)}function su(t,e=!1){return t=t.__v_raw,!e&&rr(Tt(t),"iterate",Es),Reflect.get(t,"size",t)}function Gm(t){t=Tt(t);const e=Tt(this);return Ec(e).has.call(e,t)||(e.add(t),di(e,"add",t,t)),this}function Qm(t,e){e=Tt(e);const n=Tt(this),{has:r,get:i}=Ec(n);let s=r.call(n,t);s||(t=Tt(t),s=r.call(n,t));const o=i.call(n,t);return n.set(t,e),s?La(e,o)&&di(n,"set",t,e):di(n,"add",t,e),this}function Ym(t){const e=Tt(this),{has:n,get:r}=Ec(e);let i=n.call(e,t);i||(t=Tt(t),i=n.call(e,t)),r&&r.call(e,t);const s=e.delete(t);return i&&di(e,"delete",t,void 0),s}function Zm(){const t=Tt(this),e=t.size!==0,n=t.clear();return e&&di(t,"clear",void 0,void 0),n}function ou(t,e){return function(r,i){const s=this,o=s.__v_raw,a=Tt(o),l=e?Nf:t?Uf:Va;return!t&&rr(a,"iterate",Es),o.forEach((u,d)=>r.call(i,l(u),l(d),s))}}function au(t,e,n){return function(...r){const i=this.__v_raw,s=Tt(i),o=wo(s),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,u=i[t](...r),d=n?Nf:e?Uf:Va;return!e&&rr(s,"iterate",l?Dd:Es),{next(){const{value:m,done:w}=u.next();return w?{value:m,done:w}:{value:a?[d(m[0]),d(m[1])]:d(m),done:w}},[Symbol.iterator](){return this}}}}function Ci(t){return function(...e){return t==="delete"?!1:this}}function fk(){const t={get(s){return ru(this,s)},get size(){return su(this)},has:iu,add:Gm,set:Qm,delete:Ym,clear:Zm,forEach:ou(!1,!1)},e={get(s){return ru(this,s,!1,!0)},get size(){return su(this)},has:iu,add:Gm,set:Qm,delete:Ym,clear:Zm,forEach:ou(!1,!0)},n={get(s){return ru(this,s,!0)},get size(){return su(this,!0)},has(s){return iu.call(this,s,!0)},add:Ci("add"),set:Ci("set"),delete:Ci("delete"),clear:Ci("clear"),forEach:ou(!0,!1)},r={get(s){return ru(this,s,!0,!0)},get size(){return su(this,!0)},has(s){return iu.call(this,s,!0)},add:Ci("add"),set:Ci("set"),delete:Ci("delete"),clear:Ci("clear"),forEach:ou(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{t[s]=au(s,!1,!1),n[s]=au(s,!0,!1),e[s]=au(s,!1,!0),r[s]=au(s,!0,!0)}),[t,n,e,r]}const[pk,mk,gk,_k]=fk();function Mf(t,e){const n=e?t?_k:gk:t?mk:pk;return(r,i,s)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?r:Reflect.get(vt(n,i)&&i in r?n:r,i,s)}const wk={get:Mf(!1,!1)},yk={get:Mf(!1,!0)},vk={get:Mf(!0,!1)},ww=new WeakMap,yw=new WeakMap,vw=new WeakMap,bk=new WeakMap;function kk(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Ek(t){return t.__v_skip||!Object.isExtensible(t)?0:kk(F1(t))}function Lf(t){return So(t)?t:Vf(t,!1,_w,wk,ww)}function Tk(t){return Vf(t,!1,dk,yk,yw)}function bw(t){return Vf(t,!0,hk,vk,vw)}function Vf(t,e,n,r,i){if(!Gt(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const s=i.get(t);if(s)return s;const o=Ek(t);if(o===0)return t;const a=new Proxy(t,o===2?r:n);return i.set(t,a),a}function yo(t){return So(t)?yo(t.__v_raw):!!(t&&t.__v_isReactive)}function So(t){return!!(t&&t.__v_isReadonly)}function ju(t){return!!(t&&t.__v_isShallow)}function kw(t){return yo(t)||So(t)}function Tt(t){const e=t&&t.__v_raw;return e?Tt(e):t}function Ew(t){return Bu(t,"__v_skip",!0),t}const Va=t=>Gt(t)?Lf(t):t,Uf=t=>Gt(t)?bw(t):t;function Tw(t){Fi&&br&&(t=Tt(t),pw(t.dep||(t.dep=Pf())))}function Iw(t,e){t=Tt(t);const n=t.dep;n&&Od(n)}function Un(t){return!!(t&&t.__v_isRef===!0)}function we(t){return Ik(t,!1)}function Ik(t,e){return Un(t)?t:new Ak(t,e)}class Ak{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:Tt(e),this._value=n?e:Va(e)}get value(){return Tw(this),this._value}set value(e){const n=this.__v_isShallow||ju(e)||So(e);e=n?e:Tt(e),La(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:Va(e),Iw(this))}}function fs(t){return Un(t)?t.value:t}const xk={get:(t,e,n)=>fs(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return Un(i)&&!Un(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function Aw(t){return yo(t)?t:new Proxy(t,xk)}class Ck{constructor(e,n,r,i){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new Df(e,()=>{this._dirty||(this._dirty=!0,Iw(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=r}get value(){const e=Tt(this);return Tw(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function Sk(t,e,n=!1){let r,i;const s=at(t);return s?(r=t,i=Tr):(r=t.get,i=t.set),new Ck(r,i,s||!i,n)}function $i(t,e,n,r){let i;try{i=r?t(...r):t()}catch(s){Tc(s,e,n)}return i}function Ir(t,e,n,r){if(at(t)){const s=$i(t,e,n,r);return s&&sw(s)&&s.catch(o=>{Tc(o,e,n)}),s}const i=[];for(let s=0;s<t.length;s++)i.push(Ir(t[s],e,n,r));return i}function Tc(t,e,n,r=!0){const i=e?e.vnode:null;if(e){let s=e.parent;const o=e.proxy,a=n;for(;s;){const u=s.ec;if(u){for(let d=0;d<u.length;d++)if(u[d](t,o,a)===!1)return}s=s.parent}const l=e.appContext.config.errorHandler;if(l){$i(l,null,10,[t,o,a]);return}}Rk(t,n,i,r)}function Rk(t,e,n,r=!0){console.error(t)}let Ua=!1,Nd=!1;const Mn=[];let Fr=0;const vo=[];let li=null,gs=0;const xw=Promise.resolve();let Ff=null;function Ss(t){const e=Ff||xw;return t?e.then(this?t.bind(this):t):e}function Pk(t){let e=Fr+1,n=Mn.length;for(;e<n;){const r=e+n>>>1;Fa(Mn[r])<t?e=r+1:n=r}return e}function $f(t){(!Mn.length||!Mn.includes(t,Ua&&t.allowRecurse?Fr+1:Fr))&&(t.id==null?Mn.push(t):Mn.splice(Pk(t.id),0,t),Cw())}function Cw(){!Ua&&!Nd&&(Nd=!0,Ff=xw.then(Rw))}function Dk(t){const e=Mn.indexOf(t);e>Fr&&Mn.splice(e,1)}function Ok(t){Ue(t)?vo.push(...t):(!li||!li.includes(t,t.allowRecurse?gs+1:gs))&&vo.push(t),Cw()}function Xm(t,e=Ua?Fr+1:0){for(;e<Mn.length;e++){const n=Mn[e];n&&n.pre&&(Mn.splice(e,1),e--,n())}}function Sw(t){if(vo.length){const e=[...new Set(vo)];if(vo.length=0,li){li.push(...e);return}for(li=e,li.sort((n,r)=>Fa(n)-Fa(r)),gs=0;gs<li.length;gs++)li[gs]();li=null,gs=0}}const Fa=t=>t.id==null?1/0:t.id,Nk=(t,e)=>{const n=Fa(t)-Fa(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function Rw(t){Nd=!1,Ua=!0,Mn.sort(Nk);const e=Tr;try{for(Fr=0;Fr<Mn.length;Fr++){const n=Mn[Fr];n&&n.active!==!1&&$i(n,null,14)}}finally{Fr=0,Mn.length=0,Sw(),Ua=!1,Ff=null,(Mn.length||vo.length)&&Rw()}}function Mk(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||Wt;let i=n;const s=e.startsWith("update:"),o=s&&e.slice(7);if(o&&o in r){const d=`${o==="modelValue"?"model":o}Modifiers`,{number:m,trim:w}=r[d]||Wt;w&&(i=n.map(g=>_n(g)?g.trim():g)),m&&(i=n.map(zu))}let a,l=r[a=Bh(e)]||r[a=Bh(Co(e))];!l&&s&&(l=r[a=Bh(Ho(e))]),l&&Ir(l,t,6,i);const u=r[a+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,Ir(u,t,6,i)}}function Pw(t,e,n=!1){const r=e.emitsCache,i=r.get(t);if(i!==void 0)return i;const s=t.emits;let o={},a=!1;if(!at(t)){const l=u=>{const d=Pw(u,e,!0);d&&(a=!0,Rn(o,d))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!s&&!a?(Gt(t)&&r.set(t,null),null):(Ue(s)?s.forEach(l=>o[l]=null):Rn(o,s),Gt(t)&&r.set(t,o),o)}function Ic(t,e){return!t||!bc(e)?!1:(e=e.slice(2).replace(/Once$/,""),vt(t,e[0].toLowerCase()+e.slice(1))||vt(t,Ho(e))||vt(t,e))}let kr=null,Dw=null;function qu(t){const e=kr;return kr=t,Dw=t&&t.type.__scopeId||null,e}function Lk(t,e=kr,n){if(!e||t._n)return t;const r=(...i)=>{r._d&&ug(-1);const s=qu(e);let o;try{o=t(...i)}finally{qu(s),r._d&&ug(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function zh(t){const{type:e,vnode:n,proxy:r,withProxy:i,props:s,propsOptions:[o],slots:a,attrs:l,emit:u,render:d,renderCache:m,data:w,setupState:g,ctx:E,inheritAttrs:b}=t;let A,T;const x=qu(t);try{if(n.shapeFlag&4){const O=i||r;A=Ur(d.call(O,O,m,s,g,w,E)),T=l}else{const O=e;A=Ur(O.length>1?O(s,{attrs:l,slots:a,emit:u}):O(s,null)),T=e.props?l:Vk(l)}}catch(O){xa.length=0,Tc(O,t,1),A=bn(Rs)}let R=A;if(T&&b!==!1){const O=Object.keys(T),{shapeFlag:H}=R;O.length&&H&7&&(o&&O.some(Af)&&(T=Uk(T,o)),R=Ro(R,T))}return n.dirs&&(R=Ro(R),R.dirs=R.dirs?R.dirs.concat(n.dirs):n.dirs),n.transition&&(R.transition=n.transition),A=R,qu(x),A}const Vk=t=>{let e;for(const n in t)(n==="class"||n==="style"||bc(n))&&((e||(e={}))[n]=t[n]);return e},Uk=(t,e)=>{const n={};for(const r in t)(!Af(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function Fk(t,e,n){const{props:r,children:i,component:s}=t,{props:o,children:a,patchFlag:l}=e,u=s.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?Jm(r,o,u):!!o;if(l&8){const d=e.dynamicProps;for(let m=0;m<d.length;m++){const w=d[m];if(o[w]!==r[w]&&!Ic(u,w))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?Jm(r,o,u):!0:!!o;return!1}function Jm(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(e[s]!==t[s]&&!Ic(n,s))return!0}return!1}function $k({vnode:t,parent:e},n){for(;e&&e.subTree===t;)(t=e.vnode).el=n,e=e.parent}const Bk=t=>t.__isSuspense;function zk(t,e){e&&e.pendingBranch?Ue(t)?e.effects.push(...t):e.effects.push(t):Ok(t)}const lu={};function jh(t,e,n){return Ow(t,e,n)}function Ow(t,e,{immediate:n,deep:r,flush:i,onTrack:s,onTrigger:o}=Wt){var a;const l=Z1()===((a=Ln)==null?void 0:a.scope)?Ln:null;let u,d=!1,m=!1;if(Un(t)?(u=()=>t.value,d=ju(t)):yo(t)?(u=()=>t,r=!0):Ue(t)?(m=!0,d=t.some(O=>yo(O)||ju(O)),u=()=>t.map(O=>{if(Un(O))return O.value;if(yo(O))return ws(O);if(at(O))return $i(O,l,2)})):at(t)?e?u=()=>$i(t,l,2):u=()=>{if(!(l&&l.isUnmounted))return w&&w(),Ir(t,l,3,[g])}:u=Tr,e&&r){const O=u;u=()=>ws(O())}let w,g=O=>{w=x.onStop=()=>{$i(O,l,4)}},E;if(Ba)if(g=Tr,e?n&&Ir(e,l,3,[u(),m?[]:void 0,g]):u(),i==="sync"){const O=UE();E=O.__watcherHandles||(O.__watcherHandles=[])}else return Tr;let b=m?new Array(t.length).fill(lu):lu;const A=()=>{if(x.active)if(e){const O=x.run();(r||d||(m?O.some((H,Q)=>La(H,b[Q])):La(O,b)))&&(w&&w(),Ir(e,l,3,[O,b===lu?void 0:m&&b[0]===lu?[]:b,g]),b=O)}else x.run()};A.allowRecurse=!!e;let T;i==="sync"?T=A:i==="post"?T=()=>tr(A,l&&l.suspense):(A.pre=!0,l&&(A.id=l.uid),T=()=>$f(A));const x=new Df(u,T);e?n?A():b=x.run():i==="post"?tr(x.run.bind(x),l&&l.suspense):x.run();const R=()=>{x.stop(),l&&l.scope&&xf(l.scope.effects,x)};return E&&E.push(R),R}function jk(t,e,n){const r=this.proxy,i=_n(t)?t.includes(".")?Nw(r,t):()=>r[t]:t.bind(r,r);let s;at(e)?s=e:(s=e.handler,n=e);const o=Ln;Po(this);const a=Ow(i,s.bind(r),n);return o?Po(o):Ts(),a}function Nw(t,e){const n=e.split(".");return()=>{let r=t;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}function ws(t,e){if(!Gt(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),Un(t))ws(t.value,e);else if(Ue(t))for(let n=0;n<t.length;n++)ws(t[n],e);else if(qo(t)||wo(t))t.forEach(n=>{ws(n,e)});else if(aw(t))for(const n in t)ws(t[n],e);return t}function nt(t,e){const n=kr;if(n===null)return t;const r=Sc(n)||n.proxy,i=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[o,a,l,u=Wt]=e[s];o&&(at(o)&&(o={mounted:o,updated:o}),o.deep&&ws(a),i.push({dir:o,instance:r,value:a,oldValue:void 0,arg:l,modifiers:u}))}return t}function hs(t,e,n,r){const i=t.dirs,s=e&&e.dirs;for(let o=0;o<i.length;o++){const a=i[o];s&&(a.oldValue=s[o].value);let l=a.dir[r];l&&(Wo(),Ir(l,n,8,[t.el,a,t,e]),Ko())}}const Cu=t=>!!t.type.__asyncLoader,Mw=t=>t.type.__isKeepAlive;function qk(t,e){Lw(t,"a",e)}function Hk(t,e){Lw(t,"da",e)}function Lw(t,e,n=Ln){const r=t.__wdc||(t.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(Ac(e,r,n),n){let i=n.parent;for(;i&&i.parent;)Mw(i.parent.vnode)&&Wk(r,e,n,i),i=i.parent}}function Wk(t,e,n,r){const i=Ac(e,t,r,!0);Uw(()=>{xf(r[e],i)},n)}function Ac(t,e,n=Ln,r=!1){if(n){const i=n[t]||(n[t]=[]),s=e.__weh||(e.__weh=(...o)=>{if(n.isUnmounted)return;Wo(),Po(n);const a=Ir(e,n,t,o);return Ts(),Ko(),a});return r?i.unshift(s):i.push(s),s}}const wi=t=>(e,n=Ln)=>(!Ba||t==="sp")&&Ac(t,(...r)=>e(...r),n),Kk=wi("bm"),Vw=wi("m"),Gk=wi("bu"),Qk=wi("u"),Yk=wi("bum"),Uw=wi("um"),Zk=wi("sp"),Xk=wi("rtg"),Jk=wi("rtc");function eE(t,e=Ln){Ac("ec",t,e)}const tE=Symbol.for("v-ndc");function Vi(t,e,n,r){let i;const s=n&&n[r];if(Ue(t)||_n(t)){i=new Array(t.length);for(let o=0,a=t.length;o<a;o++)i[o]=e(t[o],o,void 0,s&&s[o])}else if(typeof t=="number"){i=new Array(t);for(let o=0;o<t;o++)i[o]=e(o+1,o,void 0,s&&s[o])}else if(Gt(t))if(t[Symbol.iterator])i=Array.from(t,(o,a)=>e(o,a,void 0,s&&s[a]));else{const o=Object.keys(t);i=new Array(o.length);for(let a=0,l=o.length;a<l;a++){const u=o[a];i[a]=e(t[u],u,a,s&&s[a])}}else i=[];return n&&(n[r]=i),i}const Md=t=>t?Yw(t)?Sc(t)||t.proxy:Md(t.parent):null,Ia=Rn(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Md(t.parent),$root:t=>Md(t.root),$emit:t=>t.emit,$options:t=>Bf(t),$forceUpdate:t=>t.f||(t.f=()=>$f(t.update)),$nextTick:t=>t.n||(t.n=Ss.bind(t.proxy)),$watch:t=>jk.bind(t)}),qh=(t,e)=>t!==Wt&&!t.__isScriptSetup&&vt(t,e),nE={get({_:t},e){const{ctx:n,setupState:r,data:i,props:s,accessCache:o,type:a,appContext:l}=t;let u;if(e[0]!=="$"){const g=o[e];if(g!==void 0)switch(g){case 1:return r[e];case 2:return i[e];case 4:return n[e];case 3:return s[e]}else{if(qh(r,e))return o[e]=1,r[e];if(i!==Wt&&vt(i,e))return o[e]=2,i[e];if((u=t.propsOptions[0])&&vt(u,e))return o[e]=3,s[e];if(n!==Wt&&vt(n,e))return o[e]=4,n[e];Ld&&(o[e]=0)}}const d=Ia[e];let m,w;if(d)return e==="$attrs"&&rr(t,"get",e),d(t);if((m=a.__cssModules)&&(m=m[e]))return m;if(n!==Wt&&vt(n,e))return o[e]=4,n[e];if(w=l.config.globalProperties,vt(w,e))return w[e]},set({_:t},e,n){const{data:r,setupState:i,ctx:s}=t;return qh(i,e)?(i[e]=n,!0):r!==Wt&&vt(r,e)?(r[e]=n,!0):vt(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(s[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:i,propsOptions:s}},o){let a;return!!n[o]||t!==Wt&&vt(t,o)||qh(e,o)||(a=s[0])&&vt(a,o)||vt(r,o)||vt(Ia,o)||vt(i.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:vt(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function eg(t){return Ue(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let Ld=!0;function rE(t){const e=Bf(t),n=t.proxy,r=t.ctx;Ld=!1,e.beforeCreate&&tg(e.beforeCreate,t,"bc");const{data:i,computed:s,methods:o,watch:a,provide:l,inject:u,created:d,beforeMount:m,mounted:w,beforeUpdate:g,updated:E,activated:b,deactivated:A,beforeDestroy:T,beforeUnmount:x,destroyed:R,unmounted:O,render:H,renderTracked:Q,renderTriggered:z,errorCaptured:Z,serverPrefetch:ee,expose:oe,inheritAttrs:me,components:$,directives:X,filters:I}=e;if(u&&iE(u,r,null),o)for(const K in o){const he=o[K];at(he)&&(r[K]=he.bind(n))}if(i){const K=i.call(n,n);Gt(K)&&(t.data=Lf(K))}if(Ld=!0,s)for(const K in s){const he=s[K],ne=at(he)?he.bind(n,n):at(he.get)?he.get.bind(n,n):Tr,ce=!at(he)&&at(he.set)?he.set.bind(n):Tr,te=LE({get:ne,set:ce});Object.defineProperty(r,K,{enumerable:!0,configurable:!0,get:()=>te.value,set:J=>te.value=J})}if(a)for(const K in a)Fw(a[K],r,n,K);if(l){const K=at(l)?l.call(n):l;Reflect.ownKeys(K).forEach(he=>{cE(he,K[he])})}d&&tg(d,t,"c");function ae(K,he){Ue(he)?he.forEach(ne=>K(ne.bind(n))):he&&K(he.bind(n))}if(ae(Kk,m),ae(Vw,w),ae(Gk,g),ae(Qk,E),ae(qk,b),ae(Hk,A),ae(eE,Z),ae(Jk,Q),ae(Xk,z),ae(Yk,x),ae(Uw,O),ae(Zk,ee),Ue(oe))if(oe.length){const K=t.exposed||(t.exposed={});oe.forEach(he=>{Object.defineProperty(K,he,{get:()=>n[he],set:ne=>n[he]=ne})})}else t.exposed||(t.exposed={});H&&t.render===Tr&&(t.render=H),me!=null&&(t.inheritAttrs=me),$&&(t.components=$),X&&(t.directives=X)}function iE(t,e,n=Tr){Ue(t)&&(t=Vd(t));for(const r in t){const i=t[r];let s;Gt(i)?"default"in i?s=Su(i.from||r,i.default,!0):s=Su(i.from||r):s=Su(i),Un(s)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):e[r]=s}}function tg(t,e,n){Ir(Ue(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function Fw(t,e,n,r){const i=r.includes(".")?Nw(n,r):()=>n[r];if(_n(t)){const s=e[t];at(s)&&jh(i,s)}else if(at(t))jh(i,t.bind(n));else if(Gt(t))if(Ue(t))t.forEach(s=>Fw(s,e,n,r));else{const s=at(t.handler)?t.handler.bind(n):e[t.handler];at(s)&&jh(i,s,t)}}function Bf(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=t.appContext,a=s.get(e);let l;return a?l=a:!i.length&&!n&&!r?l=e:(l={},i.length&&i.forEach(u=>Hu(l,u,o,!0)),Hu(l,e,o)),Gt(e)&&s.set(e,l),l}function Hu(t,e,n,r=!1){const{mixins:i,extends:s}=e;s&&Hu(t,s,n,!0),i&&i.forEach(o=>Hu(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=sE[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const sE={data:ng,props:rg,emits:rg,methods:_a,computed:_a,beforeCreate:Wn,created:Wn,beforeMount:Wn,mounted:Wn,beforeUpdate:Wn,updated:Wn,beforeDestroy:Wn,beforeUnmount:Wn,destroyed:Wn,unmounted:Wn,activated:Wn,deactivated:Wn,errorCaptured:Wn,serverPrefetch:Wn,components:_a,directives:_a,watch:aE,provide:ng,inject:oE};function ng(t,e){return e?t?function(){return Rn(at(t)?t.call(this,this):t,at(e)?e.call(this,this):e)}:e:t}function oE(t,e){return _a(Vd(t),Vd(e))}function Vd(t){if(Ue(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Wn(t,e){return t?[...new Set([].concat(t,e))]:e}function _a(t,e){return t?Rn(Object.create(null),t,e):e}function rg(t,e){return t?Ue(t)&&Ue(e)?[...new Set([...t,...e])]:Rn(Object.create(null),eg(t),eg(e??{})):e}function aE(t,e){if(!t)return e;if(!e)return t;const n=Rn(Object.create(null),t);for(const r in e)n[r]=Wn(t[r],e[r]);return n}function $w(){return{app:null,config:{isNativeTag:L1,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let lE=0;function uE(t,e){return function(r,i=null){at(r)||(r=Rn({},r)),i!=null&&!Gt(i)&&(i=null);const s=$w(),o=new Set;let a=!1;const l=s.app={_uid:lE++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:FE,get config(){return s.config},set config(u){},use(u,...d){return o.has(u)||(u&&at(u.install)?(o.add(u),u.install(l,...d)):at(u)&&(o.add(u),u(l,...d))),l},mixin(u){return s.mixins.includes(u)||s.mixins.push(u),l},component(u,d){return d?(s.components[u]=d,l):s.components[u]},directive(u,d){return d?(s.directives[u]=d,l):s.directives[u]},mount(u,d,m){if(!a){const w=bn(r,i);return w.appContext=s,d&&e?e(w,u):t(w,u,m),a=!0,l._container=u,u.__vue_app__=l,Sc(w.component)||w.component.proxy}},unmount(){a&&(t(null,l._container),delete l._container.__vue_app__)},provide(u,d){return s.provides[u]=d,l},runWithContext(u){Wu=l;try{return u()}finally{Wu=null}}};return l}}let Wu=null;function cE(t,e){if(Ln){let n=Ln.provides;const r=Ln.parent&&Ln.parent.provides;r===n&&(n=Ln.provides=Object.create(r)),n[t]=e}}function Su(t,e,n=!1){const r=Ln||kr;if(r||Wu){const i=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:Wu._context.provides;if(i&&t in i)return i[t];if(arguments.length>1)return n&&at(e)?e.call(r&&r.proxy):e}}function hE(t,e,n,r=!1){const i={},s={};Bu(s,Cc,1),t.propsDefaults=Object.create(null),Bw(t,e,i,s);for(const o in t.propsOptions[0])o in i||(i[o]=void 0);n?t.props=r?i:Tk(i):t.type.props?t.props=i:t.props=s,t.attrs=s}function dE(t,e,n,r){const{props:i,attrs:s,vnode:{patchFlag:o}}=t,a=Tt(i),[l]=t.propsOptions;let u=!1;if((r||o>0)&&!(o&16)){if(o&8){const d=t.vnode.dynamicProps;for(let m=0;m<d.length;m++){let w=d[m];if(Ic(t.emitsOptions,w))continue;const g=e[w];if(l)if(vt(s,w))g!==s[w]&&(s[w]=g,u=!0);else{const E=Co(w);i[E]=Ud(l,a,E,g,t,!1)}else g!==s[w]&&(s[w]=g,u=!0)}}}else{Bw(t,e,i,s)&&(u=!0);let d;for(const m in a)(!e||!vt(e,m)&&((d=Ho(m))===m||!vt(e,d)))&&(l?n&&(n[m]!==void 0||n[d]!==void 0)&&(i[m]=Ud(l,a,m,void 0,t,!0)):delete i[m]);if(s!==a)for(const m in s)(!e||!vt(e,m))&&(delete s[m],u=!0)}u&&di(t,"set","$attrs")}function Bw(t,e,n,r){const[i,s]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(Au(l))continue;const u=e[l];let d;i&&vt(i,d=Co(l))?!s||!s.includes(d)?n[d]=u:(a||(a={}))[d]=u:Ic(t.emitsOptions,l)||(!(l in r)||u!==r[l])&&(r[l]=u,o=!0)}if(s){const l=Tt(n),u=a||Wt;for(let d=0;d<s.length;d++){const m=s[d];n[m]=Ud(i,l,m,u[m],t,!vt(u,m))}}return o}function Ud(t,e,n,r,i,s){const o=t[n];if(o!=null){const a=vt(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&at(l)){const{propsDefaults:u}=i;n in u?r=u[n]:(Po(i),r=u[n]=l.call(null,e),Ts())}else r=l}o[0]&&(s&&!a?r=!1:o[1]&&(r===""||r===Ho(n))&&(r=!0))}return r}function zw(t,e,n=!1){const r=e.propsCache,i=r.get(t);if(i)return i;const s=t.props,o={},a=[];let l=!1;if(!at(t)){const d=m=>{l=!0;const[w,g]=zw(m,e,!0);Rn(o,w),g&&a.push(...g)};!n&&e.mixins.length&&e.mixins.forEach(d),t.extends&&d(t.extends),t.mixins&&t.mixins.forEach(d)}if(!s&&!l)return Gt(t)&&r.set(t,_o),_o;if(Ue(s))for(let d=0;d<s.length;d++){const m=Co(s[d]);ig(m)&&(o[m]=Wt)}else if(s)for(const d in s){const m=Co(d);if(ig(m)){const w=s[d],g=o[m]=Ue(w)||at(w)?{type:w}:Rn({},w);if(g){const E=ag(Boolean,g.type),b=ag(String,g.type);g[0]=E>-1,g[1]=b<0||E<b,(E>-1||vt(g,"default"))&&a.push(m)}}}const u=[o,a];return Gt(t)&&r.set(t,u),u}function ig(t){return t[0]!=="$"}function sg(t){const e=t&&t.toString().match(/^\s*(function|class) (\w+)/);return e?e[2]:t===null?"null":""}function og(t,e){return sg(t)===sg(e)}function ag(t,e){return Ue(e)?e.findIndex(n=>og(n,t)):at(e)&&og(e,t)?0:-1}const jw=t=>t[0]==="_"||t==="$stable",zf=t=>Ue(t)?t.map(Ur):[Ur(t)],fE=(t,e,n)=>{if(e._n)return e;const r=Lk((...i)=>zf(e(...i)),n);return r._c=!1,r},qw=(t,e,n)=>{const r=t._ctx;for(const i in t){if(jw(i))continue;const s=t[i];if(at(s))e[i]=fE(i,s,r);else if(s!=null){const o=zf(s);e[i]=()=>o}}},Hw=(t,e)=>{const n=zf(e);t.slots.default=()=>n},pE=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=Tt(e),Bu(e,"_",n)):qw(e,t.slots={})}else t.slots={},e&&Hw(t,e);Bu(t.slots,Cc,1)},mE=(t,e,n)=>{const{vnode:r,slots:i}=t;let s=!0,o=Wt;if(r.shapeFlag&32){const a=e._;a?n&&a===1?s=!1:(Rn(i,e),!n&&a===1&&delete i._):(s=!e.$stable,qw(e,i)),o=e}else e&&(Hw(t,e),o={default:1});if(s)for(const a in i)!jw(a)&&!(a in o)&&delete i[a]};function Fd(t,e,n,r,i=!1){if(Ue(t)){t.forEach((w,g)=>Fd(w,e&&(Ue(e)?e[g]:e),n,r,i));return}if(Cu(r)&&!i)return;const s=r.shapeFlag&4?Sc(r.component)||r.component.proxy:r.el,o=i?null:s,{i:a,r:l}=t,u=e&&e.r,d=a.refs===Wt?a.refs={}:a.refs,m=a.setupState;if(u!=null&&u!==l&&(_n(u)?(d[u]=null,vt(m,u)&&(m[u]=null)):Un(u)&&(u.value=null)),at(l))$i(l,a,12,[o,d]);else{const w=_n(l),g=Un(l);if(w||g){const E=()=>{if(t.f){const b=w?vt(m,l)?m[l]:d[l]:l.value;i?Ue(b)&&xf(b,s):Ue(b)?b.includes(s)||b.push(s):w?(d[l]=[s],vt(m,l)&&(m[l]=d[l])):(l.value=[s],t.k&&(d[t.k]=l.value))}else w?(d[l]=o,vt(m,l)&&(m[l]=o)):g&&(l.value=o,t.k&&(d[t.k]=o))};o?(E.id=-1,tr(E,n)):E()}}}const tr=zk;function gE(t){return _E(t)}function _E(t,e){const n=Sd();n.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:o,createText:a,createComment:l,setText:u,setElementText:d,parentNode:m,nextSibling:w,setScopeId:g=Tr,insertStaticContent:E}=t,b=(F,V,_,B=null,M=null,S=null,C=!1,D=null,G=!!V.dynamicChildren)=>{if(F===V)return;F&&!la(F,V)&&(B=ut(F),J(F,M,S,!0),F=null),V.patchFlag===-2&&(G=!1,V.dynamicChildren=null);const{type:W,ref:L,shapeFlag:se}=V;switch(W){case xc:A(F,V,_,B);break;case Rs:T(F,V,_,B);break;case Ru:F==null&&x(V,_,B,C);break;case hn:$(F,V,_,B,M,S,C,D,G);break;default:se&1?H(F,V,_,B,M,S,C,D,G):se&6?X(F,V,_,B,M,S,C,D,G):(se&64||se&128)&&W.process(F,V,_,B,M,S,C,D,G,ze)}L!=null&&M&&Fd(L,F&&F.ref,S,V||F,!V)},A=(F,V,_,B)=>{if(F==null)r(V.el=a(V.children),_,B);else{const M=V.el=F.el;V.children!==F.children&&u(M,V.children)}},T=(F,V,_,B)=>{F==null?r(V.el=l(V.children||""),_,B):V.el=F.el},x=(F,V,_,B)=>{[F.el,F.anchor]=E(F.children,V,_,B,F.el,F.anchor)},R=({el:F,anchor:V},_,B)=>{let M;for(;F&&F!==V;)M=w(F),r(F,_,B),F=M;r(V,_,B)},O=({el:F,anchor:V})=>{let _;for(;F&&F!==V;)_=w(F),i(F),F=_;i(V)},H=(F,V,_,B,M,S,C,D,G)=>{C=C||V.type==="svg",F==null?Q(V,_,B,M,S,C,D,G):ee(F,V,M,S,C,D,G)},Q=(F,V,_,B,M,S,C,D)=>{let G,W;const{type:L,props:se,shapeFlag:de,transition:ue,dirs:ye}=F;if(G=F.el=o(F.type,S,se&&se.is,se),de&8?d(G,F.children):de&16&&Z(F.children,G,null,B,M,S&&L!=="foreignObject",C,D),ye&&hs(F,null,B,"created"),z(G,F,F.scopeId,C,B),se){for(const xe in se)xe!=="value"&&!Au(xe)&&s(G,xe,null,se[xe],S,F.children,B,M,tt);"value"in se&&s(G,"value",null,se.value),(W=se.onVnodeBeforeMount)&&Vr(W,B,F)}ye&&hs(F,null,B,"beforeMount");const Pe=(!M||M&&!M.pendingBranch)&&ue&&!ue.persisted;Pe&&ue.beforeEnter(G),r(G,V,_),((W=se&&se.onVnodeMounted)||Pe||ye)&&tr(()=>{W&&Vr(W,B,F),Pe&&ue.enter(G),ye&&hs(F,null,B,"mounted")},M)},z=(F,V,_,B,M)=>{if(_&&g(F,_),B)for(let S=0;S<B.length;S++)g(F,B[S]);if(M){let S=M.subTree;if(V===S){const C=M.vnode;z(F,C,C.scopeId,C.slotScopeIds,M.parent)}}},Z=(F,V,_,B,M,S,C,D,G=0)=>{for(let W=G;W<F.length;W++){const L=F[W]=D?Ri(F[W]):Ur(F[W]);b(null,L,V,_,B,M,S,C,D)}},ee=(F,V,_,B,M,S,C)=>{const D=V.el=F.el;let{patchFlag:G,dynamicChildren:W,dirs:L}=V;G|=F.patchFlag&16;const se=F.props||Wt,de=V.props||Wt;let ue;_&&ds(_,!1),(ue=de.onVnodeBeforeUpdate)&&Vr(ue,_,V,F),L&&hs(V,F,_,"beforeUpdate"),_&&ds(_,!0);const ye=M&&V.type!=="foreignObject";if(W?oe(F.dynamicChildren,W,D,_,B,ye,S):C||he(F,V,D,null,_,B,ye,S,!1),G>0){if(G&16)me(D,V,se,de,_,B,M);else if(G&2&&se.class!==de.class&&s(D,"class",null,de.class,M),G&4&&s(D,"style",se.style,de.style,M),G&8){const Pe=V.dynamicProps;for(let xe=0;xe<Pe.length;xe++){const Fe=Pe[xe],rt=se[Fe],ct=de[Fe];(ct!==rt||Fe==="value")&&s(D,Fe,rt,ct,M,F.children,_,B,tt)}}G&1&&F.children!==V.children&&d(D,V.children)}else!C&&W==null&&me(D,V,se,de,_,B,M);((ue=de.onVnodeUpdated)||L)&&tr(()=>{ue&&Vr(ue,_,V,F),L&&hs(V,F,_,"updated")},B)},oe=(F,V,_,B,M,S,C)=>{for(let D=0;D<V.length;D++){const G=F[D],W=V[D],L=G.el&&(G.type===hn||!la(G,W)||G.shapeFlag&70)?m(G.el):_;b(G,W,L,null,B,M,S,C,!0)}},me=(F,V,_,B,M,S,C)=>{if(_!==B){if(_!==Wt)for(const D in _)!Au(D)&&!(D in B)&&s(F,D,_[D],null,C,V.children,M,S,tt);for(const D in B){if(Au(D))continue;const G=B[D],W=_[D];G!==W&&D!=="value"&&s(F,D,W,G,C,V.children,M,S,tt)}"value"in B&&s(F,"value",_.value,B.value)}},$=(F,V,_,B,M,S,C,D,G)=>{const W=V.el=F?F.el:a(""),L=V.anchor=F?F.anchor:a("");let{patchFlag:se,dynamicChildren:de,slotScopeIds:ue}=V;ue&&(D=D?D.concat(ue):ue),F==null?(r(W,_,B),r(L,_,B),Z(V.children,_,L,M,S,C,D,G)):se>0&&se&64&&de&&F.dynamicChildren?(oe(F.dynamicChildren,de,_,M,S,C,D),(V.key!=null||M&&V===M.subTree)&&jf(F,V,!0)):he(F,V,_,L,M,S,C,D,G)},X=(F,V,_,B,M,S,C,D,G)=>{V.slotScopeIds=D,F==null?V.shapeFlag&512?M.ctx.activate(V,_,B,C,G):I(V,_,B,M,S,C,G):re(F,V,G)},I=(F,V,_,B,M,S,C)=>{const D=F.component=RE(F,B,M);if(Mw(F)&&(D.ctx.renderer=ze),PE(D),D.asyncDep){if(M&&M.registerDep(D,ae),!F.el){const G=D.subTree=bn(Rs);T(null,G,V,_)}return}ae(D,F,V,_,M,S,C)},re=(F,V,_)=>{const B=V.component=F.component;if(Fk(F,V,_))if(B.asyncDep&&!B.asyncResolved){K(B,V,_);return}else B.next=V,Dk(B.update),B.update();else V.el=F.el,B.vnode=V},ae=(F,V,_,B,M,S,C)=>{const D=()=>{if(F.isMounted){let{next:L,bu:se,u:de,parent:ue,vnode:ye}=F,Pe=L,xe;ds(F,!1),L?(L.el=ye.el,K(F,L,C)):L=ye,se&&xu(se),(xe=L.props&&L.props.onVnodeBeforeUpdate)&&Vr(xe,ue,L,ye),ds(F,!0);const Fe=zh(F),rt=F.subTree;F.subTree=Fe,b(rt,Fe,m(rt.el),ut(rt),F,M,S),L.el=Fe.el,Pe===null&&$k(F,Fe.el),de&&tr(de,M),(xe=L.props&&L.props.onVnodeUpdated)&&tr(()=>Vr(xe,ue,L,ye),M)}else{let L;const{el:se,props:de}=V,{bm:ue,m:ye,parent:Pe}=F,xe=Cu(V);if(ds(F,!1),ue&&xu(ue),!xe&&(L=de&&de.onVnodeBeforeMount)&&Vr(L,Pe,V),ds(F,!0),se&&Qe){const Fe=()=>{F.subTree=zh(F),Qe(se,F.subTree,F,M,null)};xe?V.type.__asyncLoader().then(()=>!F.isUnmounted&&Fe()):Fe()}else{const Fe=F.subTree=zh(F);b(null,Fe,_,B,F,M,S),V.el=Fe.el}if(ye&&tr(ye,M),!xe&&(L=de&&de.onVnodeMounted)){const Fe=V;tr(()=>Vr(L,Pe,Fe),M)}(V.shapeFlag&256||Pe&&Cu(Pe.vnode)&&Pe.vnode.shapeFlag&256)&&F.a&&tr(F.a,M),F.isMounted=!0,V=_=B=null}},G=F.effect=new Df(D,()=>$f(W),F.scope),W=F.update=()=>G.run();W.id=F.uid,ds(F,!0),W()},K=(F,V,_)=>{V.component=F;const B=F.vnode.props;F.vnode=V,F.next=null,dE(F,V.props,B,_),mE(F,V.children,_),Wo(),Xm(),Ko()},he=(F,V,_,B,M,S,C,D,G=!1)=>{const W=F&&F.children,L=F?F.shapeFlag:0,se=V.children,{patchFlag:de,shapeFlag:ue}=V;if(de>0){if(de&128){ce(W,se,_,B,M,S,C,D,G);return}else if(de&256){ne(W,se,_,B,M,S,C,D,G);return}}ue&8?(L&16&&tt(W,M,S),se!==W&&d(_,se)):L&16?ue&16?ce(W,se,_,B,M,S,C,D,G):tt(W,M,S,!0):(L&8&&d(_,""),ue&16&&Z(se,_,B,M,S,C,D,G))},ne=(F,V,_,B,M,S,C,D,G)=>{F=F||_o,V=V||_o;const W=F.length,L=V.length,se=Math.min(W,L);let de;for(de=0;de<se;de++){const ue=V[de]=G?Ri(V[de]):Ur(V[de]);b(F[de],ue,_,null,M,S,C,D,G)}W>L?tt(F,M,S,!0,!1,se):Z(V,_,B,M,S,C,D,G,se)},ce=(F,V,_,B,M,S,C,D,G)=>{let W=0;const L=V.length;let se=F.length-1,de=L-1;for(;W<=se&&W<=de;){const ue=F[W],ye=V[W]=G?Ri(V[W]):Ur(V[W]);if(la(ue,ye))b(ue,ye,_,null,M,S,C,D,G);else break;W++}for(;W<=se&&W<=de;){const ue=F[se],ye=V[de]=G?Ri(V[de]):Ur(V[de]);if(la(ue,ye))b(ue,ye,_,null,M,S,C,D,G);else break;se--,de--}if(W>se){if(W<=de){const ue=de+1,ye=ue<L?V[ue].el:B;for(;W<=de;)b(null,V[W]=G?Ri(V[W]):Ur(V[W]),_,ye,M,S,C,D,G),W++}}else if(W>de)for(;W<=se;)J(F[W],M,S,!0),W++;else{const ue=W,ye=W,Pe=new Map;for(W=ye;W<=de;W++){const Ot=V[W]=G?Ri(V[W]):Ur(V[W]);Ot.key!=null&&Pe.set(Ot.key,W)}let xe,Fe=0;const rt=de-ye+1;let ct=!1,Lt=0;const ft=new Array(rt);for(W=0;W<rt;W++)ft[W]=0;for(W=ue;W<=se;W++){const Ot=F[W];if(Fe>=rt){J(Ot,M,S,!0);continue}let kt;if(Ot.key!=null)kt=Pe.get(Ot.key);else for(xe=ye;xe<=de;xe++)if(ft[xe-ye]===0&&la(Ot,V[xe])){kt=xe;break}kt===void 0?J(Ot,M,S,!0):(ft[kt-ye]=W+1,kt>=Lt?Lt=kt:ct=!0,b(Ot,V[kt],_,null,M,S,C,D,G),Fe++)}const dn=ct?wE(ft):_o;for(xe=dn.length-1,W=rt-1;W>=0;W--){const Ot=ye+W,kt=V[Ot],qn=Ot+1<L?V[Ot+1].el:B;ft[W]===0?b(null,kt,_,qn,M,S,C,D,G):ct&&(xe<0||W!==dn[xe]?te(kt,_,qn,2):xe--)}}},te=(F,V,_,B,M=null)=>{const{el:S,type:C,transition:D,children:G,shapeFlag:W}=F;if(W&6){te(F.component.subTree,V,_,B);return}if(W&128){F.suspense.move(V,_,B);return}if(W&64){C.move(F,V,_,ze);return}if(C===hn){r(S,V,_);for(let se=0;se<G.length;se++)te(G[se],V,_,B);r(F.anchor,V,_);return}if(C===Ru){R(F,V,_);return}if(B!==2&&W&1&&D)if(B===0)D.beforeEnter(S),r(S,V,_),tr(()=>D.enter(S),M);else{const{leave:se,delayLeave:de,afterLeave:ue}=D,ye=()=>r(S,V,_),Pe=()=>{se(S,()=>{ye(),ue&&ue()})};de?de(S,ye,Pe):Pe()}else r(S,V,_)},J=(F,V,_,B=!1,M=!1)=>{const{type:S,props:C,ref:D,children:G,dynamicChildren:W,shapeFlag:L,patchFlag:se,dirs:de}=F;if(D!=null&&Fd(D,null,_,F,!0),L&256){V.ctx.deactivate(F);return}const ue=L&1&&de,ye=!Cu(F);let Pe;if(ye&&(Pe=C&&C.onVnodeBeforeUnmount)&&Vr(Pe,V,F),L&6)q(F.component,_,B);else{if(L&128){F.suspense.unmount(_,B);return}ue&&hs(F,null,V,"beforeUnmount"),L&64?F.type.remove(F,V,_,M,ze,B):W&&(S!==hn||se>0&&se&64)?tt(W,V,_,!1,!0):(S===hn&&se&384||!M&&L&16)&&tt(G,V,_),B&&ke(F)}(ye&&(Pe=C&&C.onVnodeUnmounted)||ue)&&tr(()=>{Pe&&Vr(Pe,V,F),ue&&hs(F,null,V,"unmounted")},_)},ke=F=>{const{type:V,el:_,anchor:B,transition:M}=F;if(V===hn){ve(_,B);return}if(V===Ru){O(F);return}const S=()=>{i(_),M&&!M.persisted&&M.afterLeave&&M.afterLeave()};if(F.shapeFlag&1&&M&&!M.persisted){const{leave:C,delayLeave:D}=M,G=()=>C(_,S);D?D(F.el,S,G):G()}else S()},ve=(F,V)=>{let _;for(;F!==V;)_=w(F),i(F),F=_;i(V)},q=(F,V,_)=>{const{bum:B,scope:M,update:S,subTree:C,um:D}=F;B&&xu(B),M.stop(),S&&(S.active=!1,J(C,F,V,_)),D&&tr(D,V),tr(()=>{F.isUnmounted=!0},V),V&&V.pendingBranch&&!V.isUnmounted&&F.asyncDep&&!F.asyncResolved&&F.suspenseId===V.pendingId&&(V.deps--,V.deps===0&&V.resolve())},tt=(F,V,_,B=!1,M=!1,S=0)=>{for(let C=S;C<F.length;C++)J(F[C],V,_,B,M)},ut=F=>F.shapeFlag&6?ut(F.component.subTree):F.shapeFlag&128?F.suspense.next():w(F.anchor||F.el),qe=(F,V,_)=>{F==null?V._vnode&&J(V._vnode,null,null,!0):b(V._vnode||null,F,V,null,null,null,_),Xm(),Sw(),V._vnode=F},ze={p:b,um:J,m:te,r:ke,mt:I,mc:Z,pc:he,pbc:oe,n:ut,o:t};let He,Qe;return e&&([He,Qe]=e(ze)),{render:qe,hydrate:He,createApp:uE(qe,He)}}function ds({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function jf(t,e,n=!1){const r=t.children,i=e.children;if(Ue(r)&&Ue(i))for(let s=0;s<r.length;s++){const o=r[s];let a=i[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[s]=Ri(i[s]),a.el=o.el),n||jf(o,a)),a.type===xc&&(a.el=o.el)}}function wE(t){const e=t.slice(),n=[0];let r,i,s,o,a;const l=t.length;for(r=0;r<l;r++){const u=t[r];if(u!==0){if(i=n[n.length-1],t[i]<u){e[r]=i,n.push(r);continue}for(s=0,o=n.length-1;s<o;)a=s+o>>1,t[n[a]]<u?s=a+1:o=a;u<t[n[s]]&&(s>0&&(e[r]=n[s-1]),n[s]=r)}}for(s=n.length,o=n[s-1];s-- >0;)n[s]=o,o=e[o];return n}const yE=t=>t.__isTeleport,Aa=t=>t&&(t.disabled||t.disabled===""),lg=t=>typeof SVGElement<"u"&&t instanceof SVGElement,$d=(t,e)=>{const n=t&&t.to;return _n(n)?e?e(n):null:n},vE={__isTeleport:!0,process(t,e,n,r,i,s,o,a,l,u){const{mc:d,pc:m,pbc:w,o:{insert:g,querySelector:E,createText:b,createComment:A}}=u,T=Aa(e.props);let{shapeFlag:x,children:R,dynamicChildren:O}=e;if(t==null){const H=e.el=b(""),Q=e.anchor=b("");g(H,n,r),g(Q,n,r);const z=e.target=$d(e.props,E),Z=e.targetAnchor=b("");z&&(g(Z,z),o=o||lg(z));const ee=(oe,me)=>{x&16&&d(R,oe,me,i,s,o,a,l)};T?ee(n,Q):z&&ee(z,Z)}else{e.el=t.el;const H=e.anchor=t.anchor,Q=e.target=t.target,z=e.targetAnchor=t.targetAnchor,Z=Aa(t.props),ee=Z?n:Q,oe=Z?H:z;if(o=o||lg(Q),O?(w(t.dynamicChildren,O,ee,i,s,o,a),jf(t,e,!0)):l||m(t,e,ee,oe,i,s,o,a,!1),T)Z||uu(e,n,H,u,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const me=e.target=$d(e.props,E);me&&uu(e,me,null,u,0)}else Z&&uu(e,Q,z,u,1)}Ww(e)},remove(t,e,n,r,{um:i,o:{remove:s}},o){const{shapeFlag:a,children:l,anchor:u,targetAnchor:d,target:m,props:w}=t;if(m&&s(d),(o||!Aa(w))&&(s(u),a&16))for(let g=0;g<l.length;g++){const E=l[g];i(E,e,n,!0,!!E.dynamicChildren)}},move:uu,hydrate:bE};function uu(t,e,n,{o:{insert:r},m:i},s=2){s===0&&r(t.targetAnchor,e,n);const{el:o,anchor:a,shapeFlag:l,children:u,props:d}=t,m=s===2;if(m&&r(o,e,n),(!m||Aa(d))&&l&16)for(let w=0;w<u.length;w++)i(u[w],e,n,2);m&&r(a,e,n)}function bE(t,e,n,r,i,s,{o:{nextSibling:o,parentNode:a,querySelector:l}},u){const d=e.target=$d(e.props,l);if(d){const m=d._lpa||d.firstChild;if(e.shapeFlag&16)if(Aa(e.props))e.anchor=u(o(t),e,a(t),n,r,i,s),e.targetAnchor=m;else{e.anchor=o(t);let w=m;for(;w;)if(w=o(w),w&&w.nodeType===8&&w.data==="teleport anchor"){e.targetAnchor=w,d._lpa=e.targetAnchor&&o(e.targetAnchor);break}u(m,e,d,n,r,i,s)}Ww(e)}return e.anchor&&o(e.anchor)}const kE=vE;function Ww(t){const e=t.ctx;if(e&&e.ut){let n=t.children[0].el;for(;n!==t.targetAnchor;)n.nodeType===1&&n.setAttribute("data-v-owner",e.uid),n=n.nextSibling;e.ut()}}const hn=Symbol.for("v-fgt"),xc=Symbol.for("v-txt"),Rs=Symbol.for("v-cmt"),Ru=Symbol.for("v-stc"),xa=[];let Er=null;function Ce(t=!1){xa.push(Er=t?null:[])}function EE(){xa.pop(),Er=xa[xa.length-1]||null}let $a=1;function ug(t){$a+=t}function Kw(t){return t.dynamicChildren=$a>0?Er||_o:null,EE(),$a>0&&Er&&Er.push(t),t}function Me(t,e,n,r,i,s){return Kw(N(t,e,n,r,i,s,!0))}function $r(t,e,n,r,i){return Kw(bn(t,e,n,r,i,!0))}function TE(t){return t?t.__v_isVNode===!0:!1}function la(t,e){return t.type===e.type&&t.key===e.key}const Cc="__vInternal",Gw=({key:t})=>t??null,Pu=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?_n(t)||Un(t)||at(t)?{i:kr,r:t,k:e,f:!!n}:t:null);function N(t,e=null,n=null,r=0,i=null,s=t===hn?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Gw(e),ref:e&&Pu(e),scopeId:Dw,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:kr};return a?(qf(l,n),s&128&&t.normalize(l)):n&&(l.shapeFlag|=_n(n)?8:16),$a>0&&!o&&Er&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&Er.push(l),l}const bn=IE;function IE(t,e=null,n=null,r=0,i=null,s=!1){if((!t||t===tE)&&(t=Rs),TE(t)){const a=Ro(t,e,!0);return n&&qf(a,n),$a>0&&!s&&Er&&(a.shapeFlag&6?Er[Er.indexOf(t)]=a:Er.push(a)),a.patchFlag|=-2,a}if(ME(t)&&(t=t.__vccOpts),e){e=AE(e);let{class:a,style:l}=e;a&&!_n(a)&&(e.class=Sf(a)),Gt(l)&&(kw(l)&&!Ue(l)&&(l=Rn({},l)),e.style=Cs(l))}const o=_n(t)?1:Bk(t)?128:yE(t)?64:Gt(t)?4:at(t)?2:0;return N(t,e,n,r,i,o,s,!0)}function AE(t){return t?kw(t)||Cc in t?Rn({},t):t:null}function Ro(t,e,n=!1){const{props:r,ref:i,patchFlag:s,children:o}=t,a=e?xE(r||{},e):r;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:a,key:a&&Gw(a),ref:e&&e.ref?n&&i?Ue(i)?i.concat(Pu(e)):[i,Pu(e)]:Pu(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==hn?s===-1?16:s|16:s,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Ro(t.ssContent),ssFallback:t.ssFallback&&Ro(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function ys(t=" ",e=0){return bn(xc,null,t,e)}function Qw(t,e){const n=bn(Ru,null,t);return n.staticCount=e,n}function St(t="",e=!1){return e?(Ce(),$r(Rs,null,t)):bn(Rs,null,t)}function Ur(t){return t==null||typeof t=="boolean"?bn(Rs):Ue(t)?bn(hn,null,t.slice()):typeof t=="object"?Ri(t):bn(xc,null,String(t))}function Ri(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Ro(t)}function qf(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(Ue(e))n=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),qf(t,i()),i._c&&(i._d=!0));return}else{n=32;const i=e._;!i&&!(Cc in e)?e._ctx=kr:i===3&&kr&&(kr.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else at(e)?(e={default:e,_ctx:kr},n=32):(e=String(e),r&64?(n=16,e=[ys(e)]):n=8);t.children=e,t.shapeFlag|=n}function xE(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=Sf([e.class,r.class]));else if(i==="style")e.style=Cs([e.style,r.style]);else if(bc(i)){const s=e[i],o=r[i];o&&s!==o&&!(Ue(s)&&s.includes(o))&&(e[i]=s?[].concat(s,o):o)}else i!==""&&(e[i]=r[i])}return e}function Vr(t,e,n,r=null){Ir(t,e,7,[n,r])}const CE=$w();let SE=0;function RE(t,e,n){const r=t.type,i=(e?e.appContext:t.appContext)||CE,s={uid:SE++,vnode:t,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new Q1(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:zw(r,i),emitsOptions:Pw(r,i),emit:null,emitted:null,propsDefaults:Wt,inheritAttrs:r.inheritAttrs,ctx:Wt,data:Wt,props:Wt,attrs:Wt,slots:Wt,refs:Wt,setupState:Wt,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=Mk.bind(null,s),t.ce&&t.ce(s),s}let Ln=null,Hf,ao,cg="__VUE_INSTANCE_SETTERS__";(ao=Sd()[cg])||(ao=Sd()[cg]=[]),ao.push(t=>Ln=t),Hf=t=>{ao.length>1?ao.forEach(e=>e(t)):ao[0](t)};const Po=t=>{Hf(t),t.scope.on()},Ts=()=>{Ln&&Ln.scope.off(),Hf(null)};function Yw(t){return t.vnode.shapeFlag&4}let Ba=!1;function PE(t,e=!1){Ba=e;const{props:n,children:r}=t.vnode,i=Yw(t);hE(t,n,i,e),pE(t,r);const s=i?DE(t,e):void 0;return Ba=!1,s}function DE(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=Ew(new Proxy(t.ctx,nE));const{setup:r}=n;if(r){const i=t.setupContext=r.length>1?NE(t):null;Po(t),Wo();const s=$i(r,t,0,[t.props,i]);if(Ko(),Ts(),sw(s)){if(s.then(Ts,Ts),e)return s.then(o=>{hg(t,o,e)}).catch(o=>{Tc(o,t,0)});t.asyncDep=s}else hg(t,s,e)}else Zw(t,e)}function hg(t,e,n){at(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Gt(e)&&(t.setupState=Aw(e)),Zw(t,n)}let dg;function Zw(t,e,n){const r=t.type;if(!t.render){if(!e&&dg&&!r.render){const i=r.template||Bf(t).template;if(i){const{isCustomElement:s,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:l}=r,u=Rn(Rn({isCustomElement:s,delimiters:a},o),l);r.render=dg(i,u)}}t.render=r.render||Tr}Po(t),Wo(),rE(t),Ko(),Ts()}function OE(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(e,n){return rr(t,"get","$attrs"),e[n]}}))}function NE(t){const e=n=>{t.exposed=n||{}};return{get attrs(){return OE(t)},slots:t.slots,emit:t.emit,expose:e}}function Sc(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(Aw(Ew(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Ia)return Ia[n](t)},has(e,n){return n in e||n in Ia}}))}function ME(t){return at(t)&&"__vccOpts"in t}const LE=(t,e)=>Sk(t,e,Ba),VE=Symbol.for("v-scx"),UE=()=>Su(VE),FE="3.3.4",$E="http://www.w3.org/2000/svg",_s=typeof document<"u"?document:null,fg=_s&&_s.createElement("template"),BE={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const i=e?_s.createElementNS($E,t):_s.createElement(t,n?{is:n}:void 0);return t==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:t=>_s.createTextNode(t),createComment:t=>_s.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>_s.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,i,s){const o=n?n.previousSibling:e.lastChild;if(i&&(i===s||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),n),!(i===s||!(i=i.nextSibling)););else{fg.innerHTML=r?`<svg>${t}</svg>`:t;const a=fg.content;if(r){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}};function zE(t,e,n){const r=t._vtc;r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}function jE(t,e,n){const r=t.style,i=_n(n);if(n&&!i){if(e&&!_n(e))for(const s in e)n[s]==null&&Bd(r,s,"");for(const s in n)Bd(r,s,n[s])}else{const s=r.display;i?e!==n&&(r.cssText=n):e&&t.removeAttribute("style"),"_vod"in t&&(r.display=s)}}const pg=/\s*!important$/;function Bd(t,e,n){if(Ue(n))n.forEach(r=>Bd(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=qE(t,e);pg.test(n)?t.setProperty(Ho(r),n.replace(pg,""),"important"):t[r]=n}}const mg=["Webkit","Moz","ms"],Hh={};function qE(t,e){const n=Hh[e];if(n)return n;let r=Co(e);if(r!=="filter"&&r in t)return Hh[e]=r;r=lw(r);for(let i=0;i<mg.length;i++){const s=mg[i]+r;if(s in t)return Hh[e]=s}return e}const gg="http://www.w3.org/1999/xlink";function HE(t,e,n,r,i){if(r&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(gg,e.slice(6,e.length)):t.setAttributeNS(gg,e,n);else{const s=K1(e);n==null||s&&!uw(n)?t.removeAttribute(e):t.setAttribute(e,s?"":n)}}function WE(t,e,n,r,i,s,o){if(e==="innerHTML"||e==="textContent"){r&&o(r,i,s),t[e]=n??"";return}const a=t.tagName;if(e==="value"&&a!=="PROGRESS"&&!a.includes("-")){t._value=n;const u=a==="OPTION"?t.getAttribute("value"):t.value,d=n??"";u!==d&&(t.value=d),n==null&&t.removeAttribute(e);return}let l=!1;if(n===""||n==null){const u=typeof t[e];u==="boolean"?n=uw(n):n==null&&u==="string"?(n="",l=!0):u==="number"&&(n=0,l=!0)}try{t[e]=n}catch{}l&&t.removeAttribute(e)}function Pi(t,e,n,r){t.addEventListener(e,n,r)}function KE(t,e,n,r){t.removeEventListener(e,n,r)}function GE(t,e,n,r,i=null){const s=t._vei||(t._vei={}),o=s[e];if(r&&o)o.value=r;else{const[a,l]=QE(e);if(r){const u=s[e]=XE(r,i);Pi(t,a,u,l)}else o&&(KE(t,a,o,l),s[e]=void 0)}}const _g=/(?:Once|Passive|Capture)$/;function QE(t){let e;if(_g.test(t)){e={};let r;for(;r=t.match(_g);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Ho(t.slice(2)),e]}let Wh=0;const YE=Promise.resolve(),ZE=()=>Wh||(YE.then(()=>Wh=0),Wh=Date.now());function XE(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Ir(JE(r,n.value),e,5,[r])};return n.value=t,n.attached=ZE(),n}function JE(t,e){if(Ue(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>i=>!i._stopped&&r&&r(i))}else return e}const wg=/^on[a-z]/,eT=(t,e,n,r,i=!1,s,o,a,l)=>{e==="class"?zE(t,r,i):e==="style"?jE(t,n,r):bc(e)?Af(e)||GE(t,e,n,r,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):tT(t,e,r,i))?WE(t,e,r,s,o,a,l):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),HE(t,e,r,i))};function tT(t,e,n,r){return r?!!(e==="innerHTML"||e==="textContent"||e in t&&wg.test(e)&&at(n)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||wg.test(e)&&_n(n)?!1:e in t}const Do=t=>{const e=t.props["onUpdate:modelValue"]||!1;return Ue(e)?n=>xu(e,n):e};function nT(t){t.target.composing=!0}function yg(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Ft={created(t,{modifiers:{lazy:e,trim:n,number:r}},i){t._assign=Do(i);const s=r||i.props&&i.props.type==="number";Pi(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;n&&(a=a.trim()),s&&(a=zu(a)),t._assign(a)}),n&&Pi(t,"change",()=>{t.value=t.value.trim()}),e||(Pi(t,"compositionstart",nT),Pi(t,"compositionend",yg),Pi(t,"change",yg))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,modifiers:{lazy:n,trim:r,number:i}},s){if(t._assign=Do(s),t.composing||document.activeElement===t&&t.type!=="range"&&(n||r&&t.value.trim()===e||(i||t.type==="number")&&zu(t.value)===e))return;const o=e??"";t.value!==o&&(t.value=o)}},fi={deep:!0,created(t,e,n){t._assign=Do(n),Pi(t,"change",()=>{const r=t._modelValue,i=za(t),s=t.checked,o=t._assign;if(Ue(r)){const a=Rf(r,i),l=a!==-1;if(s&&!l)o(r.concat(i));else if(!s&&l){const u=[...r];u.splice(a,1),o(u)}}else if(qo(r)){const a=new Set(r);s?a.add(i):a.delete(i),o(a)}else o(Xw(t,s))})},mounted:vg,beforeUpdate(t,e,n){t._assign=Do(n),vg(t,e,n)}};function vg(t,{value:e,oldValue:n},r){t._modelValue=e,Ue(e)?t.checked=Rf(e,r.props.value)>-1:qo(e)?t.checked=e.has(r.props.value):e!==n&&(t.checked=cl(e,Xw(t,!0)))}const po={deep:!0,created(t,{value:e,modifiers:{number:n}},r){const i=qo(e);Pi(t,"change",()=>{const s=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?zu(za(o)):za(o));t._assign(t.multiple?i?new Set(s):s:s[0])}),t._assign=Do(r)},mounted(t,{value:e}){bg(t,e)},beforeUpdate(t,e,n){t._assign=Do(n)},updated(t,{value:e}){bg(t,e)}};function bg(t,e){const n=t.multiple;if(!(n&&!Ue(e)&&!qo(e))){for(let r=0,i=t.options.length;r<i;r++){const s=t.options[r],o=za(s);if(n)Ue(e)?s.selected=Rf(e,o)>-1:s.selected=e.has(o);else if(cl(za(s),e)){t.selectedIndex!==r&&(t.selectedIndex=r);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function za(t){return"_value"in t?t._value:t.value}function Xw(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const rT=["ctrl","shift","alt","meta"],iT={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>rT.some(n=>t[`${n}Key`]&&!e.includes(n))},Kh=(t,e)=>(n,...r)=>{for(let i=0;i<e.length;i++){const s=iT[e[i]];if(s&&s(n,e))return}return t(n,...r)},sT=Rn({patchProp:eT},BE);let kg;function oT(){return kg||(kg=gE(sT))}const aT=(...t)=>{const e=oT().createApp(...t),{mount:n}=e;return e.mount=r=>{const i=lT(r);if(!i)return;const s=e._component;!at(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.innerHTML="";const o=n(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e};function lT(t){return _n(t)?document.querySelector(t):t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jw=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},uT=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},ey={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,d=s>>2,m=(s&3)<<4|a>>4;let w=(a&15)<<2|u>>6,g=u&63;l||(g=64,o||(w=64)),r.push(n[d],n[m],n[w],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Jw(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):uT(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const m=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||m==null)throw new cT;const w=s<<2|a>>4;if(r.push(w),u!==64){const g=a<<4&240|u>>2;if(r.push(g),m!==64){const E=u<<6&192|m;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class cT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const hT=function(t){const e=Jw(t);return ey.encodeByteArray(e,!0)},Ku=function(t){return hT(t).replace(/\./g,"")},ty=function(t){try{return ey.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fT=()=>dT().__FIREBASE_DEFAULTS__,pT=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},mT=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&ty(t[1]);return e&&JSON.parse(e)},Wf=()=>{try{return fT()||pT()||mT()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},ny=t=>{var e,n;return(n=(e=Wf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},gT=t=>{const e=ny(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},ry=()=>{var t;return(t=Wf())===null||t===void 0?void 0:t.config},iy=t=>{var e;return(e=Wf())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _T{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wT(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[Ku(JSON.stringify(n)),Ku(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function yT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(zn())}function vT(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function bT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function kT(){const t=zn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function ET(){try{return typeof indexedDB=="object"}catch{return!1}}function TT(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IT="FirebaseError";class yi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=IT,Object.setPrototypeOf(this,yi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,hl.prototype.create)}}class hl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?AT(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new yi(i,a,r)}}function AT(t,e){return t.replace(xT,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const xT=/\{\$([^}]+)}/g;function CT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Gu(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Eg(s)&&Eg(o)){if(!Gu(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Eg(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dl(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function wa(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function ya(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function ST(t,e){const n=new RT(t,e);return n.subscribe.bind(n)}class RT{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");PT(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Gh),i.error===void 0&&(i.error=Gh),i.complete===void 0&&(i.complete=Gh);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function PT(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Gh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xt(t){return t&&t._delegate?t._delegate:t}class Ps{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ps="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new _T;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(NT(e))try{this.getOrInitializeService({instanceIdentifier:ps})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=ps){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ps){return this.instances.has(e)}getOptions(e=ps){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:OT(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ps){return this.component?this.component.multipleInstances?e:ps:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function OT(t){return t===ps?void 0:t}function NT(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new DT(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(gt||(gt={}));const LT={debug:gt.DEBUG,verbose:gt.VERBOSE,info:gt.INFO,warn:gt.WARN,error:gt.ERROR,silent:gt.SILENT},VT=gt.INFO,UT={[gt.DEBUG]:"log",[gt.VERBOSE]:"log",[gt.INFO]:"info",[gt.WARN]:"warn",[gt.ERROR]:"error"},FT=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=UT[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Kf{constructor(e){this.name=e,this._logLevel=VT,this._logHandler=FT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in gt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?LT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,gt.DEBUG,...e),this._logHandler(this,gt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,gt.VERBOSE,...e),this._logHandler(this,gt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,gt.INFO,...e),this._logHandler(this,gt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,gt.WARN,...e),this._logHandler(this,gt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,gt.ERROR,...e),this._logHandler(this,gt.ERROR,...e)}}const $T=(t,e)=>e.some(n=>t instanceof n);let Tg,Ig;function BT(){return Tg||(Tg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function zT(){return Ig||(Ig=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const sy=new WeakMap,zd=new WeakMap,oy=new WeakMap,Qh=new WeakMap,Gf=new WeakMap;function jT(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Bi(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&sy.set(n,t)}).catch(()=>{}),Gf.set(e,t),e}function qT(t){if(zd.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});zd.set(t,e)}let jd={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return zd.get(t);if(e==="objectStoreNames")return t.objectStoreNames||oy.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Bi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function HT(t){jd=t(jd)}function WT(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Yh(this),e,...n);return oy.set(r,e.sort?e.sort():[e]),Bi(r)}:zT().includes(t)?function(...e){return t.apply(Yh(this),e),Bi(sy.get(this))}:function(...e){return Bi(t.apply(Yh(this),e))}}function KT(t){return typeof t=="function"?WT(t):(t instanceof IDBTransaction&&qT(t),$T(t,BT())?new Proxy(t,jd):t)}function Bi(t){if(t instanceof IDBRequest)return jT(t);if(Qh.has(t))return Qh.get(t);const e=KT(t);return e!==t&&(Qh.set(t,e),Gf.set(e,t)),e}const Yh=t=>Gf.get(t);function GT(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Bi(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Bi(o.result),l.oldVersion,l.newVersion,Bi(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const QT=["get","getKey","getAll","getAllKeys","count"],YT=["put","add","delete","clear"],Zh=new Map;function Ag(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Zh.get(e))return Zh.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=YT.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||QT.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return Zh.set(e,s),s}HT(t=>({...t,get:(e,n,r)=>Ag(e,n)||t.get(e,n,r),has:(e,n)=>!!Ag(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(XT(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function XT(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const qd="@firebase/app",xg="0.9.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ds=new Kf("@firebase/app"),JT="@firebase/app-compat",eI="@firebase/analytics-compat",tI="@firebase/analytics",nI="@firebase/app-check-compat",rI="@firebase/app-check",iI="@firebase/auth",sI="@firebase/auth-compat",oI="@firebase/database",aI="@firebase/database-compat",lI="@firebase/functions",uI="@firebase/functions-compat",cI="@firebase/installations",hI="@firebase/installations-compat",dI="@firebase/messaging",fI="@firebase/messaging-compat",pI="@firebase/performance",mI="@firebase/performance-compat",gI="@firebase/remote-config",_I="@firebase/remote-config-compat",wI="@firebase/storage",yI="@firebase/storage-compat",vI="@firebase/firestore",bI="@firebase/firestore-compat",kI="firebase",EI="10.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hd="[DEFAULT]",TI={[qd]:"fire-core",[JT]:"fire-core-compat",[tI]:"fire-analytics",[eI]:"fire-analytics-compat",[rI]:"fire-app-check",[nI]:"fire-app-check-compat",[iI]:"fire-auth",[sI]:"fire-auth-compat",[oI]:"fire-rtdb",[aI]:"fire-rtdb-compat",[lI]:"fire-fn",[uI]:"fire-fn-compat",[cI]:"fire-iid",[hI]:"fire-iid-compat",[dI]:"fire-fcm",[fI]:"fire-fcm-compat",[pI]:"fire-perf",[mI]:"fire-perf-compat",[gI]:"fire-rc",[_I]:"fire-rc-compat",[wI]:"fire-gcs",[yI]:"fire-gcs-compat",[vI]:"fire-fst",[bI]:"fire-fst-compat","fire-js":"fire-js",[kI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qu=new Map,Wd=new Map;function II(t,e){try{t.container.addComponent(e)}catch(n){Ds.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Oo(t){const e=t.name;if(Wd.has(e))return Ds.debug(`There were multiple attempts to register component ${e}.`),!1;Wd.set(e,t);for(const n of Qu.values())II(n,t);return!0}function Qf(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},zi=new hl("app","Firebase",AI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ps("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw zi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Go=EI;function ay(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Hd,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw zi.create("bad-app-name",{appName:String(i)});if(n||(n=ry()),!n)throw zi.create("no-options");const s=Qu.get(i);if(s){if(Gu(n,s.options)&&Gu(r,s.config))return s;throw zi.create("duplicate-app",{appName:i})}const o=new MT(i);for(const l of Wd.values())o.addComponent(l);const a=new xI(n,r,o);return Qu.set(i,a),a}function ly(t=Hd){const e=Qu.get(t);if(!e&&t===Hd&&ry())return ay();if(!e)throw zi.create("no-app",{appName:t});return e}function ji(t,e,n){var r;let i=(r=TI[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ds.warn(a.join(" "));return}Oo(new Ps(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CI="firebase-heartbeat-database",SI=1,ja="firebase-heartbeat-store";let Xh=null;function uy(){return Xh||(Xh=GT(CI,SI,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(ja)}}}).catch(t=>{throw zi.create("idb-open",{originalErrorMessage:t.message})})),Xh}async function RI(t){try{return await(await uy()).transaction(ja).objectStore(ja).get(cy(t))}catch(e){if(e instanceof yi)Ds.warn(e.message);else{const n=zi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ds.warn(n.message)}}}async function Cg(t,e){try{const r=(await uy()).transaction(ja,"readwrite");await r.objectStore(ja).put(e,cy(t)),await r.done}catch(n){if(n instanceof yi)Ds.warn(n.message);else{const r=zi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ds.warn(r.message)}}}function cy(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PI=1024,DI=30*24*60*60*1e3;class OI{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new MI(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Sg();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const s=new Date(i.date).valueOf();return Date.now()-s<=DI}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Sg(),{heartbeatsToSend:n,unsentEntries:r}=NI(this._heartbeatsCache.heartbeats),i=Ku(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function Sg(){return new Date().toISOString().substring(0,10)}function NI(t,e=PI){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Rg(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Rg(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class MI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ET()?TT().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await RI(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Cg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Cg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Rg(t){return Ku(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LI(t){Oo(new Ps("platform-logger",e=>new ZT(e),"PRIVATE")),Oo(new Ps("heartbeat",e=>new OI(e),"PRIVATE")),ji(qd,xg,t),ji(qd,xg,"esm2017"),ji("fire-js","")}LI("");function Yf(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Pg(t){return t!==void 0&&t.enterprise!==void 0}class VI{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(n=>n.provider==="EMAIL_PASSWORD_PROVIDER"&&n.enforcementState!=="OFF")}}function hy(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const UI=hy,dy=new hl("auth","Firebase",hy());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yu=new Kf("@firebase/auth");function FI(t,...e){Yu.logLevel<=gt.WARN&&Yu.warn(`Auth (${Go}): ${t}`,...e)}function Du(t,...e){Yu.logLevel<=gt.ERROR&&Yu.error(`Auth (${Go}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ar(t,...e){throw Zf(t,...e)}function Kr(t,...e){return Zf(t,...e)}function $I(t,e,n){const r=Object.assign(Object.assign({},UI()),{[e]:n});return new hl("auth","Firebase",r).create(e,{appName:t.name})}function Zf(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return dy.create(t,...e)}function $e(t,e,...n){if(!t)throw Zf(e,...n)}function ui(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Du(e),new Error(e)}function pi(t,e){t||ui(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kd(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function BI(){return Dg()==="http:"||Dg()==="https:"}function Dg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(BI()||vT()||"connection"in navigator)?navigator.onLine:!0}function jI(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{constructor(e,n){this.shortDelay=e,this.longDelay=n,pi(n>e,"Short delay should be less than long delay!"),this.isMobile=yT()||bT()}get(){return zI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xf(t,e){pi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fy{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;ui("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;ui("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;ui("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HI=new fl(3e4,6e4);function Qi(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function vi(t,e,n,r,i={}){return py(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=dl(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),fy.fetch()(my(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},s))})}async function py(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},qI),e);try{const i=new WI(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw cu(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw cu(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw cu(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw cu(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw $I(t,d,u);Ar(t,d)}}catch(i){if(i instanceof yi)throw i;Ar(t,"network-request-failed",{message:String(i)})}}async function pl(t,e,n,r,i={}){const s=await vi(t,e,n,r,i);return"mfaPendingCredential"in s&&Ar(t,"multi-factor-auth-required",{_serverResponse:s}),s}function my(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?Xf(t.config,i):`${t.config.apiScheme}://${i}`}class WI{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Kr(this.auth,"network-request-failed")),HI.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function cu(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Kr(t,e,r);return i.customData._tokenResponse=n,i}async function KI(t,e){return vi(t,"GET","/v2/recaptchaConfig",Qi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GI(t,e){return vi(t,"POST","/v1/accounts:delete",e)}async function QI(t,e){return vi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ca(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function YI(t,e=!1){const n=Xt(t),r=await n.getIdToken(e),i=Jf(r);$e(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Ca(Jh(i.auth_time)),issuedAtTime:Ca(Jh(i.iat)),expirationTime:Ca(Jh(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Jh(t){return Number(t)*1e3}function Jf(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Du("JWT malformed, contained fewer than 3 sections"),null;try{const i=ty(n);return i?JSON.parse(i):(Du("Failed to decode base64 JWT payload"),null)}catch(i){return Du("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function ZI(t){const e=Jf(t);return $e(e,"internal-error"),$e(typeof e.exp<"u","internal-error"),$e(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Os(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof yi&&XI(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function XI({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gy{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ca(this.lastLoginAt),this.creationTime=Ca(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zu(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Os(t,QI(n,{idToken:r}));$e(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?n2(s.providerUserInfo):[],a=t2(t.providerData,o),l=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),d=l?u:!1,m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new gy(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,m)}async function e2(t){const e=Xt(t);await Zu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function t2(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function n2(t){return t.map(e=>{var{providerId:n}=e,r=Yf(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r2(t,e){const n=await py(t,{},async()=>{const r=dl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=my(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",fy.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){$e(e.idToken,"internal-error"),$e(typeof e.idToken<"u","internal-error"),$e(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ZI(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return $e(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await r2(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new qa;return r&&($e(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&($e(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&($e(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new qa,this.toJSON())}_performRefresh(){return ui("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Si(t,e){$e(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Is{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Yf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new JI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new gy(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Os(this,this.stsTokenManager.getToken(this.auth,e));return $e(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return YI(this,e)}reload(){return e2(this)}_assign(e){this!==e&&($e(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Is(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){$e(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Zu(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Os(this,GI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,u,d;const m=(r=n.displayName)!==null&&r!==void 0?r:void 0,w=(i=n.email)!==null&&i!==void 0?i:void 0,g=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,E=(o=n.photoURL)!==null&&o!==void 0?o:void 0,b=(a=n.tenantId)!==null&&a!==void 0?a:void 0,A=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,T=(u=n.createdAt)!==null&&u!==void 0?u:void 0,x=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:R,emailVerified:O,isAnonymous:H,providerData:Q,stsTokenManager:z}=n;$e(R&&z,e,"internal-error");const Z=qa.fromJSON(this.name,z);$e(typeof R=="string",e,"internal-error"),Si(m,e.name),Si(w,e.name),$e(typeof O=="boolean",e,"internal-error"),$e(typeof H=="boolean",e,"internal-error"),Si(g,e.name),Si(E,e.name),Si(b,e.name),Si(A,e.name),Si(T,e.name),Si(x,e.name);const ee=new Is({uid:R,auth:e,email:w,emailVerified:O,displayName:m,isAnonymous:H,photoURL:E,phoneNumber:g,tenantId:b,stsTokenManager:Z,createdAt:T,lastLoginAt:x});return Q&&Array.isArray(Q)&&(ee.providerData=Q.map(oe=>Object.assign({},oe))),A&&(ee._redirectEventId=A),ee}static async _fromIdTokenResponse(e,n,r=!1){const i=new qa;i.updateFromServerResponse(n);const s=new Is({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Zu(s),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Og=new Map;function ci(t){pi(t instanceof Function,"Expected a class definition");let e=Og.get(t);return e?(pi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Og.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _y{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}_y.type="NONE";const Ng=_y;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ou(t,e,n){return`firebase:${t}:${e}:${n}`}class bo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Ou(this.userKey,i.apiKey,s),this.fullPersistenceKey=Ou("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Is._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new bo(ci(Ng),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||ci(Ng);const o=Ou(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const d=await u._get(o);if(d){const m=Is._fromJSON(e,d);u!==s&&(a=m),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new bo(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new bo(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mg(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(vy(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(wy(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ky(e))return"Blackberry";if(Ey(e))return"Webos";if(ep(e))return"Safari";if((e.includes("chrome/")||yy(e))&&!e.includes("edge/"))return"Chrome";if(by(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function wy(t=zn()){return/firefox\//i.test(t)}function ep(t=zn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function yy(t=zn()){return/crios\//i.test(t)}function vy(t=zn()){return/iemobile/i.test(t)}function by(t=zn()){return/android/i.test(t)}function ky(t=zn()){return/blackberry/i.test(t)}function Ey(t=zn()){return/webos/i.test(t)}function Rc(t=zn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function i2(t=zn()){var e;return Rc(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function s2(){return kT()&&document.documentMode===10}function Ty(t=zn()){return Rc(t)||by(t)||Ey(t)||ky(t)||/windows phone/i.test(t)||vy(t)}function o2(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iy(t,e=[]){let n;switch(t){case"Browser":n=Mg(zn());break;case"Worker":n=`${Mg(zn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Go}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l2(t,e={}){return vi(t,"GET","/v2/passwordPolicy",Qi(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u2=6;class c2{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:u2,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Lg(this),this.idTokenSubscription=new Lg(this),this.beforeStateQueue=new a2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=dy,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ci(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await bo.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return $e(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Zu(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=jI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?Xt(e):null;return n&&$e(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&$e(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(ci(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await l2(this),n=new c2(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new hl("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ci(e)||this._popupRedirectResolver;$e(n,this,"argument-error"),this.redirectPersistenceManager=await bo.create(this,[ci(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if($e(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return $e(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Iy(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&FI(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Yi(t){return Xt(t)}class Lg{constructor(e){this.auth=e,this.observer=null,this.addObserver=ST(n=>this.observer=n)}get next(){return $e(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d2(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function Ay(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Kr("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",d2().appendChild(r)})}function f2(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const p2="https://www.google.com/recaptcha/enterprise.js?render=",m2="recaptcha-enterprise",g2="NO_RECAPTCHA";class _2{constructor(e){this.type=m2,this.auth=Yi(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{KI(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new VI(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;Pg(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o(g2)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&Pg(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}Ay(p2+a).then(()=>{i(a,s,o)}).catch(l=>{o(l)})}}).catch(a=>{o(a)})})}}async function No(t,e,n,r=!1){const i=new _2(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w2(t,e){const n=Qf(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Gu(s,e??{}))return i;Ar(i,"already-initialized")}return n.initialize({options:e})}function y2(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ci);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function v2(t,e,n){const r=Yi(t);$e(r._canInitEmulator,r,"emulator-config-failed"),$e(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=xy(e),{host:o,port:a}=b2(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||k2()}function xy(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function b2(t){const e=xy(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Vg(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:Vg(o)}}}function Vg(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function k2(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ui("not implemented")}_getIdTokenResponse(e){return ui("not implemented")}_linkToIdToken(e,n){return ui("not implemented")}_getReauthenticationResolver(e){return ui("not implemented")}}async function Cy(t,e){return vi(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ed(t,e){return pl(t,"POST","/v1/accounts:signInWithPassword",Qi(t,e))}async function E2(t,e){return vi(t,"POST","/v1/accounts:sendOobCode",Qi(t,e))}async function td(t,e){return E2(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T2(t,e){return pl(t,"POST","/v1/accounts:signInWithEmailLink",Qi(t,e))}async function I2(t,e){return pl(t,"POST","/v1/accounts:signInWithEmailLink",Qi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha extends tp{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Ha(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Ha(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){var n;switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(!((n=e._getRecaptchaConfig())===null||n===void 0)&&n.emailPasswordEnabled){const i=await No(e,r,"signInWithPassword");return ed(e,i)}else return ed(e,r).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const s=await No(e,r,"signInWithPassword");return ed(e,s)}else return Promise.reject(i)});case"emailLink":return T2(e,{email:this._email,oobCode:this._password});default:Ar(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":return Cy(e,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return I2(e,{idToken:n,email:this._email,oobCode:this._password});default:Ar(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ko(t,e){return pl(t,"POST","/v1/accounts:signInWithIdp",Qi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A2="http://localhost";class Ns extends tp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ns(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ar("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=Yf(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Ns(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return ko(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ko(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ko(e,n)}buildRequest(){const e={requestUri:A2,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=dl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x2(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function C2(t){const e=wa(ya(t)).link,n=e?wa(ya(e)).deep_link_id:null,r=wa(ya(t)).deep_link_id;return(r?wa(ya(r)).link:null)||r||n||e||t}class np{constructor(e){var n,r,i,s,o,a;const l=wa(ya(e)),u=(n=l.apiKey)!==null&&n!==void 0?n:null,d=(r=l.oobCode)!==null&&r!==void 0?r:null,m=x2((i=l.mode)!==null&&i!==void 0?i:null);$e(u&&d&&m,"argument-error"),this.apiKey=u,this.operation=m,this.code=d,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=C2(e);try{return new np(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(){this.providerId=Qo.PROVIDER_ID}static credential(e,n){return Ha._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=np.parseLink(n);return $e(r,"argument-error"),Ha._fromEmailAndCode(e,r.code,r.tenantId)}}Qo.PROVIDER_ID="password";Qo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Qo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml extends Sy{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di extends ml{constructor(){super("facebook.com")}static credential(e){return Ns._fromParams({providerId:Di.PROVIDER_ID,signInMethod:Di.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Di.credentialFromTaggedObject(e)}static credentialFromError(e){return Di.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Di.credential(e.oauthAccessToken)}catch{return null}}}Di.FACEBOOK_SIGN_IN_METHOD="facebook.com";Di.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi extends ml{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ns._fromParams({providerId:Oi.PROVIDER_ID,signInMethod:Oi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Oi.credentialFromTaggedObject(e)}static credentialFromError(e){return Oi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Oi.credential(n,r)}catch{return null}}}Oi.GOOGLE_SIGN_IN_METHOD="google.com";Oi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni extends ml{constructor(){super("github.com")}static credential(e){return Ns._fromParams({providerId:Ni.PROVIDER_ID,signInMethod:Ni.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ni.credentialFromTaggedObject(e)}static credentialFromError(e){return Ni.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ni.credential(e.oauthAccessToken)}catch{return null}}}Ni.GITHUB_SIGN_IN_METHOD="github.com";Ni.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi extends ml{constructor(){super("twitter.com")}static credential(e,n){return Ns._fromParams({providerId:Mi.PROVIDER_ID,signInMethod:Mi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Mi.credentialFromTaggedObject(e)}static credentialFromError(e){return Mi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Mi.credential(n,r)}catch{return null}}}Mi.TWITTER_SIGN_IN_METHOD="twitter.com";Mi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nd(t,e){return pl(t,"POST","/v1/accounts:signUp",Qi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Is._fromIdTokenResponse(e,r,i),o=Ug(r);return new Ms({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=Ug(r);return new Ms({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function Ug(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu extends yi{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Xu.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Xu(e,n,r,i)}}function Ry(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Xu._fromErrorAndOperation(t,s,e,r):s})}async function S2(t,e,n=!1){const r=await Os(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ms._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R2(t,e,n=!1){const{auth:r}=t,i="reauthenticate";try{const s=await Os(t,Ry(r,i,e,t),n);$e(s.idToken,r,"internal-error");const o=Jf(s.idToken);$e(o,r,"internal-error");const{sub:a}=o;return $e(t.uid===a,r,"user-mismatch"),Ms._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Ar(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Py(t,e,n=!1){const r="signIn",i=await Ry(t,r,e),s=await Ms._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function P2(t,e){return Py(Yi(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rd(t,e,n){var r;$e(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),$e(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&($e(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&($e(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dy(t){const e=Yi(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function D2(t,e,n){var r;const i=Yi(t),s={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};if(!((r=i._getRecaptchaConfig())===null||r===void 0)&&r.emailPasswordEnabled){const o=await No(i,s,"getOobCode",!0);n&&rd(i,o,n),await td(i,o)}else n&&rd(i,s,n),await td(i,s).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const a=await No(i,s,"getOobCode",!0);n&&rd(i,a,n),await td(i,a)}else return Promise.reject(o)})}async function O2(t,e,n){var r;const i=Yi(t),s={returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"};let o;if(!((r=i._getRecaptchaConfig())===null||r===void 0)&&r.emailPasswordEnabled){const u=await No(i,s,"signUpPassword");o=nd(i,u)}else o=nd(i,s).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const d=await No(i,s,"signUpPassword");return nd(i,d)}throw u});const a=await o.catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&Dy(t),u}),l=await Ms._fromIdTokenResponse(i,"signIn",a);return await i._updateCurrentUser(l.user),l}function N2(t,e,n){return P2(Xt(t),Qo.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Dy(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M2(t,e){return vi(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oy(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Xt(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Os(r,M2(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function L2(t,e){return Ny(Xt(t),e,null)}function V2(t,e){return Ny(Xt(t),null,e)}async function Ny(t,e,n){const{auth:r}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(s.email=e),n&&(s.password=n);const o=await Os(t,Cy(r,s));await t._updateTokensIfNecessary(o,!0)}function U2(t,e,n,r){return Xt(t).onIdTokenChanged(e,n,r)}function F2(t,e,n){return Xt(t).beforeAuthStateChanged(e,n)}function $2(t,e,n,r){return Xt(t).onAuthStateChanged(e,n,r)}function B2(t){return Xt(t).signOut()}async function z2(t){return Xt(t).delete()}const Ju="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class My{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ju,"1"),this.storage.removeItem(Ju),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j2(){const t=zn();return ep(t)||Rc(t)}const q2=1e3,H2=10;class Ly extends My{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=j2()&&o2(),this.fallbackToPolling=Ty(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);s2()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,H2):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},q2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Ly.type="LOCAL";const W2=Ly;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vy extends My{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Vy.type="SESSION";const Uy=Vy;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K2(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Pc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(n.origin,s)),l=await K2(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Pc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rp(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=rp("",20);i.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(m){const w=m;if(w.data.eventId===u)switch(w.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(w.data.response);break;default:clearTimeout(d),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gr(){return window}function Q2(t){Gr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fy(){return typeof Gr().WorkerGlobalScope<"u"&&typeof Gr().importScripts=="function"}async function Y2(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Z2(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function X2(){return Fy()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $y="firebaseLocalStorageDb",J2=1,ec="firebaseLocalStorage",By="fbase_key";class gl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Dc(t,e){return t.transaction([ec],e?"readwrite":"readonly").objectStore(ec)}function eA(){const t=indexedDB.deleteDatabase($y);return new gl(t).toPromise()}function Gd(){const t=indexedDB.open($y,J2);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(ec,{keyPath:By})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(ec)?e(r):(r.close(),await eA(),e(await Gd()))})})}async function Fg(t,e,n){const r=Dc(t,!0).put({[By]:e,value:n});return new gl(r).toPromise()}async function tA(t,e){const n=Dc(t,!1).get(e),r=await new gl(n).toPromise();return r===void 0?null:r.value}function $g(t,e){const n=Dc(t,!0).delete(e);return new gl(n).toPromise()}const nA=800,rA=3;class zy{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Gd(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>rA)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Fy()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Pc._getInstance(X2()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await Y2(),!this.activeServiceWorker)return;this.sender=new G2(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Z2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Gd();return await Fg(e,Ju,"1"),await $g(e,Ju),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Fg(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>tA(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>$g(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Dc(i,!1).getAll();return new gl(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),nA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}zy.type="LOCAL";const iA=zy;new fl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sA(t,e){return e?ci(e):($e(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip extends tp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ko(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ko(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ko(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function oA(t){return Py(t.auth,new ip(t),t.bypassAuthState)}function aA(t){const{auth:e,user:n}=t;return $e(n,e,"internal-error"),R2(n,new ip(t),t.bypassAuthState)}async function lA(t){const{auth:e,user:n}=t;return $e(n,e,"internal-error"),S2(n,new ip(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jy{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return oA;case"linkViaPopup":case"linkViaRedirect":return lA;case"reauthViaPopup":case"reauthViaRedirect":return aA;default:Ar(this.auth,"internal-error")}}resolve(e){pi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){pi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uA=new fl(2e3,1e4);class mo extends jy{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,mo.currentPopupAction&&mo.currentPopupAction.cancel(),mo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return $e(e,this.auth,"internal-error"),e}async onExecution(){pi(this.filter.length===1,"Popup operations only handle one event");const e=rp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Kr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Kr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,mo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Kr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,uA.get())};e()}}mo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cA="pendingRedirect",Nu=new Map;class hA extends jy{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Nu.get(this.auth._key());if(!e){try{const r=await dA(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Nu.set(this.auth._key(),e)}return this.bypassAuthState||Nu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function dA(t,e){const n=mA(e),r=pA(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function fA(t,e){Nu.set(t._key(),e)}function pA(t){return ci(t._redirectPersistence)}function mA(t){return Ou(cA,t.config.apiKey,t.name)}async function gA(t,e,n=!1){const r=Yi(t),i=sA(r,e),o=await new hA(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _A=10*60*1e3;class wA{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!yA(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!qy(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Kr(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=_A&&this.cachedEventUids.clear(),this.cachedEventUids.has(Bg(e))}saveEventToCache(e){this.cachedEventUids.add(Bg(e)),this.lastProcessedEventTime=Date.now()}}function Bg(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function qy({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function yA(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return qy(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vA(t,e={}){return vi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bA=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,kA=/^https?/;async function EA(t){if(t.config.emulator)return;const{authorizedDomains:e}=await vA(t);for(const n of e)try{if(TA(n))return}catch{}Ar(t,"unauthorized-domain")}function TA(t){const e=Kd(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!kA.test(n))return!1;if(bA.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IA=new fl(3e4,6e4);function zg(){const t=Gr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function AA(t){return new Promise((e,n)=>{var r,i,s;function o(){zg(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{zg(),n(Kr(t,"network-request-failed"))},timeout:IA.get()})}if(!((i=(r=Gr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Gr().gapi)===null||s===void 0)&&s.load)o();else{const a=f2("iframefcb");return Gr()[a]=()=>{gapi.load?o():n(Kr(t,"network-request-failed"))},Ay(`https://apis.google.com/js/api.js?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Mu=null,e})}let Mu=null;function xA(t){return Mu=Mu||AA(t),Mu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CA=new fl(5e3,15e3),SA="__/auth/iframe",RA="emulator/auth/iframe",PA={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},DA=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function OA(t){const e=t.config;$e(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Xf(e,RA):`https://${t.config.authDomain}/${SA}`,r={apiKey:e.apiKey,appName:t.name,v:Go},i=DA.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${dl(r).slice(1)}`}async function NA(t){const e=await xA(t),n=Gr().gapi;return $e(n,t,"internal-error"),e.open({where:document.body,url:OA(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:PA,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Kr(t,"network-request-failed"),a=Gr().setTimeout(()=>{s(o)},CA.get());function l(){Gr().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MA={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},LA=500,VA=600,UA="_blank",FA="http://localhost";class jg{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function $A(t,e,n,r=LA,i=VA){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},MA),{width:r.toString(),height:i.toString(),top:s,left:o}),u=zn().toLowerCase();n&&(a=yy(u)?UA:n),wy(u)&&(e=e||FA,l.scrollbars="yes");const d=Object.entries(l).reduce((w,[g,E])=>`${w}${g}=${E},`,"");if(i2(u)&&a!=="_self")return BA(e||"",a),new jg(null);const m=window.open(e||"",a,d);$e(m,t,"popup-blocked");try{m.focus()}catch{}return new jg(m)}function BA(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA="__/auth/handler",jA="emulator/auth/handler",qA=encodeURIComponent("fac");async function qg(t,e,n,r,i,s){$e(t.config.authDomain,t,"auth-domain-config-required"),$e(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Go,eventId:i};if(e instanceof Sy){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",CT(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,m]of Object.entries(s||{}))o[d]=m}if(e instanceof ml){const d=e.getScopes().filter(m=>m!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),u=l?`#${qA}=${encodeURIComponent(l)}`:"";return`${HA(t)}?${dl(a).slice(1)}${u}`}function HA({config:t}){return t.emulator?Xf(t,jA):`https://${t.authDomain}/${zA}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const id="webStorageSupport";class WA{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Uy,this._completeRedirectFn=gA,this._overrideRedirectResult=fA}async _openPopup(e,n,r,i){var s;pi((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await qg(e,n,r,Kd(),i);return $A(e,o,rp())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await qg(e,n,r,Kd(),i);return Q2(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(pi(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await NA(e),r=new wA(e);return n.register("authEvent",i=>($e(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(id,{type:id},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[id];o!==void 0&&n(!!o),Ar(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=EA(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Ty()||ep()||Rc()}}const KA=WA;var Hg="@firebase/auth",Wg="1.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){$e(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QA(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function YA(t){Oo(new Ps("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;$e(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Iy(t)},u=new h2(r,i,s,l);return y2(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Oo(new Ps("auth-internal",e=>{const n=Yi(e.getProvider("auth").getImmediate());return(r=>new GA(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ji(Hg,Wg,QA(t)),ji(Hg,Wg,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZA=5*60,XA=iy("authIdTokenMaxAge")||ZA;let Kg=null;const JA=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>XA)return;const i=n==null?void 0:n.token;Kg!==i&&(Kg=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function ex(t=ly()){const e=Qf(t,"auth");if(e.isInitialized())return e.getImmediate();const n=w2(t,{popupRedirectResolver:KA,persistence:[iA,W2,Uy]}),r=iy("authTokenSyncURL");if(r){const s=JA(r);F2(n,s,()=>s(n.currentUser)),U2(n,o=>s(o))}const i=ny("auth");return i&&v2(n,`http://${i}`),n}YA("Browser");var tx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ae,sp=sp||{},Ge=tx||self;function Oc(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function _l(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function nx(t){return Object.prototype.hasOwnProperty.call(t,sd)&&t[sd]||(t[sd]=++rx)}var sd="closure_uid_"+(1e9*Math.random()>>>0),rx=0;function ix(t,e,n){return t.call.apply(t.bind,arguments)}function sx(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Fn(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Fn=ix:Fn=sx,Fn.apply(null,arguments)}function hu(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function Tn(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function Zi(){this.s=this.s,this.o=this.o}var ox=0;Zi.prototype.s=!1;Zi.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),ox!=0)&&nx(this)};Zi.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Hy=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function op(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function Gg(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(Oc(r)){const i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function $n(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}$n.prototype.h=function(){this.defaultPrevented=!0};var ax=function(){if(!Ge.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Ge.addEventListener("test",()=>{},e),Ge.removeEventListener("test",()=>{},e)}catch{}return t}();function Wa(t){return/^[\s\xa0]*$/.test(t)}function Nc(){var t=Ge.navigator;return t&&(t=t.userAgent)?t:""}function Br(t){return Nc().indexOf(t)!=-1}function ap(t){return ap[" "](t),t}ap[" "]=function(){};function lx(t,e){var n=eC;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var ux=Br("Opera"),Mo=Br("Trident")||Br("MSIE"),Wy=Br("Edge"),Qd=Wy||Mo,Ky=Br("Gecko")&&!(Nc().toLowerCase().indexOf("webkit")!=-1&&!Br("Edge"))&&!(Br("Trident")||Br("MSIE"))&&!Br("Edge"),cx=Nc().toLowerCase().indexOf("webkit")!=-1&&!Br("Edge");function Gy(){var t=Ge.document;return t?t.documentMode:void 0}var Yd;e:{var od="",ad=function(){var t=Nc();if(Ky)return/rv:([^\);]+)(\)|;)/.exec(t);if(Wy)return/Edge\/([\d\.]+)/.exec(t);if(Mo)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(cx)return/WebKit\/(\S+)/.exec(t);if(ux)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(ad&&(od=ad?ad[1]:""),Mo){var ld=Gy();if(ld!=null&&ld>parseFloat(od)){Yd=String(ld);break e}}Yd=od}var Zd;if(Ge.document&&Mo){var Qg=Gy();Zd=Qg||parseInt(Yd,10)||void 0}else Zd=void 0;var hx=Zd;function Ka(t,e){if($n.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Ky){e:{try{ap(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:dx[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Ka.$.h.call(this)}}Tn(Ka,$n);var dx={2:"touch",3:"pen",4:"mouse"};Ka.prototype.h=function(){Ka.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var wl="closure_listenable_"+(1e6*Math.random()|0),fx=0;function px(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++fx,this.fa=this.ia=!1}function Mc(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function lp(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function mx(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function Qy(t){const e={};for(const n in t)e[n]=t[n];return e}const Yg="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Yy(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let s=0;s<Yg.length;s++)n=Yg[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Lc(t){this.src=t,this.g={},this.h=0}Lc.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=Jd(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new px(e,this.src,s,!!r,i),e.ia=n,t.push(e)),e};function Xd(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=Hy(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(Mc(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function Jd(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}var up="closure_lm_"+(1e6*Math.random()|0),ud={};function Zy(t,e,n,r,i){if(r&&r.once)return Jy(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)Zy(t,e[s],n,r,i);return null}return n=dp(n),t&&t[wl]?t.O(e,n,_l(r)?!!r.capture:!!r,i):Xy(t,e,n,!1,r,i)}function Xy(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=_l(i)?!!i.capture:!!i,a=hp(t);if(a||(t[up]=a=new Lc(t)),n=a.add(e,n,r,o,s),n.proxy)return n;if(r=gx(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)ax||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(tv(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function gx(){function t(n){return e.call(t.src,t.listener,n)}const e=_x;return t}function Jy(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)Jy(t,e[s],n,r,i);return null}return n=dp(n),t&&t[wl]?t.P(e,n,_l(r)?!!r.capture:!!r,i):Xy(t,e,n,!0,r,i)}function ev(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)ev(t,e[s],n,r,i);else r=_l(r)?!!r.capture:!!r,n=dp(n),t&&t[wl]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=Jd(s,n,r,i),-1<n&&(Mc(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=hp(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Jd(e,n,r,i)),(n=-1<t?e[t]:null)&&cp(n))}function cp(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[wl])Xd(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(tv(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=hp(e))?(Xd(n,t),n.h==0&&(n.src=null,e[up]=null)):Mc(t)}}}function tv(t){return t in ud?ud[t]:ud[t]="on"+t}function _x(t,e){if(t.fa)t=!0;else{e=new Ka(e,this);var n=t.listener,r=t.la||t.src;t.ia&&cp(t),t=n.call(r,e)}return t}function hp(t){return t=t[up],t instanceof Lc?t:null}var cd="__closure_events_fn_"+(1e9*Math.random()>>>0);function dp(t){return typeof t=="function"?t:(t[cd]||(t[cd]=function(e){return t.handleEvent(e)}),t[cd])}function En(){Zi.call(this),this.i=new Lc(this),this.S=this,this.J=null}Tn(En,Zi);En.prototype[wl]=!0;En.prototype.removeEventListener=function(t,e,n,r){ev(this,t,e,n,r)};function Sn(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new $n(e,t);else if(e instanceof $n)e.target=e.target||t;else{var i=e;e=new $n(r,t),Yy(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=du(o,r,!0,e)&&i}if(o=e.g=t,i=du(o,r,!0,e)&&i,i=du(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.g=n[s],i=du(o,r,!1,e)&&i}En.prototype.N=function(){if(En.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Mc(n[r]);delete t.g[e],t.h--}}this.J=null};En.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};En.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function du(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&Xd(t.i,o),i=a.call(l,r)!==!1&&i}}return i&&!r.defaultPrevented}var fp=Ge.JSON.stringify;class wx{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function yx(){var t=pp;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class vx{constructor(){this.h=this.g=null}add(e,n){const r=nv.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var nv=new wx(()=>new bx,t=>t.reset());class bx{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function kx(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function Ex(t){Ge.setTimeout(()=>{throw t},0)}let Ga,Qa=!1,pp=new vx,rv=()=>{const t=Ge.Promise.resolve(void 0);Ga=()=>{t.then(Tx)}};var Tx=()=>{for(var t;t=yx();){try{t.h.call(t.g)}catch(n){Ex(n)}var e=nv;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Qa=!1};function Vc(t,e){En.call(this),this.h=t||1,this.g=e||Ge,this.j=Fn(this.qb,this),this.l=Date.now()}Tn(Vc,En);Ae=Vc.prototype;Ae.ga=!1;Ae.T=null;Ae.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Sn(this,"tick"),this.ga&&(mp(this),this.start()))}};Ae.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function mp(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}Ae.N=function(){Vc.$.N.call(this),mp(this),delete this.g};function gp(t,e,n){if(typeof t=="function")n&&(t=Fn(t,n));else if(t&&typeof t.handleEvent=="function")t=Fn(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:Ge.setTimeout(t,e||0)}function iv(t){t.g=gp(()=>{t.g=null,t.i&&(t.i=!1,iv(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class Ix extends Zi{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:iv(this)}N(){super.N(),this.g&&(Ge.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ya(t){Zi.call(this),this.h=t,this.g={}}Tn(Ya,Zi);var Zg=[];function sv(t,e,n,r){Array.isArray(n)||(n&&(Zg[0]=n.toString()),n=Zg);for(var i=0;i<n.length;i++){var s=Zy(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function ov(t){lp(t.g,function(e,n){this.g.hasOwnProperty(n)&&cp(e)},t),t.g={}}Ya.prototype.N=function(){Ya.$.N.call(this),ov(this)};Ya.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Uc(){this.g=!0}Uc.prototype.Ea=function(){this.g=!1};function Ax(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var u=a[l].split("=");if(1<u.length){var d=u[0];u=u[1];var m=d.split("_");o=2<=m.length&&m[1]=="type"?o+(d+"="+u+"&"):o+(d+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function xx(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function go(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+Sx(t,n)+(r?" "+r:"")})}function Cx(t,e){t.info(function(){return"TIMEOUT: "+e})}Uc.prototype.info=function(){};function Sx(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return fp(n)}catch{return e}}var Bs={},Xg=null;function Fc(){return Xg=Xg||new En}Bs.Ta="serverreachability";function av(t){$n.call(this,Bs.Ta,t)}Tn(av,$n);function Za(t){const e=Fc();Sn(e,new av(e))}Bs.STAT_EVENT="statevent";function lv(t,e){$n.call(this,Bs.STAT_EVENT,t),this.stat=e}Tn(lv,$n);function Kn(t){const e=Fc();Sn(e,new lv(e,t))}Bs.Ua="timingevent";function uv(t,e){$n.call(this,Bs.Ua,t),this.size=e}Tn(uv,$n);function yl(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return Ge.setTimeout(function(){t()},e)}var $c={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},cv={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function _p(){}_p.prototype.h=null;function Jg(t){return t.h||(t.h=t.i())}function hv(){}var vl={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function wp(){$n.call(this,"d")}Tn(wp,$n);function yp(){$n.call(this,"c")}Tn(yp,$n);var ef;function Bc(){}Tn(Bc,_p);Bc.prototype.g=function(){return new XMLHttpRequest};Bc.prototype.i=function(){return{}};ef=new Bc;function bl(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Ya(this),this.P=Rx,t=Qd?125:void 0,this.V=new Vc(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new dv}function dv(){this.i=null,this.g="",this.h=!1}var Rx=45e3,tf={},tc={};Ae=bl.prototype;Ae.setTimeout=function(t){this.P=t};function nf(t,e,n){t.L=1,t.v=jc(mi(e)),t.s=n,t.S=!0,fv(t,null)}function fv(t,e){t.G=Date.now(),kl(t),t.A=mi(t.v);var n=t.A,r=t.W;Array.isArray(r)||(r=[String(r)]),bv(n.i,"t",r),t.C=0,n=t.l.J,t.h=new dv,t.g=zv(t.l,n?e:null,!t.s),0<t.O&&(t.M=new Ix(Fn(t.Pa,t,t.g),t.O)),sv(t.U,t.g,"readystatechange",t.nb),e=t.I?Qy(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),Za(),Ax(t.j,t.u,t.A,t.m,t.W,t.s)}Ae.nb=function(t){t=t.target;const e=this.M;e&&jr(t)==3?e.l():this.Pa(t)};Ae.Pa=function(t){try{if(t==this.g)e:{const d=jr(this.g);var e=this.g.Ia();const m=this.g.da();if(!(3>d)&&(d!=3||Qd||this.g&&(this.h.h||this.g.ja()||r_(this.g)))){this.J||d!=4||e==7||(e==8||0>=m?Za(3):Za(2)),zc(this);var n=this.g.da();this.ca=n;t:if(pv(this)){var r=r_(this.g);t="";var i=r.length,s=jr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){vs(this),Sa(this);var o="";break t}this.h.i=new Ge.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,xx(this.j,this.u,this.A,this.m,this.W,d,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Wa(a)){var u=a;break t}}u=null}if(n=u)go(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,rf(this,n);else{this.i=!1,this.o=3,Kn(12),vs(this),Sa(this);break e}}this.S?(mv(this,d,o),Qd&&this.i&&d==3&&(sv(this.U,this.V,"tick",this.mb),this.V.start())):(go(this.j,this.m,o,null),rf(this,o)),d==4&&vs(this),this.i&&!this.J&&(d==4?Uv(this.l,this):(this.i=!1,kl(this)))}else Zx(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.o=3,Kn(12)):(this.o=0,Kn(13)),vs(this),Sa(this)}}}catch{}finally{}};function pv(t){return t.g?t.u=="GET"&&t.L!=2&&t.l.Ha:!1}function mv(t,e,n){let r=!0,i;for(;!t.J&&t.C<n.length;)if(i=Px(t,n),i==tc){e==4&&(t.o=4,Kn(14),r=!1),go(t.j,t.m,null,"[Incomplete Response]");break}else if(i==tf){t.o=4,Kn(15),go(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else go(t.j,t.m,i,null),rf(t,i);pv(t)&&i!=tc&&i!=tf&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,Kn(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ip(e),e.M=!0,Kn(11))):(go(t.j,t.m,n,"[Invalid Chunked Response]"),vs(t),Sa(t))}Ae.mb=function(){if(this.g){var t=jr(this.g),e=this.g.ja();this.C<e.length&&(zc(this),mv(this,t,e),this.i&&t!=4&&kl(this))}};function Px(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?tc:(n=Number(e.substring(n,r)),isNaN(n)?tf:(r+=1,r+n>e.length?tc:(e=e.slice(r,r+n),t.C=r+n,e)))}Ae.cancel=function(){this.J=!0,vs(this)};function kl(t){t.Y=Date.now()+t.P,gv(t,t.P)}function gv(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=yl(Fn(t.lb,t),e)}function zc(t){t.B&&(Ge.clearTimeout(t.B),t.B=null)}Ae.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(Cx(this.j,this.A),this.L!=2&&(Za(),Kn(17)),vs(this),this.o=2,Sa(this)):gv(this,this.Y-t)};function Sa(t){t.l.H==0||t.J||Uv(t.l,t)}function vs(t){zc(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,mp(t.V),ov(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function rf(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||sf(n.i,t))){if(!t.K&&sf(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)ic(n),Kc(n);else break e;Tp(n),Kn(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=yl(Fn(n.ib,n),6e3));if(1>=Tv(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else bs(n,11)}else if((t.K||n.g==t)&&ic(n),!Wa(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let u=i[e];if(n.V=u[0],u=u[1],n.H==2)if(u[0]=="c"){n.K=u[1],n.pa=u[2];const d=u[3];d!=null&&(n.ra=d,n.l.info("VER="+n.ra));const m=u[4];m!=null&&(n.Ga=m,n.l.info("SVER="+n.Ga));const w=u[5];w!=null&&typeof w=="number"&&0<w&&(r=1.5*w,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const g=t.g;if(g){const E=g.g?g.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(E){var s=r.i;s.g||E.indexOf("spdy")==-1&&E.indexOf("quic")==-1&&E.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(vp(s,s.h),s.h=null))}if(r.F){const b=g.g?g.g.getResponseHeader("X-HTTP-Session-Id"):null;b&&(r.Da=b,Kt(r.I,r.F,b))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=Bv(r,r.J?r.pa:null,r.Y),o.K){Iv(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.B&&(zc(a),kl(a)),r.g=o}else Lv(r);0<n.j.length&&Gc(n)}else u[0]!="stop"&&u[0]!="close"||bs(n,7);else n.H==3&&(u[0]=="stop"||u[0]=="close"?u[0]=="stop"?bs(n,7):Ep(n):u[0]!="noop"&&n.h&&n.h.Aa(u),n.A=0)}}Za(4)}catch{}}function Dx(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Oc(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function Ox(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Oc(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function _v(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Oc(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=Ox(t),r=Dx(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}var wv=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Nx(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function As(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof As){this.h=t.h,nc(this,t.j),this.s=t.s,this.g=t.g,rc(this,t.m),this.l=t.l;var e=t.i,n=new Xa;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),e_(this,n),this.o=t.o}else t&&(e=String(t).match(wv))?(this.h=!1,nc(this,e[1]||"",!0),this.s=va(e[2]||""),this.g=va(e[3]||"",!0),rc(this,e[4]),this.l=va(e[5]||"",!0),e_(this,e[6]||"",!0),this.o=va(e[7]||"")):(this.h=!1,this.i=new Xa(null,this.h))}As.prototype.toString=function(){var t=[],e=this.j;e&&t.push(ba(e,t_,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(ba(e,t_,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(ba(n,n.charAt(0)=="/"?Vx:Lx,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",ba(n,Fx)),t.join("")};function mi(t){return new As(t)}function nc(t,e,n){t.j=n?va(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function rc(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function e_(t,e,n){e instanceof Xa?(t.i=e,$x(t.i,t.h)):(n||(e=ba(e,Ux)),t.i=new Xa(e,t.h))}function Kt(t,e,n){t.i.set(e,n)}function jc(t){return Kt(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function va(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function ba(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,Mx),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Mx(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var t_=/[#\/\?@]/g,Lx=/[#\?:]/g,Vx=/[#\?]/g,Ux=/[#\?@]/g,Fx=/#/g;function Xa(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Xi(t){t.g||(t.g=new Map,t.h=0,t.i&&Nx(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}Ae=Xa.prototype;Ae.add=function(t,e){Xi(this),this.i=null,t=Yo(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function yv(t,e){Xi(t),e=Yo(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function vv(t,e){return Xi(t),e=Yo(t,e),t.g.has(e)}Ae.forEach=function(t,e){Xi(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};Ae.ta=function(){Xi(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n};Ae.Z=function(t){Xi(this);let e=[];if(typeof t=="string")vv(this,t)&&(e=e.concat(this.g.get(Yo(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};Ae.set=function(t,e){return Xi(this),this.i=null,t=Yo(this,t),vv(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};Ae.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function bv(t,e,n){yv(t,e),0<n.length&&(t.i=null,t.g.set(Yo(t,e),op(n)),t.h+=n.length)}Ae.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};function Yo(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function $x(t,e){e&&!t.j&&(Xi(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(yv(this,r),bv(this,i,n))},t)),t.j=e}var Bx=class{constructor(t,e){this.g=t,this.map=e}};function kv(t){this.l=t||zx,Ge.PerformanceNavigationTiming?(t=Ge.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(Ge.g&&Ge.g.Ka&&Ge.g.Ka()&&Ge.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var zx=10;function Ev(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function Tv(t){return t.h?1:t.g?t.g.size:0}function sf(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function vp(t,e){t.g?t.g.add(e):t.h=e}function Iv(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}kv.prototype.cancel=function(){if(this.i=Av(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function Av(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return op(t.i)}var jx=class{stringify(t){return Ge.JSON.stringify(t,void 0)}parse(t){return Ge.JSON.parse(t,void 0)}};function qx(){this.g=new jx}function Hx(t,e,n){const r=n||"";try{_v(t,function(i,s){let o=i;_l(i)&&(o=fp(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Wx(t,e){const n=new Uc;if(Ge.Image){const r=new Image;r.onload=hu(fu,n,r,"TestLoadImage: loaded",!0,e),r.onerror=hu(fu,n,r,"TestLoadImage: error",!1,e),r.onabort=hu(fu,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=hu(fu,n,r,"TestLoadImage: timeout",!1,e),Ge.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function fu(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function qc(t){this.l=t.ec||null,this.j=t.ob||!1}Tn(qc,_p);qc.prototype.g=function(){return new Hc(this.l,this.j)};qc.prototype.i=function(t){return function(){return t}}({});function Hc(t,e){En.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=bp,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Tn(Hc,En);var bp=0;Ae=Hc.prototype;Ae.open=function(t,e){if(this.readyState!=bp)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Ja(this)};Ae.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||Ge).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};Ae.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,El(this)),this.readyState=bp};Ae.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Ja(this)),this.g&&(this.readyState=3,Ja(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Ge.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;xv(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function xv(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}Ae.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?El(this):Ja(this),this.readyState==3&&xv(this)}};Ae.Za=function(t){this.g&&(this.response=this.responseText=t,El(this))};Ae.Ya=function(t){this.g&&(this.response=t,El(this))};Ae.ka=function(){this.g&&El(this)};function El(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Ja(t)}Ae.setRequestHeader=function(t,e){this.v.append(t,e)};Ae.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};Ae.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Ja(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Hc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var Kx=Ge.JSON.parse;function ln(t){En.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Cv,this.L=this.M=!1}Tn(ln,En);var Cv="",Gx=/^https?$/i,Qx=["POST","PUT"];Ae=ln.prototype;Ae.Oa=function(t){this.M=t};Ae.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():ef.g(),this.C=this.u?Jg(this.u):Jg(ef),this.g.onreadystatechange=Fn(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){n_(this,s);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=Ge.FormData&&t instanceof Ge.FormData,!(0<=Hy(Qx,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Pv(this),0<this.B&&((this.L=Yx(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Fn(this.ua,this)):this.A=gp(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){n_(this,s)}};function Yx(t){return Mo&&typeof t.timeout=="number"&&t.ontimeout!==void 0}Ae.ua=function(){typeof sp<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Sn(this,"timeout"),this.abort(8))};function n_(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Sv(t),Wc(t)}function Sv(t){t.F||(t.F=!0,Sn(t,"complete"),Sn(t,"error"))}Ae.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Sn(this,"complete"),Sn(this,"abort"),Wc(this))};Ae.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Wc(this,!0)),ln.$.N.call(this)};Ae.La=function(){this.s||(this.G||this.v||this.l?Rv(this):this.kb())};Ae.kb=function(){Rv(this)};function Rv(t){if(t.h&&typeof sp<"u"&&(!t.C[1]||jr(t)!=4||t.da()!=2)){if(t.v&&jr(t)==4)gp(t.La,0,t);else if(Sn(t,"readystatechange"),jr(t)==4){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var i=String(t.I).match(wv)[1]||null;!i&&Ge.self&&Ge.self.location&&(i=Ge.self.location.protocol.slice(0,-1)),r=!Gx.test(i?i.toLowerCase():"")}n=r}if(n)Sn(t,"complete"),Sn(t,"success");else{t.m=6;try{var s=2<jr(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",Sv(t)}}finally{Wc(t)}}}}function Wc(t,e){if(t.g){Pv(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Sn(t,"ready");try{n.onreadystatechange=r}catch{}}}function Pv(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(Ge.clearTimeout(t.A),t.A=null)}Ae.isActive=function(){return!!this.g};function jr(t){return t.g?t.g.readyState:0}Ae.da=function(){try{return 2<jr(this)?this.g.status:-1}catch{return-1}};Ae.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};Ae.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),Kx(e)}};function r_(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case Cv:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function Zx(t){const e={};t=(t.g&&2<=jr(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(Wa(t[r]))continue;var n=kx(t[r]);const i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const s=e[i]||[];e[i]=s,s.push(n)}mx(e,function(r){return r.join(", ")})}Ae.Ia=function(){return this.m};Ae.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function Dv(t){let e="";return lp(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function kp(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Dv(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):Kt(t,e,n))}function ua(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Ov(t){this.Ga=0,this.j=[],this.l=new Uc,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=ua("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=ua("baseRetryDelayMs",5e3,t),this.hb=ua("retryDelaySeedMs",1e4,t),this.eb=ua("forwardChannelMaxRetries",2,t),this.xa=ua("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new kv(t&&t.concurrentRequestLimit),this.Ja=new qx,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}Ae=Ov.prototype;Ae.ra=8;Ae.H=1;function Ep(t){if(Nv(t),t.H==3){var e=t.W++,n=mi(t.I);if(Kt(n,"SID",t.K),Kt(n,"RID",e),Kt(n,"TYPE","terminate"),Tl(t,n),e=new bl(t,t.l,e),e.L=2,e.v=jc(mi(n)),n=!1,Ge.navigator&&Ge.navigator.sendBeacon)try{n=Ge.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&Ge.Image&&(new Image().src=e.v,n=!0),n||(e.g=zv(e.l,null),e.g.ha(e.v)),e.G=Date.now(),kl(e)}$v(t)}function Kc(t){t.g&&(Ip(t),t.g.cancel(),t.g=null)}function Nv(t){Kc(t),t.u&&(Ge.clearTimeout(t.u),t.u=null),ic(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&Ge.clearTimeout(t.m),t.m=null)}function Gc(t){if(!Ev(t.i)&&!t.m){t.m=!0;var e=t.Na;Ga||rv(),Qa||(Ga(),Qa=!0),pp.add(e,t),t.C=0}}function Xx(t,e){return Tv(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=yl(Fn(t.Na,t,e),Fv(t,t.C)),t.C++,!0)}Ae.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new bl(this,this.l,t);let s=this.s;if(this.U&&(s?(s=Qy(s),Yy(s,this.U)):s=this.U),this.o!==null||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=Mv(this,i,e),n=mi(this.I),Kt(n,"RID",t),Kt(n,"CVER",22),this.F&&Kt(n,"X-HTTP-Session-Id",this.F),Tl(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(Dv(s)))+"&"+e:this.o&&kp(n,this.o,s)),vp(this.i,i),this.bb&&Kt(n,"TYPE","init"),this.P?(Kt(n,"$req",e),Kt(n,"SID","null"),i.aa=!0,nf(i,n,null)):nf(i,n,e),this.H=2}}else this.H==3&&(t?i_(this,t):this.j.length==0||Ev(this.i)||i_(this))};function i_(t,e){var n;e?n=e.m:n=t.W++;const r=mi(t.I);Kt(r,"SID",t.K),Kt(r,"RID",n),Kt(r,"AID",t.V),Tl(t,r),t.o&&t.s&&kp(r,t.o,t.s),n=new bl(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=Mv(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),vp(t.i,n),nf(n,r,e)}function Tl(t,e){t.na&&lp(t.na,function(n,r){Kt(e,r,n)}),t.h&&_v({},function(n,r){Kt(e,r,n)})}function Mv(t,e,n){n=Math.min(t.j.length,n);var r=t.h?Fn(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){const o=["count="+n];s==-1?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let l=0;l<n;l++){let u=i[l].g;const d=i[l].map;if(u-=s,0>u)s=Math.max(0,i[l].g-100),a=!1;else try{Hx(d,o,"req"+u+"_")}catch{r&&r(d)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function Lv(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Ga||rv(),Qa||(Ga(),Qa=!0),pp.add(e,t),t.A=0}}function Tp(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=yl(Fn(t.Ma,t),Fv(t,t.A)),t.A++,!0)}Ae.Ma=function(){if(this.u=null,Vv(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=yl(Fn(this.jb,this),t)}};Ae.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Kn(10),Kc(this),Vv(this))};function Ip(t){t.B!=null&&(Ge.clearTimeout(t.B),t.B=null)}function Vv(t){t.g=new bl(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=mi(t.wa);Kt(e,"RID","rpc"),Kt(e,"SID",t.K),Kt(e,"AID",t.V),Kt(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Kt(e,"TO",t.qa),Kt(e,"TYPE","xmlhttp"),Tl(t,e),t.o&&t.s&&kp(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=jc(mi(e)),n.s=null,n.S=!0,fv(n,t)}Ae.ib=function(){this.v!=null&&(this.v=null,Kc(this),Tp(this),Kn(19))};function ic(t){t.v!=null&&(Ge.clearTimeout(t.v),t.v=null)}function Uv(t,e){var n=null;if(t.g==e){ic(t),Ip(t),t.g=null;var r=2}else if(sf(t.i,e))n=e.F,Iv(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.G;var i=t.C;r=Fc(),Sn(r,new uv(r,n)),Gc(t)}else Lv(t);else if(i=e.o,i==3||i==0&&0<e.ca||!(r==1&&Xx(t,e)||r==2&&Tp(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:bs(t,5);break;case 4:bs(t,10);break;case 3:bs(t,6);break;default:bs(t,2)}}}function Fv(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function bs(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=Fn(t.pb,t);n||(n=new As("//www.google.com/images/cleardot.gif"),Ge.location&&Ge.location.protocol=="http"||nc(n,"https"),jc(n)),Wx(n.toString(),r)}else Kn(2);t.H=0,t.h&&t.h.za(e),$v(t),Nv(t)}Ae.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Kn(2)):(this.l.info("Failed to ping google.com"),Kn(1))};function $v(t){if(t.H=0,t.ma=[],t.h){const e=Av(t.i);(e.length!=0||t.j.length!=0)&&(Gg(t.ma,e),Gg(t.ma,t.j),t.i.i.length=0,op(t.j),t.j.length=0),t.h.ya()}}function Bv(t,e,n){var r=n instanceof As?mi(n):new As(n);if(r.g!="")e&&(r.g=e+"."+r.g),rc(r,r.m);else{var i=Ge.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new As(null);r&&nc(s,r),e&&(s.g=e),i&&rc(s,i),n&&(s.l=n),r=s}return n=t.F,e=t.Da,n&&e&&Kt(r,n,e),Kt(r,"VER",t.ra),Tl(t,r),r}function zv(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ha&&!t.va?new ln(new qc({ob:!0})):new ln(t.va),e.Oa(t.J),e}Ae.isActive=function(){return!!this.h&&this.h.isActive(this)};function jv(){}Ae=jv.prototype;Ae.Ba=function(){};Ae.Aa=function(){};Ae.za=function(){};Ae.ya=function(){};Ae.isActive=function(){return!0};Ae.Va=function(){};function sc(){if(Mo&&!(10<=Number(hx)))throw Error("Environmental error: no available transport.")}sc.prototype.g=function(t,e){return new ar(t,e)};function ar(t,e){En.call(this),this.g=new Ov(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Wa(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Wa(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Zo(this)}Tn(ar,En);ar.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Kn(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=Bv(t,null,t.Y),Gc(t)};ar.prototype.close=function(){Ep(this.g)};ar.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=fp(t),t=n);e.j.push(new Bx(e.fb++,t)),e.H==3&&Gc(e)};ar.prototype.N=function(){this.g.h=null,delete this.j,Ep(this.g),delete this.g,ar.$.N.call(this)};function qv(t){wp.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}Tn(qv,wp);function Hv(){yp.call(this),this.status=1}Tn(Hv,yp);function Zo(t){this.g=t}Tn(Zo,jv);Zo.prototype.Ba=function(){Sn(this.g,"a")};Zo.prototype.Aa=function(t){Sn(this.g,new qv(t))};Zo.prototype.za=function(t){Sn(this.g,new Hv)};Zo.prototype.ya=function(){Sn(this.g,"b")};function Jx(){this.blockSize=-1}function xr(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}Tn(xr,Jx);xr.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function hd(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var s=t.g[3],o=e+(s^n&(i^s))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[2]+606105819&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[6]+2821735955&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[10]+4294925233&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[14]+2792965006&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(i^s&(n^i))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[11]+643717713&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[15]+3634488961&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[3]+4107603335&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[7]+1735328473&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(n^i^s)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[11]+1839030562&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[7]+4139469664&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[3]+3572445317&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[15]+530742520&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(i^(n|~s))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[14]+2878612391&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[10]+4293915773&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[6]+2734768916&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[2]+718787259&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}xr.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(i==0)for(;s<=n;)hd(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){hd(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){hd(this,r),i=0;break}}this.h=i,this.i+=e};xr.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function Rt(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=t[i]|0;r&&s==e||(n[i]=s,r=!1)}this.g=n}var eC={};function Ap(t){return-128<=t&&128>t?lx(t,function(e){return new Rt([e|0],0>e?-1:0)}):new Rt([t|0],0>t?-1:0)}function qr(t){if(isNaN(t)||!isFinite(t))return Eo;if(0>t)return Cn(qr(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=of;return new Rt(e,0)}function Wv(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return Cn(Wv(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=qr(Math.pow(e,8)),r=Eo,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=qr(Math.pow(e,s)),r=r.R(s).add(qr(o))):(r=r.R(n),r=r.add(qr(o)))}return r}var of=4294967296,Eo=Ap(0),af=Ap(1),s_=Ap(16777216);Ae=Rt.prototype;Ae.ea=function(){if(fr(this))return-Cn(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:of+r)*e,e*=of}return t};Ae.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(hi(this))return"0";if(fr(this))return"-"+Cn(this).toString(t);for(var e=qr(Math.pow(t,6)),n=this,r="";;){var i=ac(n,e).g;n=oc(n,i.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,hi(n))return s+r;for(;6>s.length;)s="0"+s;r=s+r}};Ae.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function hi(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function fr(t){return t.h==-1}Ae.X=function(t){return t=oc(this,t),fr(t)?-1:hi(t)?0:1};function Cn(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new Rt(n,~t.h).add(af)}Ae.abs=function(){return fr(this)?Cn(this):this};Ae.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(this.D(i)&65535)+(t.D(i)&65535),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new Rt(n,n[n.length-1]&-2147483648?-1:0)};function oc(t,e){return t.add(Cn(e))}Ae.R=function(t){if(hi(this)||hi(t))return Eo;if(fr(this))return fr(t)?Cn(this).R(Cn(t)):Cn(Cn(this).R(t));if(fr(t))return Cn(this.R(Cn(t)));if(0>this.X(s_)&&0>t.X(s_))return qr(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(i)>>>16,l=t.D(i)&65535;n[2*r+2*i]+=o*l,pu(n,2*r+2*i),n[2*r+2*i+1]+=s*l,pu(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,pu(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,pu(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new Rt(n,0)};function pu(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function ca(t,e){this.g=t,this.h=e}function ac(t,e){if(hi(e))throw Error("division by zero");if(hi(t))return new ca(Eo,Eo);if(fr(t))return e=ac(Cn(t),e),new ca(Cn(e.g),Cn(e.h));if(fr(e))return e=ac(t,Cn(e)),new ca(Cn(e.g),e.h);if(30<t.g.length){if(fr(t)||fr(e))throw Error("slowDivide_ only works with positive integers.");for(var n=af,r=e;0>=r.X(t);)n=o_(n),r=o_(r);var i=lo(n,1),s=lo(r,1);for(r=lo(r,2),n=lo(n,2);!hi(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=lo(r,1),n=lo(n,1)}return e=oc(t,i.R(e)),new ca(i,e)}for(i=Eo;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),s=qr(n),o=s.R(e);fr(o)||0<o.X(t);)n-=r,s=qr(n),o=s.R(e);hi(s)&&(s=af),i=i.add(s),t=oc(t,o)}return new ca(i,t)}Ae.gb=function(t){return ac(this,t).h};Ae.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new Rt(n,this.h&t.h)};Ae.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new Rt(n,this.h|t.h)};Ae.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new Rt(n,this.h^t.h)};function o_(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new Rt(n,t.h)}function lo(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new Rt(i,t.h)}sc.prototype.createWebChannel=sc.prototype.g;ar.prototype.send=ar.prototype.u;ar.prototype.open=ar.prototype.m;ar.prototype.close=ar.prototype.close;$c.NO_ERROR=0;$c.TIMEOUT=8;$c.HTTP_ERROR=6;cv.COMPLETE="complete";hv.EventType=vl;vl.OPEN="a";vl.CLOSE="b";vl.ERROR="c";vl.MESSAGE="d";En.prototype.listen=En.prototype.O;ln.prototype.listenOnce=ln.prototype.P;ln.prototype.getLastError=ln.prototype.Sa;ln.prototype.getLastErrorCode=ln.prototype.Ia;ln.prototype.getStatus=ln.prototype.da;ln.prototype.getResponseJson=ln.prototype.Wa;ln.prototype.getResponseText=ln.prototype.ja;ln.prototype.send=ln.prototype.ha;ln.prototype.setWithCredentials=ln.prototype.Oa;xr.prototype.digest=xr.prototype.l;xr.prototype.reset=xr.prototype.reset;xr.prototype.update=xr.prototype.j;Rt.prototype.add=Rt.prototype.add;Rt.prototype.multiply=Rt.prototype.R;Rt.prototype.modulo=Rt.prototype.gb;Rt.prototype.compare=Rt.prototype.X;Rt.prototype.toNumber=Rt.prototype.ea;Rt.prototype.toString=Rt.prototype.toString;Rt.prototype.getBits=Rt.prototype.D;Rt.fromNumber=qr;Rt.fromString=Wv;var tC=function(){return new sc},nC=function(){return Fc()},dd=$c,rC=cv,iC=Bs,a_={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},mu=hv,sC=ln,oC=xr,To=Rt;const l_="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}On.UNAUTHENTICATED=new On(null),On.GOOGLE_CREDENTIALS=new On("google-credentials-uid"),On.FIRST_PARTY=new On("first-party-uid"),On.MOCK_USER=new On("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xo="10.4.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ls=new Kf("@firebase/firestore");function ha(){return Ls.logLevel}function Oe(t,...e){if(Ls.logLevel<=gt.DEBUG){const n=e.map(xp);Ls.debug(`Firestore (${Xo}): ${t}`,...n)}}function gi(t,...e){if(Ls.logLevel<=gt.ERROR){const n=e.map(xp);Ls.error(`Firestore (${Xo}): ${t}`,...n)}}function Lo(t,...e){if(Ls.logLevel<=gt.WARN){const n=e.map(xp);Ls.warn(`Firestore (${Xo}): ${t}`,...n)}}function xp(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ke(t="Unexpected state"){const e=`FIRESTORE (${Xo}) INTERNAL ASSERTION FAILED: `+t;throw gi(e),new Error(e)}function $t(t,e){t||Ke()}function Xe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ie extends yi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kv{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class aC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(On.UNAUTHENTICATED))}shutdown(){}}class lC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class uC{constructor(e){this.t=e,this.currentUser=On.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new Qr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Qr,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{Oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Qr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?($t(typeof r.accessToken=="string"),new Kv(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return $t(e===null||typeof e=="string"),new On(e)}}class cC{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=On.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class hC{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new cC(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(On.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class dC{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class fC{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=s=>{s.error!=null&&Oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Oe("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?($t(typeof n.token=="string"),this.R=n.token,new dC(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pC(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv{static V(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=pC(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function Et(t,e){return t<e?-1:t>e?1:0}function Vo(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ie(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ie(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Ie(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ie(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return et.fromMillis(Date.now())}static fromDate(e){return et.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new et(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Et(this.nanoseconds,e.nanoseconds):Et(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ze(e)}static min(){return new Ze(new et(0,0))}static max(){return new Ze(new et(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ke(),r===void 0?r=e.length-n:r>e.length-n&&Ke(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return el.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof el?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ut extends el{construct(e,n,r){return new Ut(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ie(pe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Ut(n)}static emptyPath(){return new Ut([])}}const mC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Vn extends el{construct(e,n,r){return new Vn(e,n,r)}static isValidIdentifier(e){return mC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Vn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Vn(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Ie(pe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new Ie(pe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Ie(pe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Ie(pe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Vn(n)}static emptyPath(){return new Vn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(e){this.path=e}static fromPath(e){return new Ve(Ut.fromString(e))}static fromName(e){return new Ve(Ut.fromString(e).popFirst(5))}static empty(){return new Ve(Ut.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ut.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ut.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ve(new Ut(e.slice()))}}function gC(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Ze.fromTimestamp(r===1e9?new et(n+1,0):new et(n,r));return new Wi(i,Ve.empty(),e)}function _C(t){return new Wi(t.readTime,t.key,-1)}class Wi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Wi(Ze.min(),Ve.empty(),-1)}static max(){return new Wi(Ze.max(),Ve.empty(),-1)}}function wC(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Ve.comparator(t.documentKey,e.documentKey),n!==0?n:Et(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class vC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Il(t){if(t.code!==pe.FAILED_PRECONDITION||t.message!==yC)throw t;Oe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ke(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new be((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof be?n:be.resolve(n)}catch(n){return be.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):be.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):be.reject(n)}static resolve(e){return new be((n,r)=>{n(e)})}static reject(e){return new be((n,r)=>{r(e)})}static waitFor(e){return new be((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=be.resolve(!1);for(const r of e)n=n.next(i=>i?be.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new be((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;n(e[u]).next(d=>{o[u]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,n){return new be((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function Al(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.oe(r),this._e=r=>n.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Cp.ae=-1;function Qc(t){return t==null}function lc(t){return t===0&&1/t==-1/0}function bC(t){return typeof t=="number"&&Number.isInteger(t)&&!lc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u_(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function zs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Qv(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e,n){this.comparator=e,this.root=n||An.EMPTY}insert(e,n){return new Jt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,An.BLACK,null,null))}remove(e){return new Jt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,An.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new gu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new gu(this.root,e,this.comparator,!1)}getReverseIterator(){return new gu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new gu(this.root,e,this.comparator,!0)}}class gu{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class An{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??An.RED,this.left=i??An.EMPTY,this.right=s??An.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new An(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return An.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return An.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,An.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,An.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ke();const e=this.left.check();if(e!==this.right.check())throw Ke();return e+(this.isRed()?0:1)}}An.EMPTY=null,An.RED=!0,An.BLACK=!1;An.EMPTY=new class{constructor(){this.size=0}get key(){throw Ke()}get value(){throw Ke()}get color(){throw Ke()}get left(){throw Ke()}get right(){throw Ke()}copy(e,n,r,i,s){return this}insert(e,n,r){return new An(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e){this.comparator=e,this.data=new Jt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new c_(this.data.getIterator())}getIteratorFrom(e){return new c_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Bn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Bn(this.comparator);return n.data=e,n}}class c_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e){this.fields=e,e.sort(Vn.comparator)}static empty(){return new or([])}unionWith(e){let n=new Bn(Vn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new or(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Vo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Yv("Invalid base64 string: "+s):s}}(e);return new jn(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new jn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Et(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}jn.EMPTY_BYTE_STRING=new jn("");const kC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ki(t){if($t(!!t),typeof t=="string"){let e=0;const n=kC.exec(t);if($t(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:mn(t.seconds),nanos:mn(t.nanos)}}function mn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Vs(t){return typeof t=="string"?jn.fromBase64String(t):jn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yc(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Sp(t){const e=t.mapValue.fields.__previous_value__;return Yc(e)?Sp(e):e}function tl(t){const e=Ki(t.mapValue.fields.__local_write_time__.timestampValue);return new et(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(e,n,r,i,s,o,a,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}class nl{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new nl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof nl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _u={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Us(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Yc(t)?4:TC(t)?9007199254740991:10:Ke()}function Jr(t,e){if(t===e)return!0;const n=Us(t);if(n!==Us(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return tl(t).isEqual(tl(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Ki(i.timestampValue),a=Ki(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Vs(i.bytesValue).isEqual(Vs(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return mn(i.geoPointValue.latitude)===mn(s.geoPointValue.latitude)&&mn(i.geoPointValue.longitude)===mn(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return mn(i.integerValue)===mn(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=mn(i.doubleValue),a=mn(s.doubleValue);return o===a?lc(o)===lc(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Vo(t.arrayValue.values||[],e.arrayValue.values||[],Jr);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(u_(o)!==u_(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Jr(o[l],a[l])))return!1;return!0}(t,e);default:return Ke()}}function rl(t,e){return(t.values||[]).find(n=>Jr(n,e))!==void 0}function Uo(t,e){if(t===e)return 0;const n=Us(t),r=Us(e);if(n!==r)return Et(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Et(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=mn(s.integerValue||s.doubleValue),l=mn(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return h_(t.timestampValue,e.timestampValue);case 4:return h_(tl(t),tl(e));case 5:return Et(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Vs(s),l=Vs(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const d=Et(a[u],l[u]);if(d!==0)return d}return Et(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Et(mn(s.latitude),mn(o.latitude));return a!==0?a:Et(mn(s.longitude),mn(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],l=o.values||[];for(let u=0;u<a.length&&u<l.length;++u){const d=Uo(a[u],l[u]);if(d)return d}return Et(a.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===_u.mapValue&&o===_u.mapValue)return 0;if(s===_u.mapValue)return 1;if(o===_u.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},d=Object.keys(u);l.sort(),d.sort();for(let m=0;m<l.length&&m<d.length;++m){const w=Et(l[m],d[m]);if(w!==0)return w;const g=Uo(a[l[m]],u[d[m]]);if(g!==0)return g}return Et(l.length,d.length)}(t.mapValue,e.mapValue);default:throw Ke()}}function h_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Et(t,e);const n=Ki(t),r=Ki(e),i=Et(n.seconds,r.seconds);return i!==0?i:Et(n.nanos,r.nanos)}function Fo(t){return lf(t)}function lf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ki(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Vs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Ve.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=lf(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${lf(n.fields[o])}`;return i+"}"}(t.mapValue):Ke()}function uc(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function uf(t){return!!t&&"integerValue"in t}function Rp(t){return!!t&&"arrayValue"in t}function d_(t){return!!t&&"nullValue"in t}function f_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Lu(t){return!!t&&"mapValue"in t}function Ra(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return zs(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ra(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ra(t.arrayValue.values[n]);return e}return Object.assign({},t)}function TC(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(e){this.value=e}static empty(){return new nr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Lu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ra(n)}setAll(e){let n=Vn.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Ra(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Lu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Jr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Lu(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){zs(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new nr(Ra(this.value))}}function Zv(t){const e=[];return zs(t.fields,(n,r)=>{const i=new Vn([n]);if(Lu(r)){const s=Zv(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new or(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Nn(e,0,Ze.min(),Ze.min(),Ze.min(),nr.empty(),0)}static newFoundDocument(e,n,r,i){return new Nn(e,1,n,Ze.min(),r,i,0)}static newNoDocument(e,n){return new Nn(e,2,n,Ze.min(),Ze.min(),nr.empty(),0)}static newUnknownDocument(e,n){return new Nn(e,3,n,Ze.min(),Ze.min(),nr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ze.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=nr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=nr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ze.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Nn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Nn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(e,n){this.position=e,this.inclusive=n}}function p_(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=Ve.comparator(Ve.fromName(o.referenceValue),n.key):r=Uo(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function m_(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Jr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(e,n="asc"){this.field=e,this.dir=n}}function IC(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{}class gn extends Xv{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new xC(e,n,r):n==="array-contains"?new RC(e,r):n==="in"?new PC(e,r):n==="not-in"?new DC(e,r):n==="array-contains-any"?new OC(e,r):new gn(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new CC(e,r):new SC(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Uo(n,this.value)):n!==null&&Us(this.value)===Us(n)&&this.matchesComparison(Uo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ke()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Cr extends Xv{constructor(e,n){super(),this.filters=e,this.op=n,this.ce=null}static create(e,n){return new Cr(e,n)}matches(e){return Jv(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.le(n=>n.isInequality());return e!==null?e.field:null}le(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function Jv(t){return t.op==="and"}function e0(t){return AC(t)&&Jv(t)}function AC(t){for(const e of t.filters)if(e instanceof Cr)return!1;return!0}function cf(t){if(t instanceof gn)return t.field.canonicalString()+t.op.toString()+Fo(t.value);if(e0(t))return t.filters.map(e=>cf(e)).join(",");{const e=t.filters.map(n=>cf(n)).join(",");return`${t.op}(${e})`}}function t0(t,e){return t instanceof gn?function(r,i){return i instanceof gn&&r.op===i.op&&r.field.isEqual(i.field)&&Jr(r.value,i.value)}(t,e):t instanceof Cr?function(r,i){return i instanceof Cr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&t0(o,i.filters[a]),!0):!1}(t,e):void Ke()}function n0(t){return t instanceof gn?function(n){return`${n.field.canonicalString()} ${n.op} ${Fo(n.value)}`}(t):t instanceof Cr?function(n){return n.op.toString()+" {"+n.getFilters().map(n0).join(" ,")+"}"}(t):"Filter"}class xC extends gn{constructor(e,n,r){super(e,n,r),this.key=Ve.fromName(r.referenceValue)}matches(e){const n=Ve.comparator(e.key,this.key);return this.matchesComparison(n)}}class CC extends gn{constructor(e,n){super(e,"in",n),this.keys=r0("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class SC extends gn{constructor(e,n){super(e,"not-in",n),this.keys=r0("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function r0(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Ve.fromName(r.referenceValue))}class RC extends gn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Rp(n)&&rl(n.arrayValue,this.value)}}class PC extends gn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&rl(this.value.arrayValue,n)}}class DC extends gn{constructor(e,n){super(e,"not-in",n)}matches(e){if(rl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!rl(this.value.arrayValue,n)}}class OC extends gn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Rp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>rl(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.he=null}}function g_(t,e=null,n=[],r=[],i=null,s=null,o=null){return new NC(t,e,n,r,i,s,o)}function Pp(t){const e=Xe(t);if(e.he===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>cf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Qc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Fo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Fo(r)).join(",")),e.he=n}return e.he}function Dp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!IC(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!t0(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!m_(t.startAt,e.startAt)&&m_(t.endAt,e.endAt)}function hf(t){return Ve.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.Pe=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function MC(t,e,n,r,i,s,o,a){return new js(t,e,n,r,i,s,o,a)}function Op(t){return new js(t)}function __(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Np(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Zc(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(n!==null)return n}return null}function Mp(t){return t.collectionGroup!==null}function Ao(t){const e=Xe(t);if(e.Pe===null){e.Pe=[];const n=Zc(e),r=Np(e);if(n!==null&&r===null)n.isKeyField()||e.Pe.push(new Io(n)),e.Pe.push(new Io(Vn.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.Pe.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.Pe.push(new Io(Vn.keyField(),s))}}}return e.Pe}function Yr(t){const e=Xe(t);return e.Ie||(e.Ie=i0(e,Ao(t))),e.Ie}function i0(t,e){if(t.limitType==="F")return g_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Io(i.field,s)});const n=t.endAt?new $o(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new $o(t.startAt.position,t.startAt.inclusive):null;return g_(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function df(t,e){e.getFirstInequalityField(),Zc(t);const n=t.filters.concat([e]);return new js(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function cc(t,e,n){return new js(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Xc(t,e){return Dp(Yr(t),Yr(e))&&t.limitType===e.limitType}function s0(t){return`${Pp(Yr(t))}|lt:${t.limitType}`}function uo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>n0(i)).join(", ")}]`),Qc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Fo(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Fo(i)).join(",")),`Target(${r})`}(Yr(t))}; limitType=${t.limitType})`}function Jc(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Ve.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Ao(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const u=p_(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,Ao(r),i)||r.endAt&&!function(o,a,l){const u=p_(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,Ao(r),i))}(t,e)}function LC(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function o0(t){return(e,n)=>{let r=!1;for(const i of Ao(t)){const s=VC(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function VC(t,e,n){const r=t.field.isKeyField()?Ve.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?Uo(l,u):Ke()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ke()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){zs(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return Qv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC=new Jt(Ve.comparator);function _i(){return UC}const a0=new Jt(Ve.comparator);function ka(...t){let e=a0;for(const n of t)e=e.insert(n.key,n);return e}function l0(t){let e=a0;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ks(){return Pa()}function u0(){return Pa()}function Pa(){return new Jo(t=>t.toString(),(t,e)=>t.isEqual(e))}const FC=new Jt(Ve.comparator),$C=new Bn(Ve.comparator);function pt(...t){let e=$C;for(const n of t)e=e.add(n);return e}const BC=new Bn(Et);function zC(){return BC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c0(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:lc(e)?"-0":e}}function h0(t){return{integerValue:""+t}}function jC(t,e){return bC(e)?h0(e):c0(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh{constructor(){this._=void 0}}function qC(t,e,n){return t instanceof hc?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Yc(s)&&(s=Sp(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof il?f0(t,e):t instanceof sl?p0(t,e):function(i,s){const o=d0(i,s),a=w_(o)+w_(i.Te);return uf(o)&&uf(i.Te)?h0(a):c0(i.serializer,a)}(t,e)}function HC(t,e,n){return t instanceof il?f0(t,e):t instanceof sl?p0(t,e):n}function d0(t,e){return t instanceof dc?function(r){return uf(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class hc extends eh{}class il extends eh{constructor(e){super(),this.elements=e}}function f0(t,e){const n=m0(e);for(const r of t.elements)n.some(i=>Jr(i,r))||n.push(r);return{arrayValue:{values:n}}}class sl extends eh{constructor(e){super(),this.elements=e}}function p0(t,e){let n=m0(e);for(const r of t.elements)n=n.filter(i=>!Jr(i,r));return{arrayValue:{values:n}}}class dc extends eh{constructor(e,n){super(),this.serializer=e,this.Te=n}}function w_(t){return mn(t.integerValue||t.doubleValue)}function m0(t){return Rp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function WC(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof il&&i instanceof il||r instanceof sl&&i instanceof sl?Vo(r.elements,i.elements,Jr):r instanceof dc&&i instanceof dc?Jr(r.Te,i.Te):r instanceof hc&&i instanceof hc}(t.transform,e.transform)}class KC{constructor(e,n){this.version=e,this.transformResults=n}}class pr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new pr}static exists(e){return new pr(void 0,e)}static updateTime(e){return new pr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Vu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class th{}function g0(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Lp(t.key,pr.none()):new xl(t.key,t.data,pr.none());{const n=t.data,r=nr.empty();let i=new Bn(Vn.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Ji(t.key,r,new or(i.toArray()),pr.none())}}function GC(t,e,n){t instanceof xl?function(i,s,o){const a=i.value.clone(),l=v_(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Ji?function(i,s,o){if(!Vu(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=v_(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(_0(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Da(t,e,n,r){return t instanceof xl?function(s,o,a,l){if(!Vu(s.precondition,o))return a;const u=s.value.clone(),d=b_(s.fieldTransforms,l,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ji?function(s,o,a,l){if(!Vu(s.precondition,o))return a;const u=b_(s.fieldTransforms,l,o),d=o.data;return d.setAll(_0(s)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(s,o,a){return Vu(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function QC(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=d0(r.transform,i||null);s!=null&&(n===null&&(n=nr.empty()),n.set(r.field,s))}return n||null}function y_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Vo(r,i,(s,o)=>WC(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class xl extends th{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ji extends th{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function _0(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function v_(t,e,n){const r=new Map;$t(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,HC(o,a,n[i]))}return r}function b_(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,qC(s,o,e))}return r}class Lp extends th{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class YC extends th{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&GC(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Da(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Da(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=u0();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=g0(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(Ze.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),pt())}isEqual(e){return this.batchId===e.batchId&&Vo(this.mutations,e.mutations,(n,r)=>y_(n,r))&&Vo(this.baseMutations,e.baseMutations,(n,r)=>y_(n,r))}}class Vp{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){$t(e.mutations.length===r.length);let i=function(){return FC}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Vp(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(e,n,r){this.alias=e,this.Ee=n,this.fieldPath=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pn,wt;function tS(t){switch(t){default:return Ke();case pe.CANCELLED:case pe.UNKNOWN:case pe.DEADLINE_EXCEEDED:case pe.RESOURCE_EXHAUSTED:case pe.INTERNAL:case pe.UNAVAILABLE:case pe.UNAUTHENTICATED:return!1;case pe.INVALID_ARGUMENT:case pe.NOT_FOUND:case pe.ALREADY_EXISTS:case pe.PERMISSION_DENIED:case pe.FAILED_PRECONDITION:case pe.ABORTED:case pe.OUT_OF_RANGE:case pe.UNIMPLEMENTED:case pe.DATA_LOSS:return!0}}function w0(t){if(t===void 0)return gi("GRPC error has no .code"),pe.UNKNOWN;switch(t){case pn.OK:return pe.OK;case pn.CANCELLED:return pe.CANCELLED;case pn.UNKNOWN:return pe.UNKNOWN;case pn.DEADLINE_EXCEEDED:return pe.DEADLINE_EXCEEDED;case pn.RESOURCE_EXHAUSTED:return pe.RESOURCE_EXHAUSTED;case pn.INTERNAL:return pe.INTERNAL;case pn.UNAVAILABLE:return pe.UNAVAILABLE;case pn.UNAUTHENTICATED:return pe.UNAUTHENTICATED;case pn.INVALID_ARGUMENT:return pe.INVALID_ARGUMENT;case pn.NOT_FOUND:return pe.NOT_FOUND;case pn.ALREADY_EXISTS:return pe.ALREADY_EXISTS;case pn.PERMISSION_DENIED:return pe.PERMISSION_DENIED;case pn.FAILED_PRECONDITION:return pe.FAILED_PRECONDITION;case pn.ABORTED:return pe.ABORTED;case pn.OUT_OF_RANGE:return pe.OUT_OF_RANGE;case pn.UNIMPLEMENTED:return pe.UNIMPLEMENTED;case pn.DATA_LOSS:return pe.DATA_LOSS;default:return Ke()}}(wt=pn||(pn={}))[wt.OK=0]="OK",wt[wt.CANCELLED=1]="CANCELLED",wt[wt.UNKNOWN=2]="UNKNOWN",wt[wt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",wt[wt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",wt[wt.NOT_FOUND=5]="NOT_FOUND",wt[wt.ALREADY_EXISTS=6]="ALREADY_EXISTS",wt[wt.PERMISSION_DENIED=7]="PERMISSION_DENIED",wt[wt.UNAUTHENTICATED=16]="UNAUTHENTICATED",wt[wt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",wt[wt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",wt[wt.ABORTED=10]="ABORTED",wt[wt.OUT_OF_RANGE=11]="OUT_OF_RANGE",wt[wt.UNIMPLEMENTED=12]="UNIMPLEMENTED",wt[wt.INTERNAL=13]="INTERNAL",wt[wt.UNAVAILABLE=14]="UNAVAILABLE",wt[wt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nS(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rS=new To([4294967295,4294967295],0);function k_(t){const e=nS().encode(t),n=new oC;return n.update(e),new Uint8Array(n.digest())}function E_(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new To([n,r],0),new To([i,s],0)]}class Up{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ea(`Invalid padding: ${n}`);if(r<0)throw new Ea(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ea(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ea(`Invalid padding when bitmap length is 0: ${n}`);this.Ae=8*e.length-n,this.Re=To.fromNumber(this.Ae)}Ve(e,n,r){let i=e.add(n.multiply(To.fromNumber(r)));return i.compare(rS)===1&&(i=new To([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Re).toNumber()}me(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ae===0)return!1;const n=k_(e),[r,i]=E_(n);for(let s=0;s<this.hashCount;s++){const o=this.Ve(r,i,s);if(!this.me(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Up(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ae===0)return;const n=k_(e),[r,i]=E_(n);for(let s=0;s<this.hashCount;s++){const o=this.Ve(r,i,s);this.fe(o)}}fe(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ea extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Cl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new nh(Ze.min(),i,new Jt(Et),_i(),pt())}}class Cl{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Cl(r,n,pt(),pt(),pt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu{constructor(e,n,r,i){this.ge=e,this.removedTargetIds=n,this.key=r,this.pe=i}}class y0{constructor(e,n){this.targetId=e,this.ye=n}}class v0{constructor(e,n,r=jn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class T_{constructor(){this.we=0,this.Se=A_(),this.be=jn.EMPTY_BYTE_STRING,this.De=!1,this.Ce=!0}get current(){return this.De}get resumeToken(){return this.be}get ve(){return this.we!==0}get Fe(){return this.Ce}Me(e){e.approximateByteSize()>0&&(this.Ce=!0,this.be=e)}xe(){let e=pt(),n=pt(),r=pt();return this.Se.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Ke()}}),new Cl(this.be,this.De,e,n,r)}Oe(){this.Ce=!1,this.Se=A_()}Ne(e,n){this.Ce=!0,this.Se=this.Se.insert(e,n)}Be(e){this.Ce=!0,this.Se=this.Se.remove(e)}Le(){this.we+=1}ke(){this.we-=1}qe(){this.Ce=!0,this.De=!0}}class iS{constructor(e){this.Qe=e,this.Ke=new Map,this.$e=_i(),this.Ue=I_(),this.We=new Jt(Et)}Ge(e){for(const n of e.ge)e.pe&&e.pe.isFoundDocument()?this.ze(n,e.pe):this.je(n,e.key,e.pe);for(const n of e.removedTargetIds)this.je(n,e.key,e.pe)}He(e){this.forEachTarget(e,n=>{const r=this.Je(n);switch(e.state){case 0:this.Ye(n)&&r.Me(e.resumeToken);break;case 1:r.ke(),r.ve||r.Oe(),r.Me(e.resumeToken);break;case 2:r.ke(),r.ve||this.removeTarget(n);break;case 3:this.Ye(n)&&(r.qe(),r.Me(e.resumeToken));break;case 4:this.Ye(n)&&(this.Ze(n),r.Me(e.resumeToken));break;default:Ke()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ke.forEach((r,i)=>{this.Ye(i)&&n(i)})}Xe(e){const n=e.targetId,r=e.ye.count,i=this.et(n);if(i){const s=i.target;if(hf(s))if(r===0){const o=new Ve(s.path);this.je(n,o,Nn.newNoDocument(o,Ze.min()))}else $t(r===1);else{const o=this.tt(n);if(o!==r){const a=this.nt(e),l=a?this.rt(a,e,o):1;if(l!==0){this.Ze(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.We=this.We.insert(n,u)}}}}}nt(e){const n=e.ye.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Vs(r).toUint8Array()}catch(l){if(l instanceof Yv)return Lo("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Up(o,i,s)}catch(l){return Lo(l instanceof Ea?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ae===0?null:a}rt(e,n,r){return n.ye.count===r-this.ot(e,n.targetId)?0:2}ot(e,n){const r=this.Qe.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Qe.st(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.je(n,s,null),i++)}),i}_t(e){const n=new Map;this.Ke.forEach((s,o)=>{const a=this.et(o);if(a){if(s.current&&hf(a.target)){const l=new Ve(a.target.path);this.$e.get(l)!==null||this.ut(o,l)||this.je(o,l,Nn.newNoDocument(l,e))}s.Fe&&(n.set(o,s.xe()),s.Oe())}});let r=pt();this.Ue.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.et(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.$e.forEach((s,o)=>o.setReadTime(e));const i=new nh(e,n,this.We,this.$e,r);return this.$e=_i(),this.Ue=I_(),this.We=new Jt(Et),i}ze(e,n){if(!this.Ye(e))return;const r=this.ut(e,n.key)?2:0;this.Je(e).Ne(n.key,r),this.$e=this.$e.insert(n.key,n),this.Ue=this.Ue.insert(n.key,this.ct(n.key).add(e))}je(e,n,r){if(!this.Ye(e))return;const i=this.Je(e);this.ut(e,n)?i.Ne(n,1):i.Be(n),this.Ue=this.Ue.insert(n,this.ct(n).delete(e)),r&&(this.$e=this.$e.insert(n,r))}removeTarget(e){this.Ke.delete(e)}tt(e){const n=this.Je(e).xe();return this.Qe.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Le(e){this.Je(e).Le()}Je(e){let n=this.Ke.get(e);return n||(n=new T_,this.Ke.set(e,n)),n}ct(e){let n=this.Ue.get(e);return n||(n=new Bn(Et),this.Ue=this.Ue.insert(e,n)),n}Ye(e){const n=this.et(e)!==null;return n||Oe("WatchChangeAggregator","Detected inactive target",e),n}et(e){const n=this.Ke.get(e);return n&&n.ve?null:this.Qe.lt(e)}Ze(e){this.Ke.set(e,new T_),this.Qe.getRemoteKeysForTarget(e).forEach(n=>{this.je(e,n,null)})}ut(e,n){return this.Qe.getRemoteKeysForTarget(e).has(n)}}function I_(){return new Jt(Ve.comparator)}function A_(){return new Jt(Ve.comparator)}const sS=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),oS=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),aS=(()=>({and:"AND",or:"OR"}))();class lS{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function ff(t,e){return t.useProto3Json||Qc(e)?e:{value:e}}function fc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function b0(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function uS(t,e){return fc(t,e.toTimestamp())}function Zr(t){return $t(!!t),Ze.fromTimestamp(function(n){const r=Ki(n);return new et(r.seconds,r.nanos)}(t))}function Fp(t,e){return function(r){return new Ut(["projects",r.projectId,"databases",r.database])}(t).child("documents").child(e).canonicalString()}function k0(t){const e=Ut.fromString(t);return $t(x0(e)),e}function pf(t,e){return Fp(t.databaseId,e.path)}function fd(t,e){const n=k0(e);if(n.get(1)!==t.databaseId.projectId)throw new Ie(pe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ie(pe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ve(E0(n))}function mf(t,e){return Fp(t.databaseId,e)}function cS(t){const e=k0(t);return e.length===4?Ut.emptyPath():E0(e)}function gf(t){return new Ut(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function E0(t){return $t(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function x_(t,e,n){return{name:pf(t,e),fields:n.value.mapValue.fields}}function hS(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Ke()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,d){return u.useProto3Json?($t(d===void 0||typeof d=="string"),jn.fromBase64String(d||"")):($t(d===void 0||d instanceof Uint8Array),jn.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const d=u.code===void 0?pe.UNKNOWN:w0(u.code);return new Ie(d,u.message||"")}(o);n=new v0(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=fd(t,r.document.name),s=Zr(r.document.updateTime),o=r.document.createTime?Zr(r.document.createTime):Ze.min(),a=new nr({mapValue:{fields:r.document.fields}}),l=Nn.newFoundDocument(i,s,o,a),u=r.targetIds||[],d=r.removedTargetIds||[];n=new Uu(u,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=fd(t,r.document),s=r.readTime?Zr(r.readTime):Ze.min(),o=Nn.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Uu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=fd(t,r.document),s=r.removedTargetIds||[];n=new Uu([],s,i,null)}else{if(!("filter"in e))return Ke();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new eS(i,s),a=r.targetId;n=new y0(a,o)}}return n}function dS(t,e){let n;if(e instanceof xl)n={update:x_(t,e.key,e.value)};else if(e instanceof Lp)n={delete:pf(t,e.key)};else if(e instanceof Ji)n={update:x_(t,e.key,e.data),updateMask:vS(e.fieldMask)};else{if(!(e instanceof YC))return Ke();n={verify:pf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof hc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof il)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof sl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof dc)return{fieldPath:o.field.canonicalString(),increment:a.Te};throw Ke()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:uS(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Ke()}(t,e.precondition)),n}function fS(t,e){return t&&t.length>0?($t(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Zr(i.updateTime):Zr(s);return o.isEqual(Ze.min())&&(o=Zr(s)),new KC(o,i.transformResults||[])}(n,e))):[]}function pS(t,e){return{documents:[mf(t,e.path)]}}function T0(t,e){const n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=mf(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=mf(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(l){if(l.length!==0)return A0(Cr.create(l,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const s=function(l){if(l.length!==0)return l.map(u=>function(m){return{field:Li(m.field),direction:_S(m.dir)}}(u))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=ff(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),n}function mS(t){let e=cS(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){$t(r===1);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(m){const w=I0(m);return w instanceof Cr&&e0(w)?w.getFilters():[w]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(w=>function(E){return new Io(co(E.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(w))}(n.orderBy));let a=null;n.limit&&(a=function(m){let w;return w=typeof m=="object"?m.value:m,Qc(w)?null:w}(n.limit));let l=null;n.startAt&&(l=function(m){const w=!!m.before,g=m.values||[];return new $o(g,w)}(n.startAt));let u=null;return n.endAt&&(u=function(m){const w=!m.before,g=m.values||[];return new $o(g,w)}(n.endAt)),MC(e,i,o,s,a,"F",l,u)}function gS(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ke()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function I0(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=co(n.unaryFilter.field);return gn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=co(n.unaryFilter.field);return gn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=co(n.unaryFilter.field);return gn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=co(n.unaryFilter.field);return gn.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Ke()}}(t):t.fieldFilter!==void 0?function(n){return gn.create(co(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ke()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Cr.create(n.compositeFilter.filters.map(r=>I0(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ke()}}(n.compositeFilter.op))}(t):Ke()}function _S(t){return sS[t]}function wS(t){return oS[t]}function yS(t){return aS[t]}function Li(t){return{fieldPath:t.canonicalString()}}function co(t){return Vn.fromServerFormat(t.fieldPath)}function A0(t){return t instanceof gn?function(n){if(n.op==="=="){if(f_(n.value))return{unaryFilter:{field:Li(n.field),op:"IS_NAN"}};if(d_(n.value))return{unaryFilter:{field:Li(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(f_(n.value))return{unaryFilter:{field:Li(n.field),op:"IS_NOT_NAN"}};if(d_(n.value))return{unaryFilter:{field:Li(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Li(n.field),op:wS(n.op),value:n.value}}}(t):t instanceof Cr?function(n){const r=n.getFilters().map(i=>A0(i));return r.length===1?r[0]:{compositeFilter:{op:yS(n.op),filters:r}}}(t):Ke()}function vS(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function x0(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e,n,r,i,s=Ze.min(),o=Ze.min(),a=jn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Ui(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ui(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ui(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ui(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(e){this.ht=e}}function kS(t){const e=mS({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?cc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(){this.an=new TS}addToCollectionParentIndex(e,n){return this.an.add(n),be.resolve()}getCollectionParents(e,n){return be.resolve(this.an.getEntries(n))}addFieldIndex(e,n){return be.resolve()}deleteFieldIndex(e,n){return be.resolve()}deleteAllFieldIndexes(e){return be.resolve()}createTargetIndexes(e,n){return be.resolve()}getDocumentsMatchingTarget(e,n){return be.resolve(null)}getIndexType(e,n){return be.resolve(0)}getFieldIndexes(e,n){return be.resolve([])}getNextCollectionGroupToUpdate(e){return be.resolve(null)}getMinOffset(e,n){return be.resolve(Wi.min())}getMinOffsetFromCollectionGroup(e,n){return be.resolve(Wi.min())}updateCollectionGroup(e,n,r){return be.resolve()}updateIndexEntries(e,n){return be.resolve()}}class TS{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Bn(Ut.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Bn(Ut.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static Bn(){return new Bo(0)}static Ln(){return new Bo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(){this.changes=new Jo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Nn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?be.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Da(r.mutation,i,or.empty(),et.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,pt()).next(()=>r))}getLocalViewOfDocuments(e,n,r=pt()){const i=ks();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=ka();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ks();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,pt()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=_i();const o=Pa(),a=function(){return Pa()}();return n.forEach((l,u)=>{const d=r.get(u.key);i.has(u.key)&&(d===void 0||d.mutation instanceof Ji)?s=s.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),Da(d.mutation,u,d.mutation.getFieldMask(),et.now())):o.set(u.key,or.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,d)=>o.set(u,d)),n.forEach((u,d)=>{var m;return a.set(u,new AS(d,(m=o.get(u))!==null&&m!==void 0?m:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Pa();let i=new Jt((o,a)=>o-a),s=pt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let d=r.get(l)||or.empty();d=a.applyToLocalView(u,d),r.set(l,d);const m=(i.get(a.batchId)||pt()).add(l);i=i.insert(a.batchId,m)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,d=l.value,m=u0();d.forEach(w=>{if(!s.has(w)){const g=g0(n.get(w),r.get(w));g!==null&&m.set(w,g),s=s.add(w)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,m))}return be.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return Ve.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Mp(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):be.resolve(ks());let a=-1,l=s;return o.next(u=>be.forEach(u,(d,m)=>(a<m.largestBatchId&&(a=m.largestBatchId),s.get(d)?be.resolve():this.remoteDocumentCache.getEntry(e,d).next(w=>{l=l.insert(d,w)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,pt())).next(d=>({batchId:a,changes:l0(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ve(n)).next(r=>{let i=ka();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=ka();return this.indexManager.getCollectionParents(e,s).next(a=>be.forEach(a,l=>{const u=function(m,w){return new js(w,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(d=>{d.forEach((m,w)=>{o=o.insert(m,w)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,u)=>{const d=u.getKey();o.get(d)===null&&(o=o.insert(d,Nn.newInvalidDocument(d)))});let a=ka();return o.forEach((l,u)=>{const d=s.get(l);d!==void 0&&Da(d.mutation,u,or.empty(),et.now()),Jc(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(e){this.serializer=e,this.lr=new Map,this.hr=new Map}getBundleMetadata(e,n){return be.resolve(this.lr.get(n))}saveBundleMetadata(e,n){return this.lr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Zr(i.createTime)}}(n)),be.resolve()}getNamedQuery(e,n){return be.resolve(this.hr.get(n))}saveNamedQuery(e,n){return this.hr.set(n.name,function(i){return{name:i.name,query:kS(i.bundledQuery),readTime:Zr(i.readTime)}}(n)),be.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{constructor(){this.overlays=new Jt(Ve.comparator),this.Pr=new Map}getOverlay(e,n){return be.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ks();return be.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.It(e,n,s)}),be.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Pr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Pr.delete(r)),be.resolve()}getOverlaysForCollection(e,n,r){const i=ks(),s=n.length+1,o=new Ve(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return be.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Jt((u,d)=>u-d);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let d=s.get(u.largestBatchId);d===null&&(d=ks(),s=s.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const a=ks(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,d)=>a.set(u,d)),!(a.size()>=i)););return be.resolve(a)}It(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Pr.get(i.largestBatchId).delete(r.key);this.Pr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new XC(n,r));let s=this.Pr.get(n);s===void 0&&(s=pt(),this.Pr.set(n,s)),this.Pr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p{constructor(){this.Ir=new Bn(kn.dr),this.Tr=new Bn(kn.Er)}isEmpty(){return this.Ir.isEmpty()}addReference(e,n){const r=new kn(e,n);this.Ir=this.Ir.add(r),this.Tr=this.Tr.add(r)}Ar(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Rr(new kn(e,n))}Vr(e,n){e.forEach(r=>this.removeReference(r,n))}mr(e){const n=new Ve(new Ut([])),r=new kn(n,e),i=new kn(n,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Rr(o),s.push(o.key)}),s}gr(){this.Ir.forEach(e=>this.Rr(e))}Rr(e){this.Ir=this.Ir.delete(e),this.Tr=this.Tr.delete(e)}pr(e){const n=new Ve(new Ut([])),r=new kn(n,e),i=new kn(n,e+1);let s=pt();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new kn(e,0),r=this.Ir.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class kn{constructor(e,n){this.key=e,this.yr=n}static dr(e,n){return Ve.comparator(e.key,n.key)||Et(e.yr,n.yr)}static Er(e,n){return Et(e.yr,n.yr)||Ve.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.wr=1,this.Sr=new Bn(kn.dr)}checkEmpty(e){return be.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.wr;this.wr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new ZC(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.Sr=this.Sr.add(new kn(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return be.resolve(o)}lookupMutationBatch(e,n){return be.resolve(this.br(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Dr(r),s=i<0?0:i;return be.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return be.resolve(this.mutationQueue.length===0?-1:this.wr-1)}getAllMutationBatches(e){return be.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new kn(n,0),i=new kn(n,Number.POSITIVE_INFINITY),s=[];return this.Sr.forEachInRange([r,i],o=>{const a=this.br(o.yr);s.push(a)}),be.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Bn(Et);return n.forEach(i=>{const s=new kn(i,0),o=new kn(i,Number.POSITIVE_INFINITY);this.Sr.forEachInRange([s,o],a=>{r=r.add(a.yr)})}),be.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;Ve.isDocumentKey(s)||(s=s.child(""));const o=new kn(new Ve(s),0);let a=new Bn(Et);return this.Sr.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.yr)),!0)},o),be.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.br(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){$t(this.vr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Sr;return be.forEach(n.mutations,i=>{const s=new kn(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Sr=r})}xn(e){}containsKey(e,n){const r=new kn(n,0),i=this.Sr.firstAfterOrEqual(r);return be.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,be.resolve()}vr(e,n){return this.Dr(e)}Dr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}br(e){const n=this.Dr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{constructor(e){this.Fr=e,this.docs=function(){return new Jt(Ve.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Fr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return be.resolve(r?r.document.mutableCopy():Nn.newInvalidDocument(n))}getEntries(e,n){let r=_i();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Nn.newInvalidDocument(i))}),be.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=_i();const o=n.path,a=new Ve(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:d}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||wC(_C(d),r)<=0||(i.has(d.key)||Jc(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return be.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Ke()}Mr(e,n){return be.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new DS(this)}getSize(e){return be.resolve(this.size)}}class DS extends IS{constructor(e){super(),this.ur=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ur.addEntry(e,i)):this.ur.removeEntry(r)}),be.waitFor(n)}getFromCache(e,n){return this.ur.getEntry(e,n)}getAllFromCache(e,n){return this.ur.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OS{constructor(e){this.persistence=e,this.Or=new Jo(n=>Pp(n),Dp),this.lastRemoteSnapshotVersion=Ze.min(),this.highestTargetId=0,this.Nr=0,this.Br=new $p,this.targetCount=0,this.Lr=Bo.Bn()}forEachTarget(e,n){return this.Or.forEach((r,i)=>n(i)),be.resolve()}getLastRemoteSnapshotVersion(e){return be.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return be.resolve(this.Nr)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),be.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Nr&&(this.Nr=n),be.resolve()}Qn(e){this.Or.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Lr=new Bo(n),this.highestTargetId=n),e.sequenceNumber>this.Nr&&(this.Nr=e.sequenceNumber)}addTargetData(e,n){return this.Qn(n),this.targetCount+=1,be.resolve()}updateTargetData(e,n){return this.Qn(n),be.resolve()}removeTargetData(e,n){return this.Or.delete(n.target),this.Br.mr(n.targetId),this.targetCount-=1,be.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Or.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Or.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),be.waitFor(s).next(()=>i)}getTargetCount(e){return be.resolve(this.targetCount)}getTargetData(e,n){const r=this.Or.get(n)||null;return be.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Ar(n,r),be.resolve()}removeMatchingKeys(e,n,r){this.Br.Vr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),be.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.mr(n),be.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.pr(n);return be.resolve(r)}containsKey(e,n){return be.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{constructor(e,n){this.kr={},this.overlays={},this.qr=new Cp(0),this.Qr=!1,this.Qr=!0,this.referenceDelegate=e(this),this.Kr=new OS(this),this.indexManager=new ES,this.remoteDocumentCache=function(i){return new PS(i)}(r=>this.referenceDelegate.$r(r)),this.serializer=new bS(n),this.Ur=new CS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Qr=!1,Promise.resolve()}get started(){return this.Qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new SS,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.kr[e.toKey()];return r||(r=new RS(n,this.referenceDelegate),this.kr[e.toKey()]=r),r}getTargetCache(){return this.Kr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ur}runTransaction(e,n,r){Oe("MemoryPersistence","Starting transaction:",e);const i=new MS(this.qr.next());return this.referenceDelegate.Wr(),r(i).next(s=>this.referenceDelegate.Gr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}zr(e,n){return be.or(Object.values(this.kr).map(r=>()=>r.containsKey(e,n)))}}class MS extends vC{constructor(e){super(),this.currentSequenceNumber=e}}class Bp{constructor(e){this.persistence=e,this.jr=new $p,this.Hr=null}static Jr(e){return new Bp(e)}get Yr(){if(this.Hr)return this.Hr;throw Ke()}addReference(e,n,r){return this.jr.addReference(r,n),this.Yr.delete(r.toString()),be.resolve()}removeReference(e,n,r){return this.jr.removeReference(r,n),this.Yr.add(r.toString()),be.resolve()}markPotentiallyOrphaned(e,n){return this.Yr.add(n.toString()),be.resolve()}removeTarget(e,n){this.jr.mr(n.targetId).forEach(i=>this.Yr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Yr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Wr(){this.Hr=new Set}Gr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return be.forEach(this.Yr,r=>{const i=Ve.fromPath(r);return this.Zr(e,i).next(s=>{s||n.removeEntry(i,Ze.min())})}).next(()=>(this.Hr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Zr(e,n).next(r=>{r?this.Yr.delete(n.toString()):this.Yr.add(n.toString())})}$r(e){return 0}Zr(e,n){return be.or([()=>be.resolve(this.jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.zr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Qi=r,this.Ki=i}static $i(e,n){let r=pt(),i=pt();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new zp(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(){this.Ui=!1,this.Wi=!1,this.Gi=100,this.zi=8}initialize(e,n){this.ji=e,this.indexManager=n,this.Ui=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Hi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Ji(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new LS;return this.Yi(e,n,o).next(a=>{if(s.result=a,this.Wi)return this.Zi(e,n,o,a.size)})}).next(()=>s.result)}Zi(e,n,r,i){return r.documentReadCount<this.Gi?(ha()<=gt.DEBUG&&Oe("QueryEngine","SDK will not create cache indexes for query:",uo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Gi,"documents"),be.resolve()):(ha()<=gt.DEBUG&&Oe("QueryEngine","Query:",uo(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.zi*i?(ha()<=gt.DEBUG&&Oe("QueryEngine","The SDK decides to create cache indexes for query:",uo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Yr(n))):be.resolve())}Hi(e,n){if(__(n))return be.resolve(null);let r=Yr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=cc(n,null,"F"),r=Yr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=pt(...s);return this.ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.Xi(n,a);return this.es(n,u,o,l.readTime)?this.Hi(e,cc(n,null,"F")):this.ts(e,u,n,l)}))})))}Ji(e,n,r,i){return __(n)||i.isEqual(Ze.min())?be.resolve(null):this.ji.getDocuments(e,r).next(s=>{const o=this.Xi(n,s);return this.es(n,o,r,i)?be.resolve(null):(ha()<=gt.DEBUG&&Oe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),uo(n)),this.ts(e,o,n,gC(i,-1)).next(a=>a))})}Xi(e,n){let r=new Bn(o0(e));return n.forEach((i,s)=>{Jc(e,s)&&(r=r.add(s))}),r}es(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Yi(e,n,r){return ha()<=gt.DEBUG&&Oe("QueryEngine","Using full collection scan to execute query:",uo(n)),this.ji.getDocumentsMatchingQuery(e,n,Wi.min(),r)}ts(e,n,r,i){return this.ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{constructor(e,n,r,i){this.persistence=e,this.ns=n,this.serializer=i,this.rs=new Jt(Et),this.ss=new Jo(s=>Pp(s),Dp),this.os=new Map,this._s=e.getRemoteDocumentCache(),this.Kr=e.getTargetCache(),this.Ur=e.getBundleCache(),this.us(r)}us(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new xS(this._s,this.mutationQueue,this.documentOverlayCache,this.indexManager),this._s.setIndexManager(this.indexManager),this.ns.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.rs))}}function FS(t,e,n,r){return new US(t,e,n,r)}async function C0(t,e){const n=Xe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.us(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=pt();for(const u of i){o.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}for(const u of s){a.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(u=>({cs:u,removedBatchIds:o,addedBatchIds:a}))})})}function $S(t,e){const n=Xe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n._s.newChangeBuffer({trackRemovals:!0});return function(a,l,u,d){const m=u.batch,w=m.keys();let g=be.resolve();return w.forEach(E=>{g=g.next(()=>d.getEntry(l,E)).next(b=>{const A=u.docVersions.get(E);$t(A!==null),b.version.compareTo(A)<0&&(m.applyToRemoteDocument(b,u),b.isValidDocument()&&(b.setReadTime(u.commitVersion),d.addEntry(b)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(l,m))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=pt();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function S0(t){const e=Xe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Kr.getLastRemoteSnapshotVersion(n))}function BS(t,e){const n=Xe(t),r=e.snapshotVersion;let i=n.rs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n._s.newChangeBuffer({trackRemovals:!0});i=n.rs;const a=[];e.targetChanges.forEach((d,m)=>{const w=i.get(m);if(!w)return;a.push(n.Kr.removeMatchingKeys(s,d.removedDocuments,m).next(()=>n.Kr.addMatchingKeys(s,d.addedDocuments,m)));let g=w.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(m)!==null?g=g.withResumeToken(jn.EMPTY_BYTE_STRING,Ze.min()).withLastLimboFreeSnapshotVersion(Ze.min()):d.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(d.resumeToken,r)),i=i.insert(m,g),function(b,A,T){return b.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=3e8?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0}(w,g,d)&&a.push(n.Kr.updateTargetData(s,g))});let l=_i(),u=pt();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(zS(s,o,e.documentUpdates).next(d=>{l=d.ls,u=d.hs})),!r.isEqual(Ze.min())){const d=n.Kr.getLastRemoteSnapshotVersion(s).next(m=>n.Kr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return be.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.rs=i,s))}function zS(t,e,n){let r=pt(),i=pt();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=_i();return n.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(Ze.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):Oe("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{ls:o,hs:i}})}function jS(t,e){const n=Xe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function qS(t,e){const n=Xe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Kr.getTargetData(r,e).next(s=>s?(i=s,be.resolve(i)):n.Kr.allocateTargetId(r).next(o=>(i=new Ui(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Kr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.rs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.rs=n.rs.insert(r.targetId,r),n.ss.set(e,r.targetId)),r})}async function _f(t,e,n){const r=Xe(t),i=r.rs.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Al(o))throw o;Oe("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.rs=r.rs.remove(e),r.ss.delete(i.target)}function C_(t,e,n){const r=Xe(t);let i=Ze.min(),s=pt();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,d){const m=Xe(l),w=m.ss.get(d);return w!==void 0?be.resolve(m.rs.get(w)):m.Kr.getTargetData(u,d)}(r,o,Yr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Kr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ns.getDocumentsMatchingQuery(o,e,n?i:Ze.min(),n?s:pt())).next(a=>(HS(r,LC(e),a),{documents:a,Ps:s})))}function HS(t,e,n){let r=t.os.get(e)||Ze.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.os.set(e,r)}class S_{constructor(){this.activeTargetIds=zC()}Rs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}As(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class WS{constructor(){this.ro=new S_,this.io={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.ro.Rs(e),this.io[e]||"not-current"}updateQueryState(e,n,r){this.io[e]=n}removeLocalQueryTarget(e){this.ro.Vs(e)}isLocalQueryTarget(e){return this.ro.activeTargetIds.has(e)}clearQueryState(e){delete this.io[e]}getAllActiveQueryTargets(){return this.ro.activeTargetIds}isActiveQueryTarget(e){return this.ro.activeTargetIds.has(e)}start(){return this.ro=new S_,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{so(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_{constructor(){this.oo=()=>this._o(),this.ao=()=>this.uo(),this.co=[],this.lo()}so(e){this.co.push(e)}shutdown(){window.removeEventListener("online",this.oo),window.removeEventListener("offline",this.ao)}lo(){window.addEventListener("online",this.oo),window.addEventListener("offline",this.ao)}_o(){Oe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.co)e(0)}uo(){Oe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.co)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wu=null;function pd(){return wu===null?wu=function(){return 268435456+Math.round(2147483648*Math.random())}():wu++,"0x"+wu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(e){this.ho=e.ho,this.Po=e.Po}Io(e){this.To=e}Eo(e){this.Ao=e}onMessage(e){this.Ro=e}close(){this.Po()}send(e){this.ho(e)}Vo(){this.To()}mo(e){this.Ao(e)}fo(e){this.Ro(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dn="WebChannelConnection";class YS extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.po=r+"://"+n.host,this.yo=`projects/${i}/databases/${s}`,this.wo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get So(){return!1}bo(n,r,i,s,o){const a=pd(),l=this.Do(n,r);Oe("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Co(u,s,o),this.vo(n,l,u,i).then(d=>(Oe("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw Lo("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",l,"request:",i),d})}Fo(n,r,i,s,o,a){return this.bo(n,r,i,s,o)}Co(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Xo}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}Do(n,r){const i=GS[n];return`${this.po}/v1/${r}:${i}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,n,r,i){const s=pd();return new Promise((o,a)=>{const l=new sC;l.setWithCredentials(!0),l.listenOnce(rC.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case dd.NO_ERROR:const d=l.getResponseJson();Oe(Dn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case dd.TIMEOUT:Oe(Dn,`RPC '${e}' ${s} timed out`),a(new Ie(pe.DEADLINE_EXCEEDED,"Request time out"));break;case dd.HTTP_ERROR:const m=l.getStatus();if(Oe(Dn,`RPC '${e}' ${s} failed with status:`,m,"response text:",l.getResponseText()),m>0){let w=l.getResponseJson();Array.isArray(w)&&(w=w[0]);const g=w==null?void 0:w.error;if(g&&g.status&&g.message){const E=function(A){const T=A.toLowerCase().replace(/_/g,"-");return Object.values(pe).indexOf(T)>=0?T:pe.UNKNOWN}(g.status);a(new Ie(E,g.message))}else a(new Ie(pe.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new Ie(pe.UNAVAILABLE,"Connection failed."));break;default:Ke()}}finally{Oe(Dn,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(i);Oe(Dn,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",u,r,15)})}Mo(e,n,r){const i=pd(),s=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=tC(),a=nC(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Co(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=s.join("");Oe(Dn,`Creating RPC '${e}' stream ${i}: ${d}`,l);const m=o.createWebChannel(d,l);let w=!1,g=!1;const E=new QS({ho:A=>{g?Oe(Dn,`Not sending because RPC '${e}' stream ${i} is closed:`,A):(w||(Oe(Dn,`Opening RPC '${e}' stream ${i} transport.`),m.open(),w=!0),Oe(Dn,`RPC '${e}' stream ${i} sending:`,A),m.send(A))},Po:()=>m.close()}),b=(A,T,x)=>{A.listen(T,R=>{try{x(R)}catch(O){setTimeout(()=>{throw O},0)}})};return b(m,mu.EventType.OPEN,()=>{g||Oe(Dn,`RPC '${e}' stream ${i} transport opened.`)}),b(m,mu.EventType.CLOSE,()=>{g||(g=!0,Oe(Dn,`RPC '${e}' stream ${i} transport closed`),E.mo())}),b(m,mu.EventType.ERROR,A=>{g||(g=!0,Lo(Dn,`RPC '${e}' stream ${i} transport errored:`,A),E.mo(new Ie(pe.UNAVAILABLE,"The operation could not be completed")))}),b(m,mu.EventType.MESSAGE,A=>{var T;if(!g){const x=A.data[0];$t(!!x);const R=x,O=R.error||((T=R[0])===null||T===void 0?void 0:T.error);if(O){Oe(Dn,`RPC '${e}' stream ${i} received error:`,O);const H=O.status;let Q=function(ee){const oe=pn[ee];if(oe!==void 0)return w0(oe)}(H),z=O.message;Q===void 0&&(Q=pe.INTERNAL,z="Unknown error status: "+H+" with message "+O.message),g=!0,E.mo(new Ie(Q,z)),m.close()}else Oe(Dn,`RPC '${e}' stream ${i} received:`,x),E.fo(x)}}),b(a,iC.STAT_EVENT,A=>{A.stat===a_.PROXY?Oe(Dn,`RPC '${e}' stream ${i} detected buffering proxy`):A.stat===a_.NOPROXY&&Oe(Dn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{E.Vo()},0),E}}function md(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rh(t){return new lS(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0{constructor(e,n,r=1e3,i=1.5,s=6e4){this._i=e,this.timerId=n,this.xo=r,this.Oo=i,this.No=s,this.Bo=0,this.Lo=null,this.ko=Date.now(),this.reset()}reset(){this.Bo=0}qo(){this.Bo=this.No}Qo(e){this.cancel();const n=Math.floor(this.Bo+this.Ko()),r=Math.max(0,Date.now()-this.ko),i=Math.max(0,n-r);i>0&&Oe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Bo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Lo=this._i.enqueueAfterDelay(this.timerId,i,()=>(this.ko=Date.now(),e())),this.Bo*=this.Oo,this.Bo<this.xo&&(this.Bo=this.xo),this.Bo>this.No&&(this.Bo=this.No)}$o(){this.Lo!==null&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){this.Lo!==null&&(this.Lo.cancel(),this.Lo=null)}Ko(){return(Math.random()-.5)*this.Bo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(e,n,r,i,s,o,a,l){this._i=e,this.Uo=r,this.Wo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Go=0,this.zo=null,this.jo=null,this.stream=null,this.Ho=new R0(e,n)}Jo(){return this.state===1||this.state===5||this.Yo()}Yo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Zo()}async stop(){this.Jo()&&await this.close(0)}Xo(){this.state=0,this.Ho.reset()}e_(){this.Yo()&&this.zo===null&&(this.zo=this._i.enqueueAfterDelay(this.Uo,6e4,()=>this.t_()))}n_(e){this.r_(),this.stream.send(e)}async t_(){if(this.Yo())return this.close(0)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}i_(){this.jo&&(this.jo.cancel(),this.jo=null)}async close(e,n){this.r_(),this.i_(),this.Ho.cancel(),this.Go++,e!==4?this.Ho.reset():n&&n.code===pe.RESOURCE_EXHAUSTED?(gi(n.toString()),gi("Using maximum backoff delay to prevent overloading the backend."),this.Ho.qo()):n&&n.code===pe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.s_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Eo(n)}s_(){}auth(){this.state=1;const e=this.o_(this.Go),n=this.Go;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Go===n&&this.__(r,i)},r=>{e(()=>{const i=new Ie(pe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.a_(i)})})}__(e,n){const r=this.o_(this.Go);this.stream=this.u_(e,n),this.stream.Io(()=>{r(()=>(this.state=2,this.jo=this._i.enqueueAfterDelay(this.Wo,1e4,()=>(this.Yo()&&(this.state=3),Promise.resolve())),this.listener.Io()))}),this.stream.Eo(i=>{r(()=>this.a_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Zo(){this.state=5,this.Ho.Qo(async()=>{this.state=0,this.start()})}a_(e){return Oe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}o_(e){return n=>{this._i.enqueueAndForget(()=>this.Go===e?n():(Oe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ZS extends P0{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}u_(e,n){return this.connection.Mo("Listen",e,n)}onMessage(e){this.Ho.reset();const n=hS(this.serializer,e),r=function(s){if(!("targetChange"in s))return Ze.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Ze.min():o.readTime?Zr(o.readTime):Ze.min()}(e);return this.listener.c_(n,r)}l_(e){const n={};n.database=gf(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=hf(l)?{documents:pS(s,l)}:{query:T0(s,l)},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=b0(s,o.resumeToken);const u=ff(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(Ze.min())>0){a.readTime=fc(s,o.snapshotVersion.toTimestamp());const u=ff(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=gS(this.serializer,e);r&&(n.labels=r),this.n_(n)}h_(e){const n={};n.database=gf(this.serializer),n.removeTarget=e,this.n_(n)}}class XS extends P0{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.P_=!1}get I_(){return this.P_}start(){this.P_=!1,this.lastStreamToken=void 0,super.start()}s_(){this.P_&&this.d_([])}u_(e,n){return this.connection.Mo("Write",e,n)}onMessage(e){if($t(!!e.streamToken),this.lastStreamToken=e.streamToken,this.P_){this.Ho.reset();const n=fS(e.writeResults,e.commitTime),r=Zr(e.commitTime);return this.listener.T_(r,n)}return $t(!e.writeResults||e.writeResults.length===0),this.P_=!0,this.listener.E_()}A_(){const e={};e.database=gf(this.serializer),this.n_(e)}d_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>dS(this.serializer,r))};this.n_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JS extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.R_=!1}V_(){if(this.R_)throw new Ie(pe.FAILED_PRECONDITION,"The client has already been terminated.")}bo(e,n,r){return this.V_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.bo(e,n,r,i,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ie(pe.UNKNOWN,i.toString())})}Fo(e,n,r,i){return this.V_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Fo(e,n,r,s,o,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ie(pe.UNKNOWN,s.toString())})}terminate(){this.R_=!0}}async function eR(t,e,n){var r;const i=Xe(t),{request:s,m_:o}=function(m,w,g){const E=T0(m,w),b={},A=[];let T=0;return g.forEach(x=>{const R="aggregate_"+T++;b[R]=x.alias,x.Ee==="count"?A.push({alias:R,count:{}}):x.Ee==="avg"?A.push({alias:R,avg:{field:Li(x.fieldPath)}}):x.Ee==="sum"&&A.push({alias:R,sum:{field:Li(x.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:A,structuredQuery:E.structuredQuery},parent:E.parent},m_:b}}(i.serializer,function(m){const w=Xe(m);return w.de||(w.de=i0(w,m.explicitOrderBy)),w.de}(e),n),a=s.parent;i.connection.So||delete s.parent;const l=(await i.Fo("RunAggregationQuery",a,s,1)).filter(d=>!!d.result);$t(l.length===1);const u=(r=l[0].result)===null||r===void 0?void 0:r.aggregateFields;return Object.keys(u).reduce((d,m)=>(d[o[m]]=u[m],d),{})}class tR{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.f_=0,this.g_=null,this.p_=!0}y_(){this.f_===0&&(this.w_("Unknown"),this.g_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.g_=null,this.S_("Backend didn't respond within 10 seconds."),this.w_("Offline"),Promise.resolve())))}b_(e){this.state==="Online"?this.w_("Unknown"):(this.f_++,this.f_>=1&&(this.D_(),this.S_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.w_("Offline")))}set(e){this.D_(),this.f_=0,e==="Online"&&(this.p_=!1),this.w_(e)}w_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}S_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.p_?(gi(n),this.p_=!1):Oe("OnlineStateTracker",n)}D_(){this.g_!==null&&(this.g_.cancel(),this.g_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nR{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.C_=[],this.v_=new Map,this.F_=new Set,this.M_=[],this.x_=s,this.x_.so(o=>{r.enqueueAndForget(async()=>{qs(this)&&(Oe("RemoteStore","Restarting streams for network reachability change."),await async function(l){const u=Xe(l);u.F_.add(4),await Sl(u),u.O_.set("Unknown"),u.F_.delete(4),await ih(u)}(this))})}),this.O_=new tR(r,i)}}async function ih(t){if(qs(t))for(const e of t.M_)await e(!0)}async function Sl(t){for(const e of t.M_)await e(!1)}function D0(t,e){const n=Xe(t);n.v_.has(e.targetId)||(n.v_.set(e.targetId,e),Hp(n)?qp(n):ea(n).Yo()&&jp(n,e))}function O0(t,e){const n=Xe(t),r=ea(n);n.v_.delete(e),r.Yo()&&N0(n,e),n.v_.size===0&&(r.Yo()?r.e_():qs(n)&&n.O_.set("Unknown"))}function jp(t,e){if(t.N_.Le(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ze.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ea(t).l_(e)}function N0(t,e){t.N_.Le(e),ea(t).h_(e)}function qp(t){t.N_=new iS({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>t.v_.get(e)||null,st:()=>t.datastore.serializer.databaseId}),ea(t).start(),t.O_.y_()}function Hp(t){return qs(t)&&!ea(t).Jo()&&t.v_.size>0}function qs(t){return Xe(t).F_.size===0}function M0(t){t.N_=void 0}async function rR(t){t.v_.forEach((e,n)=>{jp(t,e)})}async function iR(t,e){M0(t),Hp(t)?(t.O_.b_(e),qp(t)):t.O_.set("Unknown")}async function sR(t,e,n){if(t.O_.set("Online"),e instanceof v0&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.v_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.v_.delete(a),i.N_.removeTarget(a))}(t,e)}catch(r){Oe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await pc(t,r)}else if(e instanceof Uu?t.N_.Ge(e):e instanceof y0?t.N_.Xe(e):t.N_.He(e),!n.isEqual(Ze.min()))try{const r=await S0(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.N_._t(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const d=s.v_.get(u);d&&s.v_.set(u,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const d=s.v_.get(l);if(!d)return;s.v_.set(l,d.withResumeToken(jn.EMPTY_BYTE_STRING,d.snapshotVersion)),N0(s,l);const m=new Ui(d.target,l,u,d.sequenceNumber);jp(s,m)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){Oe("RemoteStore","Failed to raise snapshot:",r),await pc(t,r)}}async function pc(t,e,n){if(!Al(e))throw e;t.F_.add(1),await Sl(t),t.O_.set("Offline"),n||(n=()=>S0(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Oe("RemoteStore","Retrying IndexedDB access"),await n(),t.F_.delete(1),await ih(t)})}function L0(t,e){return e().catch(n=>pc(t,n,e))}async function sh(t){const e=Xe(t),n=Gi(e);let r=e.C_.length>0?e.C_[e.C_.length-1].batchId:-1;for(;oR(e);)try{const i=await jS(e.localStore,r);if(i===null){e.C_.length===0&&n.e_();break}r=i.batchId,aR(e,i)}catch(i){await pc(e,i)}V0(e)&&U0(e)}function oR(t){return qs(t)&&t.C_.length<10}function aR(t,e){t.C_.push(e);const n=Gi(t);n.Yo()&&n.I_&&n.d_(e.mutations)}function V0(t){return qs(t)&&!Gi(t).Jo()&&t.C_.length>0}function U0(t){Gi(t).start()}async function lR(t){Gi(t).A_()}async function uR(t){const e=Gi(t);for(const n of t.C_)e.d_(n.mutations)}async function cR(t,e,n){const r=t.C_.shift(),i=Vp.from(r,e,n);await L0(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await sh(t)}async function hR(t,e){e&&Gi(t).I_&&await async function(r,i){if(function(o){return tS(o)&&o!==pe.ABORTED}(i.code)){const s=r.C_.shift();Gi(r).Xo(),await L0(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await sh(r)}}(t,e),V0(t)&&U0(t)}async function P_(t,e){const n=Xe(t);n.asyncQueue.verifyOperationInProgress(),Oe("RemoteStore","RemoteStore received new credentials");const r=qs(n);n.F_.add(3),await Sl(n),r&&n.O_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.F_.delete(3),await ih(n)}async function dR(t,e){const n=Xe(t);e?(n.F_.delete(2),await ih(n)):e||(n.F_.add(2),await Sl(n),n.O_.set("Unknown"))}function ea(t){return t.B_||(t.B_=function(n,r,i){const s=Xe(n);return s.V_(),new ZS(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Io:rR.bind(null,t),Eo:iR.bind(null,t),c_:sR.bind(null,t)}),t.M_.push(async e=>{e?(t.B_.Xo(),Hp(t)?qp(t):t.O_.set("Unknown")):(await t.B_.stop(),M0(t))})),t.B_}function Gi(t){return t.L_||(t.L_=function(n,r,i){const s=Xe(n);return s.V_(),new XS(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Io:lR.bind(null,t),Eo:hR.bind(null,t),E_:uR.bind(null,t),T_:cR.bind(null,t)}),t.M_.push(async e=>{e?(t.L_.Xo(),await sh(t)):(await t.L_.stop(),t.C_.length>0&&(Oe("RemoteStore",`Stopping write stream with ${t.C_.length} pending writes`),t.C_=[]))})),t.L_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Qr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new Wp(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ie(pe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Kp(t,e){if(gi("AsyncQueue",`${e}: ${t}`),Al(t))return new Ie(pe.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Ve.comparator(n.key,r.key):(n,r)=>Ve.comparator(n.key,r.key),this.keyedMap=ka(),this.sortedSet=new Jt(this.comparator)}static emptySet(e){return new xo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof xo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new xo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D_{constructor(){this.k_=new Jt(Ve.comparator)}track(e){const n=e.doc.key,r=this.k_.get(n);r?e.type!==0&&r.type===3?this.k_=this.k_.insert(n,e):e.type===3&&r.type!==1?this.k_=this.k_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.k_=this.k_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.k_=this.k_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.k_=this.k_.remove(n):e.type===1&&r.type===2?this.k_=this.k_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.k_=this.k_.insert(n,{type:2,doc:e.doc}):Ke():this.k_=this.k_.insert(n,e)}q_(){const e=[];return this.k_.inorderTraversal((n,r)=>{e.push(r)}),e}}class zo{constructor(e,n,r,i,s,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new zo(e,n,xo.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Xc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(){this.Q_=void 0,this.listeners=[]}}class pR{constructor(){this.queries=new Jo(e=>s0(e),Xc),this.onlineState="Unknown",this.K_=new Set}}async function F0(t,e){const n=Xe(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new fR),i)try{s.Q_=await n.onListen(r)}catch(o){const a=Kp(o,`Initialization of query '${uo(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.listeners.push(e),e.U_(n.onlineState),s.Q_&&e.W_(s.Q_)&&Gp(n)}async function $0(t,e){const n=Xe(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=s.listeners.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function mR(t,e){const n=Xe(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.listeners)a.W_(i)&&(r=!0);o.Q_=i}}r&&Gp(n)}function gR(t,e,n){const r=Xe(t),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(e)}function Gp(t){t.K_.forEach(e=>{e.next()})}class B0{constructor(e,n,r){this.query=e,this.G_=n,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=r||{}}W_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new zo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.z_?this.H_(e)&&(this.G_.next(e),n=!0):this.J_(e,this.onlineState)&&(this.Y_(e),n=!0),this.j_=e,n}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let n=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),n=!0),n}J_(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.Z_||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}H_(e){if(e.docChanges.length>0)return!0;const n=this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Y_(e){e=zo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z0{constructor(e){this.key=e}}class j0{constructor(e){this.key=e}}class _R{constructor(e,n){this.query=e,this.oa=n,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=pt(),this.mutatedKeys=pt(),this.ua=o0(e),this.ca=new xo(this.ua)}get la(){return this.oa}ha(e,n){const r=n?n.Pa:new D_,i=n?n.ca:this.ca;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,m)=>{const w=i.get(d),g=Jc(this.query,m)?m:null,E=!!w&&this.mutatedKeys.has(w.key),b=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let A=!1;w&&g?w.data.isEqual(g.data)?E!==b&&(r.track({type:3,doc:g}),A=!0):this.Ia(w,g)||(r.track({type:2,doc:g}),A=!0,(l&&this.ua(g,l)>0||u&&this.ua(g,u)<0)&&(a=!0)):!w&&g?(r.track({type:0,doc:g}),A=!0):w&&!g&&(r.track({type:1,doc:w}),A=!0,(l||u)&&(a=!0)),A&&(g?(o=o.add(g),s=b?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{ca:o,Pa:r,es:a,mutatedKeys:s}}Ia(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const i=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;const s=e.Pa.q_();s.sort((u,d)=>function(w,g){const E=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ke()}};return E(w)-E(g)}(u.type,d.type)||this.ua(u.doc,d.doc)),this.da(r);const o=n?this.Ta():[],a=this.aa.size===0&&this.current?1:0,l=a!==this._a;return this._a=a,s.length!==0||l?{snapshot:new zo(this.query,e.ca,i,s,e.mutatedKeys,a===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ea:o}:{Ea:o}}U_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new D_,mutatedKeys:this.mutatedKeys,es:!1},!1)):{Ea:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}da(e){e&&(e.addedDocuments.forEach(n=>this.oa=this.oa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.oa=this.oa.delete(n)),this.current=e.current)}Ta(){if(!this.current)return[];const e=this.aa;this.aa=pt(),this.ca.forEach(r=>{this.Aa(r.key)&&(this.aa=this.aa.add(r.key))});const n=[];return e.forEach(r=>{this.aa.has(r)||n.push(new j0(r))}),this.aa.forEach(r=>{e.has(r)||n.push(new z0(r))}),n}Ra(e){this.oa=e.Ps,this.aa=pt();const n=this.ha(e.documents);return this.applyChanges(n,!0)}Va(){return zo.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,this._a===0,this.hasCachedResults)}}class wR{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class yR{constructor(e){this.key=e,this.ma=!1}}class vR{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.fa={},this.ga=new Jo(a=>s0(a),Xc),this.pa=new Map,this.ya=new Set,this.wa=new Jt(Ve.comparator),this.Sa=new Map,this.ba=new $p,this.Da={},this.Ca=new Map,this.va=Bo.Ln(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return this.Fa===!0}}async function bR(t,e){const n=PR(t);let r,i;const s=n.ga.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Va();else{const o=await qS(n.localStore,Yr(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=await kR(n,e,r,a==="current",o.resumeToken),n.isPrimaryClient&&D0(n.remoteStore,o)}return i}async function kR(t,e,n,r,i){t.Ma=(m,w,g)=>async function(b,A,T,x){let R=A.view.ha(T);R.es&&(R=await C_(b.localStore,A.query,!1).then(({documents:Q})=>A.view.ha(Q,R)));const O=x&&x.targetChanges.get(A.targetId),H=A.view.applyChanges(R,b.isPrimaryClient,O);return N_(b,A.targetId,H.Ea),H.snapshot}(t,m,w,g);const s=await C_(t.localStore,e,!0),o=new _R(e,s.Ps),a=o.ha(s.documents),l=Cl.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,l);N_(t,n,u.Ea);const d=new wR(e,n,o);return t.ga.set(e,d),t.pa.has(n)?t.pa.get(n).push(e):t.pa.set(n,[e]),u.snapshot}async function ER(t,e){const n=Xe(t),r=n.ga.get(e),i=n.pa.get(r.targetId);if(i.length>1)return n.pa.set(r.targetId,i.filter(s=>!Xc(s,e))),void n.ga.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await _f(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),O0(n.remoteStore,r.targetId),wf(n,r.targetId)}).catch(Il)):(wf(n,r.targetId),await _f(n.localStore,r.targetId,!0))}async function TR(t,e,n){const r=DR(t);try{const i=await function(o,a){const l=Xe(o),u=et.now(),d=a.reduce((g,E)=>g.add(E.key),pt());let m,w;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let E=_i(),b=pt();return l._s.getEntries(g,d).next(A=>{E=A,E.forEach((T,x)=>{x.isValidDocument()||(b=b.add(T))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,E)).next(A=>{m=A;const T=[];for(const x of a){const R=QC(x,m.get(x.key).overlayedDocument);R!=null&&T.push(new Ji(x.key,R,Zv(R.value.mapValue),pr.exists(!0)))}return l.mutationQueue.addMutationBatch(g,u,T,a)}).next(A=>{w=A;const T=A.applyToLocalDocumentSet(m,b);return l.documentOverlayCache.saveOverlays(g,A.batchId,T)})}).then(()=>({batchId:w.batchId,changes:l0(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let u=o.Da[o.currentUser.toKey()];u||(u=new Jt(Et)),u=u.insert(a,l),o.Da[o.currentUser.toKey()]=u}(r,i.batchId,n),await Rl(r,i.changes),await sh(r.remoteStore)}catch(i){const s=Kp(i,"Failed to persist write");n.reject(s)}}async function q0(t,e){const n=Xe(t);try{const r=await BS(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Sa.get(s);o&&($t(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.ma=!0:i.modifiedDocuments.size>0?$t(o.ma):i.removedDocuments.size>0&&($t(o.ma),o.ma=!1))}),await Rl(n,r,e)}catch(r){await Il(r)}}function O_(t,e,n){const r=Xe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.ga.forEach((s,o)=>{const a=o.view.U_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=Xe(o);l.onlineState=a;let u=!1;l.queries.forEach((d,m)=>{for(const w of m.listeners)w.U_(a)&&(u=!0)}),u&&Gp(l)}(r.eventManager,e),i.length&&r.fa.c_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function IR(t,e,n){const r=Xe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Sa.get(e),s=i&&i.key;if(s){let o=new Jt(Ve.comparator);o=o.insert(s,Nn.newNoDocument(s,Ze.min()));const a=pt().add(s),l=new nh(Ze.min(),new Map,new Jt(Et),o,a);await q0(r,l),r.wa=r.wa.remove(s),r.Sa.delete(e),Qp(r)}else await _f(r.localStore,e,!1).then(()=>wf(r,e,n)).catch(Il)}async function AR(t,e){const n=Xe(t),r=e.batch.batchId;try{const i=await $S(n.localStore,e);W0(n,r,null),H0(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Rl(n,i)}catch(i){await Il(i)}}async function xR(t,e,n){const r=Xe(t);try{const i=await function(o,a){const l=Xe(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return l.mutationQueue.lookupMutationBatch(u,a).next(m=>($t(m!==null),d=m.keys(),l.mutationQueue.removeMutationBatch(u,m))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>l.localDocuments.getDocuments(u,d))})}(r.localStore,e);W0(r,e,n),H0(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Rl(r,i)}catch(i){await Il(i)}}function H0(t,e){(t.Ca.get(e)||[]).forEach(n=>{n.resolve()}),t.Ca.delete(e)}function W0(t,e,n){const r=Xe(t);let i=r.Da[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Da[r.currentUser.toKey()]=i}}function wf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.pa.get(e))t.ga.delete(r),n&&t.fa.xa(r,n);t.pa.delete(e),t.isPrimaryClient&&t.ba.mr(e).forEach(r=>{t.ba.containsKey(r)||K0(t,r)})}function K0(t,e){t.ya.delete(e.path.canonicalString());const n=t.wa.get(e);n!==null&&(O0(t.remoteStore,n),t.wa=t.wa.remove(e),t.Sa.delete(n),Qp(t))}function N_(t,e,n){for(const r of n)r instanceof z0?(t.ba.addReference(r.key,e),CR(t,r)):r instanceof j0?(Oe("SyncEngine","Document no longer in limbo: "+r.key),t.ba.removeReference(r.key,e),t.ba.containsKey(r.key)||K0(t,r.key)):Ke()}function CR(t,e){const n=e.key,r=n.path.canonicalString();t.wa.get(n)||t.ya.has(r)||(Oe("SyncEngine","New document in limbo: "+n),t.ya.add(r),Qp(t))}function Qp(t){for(;t.ya.size>0&&t.wa.size<t.maxConcurrentLimboResolutions;){const e=t.ya.values().next().value;t.ya.delete(e);const n=new Ve(Ut.fromString(e)),r=t.va.next();t.Sa.set(r,new yR(n)),t.wa=t.wa.insert(n,r),D0(t.remoteStore,new Ui(Yr(Op(n.path)),r,"TargetPurposeLimboResolution",Cp.ae))}}async function Rl(t,e,n){const r=Xe(t),i=[],s=[],o=[];r.ga.isEmpty()||(r.ga.forEach((a,l)=>{o.push(r.Ma(l,e,n).then(u=>{if((u||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,u!=null&&u.fromCache?"not-current":"current"),u){i.push(u);const d=zp.$i(l.targetId,u);s.push(d)}}))}),await Promise.all(o),r.fa.c_(i),await async function(l,u){const d=Xe(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>be.forEach(u,w=>be.forEach(w.Qi,g=>d.persistence.referenceDelegate.addReference(m,w.targetId,g)).next(()=>be.forEach(w.Ki,g=>d.persistence.referenceDelegate.removeReference(m,w.targetId,g)))))}catch(m){if(!Al(m))throw m;Oe("LocalStore","Failed to update sequence numbers: "+m)}for(const m of u){const w=m.targetId;if(!m.fromCache){const g=d.rs.get(w),E=g.snapshotVersion,b=g.withLastLimboFreeSnapshotVersion(E);d.rs=d.rs.insert(w,b)}}}(r.localStore,s))}async function SR(t,e){const n=Xe(t);if(!n.currentUser.isEqual(e)){Oe("SyncEngine","User change. New user:",e.toKey());const r=await C0(n.localStore,e);n.currentUser=e,function(s,o){s.Ca.forEach(a=>{a.forEach(l=>{l.reject(new Ie(pe.CANCELLED,o))})}),s.Ca.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Rl(n,r.cs)}}function RR(t,e){const n=Xe(t),r=n.Sa.get(e);if(r&&r.ma)return pt().add(r.key);{let i=pt();const s=n.pa.get(e);if(!s)return i;for(const o of s){const a=n.ga.get(o);i=i.unionWith(a.view.la)}return i}}function PR(t){const e=Xe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=q0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=RR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=IR.bind(null,e),e.fa.c_=mR.bind(null,e.eventManager),e.fa.xa=gR.bind(null,e.eventManager),e}function DR(t){const e=Xe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=AR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=xR.bind(null,e),e}class M_{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=rh(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return FS(this.persistence,new VS,e.initialUser,this.serializer)}createPersistence(e){return new NS(Bp.Jr,this.serializer)}createSharedClientState(e){return new WS}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class OR{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>O_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=SR.bind(null,this.syncEngine),await dR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new pR}()}createDatastore(e){const n=rh(e.databaseInfo.databaseId),r=function(s){return new YS(s)}(e.databaseInfo);return function(s,o,a,l){return new JS(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new nR(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>O_(this.syncEngine,n,0),function(){return R_.C()?new R_:new KS}())}createSyncEngine(e,n){return function(i,s,o,a,l,u,d){const m=new vR(i,s,o,a,l,u);return d&&(m.Fa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(n){const r=Xe(n);Oe("RemoteStore","RemoteStore shutting down."),r.F_.add(5),await Sl(r),r.x_.shutdown(),r.O_.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G0{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):gi("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=On.UNAUTHENTICATED,this.clientId=Gv.V(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{Oe("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(Oe("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ie(pe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Qr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Kp(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function gd(t,e){t.asyncQueue.verifyOperationInProgress(),Oe("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await C0(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function L_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await LR(t);Oe("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(i=>P_(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>P_(e.remoteStore,s)),t._onlineComponents=e}function MR(t){return t.name==="FirebaseError"?t.code===pe.FAILED_PRECONDITION||t.code===pe.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function LR(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Oe("FirestoreClient","Using user provided OfflineComponentProvider");try{await gd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!MR(n))throw n;Lo("Error using user provided cache. Falling back to memory cache: "+n),await gd(t,new M_)}}else Oe("FirestoreClient","Using default OfflineComponentProvider"),await gd(t,new M_);return t._offlineComponents}async function Yp(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Oe("FirestoreClient","Using user provided OnlineComponentProvider"),await L_(t,t._uninitializedComponentsProvider._online)):(Oe("FirestoreClient","Using default OnlineComponentProvider"),await L_(t,new OR))),t._onlineComponents}function VR(t){return Yp(t).then(e=>e.syncEngine)}function UR(t){return Yp(t).then(e=>e.datastore)}async function Q0(t){const e=await Yp(t),n=e.eventManager;return n.onListen=bR.bind(null,e.syncEngine),n.onUnlisten=ER.bind(null,e.syncEngine),n}function FR(t,e,n={}){const r=new Qr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const d=new G0({next:w=>{o.enqueueAndForget(()=>$0(s,m));const g=w.docs.has(a);!g&&w.fromCache?u.reject(new Ie(pe.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&w.fromCache&&l&&l.source==="server"?u.reject(new Ie(pe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(w)},error:w=>u.reject(w)}),m=new B0(Op(a.path),d,{includeMetadataChanges:!0,Z_:!0});return F0(s,m)}(await Q0(t),t.asyncQueue,e,n,r)),r.promise}function $R(t,e,n={}){const r=new Qr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const d=new G0({next:w=>{o.enqueueAndForget(()=>$0(s,m)),w.fromCache&&l.source==="server"?u.reject(new Ie(pe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(w)},error:w=>u.reject(w)}),m=new B0(a,d,{includeMetadataChanges:!0,Z_:!0});return F0(s,m)}(await Q0(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y0(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z0(t,e,n){if(!n)throw new Ie(pe.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function BR(t,e,n,r){if(e===!0&&r===!0)throw new Ie(pe.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function U_(t){if(!Ve.isDocumentKey(t))throw new Ie(pe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function F_(t){if(Ve.isDocumentKey(t))throw new Ie(pe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function oh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ke()}function mr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ie(pe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=oh(t);throw new Ie(pe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function zR(t,e){if(e<=0)throw new Ie(pe.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Ie(pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Ie(pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}BR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Y0((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Ie(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Ie(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Ie(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ah{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $_({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ie(pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new Ie(pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $_(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new aC;switch(r.type){case"firstParty":return new hC(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ie(pe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=V_.get(n);r&&(Oe("ComponentProvider","Removing Datastore"),V_.delete(n),r.terminate())}(this),Promise.resolve()}}function jR(t,e,n,r={}){var i;const s=(t=mr(t,ah))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Lo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=On.MOCK_USER;else{a=wT(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new Ie(pe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new On(u)}t._authCredentials=new lC(new Kv(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new bi(this.firestore,e,this._query)}}class Gn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new qi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Gn(this.firestore,e,this._key)}}class qi extends bi{constructor(e,n,r){super(e,n,Op(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Gn(this.firestore,null,new Ve(e))}withConverter(e){return new qi(this.firestore,e,this._path)}}function Mt(t,e,...n){if(t=Xt(t),Z0("collection","path",e),t instanceof ah){const r=Ut.fromString(e,...n);return F_(r),new qi(t,null,r)}{if(!(t instanceof Gn||t instanceof qi))throw new Ie(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ut.fromString(e,...n));return F_(r),new qi(t.firestore,null,r)}}function _t(t,e,...n){if(t=Xt(t),arguments.length===1&&(e=Gv.V()),Z0("doc","path",e),t instanceof ah){const r=Ut.fromString(e,...n);return U_(r),new Gn(t,null,new Ve(r))}{if(!(t instanceof Gn||t instanceof qi))throw new Ie(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ut.fromString(e,...n));return U_(r),new Gn(t.firestore,t instanceof qi?t.converter:null,new Ve(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{constructor(){this.Za=Promise.resolve(),this.Xa=[],this.eu=!1,this.tu=[],this.nu=null,this.ru=!1,this.iu=!1,this.su=[],this.Ho=new R0(this,"async_queue_retry"),this.ou=()=>{const n=md();n&&Oe("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Ho.$o()};const e=md();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.ou)}get isShuttingDown(){return this.eu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this._u(),this.au(e)}enterRestrictedMode(e){if(!this.eu){this.eu=!0,this.iu=e||!1;const n=md();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.ou)}}enqueue(e){if(this._u(),this.eu)return new Promise(()=>{});const n=new Qr;return this.au(()=>this.eu&&this.iu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xa.push(e),this.uu()))}async uu(){if(this.Xa.length!==0){try{await this.Xa[0](),this.Xa.shift(),this.Ho.reset()}catch(e){if(!Al(e))throw e;Oe("AsyncQueue","Operation failed with retryable error: "+e)}this.Xa.length>0&&this.Ho.Qo(()=>this.uu())}}au(e){const n=this.Za.then(()=>(this.ru=!0,e().catch(r=>{this.nu=r,this.ru=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw gi("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.ru=!1,r))));return this.Za=n,n}enqueueAfterDelay(e,n,r){this._u(),this.su.indexOf(e)>-1&&(n=0);const i=Wp.createAndSchedule(this,e,n,r,s=>this.cu(s));return this.tu.push(i),i}_u(){this.nu&&Ke()}verifyOperationInProgress(){}async lu(){let e;do e=this.Za,await e;while(e!==this.Za)}hu(e){for(const n of this.tu)if(n.timerId===e)return!0;return!1}Pu(e){return this.lu().then(()=>{this.tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.lu()})}Iu(e){this.su.push(e)}cu(e){const n=this.tu.indexOf(e);this.tu.splice(n,1)}}class es extends ah{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new qR}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||X0(this),this._firestoreClient.terminate()}}function HR(t,e){const n=typeof t=="object"?t:ly(),r=typeof t=="string"?t:e||"(default)",i=Qf(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=gT("firestore");s&&jR(i,...s)}return i}function lh(t){return t._firestoreClient||X0(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function X0(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,u,d){return new EC(a,l,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,Y0(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new NR(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(e="count",n){this._aggregateType=e,this._internalFieldPath=n,this.type="AggregateField"}}class KR{constructor(e,n,r){this._userDataWriter=n,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new jo(jn.fromBase64String(e))}catch(n){throw new Ie(pe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new jo(jn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ie(pe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Vn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ie(pe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ie(pe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Et(this._lat,e._lat)||Et(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GR=/^__.*__$/;class QR{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ji(e,this.data,this.fieldMask,n,this.fieldTransforms):new xl(e,this.data,n,this.fieldTransforms)}}class J0{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ji(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function eb(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ke()}}class Jp{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.du(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Tu(){return this.settings.Tu}Eu(e){return new Jp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Au(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Eu({path:r,Ru:!1});return i.Vu(e),i}mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Eu({path:r,Ru:!1});return i.du(),i}fu(e){return this.Eu({path:void 0,Ru:!0})}gu(e){return mc(e,this.settings.methodName,this.settings.pu||!1,this.path,this.settings.yu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}du(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vu(this.path.get(e))}Vu(e){if(e.length===0)throw this.gu("Document fields must not be empty");if(eb(this.Tu)&&GR.test(e))throw this.gu('Document fields cannot begin and end with "__"')}}class YR{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||rh(e)}wu(e,n,r,i=!1){return new Jp({Tu:e,methodName:n,yu:r,path:Vn.emptyPath(),Ru:!1,pu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Pl(t){const e=t._freezeSettings(),n=rh(t._databaseId);return new YR(t._databaseId,!!e.ignoreUndefinedProperties,n)}function tb(t,e,n,r,i,s={}){const o=t.wu(s.merge||s.mergeFields?2:0,e,n,i);em("Data must be an object, but it was:",o,r);const a=rb(r,o);let l,u;if(s.merge)l=new or(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const d=[];for(const m of s.mergeFields){const w=yf(e,m,n);if(!o.contains(w))throw new Ie(pe.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);sb(d,w)||d.push(w)}l=new or(d),u=o.fieldTransforms.filter(m=>l.covers(m.field))}else l=null,u=o.fieldTransforms;return new QR(new nr(a),l,u)}class ch extends Zp{_toFieldTransform(e){if(e.Tu!==2)throw e.Tu===1?e.gu(`${this._methodName}() can only appear at the top level of your update data`):e.gu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ch}}function ZR(t,e,n,r){const i=t.wu(1,e,n);em("Data must be an object, but it was:",i,r);const s=[],o=nr.empty();zs(r,(l,u)=>{const d=tm(e,l,n);u=Xt(u);const m=i.mu(d);if(u instanceof ch)s.push(d);else{const w=Dl(u,m);w!=null&&(s.push(d),o.set(d,w))}});const a=new or(s);return new J0(o,a,i.fieldTransforms)}function XR(t,e,n,r,i,s){const o=t.wu(1,e,n),a=[yf(e,r,n)],l=[i];if(s.length%2!=0)throw new Ie(pe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<s.length;w+=2)a.push(yf(e,s[w])),l.push(s[w+1]);const u=[],d=nr.empty();for(let w=a.length-1;w>=0;--w)if(!sb(u,a[w])){const g=a[w];let E=l[w];E=Xt(E);const b=o.mu(g);if(E instanceof ch)u.push(g);else{const A=Dl(E,b);A!=null&&(u.push(g),d.set(g,A))}}const m=new or(u);return new J0(d,m,o.fieldTransforms)}function nb(t,e,n,r=!1){return Dl(n,t.wu(r?4:3,e))}function Dl(t,e){if(ib(t=Xt(t)))return em("Unsupported field value:",e,t),rb(t,e);if(t instanceof Zp)return function(r,i){if(!eb(i.Tu))throw i.gu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.gu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Ru&&e.Tu!==4)throw e.gu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=Dl(a,i.fu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Xt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return jC(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=et.fromDate(r);return{timestampValue:fc(i.serializer,s)}}if(r instanceof et){const s=new et(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:fc(i.serializer,s)}}if(r instanceof Xp)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof jo)return{bytesValue:b0(i.serializer,r._byteString)};if(r instanceof Gn){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.gu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Fp(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.gu(`Unsupported field value: ${oh(r)}`)}(t,e)}function rb(t,e){const n={};return Qv(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):zs(t,(r,i)=>{const s=Dl(i,e.Au(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function ib(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof et||t instanceof Xp||t instanceof jo||t instanceof Gn||t instanceof Zp)}function em(t,e,n){if(!ib(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=oh(n);throw r==="an object"?e.gu(t+" a custom object"):e.gu(t+" "+r)}}function yf(t,e,n){if((e=Xt(e))instanceof uh)return e._internalPath;if(typeof e=="string")return tm(t,e);throw mc("Field path arguments must be of type string or ",t,!1,void 0,n)}const JR=new RegExp("[~\\*/\\[\\]]");function tm(t,e,n){if(e.search(JR)>=0)throw mc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new uh(...e.split("."))._internalPath}catch{throw mc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function mc(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new Ie(pe.INVALID_ARGUMENT,a+t+l)}function sb(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Gn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new eP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(hh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class eP extends nm{data(){return super.data()}}function hh(t,e){return typeof e=="string"?tm(t,e):e instanceof uh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tP(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Ie(pe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class rm{}class dh extends rm{}function dr(t,e,...n){let r=[];e instanceof rm&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof im).length,a=s.filter(l=>l instanceof fh).length;if(o>1||o>0&&a>0)throw new Ie(pe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class fh extends dh{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new fh(e,n,r)}_apply(e){const n=this._parse(e);return ob(e._query,n),new bi(e.firestore,e.converter,df(e._query,n))}_parse(e){const n=Pl(e.firestore);return function(s,o,a,l,u,d,m){let w;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Ie(pe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){j_(m,d);const g=[];for(const E of m)g.push(z_(l,s,E));w={arrayValue:{values:g}}}else w=z_(l,s,m)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||j_(m,d),w=nb(a,o,m,d==="in"||d==="not-in");return gn.create(u,d,w)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function vn(t,e,n){const r=e,i=hh("where",t);return fh._create(i,r,n)}class im extends rm{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new im(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Cr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)ob(o,l),o=df(o,l)}(e._query,n),new bi(e.firestore,e.converter,df(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class sm extends dh{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new sm(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new Ie(pe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Ie(pe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const a=new Io(s,o);return function(u,d){if(Np(u)===null){const m=Zc(u);m!==null&&ab(u,m,d.field)}}(i,a),a}(e._query,this._field,this._direction);return new bi(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new js(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function ho(t,e="asc"){const n=e,r=hh("orderBy",t);return sm._create(r,n)}class om extends dh{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new om(e,n,r)}_apply(e){return new bi(e.firestore,e.converter,cc(e._query,this._limit,this._limitType))}}function fo(t){return zR("limit",t),om._create("limit",t,"F")}class am extends dh{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new am(e,n,r)}_apply(e){const n=nP(e,this.type,this._docOrFields,this._inclusive);return new bi(e.firestore,e.converter,function(i,s){return new js(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,n))}}function B_(...t){return am._create("startAfter",t,!1)}function nP(t,e,n,r){if(n[0]=Xt(n[0]),n[0]instanceof nm)return function(s,o,a,l,u){if(!l)throw new Ie(pe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const d=[];for(const m of Ao(s))if(m.field.isKeyField())d.push(uc(o,l.key));else{const w=l.data.field(m.field);if(Yc(w))throw new Ie(pe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+m.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(w===null){const g=m.field.canonicalString();throw new Ie(pe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${g}' (used as the orderBy) does not exist.`)}d.push(w)}return new $o(d,u)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=Pl(t.firestore);return function(o,a,l,u,d,m){const w=o.explicitOrderBy;if(d.length>w.length)throw new Ie(pe.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const g=[];for(let E=0;E<d.length;E++){const b=d[E];if(w[E].field.isKeyField()){if(typeof b!="string")throw new Ie(pe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof b}`);if(!Mp(o)&&b.indexOf("/")!==-1)throw new Ie(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${b}' contains a slash.`);const A=o.path.child(Ut.fromString(b));if(!Ve.isDocumentKey(A))throw new Ie(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${A}' is not because it contains an odd number of segments.`);const T=new Ve(A);g.push(uc(a,T))}else{const A=nb(l,u,b);g.push(A)}}return new $o(g,m)}(t._query,t.firestore._databaseId,i,e,n,r)}}function z_(t,e,n){if(typeof(n=Xt(n))=="string"){if(n==="")throw new Ie(pe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Mp(e)&&n.indexOf("/")!==-1)throw new Ie(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ut.fromString(n));if(!Ve.isDocumentKey(r))throw new Ie(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return uc(t,new Ve(r))}if(n instanceof Gn)return uc(t,n._key);throw new Ie(pe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${oh(n)}.`)}function j_(t,e){if(!Array.isArray(t)||t.length===0)throw new Ie(pe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ob(t,e){if(e.isInequality()){const r=Zc(t),i=e.field;if(r!==null&&!r.isEqual(i))throw new Ie(pe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const s=Np(t);s!==null&&ab(t,i,s)}const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Ie(pe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ie(pe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function ab(t,e,n){if(!n.isEqual(e))throw new Ie(pe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class rP{convertValue(e,n="none"){switch(Us(e)){case 0:return null;case 1:return e.booleanValue;case 2:return mn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Vs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw Ke()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return zs(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new Xp(mn(e.latitude),mn(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Sp(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(tl(e));default:return null}}convertTimestamp(e){const n=Ki(e);return new et(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ut.fromString(e);$t(x0(r));const i=new nl(r.get(1),r.get(3)),s=new Ve(r.popFirst(5));return i.isEqual(n)||gi(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lb(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}function iP(){return new WR("count")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ub extends nm{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Fu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(hh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Fu extends ub{data(e={}){return super.data(e)}}class sP{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ta(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Fu(this._firestore,this._userDataWriter,r.key,r,new Ta(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ie(pe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new Fu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ta(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new Fu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ta(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,d=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:oP(a.type),doc:l,oldIndex:u,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function oP(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ke()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fs(t){t=mr(t,Gn);const e=mr(t.firestore,es);return FR(lh(e),t._key).then(n=>lP(e,t,n))}class lm extends rP{constructor(e){super(),this.firestore=e}convertBytes(e){return new jo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Gn(this.firestore,null,n)}}function zr(t){t=mr(t,bi);const e=mr(t.firestore,es),n=lh(e),r=new lm(e);return tP(t._query),$R(n,t._query).then(i=>new sP(e,r,t,i))}function aP(t,e,n){t=mr(t,Gn);const r=mr(t.firestore,es),i=lb(t.converter,e,n);return ph(r,[tb(Pl(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,pr.none())])}function Zt(t,e,n,...r){t=mr(t,Gn);const i=mr(t.firestore,es),s=Pl(i);let o;return o=typeof(e=Xt(e))=="string"||e instanceof uh?XR(s,"updateDoc",t._key,e,n,r):ZR(s,"updateDoc",t._key,e),ph(i,[o.toMutation(t._key,pr.exists(!0))])}function um(t){return ph(mr(t.firestore,es),[new Lp(t._key,pr.none())])}function Xr(t,e){const n=mr(t.firestore,es),r=_t(t),i=lb(t.converter,e);return ph(n,[tb(Pl(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,pr.exists(!1))]).then(()=>r)}function ph(t,e){return function(r,i){const s=new Qr;return r.asyncQueue.enqueueAndForget(async()=>TR(await VR(r),i,s)),s.promise}(lh(t),e)}function lP(t,e,n){const r=n.docs.get(e._key),i=new lm(t);return new ub(t,i,e._key,r,new Ta(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xs(t){return uP(t,{count:iP()})}function uP(t,e){const n=mr(t.firestore,es),r=lh(n),i=function(o,a){const l=[];for(const u in o)Object.prototype.hasOwnProperty.call(o,u)&&l.push(a(o[u],u,o));return l}(e,(s,o)=>new JC(o,s._aggregateType,s._internalFieldPath));return function(o,a,l){const u=new Qr;return o.asyncQueue.enqueueAndForget(async()=>{try{const d=await UR(o);u.resolve(eR(d,a,l))}catch(d){u.reject(d)}}),u.promise}(r,t._query,i).then(s=>function(a,l,u){const d=new lm(a);return new KR(l,d,u)}(n,t,s))}(function(e,n=!0){(function(i){Xo=i})(Go),Oo(new Ps("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new es(new uC(r.getProvider("auth-internal")),new fC(r.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Ie(pe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new nl(u.options.projectId,d)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),ji(l_,"4.2.0",e),ji(l_,"4.2.0","esm2017")})();const cP={class:"fixed bottom-0 left-0 right-0 top-0 z-50 bg-gray-600 bg-opacity-50"},hP={class:"fixed left-1/2 top-0 max-h-screen w-[100vw] -translate-x-1/2 overflow-auto rounded-md bg-gradient-to-br from-orange-600 to-green-400 px-3 py-10 text-center text-xl shadow-lg shadow-black"},dP=N("p",{class:"text-3xl"},"GUIDE",-1),fP={class:"text-sm"},pP=Qw('<div class="mt-5"><p class="mb-1 text-2xl">Adding Decks and Cards</p><p> Pressing the &#39;New Deck&#39; button initiates the deck creation menu, where you can specify three parameters: the deck name, the &#39;new cards per day&#39;, and whether the deck utilizes large cards.Opting for &#39;Large Cards&#39; allows for the inclusion of multiline text, HTML components, and Markdown formatting. To use Markdown, simply initiate the field with either &#39;[markdown]&#39; or &#39;[md]&#39; on the first line, with no additional text. For incorporating images, videos, or audio, utilize the &lt;img&gt;, &lt;video&gt;, and &lt;audio&gt; elements in the format &lt;ELEMENT src=&quot;URL HERE&quot; controls&gt;&lt;/ELEMENT&gt;. Note that the &#39;controls&#39; part is not used for images. When adding regular cards, accelerate the process by pressing &#39;Enter&#39; in the back field to add the card. Selecting for &#39;Create Reversed&#39; generates a mirrored card with swapped front and back values. Selecting &#39;Type Answer&#39; mandates inputting the back value during reviews. If &#39;Type Answer&#39; is chosen, any content within square brackets &#39;[]&#39; is ignored and doesn&#39;t need to be imputed (avoid using this with HTML or Markdown). </p></div><div class="mt-5"><p class="text-2xl">Reviews</p><p> Pressing the &#39;Review&#39; button will start the review. The number of reviews available for the day is shown above the &#39;Review&#39; button. During the review process, attempt to recall the answer on the other side of the card. Click the card or press the &#39;space bar&#39; to reveal the answer. If your answer is correct, click the &#39;correct&#39; button (blue) or press the &#39;space bar&#39;. If your answer is incorrect, click the &#39;wrong&#39; button (red) or press the &#39;c&#39; key. For &#39;type answer&#39; cards, input your response and press &#39;enter&#39; or click the &#39;Check&#39; button to reveal the correct answer. To continue, click the card or press either &#39;enter&#39; or &#39;space bar&#39;. Repeat this process until you&#39;ve reviewed all cards and the panel closes. Remember to return the next day for more reviews. Consistently answering correctly will reduce the frequency of seeing a card, while getting a wrong answer will reset its streak. </p></div><div class="mt-5"><p class="text-2xl">Settings</p><p> To access the settings, simply tap on your username. Card review dates are determined by the formula: &#39;today + ((time_multiplier^success_streak) * time_duration)&#39;. Customize your experience by adjusting the time_multiplier in the settings. Note that modifying the time_duration is currently not supported. Additionally, you can modify your username, update your email, or change your password. The default settings are 1.5 for the time_multiplier and 24 hours for the time_duration. </p></div><div class="mt-5"><p class="text-2xl">Editing and Deleting Cards and Decks</p><p> When you double-click on a deck, a variety of options become accessible, empowering you to make changes to both the overall deck and its individual cards. Additionally, card details such as card streaks and next review dates are easily visible. Furthermore, you can fine-tune settings such as the new cards per day and the use of large cards. </p></div><div class="mt-5"><p class="text-2xl">Searching Cards</p><p> When searching, your query will be matched from the beginning of the card&#39;s field. The search is case-sensitive. Additionally, you can utilize the following options: </p><ul class="ml-5 list-disc"><li> Use &#39;f&#39; or &#39;field&#39; to specify the field to search [f:f, f:front, f:b, f:back]. </li></ul></div><div class="mt-5"><p class="text-2xl">Notes</p><p> This app stores your data in Google&#39;s Firebase. All decks, cards and settings are synced between devices. The app works on both desktop and mobile. </p></div>',6),mP={__name:"Guide",props:["appVersion"],emits:["close","showChangelog"],setup(t,{emit:e}){return(n,r)=>(Ce(),Me("div",cP,[N("div",hP,[N("button",{onClick:r[0]||(r[0]=i=>n.$emit("close")),class:"mb-5 rounded-md bg-gray-500 p-2 shadow shadow-black"}," Close "),dP,N("p",fP,"App version: "+At(t.appVersion),1),N("button",{onClick:r[1]||(r[1]=i=>n.$emit("showChangelog")),class:"rounded-md bg-green-800 p-2"}," Changelog "),pP])]))}},cm=""+new URL("cancel-58c7ea43.svg",import.meta.url).href;var hr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function hm(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function gP(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var cb={exports:{}};/*!
* sweetalert2 v11.10.6
* Released under the MIT License.
*/(function(t,e){(function(n,r){t.exports=r()})(hr,function(){function n(k,h,p){return h=g(h),A(k,i()?Reflect.construct(h,p||[],g(k).constructor):h.apply(k,p))}function r(k,h,p){if(i())return Reflect.construct.apply(null,arguments);var v=[null];v.push.apply(v,h);var U=new(k.bind.apply(k,v));return p&&E(U,p.prototype),U}function i(){try{var k=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(i=function(){return!!k})()}function s(k,h){var p=k==null?null:typeof Symbol<"u"&&k[Symbol.iterator]||k["@@iterator"];if(p!=null){var v,U,fe,Se,lt=[],ht=!0,on=!1;try{if(fe=(p=p.call(k)).next,h===0){if(Object(p)!==p)return;ht=!1}else for(;!(ht=(v=fe.call(p)).done)&&(lt.push(v.value),lt.length!==h);ht=!0);}catch(aa){on=!0,U=aa}finally{try{if(!ht&&p.return!=null&&(Se=p.return(),Object(Se)!==Se))return}finally{if(on)throw U}}return lt}}function o(k,h){if(typeof k!="object"||!k)return k;var p=k[Symbol.toPrimitive];if(p!==void 0){var v=p.call(k,h||"default");if(typeof v!="object")return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return(h==="string"?String:Number)(k)}function a(k){var h=o(k,"string");return typeof h=="symbol"?h:String(h)}function l(k){"@babel/helpers - typeof";return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},l(k)}function u(k,h){if(!(k instanceof h))throw new TypeError("Cannot call a class as a function")}function d(k,h){for(var p=0;p<h.length;p++){var v=h[p];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(k,a(v.key),v)}}function m(k,h,p){return h&&d(k.prototype,h),p&&d(k,p),Object.defineProperty(k,"prototype",{writable:!1}),k}function w(k,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function");k.prototype=Object.create(h&&h.prototype,{constructor:{value:k,writable:!0,configurable:!0}}),Object.defineProperty(k,"prototype",{writable:!1}),h&&E(k,h)}function g(k){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(p){return p.__proto__||Object.getPrototypeOf(p)},g(k)}function E(k,h){return E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(v,U){return v.__proto__=U,v},E(k,h)}function b(k){if(k===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k}function A(k,h){if(h&&(typeof h=="object"||typeof h=="function"))return h;if(h!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return b(k)}function T(k,h){for(;!Object.prototype.hasOwnProperty.call(k,h)&&(k=g(k),k!==null););return k}function x(){return typeof Reflect<"u"&&Reflect.get?x=Reflect.get.bind():x=function(h,p,v){var U=T(h,p);if(U){var fe=Object.getOwnPropertyDescriptor(U,p);return fe.get?fe.get.call(arguments.length<3?h:v):fe.value}},x.apply(this,arguments)}function R(k,h){return Q(k)||s(k,h)||Z(k,h)||me()}function O(k){return H(k)||z(k)||Z(k)||oe()}function H(k){if(Array.isArray(k))return ee(k)}function Q(k){if(Array.isArray(k))return k}function z(k){if(typeof Symbol<"u"&&k[Symbol.iterator]!=null||k["@@iterator"]!=null)return Array.from(k)}function Z(k,h){if(k){if(typeof k=="string")return ee(k,h);var p=Object.prototype.toString.call(k).slice(8,-1);if(p==="Object"&&k.constructor&&(p=k.constructor.name),p==="Map"||p==="Set")return Array.from(k);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return ee(k,h)}}function ee(k,h){(h==null||h>k.length)&&(h=k.length);for(var p=0,v=new Array(h);p<h;p++)v[p]=k[p];return v}function oe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function me(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $(k,h){var p=I(k,h,"get");return re(k,p)}function X(k,h,p){var v=I(k,h,"set");return ae(k,v,p),p}function I(k,h,p){if(!h.has(k))throw new TypeError("attempted to "+p+" private field on non-instance");return h.get(k)}function re(k,h){return h.get?h.get.call(k):h.value}function ae(k,h,p){if(h.set)h.set.call(k,p);else{if(!h.writable)throw new TypeError("attempted to set read only private field");h.value=p}}function K(k,h){if(h.has(k))throw new TypeError("Cannot initialize the same private elements twice on an object")}function he(k,h,p){K(k,h),h.set(k,p)}var ne=100,ce={},te=function(){ce.previousActiveElement instanceof HTMLElement?(ce.previousActiveElement.focus(),ce.previousActiveElement=null):document.body&&document.body.focus()},J=function(h){return new Promise(function(p){if(!h)return p();var v=window.scrollX,U=window.scrollY;ce.restoreFocusTimeout=setTimeout(function(){te(),p()},ne),window.scrollTo(v,U)})},ke="swal2-",ve=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"],q=ve.reduce(function(k,h){return k[h]=ke+h,k},{}),tt=["success","warning","info","question","error"],ut=tt.reduce(function(k,h){return k[h]=ke+h,k},{}),qe="SweetAlert2:",ze=function(h){return h.charAt(0).toUpperCase()+h.slice(1)},He=function(h){console.warn("".concat(qe," ").concat(l(h)==="object"?h.join(" "):h))},Qe=function(h){console.error("".concat(qe," ").concat(h))},F=[],V=function(h){F.includes(h)||(F.push(h),He(h))},_=function(h,p){V('"'.concat(h,'" is deprecated and will be removed in the next major release. Please use "').concat(p,'" instead.'))},B=function(h){return typeof h=="function"?h():h},M=function(h){return h&&typeof h.toPromise=="function"},S=function(h){return M(h)?h.toPromise():Promise.resolve(h)},C=function(h){return h&&Promise.resolve(h)===h},D=function(){return document.body.querySelector(".".concat(q.container))},G=function(h){var p=D();return p?p.querySelector(h):null},W=function(h){return G(".".concat(h))},L=function(){return W(q.popup)},se=function(){return W(q.icon)},de=function(){return W(q["icon-content"])},ue=function(){return W(q.title)},ye=function(){return W(q["html-container"])},Pe=function(){return W(q.image)},xe=function(){return W(q["progress-steps"])},Fe=function(){return W(q["validation-message"])},rt=function(){return G(".".concat(q.actions," .").concat(q.confirm))},ct=function(){return G(".".concat(q.actions," .").concat(q.cancel))},Lt=function(){return G(".".concat(q.actions," .").concat(q.deny))},ft=function(){return W(q["input-label"])},dn=function(){return G(".".concat(q.loader))},Ot=function(){return W(q.actions)},kt=function(){return W(q.footer)},qn=function(){return W(q["timer-progress-bar"])},We=function(){return W(q.close)},Bt=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,Pn=function(){var h=L();if(!h)return[];var p=h.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),v=Array.from(p).sort(function(Se,lt){var ht=parseInt(Se.getAttribute("tabindex")||"0"),on=parseInt(lt.getAttribute("tabindex")||"0");return ht>on?1:ht<on?-1:0}),U=h.querySelectorAll(Bt),fe=Array.from(U).filter(function(Se){return Se.getAttribute("tabindex")!=="-1"});return O(new Set(v.concat(fe))).filter(function(Se){return bt(Se)})},gr=function(){return Hn(document.body,q.shown)&&!Hn(document.body,q["toast-shown"])&&!Hn(document.body,q["no-backdrop"])},wn=function(){var h=L();return h?Hn(h,q.toast):!1},ur=function(){var h=L();return h?h.hasAttribute("data-loading"):!1},zt=function(h,p){if(h.textContent="",p){var v=new DOMParser,U=v.parseFromString(p,"text/html"),fe=U.querySelector("head");fe&&Array.from(fe.childNodes).forEach(function(lt){h.appendChild(lt)});var Se=U.querySelector("body");Se&&Array.from(Se.childNodes).forEach(function(lt){lt instanceof HTMLVideoElement||lt instanceof HTMLAudioElement?h.appendChild(lt.cloneNode(!0)):h.appendChild(lt)})}},Hn=function(h,p){if(!p)return!1;for(var v=p.split(/\s+/),U=0;U<v.length;U++)if(!h.classList.contains(v[U]))return!1;return!0},Te=function(h,p){Array.from(h.classList).forEach(function(v){!Object.values(q).includes(v)&&!Object.values(ut).includes(v)&&!Object.values(p.showClass||{}).includes(v)&&h.classList.remove(v)})},yn=function(h,p,v){if(Te(h,p),p.customClass&&p.customClass[v]){if(typeof p.customClass[v]!="string"&&!p.customClass[v].forEach){He("Invalid type of customClass.".concat(v,'! Expected string or iterable object, got "').concat(l(p.customClass[v]),'"'));return}it(h,p.customClass[v])}},en=function(h,p){if(!p)return null;switch(p){case"select":case"textarea":case"file":return h.querySelector(".".concat(q.popup," > .").concat(q[p]));case"checkbox":return h.querySelector(".".concat(q.popup," > .").concat(q.checkbox," input"));case"radio":return h.querySelector(".".concat(q.popup," > .").concat(q.radio," input:checked"))||h.querySelector(".".concat(q.popup," > .").concat(q.radio," input:first-child"));case"range":return h.querySelector(".".concat(q.popup," > .").concat(q.range," input"));default:return h.querySelector(".".concat(q.popup," > .").concat(q.input))}},Rr=function(h){if(h.focus(),h.type!=="file"){var p=h.value;h.value="",h.value=p}},Yn=function(h,p,v){!h||!p||(typeof p=="string"&&(p=p.split(/\s+/).filter(Boolean)),p.forEach(function(U){Array.isArray(h)?h.forEach(function(fe){v?fe.classList.add(U):fe.classList.remove(U)}):v?h.classList.add(U):h.classList.remove(U)}))},it=function(h,p){Yn(h,p,!0)},un=function(h,p){Yn(h,p,!1)},Zn=function(h,p){for(var v=Array.from(h.children),U=0;U<v.length;U++){var fe=v[U];if(fe instanceof HTMLElement&&Hn(fe,p))return fe}},tn=function(h,p,v){v==="".concat(parseInt(v))&&(v=parseInt(v)),v||parseInt(v)===0?h.style.setProperty(p,typeof v=="number"?"".concat(v,"px"):v):h.style.removeProperty(p)},Qt=function(h){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"flex";h&&(h.style.display=p)},yt=function(h){h&&(h.style.display="none")},ti=function(h){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"block";h&&new MutationObserver(function(){Pr(h,h.innerHTML,p)}).observe(h,{childList:!0,subtree:!0})},ki=function(h,p,v,U){var fe=h.querySelector(p);fe&&fe.style.setProperty(v,U)},Pr=function(h,p){var v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"flex";p?Qt(h,v):yt(h)},bt=function(h){return!!(h&&(h.offsetWidth||h.offsetHeight||h.getClientRects().length))},Ws=function(){return!bt(rt())&&!bt(Lt())&&!bt(ct())},Ne=function(h){return h.scrollHeight>h.clientHeight},Y=function(h){var p=window.getComputedStyle(h),v=parseFloat(p.getPropertyValue("animation-duration")||"0"),U=parseFloat(p.getPropertyValue("transition-duration")||"0");return v>0||U>0},Ee=function(h){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,v=qn();v&&bt(v)&&(p&&(v.style.transition="none",v.style.width="100%"),setTimeout(function(){v.style.transition="width ".concat(h/1e3,"s linear"),v.style.width="0%"},10))},Re=function(){var h=qn();if(h){var p=parseInt(window.getComputedStyle(h).width);h.style.removeProperty("transition"),h.style.width="100%";var v=parseInt(window.getComputedStyle(h).width),U=p/v*100;h.style.width="".concat(U,"%")}},st=function(){return typeof window>"u"||typeof document>"u"},Yt=`
 <div aria-labelledby="`.concat(q.title,'" aria-describedby="').concat(q["html-container"],'" class="').concat(q.popup,`" tabindex="-1">
   <button type="button" class="`).concat(q.close,`"></button>
   <ul class="`).concat(q["progress-steps"],`"></ul>
   <div class="`).concat(q.icon,`"></div>
   <img class="`).concat(q.image,`" />
   <h2 class="`).concat(q.title,'" id="').concat(q.title,`"></h2>
   <div class="`).concat(q["html-container"],'" id="').concat(q["html-container"],`"></div>
   <input class="`).concat(q.input,'" id="').concat(q.input,`" />
   <input type="file" class="`).concat(q.file,`" />
   <div class="`).concat(q.range,`">
     <input type="range" />
     <output></output>
   </div>
   <select class="`).concat(q.select,'" id="').concat(q.select,`"></select>
   <div class="`).concat(q.radio,`"></div>
   <label class="`).concat(q.checkbox,`">
     <input type="checkbox" id="`).concat(q.checkbox,`" />
     <span class="`).concat(q.label,`"></span>
   </label>
   <textarea class="`).concat(q.textarea,'" id="').concat(q.textarea,`"></textarea>
   <div class="`).concat(q["validation-message"],'" id="').concat(q["validation-message"],`"></div>
   <div class="`).concat(q.actions,`">
     <div class="`).concat(q.loader,`"></div>
     <button type="button" class="`).concat(q.confirm,`"></button>
     <button type="button" class="`).concat(q.deny,`"></button>
     <button type="button" class="`).concat(q.cancel,`"></button>
   </div>
   <div class="`).concat(q.footer,`"></div>
   <div class="`).concat(q["timer-progress-bar-container"],`">
     <div class="`).concat(q["timer-progress-bar"],`"></div>
   </div>
 </div>
`).replace(/(^|\n)\s*/g,""),nn=function(){var h=D();return h?(h.remove(),un([document.documentElement,document.body],[q["no-backdrop"],q["toast-shown"],q["has-column"]]),!0):!1},jt=function(){ce.currentInstance.resetValidationMessage()},cr=function(){var h=L(),p=Zn(h,q.input),v=Zn(h,q.file),U=h.querySelector(".".concat(q.range," input")),fe=h.querySelector(".".concat(q.range," output")),Se=Zn(h,q.select),lt=h.querySelector(".".concat(q.checkbox," input")),ht=Zn(h,q.textarea);p.oninput=jt,v.onchange=jt,Se.onchange=jt,lt.onchange=jt,ht.oninput=jt,U.oninput=function(){jt(),fe.value=U.value},U.onchange=function(){jt(),fe.value=U.value}},Dr=function(h){return typeof h=="string"?document.querySelector(h):h},rn=function(h){var p=L();p.setAttribute("role",h.toast?"alert":"dialog"),p.setAttribute("aria-live",h.toast?"polite":"assertive"),h.toast||p.setAttribute("aria-modal","true")},ts=function(h){window.getComputedStyle(h).direction==="rtl"&&it(D(),q.rtl)},ni=function(h){var p=nn();if(st()){Qe("SweetAlert2 requires document to initialize");return}var v=document.createElement("div");v.className=q.container,p&&it(v,q["no-transition"]),zt(v,Yt);var U=Dr(h.target);U.appendChild(v),rn(h),ts(U),cr()},Ks=function(h,p){h instanceof HTMLElement?p.appendChild(h):l(h)==="object"?Ei(h,p):h&&zt(p,h)},Ei=function(h,p){h.jquery?ta(p,h):zt(p,h.toString())},ta=function(h,p){if(h.textContent="",0 in p)for(var v=0;v in p;v++)h.appendChild(p[v].cloneNode(!0));else h.appendChild(p.cloneNode(!0))},Or=function(){if(st())return!1;var k=document.createElement("div");return typeof k.style.webkitAnimation<"u"?"webkitAnimationEnd":typeof k.style.animation<"u"?"animationend":!1}(),Ll=function(h,p){var v=Ot(),U=dn();!v||!U||(!p.showConfirmButton&&!p.showDenyButton&&!p.showCancelButton?yt(v):Qt(v),yn(v,p,"actions"),Vl(v,U,p),zt(U,p.loaderHtml||""),yn(U,p,"loader"))};function Vl(k,h,p){var v=rt(),U=Lt(),fe=ct();!v||!U||!fe||(Gs(v,"confirm",p),Gs(U,"deny",p),Gs(fe,"cancel",p),gh(v,U,fe,p),p.reverseButtons&&(p.toast?(k.insertBefore(fe,v),k.insertBefore(U,v)):(k.insertBefore(fe,h),k.insertBefore(U,h),k.insertBefore(v,h))))}function gh(k,h,p,v){if(!v.buttonsStyling){un([k,h,p],q.styled);return}it([k,h,p],q.styled),v.confirmButtonColor&&(k.style.backgroundColor=v.confirmButtonColor,it(k,q["default-outline"])),v.denyButtonColor&&(h.style.backgroundColor=v.denyButtonColor,it(h,q["default-outline"])),v.cancelButtonColor&&(p.style.backgroundColor=v.cancelButtonColor,it(p,q["default-outline"]))}function Gs(k,h,p){var v=ze(h);Pr(k,p["show".concat(v,"Button")],"inline-block"),zt(k,p["".concat(h,"ButtonText")]||""),k.setAttribute("aria-label",p["".concat(h,"ButtonAriaLabel")]||""),k.className=q[h],yn(k,p,"".concat(h,"Button"))}var Ul=function(h,p){var v=We();v&&(zt(v,p.closeButtonHtml||""),yn(v,p,"closeButton"),Pr(v,p.showCloseButton),v.setAttribute("aria-label",p.closeButtonAriaLabel||""))},ns=function(h,p){var v=D();v&&(Fl(v,p.backdrop),Nt(v,p.position),rs(v,p.grow),yn(v,p,"container"))};function Fl(k,h){typeof h=="string"?k.style.background=h:h||it([document.documentElement,document.body],q["no-backdrop"])}function Nt(k,h){h&&(h in q?it(k,q[h]):(He('The "position" parameter is not valid, defaulting to "center"'),it(k,q.center)))}function rs(k,h){h&&it(k,q["grow-".concat(h)])}var It={innerParams:new WeakMap,domCache:new WeakMap},ri=["input","file","range","select","radio","checkbox","textarea"],Qs=function(h,p){var v=L();if(v){var U=It.innerParams.get(h),fe=!U||p.input!==U.input;ri.forEach(function(Se){var lt=Zn(v,q[Se]);lt&&(is(Se,p.inputAttributes),lt.className=q[Se],fe&&yt(lt))}),p.input&&(fe&&Ys(p),_h(p))}},Ys=function(h){if(h.input){if(!qt[h.input]){Qe("Unexpected type of input! Expected ".concat(Object.keys(qt).join(" | "),', got "').concat(h.input,'"'));return}var p=Xs(h.input),v=qt[h.input](p,h);Qt(p),h.inputAutoFocus&&setTimeout(function(){Rr(v)})}},Zs=function(h){for(var p=0;p<h.attributes.length;p++){var v=h.attributes[p].name;["id","type","value","style"].includes(v)||h.removeAttribute(v)}},is=function(h,p){var v=en(L(),h);if(v){Zs(v);for(var U in p)v.setAttribute(U,p[U])}},_h=function(h){var p=Xs(h.input);l(h.customClass)==="object"&&it(p,h.customClass.input)},na=function(h,p){(!h.placeholder||p.inputPlaceholder)&&(h.placeholder=p.inputPlaceholder)},Ti=function(h,p,v){if(v.inputLabel){var U=document.createElement("label"),fe=q["input-label"];U.setAttribute("for",h.id),U.className=fe,l(v.customClass)==="object"&&it(U,v.customClass.inputLabel),U.innerText=v.inputLabel,p.insertAdjacentElement("beforebegin",U)}},Xs=function(h){return Zn(L(),q[h]||q.input)},ss=function(h,p){["string","number"].includes(l(p))?h.value="".concat(p):C(p)||He('Unexpected type of inputValue! Expected "string", "number" or "Promise", got "'.concat(l(p),'"'))},qt={};qt.text=qt.email=qt.password=qt.number=qt.tel=qt.url=qt.search=qt.date=qt["datetime-local"]=qt.time=qt.week=qt.month=function(k,h){return ss(k,h.inputValue),Ti(k,k,h),na(k,h),k.type=h.input,k},qt.file=function(k,h){return Ti(k,k,h),na(k,h),k},qt.range=function(k,h){var p=k.querySelector("input"),v=k.querySelector("output");return ss(p,h.inputValue),p.type=h.input,ss(v,h.inputValue),Ti(p,k,h),k},qt.select=function(k,h){if(k.textContent="",h.inputPlaceholder){var p=document.createElement("option");zt(p,h.inputPlaceholder),p.value="",p.disabled=!0,p.selected=!0,k.appendChild(p)}return Ti(k,k,h),k},qt.radio=function(k){return k.textContent="",k},qt.checkbox=function(k,h){var p=en(L(),"checkbox");p.value="1",p.checked=!!h.inputValue;var v=k.querySelector("span");return zt(v,h.inputPlaceholder),p},qt.textarea=function(k,h){ss(k,h.inputValue),na(k,h),Ti(k,k,h);var p=function(U){return parseInt(window.getComputedStyle(U).marginLeft)+parseInt(window.getComputedStyle(U).marginRight)};return setTimeout(function(){if("MutationObserver"in window){var v=parseInt(window.getComputedStyle(L()).width),U=function(){if(document.body.contains(k)){var Se=k.offsetWidth+p(k);Se>v?L().style.width="".concat(Se,"px"):tn(L(),"width",h.width)}};new MutationObserver(U).observe(k,{attributes:!0,attributeFilter:["style"]})}}),k};var ra=function(h,p){var v=ye();v&&(ti(v),yn(v,p,"htmlContainer"),p.html?(Ks(p.html,v),Qt(v,"block")):p.text?(v.textContent=p.text,Qt(v,"block")):yt(v),Qs(h,p))},wh=function(h,p){var v=kt();v&&(ti(v),Pr(v,p.footer,"block"),p.footer&&Ks(p.footer,v),yn(v,p,"footer"))},Js=function(h,p){var v=It.innerParams.get(h),U=se();if(U){if(v&&p.icon===v.icon){si(U,p),os(U,p);return}if(!p.icon&&!p.iconHtml){yt(U);return}if(p.icon&&Object.keys(ut).indexOf(p.icon)===-1){Qe('Unknown icon! Expected "success", "error", "warning", "info" or "question", got "'.concat(p.icon,'"')),yt(U);return}Qt(U),si(U,p),os(U,p),it(U,p.showClass&&p.showClass.icon)}},os=function(h,p){for(var v=0,U=Object.entries(ut);v<U.length;v++){var fe=R(U[v],2),Se=fe[0],lt=fe[1];p.icon!==Se&&un(h,lt)}it(h,p.icon&&ut[p.icon]),eo(h,p),ii(),yn(h,p,"icon")},ii=function(){var h=L();if(h)for(var p=window.getComputedStyle(h).getPropertyValue("background-color"),v=h.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix"),U=0;U<v.length;U++)v[U].style.backgroundColor=p},ia=`
  <div class="swal2-success-circular-line-left"></div>
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>
  <div class="swal2-success-circular-line-right"></div>
`,_r=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,si=function(h,p){if(!(!p.icon&&!p.iconHtml)){var v=h.innerHTML,U="";if(p.iconHtml)U=sa(p.iconHtml);else if(p.icon==="success")U=ia,v=v.replace(/ style=".*?"/g,"");else if(p.icon==="error")U=_r;else if(p.icon){var fe={question:"?",warning:"!",info:"i"};U=sa(fe[p.icon])}v.trim()!==U.trim()&&zt(h,U)}},eo=function(h,p){if(p.iconColor){h.style.color=p.iconColor,h.style.borderColor=p.iconColor;for(var v=0,U=[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"];v<U.length;v++){var fe=U[v];ki(h,fe,"background-color",p.iconColor)}ki(h,".swal2-success-ring","border-color",p.iconColor)}},sa=function(h){return'<div class="'.concat(q["icon-content"],'">').concat(h,"</div>")},yh=function(h,p){var v=Pe();if(v){if(!p.imageUrl){yt(v);return}Qt(v,""),v.setAttribute("src",p.imageUrl),v.setAttribute("alt",p.imageAlt||""),tn(v,"width",p.imageWidth),tn(v,"height",p.imageHeight),v.className=q.image,yn(v,p,"image")}},Le=function(h,p){var v=D(),U=L();if(!(!v||!U)){if(p.toast){tn(v,"width",p.width),U.style.width="100%";var fe=dn();fe&&U.insertBefore(fe,se())}else tn(U,"width",p.width);tn(U,"padding",p.padding),p.color&&(U.style.color=p.color),p.background&&(U.style.background=p.background),yt(Fe()),$l(U,p)}},$l=function(h,p){var v=p.showClass||{};h.className="".concat(q.popup," ").concat(bt(h)?v.popup:""),p.toast?(it([document.documentElement,document.body],q["toast-shown"]),it(h,q.toast)):it(h,q.modal),yn(h,p,"popup"),typeof p.customClass=="string"&&it(h,p.customClass),p.icon&&it(h,q["icon-".concat(p.icon)])},to=function(h,p){var v=xe();if(v){var U=p.progressSteps,fe=p.currentProgressStep;if(!U||U.length===0||fe===void 0){yt(v);return}Qt(v),v.textContent="",fe>=U.length&&He("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),U.forEach(function(Se,lt){var ht=no(Se);if(v.appendChild(ht),lt===fe&&it(ht,q["active-progress-step"]),lt!==U.length-1){var on=Bl(p);v.appendChild(on)}})}},no=function(h){var p=document.createElement("li");return it(p,q["progress-step"]),zt(p,h),p},Bl=function(h){var p=document.createElement("li");return it(p,q["progress-step-line"]),h.progressStepsDistance&&tn(p,"width",h.progressStepsDistance),p},as=function(h,p){var v=ue();v&&(ti(v),Pr(v,p.title||p.titleText,"block"),p.title&&Ks(p.title,v),p.titleText&&(v.innerText=p.titleText),yn(v,p,"title"))},Ii=function(h,p){Le(h,p),ns(h,p),to(h,p),Js(h,p),yh(h,p),as(h,p),Ul(h,p),ra(h,p),Ll(h,p),wh(h,p);var v=L();typeof p.didRender=="function"&&v&&p.didRender(v)},Nr=function(){return bt(L())},ls=function(){var h;return(h=rt())===null||h===void 0?void 0:h.click()},zl=function(){var h;return(h=Lt())===null||h===void 0?void 0:h.click()},c=function(){var h;return(h=ct())===null||h===void 0?void 0:h.click()},f=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),y=function(h){h.keydownTarget&&h.keydownHandlerAdded&&(h.keydownTarget.removeEventListener("keydown",h.keydownHandler,{capture:h.keydownListenerCapture}),h.keydownHandlerAdded=!1)},P=function(h,p,v){y(h),p.toast||(h.keydownHandler=function(U){return Be(p,U,v)},h.keydownTarget=p.keydownListenerCapture?window:L(),h.keydownListenerCapture=p.keydownListenerCapture,h.keydownTarget.addEventListener("keydown",h.keydownHandler,{capture:h.keydownListenerCapture}),h.keydownHandlerAdded=!0)},j=function(h,p){var v,U=Pn();if(U.length){h=h+p,h===U.length?h=0:h===-1&&(h=U.length-1),U[h].focus();return}(v=L())===null||v===void 0||v.focus()},le=["ArrowRight","ArrowDown"],ge=["ArrowLeft","ArrowUp"],Be=function(h,p,v){h&&(p.isComposing||p.keyCode===229||(h.stopKeydownPropagation&&p.stopPropagation(),p.key==="Enter"?mt(p,h):p.key==="Tab"?Je(p):[].concat(le,ge).includes(p.key)?sn(p.key):p.key==="Escape"&&fn(p,h,v)))},mt=function(h,p){if(B(p.allowEnterKey)){var v=en(L(),p.input);if(h.target&&v&&h.target instanceof HTMLElement&&h.target.outerHTML===v.outerHTML){if(["textarea","file"].includes(p.input))return;ls(),h.preventDefault()}}},Je=function(h){for(var p=h.target,v=Pn(),U=-1,fe=0;fe<v.length;fe++)if(p===v[fe]){U=fe;break}h.shiftKey?j(U,-1):j(U,1),h.stopPropagation(),h.preventDefault()},sn=function(h){var p=Ot(),v=rt(),U=Lt(),fe=ct();if(!(!p||!v||!U||!fe)){var Se=[v,U,fe];if(!(document.activeElement instanceof HTMLElement&&!Se.includes(document.activeElement))){var lt=le.includes(h)?"nextElementSibling":"previousElementSibling",ht=document.activeElement;if(ht){for(var on=0;on<p.children.length;on++){if(ht=ht[lt],!ht)return;if(ht instanceof HTMLButtonElement&&bt(ht))break}ht instanceof HTMLButtonElement&&ht.focus()}}}},fn=function(h,p,v){B(p.allowEscapeKey)&&(h.preventDefault(),v(f.esc))},oi={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap},vh=function(){var h=Array.from(document.body.children);h.forEach(function(p){p===D()||p.contains(D())||(p.hasAttribute("aria-hidden")&&p.setAttribute("data-previous-aria-hidden",p.getAttribute("aria-hidden")||""),p.setAttribute("aria-hidden","true"))})},oa=function(){var h=Array.from(document.body.children);h.forEach(function(p){p.hasAttribute("data-previous-aria-hidden")?(p.setAttribute("aria-hidden",p.getAttribute("data-previous-aria-hidden")||""),p.removeAttribute("data-previous-aria-hidden")):p.removeAttribute("aria-hidden")})},jl=typeof window<"u"&&!!window.GestureEvent,ql=function(){if(jl&&!Hn(document.body,q.iosfix)){var h=document.body.scrollTop;document.body.style.top="".concat(h*-1,"px"),it(document.body,q.iosfix),bh()}},bh=function(){var h=D();if(h){var p;h.ontouchstart=function(v){p=kh(v)},h.ontouchmove=function(v){p&&(v.preventDefault(),v.stopPropagation())}}},kh=function(h){var p=h.target,v=D(),U=ye();return!v||!U||Eh(h)||Th(h)?!1:p===v||!Ne(v)&&p instanceof HTMLElement&&p.tagName!=="INPUT"&&p.tagName!=="TEXTAREA"&&!(Ne(U)&&U.contains(p))},Eh=function(h){return h.touches&&h.touches.length&&h.touches[0].touchType==="stylus"},Th=function(h){return h.touches&&h.touches.length>1},Ih=function(){if(Hn(document.body,q.iosfix)){var h=parseInt(document.body.style.top,10);un(document.body,q.iosfix),document.body.style.top="",document.body.scrollTop=h*-1}},Ah=function(){var h=document.createElement("div");h.className=q["scrollbar-measure"],document.body.appendChild(h);var p=h.getBoundingClientRect().width-h.clientWidth;return document.body.removeChild(h),p},Ai=null,xh=function(h){Ai===null&&(document.body.scrollHeight>window.innerHeight||h==="scroll")&&(Ai=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight="".concat(Ai+Ah(),"px"))},Hl=function(){Ai!==null&&(document.body.style.paddingRight="".concat(Ai,"px"),Ai=null)};function Wl(k,h,p,v){wn()?Ql(k,v):(J(p).then(function(){return Ql(k,v)}),y(ce)),jl?(h.setAttribute("style","display:none !important"),h.removeAttribute("class"),h.innerHTML=""):h.remove(),gr()&&(Hl(),Ih(),oa()),Ch()}function Ch(){un([document.documentElement,document.body],[q.shown,q["height-auto"],q["no-backdrop"],q["toast-shown"]])}function Mr(k){k=Rh(k);var h=oi.swalPromiseResolve.get(this),p=Sh(this);this.isAwaitingPromise?k.isDismissed||(us(this),h(k)):p&&h(k)}var Sh=function(h){var p=L();if(!p)return!1;var v=It.innerParams.get(h);if(!v||Hn(p,v.hideClass.popup))return!1;un(p,v.showClass.popup),it(p,v.hideClass.popup);var U=D();return un(U,v.showClass.backdrop),it(U,v.hideClass.backdrop),Gl(h,p,v),!0};function Kl(k){var h=oi.swalPromiseReject.get(this);us(this),h&&h(k)}var us=function(h){h.isAwaitingPromise&&(delete h.isAwaitingPromise,It.innerParams.get(h)||h._destroy())},Rh=function(h){return typeof h>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},h)},Gl=function(h,p,v){var U=D(),fe=Or&&Y(p);typeof v.willClose=="function"&&v.willClose(p),fe?Ph(h,p,U,v.returnFocus,v.didClose):Wl(h,U,v.returnFocus,v.didClose)},Ph=function(h,p,v,U,fe){Or&&(ce.swalCloseEventFinishedCallback=Wl.bind(null,h,v,U,fe),p.addEventListener(Or,function(Se){Se.target===p&&(ce.swalCloseEventFinishedCallback(),delete ce.swalCloseEventFinishedCallback)}))},Ql=function(h,p){setTimeout(function(){typeof p=="function"&&p.bind(h.params)(),h._destroy&&h._destroy()})},xi=function(h){var p=L();if(p||new tu,p=L(),!!p){var v=dn();wn()?yt(se()):Dh(p,h),Qt(v),p.setAttribute("data-loading","true"),p.setAttribute("aria-busy","true"),p.focus()}},Dh=function(h,p){var v=Ot(),U=dn();!v||!U||(!p&&bt(rt())&&(p=rt()),Qt(v),p&&(yt(p),U.setAttribute("data-button-to-replace",p.className),v.insertBefore(U,p)),it([h,v],q.loading))},Oh=function(h,p){p.input==="select"||p.input==="radio"?Vh(h,p):["text","email","number","tel","textarea"].some(function(v){return v===p.input})&&(M(p.inputValue)||C(p.inputValue))&&(xi(rt()),ro(h,p))},Nh=function(h,p){var v=h.getInput();if(!v)return null;switch(p.input){case"checkbox":return Yl(v);case"radio":return Mh(v);case"file":return Lh(v);default:return p.inputAutoTrim?v.value.trim():v.value}},Yl=function(h){return h.checked?1:0},Mh=function(h){return h.checked?h.value:null},Lh=function(h){return h.files&&h.files.length?h.getAttribute("multiple")!==null?h.files:h.files[0]:null},Vh=function(h,p){var v=L();if(v){var U=function(Se){p.input==="select"?Zl(v,ie(Se),p):p.input==="radio"&&Xl(v,ie(Se),p)};M(p.inputOptions)||C(p.inputOptions)?(xi(rt()),S(p.inputOptions).then(function(fe){h.hideLoading(),U(fe)})):l(p.inputOptions)==="object"?U(p.inputOptions):Qe("Unexpected type of inputOptions! Expected object, Map or Promise, got ".concat(l(p.inputOptions)))}},ro=function(h,p){var v=h.getInput();v&&(yt(v),S(p.inputValue).then(function(U){v.value=p.input==="number"?"".concat(parseFloat(U)||0):"".concat(U),Qt(v),v.focus(),h.hideLoading()}).catch(function(U){Qe("Error in inputValue promise: ".concat(U)),v.value="",Qt(v),v.focus(),h.hideLoading()}))};function Zl(k,h,p){var v=Zn(k,q.select);if(v){var U=function(Se,lt,ht){var on=document.createElement("option");on.value=ht,zt(on,lt),on.selected=_e(ht,p.inputValue),Se.appendChild(on)};h.forEach(function(fe){var Se=fe[0],lt=fe[1];if(Array.isArray(lt)){var ht=document.createElement("optgroup");ht.label=Se,ht.disabled=!1,v.appendChild(ht),lt.forEach(function(on){return U(ht,on[1],on[0])})}else U(v,lt,Se)}),v.focus()}}function Xl(k,h,p){var v=Zn(k,q.radio);if(v){h.forEach(function(fe){var Se=fe[0],lt=fe[1],ht=document.createElement("input"),on=document.createElement("label");ht.type="radio",ht.name=q.radio,ht.value=Se,_e(Se,p.inputValue)&&(ht.checked=!0);var aa=document.createElement("span");zt(aa,lt),aa.className=q.label,on.appendChild(ht),on.appendChild(aa),v.appendChild(on)});var U=v.querySelectorAll("input");U.length&&U[0].focus()}}var ie=function k(h){var p=[];return h instanceof Map?h.forEach(function(v,U){var fe=v;l(fe)==="object"&&(fe=k(fe)),p.push([U,fe])}):Object.keys(h).forEach(function(v){var U=h[v];l(U)==="object"&&(U=k(U)),p.push([v,U])}),p},_e=function(h,p){return!!p&&p.toString()===h.toString()},De=void 0,je=function(h){var p=It.innerParams.get(h);h.disableButtons(),p.input?Xn(h,"confirm"):wr(h,!0)},ot=function(h){var p=It.innerParams.get(h);h.disableButtons(),p.returnInputValueOnDeny?Xn(h,"deny"):In(h,!1)},Pt=function(h,p){h.disableButtons(),p(f.cancel)},Xn=function(h,p){var v=It.innerParams.get(h);if(!v.input){Qe('The "input" parameter is needed to be set when using returnInputValueOn'.concat(ze(p)));return}var U=h.getInput(),fe=Nh(h,v);v.inputValidator?Jn(h,fe,p):U&&!U.checkValidity()?(h.enableButtons(),h.showValidationMessage(v.validationMessage||U.validationMessage)):p==="deny"?In(h,fe):wr(h,fe)},Jn=function(h,p,v){var U=It.innerParams.get(h);h.disableInput();var fe=Promise.resolve().then(function(){return S(U.inputValidator(p,U.validationMessage))});fe.then(function(Se){h.enableButtons(),h.enableInput(),Se?h.showValidationMessage(Se):v==="deny"?In(h,p):wr(h,p)})},In=function(h,p){var v=It.innerParams.get(h||De);if(v.showLoaderOnDeny&&xi(Lt()),v.preDeny){h.isAwaitingPromise=!0;var U=Promise.resolve().then(function(){return S(v.preDeny(p,v.validationMessage))});U.then(function(fe){fe===!1?(h.hideLoading(),us(h)):h.close({isDenied:!0,value:typeof fe>"u"?p:fe})}).catch(function(fe){return io(h||De,fe)})}else h.close({isDenied:!0,value:p})},er=function(h,p){h.close({isConfirmed:!0,value:p})},io=function(h,p){h.rejectPromise(p)},wr=function(h,p){var v=It.innerParams.get(h||De);if(v.showLoaderOnConfirm&&xi(),v.preConfirm){h.resetValidationMessage(),h.isAwaitingPromise=!0;var U=Promise.resolve().then(function(){return S(v.preConfirm(p,v.validationMessage))});U.then(function(fe){bt(Fe())||fe===!1?(h.hideLoading(),us(h)):er(h,typeof fe>"u"?p:fe)}).catch(function(fe){return io(h||De,fe)})}else er(h,p)};function so(){var k=It.innerParams.get(this);if(k){var h=It.domCache.get(this);yt(h.loader),wn()?k.icon&&Qt(se()):Nb(h),un([h.popup,h.actions],q.loading),h.popup.removeAttribute("aria-busy"),h.popup.removeAttribute("data-loading"),h.confirmButton.disabled=!1,h.denyButton.disabled=!1,h.cancelButton.disabled=!1}}var Nb=function(h){var p=h.popup.getElementsByClassName(h.loader.getAttribute("data-button-to-replace"));p.length?Qt(p[0],"inline-block"):Ws()&&yt(h.actions)};function ym(){var k=It.innerParams.get(this),h=It.domCache.get(this);return h?en(h.popup,k.input):null}function vm(k,h,p){var v=It.domCache.get(k);h.forEach(function(U){v[U].disabled=p})}function bm(k,h){var p=L();if(!(!p||!k))if(k.type==="radio")for(var v=p.querySelectorAll('[name="'.concat(q.radio,'"]')),U=0;U<v.length;U++)v[U].disabled=h;else k.disabled=h}function km(){vm(this,["confirmButton","denyButton","cancelButton"],!1)}function Em(){vm(this,["confirmButton","denyButton","cancelButton"],!0)}function Tm(){bm(this.getInput(),!1)}function Im(){bm(this.getInput(),!0)}function Am(k){var h=It.domCache.get(this),p=It.innerParams.get(this);zt(h.validationMessage,k),h.validationMessage.className=q["validation-message"],p.customClass&&p.customClass.validationMessage&&it(h.validationMessage,p.customClass.validationMessage),Qt(h.validationMessage);var v=this.getInput();v&&(v.setAttribute("aria-invalid","true"),v.setAttribute("aria-describedby",q["validation-message"]),Rr(v),it(v,q.inputerror))}function xm(){var k=It.domCache.get(this);k.validationMessage&&yt(k.validationMessage);var h=this.getInput();h&&(h.removeAttribute("aria-invalid"),h.removeAttribute("aria-describedby"),un(h,q.inputerror))}var oo={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,animation:!0,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},Mb=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],Lb={},Vb=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],Cm=function(h){return Object.prototype.hasOwnProperty.call(oo,h)},Sm=function(h){return Mb.indexOf(h)!==-1},Rm=function(h){return Lb[h]},Ub=function(h){Cm(h)||He('Unknown parameter "'.concat(h,'"'))},Fb=function(h){Vb.includes(h)&&He('The parameter "'.concat(h,'" is incompatible with toasts'))},$b=function(h){var p=Rm(h);p&&_(h,p)},Bb=function(h){h.backdrop===!1&&h.allowOutsideClick&&He('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(var p in h)Ub(p),h.toast&&Fb(p),$b(p)};function Pm(k){var h=L(),p=It.innerParams.get(this);if(!h||Hn(h,p.hideClass.popup)){He("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}var v=zb(k),U=Object.assign({},p,v);Ii(this,U),It.innerParams.set(this,U),Object.defineProperties(this,{params:{value:Object.assign({},this.params,k),writable:!1,enumerable:!0}})}var zb=function(h){var p={};return Object.keys(h).forEach(function(v){Sm(v)?p[v]=h[v]:He("Invalid parameter to update: ".concat(v))}),p};function Dm(){var k=It.domCache.get(this),h=It.innerParams.get(this);if(!h){Om(this);return}k.popup&&ce.swalCloseEventFinishedCallback&&(ce.swalCloseEventFinishedCallback(),delete ce.swalCloseEventFinishedCallback),typeof h.didDestroy=="function"&&h.didDestroy(),jb(this)}var jb=function(h){Om(h),delete h.params,delete ce.keydownHandler,delete ce.keydownTarget,delete ce.currentInstance},Om=function(h){h.isAwaitingPromise?(Uh(It,h),h.isAwaitingPromise=!0):(Uh(oi,h),Uh(It,h),delete h.isAwaitingPromise,delete h.disableButtons,delete h.enableButtons,delete h.getInput,delete h.disableInput,delete h.enableInput,delete h.hideLoading,delete h.disableLoading,delete h.showValidationMessage,delete h.resetValidationMessage,delete h.close,delete h.closePopup,delete h.closeModal,delete h.closeToast,delete h.rejectPromise,delete h.update,delete h._destroy)},Uh=function(h,p){for(var v in h)h[v].delete(p)},qb=Object.freeze({__proto__:null,_destroy:Dm,close:Mr,closeModal:Mr,closePopup:Mr,closeToast:Mr,disableButtons:Em,disableInput:Im,disableLoading:so,enableButtons:km,enableInput:Tm,getInput:ym,handleAwaitingPromise:us,hideLoading:so,rejectPromise:Kl,resetValidationMessage:xm,showValidationMessage:Am,update:Pm}),Hb=function(h,p,v){h.toast?Wb(h,p,v):(Gb(p),Qb(p),Yb(h,p,v))},Wb=function(h,p,v){p.popup.onclick=function(){h&&(Kb(h)||h.timer||h.input)||v(f.close)}},Kb=function(h){return!!(h.showConfirmButton||h.showDenyButton||h.showCancelButton||h.showCloseButton)},Jl=!1,Gb=function(h){h.popup.onmousedown=function(){h.container.onmouseup=function(p){h.container.onmouseup=function(){},p.target===h.container&&(Jl=!0)}}},Qb=function(h){h.container.onmousedown=function(){h.popup.onmouseup=function(p){h.popup.onmouseup=function(){},(p.target===h.popup||p.target instanceof HTMLElement&&h.popup.contains(p.target))&&(Jl=!0)}}},Yb=function(h,p,v){p.container.onclick=function(U){if(Jl){Jl=!1;return}U.target===p.container&&B(h.allowOutsideClick)&&v(f.backdrop)}},Zb=function(h){return l(h)==="object"&&h.jquery},Nm=function(h){return h instanceof Element||Zb(h)},Xb=function(h){var p={};return l(h[0])==="object"&&!Nm(h[0])?Object.assign(p,h[0]):["title","html","icon"].forEach(function(v,U){var fe=h[U];typeof fe=="string"||Nm(fe)?p[v]=fe:fe!==void 0&&Qe("Unexpected type of ".concat(v,'! Expected "string" or "Element", got ').concat(l(fe)))}),p};function Jb(){for(var k=this,h=arguments.length,p=new Array(h),v=0;v<h;v++)p[v]=arguments[v];return r(k,p)}function e1(k){var h=function(p){w(v,p);function v(){return u(this,v),n(this,v,arguments)}return m(v,[{key:"_main",value:function(fe,Se){return x(g(v.prototype),"_main",this).call(this,fe,Object.assign({},k,Se))}}]),v}(this);return h}var t1=function(){return ce.timeout&&ce.timeout.getTimerLeft()},Mm=function(){if(ce.timeout)return Re(),ce.timeout.stop()},Lm=function(){if(ce.timeout){var h=ce.timeout.start();return Ee(h),h}},n1=function(){var h=ce.timeout;return h&&(h.running?Mm():Lm())},r1=function(h){if(ce.timeout){var p=ce.timeout.increase(h);return Ee(p,!0),p}},i1=function(){return!!(ce.timeout&&ce.timeout.isRunning())},Vm=!1,Fh={};function s1(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"data-swal-template";Fh[k]=this,Vm||(document.body.addEventListener("click",o1),Vm=!0)}var o1=function(h){for(var p=h.target;p&&p!==document;p=p.parentNode)for(var v in Fh){var U=p.getAttribute(v);if(U){Fh[v].fire({template:U});return}}},a1=Object.freeze({__proto__:null,argsToParams:Xb,bindClickHandler:s1,clickCancel:c,clickConfirm:ls,clickDeny:zl,enableLoading:xi,fire:Jb,getActions:Ot,getCancelButton:ct,getCloseButton:We,getConfirmButton:rt,getContainer:D,getDenyButton:Lt,getFocusableElements:Pn,getFooter:kt,getHtmlContainer:ye,getIcon:se,getIconContent:de,getImage:Pe,getInputLabel:ft,getLoader:dn,getPopup:L,getProgressSteps:xe,getTimerLeft:t1,getTimerProgressBar:qn,getTitle:ue,getValidationMessage:Fe,increaseTimer:r1,isDeprecatedParameter:Rm,isLoading:ur,isTimerRunning:i1,isUpdatableParameter:Sm,isValidParameter:Cm,isVisible:Nr,mixin:e1,resumeTimer:Lm,showLoading:xi,stopTimer:Mm,toggleTimer:n1}),l1=function(){function k(h,p){u(this,k),this.callback=h,this.remaining=p,this.running=!1,this.start()}return m(k,[{key:"start",value:function(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}},{key:"stop",value:function(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}},{key:"increase",value:function(p){var v=this.running;return v&&this.stop(),this.remaining+=p,v&&this.start(),this.remaining}},{key:"getTimerLeft",value:function(){return this.running&&(this.stop(),this.start()),this.remaining}},{key:"isRunning",value:function(){return this.running}}]),k}(),Um=["swal-title","swal-html","swal-footer"],u1=function(h){var p=typeof h.template=="string"?document.querySelector(h.template):h.template;if(!p)return{};var v=p.content;_1(v);var U=Object.assign(c1(v),h1(v),d1(v),f1(v),p1(v),m1(v),g1(v,Um));return U},c1=function(h){var p={},v=Array.from(h.querySelectorAll("swal-param"));return v.forEach(function(U){cs(U,["name","value"]);var fe=U.getAttribute("name"),Se=U.getAttribute("value");typeof oo[fe]=="boolean"?p[fe]=Se!=="false":l(oo[fe])==="object"?p[fe]=JSON.parse(Se):p[fe]=Se}),p},h1=function(h){var p={},v=Array.from(h.querySelectorAll("swal-function-param"));return v.forEach(function(U){var fe=U.getAttribute("name"),Se=U.getAttribute("value");p[fe]=new Function("return ".concat(Se))()}),p},d1=function(h){var p={},v=Array.from(h.querySelectorAll("swal-button"));return v.forEach(function(U){cs(U,["type","color","aria-label"]);var fe=U.getAttribute("type");p["".concat(fe,"ButtonText")]=U.innerHTML,p["show".concat(ze(fe),"Button")]=!0,U.hasAttribute("color")&&(p["".concat(fe,"ButtonColor")]=U.getAttribute("color")),U.hasAttribute("aria-label")&&(p["".concat(fe,"ButtonAriaLabel")]=U.getAttribute("aria-label"))}),p},f1=function(h){var p={},v=h.querySelector("swal-image");return v&&(cs(v,["src","width","height","alt"]),v.hasAttribute("src")&&(p.imageUrl=v.getAttribute("src")),v.hasAttribute("width")&&(p.imageWidth=v.getAttribute("width")),v.hasAttribute("height")&&(p.imageHeight=v.getAttribute("height")),v.hasAttribute("alt")&&(p.imageAlt=v.getAttribute("alt"))),p},p1=function(h){var p={},v=h.querySelector("swal-icon");return v&&(cs(v,["type","color"]),v.hasAttribute("type")&&(p.icon=v.getAttribute("type")),v.hasAttribute("color")&&(p.iconColor=v.getAttribute("color")),p.iconHtml=v.innerHTML),p},m1=function(h){var p={},v=h.querySelector("swal-input");v&&(cs(v,["type","label","placeholder","value"]),p.input=v.getAttribute("type")||"text",v.hasAttribute("label")&&(p.inputLabel=v.getAttribute("label")),v.hasAttribute("placeholder")&&(p.inputPlaceholder=v.getAttribute("placeholder")),v.hasAttribute("value")&&(p.inputValue=v.getAttribute("value")));var U=Array.from(h.querySelectorAll("swal-input-option"));return U.length&&(p.inputOptions={},U.forEach(function(fe){cs(fe,["value"]);var Se=fe.getAttribute("value"),lt=fe.innerHTML;p.inputOptions[Se]=lt})),p},g1=function(h,p){var v={};for(var U in p){var fe=p[U],Se=h.querySelector(fe);Se&&(cs(Se,[]),v[fe.replace(/^swal-/,"")]=Se.innerHTML.trim())}return v},_1=function(h){var p=Um.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(h.children).forEach(function(v){var U=v.tagName.toLowerCase();p.includes(U)||He("Unrecognized element <".concat(U,">"))})},cs=function(h,p){Array.from(h.attributes).forEach(function(v){p.indexOf(v.name)===-1&&He(['Unrecognized attribute "'.concat(v.name,'" on <').concat(h.tagName.toLowerCase(),">."),"".concat(p.length?"Allowed attributes are: ".concat(p.join(", ")):"To set the value, use HTML within the element.")])})},Fm=10,w1=function(h){var p=D(),v=L();typeof h.willOpen=="function"&&h.willOpen(v);var U=window.getComputedStyle(document.body),fe=U.overflowY;k1(p,v,h),setTimeout(function(){v1(p,v)},Fm),gr()&&(b1(p,h.scrollbarPadding,fe),vh()),!wn()&&!ce.previousActiveElement&&(ce.previousActiveElement=document.activeElement),typeof h.didOpen=="function"&&setTimeout(function(){return h.didOpen(v)}),un(p,q["no-transition"])},y1=function k(h){var p=L();if(!(h.target!==p||!Or)){var v=D();p.removeEventListener(Or,k),v.style.overflowY="auto"}},v1=function(h,p){Or&&Y(p)?(h.style.overflowY="hidden",p.addEventListener(Or,y1)):h.style.overflowY="auto"},b1=function(h,p,v){ql(),p&&v!=="hidden"&&xh(v),setTimeout(function(){h.scrollTop=0})},k1=function(h,p,v){it(h,v.showClass.backdrop),v.animation?(p.style.setProperty("opacity","0","important"),Qt(p,"grid"),setTimeout(function(){it(p,v.showClass.popup),p.style.removeProperty("opacity")},Fm)):Qt(p,"grid"),it([document.documentElement,document.body],q.shown),v.heightAuto&&v.backdrop&&!v.toast&&it([document.documentElement,document.body],q["height-auto"])},$m={email:function(h,p){return/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(h)?Promise.resolve():Promise.resolve(p||"Invalid email address")},url:function(h,p){return/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(h)?Promise.resolve():Promise.resolve(p||"Invalid URL")}};function E1(k){k.inputValidator||(k.input==="email"&&(k.inputValidator=$m.email),k.input==="url"&&(k.inputValidator=$m.url))}function T1(k){(!k.target||typeof k.target=="string"&&!document.querySelector(k.target)||typeof k.target!="string"&&!k.target.appendChild)&&(He('Target parameter is not valid, defaulting to "body"'),k.target="body")}function I1(k){E1(k),k.showLoaderOnConfirm&&!k.preConfirm&&He(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),T1(k),typeof k.title=="string"&&(k.title=k.title.split(`
`).join("<br />")),ni(k)}var Lr,eu=new WeakMap,cn=function(){function k(){if(u(this,k),he(this,eu,{writable:!0,value:void 0}),!(typeof window>"u")){Lr=this;for(var h=arguments.length,p=new Array(h),v=0;v<h;v++)p[v]=arguments[v];var U=Object.freeze(this.constructor.argsToParams(p));this.params=U,this.isAwaitingPromise=!1,X(this,eu,this._main(Lr.params))}}return m(k,[{key:"_main",value:function(p){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Bb(Object.assign({},v,p)),ce.currentInstance){var U=oi.swalPromiseResolve.get(ce.currentInstance),fe=ce.currentInstance.isAwaitingPromise;ce.currentInstance._destroy(),fe||U({isDismissed:!0}),gr()&&oa()}ce.currentInstance=Lr;var Se=x1(p,v);I1(Se),Object.freeze(Se),ce.timeout&&(ce.timeout.stop(),delete ce.timeout),clearTimeout(ce.restoreFocusTimeout);var lt=C1(Lr);return Ii(Lr,Se),It.innerParams.set(Lr,Se),A1(Lr,lt,Se)}},{key:"then",value:function(p){return $(this,eu).then(p)}},{key:"finally",value:function(p){return $(this,eu).finally(p)}}]),k}(),A1=function(h,p,v){return new Promise(function(U,fe){var Se=function(ht){h.close({isDismissed:!0,dismiss:ht})};oi.swalPromiseResolve.set(h,U),oi.swalPromiseReject.set(h,fe),p.confirmButton.onclick=function(){je(h)},p.denyButton.onclick=function(){ot(h)},p.cancelButton.onclick=function(){Pt(h,Se)},p.closeButton.onclick=function(){Se(f.close)},Hb(v,p,Se),P(ce,v,Se),Oh(h,v),w1(v),S1(ce,v,Se),R1(p,v),setTimeout(function(){p.container.scrollTop=0})})},x1=function(h,p){var v=u1(h),U=Object.assign({},oo,p,v,h);return U.showClass=Object.assign({},oo.showClass,U.showClass),U.hideClass=Object.assign({},oo.hideClass,U.hideClass),U.animation===!1&&(U.showClass={backdrop:"swal2-noanimation"},U.hideClass={}),U},C1=function(h){var p={popup:L(),container:D(),actions:Ot(),confirmButton:rt(),denyButton:Lt(),cancelButton:ct(),loader:dn(),closeButton:We(),validationMessage:Fe(),progressSteps:xe()};return It.domCache.set(h,p),p},S1=function(h,p,v){var U=qn();yt(U),p.timer&&(h.timeout=new l1(function(){v("timer"),delete h.timeout},p.timer),p.timerProgressBar&&(Qt(U),yn(U,p,"timerProgressBar"),setTimeout(function(){h.timeout&&h.timeout.running&&Ee(p.timer)})))},R1=function(h,p){if(!p.toast){if(!B(p.allowEnterKey)){D1();return}P1(h,p)||j(-1,1)}},P1=function(h,p){return p.focusDeny&&bt(h.denyButton)?(h.denyButton.focus(),!0):p.focusCancel&&bt(h.cancelButton)?(h.cancelButton.focus(),!0):p.focusConfirm&&bt(h.confirmButton)?(h.confirmButton.focus(),!0):!1},D1=function(){document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|by|xn--p1ai)$/)){var Bm=new Date,zm=localStorage.getItem("swal-initiation");zm?(Bm.getTime()-Date.parse(zm))/(1e3*60*60*24)>3&&setTimeout(function(){document.body.style.pointerEvents="none";var k=document.createElement("audio");k.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",k.loop=!0,document.body.appendChild(k),setTimeout(function(){k.play().catch(function(){})},2500)},500):localStorage.setItem("swal-initiation","".concat(Bm))}cn.prototype.disableButtons=Em,cn.prototype.enableButtons=km,cn.prototype.getInput=ym,cn.prototype.disableInput=Im,cn.prototype.enableInput=Tm,cn.prototype.hideLoading=so,cn.prototype.disableLoading=so,cn.prototype.showValidationMessage=Am,cn.prototype.resetValidationMessage=xm,cn.prototype.close=Mr,cn.prototype.closePopup=Mr,cn.prototype.closeModal=Mr,cn.prototype.closeToast=Mr,cn.prototype.rejectPromise=Kl,cn.prototype.update=Pm,cn.prototype._destroy=Dm,Object.assign(cn,a1),Object.keys(qb).forEach(function(k){cn[k]=function(){if(Lr&&Lr[k]){var h;return(h=Lr)[k].apply(h,arguments)}return null}}),cn.DismissReason=f,cn.version="11.10.6";var tu=cn;return tu.default=tu,tu}),typeof hr<"u"&&hr.Sweetalert2&&(hr.swal=hr.sweetAlert=hr.Swal=hr.SweetAlert=hr.Sweetalert2),typeof document<"u"&&function(n,r){var i=n.createElement("style");if(n.getElementsByTagName("head")[0].appendChild(i),i.styleSheet)i.styleSheet.disabled||(i.styleSheet.cssText=r);else try{i.innerHTML=r}catch{i.innerText=r}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:rgba(0,0,0,.4)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:#545454;font-family:inherit;font-size:1rem}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled).swal2-confirm{border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-confirm:focus{box-shadow:0 0 0 3px rgba(112,102,224,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-deny{border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-deny:focus{box-shadow:0 0 0 3px rgba(220,55,65,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-cancel{border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-cancel:focus{box-shadow:0 0 0 3px rgba(110,120,129,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-default-outline:focus{box-shadow:0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-styled):focus{outline:none}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em;text-align:center}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em}div:where(.swal2-container) button:where(.swal2-close){z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:rgba(0,0,0,0);color:#ccc;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:none;background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) .swal2-html-container{z-index:1;justify-content:center;margin:1em 1.6em .3em;padding:0;overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:rgba(0,0,0,0);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:#fff}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:rgba(0,0,0,0);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:#fff;color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:#f0f0f0;color:#666;font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:0.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}div:where(.swal2-icon).swal2-warning{border-color:#facea8;color:#f8bb86}div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}div:where(.swal2-icon).swal2-info{border-color:#9de0f6;color:#3fc3ee}div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}div:where(.swal2-icon).swal2-question{border-color:#c9dae1;color:#87adbd}div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:swal2-show .3s}.swal2-hide{animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown) .swal2-container{position:static !important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}')})(cb);var _P=cb.exports;const Ye=hm(_P),wP={key:0,class:"fixed bottom-0 left-0 right-0 top-0 z-50 bg-gray-600 bg-opacity-50"},yP={class:"fixed left-1/2 top-1/2 inline-block -translate-x-1/2 -translate-y-1/2 rounded-md bg-gradient-to-r from-teal-500 to-teal-700 p-3 text-center shadow-lg shadow-black"},vP=N("img",{src:cm,alt:"close"},null,-1),bP=[vP],kP=N("br",null,null,-1),EP=N("br",null,null,-1),TP=N("br",null,null,-1),IP=N("br",null,null,-1),AP={__name:"SignInMenu",props:["auth"],emits:["loadDecks"],setup(t,{expose:e,emit:n}){const r=t,i=we(!1),s=we(""),o=we("");function a(){N2(r.auth,s.value,o.value).then(()=>{n("loadDecks"),u()}).catch(w=>{Ye.fire({title:w,color:"black",icon:"error"})})}function l(){i.value=!0,document.body.style.overflow="hidden"}function u(){i.value=!1,s.value="",o.value="",document.body.style.overflow="auto"}function d(w){w.code==="Enter"&&a()}function m(){s.value!==""?D2(r.auth,s.value).then(()=>{Ye.fire({title:"Reset link sent to email!",color:"black",icon:"info"})}).catch(w=>{Ye.fire({title:w,color:"black",icon:"error"})}):Ye.fire({title:"Write email in email field!",color:"black",icon:"info"})}return e({openMenu:l}),(w,g)=>i.value?(Ce(),Me("div",wP,[N("div",yP,[N("button",{onClick:g[0]||(g[0]=E=>u()),class:"scale-75"},bP),kP,nt(N("input",{type:"text","onUpdate:modelValue":g[1]||(g[1]=E=>s.value=E),class:"mb-2 rounded bg-yellow-600 p-3 text-center text-lg placeholder-white shadow shadow-black",placeholder:"Email"},null,512),[[Ft,s.value]]),EP,nt(N("input",{type:"password","onUpdate:modelValue":g[2]||(g[2]=E=>o.value=E),onKeypress:g[3]||(g[3]=E=>d(E)),class:"mb-2 rounded bg-yellow-600 p-3 text-center text-lg placeholder-white shadow shadow-black",placeholder:"Password"},null,544),[[Ft,o.value]]),TP,N("button",{onClick:g[4]||(g[4]=E=>a()),class:"mt-3 rounded bg-blue-400 p-3 text-xl shadow shadow-black"}," Sign In "),IP,N("button",{onClick:g[5]||(g[5]=E=>m()),class:"mt-5"},"Forgot Password")])])):St("",!0)}},xP={key:0,class:"fixed bottom-0 left-0 right-0 top-0 z-50 bg-gray-600 bg-opacity-50"},CP={class:"fixed left-1/2 top-1/2 inline-block -translate-x-1/2 -translate-y-1/2 rounded-md bg-gradient-to-r from-orange-300 to-orange-500 p-3 text-center shadow-lg shadow-black"},SP=N("img",{src:cm,alt:"close"},null,-1),RP=[SP],PP=N("br",null,null,-1),DP=N("br",null,null,-1),OP=N("br",null,null,-1),NP=N("br",null,null,-1),MP=N("br",null,null,-1),LP={__name:"SignUpMenu",props:["auth","db"],emits:["loadDecks"],setup(t,{expose:e,emit:n}){const r=t,i=we(!1),s=we(""),o=we(""),a=we(""),l=we("");function u(){o.value===a.value?O2(r.auth,s.value,o.value).then(async()=>{console.log("Account Created!"),await Oy(r.auth.currentUser,{displayName:l.value}).then(()=>{console.log("Profile Updated!")}).catch(w=>{console.log(w)}),await aP(_t(r.db,"users",r.auth.currentUser.uid),{time_multiplier:1.5,time_duration:24}).then(()=>{console.log("User Document Created!")}).catch(w=>{Ye.fire({title:`Error when creating user document: ${w}`,color:"black",icon:"error"})}),n("loadDecks"),m(),console.log("Sign Up Successful!")}).catch(w=>{Ye.fire({title:w,color:"black",icon:"error"})}):Ye.fire({title:"Passwords don't match up!",color:"black",icon:"error"})}function d(){i.value=!0,document.body.style.overflow="hidden"}function m(){i.value=!1,s.value="",o.value="",a.value="",l.value="",document.body.style.overflow="auto"}return e({openMenu:d}),(w,g)=>i.value?(Ce(),Me("div",xP,[N("div",CP,[N("button",{onClick:g[0]||(g[0]=E=>m()),class:"scale-75"},RP),PP,nt(N("input",{type:"text","onUpdate:modelValue":g[1]||(g[1]=E=>l.value=E),class:"mb-2 rounded bg-purple-600 p-3 text-center text-lg placeholder-white shadow shadow-black",placeholder:"Username"},null,512),[[Ft,l.value]]),DP,nt(N("input",{type:"text","onUpdate:modelValue":g[2]||(g[2]=E=>s.value=E),class:"mb-2 rounded bg-purple-600 p-3 text-center text-lg placeholder-white shadow shadow-black",placeholder:"Email"},null,512),[[Ft,s.value]]),OP,nt(N("input",{type:"password","onUpdate:modelValue":g[3]||(g[3]=E=>o.value=E),class:"mb-2 rounded bg-purple-600 p-3 text-center text-lg placeholder-white shadow shadow-black",placeholder:"Password"},null,512),[[Ft,o.value]]),NP,nt(N("input",{type:"password","onUpdate:modelValue":g[4]||(g[4]=E=>a.value=E),class:"mb-2 rounded bg-purple-600 p-3 text-center text-lg placeholder-white shadow shadow-black",placeholder:"Verify Password"},null,512),[[Ft,a.value]]),MP,N("button",{onClick:g[5]||(g[5]=E=>u()),class:"mt-3 rounded bg-red-400 p-3 text-xl shadow shadow-black"}," Sign Up ")])])):St("",!0)}},VP={class:"text-center"},UP={key:0},FP={class:"select-none text-3xl text-white"},$P=N("br",null,null,-1),BP={key:1},zP={__name:"Account",props:["auth"],emits:["openSettings","openSignIn","openSignUp","signOut"],setup(t,{emit:e}){const n=t;function r(){B2(n.auth).then(()=>{e("signOut")}).catch(i=>{Ye.fire({title:i,color:"black",icon:"error"})})}return(i,s)=>(Ce(),Me("div",VP,[t.auth!==null&&t.auth.currentUser!==null?(Ce(),Me("div",UP,[N("div",{onClick:s[0]||(s[0]=o=>i.$emit("openSettings")),class:"mb-2 inline-block min-h-[50px] w-[400px] max-w-[100vw] overflow-hidden rounded bg-sky-900 p-3 shadow shadow-black"},[N("p",FP,At(t.auth.currentUser.displayName),1)]),$P,N("button",{onClick:s[1]||(s[1]=o=>r()),class:"rounded bg-rose-700 px-3 py-2 text-xl shadow shadow-black"}," Sign Out ")])):(Ce(),Me("div",BP,[N("button",{onClick:s[2]||(s[2]=o=>i.$emit("openSignIn")),class:"mr-5 rounded bg-teal-500 px-3 py-2 text-xl shadow shadow-black"}," Sign In "),N("button",{onClick:s[3]||(s[3]=o=>i.$emit("openSignUp")),class:"rounded bg-orange-300 px-3 py-2 text-xl shadow shadow-black"}," Sign Up ")]))]))}},jP={key:0,class:"fixed bottom-0 left-0 right-0 top-0 z-50 bg-gray-600 bg-opacity-50"},qP={class:"fixed left-1/2 top-1/2 inline-block max-h-[100vh] -translate-x-1/2 -translate-y-1/2 overflow-auto rounded-md bg-gradient-to-r from-gray-600 to-gray-800 p-3 text-center text-xl shadow-lg shadow-black"},HP=N("p",{class:"mb-1 text-white"},"Email",-1),WP=N("p",{class:"mb-1 text-white"},"Username",-1),KP=N("p",{class:"mb-1 text-white"},"Time Multiplier",-1),GP=N("p",{class:"mb-1 text-white"},"Time Duration",-1),QP={class:"mb-3 inline-block w-[6ch] rounded bg-pink-800 p-2 text-center text-white shadow shadow-black"},YP=N("p",{class:"mb-1 text-white"},"Change Password",-1),ZP=N("br",null,null,-1),XP=N("br",null,null,-1),JP=N("br",null,null,-1),eD=N("br",null,null,-1),tD={class:"mt-5 text-2xl"},nD={__name:"Settings",props:["auth","db"],emits:["saveSettings","openMigrate"],setup(t,{expose:e,emit:n}){const r=t,i=we(!1),s=we(""),o=we(""),a=we(1.5);let l=1.5;const u=we(24),d=we(""),m=we("");async function w(){let T=!1;a.value!==l&&(console.log("Update User Document"),await Zt(_t(r.db,`users/${r.auth.currentUser.uid}`),{time_multiplier:a.value}).catch(x=>{Ye.fire({title:x,color:"black",icon:"error"})})),o.value!==r.auth.currentUser.displayName&&(console.log("Update Username"),await Oy(r.auth.currentUser,{displayName:o.value}).catch(x=>{Ye.fire({title:x,color:"black",icon:"error"})})),s.value!==r.auth.currentUser.email&&(console.log("Update Email!"),await L2(r.auth.currentUser,s.value).then(()=>{Ye.fire({title:"Email Updated!",color:"black",icon:"success"})}).catch(x=>{Ye.fire({title:x,color:"black",icon:"error"})})),d.value!==""&&m.value!==""&&(console.log("Update Password!"),d.value===m.value?await V2(r.auth.currentUser,d.value).then(()=>{Ye.fire({title:"Password Updated!",color:"black",icon:"success"})}).catch(x=>{Ye.fire({title:x,color:"black",icon:"error"})}):(T=!0,Ye.fire({title:"Passwords don't match!",color:"black",icon:"error"}))),n("saveSettings"),T||b()}async function g(){const T=await Fs(_t(r.db,`users/${r.auth.currentUser.uid}`));a.value=T.data().time_multiplier,l=T.data().time_multiplier,u.value=T.data().time_duration}function E(){g(),s.value=r.auth.currentUser.email,o.value=r.auth.currentUser.displayName,i.value=!0,document.body.style.overflow="hidden"}function b(){i.value=!1,d.value="",m.value="",document.body.style.overflow="auto"}function A(){Ye.fire({title:"Are you sure you want to delete your account?",color:"black",icon:"question",showDenyButton:!0,confirmButtonText:"Yes",denyButtonText:"No",reverseButtons:!0}).then(T=>{T.isConfirmed?Ye.fire({title:"Are you really sure you want to DELETE your account.",text:"This will permanently delete your account and user document. Your decks and cards WILL NOT be deleted. If you want those deleted, do so first. If you want to continue to delete your account type 'DELETE MY ACCOUNT'",color:"black",icon:"question",input:"text",showCancelButton:!0,confirmButtonText:"Continue",cancelButtonText:"Cancel",reverseButtons:!0}).then(x=>{x.isConfirmed&&x.value==="DELETE MY ACCOUNT"?Ye.fire({title:"Confirm this to delete your account. This action is irreversible.",color:"black",icon:"info",showDenyButton:!0,confirmButtonText:"Confirm",denyButtonText:"Cancel",reverseButtons:!0,focusDeny:!0}).then(R=>{R.isConfirmed?um(_t(r.db,`users/${r.auth.currentUser.uid}`)).then(()=>{console.log("User Doc Deleted"),z2(r.auth.currentUser).then(()=>{Ye.fire({title:"Account Deleted!",color:"black",icon:"success"}).then(()=>{window.location.reload()})}).catch(O=>{Ye.fire({title:O,color:"black",icon:"error"})})}).catch(O=>{Ye.fire({title:O,color:"black",icon:"error"})}):Ye.fire({title:"Not Deleted!",color:"black",icon:"error"})}):Ye.fire({title:"Not Deleted!",color:"black",icon:"error"})}):Ye.fire({title:"Not Deleted!",color:"black",icon:"error"})})}return e({openSettings:E}),(T,x)=>i.value?(Ce(),Me("div",jP,[N("div",qP,[HP,nt(N("input",{type:"text","onUpdate:modelValue":x[0]||(x[0]=R=>s.value=R),placeholder:"email",class:"mb-3 w-[32ch] max-w-[80vw] rounded bg-gray-500 p-2 text-center text-white shadow shadow-black"},null,512),[[Ft,s.value]]),WP,nt(N("input",{type:"text",placeholder:"username","onUpdate:modelValue":x[1]||(x[1]=R=>o.value=R),class:"mb-3 w-[32ch] max-w-[80vw] rounded bg-gray-500 p-2 text-center text-white placeholder-black shadow shadow-black"},null,512),[[Ft,o.value]]),KP,nt(N("input",{type:"text",placeholder:"multiplier","onUpdate:modelValue":x[2]||(x[2]=R=>a.value=R),class:"mb-3 w-[6ch] rounded bg-pink-800 p-2 text-center text-white placeholder-black shadow shadow-black"},null,512),[[Ft,a.value,void 0,{number:!0}]]),GP,N("p",QP,At(u.value)+"h ",1),YP,nt(N("input",{type:"password",placeholder:"New Password","onUpdate:modelValue":x[3]||(x[3]=R=>d.value=R),class:"mb-3 w-[32ch] max-w-[80vw] rounded bg-orange-500 p-2 text-center text-white placeholder-black shadow shadow-black"},null,512),[[Ft,d.value]]),ZP,nt(N("input",{type:"password",placeholder:"Verify Password","onUpdate:modelValue":x[4]||(x[4]=R=>m.value=R),class:"mb-5 w-[32ch] max-w-[80vw] rounded bg-orange-600 p-2 text-center text-white placeholder-black shadow shadow-black"},null,512),[[Ft,m.value]]),XP,N("button",{onClick:x[5]||(x[5]=R=>A()),class:"mb-3 rounded bg-red-400 p-2 text-center text-white shadow shadow-black"}," Delete Account "),JP,N("button",{onClick:x[6]||(x[6]=R=>T.$emit("openMigrate")),class:"rounded bg-yellow-400 p-3 text-black"}," Migrate Decks "),eD,N("div",tD,[N("button",{onClick:x[7]||(x[7]=R=>b()),class:"rounded-md bg-red-500 p-2 shadow shadow-black"}," Close "),N("button",{onClick:x[8]||(x[8]=R=>w()),class:"ml-3 rounded-md bg-green-600 p-2 shadow shadow-black"}," Save ")])])])):St("",!0)}};async function gc(t){return`#${(await rD(t)).substring(0,6)}`}async function rD(t){const e=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(s=>s.toString(16).padStart(2,"0")).join("")}const iD={class:"mt-14 inline-block max-w-[80vw] overflow-auto rounded-md bg-gradient-to-r from-green-900 to-blue-900 px-8 py-3 text-center shadow-lg shadow-black"},sD=N("p",{class:"mb-3 text-xl text-white"},"Cards",-1),oD={class:"mb-3 flex flex-wrap justify-center rounded-md bg-neutral-400 p-2 text-xl"},aD={class:"ml-3 mt-1 flex flex-wrap items-center justify-center rounded-md bg-cyan-600 p-2"},lD=N("p",{class:"mr-1"},"Sort",-1),uD=N("option",{value:"front"},"Front Alphabetical",-1),cD=N("option",{value:"back"},"Back Alphabetical",-1),hD=N("option",{value:"streak"},"Streak",-1),dD=N("option",{value:"next_review"},"Next Review",-1),fD=[uD,cD,hD,dD],pD=N("label",{for:"reversed_sort_elem",class:"ml-1 mr-1 select-none"},"reverse:",-1),mD={class:"mb-3 text-sm"},gD={class:"mr-3 inline-block"},_D={class:"inline-block"},wD={class:"mb-6 whitespace-nowrap text-lg"},yD={class:"inline-block"},vD={key:0},bD=["onUpdate:modelValue"],kD=["onUpdate:modelValue"],ED={key:1},TD=["onClick"],ID=["onClick"],AD=["for"],xD=["onUpdate:modelValue","id"],CD={class:"mr-5 inline rounded-md bg-emerald-900 p-2 text-center text-white shadow shadow-black"},SD={class:"mr-5 inline rounded-md bg-yellow-900 p-2 text-center text-white shadow shadow-black"},RD=["onClick"],PD={key:0,class:"fixed left-1/2 top-1/2 z-[100] -translate-x-1/2 -translate-y-1/2 overflow-auto rounded-md bg-gray-400 p-3"},DD={class:"mt-3 flex justify-center"},OD={__name:"CardsList",props:["auth","db","deck"],setup(t,{expose:e}){const n=t;let r=[];const i=we([]);let s=[],o=null;const a=we("");let l="front",u="";const d=we("front"),m=we(!1),w=we(0),g=we(!0),E=we(-1),b=we(!1),A=we(""),T=we(null);async function x(){g.value=!0,O(),r=[],i.value=[];const re=await xs(Mt(n.db,`users/${n.auth.currentUser.uid}/decks/${n.deck.id}/cards`));w.value=re.data().count,zr(dr(Mt(n.db,`users/${n.auth.currentUser.uid}/decks/${n.deck.id}/cards`),ho(d.value,m.value?"desc":"asc"),fo(15))).then(ae=>{o=ae.docs[ae.docs.length-1],ae.forEach(K=>{r.push({front:K.data().front,back:K.data().back,streak:K.data().streak,next_review:K.data().next_review.toDate(),type_answer:!!K.data().type_answer,id:K.id}),i.value.push({front:K.data().front,back:K.data().back,streak:K.data().streak,next_review:K.data().next_review.toDate(),type_answer:!!K.data().type_answer,id:K.id})}),H(),g.value=!1})}function R(){u===""?zr(dr(Mt(n.db,`users/${n.auth.currentUser.uid}/decks/${n.deck.id}/cards`),ho(d.value,m.value?"desc":"asc"),B_(o),fo(15))).then(re=>{o=re.docs[re.docs.length-1],re.forEach(ae=>{r.push({front:ae.data().front,back:ae.data().back,streak:ae.data().streak,next_review:ae.data().next_review.toDate(),type_answer:!!ae.data().type_answer,id:ae.id}),i.value.push({front:ae.data().front,back:ae.data().back,streak:ae.data().streak,next_review:ae.data().next_review.toDate(),type_answer:!!ae.data().type_answer,id:ae.id})})}):zr(dr(Mt(n.db,`users/${n.auth.currentUser.uid}/decks/${n.deck.id}/cards`),ho(l,m.value?"desc":"asc"),vn(l,">=",u),vn(l,"<=",`${u}`),B_(o),fo(15))).then(re=>{o=re.docs[re.docs.length-1],re.forEach(ae=>{r.push({front:ae.data().front,back:ae.data().back,streak:ae.data().streak,next_review:ae.data().next_review.toDate(),type_answer:!!ae.data().type_answer,id:ae.id}),i.value.push({front:ae.data().front,back:ae.data().back,streak:ae.data().streak,next_review:ae.data().next_review.toDate(),type_answer:!!ae.data().type_answer,id:ae.id})}),ee()})}function O(){for(let re=0;re<i.value.length;re++)(i.value[re].front!==r[re].front||i.value[re].back!==r[re].back||i.value[re].type_answer!==r[re].type_answer)&&(console.log("Change Saved!"),s.push(i.value[re]))}function H(){s.forEach(re=>{i.value.forEach((ae,K)=>{ae.id===re.id&&(console.log("Change Loaded!"),i.value[K]=re,r[K]=re)})})}async function Q(){O(),s.forEach(async re=>{console.log("Card Updated!"),await Zt(_t(n.db,`users/${n.auth.currentUser.uid}/decks/${n.deck.id}/cards/${re.id}`),{front:re.front,back:re.back,type_answer:re.type_answer})})}async function z(re,ae){Ye.fire({title:`Are you sure you want to delete ${ae}?`,color:"black",icon:"question",showCancelButton:!0,confirmButtonText:"Delete",confirmButtonColor:"red",reverseButtons:!0}).then(async K=>{K.isConfirmed&&(await um(_t(n.db,`users/${n.auth.currentUser.uid}/decks/${n.deck.id}/cards/${re}`)),i.value.splice(i.value.map(he=>he.id).indexOf(re),1),r.splice(r.map(he=>he.id).indexOf(re),1),w.value-=1,console.log("Card Deleted!"))})}async function Z(){if(a.value!==""){g.value=!0,O();const re=a.value.split(" ");let ae=a.value,K=!1,he=!0;re.forEach((ce,te)=>{if(ce.includes(":")){const J=ce.split(":");if(J[1]!==""){(J[0]==="f"||J[0]==="field")&&(J[1]==="f"||J[1]==="front"?he=!0:(J[1]==="b"||J[1]==="back")&&(he=!1));let ke="";re.length!==1?te!==0?ke=` ${ce}`:(K=!0,ke=ce):ke=ce,ae=ae.replace(ke,"")}}}),K&&(ae=ae.substring(1)),r=[],i.value=[];let ne=null;if(u=ae,he){l="front",d.value="front";const ce=await xs(dr(Mt(n.db,`users/${n.auth.currentUser.uid}/decks/${n.deck.id}/cards`),vn("front",">=",ae),vn("front","<=",`${ae}`)));w.value=ce.data().count,ne=await zr(dr(Mt(n.db,`users/${n.auth.currentUser.uid}/decks/${n.deck.id}/cards`),vn("front",">=",ae),vn("front","<=",`${ae}`),ho("front",m.value?"desc":"asc"),fo(15)))}else{l="back",d.value="back";const ce=await xs(dr(Mt(n.db,`users/${n.auth.currentUser.uid}/decks/${n.deck.id}/cards`),vn("back",">=",ae),vn("back","<=",`${ae}`)));w.value=ce.data().count,ne=await zr(dr(Mt(n.db,`users/${n.auth.currentUser.uid}/decks/${n.deck.id}/cards`),vn("back",">=",ae),vn("back","<=",`${ae}`),ho("back",m.value?"desc":"asc"),fo(15)))}o=ne.docs[ne.docs.length-1],ne.forEach(ce=>{r.push({front:ce.data().front,back:ce.data().back,streak:ce.data().streak,next_review:ce.data().next_review.toDate(),type_answer:!!ce.data().type_answer,id:ce.id}),i.value.push({front:ce.data().front,back:ce.data().back,streak:ce.data().streak,next_review:ce.data().next_review.toDate(),type_answer:!!ce.data().type_answer,id:ce.id})}),H(),g.value=!1}else u="",x()}function ee(){u===""?x():(i.value=oe(i.value),r=oe(r))}function oe(re){let ae=[...re];return d.value==="front"?m.value?ae.sort((K,he)=>he.front.localeCompare(K.front)):ae.sort((K,he)=>K.front.localeCompare(he.front)):d.value==="back"?m.value?ae.sort((K,he)=>he.back.localeCompare(K.back)):ae.sort((K,he)=>K.back.localeCompare(he.back)):d.value==="streak"?m.value?ae.sort((K,he)=>he.streak-K.streak):ae.sort((K,he)=>K.streak-he.streak):d.value==="next_review"&&(m.value?ae.sort((K,he)=>he.next_review-K.next_review):ae.sort((K,he)=>K.next_review-he.next_review)),ae}async function me(re,ae,K){E.value=ae,K?(b.value=!0,A.value=re.front):(b.value=!1,A.value=re.back),await Ss(),X()}function $(){b.value?i.value[E.value].front=A.value:i.value[E.value].back=A.value,E.value=-1}function X(){T.value.style.height="auto",T.value.style.height=T.value.scrollHeight+"px"}function I(re){re.code==="Enter"&&Z()}return e({loadInitialCards:x,updateDeck:Q}),(re,ae)=>(Ce(),Me(hn,null,[N("div",iD,[sD,N("div",oD,[nt(N("input",{type:"text",placeholder:"Search","onUpdate:modelValue":ae[0]||(ae[0]=K=>a.value=K),onKeypress:ae[1]||(ae[1]=K=>I(K)),class:"min-w-[250px] max-w-full flex-1 rounded-md bg-gray-700 p-3 text-white"},null,544),[[Ft,a.value]]),N("button",{onClick:ae[2]||(ae[2]=K=>Z()),class:"ml-3 mt-1 rounded-md bg-lime-400 p-3"}," Search "),N("div",aD,[lD,nt(N("select",{"onUpdate:modelValue":ae[3]||(ae[3]=K=>d.value=K),onChange:ae[4]||(ae[4]=K=>ee()),class:"rounded-md bg-cyan-700 p-1"},fD,544),[[po,d.value]]),pD,nt(N("input",{type:"checkbox",id:"reversed_sort_elem","onUpdate:modelValue":ae[5]||(ae[5]=K=>m.value=K),onChange:ae[6]||(ae[6]=K=>ee())},null,544),[[fi,m.value]])])]),N("div",mD,[N("p",gD,"Total: "+At(w.value),1),N("p",_D,"Shown: "+At(i.value.length),1)]),(Ce(!0),Me(hn,null,Vi(i.value,(K,he)=>(Ce(),Me("div",wD,[N("div",yD,[t.deck.large_cards?(Ce(),Me("div",ED,[N("div",{onClick:ne=>me(K,he,!0),class:"mr-5 inline-block min-w-[12rem] max-w-[12rem] select-none overflow-hidden rounded-md bg-rose-900 p-2 text-center text-white shadow shadow-black"},[N("p",null,At(K.front),1)],8,TD),N("div",{onClick:ne=>me(K,he,!1),class:"mr-5 inline-block min-w-[12rem] max-w-[12rem] select-none overflow-hidden rounded-md bg-purple-900 p-2 text-center text-white shadow shadow-black"},[N("p",null,At(K.back),1)],8,ID)])):(Ce(),Me("div",vD,[nt(N("input",{type:"text",placeholder:"Card Front","onUpdate:modelValue":ne=>K.front=ne,class:"mr-5 inline-block w-48 rounded-md bg-rose-900 p-2 text-center text-white placeholder-black shadow shadow-black"},null,8,bD),[[Ft,K.front]]),nt(N("input",{type:"text",placeholder:"Card Back","onUpdate:modelValue":ne=>K.back=ne,class:"mr-5 inline-block w-48 rounded-md bg-purple-900 p-2 text-center text-white placeholder-black shadow shadow-black"},null,8,kD),[[Ft,K.back]])]))]),N("label",{for:`typeAnsSetting${he}`,class:"mr-2 select-none text-center text-white"},"Type Answer",8,AD),nt(N("input",{"onUpdate:modelValue":ne=>K.type_answer=ne,type:"checkbox",id:`typeAnsSetting${he}`,class:"mr-5 h-7 w-7 translate-y-1"},null,8,xD),[[fi,K.type_answer]]),N("p",CD,At(K.streak),1),N("p",SD,At(K.next_review.toLocaleDateString("en-GB")),1),N("button",{onClick:ne=>z(K.id,K.front),class:"rounded-md bg-red-900 p-2 text-green-500 shadow shadow-black"}," Delete ",8,RD)]))),256)),i.value.length!==w.value&&!g.value?(Ce(),Me("button",{key:0,onClick:ae[7]||(ae[7]=K=>R()),class:"rounded-md bg-sky-300 p-3 text-xl"}," Load More ")):St("",!0)]),(Ce(),$r(kE,{to:"body"},[E.value!==-1?(Ce(),Me("div",PD,[nt(N("textarea",{"onUpdate:modelValue":ae[8]||(ae[8]=K=>A.value=K),onInput:ae[9]||(ae[9]=K=>X()),ref_key:"edit_field_ref",ref:T,class:"max-h-[90vh] min-h-[125px] w-[90vw] resize-none rounded-xl bg-amber-700 p-3 text-center"},null,544),[[Ft,A.value]]),N("div",DD,[N("button",{onClick:ae[10]||(ae[10]=K=>E.value=-1),class:"mr-10 rounded bg-red-400 px-3 py-2 text-lg text-white"}," Cancel "),N("button",{onClick:ae[11]||(ae[11]=K=>$()),class:"rounded bg-green-600 px-3 py-2 text-lg text-white"}," Save ")])])):St("",!0)]))],64))}},ND={class:"fixed bottom-0 left-0 right-0 top-0 z-50 overflow-auto bg-gray-600 bg-opacity-50"},MD={class:"absolute left-1/2 top-[20%] -translate-x-1/2 text-center"},LD={class:"inline-block rounded-md bg-gradient-to-r from-green-900 to-blue-900 p-3 text-center shadow-lg shadow-black"},VD={class:"mt-3 flex items-center justify-center rounded bg-purple-600 p-1"},UD=N("p",{class:""},"Index:",-1),FD={class:"mt-3 flex items-center justify-center rounded bg-cyan-400 p-3 text-lg shadow shadow-black"},$D=N("p",{class:"mr-1"},"New Cards Per Day:",-1),BD={class:"mt-3 flex items-center justify-center rounded bg-emerald-400 p-3 text-lg shadow shadow-black"},zD=N("label",{for:"large_cards_elem",class:"mr-1 select-none"},"Large Cards: ",-1),jD=N("br",null,null,-1),qD=N("br",null,null,-1),HD=N("br",null,null,-1),WD={__name:"EditDeckMenu",props:["auth","db","deck"],emits:["close","delete"],setup(t,{expose:e,emit:n}){const r=t,i=we(null),s=we(r.deck.name),o=we(r.deck.color),a=we(""),l=we(r.deck.index),u=we(r.deck.new_cards_per_day),d=we(!!r.deck.large_cards);async function m(){s.value!==r.deck.name&&(console.log("Name Updated!"),await Zt(_t(r.db,`users/${r.auth.currentUser.uid}/decks/${r.deck.id}`),{name:s.value})),l.value!==r.deck.index&&(console.log("Index Updated!"),await Zt(_t(r.db,`users/${r.auth.currentUser.uid}/decks/${r.deck.id}`),{index:l.value})),u.value!==r.deck.new_cards_per_day&&(console.log("New Cards Per Day Updated!"),await Zt(_t(r.db,`users/${r.auth.currentUser.uid}/decks/${r.deck.id}`),{new_cards_per_day:u.value})),d.value!==r.deck.large_cards&&(console.log("Large Cards Updated!"),await Zt(_t(r.db,`users/${r.auth.currentUser.uid}/decks/${r.deck.id}`),{large_cards:d.value})),await i.value.updateDeck(),n("close",!0)}function w(){Ye.fire({title:`Are you sure you want to delete ${r.deck.name}?`,text:`If you are type '${r.deck.name}' to delete this deck. This action in irreversible.`,icon:"warning",input:"text",showCancelButton:!0,confirmButtonText:"Delete",confirmButtonColor:"red",reverseButtons:!0,focusConfirm:!1}).then(A=>{console.log(A),A.isConfirmed?A.value===r.deck.name?um(_t(r.db,`users/${r.auth.currentUser.uid}/decks/${r.deck.id}`)).then(()=>{Ye.fire({title:"Deck Deleted!",icon:"success"}),n("delete"),n("close",!0)}):Ye.fire({title:"Not Deleted!",icon:"error"}):A.isDismissed&&Ye.fire({title:"Not Deleted!",icon:"error"})})}function g(){i.value.loadInitialCards(),b()}async function E(){o.value=await gc(s.value)}async function b(){a.value=await gc(r.deck.id)}return e({loadInitialCards:g}),(A,T)=>(Ce(),Me("div",ND,[N("div",MD,[N("div",LD,[nt(N("input",{type:"text","onUpdate:modelValue":T[0]||(T[0]=x=>s.value=x),onInput:T[1]||(T[1]=x=>E()),style:Cs({backgroundColor:o.value}),class:"rounded bg-indigo-400 p-3 text-center text-lg placeholder-white shadow shadow-black",placeholder:"Name"},null,36),[[Ft,s.value]]),N("p",{style:Cs({backgroundColor:a.value}),class:"mt-3 rounded p-1 text-black"}," Deck ID: "+At(t.deck.id),5),N("div",VD,[UD,nt(N("input",{type:"number","onUpdate:modelValue":T[2]||(T[2]=x=>l.value=x),placeholder:"?",class:"w-[4ch] rounded bg-inherit p-1 text-center text-white placeholder-black"},null,512),[[Ft,l.value,void 0,{number:!0}]])]),N("div",null,[N("div",FD,[$D,nt(N("input",{type:"text","onUpdate:modelValue":T[3]||(T[3]=x=>u.value=x),class:"w-[5ch] rounded bg-cyan-500 p-1 text-center placeholder-white",placeholder:"?"},null,512),[[Ft,u.value,void 0,{number:!0}]])]),N("div",BD,[zD,nt(N("input",{type:"checkbox",id:"large_cards_elem","onUpdate:modelValue":T[4]||(T[4]=x=>d.value=x),class:"h-6 w-6"},null,512),[[fi,d.value]])])]),jD,N("button",{onClick:T[5]||(T[5]=x=>w()),class:"mt-3 rounded bg-red-700 p-3 text-xl shadow shadow-black"}," DELETE "),qD,N("button",{onClick:T[6]||(T[6]=x=>A.$emit("close",!1)),class:"mr-4 mt-3 rounded bg-orange-300 p-3 text-xl shadow shadow-black"}," Cancel "),N("button",{onClick:T[7]||(T[7]=x=>m()),class:"mt-3 rounded bg-rose-300 p-3 text-xl shadow shadow-black"}," Update ")]),HD,bn(OD,{ref_key:"cards_list_ref",ref:i,auth:t.auth,db:t.db,deck:t.deck},null,8,["auth","db","deck"])])]))}};function yu(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var hb={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(t,e){(function(n){t.exports=n()})(function(){return function n(r,i,s){function o(u,d){if(!i[u]){if(!r[u]){var m=typeof yu=="function"&&yu;if(!d&&m)return m(u,!0);if(a)return a(u,!0);var w=new Error("Cannot find module '"+u+"'");throw w.code="MODULE_NOT_FOUND",w}var g=i[u]={exports:{}};r[u][0].call(g.exports,function(E){var b=r[u][1][E];return o(b||E)},g,g.exports,n,r,i,s)}return i[u].exports}for(var a=typeof yu=="function"&&yu,l=0;l<s.length;l++)o(s[l]);return o}({1:[function(n,r,i){var s=n("./utils"),o=n("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(l){for(var u,d,m,w,g,E,b,A=[],T=0,x=l.length,R=x,O=s.getTypeOf(l)!=="string";T<l.length;)R=x-T,m=O?(u=l[T++],d=T<x?l[T++]:0,T<x?l[T++]:0):(u=l.charCodeAt(T++),d=T<x?l.charCodeAt(T++):0,T<x?l.charCodeAt(T++):0),w=u>>2,g=(3&u)<<4|d>>4,E=1<R?(15&d)<<2|m>>6:64,b=2<R?63&m:64,A.push(a.charAt(w)+a.charAt(g)+a.charAt(E)+a.charAt(b));return A.join("")},i.decode=function(l){var u,d,m,w,g,E,b=0,A=0,T="data:";if(l.substr(0,T.length)===T)throw new Error("Invalid base64 input, it looks like a data url.");var x,R=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===a.charAt(64)&&R--,l.charAt(l.length-2)===a.charAt(64)&&R--,R%1!=0)throw new Error("Invalid base64 input, bad content length.");for(x=o.uint8array?new Uint8Array(0|R):new Array(0|R);b<l.length;)u=a.indexOf(l.charAt(b++))<<2|(w=a.indexOf(l.charAt(b++)))>>4,d=(15&w)<<4|(g=a.indexOf(l.charAt(b++)))>>2,m=(3&g)<<6|(E=a.indexOf(l.charAt(b++))),x[A++]=u,g!==64&&(x[A++]=d),E!==64&&(x[A++]=m);return x}},{"./support":30,"./utils":32}],2:[function(n,r,i){var s=n("./external"),o=n("./stream/DataWorker"),a=n("./stream/Crc32Probe"),l=n("./stream/DataLengthProbe");function u(d,m,w,g,E){this.compressedSize=d,this.uncompressedSize=m,this.crc32=w,this.compression=g,this.compressedContent=E}u.prototype={getContentWorker:function(){var d=new o(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),m=this;return d.on("end",function(){if(this.streamInfo.data_length!==m.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),d},getCompressedWorker:function(){return new o(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},u.createWorkerFrom=function(d,m,w){return d.pipe(new a).pipe(new l("uncompressedSize")).pipe(m.compressWorker(w)).pipe(new l("compressedSize")).withStreamInfo("compression",m)},r.exports=u},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,r,i){var s=n("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},i.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,r,i){var s=n("./utils"),o=function(){for(var a,l=[],u=0;u<256;u++){a=u;for(var d=0;d<8;d++)a=1&a?3988292384^a>>>1:a>>>1;l[u]=a}return l}();r.exports=function(a,l){return a!==void 0&&a.length?s.getTypeOf(a)!=="string"?function(u,d,m,w){var g=o,E=w+m;u^=-1;for(var b=w;b<E;b++)u=u>>>8^g[255&(u^d[b])];return-1^u}(0|l,a,a.length,0):function(u,d,m,w){var g=o,E=w+m;u^=-1;for(var b=w;b<E;b++)u=u>>>8^g[255&(u^d.charCodeAt(b))];return-1^u}(0|l,a,a.length,0):0}},{"./utils":32}],5:[function(n,r,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(n,r,i){var s=null;s=typeof Promise<"u"?Promise:n("lie"),r.exports={Promise:s}},{lie:37}],7:[function(n,r,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=n("pako"),a=n("./utils"),l=n("./stream/GenericWorker"),u=s?"uint8array":"array";function d(m,w){l.call(this,"FlateWorker/"+m),this._pako=null,this._pakoAction=m,this._pakoOptions=w,this.meta={}}i.magic="\b\0",a.inherits(d,l),d.prototype.processChunk=function(m){this.meta=m.meta,this._pako===null&&this._createPako(),this._pako.push(a.transformTo(u,m.data),!1)},d.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},d.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},d.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var m=this;this._pako.onData=function(w){m.push({data:w,meta:m.meta})}},i.compressWorker=function(m){return new d("Deflate",m)},i.uncompressWorker=function(){return new d("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,r,i){function s(g,E){var b,A="";for(b=0;b<E;b++)A+=String.fromCharCode(255&g),g>>>=8;return A}function o(g,E,b,A,T,x){var R,O,H=g.file,Q=g.compression,z=x!==u.utf8encode,Z=a.transformTo("string",x(H.name)),ee=a.transformTo("string",u.utf8encode(H.name)),oe=H.comment,me=a.transformTo("string",x(oe)),$=a.transformTo("string",u.utf8encode(oe)),X=ee.length!==H.name.length,I=$.length!==oe.length,re="",ae="",K="",he=H.dir,ne=H.date,ce={crc32:0,compressedSize:0,uncompressedSize:0};E&&!b||(ce.crc32=g.crc32,ce.compressedSize=g.compressedSize,ce.uncompressedSize=g.uncompressedSize);var te=0;E&&(te|=8),z||!X&&!I||(te|=2048);var J=0,ke=0;he&&(J|=16),T==="UNIX"?(ke=798,J|=function(q,tt){var ut=q;return q||(ut=tt?16893:33204),(65535&ut)<<16}(H.unixPermissions,he)):(ke=20,J|=function(q){return 63&(q||0)}(H.dosPermissions)),R=ne.getUTCHours(),R<<=6,R|=ne.getUTCMinutes(),R<<=5,R|=ne.getUTCSeconds()/2,O=ne.getUTCFullYear()-1980,O<<=4,O|=ne.getUTCMonth()+1,O<<=5,O|=ne.getUTCDate(),X&&(ae=s(1,1)+s(d(Z),4)+ee,re+="up"+s(ae.length,2)+ae),I&&(K=s(1,1)+s(d(me),4)+$,re+="uc"+s(K.length,2)+K);var ve="";return ve+=`
\0`,ve+=s(te,2),ve+=Q.magic,ve+=s(R,2),ve+=s(O,2),ve+=s(ce.crc32,4),ve+=s(ce.compressedSize,4),ve+=s(ce.uncompressedSize,4),ve+=s(Z.length,2),ve+=s(re.length,2),{fileRecord:m.LOCAL_FILE_HEADER+ve+Z+re,dirRecord:m.CENTRAL_FILE_HEADER+s(ke,2)+ve+s(me.length,2)+"\0\0\0\0"+s(J,4)+s(A,4)+Z+re+me}}var a=n("../utils"),l=n("../stream/GenericWorker"),u=n("../utf8"),d=n("../crc32"),m=n("../signature");function w(g,E,b,A){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=E,this.zipPlatform=b,this.encodeFileName=A,this.streamFiles=g,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(w,l),w.prototype.push=function(g){var E=g.meta.percent||0,b=this.entriesCount,A=this._sources.length;this.accumulate?this.contentBuffer.push(g):(this.bytesWritten+=g.data.length,l.prototype.push.call(this,{data:g.data,meta:{currentFile:this.currentFile,percent:b?(E+100*(b-A-1))/b:100}}))},w.prototype.openedSource=function(g){this.currentSourceOffset=this.bytesWritten,this.currentFile=g.file.name;var E=this.streamFiles&&!g.file.dir;if(E){var b=o(g,E,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:b.fileRecord,meta:{percent:0}})}else this.accumulate=!0},w.prototype.closedSource=function(g){this.accumulate=!1;var E=this.streamFiles&&!g.file.dir,b=o(g,E,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(b.dirRecord),E)this.push({data:function(A){return m.DATA_DESCRIPTOR+s(A.crc32,4)+s(A.compressedSize,4)+s(A.uncompressedSize,4)}(g),meta:{percent:100}});else for(this.push({data:b.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},w.prototype.flush=function(){for(var g=this.bytesWritten,E=0;E<this.dirRecords.length;E++)this.push({data:this.dirRecords[E],meta:{percent:100}});var b=this.bytesWritten-g,A=function(T,x,R,O,H){var Q=a.transformTo("string",H(O));return m.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(T,2)+s(T,2)+s(x,4)+s(R,4)+s(Q.length,2)+Q}(this.dirRecords.length,b,g,this.zipComment,this.encodeFileName);this.push({data:A,meta:{percent:100}})},w.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},w.prototype.registerPrevious=function(g){this._sources.push(g);var E=this;return g.on("data",function(b){E.processChunk(b)}),g.on("end",function(){E.closedSource(E.previous.streamInfo),E._sources.length?E.prepareNextSource():E.end()}),g.on("error",function(b){E.error(b)}),this},w.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},w.prototype.error=function(g){var E=this._sources;if(!l.prototype.error.call(this,g))return!1;for(var b=0;b<E.length;b++)try{E[b].error(g)}catch{}return!0},w.prototype.lock=function(){l.prototype.lock.call(this);for(var g=this._sources,E=0;E<g.length;E++)g[E].lock()},r.exports=w},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,r,i){var s=n("../compressions"),o=n("./ZipFileWorker");i.generateWorker=function(a,l,u){var d=new o(l.streamFiles,u,l.platform,l.encodeFileName),m=0;try{a.forEach(function(w,g){m++;var E=function(x,R){var O=x||R,H=s[O];if(!H)throw new Error(O+" is not a valid compression method !");return H}(g.options.compression,l.compression),b=g.options.compressionOptions||l.compressionOptions||{},A=g.dir,T=g.date;g._compressWorker(E,b).withStreamInfo("file",{name:w,dir:A,date:T,comment:g.comment||"",unixPermissions:g.unixPermissions,dosPermissions:g.dosPermissions}).pipe(d)}),d.entriesCount=m}catch(w){d.error(w)}return d}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,r,i){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new s;for(var a in this)typeof this[a]!="function"&&(o[a]=this[a]);return o}}(s.prototype=n("./object")).loadAsync=n("./load"),s.support=n("./support"),s.defaults=n("./defaults"),s.version="3.10.1",s.loadAsync=function(o,a){return new s().loadAsync(o,a)},s.external=n("./external"),r.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,r,i){var s=n("./utils"),o=n("./external"),a=n("./utf8"),l=n("./zipEntries"),u=n("./stream/Crc32Probe"),d=n("./nodejsUtils");function m(w){return new o.Promise(function(g,E){var b=w.decompressed.getContentWorker().pipe(new u);b.on("error",function(A){E(A)}).on("end",function(){b.streamInfo.crc32!==w.decompressed.crc32?E(new Error("Corrupted zip : CRC32 mismatch")):g()}).resume()})}r.exports=function(w,g){var E=this;return g=s.extend(g||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),d.isNode&&d.isStream(w)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",w,!0,g.optimizedBinaryString,g.base64).then(function(b){var A=new l(g);return A.load(b),A}).then(function(b){var A=[o.Promise.resolve(b)],T=b.files;if(g.checkCRC32)for(var x=0;x<T.length;x++)A.push(m(T[x]));return o.Promise.all(A)}).then(function(b){for(var A=b.shift(),T=A.files,x=0;x<T.length;x++){var R=T[x],O=R.fileNameStr,H=s.resolve(R.fileNameStr);E.file(H,R.decompressed,{binary:!0,optimizedBinaryString:!0,date:R.date,dir:R.dir,comment:R.fileCommentStr.length?R.fileCommentStr:null,unixPermissions:R.unixPermissions,dosPermissions:R.dosPermissions,createFolders:g.createFolders}),R.dir||(E.file(H).unsafeOriginalName=O)}return A.zipComment.length&&(E.comment=A.zipComment),E})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,r,i){var s=n("../utils"),o=n("../stream/GenericWorker");function a(l,u){o.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(u)}s.inherits(a,o),a.prototype._bindStream=function(l){var u=this;(this._stream=l).pause(),l.on("data",function(d){u.push({data:d,meta:{percent:0}})}).on("error",function(d){u.isPaused?this.generatedError=d:u.error(d)}).on("end",function(){u.isPaused?u._upstreamEnded=!0:u.end()})},a.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,r,i){var s=n("readable-stream").Readable;function o(a,l,u){s.call(this,l),this._helper=a;var d=this;a.on("data",function(m,w){d.push(m)||d._helper.pause(),u&&u(w)}).on("error",function(m){d.emit("error",m)}).on("end",function(){d.push(null)})}n("../utils").inherits(o,s),o.prototype._read=function(){this._helper.resume()},r.exports=o},{"../utils":32,"readable-stream":16}],14:[function(n,r,i){r.exports={isNode:typeof Buffer<"u",newBufferFrom:function(s,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(s,o);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new Buffer(s,o)},allocBuffer:function(s){if(Buffer.alloc)return Buffer.alloc(s);var o=new Buffer(s);return o.fill(0),o},isBuffer:function(s){return Buffer.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(n,r,i){function s(H,Q,z){var Z,ee=a.getTypeOf(Q),oe=a.extend(z||{},d);oe.date=oe.date||new Date,oe.compression!==null&&(oe.compression=oe.compression.toUpperCase()),typeof oe.unixPermissions=="string"&&(oe.unixPermissions=parseInt(oe.unixPermissions,8)),oe.unixPermissions&&16384&oe.unixPermissions&&(oe.dir=!0),oe.dosPermissions&&16&oe.dosPermissions&&(oe.dir=!0),oe.dir&&(H=T(H)),oe.createFolders&&(Z=A(H))&&x.call(this,Z,!0);var me=ee==="string"&&oe.binary===!1&&oe.base64===!1;z&&z.binary!==void 0||(oe.binary=!me),(Q instanceof m&&Q.uncompressedSize===0||oe.dir||!Q||Q.length===0)&&(oe.base64=!1,oe.binary=!0,Q="",oe.compression="STORE",ee="string");var $=null;$=Q instanceof m||Q instanceof l?Q:E.isNode&&E.isStream(Q)?new b(H,Q):a.prepareContent(H,Q,oe.binary,oe.optimizedBinaryString,oe.base64);var X=new w(H,$,oe);this.files[H]=X}var o=n("./utf8"),a=n("./utils"),l=n("./stream/GenericWorker"),u=n("./stream/StreamHelper"),d=n("./defaults"),m=n("./compressedObject"),w=n("./zipObject"),g=n("./generate"),E=n("./nodejsUtils"),b=n("./nodejs/NodejsStreamInputAdapter"),A=function(H){H.slice(-1)==="/"&&(H=H.substring(0,H.length-1));var Q=H.lastIndexOf("/");return 0<Q?H.substring(0,Q):""},T=function(H){return H.slice(-1)!=="/"&&(H+="/"),H},x=function(H,Q){return Q=Q!==void 0?Q:d.createFolders,H=T(H),this.files[H]||s.call(this,H,null,{dir:!0,createFolders:Q}),this.files[H]};function R(H){return Object.prototype.toString.call(H)==="[object RegExp]"}var O={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(H){var Q,z,Z;for(Q in this.files)Z=this.files[Q],(z=Q.slice(this.root.length,Q.length))&&Q.slice(0,this.root.length)===this.root&&H(z,Z)},filter:function(H){var Q=[];return this.forEach(function(z,Z){H(z,Z)&&Q.push(Z)}),Q},file:function(H,Q,z){if(arguments.length!==1)return H=this.root+H,s.call(this,H,Q,z),this;if(R(H)){var Z=H;return this.filter(function(oe,me){return!me.dir&&Z.test(oe)})}var ee=this.files[this.root+H];return ee&&!ee.dir?ee:null},folder:function(H){if(!H)return this;if(R(H))return this.filter(function(ee,oe){return oe.dir&&H.test(ee)});var Q=this.root+H,z=x.call(this,Q),Z=this.clone();return Z.root=z.name,Z},remove:function(H){H=this.root+H;var Q=this.files[H];if(Q||(H.slice(-1)!=="/"&&(H+="/"),Q=this.files[H]),Q&&!Q.dir)delete this.files[H];else for(var z=this.filter(function(ee,oe){return oe.name.slice(0,H.length)===H}),Z=0;Z<z.length;Z++)delete this.files[z[Z].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(H){var Q,z={};try{if((z=a.extend(H||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=z.type.toLowerCase(),z.compression=z.compression.toUpperCase(),z.type==="binarystring"&&(z.type="string"),!z.type)throw new Error("No output type specified.");a.checkSupport(z.type),z.platform!=="darwin"&&z.platform!=="freebsd"&&z.platform!=="linux"&&z.platform!=="sunos"||(z.platform="UNIX"),z.platform==="win32"&&(z.platform="DOS");var Z=z.comment||this.comment||"";Q=g.generateWorker(this,z,Z)}catch(ee){(Q=new l("error")).error(ee)}return new u(Q,z.type||"string",z.mimeType)},generateAsync:function(H,Q){return this.generateInternalStream(H).accumulate(Q)},generateNodeStream:function(H,Q){return(H=H||{}).type||(H.type="nodebuffer"),this.generateInternalStream(H).toNodejsStream(Q)}};r.exports=O},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,r,i){r.exports=n("stream")},{stream:void 0}],17:[function(n,r,i){var s=n("./DataReader");function o(a){s.call(this,a);for(var l=0;l<this.data.length;l++)a[l]=255&a[l]}n("../utils").inherits(o,s),o.prototype.byteAt=function(a){return this.data[this.zero+a]},o.prototype.lastIndexOfSignature=function(a){for(var l=a.charCodeAt(0),u=a.charCodeAt(1),d=a.charCodeAt(2),m=a.charCodeAt(3),w=this.length-4;0<=w;--w)if(this.data[w]===l&&this.data[w+1]===u&&this.data[w+2]===d&&this.data[w+3]===m)return w-this.zero;return-1},o.prototype.readAndCheckSignature=function(a){var l=a.charCodeAt(0),u=a.charCodeAt(1),d=a.charCodeAt(2),m=a.charCodeAt(3),w=this.readData(4);return l===w[0]&&u===w[1]&&d===w[2]&&m===w[3]},o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./DataReader":18}],18:[function(n,r,i){var s=n("../utils");function o(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var l,u=0;for(this.checkOffset(a),l=this.index+a-1;l>=this.index;l--)u=(u<<8)+this.byteAt(l);return this.index+=a,u},readString:function(a){return s.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC(1980+(a>>25&127),(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1))}},r.exports=o},{"../utils":32}],19:[function(n,r,i){var s=n("./Uint8ArrayReader");function o(a){s.call(this,a)}n("../utils").inherits(o,s),o.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,r,i){var s=n("./DataReader");function o(a){s.call(this,a)}n("../utils").inherits(o,s),o.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)},o.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero},o.prototype.readAndCheckSignature=function(a){return a===this.readData(4)},o.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./DataReader":18}],21:[function(n,r,i){var s=n("./ArrayReader");function o(a){s.call(this,a)}n("../utils").inherits(o,s),o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(n,r,i){var s=n("../utils"),o=n("../support"),a=n("./ArrayReader"),l=n("./StringReader"),u=n("./NodeBufferReader"),d=n("./Uint8ArrayReader");r.exports=function(m){var w=s.getTypeOf(m);return s.checkSupport(w),w!=="string"||o.uint8array?w==="nodebuffer"?new u(m):o.uint8array?new d(s.transformTo("uint8array",m)):new a(s.transformTo("array",m)):new l(m)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,r,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,r,i){var s=n("./GenericWorker"),o=n("../utils");function a(l){s.call(this,"ConvertWorker to "+l),this.destType=l}o.inherits(a,s),a.prototype.processChunk=function(l){this.push({data:o.transformTo(this.destType,l.data),meta:l.meta})},r.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(n,r,i){var s=n("./GenericWorker"),o=n("../crc32");function a(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(a,s),a.prototype.processChunk=function(l){this.streamInfo.crc32=o(l.data,this.streamInfo.crc32||0),this.push(l)},r.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,r,i){var s=n("../utils"),o=n("./GenericWorker");function a(l){o.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}s.inherits(a,o),a.prototype.processChunk=function(l){if(l){var u=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=u+l.data.length}o.prototype.processChunk.call(this,l)},r.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(n,r,i){var s=n("../utils"),o=n("./GenericWorker");function a(l){o.call(this,"DataWorker");var u=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(d){u.dataIsReady=!0,u.data=d,u.max=d&&d.length||0,u.type=s.getTypeOf(d),u.isPaused||u._tickAndRepeat()},function(d){u.error(d)})}s.inherits(a,o),a.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,u=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,u);break;case"uint8array":l=this.data.subarray(this.index,u);break;case"array":case"nodebuffer":l=this.data.slice(this.index,u)}return this.index=u,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(n,r,i){function s(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,a){return this._listeners[o].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,a){if(this._listeners[o])for(var l=0;l<this._listeners[o].length;l++)this._listeners[o][l].call(this,a)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var a=this;return o.on("data",function(l){a.processChunk(l)}),o.on("end",function(){a.end()}),o.on("error",function(l){a.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,a){return this.extraStreamInfo[o]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},r.exports=s},{}],29:[function(n,r,i){var s=n("../utils"),o=n("./ConvertWorker"),a=n("./GenericWorker"),l=n("../base64"),u=n("../support"),d=n("../external"),m=null;if(u.nodestream)try{m=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function w(E,b){return new d.Promise(function(A,T){var x=[],R=E._internalType,O=E._outputType,H=E._mimeType;E.on("data",function(Q,z){x.push(Q),b&&b(z)}).on("error",function(Q){x=[],T(Q)}).on("end",function(){try{var Q=function(z,Z,ee){switch(z){case"blob":return s.newBlob(s.transformTo("arraybuffer",Z),ee);case"base64":return l.encode(Z);default:return s.transformTo(z,Z)}}(O,function(z,Z){var ee,oe=0,me=null,$=0;for(ee=0;ee<Z.length;ee++)$+=Z[ee].length;switch(z){case"string":return Z.join("");case"array":return Array.prototype.concat.apply([],Z);case"uint8array":for(me=new Uint8Array($),ee=0;ee<Z.length;ee++)me.set(Z[ee],oe),oe+=Z[ee].length;return me;case"nodebuffer":return Buffer.concat(Z);default:throw new Error("concat : unsupported type '"+z+"'")}}(R,x),H);A(Q)}catch(z){T(z)}x=[]}).resume()})}function g(E,b,A){var T=b;switch(b){case"blob":case"arraybuffer":T="uint8array";break;case"base64":T="string"}try{this._internalType=T,this._outputType=b,this._mimeType=A,s.checkSupport(T),this._worker=E.pipe(new o(T)),E.lock()}catch(x){this._worker=new a("error"),this._worker.error(x)}}g.prototype={accumulate:function(E){return w(this,E)},on:function(E,b){var A=this;return E==="data"?this._worker.on(E,function(T){b.call(A,T.data,T.meta)}):this._worker.on(E,function(){s.delay(b,arguments,A)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(E){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new m(this,{objectMode:this._outputType!=="nodebuffer"},E)}},r.exports=g},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,r,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof Buffer<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var s=new ArrayBuffer(0);try{i.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(s),i.blob=o.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!n("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(n,r,i){for(var s=n("./utils"),o=n("./support"),a=n("./nodejsUtils"),l=n("./stream/GenericWorker"),u=new Array(256),d=0;d<256;d++)u[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;u[254]=u[254]=1;function m(){l.call(this,"utf-8 decode"),this.leftOver=null}function w(){l.call(this,"utf-8 encode")}i.utf8encode=function(g){return o.nodebuffer?a.newBufferFrom(g,"utf-8"):function(E){var b,A,T,x,R,O=E.length,H=0;for(x=0;x<O;x++)(64512&(A=E.charCodeAt(x)))==55296&&x+1<O&&(64512&(T=E.charCodeAt(x+1)))==56320&&(A=65536+(A-55296<<10)+(T-56320),x++),H+=A<128?1:A<2048?2:A<65536?3:4;for(b=o.uint8array?new Uint8Array(H):new Array(H),x=R=0;R<H;x++)(64512&(A=E.charCodeAt(x)))==55296&&x+1<O&&(64512&(T=E.charCodeAt(x+1)))==56320&&(A=65536+(A-55296<<10)+(T-56320),x++),A<128?b[R++]=A:(A<2048?b[R++]=192|A>>>6:(A<65536?b[R++]=224|A>>>12:(b[R++]=240|A>>>18,b[R++]=128|A>>>12&63),b[R++]=128|A>>>6&63),b[R++]=128|63&A);return b}(g)},i.utf8decode=function(g){return o.nodebuffer?s.transformTo("nodebuffer",g).toString("utf-8"):function(E){var b,A,T,x,R=E.length,O=new Array(2*R);for(b=A=0;b<R;)if((T=E[b++])<128)O[A++]=T;else if(4<(x=u[T]))O[A++]=65533,b+=x-1;else{for(T&=x===2?31:x===3?15:7;1<x&&b<R;)T=T<<6|63&E[b++],x--;1<x?O[A++]=65533:T<65536?O[A++]=T:(T-=65536,O[A++]=55296|T>>10&1023,O[A++]=56320|1023&T)}return O.length!==A&&(O.subarray?O=O.subarray(0,A):O.length=A),s.applyFromCharCode(O)}(g=s.transformTo(o.uint8array?"uint8array":"array",g))},s.inherits(m,l),m.prototype.processChunk=function(g){var E=s.transformTo(o.uint8array?"uint8array":"array",g.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var b=E;(E=new Uint8Array(b.length+this.leftOver.length)).set(this.leftOver,0),E.set(b,this.leftOver.length)}else E=this.leftOver.concat(E);this.leftOver=null}var A=function(x,R){var O;for((R=R||x.length)>x.length&&(R=x.length),O=R-1;0<=O&&(192&x[O])==128;)O--;return O<0||O===0?R:O+u[x[O]]>R?O:R}(E),T=E;A!==E.length&&(o.uint8array?(T=E.subarray(0,A),this.leftOver=E.subarray(A,E.length)):(T=E.slice(0,A),this.leftOver=E.slice(A,E.length))),this.push({data:i.utf8decode(T),meta:g.meta})},m.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=m,s.inherits(w,l),w.prototype.processChunk=function(g){this.push({data:i.utf8encode(g.data),meta:g.meta})},i.Utf8EncodeWorker=w},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,r,i){var s=n("./support"),o=n("./base64"),a=n("./nodejsUtils"),l=n("./external");function u(b){return b}function d(b,A){for(var T=0;T<b.length;++T)A[T]=255&b.charCodeAt(T);return A}n("setimmediate"),i.newBlob=function(b,A){i.checkSupport("blob");try{return new Blob([b],{type:A})}catch{try{var T=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return T.append(b),T.getBlob(A)}catch{throw new Error("Bug : can't construct the Blob.")}}};var m={stringifyByChunk:function(b,A,T){var x=[],R=0,O=b.length;if(O<=T)return String.fromCharCode.apply(null,b);for(;R<O;)A==="array"||A==="nodebuffer"?x.push(String.fromCharCode.apply(null,b.slice(R,Math.min(R+T,O)))):x.push(String.fromCharCode.apply(null,b.subarray(R,Math.min(R+T,O)))),R+=T;return x.join("")},stringifyByChar:function(b){for(var A="",T=0;T<b.length;T++)A+=String.fromCharCode(b[T]);return A},applyCanBeUsed:{uint8array:function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,a.allocBuffer(1)).length===1}catch{return!1}}()}};function w(b){var A=65536,T=i.getTypeOf(b),x=!0;if(T==="uint8array"?x=m.applyCanBeUsed.uint8array:T==="nodebuffer"&&(x=m.applyCanBeUsed.nodebuffer),x)for(;1<A;)try{return m.stringifyByChunk(b,T,A)}catch{A=Math.floor(A/2)}return m.stringifyByChar(b)}function g(b,A){for(var T=0;T<b.length;T++)A[T]=b[T];return A}i.applyFromCharCode=w;var E={};E.string={string:u,array:function(b){return d(b,new Array(b.length))},arraybuffer:function(b){return E.string.uint8array(b).buffer},uint8array:function(b){return d(b,new Uint8Array(b.length))},nodebuffer:function(b){return d(b,a.allocBuffer(b.length))}},E.array={string:w,array:u,arraybuffer:function(b){return new Uint8Array(b).buffer},uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return a.newBufferFrom(b)}},E.arraybuffer={string:function(b){return w(new Uint8Array(b))},array:function(b){return g(new Uint8Array(b),new Array(b.byteLength))},arraybuffer:u,uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return a.newBufferFrom(new Uint8Array(b))}},E.uint8array={string:w,array:function(b){return g(b,new Array(b.length))},arraybuffer:function(b){return b.buffer},uint8array:u,nodebuffer:function(b){return a.newBufferFrom(b)}},E.nodebuffer={string:w,array:function(b){return g(b,new Array(b.length))},arraybuffer:function(b){return E.nodebuffer.uint8array(b).buffer},uint8array:function(b){return g(b,new Uint8Array(b.length))},nodebuffer:u},i.transformTo=function(b,A){if(A=A||"",!b)return A;i.checkSupport(b);var T=i.getTypeOf(A);return E[T][b](A)},i.resolve=function(b){for(var A=b.split("/"),T=[],x=0;x<A.length;x++){var R=A[x];R==="."||R===""&&x!==0&&x!==A.length-1||(R===".."?T.pop():T.push(R))}return T.join("/")},i.getTypeOf=function(b){return typeof b=="string"?"string":Object.prototype.toString.call(b)==="[object Array]"?"array":s.nodebuffer&&a.isBuffer(b)?"nodebuffer":s.uint8array&&b instanceof Uint8Array?"uint8array":s.arraybuffer&&b instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(b){if(!s[b.toLowerCase()])throw new Error(b+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(b){var A,T,x="";for(T=0;T<(b||"").length;T++)x+="\\x"+((A=b.charCodeAt(T))<16?"0":"")+A.toString(16).toUpperCase();return x},i.delay=function(b,A,T){setImmediate(function(){b.apply(T||null,A||[])})},i.inherits=function(b,A){function T(){}T.prototype=A.prototype,b.prototype=new T},i.extend=function(){var b,A,T={};for(b=0;b<arguments.length;b++)for(A in arguments[b])Object.prototype.hasOwnProperty.call(arguments[b],A)&&T[A]===void 0&&(T[A]=arguments[b][A]);return T},i.prepareContent=function(b,A,T,x,R){return l.Promise.resolve(A).then(function(O){return s.blob&&(O instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(O))!==-1)&&typeof FileReader<"u"?new l.Promise(function(H,Q){var z=new FileReader;z.onload=function(Z){H(Z.target.result)},z.onerror=function(Z){Q(Z.target.error)},z.readAsArrayBuffer(O)}):O}).then(function(O){var H=i.getTypeOf(O);return H?(H==="arraybuffer"?O=i.transformTo("uint8array",O):H==="string"&&(R?O=o.decode(O):T&&x!==!0&&(O=function(Q){return d(Q,s.uint8array?new Uint8Array(Q.length):new Array(Q.length))}(O))),O):l.Promise.reject(new Error("Can't read the data of '"+b+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,r,i){var s=n("./reader/readerFor"),o=n("./utils"),a=n("./signature"),l=n("./zipEntry"),u=n("./support");function d(m){this.files=[],this.loadOptions=m}d.prototype={checkSignature:function(m){if(!this.reader.readAndCheckSignature(m)){this.reader.index-=4;var w=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(w)+", expected "+o.pretty(m)+")")}},isSignature:function(m,w){var g=this.reader.index;this.reader.setIndex(m);var E=this.reader.readString(4)===w;return this.reader.setIndex(g),E},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var m=this.reader.readData(this.zipCommentLength),w=u.uint8array?"uint8array":"array",g=o.transformTo(w,m);this.zipComment=this.loadOptions.decodeFileName(g)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var m,w,g,E=this.zip64EndOfCentralSize-44;0<E;)m=this.reader.readInt(2),w=this.reader.readInt(4),g=this.reader.readData(w),this.zip64ExtensibleData[m]={id:m,length:w,value:g}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var m,w;for(m=0;m<this.files.length;m++)w=this.files[m],this.reader.setIndex(w.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),w.readLocalPart(this.reader),w.handleUTF8(),w.processAttributes()},readCentralDir:function(){var m;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(m=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(m);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var m=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(m<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(m);var w=m;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(m=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(m),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var g=this.centralDirOffset+this.centralDirSize;this.zip64&&(g+=20,g+=12+this.zip64EndOfCentralSize);var E=w-g;if(0<E)this.isSignature(w,a.CENTRAL_FILE_HEADER)||(this.reader.zero=E);else if(E<0)throw new Error("Corrupted zip: missing "+Math.abs(E)+" bytes.")},prepareReader:function(m){this.reader=s(m)},load:function(m){this.prepareReader(m),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=d},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,r,i){var s=n("./reader/readerFor"),o=n("./utils"),a=n("./compressedObject"),l=n("./crc32"),u=n("./utf8"),d=n("./compressions"),m=n("./support");function w(g,E){this.options=g,this.loadOptions=E}w.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(g){var E,b;if(g.skip(22),this.fileNameLength=g.readInt(2),b=g.readInt(2),this.fileName=g.readData(this.fileNameLength),g.skip(b),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((E=function(A){for(var T in d)if(Object.prototype.hasOwnProperty.call(d,T)&&d[T].magic===A)return d[T];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,E,g.readData(this.compressedSize))},readCentralPart:function(g){this.versionMadeBy=g.readInt(2),g.skip(2),this.bitFlag=g.readInt(2),this.compressionMethod=g.readString(2),this.date=g.readDate(),this.crc32=g.readInt(4),this.compressedSize=g.readInt(4),this.uncompressedSize=g.readInt(4);var E=g.readInt(2);if(this.extraFieldsLength=g.readInt(2),this.fileCommentLength=g.readInt(2),this.diskNumberStart=g.readInt(2),this.internalFileAttributes=g.readInt(2),this.externalFileAttributes=g.readInt(4),this.localHeaderOffset=g.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");g.skip(E),this.readExtraFields(g),this.parseZIP64ExtraField(g),this.fileComment=g.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var g=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),g==0&&(this.dosPermissions=63&this.externalFileAttributes),g==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var g=s(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=g.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=g.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=g.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=g.readInt(4))}},readExtraFields:function(g){var E,b,A,T=g.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});g.index+4<T;)E=g.readInt(2),b=g.readInt(2),A=g.readData(b),this.extraFields[E]={id:E,length:b,value:A};g.setIndex(T)},handleUTF8:function(){var g=m.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=u.utf8decode(this.fileName),this.fileCommentStr=u.utf8decode(this.fileComment);else{var E=this.findExtraFieldUnicodePath();if(E!==null)this.fileNameStr=E;else{var b=o.transformTo(g,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(b)}var A=this.findExtraFieldUnicodeComment();if(A!==null)this.fileCommentStr=A;else{var T=o.transformTo(g,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(T)}}},findExtraFieldUnicodePath:function(){var g=this.extraFields[28789];if(g){var E=s(g.value);return E.readInt(1)!==1||l(this.fileName)!==E.readInt(4)?null:u.utf8decode(E.readData(g.length-5))}return null},findExtraFieldUnicodeComment:function(){var g=this.extraFields[25461];if(g){var E=s(g.value);return E.readInt(1)!==1||l(this.fileComment)!==E.readInt(4)?null:u.utf8decode(E.readData(g.length-5))}return null}},r.exports=w},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,r,i){function s(E,b,A){this.name=E,this.dir=A.dir,this.date=A.date,this.comment=A.comment,this.unixPermissions=A.unixPermissions,this.dosPermissions=A.dosPermissions,this._data=b,this._dataBinary=A.binary,this.options={compression:A.compression,compressionOptions:A.compressionOptions}}var o=n("./stream/StreamHelper"),a=n("./stream/DataWorker"),l=n("./utf8"),u=n("./compressedObject"),d=n("./stream/GenericWorker");s.prototype={internalStream:function(E){var b=null,A="string";try{if(!E)throw new Error("No output type specified.");var T=(A=E.toLowerCase())==="string"||A==="text";A!=="binarystring"&&A!=="text"||(A="string"),b=this._decompressWorker();var x=!this._dataBinary;x&&!T&&(b=b.pipe(new l.Utf8EncodeWorker)),!x&&T&&(b=b.pipe(new l.Utf8DecodeWorker))}catch(R){(b=new d("error")).error(R)}return new o(b,A,"")},async:function(E,b){return this.internalStream(E).accumulate(b)},nodeStream:function(E,b){return this.internalStream(E||"nodebuffer").toNodejsStream(b)},_compressWorker:function(E,b){if(this._data instanceof u&&this._data.compression.magic===E.magic)return this._data.getCompressedWorker();var A=this._decompressWorker();return this._dataBinary||(A=A.pipe(new l.Utf8EncodeWorker)),u.createWorkerFrom(A,E,b)},_decompressWorker:function(){return this._data instanceof u?this._data.getContentWorker():this._data instanceof d?this._data:new a(this._data)}};for(var m=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],w=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},g=0;g<m.length;g++)s.prototype[m[g]]=w;r.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,r,i){(function(s){var o,a,l=s.MutationObserver||s.WebKitMutationObserver;if(l){var u=0,d=new l(E),m=s.document.createTextNode("");d.observe(m,{characterData:!0}),o=function(){m.data=u=++u%2}}else if(s.setImmediate||s.MessageChannel===void 0)o="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var b=s.document.createElement("script");b.onreadystatechange=function(){E(),b.onreadystatechange=null,b.parentNode.removeChild(b),b=null},s.document.documentElement.appendChild(b)}:function(){setTimeout(E,0)};else{var w=new s.MessageChannel;w.port1.onmessage=E,o=function(){w.port2.postMessage(0)}}var g=[];function E(){var b,A;a=!0;for(var T=g.length;T;){for(A=g,g=[],b=-1;++b<T;)A[b]();T=g.length}a=!1}r.exports=function(b){g.push(b)!==1||a||o()}}).call(this,typeof hr<"u"?hr:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,r,i){var s=n("immediate");function o(){}var a={},l=["REJECTED"],u=["FULFILLED"],d=["PENDING"];function m(T){if(typeof T!="function")throw new TypeError("resolver must be a function");this.state=d,this.queue=[],this.outcome=void 0,T!==o&&b(this,T)}function w(T,x,R){this.promise=T,typeof x=="function"&&(this.onFulfilled=x,this.callFulfilled=this.otherCallFulfilled),typeof R=="function"&&(this.onRejected=R,this.callRejected=this.otherCallRejected)}function g(T,x,R){s(function(){var O;try{O=x(R)}catch(H){return a.reject(T,H)}O===T?a.reject(T,new TypeError("Cannot resolve promise with itself")):a.resolve(T,O)})}function E(T){var x=T&&T.then;if(T&&(typeof T=="object"||typeof T=="function")&&typeof x=="function")return function(){x.apply(T,arguments)}}function b(T,x){var R=!1;function O(z){R||(R=!0,a.reject(T,z))}function H(z){R||(R=!0,a.resolve(T,z))}var Q=A(function(){x(H,O)});Q.status==="error"&&O(Q.value)}function A(T,x){var R={};try{R.value=T(x),R.status="success"}catch(O){R.status="error",R.value=O}return R}(r.exports=m).prototype.finally=function(T){if(typeof T!="function")return this;var x=this.constructor;return this.then(function(R){return x.resolve(T()).then(function(){return R})},function(R){return x.resolve(T()).then(function(){throw R})})},m.prototype.catch=function(T){return this.then(null,T)},m.prototype.then=function(T,x){if(typeof T!="function"&&this.state===u||typeof x!="function"&&this.state===l)return this;var R=new this.constructor(o);return this.state!==d?g(R,this.state===u?T:x,this.outcome):this.queue.push(new w(R,T,x)),R},w.prototype.callFulfilled=function(T){a.resolve(this.promise,T)},w.prototype.otherCallFulfilled=function(T){g(this.promise,this.onFulfilled,T)},w.prototype.callRejected=function(T){a.reject(this.promise,T)},w.prototype.otherCallRejected=function(T){g(this.promise,this.onRejected,T)},a.resolve=function(T,x){var R=A(E,x);if(R.status==="error")return a.reject(T,R.value);var O=R.value;if(O)b(T,O);else{T.state=u,T.outcome=x;for(var H=-1,Q=T.queue.length;++H<Q;)T.queue[H].callFulfilled(x)}return T},a.reject=function(T,x){T.state=l,T.outcome=x;for(var R=-1,O=T.queue.length;++R<O;)T.queue[R].callRejected(x);return T},m.resolve=function(T){return T instanceof this?T:a.resolve(new this(o),T)},m.reject=function(T){var x=new this(o);return a.reject(x,T)},m.all=function(T){var x=this;if(Object.prototype.toString.call(T)!=="[object Array]")return this.reject(new TypeError("must be an array"));var R=T.length,O=!1;if(!R)return this.resolve([]);for(var H=new Array(R),Q=0,z=-1,Z=new this(o);++z<R;)ee(T[z],z);return Z;function ee(oe,me){x.resolve(oe).then(function($){H[me]=$,++Q!==R||O||(O=!0,a.resolve(Z,H))},function($){O||(O=!0,a.reject(Z,$))})}},m.race=function(T){var x=this;if(Object.prototype.toString.call(T)!=="[object Array]")return this.reject(new TypeError("must be an array"));var R=T.length,O=!1;if(!R)return this.resolve([]);for(var H=-1,Q=new this(o);++H<R;)z=T[H],x.resolve(z).then(function(Z){O||(O=!0,a.resolve(Q,Z))},function(Z){O||(O=!0,a.reject(Q,Z))});var z;return Q}},{immediate:36}],38:[function(n,r,i){var s={};(0,n("./lib/utils/common").assign)(s,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),r.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,r,i){var s=n("./zlib/deflate"),o=n("./utils/common"),a=n("./utils/strings"),l=n("./zlib/messages"),u=n("./zlib/zstream"),d=Object.prototype.toString,m=0,w=-1,g=0,E=8;function b(T){if(!(this instanceof b))return new b(T);this.options=o.assign({level:w,method:E,chunkSize:16384,windowBits:15,memLevel:8,strategy:g,to:""},T||{});var x=this.options;x.raw&&0<x.windowBits?x.windowBits=-x.windowBits:x.gzip&&0<x.windowBits&&x.windowBits<16&&(x.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var R=s.deflateInit2(this.strm,x.level,x.method,x.windowBits,x.memLevel,x.strategy);if(R!==m)throw new Error(l[R]);if(x.header&&s.deflateSetHeader(this.strm,x.header),x.dictionary){var O;if(O=typeof x.dictionary=="string"?a.string2buf(x.dictionary):d.call(x.dictionary)==="[object ArrayBuffer]"?new Uint8Array(x.dictionary):x.dictionary,(R=s.deflateSetDictionary(this.strm,O))!==m)throw new Error(l[R]);this._dict_set=!0}}function A(T,x){var R=new b(x);if(R.push(T,!0),R.err)throw R.msg||l[R.err];return R.result}b.prototype.push=function(T,x){var R,O,H=this.strm,Q=this.options.chunkSize;if(this.ended)return!1;O=x===~~x?x:x===!0?4:0,typeof T=="string"?H.input=a.string2buf(T):d.call(T)==="[object ArrayBuffer]"?H.input=new Uint8Array(T):H.input=T,H.next_in=0,H.avail_in=H.input.length;do{if(H.avail_out===0&&(H.output=new o.Buf8(Q),H.next_out=0,H.avail_out=Q),(R=s.deflate(H,O))!==1&&R!==m)return this.onEnd(R),!(this.ended=!0);H.avail_out!==0&&(H.avail_in!==0||O!==4&&O!==2)||(this.options.to==="string"?this.onData(a.buf2binstring(o.shrinkBuf(H.output,H.next_out))):this.onData(o.shrinkBuf(H.output,H.next_out)))}while((0<H.avail_in||H.avail_out===0)&&R!==1);return O===4?(R=s.deflateEnd(this.strm),this.onEnd(R),this.ended=!0,R===m):O!==2||(this.onEnd(m),!(H.avail_out=0))},b.prototype.onData=function(T){this.chunks.push(T)},b.prototype.onEnd=function(T){T===m&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=T,this.msg=this.strm.msg},i.Deflate=b,i.deflate=A,i.deflateRaw=function(T,x){return(x=x||{}).raw=!0,A(T,x)},i.gzip=function(T,x){return(x=x||{}).gzip=!0,A(T,x)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,r,i){var s=n("./zlib/inflate"),o=n("./utils/common"),a=n("./utils/strings"),l=n("./zlib/constants"),u=n("./zlib/messages"),d=n("./zlib/zstream"),m=n("./zlib/gzheader"),w=Object.prototype.toString;function g(b){if(!(this instanceof g))return new g(b);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},b||{});var A=this.options;A.raw&&0<=A.windowBits&&A.windowBits<16&&(A.windowBits=-A.windowBits,A.windowBits===0&&(A.windowBits=-15)),!(0<=A.windowBits&&A.windowBits<16)||b&&b.windowBits||(A.windowBits+=32),15<A.windowBits&&A.windowBits<48&&!(15&A.windowBits)&&(A.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var T=s.inflateInit2(this.strm,A.windowBits);if(T!==l.Z_OK)throw new Error(u[T]);this.header=new m,s.inflateGetHeader(this.strm,this.header)}function E(b,A){var T=new g(A);if(T.push(b,!0),T.err)throw T.msg||u[T.err];return T.result}g.prototype.push=function(b,A){var T,x,R,O,H,Q,z=this.strm,Z=this.options.chunkSize,ee=this.options.dictionary,oe=!1;if(this.ended)return!1;x=A===~~A?A:A===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof b=="string"?z.input=a.binstring2buf(b):w.call(b)==="[object ArrayBuffer]"?z.input=new Uint8Array(b):z.input=b,z.next_in=0,z.avail_in=z.input.length;do{if(z.avail_out===0&&(z.output=new o.Buf8(Z),z.next_out=0,z.avail_out=Z),(T=s.inflate(z,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&ee&&(Q=typeof ee=="string"?a.string2buf(ee):w.call(ee)==="[object ArrayBuffer]"?new Uint8Array(ee):ee,T=s.inflateSetDictionary(this.strm,Q)),T===l.Z_BUF_ERROR&&oe===!0&&(T=l.Z_OK,oe=!1),T!==l.Z_STREAM_END&&T!==l.Z_OK)return this.onEnd(T),!(this.ended=!0);z.next_out&&(z.avail_out!==0&&T!==l.Z_STREAM_END&&(z.avail_in!==0||x!==l.Z_FINISH&&x!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(R=a.utf8border(z.output,z.next_out),O=z.next_out-R,H=a.buf2string(z.output,R),z.next_out=O,z.avail_out=Z-O,O&&o.arraySet(z.output,z.output,R,O,0),this.onData(H)):this.onData(o.shrinkBuf(z.output,z.next_out)))),z.avail_in===0&&z.avail_out===0&&(oe=!0)}while((0<z.avail_in||z.avail_out===0)&&T!==l.Z_STREAM_END);return T===l.Z_STREAM_END&&(x=l.Z_FINISH),x===l.Z_FINISH?(T=s.inflateEnd(this.strm),this.onEnd(T),this.ended=!0,T===l.Z_OK):x!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(z.avail_out=0))},g.prototype.onData=function(b){this.chunks.push(b)},g.prototype.onEnd=function(b){b===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=b,this.msg=this.strm.msg},i.Inflate=g,i.inflate=E,i.inflateRaw=function(b,A){return(A=A||{}).raw=!0,E(b,A)},i.ungzip=E},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,r,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(l){for(var u=Array.prototype.slice.call(arguments,1);u.length;){var d=u.shift();if(d){if(typeof d!="object")throw new TypeError(d+"must be non-object");for(var m in d)d.hasOwnProperty(m)&&(l[m]=d[m])}}return l},i.shrinkBuf=function(l,u){return l.length===u?l:l.subarray?l.subarray(0,u):(l.length=u,l)};var o={arraySet:function(l,u,d,m,w){if(u.subarray&&l.subarray)l.set(u.subarray(d,d+m),w);else for(var g=0;g<m;g++)l[w+g]=u[d+g]},flattenChunks:function(l){var u,d,m,w,g,E;for(u=m=0,d=l.length;u<d;u++)m+=l[u].length;for(E=new Uint8Array(m),u=w=0,d=l.length;u<d;u++)g=l[u],E.set(g,w),w+=g.length;return E}},a={arraySet:function(l,u,d,m,w){for(var g=0;g<m;g++)l[w+g]=u[d+g]},flattenChunks:function(l){return[].concat.apply([],l)}};i.setTyped=function(l){l?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,o)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,a))},i.setTyped(s)},{}],42:[function(n,r,i){var s=n("./common"),o=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}for(var l=new s.Buf8(256),u=0;u<256;u++)l[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;function d(m,w){if(w<65537&&(m.subarray&&a||!m.subarray&&o))return String.fromCharCode.apply(null,s.shrinkBuf(m,w));for(var g="",E=0;E<w;E++)g+=String.fromCharCode(m[E]);return g}l[254]=l[254]=1,i.string2buf=function(m){var w,g,E,b,A,T=m.length,x=0;for(b=0;b<T;b++)(64512&(g=m.charCodeAt(b)))==55296&&b+1<T&&(64512&(E=m.charCodeAt(b+1)))==56320&&(g=65536+(g-55296<<10)+(E-56320),b++),x+=g<128?1:g<2048?2:g<65536?3:4;for(w=new s.Buf8(x),b=A=0;A<x;b++)(64512&(g=m.charCodeAt(b)))==55296&&b+1<T&&(64512&(E=m.charCodeAt(b+1)))==56320&&(g=65536+(g-55296<<10)+(E-56320),b++),g<128?w[A++]=g:(g<2048?w[A++]=192|g>>>6:(g<65536?w[A++]=224|g>>>12:(w[A++]=240|g>>>18,w[A++]=128|g>>>12&63),w[A++]=128|g>>>6&63),w[A++]=128|63&g);return w},i.buf2binstring=function(m){return d(m,m.length)},i.binstring2buf=function(m){for(var w=new s.Buf8(m.length),g=0,E=w.length;g<E;g++)w[g]=m.charCodeAt(g);return w},i.buf2string=function(m,w){var g,E,b,A,T=w||m.length,x=new Array(2*T);for(g=E=0;g<T;)if((b=m[g++])<128)x[E++]=b;else if(4<(A=l[b]))x[E++]=65533,g+=A-1;else{for(b&=A===2?31:A===3?15:7;1<A&&g<T;)b=b<<6|63&m[g++],A--;1<A?x[E++]=65533:b<65536?x[E++]=b:(b-=65536,x[E++]=55296|b>>10&1023,x[E++]=56320|1023&b)}return d(x,E)},i.utf8border=function(m,w){var g;for((w=w||m.length)>m.length&&(w=m.length),g=w-1;0<=g&&(192&m[g])==128;)g--;return g<0||g===0?w:g+l[m[g]]>w?g:w}},{"./common":41}],43:[function(n,r,i){r.exports=function(s,o,a,l){for(var u=65535&s|0,d=s>>>16&65535|0,m=0;a!==0;){for(a-=m=2e3<a?2e3:a;d=d+(u=u+o[l++]|0)|0,--m;);u%=65521,d%=65521}return u|d<<16|0}},{}],44:[function(n,r,i){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,r,i){var s=function(){for(var o,a=[],l=0;l<256;l++){o=l;for(var u=0;u<8;u++)o=1&o?3988292384^o>>>1:o>>>1;a[l]=o}return a}();r.exports=function(o,a,l,u){var d=s,m=u+l;o^=-1;for(var w=u;w<m;w++)o=o>>>8^d[255&(o^a[w])];return-1^o}},{}],46:[function(n,r,i){var s,o=n("../utils/common"),a=n("./trees"),l=n("./adler32"),u=n("./crc32"),d=n("./messages"),m=0,w=4,g=0,E=-2,b=-1,A=4,T=2,x=8,R=9,O=286,H=30,Q=19,z=2*O+1,Z=15,ee=3,oe=258,me=oe+ee+1,$=42,X=113,I=1,re=2,ae=3,K=4;function he(_,B){return _.msg=d[B],B}function ne(_){return(_<<1)-(4<_?9:0)}function ce(_){for(var B=_.length;0<=--B;)_[B]=0}function te(_){var B=_.state,M=B.pending;M>_.avail_out&&(M=_.avail_out),M!==0&&(o.arraySet(_.output,B.pending_buf,B.pending_out,M,_.next_out),_.next_out+=M,B.pending_out+=M,_.total_out+=M,_.avail_out-=M,B.pending-=M,B.pending===0&&(B.pending_out=0))}function J(_,B){a._tr_flush_block(_,0<=_.block_start?_.block_start:-1,_.strstart-_.block_start,B),_.block_start=_.strstart,te(_.strm)}function ke(_,B){_.pending_buf[_.pending++]=B}function ve(_,B){_.pending_buf[_.pending++]=B>>>8&255,_.pending_buf[_.pending++]=255&B}function q(_,B){var M,S,C=_.max_chain_length,D=_.strstart,G=_.prev_length,W=_.nice_match,L=_.strstart>_.w_size-me?_.strstart-(_.w_size-me):0,se=_.window,de=_.w_mask,ue=_.prev,ye=_.strstart+oe,Pe=se[D+G-1],xe=se[D+G];_.prev_length>=_.good_match&&(C>>=2),W>_.lookahead&&(W=_.lookahead);do if(se[(M=B)+G]===xe&&se[M+G-1]===Pe&&se[M]===se[D]&&se[++M]===se[D+1]){D+=2,M++;do;while(se[++D]===se[++M]&&se[++D]===se[++M]&&se[++D]===se[++M]&&se[++D]===se[++M]&&se[++D]===se[++M]&&se[++D]===se[++M]&&se[++D]===se[++M]&&se[++D]===se[++M]&&D<ye);if(S=oe-(ye-D),D=ye-oe,G<S){if(_.match_start=B,W<=(G=S))break;Pe=se[D+G-1],xe=se[D+G]}}while((B=ue[B&de])>L&&--C!=0);return G<=_.lookahead?G:_.lookahead}function tt(_){var B,M,S,C,D,G,W,L,se,de,ue=_.w_size;do{if(C=_.window_size-_.lookahead-_.strstart,_.strstart>=ue+(ue-me)){for(o.arraySet(_.window,_.window,ue,ue,0),_.match_start-=ue,_.strstart-=ue,_.block_start-=ue,B=M=_.hash_size;S=_.head[--B],_.head[B]=ue<=S?S-ue:0,--M;);for(B=M=ue;S=_.prev[--B],_.prev[B]=ue<=S?S-ue:0,--M;);C+=ue}if(_.strm.avail_in===0)break;if(G=_.strm,W=_.window,L=_.strstart+_.lookahead,se=C,de=void 0,de=G.avail_in,se<de&&(de=se),M=de===0?0:(G.avail_in-=de,o.arraySet(W,G.input,G.next_in,de,L),G.state.wrap===1?G.adler=l(G.adler,W,de,L):G.state.wrap===2&&(G.adler=u(G.adler,W,de,L)),G.next_in+=de,G.total_in+=de,de),_.lookahead+=M,_.lookahead+_.insert>=ee)for(D=_.strstart-_.insert,_.ins_h=_.window[D],_.ins_h=(_.ins_h<<_.hash_shift^_.window[D+1])&_.hash_mask;_.insert&&(_.ins_h=(_.ins_h<<_.hash_shift^_.window[D+ee-1])&_.hash_mask,_.prev[D&_.w_mask]=_.head[_.ins_h],_.head[_.ins_h]=D,D++,_.insert--,!(_.lookahead+_.insert<ee)););}while(_.lookahead<me&&_.strm.avail_in!==0)}function ut(_,B){for(var M,S;;){if(_.lookahead<me){if(tt(_),_.lookahead<me&&B===m)return I;if(_.lookahead===0)break}if(M=0,_.lookahead>=ee&&(_.ins_h=(_.ins_h<<_.hash_shift^_.window[_.strstart+ee-1])&_.hash_mask,M=_.prev[_.strstart&_.w_mask]=_.head[_.ins_h],_.head[_.ins_h]=_.strstart),M!==0&&_.strstart-M<=_.w_size-me&&(_.match_length=q(_,M)),_.match_length>=ee)if(S=a._tr_tally(_,_.strstart-_.match_start,_.match_length-ee),_.lookahead-=_.match_length,_.match_length<=_.max_lazy_match&&_.lookahead>=ee){for(_.match_length--;_.strstart++,_.ins_h=(_.ins_h<<_.hash_shift^_.window[_.strstart+ee-1])&_.hash_mask,M=_.prev[_.strstart&_.w_mask]=_.head[_.ins_h],_.head[_.ins_h]=_.strstart,--_.match_length!=0;);_.strstart++}else _.strstart+=_.match_length,_.match_length=0,_.ins_h=_.window[_.strstart],_.ins_h=(_.ins_h<<_.hash_shift^_.window[_.strstart+1])&_.hash_mask;else S=a._tr_tally(_,0,_.window[_.strstart]),_.lookahead--,_.strstart++;if(S&&(J(_,!1),_.strm.avail_out===0))return I}return _.insert=_.strstart<ee-1?_.strstart:ee-1,B===w?(J(_,!0),_.strm.avail_out===0?ae:K):_.last_lit&&(J(_,!1),_.strm.avail_out===0)?I:re}function qe(_,B){for(var M,S,C;;){if(_.lookahead<me){if(tt(_),_.lookahead<me&&B===m)return I;if(_.lookahead===0)break}if(M=0,_.lookahead>=ee&&(_.ins_h=(_.ins_h<<_.hash_shift^_.window[_.strstart+ee-1])&_.hash_mask,M=_.prev[_.strstart&_.w_mask]=_.head[_.ins_h],_.head[_.ins_h]=_.strstart),_.prev_length=_.match_length,_.prev_match=_.match_start,_.match_length=ee-1,M!==0&&_.prev_length<_.max_lazy_match&&_.strstart-M<=_.w_size-me&&(_.match_length=q(_,M),_.match_length<=5&&(_.strategy===1||_.match_length===ee&&4096<_.strstart-_.match_start)&&(_.match_length=ee-1)),_.prev_length>=ee&&_.match_length<=_.prev_length){for(C=_.strstart+_.lookahead-ee,S=a._tr_tally(_,_.strstart-1-_.prev_match,_.prev_length-ee),_.lookahead-=_.prev_length-1,_.prev_length-=2;++_.strstart<=C&&(_.ins_h=(_.ins_h<<_.hash_shift^_.window[_.strstart+ee-1])&_.hash_mask,M=_.prev[_.strstart&_.w_mask]=_.head[_.ins_h],_.head[_.ins_h]=_.strstart),--_.prev_length!=0;);if(_.match_available=0,_.match_length=ee-1,_.strstart++,S&&(J(_,!1),_.strm.avail_out===0))return I}else if(_.match_available){if((S=a._tr_tally(_,0,_.window[_.strstart-1]))&&J(_,!1),_.strstart++,_.lookahead--,_.strm.avail_out===0)return I}else _.match_available=1,_.strstart++,_.lookahead--}return _.match_available&&(S=a._tr_tally(_,0,_.window[_.strstart-1]),_.match_available=0),_.insert=_.strstart<ee-1?_.strstart:ee-1,B===w?(J(_,!0),_.strm.avail_out===0?ae:K):_.last_lit&&(J(_,!1),_.strm.avail_out===0)?I:re}function ze(_,B,M,S,C){this.good_length=_,this.max_lazy=B,this.nice_length=M,this.max_chain=S,this.func=C}function He(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=x,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*z),this.dyn_dtree=new o.Buf16(2*(2*H+1)),this.bl_tree=new o.Buf16(2*(2*Q+1)),ce(this.dyn_ltree),ce(this.dyn_dtree),ce(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(Z+1),this.heap=new o.Buf16(2*O+1),ce(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*O+1),ce(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Qe(_){var B;return _&&_.state?(_.total_in=_.total_out=0,_.data_type=T,(B=_.state).pending=0,B.pending_out=0,B.wrap<0&&(B.wrap=-B.wrap),B.status=B.wrap?$:X,_.adler=B.wrap===2?0:1,B.last_flush=m,a._tr_init(B),g):he(_,E)}function F(_){var B=Qe(_);return B===g&&function(M){M.window_size=2*M.w_size,ce(M.head),M.max_lazy_match=s[M.level].max_lazy,M.good_match=s[M.level].good_length,M.nice_match=s[M.level].nice_length,M.max_chain_length=s[M.level].max_chain,M.strstart=0,M.block_start=0,M.lookahead=0,M.insert=0,M.match_length=M.prev_length=ee-1,M.match_available=0,M.ins_h=0}(_.state),B}function V(_,B,M,S,C,D){if(!_)return E;var G=1;if(B===b&&(B=6),S<0?(G=0,S=-S):15<S&&(G=2,S-=16),C<1||R<C||M!==x||S<8||15<S||B<0||9<B||D<0||A<D)return he(_,E);S===8&&(S=9);var W=new He;return(_.state=W).strm=_,W.wrap=G,W.gzhead=null,W.w_bits=S,W.w_size=1<<W.w_bits,W.w_mask=W.w_size-1,W.hash_bits=C+7,W.hash_size=1<<W.hash_bits,W.hash_mask=W.hash_size-1,W.hash_shift=~~((W.hash_bits+ee-1)/ee),W.window=new o.Buf8(2*W.w_size),W.head=new o.Buf16(W.hash_size),W.prev=new o.Buf16(W.w_size),W.lit_bufsize=1<<C+6,W.pending_buf_size=4*W.lit_bufsize,W.pending_buf=new o.Buf8(W.pending_buf_size),W.d_buf=1*W.lit_bufsize,W.l_buf=3*W.lit_bufsize,W.level=B,W.strategy=D,W.method=M,F(_)}s=[new ze(0,0,0,0,function(_,B){var M=65535;for(M>_.pending_buf_size-5&&(M=_.pending_buf_size-5);;){if(_.lookahead<=1){if(tt(_),_.lookahead===0&&B===m)return I;if(_.lookahead===0)break}_.strstart+=_.lookahead,_.lookahead=0;var S=_.block_start+M;if((_.strstart===0||_.strstart>=S)&&(_.lookahead=_.strstart-S,_.strstart=S,J(_,!1),_.strm.avail_out===0)||_.strstart-_.block_start>=_.w_size-me&&(J(_,!1),_.strm.avail_out===0))return I}return _.insert=0,B===w?(J(_,!0),_.strm.avail_out===0?ae:K):(_.strstart>_.block_start&&(J(_,!1),_.strm.avail_out),I)}),new ze(4,4,8,4,ut),new ze(4,5,16,8,ut),new ze(4,6,32,32,ut),new ze(4,4,16,16,qe),new ze(8,16,32,32,qe),new ze(8,16,128,128,qe),new ze(8,32,128,256,qe),new ze(32,128,258,1024,qe),new ze(32,258,258,4096,qe)],i.deflateInit=function(_,B){return V(_,B,x,15,8,0)},i.deflateInit2=V,i.deflateReset=F,i.deflateResetKeep=Qe,i.deflateSetHeader=function(_,B){return _&&_.state?_.state.wrap!==2?E:(_.state.gzhead=B,g):E},i.deflate=function(_,B){var M,S,C,D;if(!_||!_.state||5<B||B<0)return _?he(_,E):E;if(S=_.state,!_.output||!_.input&&_.avail_in!==0||S.status===666&&B!==w)return he(_,_.avail_out===0?-5:E);if(S.strm=_,M=S.last_flush,S.last_flush=B,S.status===$)if(S.wrap===2)_.adler=0,ke(S,31),ke(S,139),ke(S,8),S.gzhead?(ke(S,(S.gzhead.text?1:0)+(S.gzhead.hcrc?2:0)+(S.gzhead.extra?4:0)+(S.gzhead.name?8:0)+(S.gzhead.comment?16:0)),ke(S,255&S.gzhead.time),ke(S,S.gzhead.time>>8&255),ke(S,S.gzhead.time>>16&255),ke(S,S.gzhead.time>>24&255),ke(S,S.level===9?2:2<=S.strategy||S.level<2?4:0),ke(S,255&S.gzhead.os),S.gzhead.extra&&S.gzhead.extra.length&&(ke(S,255&S.gzhead.extra.length),ke(S,S.gzhead.extra.length>>8&255)),S.gzhead.hcrc&&(_.adler=u(_.adler,S.pending_buf,S.pending,0)),S.gzindex=0,S.status=69):(ke(S,0),ke(S,0),ke(S,0),ke(S,0),ke(S,0),ke(S,S.level===9?2:2<=S.strategy||S.level<2?4:0),ke(S,3),S.status=X);else{var G=x+(S.w_bits-8<<4)<<8;G|=(2<=S.strategy||S.level<2?0:S.level<6?1:S.level===6?2:3)<<6,S.strstart!==0&&(G|=32),G+=31-G%31,S.status=X,ve(S,G),S.strstart!==0&&(ve(S,_.adler>>>16),ve(S,65535&_.adler)),_.adler=1}if(S.status===69)if(S.gzhead.extra){for(C=S.pending;S.gzindex<(65535&S.gzhead.extra.length)&&(S.pending!==S.pending_buf_size||(S.gzhead.hcrc&&S.pending>C&&(_.adler=u(_.adler,S.pending_buf,S.pending-C,C)),te(_),C=S.pending,S.pending!==S.pending_buf_size));)ke(S,255&S.gzhead.extra[S.gzindex]),S.gzindex++;S.gzhead.hcrc&&S.pending>C&&(_.adler=u(_.adler,S.pending_buf,S.pending-C,C)),S.gzindex===S.gzhead.extra.length&&(S.gzindex=0,S.status=73)}else S.status=73;if(S.status===73)if(S.gzhead.name){C=S.pending;do{if(S.pending===S.pending_buf_size&&(S.gzhead.hcrc&&S.pending>C&&(_.adler=u(_.adler,S.pending_buf,S.pending-C,C)),te(_),C=S.pending,S.pending===S.pending_buf_size)){D=1;break}D=S.gzindex<S.gzhead.name.length?255&S.gzhead.name.charCodeAt(S.gzindex++):0,ke(S,D)}while(D!==0);S.gzhead.hcrc&&S.pending>C&&(_.adler=u(_.adler,S.pending_buf,S.pending-C,C)),D===0&&(S.gzindex=0,S.status=91)}else S.status=91;if(S.status===91)if(S.gzhead.comment){C=S.pending;do{if(S.pending===S.pending_buf_size&&(S.gzhead.hcrc&&S.pending>C&&(_.adler=u(_.adler,S.pending_buf,S.pending-C,C)),te(_),C=S.pending,S.pending===S.pending_buf_size)){D=1;break}D=S.gzindex<S.gzhead.comment.length?255&S.gzhead.comment.charCodeAt(S.gzindex++):0,ke(S,D)}while(D!==0);S.gzhead.hcrc&&S.pending>C&&(_.adler=u(_.adler,S.pending_buf,S.pending-C,C)),D===0&&(S.status=103)}else S.status=103;if(S.status===103&&(S.gzhead.hcrc?(S.pending+2>S.pending_buf_size&&te(_),S.pending+2<=S.pending_buf_size&&(ke(S,255&_.adler),ke(S,_.adler>>8&255),_.adler=0,S.status=X)):S.status=X),S.pending!==0){if(te(_),_.avail_out===0)return S.last_flush=-1,g}else if(_.avail_in===0&&ne(B)<=ne(M)&&B!==w)return he(_,-5);if(S.status===666&&_.avail_in!==0)return he(_,-5);if(_.avail_in!==0||S.lookahead!==0||B!==m&&S.status!==666){var W=S.strategy===2?function(L,se){for(var de;;){if(L.lookahead===0&&(tt(L),L.lookahead===0)){if(se===m)return I;break}if(L.match_length=0,de=a._tr_tally(L,0,L.window[L.strstart]),L.lookahead--,L.strstart++,de&&(J(L,!1),L.strm.avail_out===0))return I}return L.insert=0,se===w?(J(L,!0),L.strm.avail_out===0?ae:K):L.last_lit&&(J(L,!1),L.strm.avail_out===0)?I:re}(S,B):S.strategy===3?function(L,se){for(var de,ue,ye,Pe,xe=L.window;;){if(L.lookahead<=oe){if(tt(L),L.lookahead<=oe&&se===m)return I;if(L.lookahead===0)break}if(L.match_length=0,L.lookahead>=ee&&0<L.strstart&&(ue=xe[ye=L.strstart-1])===xe[++ye]&&ue===xe[++ye]&&ue===xe[++ye]){Pe=L.strstart+oe;do;while(ue===xe[++ye]&&ue===xe[++ye]&&ue===xe[++ye]&&ue===xe[++ye]&&ue===xe[++ye]&&ue===xe[++ye]&&ue===xe[++ye]&&ue===xe[++ye]&&ye<Pe);L.match_length=oe-(Pe-ye),L.match_length>L.lookahead&&(L.match_length=L.lookahead)}if(L.match_length>=ee?(de=a._tr_tally(L,1,L.match_length-ee),L.lookahead-=L.match_length,L.strstart+=L.match_length,L.match_length=0):(de=a._tr_tally(L,0,L.window[L.strstart]),L.lookahead--,L.strstart++),de&&(J(L,!1),L.strm.avail_out===0))return I}return L.insert=0,se===w?(J(L,!0),L.strm.avail_out===0?ae:K):L.last_lit&&(J(L,!1),L.strm.avail_out===0)?I:re}(S,B):s[S.level].func(S,B);if(W!==ae&&W!==K||(S.status=666),W===I||W===ae)return _.avail_out===0&&(S.last_flush=-1),g;if(W===re&&(B===1?a._tr_align(S):B!==5&&(a._tr_stored_block(S,0,0,!1),B===3&&(ce(S.head),S.lookahead===0&&(S.strstart=0,S.block_start=0,S.insert=0))),te(_),_.avail_out===0))return S.last_flush=-1,g}return B!==w?g:S.wrap<=0?1:(S.wrap===2?(ke(S,255&_.adler),ke(S,_.adler>>8&255),ke(S,_.adler>>16&255),ke(S,_.adler>>24&255),ke(S,255&_.total_in),ke(S,_.total_in>>8&255),ke(S,_.total_in>>16&255),ke(S,_.total_in>>24&255)):(ve(S,_.adler>>>16),ve(S,65535&_.adler)),te(_),0<S.wrap&&(S.wrap=-S.wrap),S.pending!==0?g:1)},i.deflateEnd=function(_){var B;return _&&_.state?(B=_.state.status)!==$&&B!==69&&B!==73&&B!==91&&B!==103&&B!==X&&B!==666?he(_,E):(_.state=null,B===X?he(_,-3):g):E},i.deflateSetDictionary=function(_,B){var M,S,C,D,G,W,L,se,de=B.length;if(!_||!_.state||(D=(M=_.state).wrap)===2||D===1&&M.status!==$||M.lookahead)return E;for(D===1&&(_.adler=l(_.adler,B,de,0)),M.wrap=0,de>=M.w_size&&(D===0&&(ce(M.head),M.strstart=0,M.block_start=0,M.insert=0),se=new o.Buf8(M.w_size),o.arraySet(se,B,de-M.w_size,M.w_size,0),B=se,de=M.w_size),G=_.avail_in,W=_.next_in,L=_.input,_.avail_in=de,_.next_in=0,_.input=B,tt(M);M.lookahead>=ee;){for(S=M.strstart,C=M.lookahead-(ee-1);M.ins_h=(M.ins_h<<M.hash_shift^M.window[S+ee-1])&M.hash_mask,M.prev[S&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=S,S++,--C;);M.strstart=S,M.lookahead=ee-1,tt(M)}return M.strstart+=M.lookahead,M.block_start=M.strstart,M.insert=M.lookahead,M.lookahead=0,M.match_length=M.prev_length=ee-1,M.match_available=0,_.next_in=W,_.input=L,_.avail_in=G,M.wrap=D,g},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,r,i){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,r,i){r.exports=function(s,o){var a,l,u,d,m,w,g,E,b,A,T,x,R,O,H,Q,z,Z,ee,oe,me,$,X,I,re;a=s.state,l=s.next_in,I=s.input,u=l+(s.avail_in-5),d=s.next_out,re=s.output,m=d-(o-s.avail_out),w=d+(s.avail_out-257),g=a.dmax,E=a.wsize,b=a.whave,A=a.wnext,T=a.window,x=a.hold,R=a.bits,O=a.lencode,H=a.distcode,Q=(1<<a.lenbits)-1,z=(1<<a.distbits)-1;e:do{R<15&&(x+=I[l++]<<R,R+=8,x+=I[l++]<<R,R+=8),Z=O[x&Q];t:for(;;){if(x>>>=ee=Z>>>24,R-=ee,(ee=Z>>>16&255)===0)re[d++]=65535&Z;else{if(!(16&ee)){if(!(64&ee)){Z=O[(65535&Z)+(x&(1<<ee)-1)];continue t}if(32&ee){a.mode=12;break e}s.msg="invalid literal/length code",a.mode=30;break e}oe=65535&Z,(ee&=15)&&(R<ee&&(x+=I[l++]<<R,R+=8),oe+=x&(1<<ee)-1,x>>>=ee,R-=ee),R<15&&(x+=I[l++]<<R,R+=8,x+=I[l++]<<R,R+=8),Z=H[x&z];n:for(;;){if(x>>>=ee=Z>>>24,R-=ee,!(16&(ee=Z>>>16&255))){if(!(64&ee)){Z=H[(65535&Z)+(x&(1<<ee)-1)];continue n}s.msg="invalid distance code",a.mode=30;break e}if(me=65535&Z,R<(ee&=15)&&(x+=I[l++]<<R,(R+=8)<ee&&(x+=I[l++]<<R,R+=8)),g<(me+=x&(1<<ee)-1)){s.msg="invalid distance too far back",a.mode=30;break e}if(x>>>=ee,R-=ee,(ee=d-m)<me){if(b<(ee=me-ee)&&a.sane){s.msg="invalid distance too far back",a.mode=30;break e}if(X=T,($=0)===A){if($+=E-ee,ee<oe){for(oe-=ee;re[d++]=T[$++],--ee;);$=d-me,X=re}}else if(A<ee){if($+=E+A-ee,(ee-=A)<oe){for(oe-=ee;re[d++]=T[$++],--ee;);if($=0,A<oe){for(oe-=ee=A;re[d++]=T[$++],--ee;);$=d-me,X=re}}}else if($+=A-ee,ee<oe){for(oe-=ee;re[d++]=T[$++],--ee;);$=d-me,X=re}for(;2<oe;)re[d++]=X[$++],re[d++]=X[$++],re[d++]=X[$++],oe-=3;oe&&(re[d++]=X[$++],1<oe&&(re[d++]=X[$++]))}else{for($=d-me;re[d++]=re[$++],re[d++]=re[$++],re[d++]=re[$++],2<(oe-=3););oe&&(re[d++]=re[$++],1<oe&&(re[d++]=re[$++]))}break}}break}}while(l<u&&d<w);l-=oe=R>>3,x&=(1<<(R-=oe<<3))-1,s.next_in=l,s.next_out=d,s.avail_in=l<u?u-l+5:5-(l-u),s.avail_out=d<w?w-d+257:257-(d-w),a.hold=x,a.bits=R}},{}],49:[function(n,r,i){var s=n("../utils/common"),o=n("./adler32"),a=n("./crc32"),l=n("./inffast"),u=n("./inftrees"),d=1,m=2,w=0,g=-2,E=1,b=852,A=592;function T($){return($>>>24&255)+($>>>8&65280)+((65280&$)<<8)+((255&$)<<24)}function x(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function R($){var X;return $&&$.state?(X=$.state,$.total_in=$.total_out=X.total=0,$.msg="",X.wrap&&($.adler=1&X.wrap),X.mode=E,X.last=0,X.havedict=0,X.dmax=32768,X.head=null,X.hold=0,X.bits=0,X.lencode=X.lendyn=new s.Buf32(b),X.distcode=X.distdyn=new s.Buf32(A),X.sane=1,X.back=-1,w):g}function O($){var X;return $&&$.state?((X=$.state).wsize=0,X.whave=0,X.wnext=0,R($)):g}function H($,X){var I,re;return $&&$.state?(re=$.state,X<0?(I=0,X=-X):(I=1+(X>>4),X<48&&(X&=15)),X&&(X<8||15<X)?g:(re.window!==null&&re.wbits!==X&&(re.window=null),re.wrap=I,re.wbits=X,O($))):g}function Q($,X){var I,re;return $?(re=new x,($.state=re).window=null,(I=H($,X))!==w&&($.state=null),I):g}var z,Z,ee=!0;function oe($){if(ee){var X;for(z=new s.Buf32(512),Z=new s.Buf32(32),X=0;X<144;)$.lens[X++]=8;for(;X<256;)$.lens[X++]=9;for(;X<280;)$.lens[X++]=7;for(;X<288;)$.lens[X++]=8;for(u(d,$.lens,0,288,z,0,$.work,{bits:9}),X=0;X<32;)$.lens[X++]=5;u(m,$.lens,0,32,Z,0,$.work,{bits:5}),ee=!1}$.lencode=z,$.lenbits=9,$.distcode=Z,$.distbits=5}function me($,X,I,re){var ae,K=$.state;return K.window===null&&(K.wsize=1<<K.wbits,K.wnext=0,K.whave=0,K.window=new s.Buf8(K.wsize)),re>=K.wsize?(s.arraySet(K.window,X,I-K.wsize,K.wsize,0),K.wnext=0,K.whave=K.wsize):(re<(ae=K.wsize-K.wnext)&&(ae=re),s.arraySet(K.window,X,I-re,ae,K.wnext),(re-=ae)?(s.arraySet(K.window,X,I-re,re,0),K.wnext=re,K.whave=K.wsize):(K.wnext+=ae,K.wnext===K.wsize&&(K.wnext=0),K.whave<K.wsize&&(K.whave+=ae))),0}i.inflateReset=O,i.inflateReset2=H,i.inflateResetKeep=R,i.inflateInit=function($){return Q($,15)},i.inflateInit2=Q,i.inflate=function($,X){var I,re,ae,K,he,ne,ce,te,J,ke,ve,q,tt,ut,qe,ze,He,Qe,F,V,_,B,M,S,C=0,D=new s.Buf8(4),G=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!$||!$.state||!$.output||!$.input&&$.avail_in!==0)return g;(I=$.state).mode===12&&(I.mode=13),he=$.next_out,ae=$.output,ce=$.avail_out,K=$.next_in,re=$.input,ne=$.avail_in,te=I.hold,J=I.bits,ke=ne,ve=ce,B=w;e:for(;;)switch(I.mode){case E:if(I.wrap===0){I.mode=13;break}for(;J<16;){if(ne===0)break e;ne--,te+=re[K++]<<J,J+=8}if(2&I.wrap&&te===35615){D[I.check=0]=255&te,D[1]=te>>>8&255,I.check=a(I.check,D,2,0),J=te=0,I.mode=2;break}if(I.flags=0,I.head&&(I.head.done=!1),!(1&I.wrap)||(((255&te)<<8)+(te>>8))%31){$.msg="incorrect header check",I.mode=30;break}if((15&te)!=8){$.msg="unknown compression method",I.mode=30;break}if(J-=4,_=8+(15&(te>>>=4)),I.wbits===0)I.wbits=_;else if(_>I.wbits){$.msg="invalid window size",I.mode=30;break}I.dmax=1<<_,$.adler=I.check=1,I.mode=512&te?10:12,J=te=0;break;case 2:for(;J<16;){if(ne===0)break e;ne--,te+=re[K++]<<J,J+=8}if(I.flags=te,(255&I.flags)!=8){$.msg="unknown compression method",I.mode=30;break}if(57344&I.flags){$.msg="unknown header flags set",I.mode=30;break}I.head&&(I.head.text=te>>8&1),512&I.flags&&(D[0]=255&te,D[1]=te>>>8&255,I.check=a(I.check,D,2,0)),J=te=0,I.mode=3;case 3:for(;J<32;){if(ne===0)break e;ne--,te+=re[K++]<<J,J+=8}I.head&&(I.head.time=te),512&I.flags&&(D[0]=255&te,D[1]=te>>>8&255,D[2]=te>>>16&255,D[3]=te>>>24&255,I.check=a(I.check,D,4,0)),J=te=0,I.mode=4;case 4:for(;J<16;){if(ne===0)break e;ne--,te+=re[K++]<<J,J+=8}I.head&&(I.head.xflags=255&te,I.head.os=te>>8),512&I.flags&&(D[0]=255&te,D[1]=te>>>8&255,I.check=a(I.check,D,2,0)),J=te=0,I.mode=5;case 5:if(1024&I.flags){for(;J<16;){if(ne===0)break e;ne--,te+=re[K++]<<J,J+=8}I.length=te,I.head&&(I.head.extra_len=te),512&I.flags&&(D[0]=255&te,D[1]=te>>>8&255,I.check=a(I.check,D,2,0)),J=te=0}else I.head&&(I.head.extra=null);I.mode=6;case 6:if(1024&I.flags&&(ne<(q=I.length)&&(q=ne),q&&(I.head&&(_=I.head.extra_len-I.length,I.head.extra||(I.head.extra=new Array(I.head.extra_len)),s.arraySet(I.head.extra,re,K,q,_)),512&I.flags&&(I.check=a(I.check,re,q,K)),ne-=q,K+=q,I.length-=q),I.length))break e;I.length=0,I.mode=7;case 7:if(2048&I.flags){if(ne===0)break e;for(q=0;_=re[K+q++],I.head&&_&&I.length<65536&&(I.head.name+=String.fromCharCode(_)),_&&q<ne;);if(512&I.flags&&(I.check=a(I.check,re,q,K)),ne-=q,K+=q,_)break e}else I.head&&(I.head.name=null);I.length=0,I.mode=8;case 8:if(4096&I.flags){if(ne===0)break e;for(q=0;_=re[K+q++],I.head&&_&&I.length<65536&&(I.head.comment+=String.fromCharCode(_)),_&&q<ne;);if(512&I.flags&&(I.check=a(I.check,re,q,K)),ne-=q,K+=q,_)break e}else I.head&&(I.head.comment=null);I.mode=9;case 9:if(512&I.flags){for(;J<16;){if(ne===0)break e;ne--,te+=re[K++]<<J,J+=8}if(te!==(65535&I.check)){$.msg="header crc mismatch",I.mode=30;break}J=te=0}I.head&&(I.head.hcrc=I.flags>>9&1,I.head.done=!0),$.adler=I.check=0,I.mode=12;break;case 10:for(;J<32;){if(ne===0)break e;ne--,te+=re[K++]<<J,J+=8}$.adler=I.check=T(te),J=te=0,I.mode=11;case 11:if(I.havedict===0)return $.next_out=he,$.avail_out=ce,$.next_in=K,$.avail_in=ne,I.hold=te,I.bits=J,2;$.adler=I.check=1,I.mode=12;case 12:if(X===5||X===6)break e;case 13:if(I.last){te>>>=7&J,J-=7&J,I.mode=27;break}for(;J<3;){if(ne===0)break e;ne--,te+=re[K++]<<J,J+=8}switch(I.last=1&te,J-=1,3&(te>>>=1)){case 0:I.mode=14;break;case 1:if(oe(I),I.mode=20,X!==6)break;te>>>=2,J-=2;break e;case 2:I.mode=17;break;case 3:$.msg="invalid block type",I.mode=30}te>>>=2,J-=2;break;case 14:for(te>>>=7&J,J-=7&J;J<32;){if(ne===0)break e;ne--,te+=re[K++]<<J,J+=8}if((65535&te)!=(te>>>16^65535)){$.msg="invalid stored block lengths",I.mode=30;break}if(I.length=65535&te,J=te=0,I.mode=15,X===6)break e;case 15:I.mode=16;case 16:if(q=I.length){if(ne<q&&(q=ne),ce<q&&(q=ce),q===0)break e;s.arraySet(ae,re,K,q,he),ne-=q,K+=q,ce-=q,he+=q,I.length-=q;break}I.mode=12;break;case 17:for(;J<14;){if(ne===0)break e;ne--,te+=re[K++]<<J,J+=8}if(I.nlen=257+(31&te),te>>>=5,J-=5,I.ndist=1+(31&te),te>>>=5,J-=5,I.ncode=4+(15&te),te>>>=4,J-=4,286<I.nlen||30<I.ndist){$.msg="too many length or distance symbols",I.mode=30;break}I.have=0,I.mode=18;case 18:for(;I.have<I.ncode;){for(;J<3;){if(ne===0)break e;ne--,te+=re[K++]<<J,J+=8}I.lens[G[I.have++]]=7&te,te>>>=3,J-=3}for(;I.have<19;)I.lens[G[I.have++]]=0;if(I.lencode=I.lendyn,I.lenbits=7,M={bits:I.lenbits},B=u(0,I.lens,0,19,I.lencode,0,I.work,M),I.lenbits=M.bits,B){$.msg="invalid code lengths set",I.mode=30;break}I.have=0,I.mode=19;case 19:for(;I.have<I.nlen+I.ndist;){for(;ze=(C=I.lencode[te&(1<<I.lenbits)-1])>>>16&255,He=65535&C,!((qe=C>>>24)<=J);){if(ne===0)break e;ne--,te+=re[K++]<<J,J+=8}if(He<16)te>>>=qe,J-=qe,I.lens[I.have++]=He;else{if(He===16){for(S=qe+2;J<S;){if(ne===0)break e;ne--,te+=re[K++]<<J,J+=8}if(te>>>=qe,J-=qe,I.have===0){$.msg="invalid bit length repeat",I.mode=30;break}_=I.lens[I.have-1],q=3+(3&te),te>>>=2,J-=2}else if(He===17){for(S=qe+3;J<S;){if(ne===0)break e;ne--,te+=re[K++]<<J,J+=8}J-=qe,_=0,q=3+(7&(te>>>=qe)),te>>>=3,J-=3}else{for(S=qe+7;J<S;){if(ne===0)break e;ne--,te+=re[K++]<<J,J+=8}J-=qe,_=0,q=11+(127&(te>>>=qe)),te>>>=7,J-=7}if(I.have+q>I.nlen+I.ndist){$.msg="invalid bit length repeat",I.mode=30;break}for(;q--;)I.lens[I.have++]=_}}if(I.mode===30)break;if(I.lens[256]===0){$.msg="invalid code -- missing end-of-block",I.mode=30;break}if(I.lenbits=9,M={bits:I.lenbits},B=u(d,I.lens,0,I.nlen,I.lencode,0,I.work,M),I.lenbits=M.bits,B){$.msg="invalid literal/lengths set",I.mode=30;break}if(I.distbits=6,I.distcode=I.distdyn,M={bits:I.distbits},B=u(m,I.lens,I.nlen,I.ndist,I.distcode,0,I.work,M),I.distbits=M.bits,B){$.msg="invalid distances set",I.mode=30;break}if(I.mode=20,X===6)break e;case 20:I.mode=21;case 21:if(6<=ne&&258<=ce){$.next_out=he,$.avail_out=ce,$.next_in=K,$.avail_in=ne,I.hold=te,I.bits=J,l($,ve),he=$.next_out,ae=$.output,ce=$.avail_out,K=$.next_in,re=$.input,ne=$.avail_in,te=I.hold,J=I.bits,I.mode===12&&(I.back=-1);break}for(I.back=0;ze=(C=I.lencode[te&(1<<I.lenbits)-1])>>>16&255,He=65535&C,!((qe=C>>>24)<=J);){if(ne===0)break e;ne--,te+=re[K++]<<J,J+=8}if(ze&&!(240&ze)){for(Qe=qe,F=ze,V=He;ze=(C=I.lencode[V+((te&(1<<Qe+F)-1)>>Qe)])>>>16&255,He=65535&C,!(Qe+(qe=C>>>24)<=J);){if(ne===0)break e;ne--,te+=re[K++]<<J,J+=8}te>>>=Qe,J-=Qe,I.back+=Qe}if(te>>>=qe,J-=qe,I.back+=qe,I.length=He,ze===0){I.mode=26;break}if(32&ze){I.back=-1,I.mode=12;break}if(64&ze){$.msg="invalid literal/length code",I.mode=30;break}I.extra=15&ze,I.mode=22;case 22:if(I.extra){for(S=I.extra;J<S;){if(ne===0)break e;ne--,te+=re[K++]<<J,J+=8}I.length+=te&(1<<I.extra)-1,te>>>=I.extra,J-=I.extra,I.back+=I.extra}I.was=I.length,I.mode=23;case 23:for(;ze=(C=I.distcode[te&(1<<I.distbits)-1])>>>16&255,He=65535&C,!((qe=C>>>24)<=J);){if(ne===0)break e;ne--,te+=re[K++]<<J,J+=8}if(!(240&ze)){for(Qe=qe,F=ze,V=He;ze=(C=I.distcode[V+((te&(1<<Qe+F)-1)>>Qe)])>>>16&255,He=65535&C,!(Qe+(qe=C>>>24)<=J);){if(ne===0)break e;ne--,te+=re[K++]<<J,J+=8}te>>>=Qe,J-=Qe,I.back+=Qe}if(te>>>=qe,J-=qe,I.back+=qe,64&ze){$.msg="invalid distance code",I.mode=30;break}I.offset=He,I.extra=15&ze,I.mode=24;case 24:if(I.extra){for(S=I.extra;J<S;){if(ne===0)break e;ne--,te+=re[K++]<<J,J+=8}I.offset+=te&(1<<I.extra)-1,te>>>=I.extra,J-=I.extra,I.back+=I.extra}if(I.offset>I.dmax){$.msg="invalid distance too far back",I.mode=30;break}I.mode=25;case 25:if(ce===0)break e;if(q=ve-ce,I.offset>q){if((q=I.offset-q)>I.whave&&I.sane){$.msg="invalid distance too far back",I.mode=30;break}tt=q>I.wnext?(q-=I.wnext,I.wsize-q):I.wnext-q,q>I.length&&(q=I.length),ut=I.window}else ut=ae,tt=he-I.offset,q=I.length;for(ce<q&&(q=ce),ce-=q,I.length-=q;ae[he++]=ut[tt++],--q;);I.length===0&&(I.mode=21);break;case 26:if(ce===0)break e;ae[he++]=I.length,ce--,I.mode=21;break;case 27:if(I.wrap){for(;J<32;){if(ne===0)break e;ne--,te|=re[K++]<<J,J+=8}if(ve-=ce,$.total_out+=ve,I.total+=ve,ve&&($.adler=I.check=I.flags?a(I.check,ae,ve,he-ve):o(I.check,ae,ve,he-ve)),ve=ce,(I.flags?te:T(te))!==I.check){$.msg="incorrect data check",I.mode=30;break}J=te=0}I.mode=28;case 28:if(I.wrap&&I.flags){for(;J<32;){if(ne===0)break e;ne--,te+=re[K++]<<J,J+=8}if(te!==(4294967295&I.total)){$.msg="incorrect length check",I.mode=30;break}J=te=0}I.mode=29;case 29:B=1;break e;case 30:B=-3;break e;case 31:return-4;case 32:default:return g}return $.next_out=he,$.avail_out=ce,$.next_in=K,$.avail_in=ne,I.hold=te,I.bits=J,(I.wsize||ve!==$.avail_out&&I.mode<30&&(I.mode<27||X!==4))&&me($,$.output,$.next_out,ve-$.avail_out)?(I.mode=31,-4):(ke-=$.avail_in,ve-=$.avail_out,$.total_in+=ke,$.total_out+=ve,I.total+=ve,I.wrap&&ve&&($.adler=I.check=I.flags?a(I.check,ae,ve,$.next_out-ve):o(I.check,ae,ve,$.next_out-ve)),$.data_type=I.bits+(I.last?64:0)+(I.mode===12?128:0)+(I.mode===20||I.mode===15?256:0),(ke==0&&ve===0||X===4)&&B===w&&(B=-5),B)},i.inflateEnd=function($){if(!$||!$.state)return g;var X=$.state;return X.window&&(X.window=null),$.state=null,w},i.inflateGetHeader=function($,X){var I;return $&&$.state&&2&(I=$.state).wrap?((I.head=X).done=!1,w):g},i.inflateSetDictionary=function($,X){var I,re=X.length;return $&&$.state?(I=$.state).wrap!==0&&I.mode!==11?g:I.mode===11&&o(1,X,re,0)!==I.check?-3:me($,X,re,re)?(I.mode=31,-4):(I.havedict=1,w):g},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,r,i){var s=n("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(d,m,w,g,E,b,A,T){var x,R,O,H,Q,z,Z,ee,oe,me=T.bits,$=0,X=0,I=0,re=0,ae=0,K=0,he=0,ne=0,ce=0,te=0,J=null,ke=0,ve=new s.Buf16(16),q=new s.Buf16(16),tt=null,ut=0;for($=0;$<=15;$++)ve[$]=0;for(X=0;X<g;X++)ve[m[w+X]]++;for(ae=me,re=15;1<=re&&ve[re]===0;re--);if(re<ae&&(ae=re),re===0)return E[b++]=20971520,E[b++]=20971520,T.bits=1,0;for(I=1;I<re&&ve[I]===0;I++);for(ae<I&&(ae=I),$=ne=1;$<=15;$++)if(ne<<=1,(ne-=ve[$])<0)return-1;if(0<ne&&(d===0||re!==1))return-1;for(q[1]=0,$=1;$<15;$++)q[$+1]=q[$]+ve[$];for(X=0;X<g;X++)m[w+X]!==0&&(A[q[m[w+X]]++]=X);if(z=d===0?(J=tt=A,19):d===1?(J=o,ke-=257,tt=a,ut-=257,256):(J=l,tt=u,-1),$=I,Q=b,he=X=te=0,O=-1,H=(ce=1<<(K=ae))-1,d===1&&852<ce||d===2&&592<ce)return 1;for(;;){for(Z=$-he,oe=A[X]<z?(ee=0,A[X]):A[X]>z?(ee=tt[ut+A[X]],J[ke+A[X]]):(ee=96,0),x=1<<$-he,I=R=1<<K;E[Q+(te>>he)+(R-=x)]=Z<<24|ee<<16|oe|0,R!==0;);for(x=1<<$-1;te&x;)x>>=1;if(x!==0?(te&=x-1,te+=x):te=0,X++,--ve[$]==0){if($===re)break;$=m[w+A[X]]}if(ae<$&&(te&H)!==O){for(he===0&&(he=ae),Q+=I,ne=1<<(K=$-he);K+he<re&&!((ne-=ve[K+he])<=0);)K++,ne<<=1;if(ce+=1<<K,d===1&&852<ce||d===2&&592<ce)return 1;E[O=te&H]=ae<<24|K<<16|Q-b|0}}return te!==0&&(E[Q+te]=$-he<<24|64<<16|0),T.bits=ae,0}},{"../utils/common":41}],51:[function(n,r,i){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,r,i){var s=n("../utils/common"),o=0,a=1;function l(C){for(var D=C.length;0<=--D;)C[D]=0}var u=0,d=29,m=256,w=m+1+d,g=30,E=19,b=2*w+1,A=15,T=16,x=7,R=256,O=16,H=17,Q=18,z=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Z=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],ee=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],oe=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],me=new Array(2*(w+2));l(me);var $=new Array(2*g);l($);var X=new Array(512);l(X);var I=new Array(256);l(I);var re=new Array(d);l(re);var ae,K,he,ne=new Array(g);function ce(C,D,G,W,L){this.static_tree=C,this.extra_bits=D,this.extra_base=G,this.elems=W,this.max_length=L,this.has_stree=C&&C.length}function te(C,D){this.dyn_tree=C,this.max_code=0,this.stat_desc=D}function J(C){return C<256?X[C]:X[256+(C>>>7)]}function ke(C,D){C.pending_buf[C.pending++]=255&D,C.pending_buf[C.pending++]=D>>>8&255}function ve(C,D,G){C.bi_valid>T-G?(C.bi_buf|=D<<C.bi_valid&65535,ke(C,C.bi_buf),C.bi_buf=D>>T-C.bi_valid,C.bi_valid+=G-T):(C.bi_buf|=D<<C.bi_valid&65535,C.bi_valid+=G)}function q(C,D,G){ve(C,G[2*D],G[2*D+1])}function tt(C,D){for(var G=0;G|=1&C,C>>>=1,G<<=1,0<--D;);return G>>>1}function ut(C,D,G){var W,L,se=new Array(A+1),de=0;for(W=1;W<=A;W++)se[W]=de=de+G[W-1]<<1;for(L=0;L<=D;L++){var ue=C[2*L+1];ue!==0&&(C[2*L]=tt(se[ue]++,ue))}}function qe(C){var D;for(D=0;D<w;D++)C.dyn_ltree[2*D]=0;for(D=0;D<g;D++)C.dyn_dtree[2*D]=0;for(D=0;D<E;D++)C.bl_tree[2*D]=0;C.dyn_ltree[2*R]=1,C.opt_len=C.static_len=0,C.last_lit=C.matches=0}function ze(C){8<C.bi_valid?ke(C,C.bi_buf):0<C.bi_valid&&(C.pending_buf[C.pending++]=C.bi_buf),C.bi_buf=0,C.bi_valid=0}function He(C,D,G,W){var L=2*D,se=2*G;return C[L]<C[se]||C[L]===C[se]&&W[D]<=W[G]}function Qe(C,D,G){for(var W=C.heap[G],L=G<<1;L<=C.heap_len&&(L<C.heap_len&&He(D,C.heap[L+1],C.heap[L],C.depth)&&L++,!He(D,W,C.heap[L],C.depth));)C.heap[G]=C.heap[L],G=L,L<<=1;C.heap[G]=W}function F(C,D,G){var W,L,se,de,ue=0;if(C.last_lit!==0)for(;W=C.pending_buf[C.d_buf+2*ue]<<8|C.pending_buf[C.d_buf+2*ue+1],L=C.pending_buf[C.l_buf+ue],ue++,W===0?q(C,L,D):(q(C,(se=I[L])+m+1,D),(de=z[se])!==0&&ve(C,L-=re[se],de),q(C,se=J(--W),G),(de=Z[se])!==0&&ve(C,W-=ne[se],de)),ue<C.last_lit;);q(C,R,D)}function V(C,D){var G,W,L,se=D.dyn_tree,de=D.stat_desc.static_tree,ue=D.stat_desc.has_stree,ye=D.stat_desc.elems,Pe=-1;for(C.heap_len=0,C.heap_max=b,G=0;G<ye;G++)se[2*G]!==0?(C.heap[++C.heap_len]=Pe=G,C.depth[G]=0):se[2*G+1]=0;for(;C.heap_len<2;)se[2*(L=C.heap[++C.heap_len]=Pe<2?++Pe:0)]=1,C.depth[L]=0,C.opt_len--,ue&&(C.static_len-=de[2*L+1]);for(D.max_code=Pe,G=C.heap_len>>1;1<=G;G--)Qe(C,se,G);for(L=ye;G=C.heap[1],C.heap[1]=C.heap[C.heap_len--],Qe(C,se,1),W=C.heap[1],C.heap[--C.heap_max]=G,C.heap[--C.heap_max]=W,se[2*L]=se[2*G]+se[2*W],C.depth[L]=(C.depth[G]>=C.depth[W]?C.depth[G]:C.depth[W])+1,se[2*G+1]=se[2*W+1]=L,C.heap[1]=L++,Qe(C,se,1),2<=C.heap_len;);C.heap[--C.heap_max]=C.heap[1],function(xe,Fe){var rt,ct,Lt,ft,dn,Ot,kt=Fe.dyn_tree,qn=Fe.max_code,We=Fe.stat_desc.static_tree,Bt=Fe.stat_desc.has_stree,Pn=Fe.stat_desc.extra_bits,gr=Fe.stat_desc.extra_base,wn=Fe.stat_desc.max_length,ur=0;for(ft=0;ft<=A;ft++)xe.bl_count[ft]=0;for(kt[2*xe.heap[xe.heap_max]+1]=0,rt=xe.heap_max+1;rt<b;rt++)wn<(ft=kt[2*kt[2*(ct=xe.heap[rt])+1]+1]+1)&&(ft=wn,ur++),kt[2*ct+1]=ft,qn<ct||(xe.bl_count[ft]++,dn=0,gr<=ct&&(dn=Pn[ct-gr]),Ot=kt[2*ct],xe.opt_len+=Ot*(ft+dn),Bt&&(xe.static_len+=Ot*(We[2*ct+1]+dn)));if(ur!==0){do{for(ft=wn-1;xe.bl_count[ft]===0;)ft--;xe.bl_count[ft]--,xe.bl_count[ft+1]+=2,xe.bl_count[wn]--,ur-=2}while(0<ur);for(ft=wn;ft!==0;ft--)for(ct=xe.bl_count[ft];ct!==0;)qn<(Lt=xe.heap[--rt])||(kt[2*Lt+1]!==ft&&(xe.opt_len+=(ft-kt[2*Lt+1])*kt[2*Lt],kt[2*Lt+1]=ft),ct--)}}(C,D),ut(se,Pe,C.bl_count)}function _(C,D,G){var W,L,se=-1,de=D[1],ue=0,ye=7,Pe=4;for(de===0&&(ye=138,Pe=3),D[2*(G+1)+1]=65535,W=0;W<=G;W++)L=de,de=D[2*(W+1)+1],++ue<ye&&L===de||(ue<Pe?C.bl_tree[2*L]+=ue:L!==0?(L!==se&&C.bl_tree[2*L]++,C.bl_tree[2*O]++):ue<=10?C.bl_tree[2*H]++:C.bl_tree[2*Q]++,se=L,Pe=(ue=0)===de?(ye=138,3):L===de?(ye=6,3):(ye=7,4))}function B(C,D,G){var W,L,se=-1,de=D[1],ue=0,ye=7,Pe=4;for(de===0&&(ye=138,Pe=3),W=0;W<=G;W++)if(L=de,de=D[2*(W+1)+1],!(++ue<ye&&L===de)){if(ue<Pe)for(;q(C,L,C.bl_tree),--ue!=0;);else L!==0?(L!==se&&(q(C,L,C.bl_tree),ue--),q(C,O,C.bl_tree),ve(C,ue-3,2)):ue<=10?(q(C,H,C.bl_tree),ve(C,ue-3,3)):(q(C,Q,C.bl_tree),ve(C,ue-11,7));se=L,Pe=(ue=0)===de?(ye=138,3):L===de?(ye=6,3):(ye=7,4)}}l(ne);var M=!1;function S(C,D,G,W){ve(C,(u<<1)+(W?1:0),3),function(L,se,de,ue){ze(L),ue&&(ke(L,de),ke(L,~de)),s.arraySet(L.pending_buf,L.window,se,de,L.pending),L.pending+=de}(C,D,G,!0)}i._tr_init=function(C){M||(function(){var D,G,W,L,se,de=new Array(A+1);for(L=W=0;L<d-1;L++)for(re[L]=W,D=0;D<1<<z[L];D++)I[W++]=L;for(I[W-1]=L,L=se=0;L<16;L++)for(ne[L]=se,D=0;D<1<<Z[L];D++)X[se++]=L;for(se>>=7;L<g;L++)for(ne[L]=se<<7,D=0;D<1<<Z[L]-7;D++)X[256+se++]=L;for(G=0;G<=A;G++)de[G]=0;for(D=0;D<=143;)me[2*D+1]=8,D++,de[8]++;for(;D<=255;)me[2*D+1]=9,D++,de[9]++;for(;D<=279;)me[2*D+1]=7,D++,de[7]++;for(;D<=287;)me[2*D+1]=8,D++,de[8]++;for(ut(me,w+1,de),D=0;D<g;D++)$[2*D+1]=5,$[2*D]=tt(D,5);ae=new ce(me,z,m+1,w,A),K=new ce($,Z,0,g,A),he=new ce(new Array(0),ee,0,E,x)}(),M=!0),C.l_desc=new te(C.dyn_ltree,ae),C.d_desc=new te(C.dyn_dtree,K),C.bl_desc=new te(C.bl_tree,he),C.bi_buf=0,C.bi_valid=0,qe(C)},i._tr_stored_block=S,i._tr_flush_block=function(C,D,G,W){var L,se,de=0;0<C.level?(C.strm.data_type===2&&(C.strm.data_type=function(ue){var ye,Pe=4093624447;for(ye=0;ye<=31;ye++,Pe>>>=1)if(1&Pe&&ue.dyn_ltree[2*ye]!==0)return o;if(ue.dyn_ltree[18]!==0||ue.dyn_ltree[20]!==0||ue.dyn_ltree[26]!==0)return a;for(ye=32;ye<m;ye++)if(ue.dyn_ltree[2*ye]!==0)return a;return o}(C)),V(C,C.l_desc),V(C,C.d_desc),de=function(ue){var ye;for(_(ue,ue.dyn_ltree,ue.l_desc.max_code),_(ue,ue.dyn_dtree,ue.d_desc.max_code),V(ue,ue.bl_desc),ye=E-1;3<=ye&&ue.bl_tree[2*oe[ye]+1]===0;ye--);return ue.opt_len+=3*(ye+1)+5+5+4,ye}(C),L=C.opt_len+3+7>>>3,(se=C.static_len+3+7>>>3)<=L&&(L=se)):L=se=G+5,G+4<=L&&D!==-1?S(C,D,G,W):C.strategy===4||se===L?(ve(C,2+(W?1:0),3),F(C,me,$)):(ve(C,4+(W?1:0),3),function(ue,ye,Pe,xe){var Fe;for(ve(ue,ye-257,5),ve(ue,Pe-1,5),ve(ue,xe-4,4),Fe=0;Fe<xe;Fe++)ve(ue,ue.bl_tree[2*oe[Fe]+1],3);B(ue,ue.dyn_ltree,ye-1),B(ue,ue.dyn_dtree,Pe-1)}(C,C.l_desc.max_code+1,C.d_desc.max_code+1,de+1),F(C,C.dyn_ltree,C.dyn_dtree)),qe(C),W&&ze(C)},i._tr_tally=function(C,D,G){return C.pending_buf[C.d_buf+2*C.last_lit]=D>>>8&255,C.pending_buf[C.d_buf+2*C.last_lit+1]=255&D,C.pending_buf[C.l_buf+C.last_lit]=255&G,C.last_lit++,D===0?C.dyn_ltree[2*G]++:(C.matches++,D--,C.dyn_ltree[2*(I[G]+m+1)]++,C.dyn_dtree[2*J(D)]++),C.last_lit===C.lit_bufsize-1},i._tr_align=function(C){ve(C,2,3),q(C,R,me),function(D){D.bi_valid===16?(ke(D,D.bi_buf),D.bi_buf=0,D.bi_valid=0):8<=D.bi_valid&&(D.pending_buf[D.pending++]=255&D.bi_buf,D.bi_buf>>=8,D.bi_valid-=8)}(C)}},{"../utils/common":41}],53:[function(n,r,i){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,r,i){(function(s){(function(o,a){if(!o.setImmediate){var l,u,d,m,w=1,g={},E=!1,b=o.document,A=Object.getPrototypeOf&&Object.getPrototypeOf(o);A=A&&A.setTimeout?A:o,l={}.toString.call(o.process)==="[object process]"?function(O){process.nextTick(function(){x(O)})}:function(){if(o.postMessage&&!o.importScripts){var O=!0,H=o.onmessage;return o.onmessage=function(){O=!1},o.postMessage("","*"),o.onmessage=H,O}}()?(m="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",R,!1):o.attachEvent("onmessage",R),function(O){o.postMessage(m+O,"*")}):o.MessageChannel?((d=new MessageChannel).port1.onmessage=function(O){x(O.data)},function(O){d.port2.postMessage(O)}):b&&"onreadystatechange"in b.createElement("script")?(u=b.documentElement,function(O){var H=b.createElement("script");H.onreadystatechange=function(){x(O),H.onreadystatechange=null,u.removeChild(H),H=null},u.appendChild(H)}):function(O){setTimeout(x,0,O)},A.setImmediate=function(O){typeof O!="function"&&(O=new Function(""+O));for(var H=new Array(arguments.length-1),Q=0;Q<H.length;Q++)H[Q]=arguments[Q+1];var z={callback:O,args:H};return g[w]=z,l(w),w++},A.clearImmediate=T}function T(O){delete g[O]}function x(O){if(E)setTimeout(x,0,O);else{var H=g[O];if(H){E=!0;try{(function(Q){var z=Q.callback,Z=Q.args;switch(Z.length){case 0:z();break;case 1:z(Z[0]);break;case 2:z(Z[0],Z[1]);break;case 3:z(Z[0],Z[1],Z[2]);break;default:z.apply(a,Z)}})(H)}finally{T(O),E=!1}}}}function R(O){O.source===o&&typeof O.data=="string"&&O.data.indexOf(m)===0&&x(+O.data.slice(m.length))}})(typeof self>"u"?s===void 0?this:s:self)}).call(this,typeof hr<"u"?hr:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(hb);var KD=hb.exports;const GD=hm(KD);var db={exports:{}};const QD={},YD=Object.freeze(Object.defineProperty({__proto__:null,default:QD},Symbol.toStringTag,{value:"Module"})),_d=gP(YD);(function(t,e){var n=void 0,r=function(i){return n||(n=new Promise(function(s,o){var a=typeof i<"u"?i:{},l=a.onAbort;a.onAbort=function(c){o(new Error(c)),l&&l(c)},a.postRun=a.postRun||[],a.postRun.push(function(){s(a)}),t=void 0;var u;u||(u=typeof a<"u"?a:{}),u.onRuntimeInitialized=function(){function c(ie,_e){switch(typeof _e){case"boolean":Vh(ie,_e?1:0);break;case"number":Nh(ie,_e);break;case"string":Mh(ie,_e,-1,-1);break;case"object":if(_e===null)Yl(ie);else if(_e.length!=null){var De=os(_e,Js);Lh(ie,De,_e.length,-1),no(De)}else ro(ie,"Wrong API use : tried to return a value of an unknown type ("+_e+").",-1);break;default:Yl(ie)}}function f(ie,_e){for(var De=[],je=0;je<ie;je+=1){var ot=M(_e+4*je,"i32"),Pt=Ph(ot);if(Pt===1||Pt===2)ot=Oh(ot);else if(Pt===3)ot=xi(ot);else if(Pt===4){Pt=ot,ot=Ql(Pt),Pt=Dh(Pt);for(var Xn=new Uint8Array(ot),Jn=0;Jn<ot;Jn+=1)Xn[Jn]=oe[Pt+Jn];ot=Xn}else ot=null;De.push(ot)}return De}function y(ie,_e){this.La=ie,this.db=_e,this.Ja=1,this.fb=[]}function P(ie,_e){if(this.db=_e,_e=Fe(ie)+1,this.Ya=to(_e),this.Ya===null)throw Error("Unable to allocate memory for the SQL string");rt(ie,me,this.Ya,_e),this.eb=this.Ya,this.Ua=this.ib=null}function j(ie){if(this.filename="dbfile_"+(4294967295*Math.random()>>>0),ie!=null){var _e=this.filename,De="/",je=_e;if(De&&(De=typeof De=="string"?De:Rr(De),je=_e?L(De+"/"+_e):De),_e=Bt(!0,!0),je=Re(je,(_e!==void 0?_e:438)&4095|32768,0),ie){if(typeof ie=="string"){De=Array(ie.length);for(var ot=0,Pt=ie.length;ot<Pt;++ot)De[ot]=ie.charCodeAt(ot);ie=De}ni(je,_e|146),De=Ei(je,577),Vl(De,ie,0,ie.length,0),ta(De),ni(je,_e)}}this.handleError(Be(this.filename,le)),this.db=M(le,"i32"),Xl(this.db),this.Za={},this.Na={}}var le=Nr(4),ge=u.cwrap,Be=ge("sqlite3_open","number",["string","number"]),mt=ge("sqlite3_close_v2","number",["number"]),Je=ge("sqlite3_exec","number",["number","string","number","number","number"]),sn=ge("sqlite3_changes","number",["number"]),fn=ge("sqlite3_prepare_v2","number",["number","string","number","number","number"]),oi=ge("sqlite3_sql","string",["number"]),vh=ge("sqlite3_normalized_sql","string",["number"]),oa=ge("sqlite3_prepare_v2","number",["number","number","number","number","number"]),jl=ge("sqlite3_bind_text","number",["number","number","number","number","number"]),ql=ge("sqlite3_bind_blob","number",["number","number","number","number","number"]),bh=ge("sqlite3_bind_double","number",["number","number","number"]),kh=ge("sqlite3_bind_int","number",["number","number","number"]),Eh=ge("sqlite3_bind_parameter_index","number",["number","string"]),Th=ge("sqlite3_step","number",["number"]),Ih=ge("sqlite3_errmsg","string",["number"]),Ah=ge("sqlite3_column_count","number",["number"]),Ai=ge("sqlite3_data_count","number",["number"]),xh=ge("sqlite3_column_double","number",["number","number"]),Hl=ge("sqlite3_column_text","string",["number","number"]),Wl=ge("sqlite3_column_blob","number",["number","number"]),Ch=ge("sqlite3_column_bytes","number",["number","number"]),Mr=ge("sqlite3_column_type","number",["number","number"]),Sh=ge("sqlite3_column_name","string",["number","number"]),Kl=ge("sqlite3_reset","number",["number"]),us=ge("sqlite3_clear_bindings","number",["number"]),Rh=ge("sqlite3_finalize","number",["number"]),Gl=ge("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),Ph=ge("sqlite3_value_type","number",["number"]),Ql=ge("sqlite3_value_bytes","number",["number"]),xi=ge("sqlite3_value_text","string",["number"]),Dh=ge("sqlite3_value_blob","number",["number"]),Oh=ge("sqlite3_value_double","number",["number"]),Nh=ge("sqlite3_result_double","",["number","number"]),Yl=ge("sqlite3_result_null","",["number"]),Mh=ge("sqlite3_result_text","",["number","string","number","number"]),Lh=ge("sqlite3_result_blob","",["number","number","number","number"]),Vh=ge("sqlite3_result_int","",["number","number"]),ro=ge("sqlite3_result_error","",["number","string","number"]),Zl=ge("sqlite3_aggregate_context","number",["number","number"]),Xl=ge("RegisterExtensionFunctions","number",["number"]);y.prototype.bind=function(ie){if(!this.La)throw"Statement closed";return this.reset(),Array.isArray(ie)?this.wb(ie):ie!=null&&typeof ie=="object"?this.xb(ie):!0},y.prototype.step=function(){if(!this.La)throw"Statement closed";this.Ja=1;var ie=Th(this.La);switch(ie){case 100:return!0;case 101:return!1;default:throw this.db.handleError(ie)}},y.prototype.rb=function(ie){return ie==null&&(ie=this.Ja,this.Ja+=1),xh(this.La,ie)},y.prototype.Ab=function(ie){if(ie==null&&(ie=this.Ja,this.Ja+=1),ie=Hl(this.La,ie),typeof BigInt!="function")throw Error("BigInt is not supported");return BigInt(ie)},y.prototype.Bb=function(ie){return ie==null&&(ie=this.Ja,this.Ja+=1),Hl(this.La,ie)},y.prototype.getBlob=function(ie){ie==null&&(ie=this.Ja,this.Ja+=1);var _e=Ch(this.La,ie);ie=Wl(this.La,ie);for(var De=new Uint8Array(_e),je=0;je<_e;je+=1)De[je]=oe[ie+je];return De},y.prototype.get=function(ie,_e){_e=_e||{},ie!=null&&this.bind(ie)&&this.step(),ie=[];for(var De=Ai(this.La),je=0;je<De;je+=1)switch(Mr(this.La,je)){case 1:var ot=_e.useBigInt?this.Ab(je):this.rb(je);ie.push(ot);break;case 2:ie.push(this.rb(je));break;case 3:ie.push(this.Bb(je));break;case 4:ie.push(this.getBlob(je));break;default:ie.push(null)}return ie},y.prototype.getColumnNames=function(){for(var ie=[],_e=Ah(this.La),De=0;De<_e;De+=1)ie.push(Sh(this.La,De));return ie},y.prototype.getAsObject=function(ie,_e){ie=this.get(ie,_e),_e=this.getColumnNames();for(var De={},je=0;je<_e.length;je+=1)De[_e[je]]=ie[je];return De},y.prototype.getSQL=function(){return oi(this.La)},y.prototype.getNormalizedSQL=function(){return vh(this.La)},y.prototype.run=function(ie){return ie!=null&&this.bind(ie),this.step(),this.reset()},y.prototype.nb=function(ie,_e){_e==null&&(_e=this.Ja,this.Ja+=1),ie=ct(ie);var De=os(ie,Js);this.fb.push(De),this.db.handleError(jl(this.La,_e,De,ie.length-1,0))},y.prototype.vb=function(ie,_e){_e==null&&(_e=this.Ja,this.Ja+=1);var De=os(ie,Js);this.fb.push(De),this.db.handleError(ql(this.La,_e,De,ie.length,0))},y.prototype.mb=function(ie,_e){_e==null&&(_e=this.Ja,this.Ja+=1),this.db.handleError((ie===(ie|0)?kh:bh)(this.La,_e,ie))},y.prototype.yb=function(ie){ie==null&&(ie=this.Ja,this.Ja+=1),ql(this.La,ie,0,0,0)},y.prototype.ob=function(ie,_e){switch(_e==null&&(_e=this.Ja,this.Ja+=1),typeof ie){case"string":this.nb(ie,_e);return;case"number":this.mb(ie,_e);return;case"bigint":this.nb(ie.toString(),_e);return;case"boolean":this.mb(ie+0,_e);return;case"object":if(ie===null){this.yb(_e);return}if(ie.length!=null){this.vb(ie,_e);return}}throw"Wrong API use : tried to bind a value of an unknown type ("+ie+")."},y.prototype.xb=function(ie){var _e=this;return Object.keys(ie).forEach(function(De){var je=Eh(_e.La,De);je!==0&&_e.ob(ie[De],je)}),!0},y.prototype.wb=function(ie){for(var _e=0;_e<ie.length;_e+=1)this.ob(ie[_e],_e+1);return!0},y.prototype.reset=function(){return this.freemem(),us(this.La)===0&&Kl(this.La)===0},y.prototype.freemem=function(){for(var ie;(ie=this.fb.pop())!==void 0;)no(ie)},y.prototype.free=function(){this.freemem();var ie=Rh(this.La)===0;return delete this.db.Za[this.La],this.La=0,ie},P.prototype.next=function(){if(this.Ya===null)return{done:!0};if(this.Ua!==null&&(this.Ua.free(),this.Ua=null),!this.db.db)throw this.gb(),Error("Database closed");var ie=as(),_e=Nr(4);S(le),S(_e);try{this.db.handleError(oa(this.db.db,this.eb,-1,le,_e)),this.eb=M(_e,"i32");var De=M(le,"i32");return De===0?(this.gb(),{done:!0}):(this.Ua=new y(De,this.db),this.db.Za[De]=this.Ua,{value:this.Ua,done:!1})}catch(je){throw this.ib=G(this.eb),this.gb(),je}finally{Ii(ie)}},P.prototype.gb=function(){no(this.Ya),this.Ya=null},P.prototype.getRemainingSQL=function(){return this.ib!==null?this.ib:G(this.eb)},typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(P.prototype[Symbol.iterator]=function(){return this}),j.prototype.run=function(ie,_e){if(!this.db)throw"Database closed";if(_e){ie=this.prepare(ie,_e);try{ie.step()}finally{ie.free()}}else this.handleError(Je(this.db,ie,0,0,le));return this},j.prototype.exec=function(ie,_e,De){if(!this.db)throw"Database closed";var je=as(),ot=null;try{var Pt=ra(ie),Xn=Nr(4);for(ie=[];M(Pt,"i8")!==0;){S(le),S(Xn),this.handleError(oa(this.db,Pt,-1,le,Xn));var Jn=M(le,"i32");if(Pt=M(Xn,"i32"),Jn!==0){var In=null;for(ot=new y(Jn,this),_e!=null&&ot.bind(_e);ot.step();)In===null&&(In={columns:ot.getColumnNames(),values:[]},ie.push(In)),In.values.push(ot.get(null,De));ot.free()}}return ie}catch(er){throw ot&&ot.free(),er}finally{Ii(je)}},j.prototype.each=function(ie,_e,De,je,ot){typeof _e=="function"&&(je=De,De=_e,_e=void 0),ie=this.prepare(ie,_e);try{for(;ie.step();)De(ie.getAsObject(null,ot))}finally{ie.free()}if(typeof je=="function")return je()},j.prototype.prepare=function(ie,_e){if(S(le),this.handleError(fn(this.db,ie,-1,le,0)),ie=M(le,"i32"),ie===0)throw"Nothing to prepare";var De=new y(ie,this);return _e!=null&&De.bind(_e),this.Za[ie]=De},j.prototype.iterateStatements=function(ie){return new P(ie,this)},j.prototype.export=function(){Object.values(this.Za).forEach(function(_e){_e.free()}),Object.values(this.Na).forEach(si),this.Na={},this.handleError(mt(this.db));var ie=gh(this.filename);return this.handleError(Be(this.filename,le)),this.db=M(le,"i32"),Xl(this.db),ie},j.prototype.close=function(){this.db!==null&&(Object.values(this.Za).forEach(function(ie){ie.free()}),Object.values(this.Na).forEach(si),this.Na={},this.handleError(mt(this.db)),cr("/"+this.filename),this.db=null)},j.prototype.handleError=function(ie){if(ie===0)return null;throw ie=Ih(this.db),Error(ie)},j.prototype.getRowsModified=function(){return sn(this.db)},j.prototype.create_function=function(ie,_e){Object.prototype.hasOwnProperty.call(this.Na,ie)&&(si(this.Na[ie]),delete this.Na[ie]);var De=eo(function(je,ot,Pt){ot=f(ot,Pt);try{var Xn=_e.apply(null,ot)}catch(Jn){ro(je,Jn,-1);return}c(je,Xn)},"viii");return this.Na[ie]=De,this.handleError(Gl(this.db,ie,_e.length,1,0,De,0,0,0)),this},j.prototype.create_aggregate=function(ie,_e){var De=_e.init||function(){return null},je=_e.finalize||function(In){return In},ot=_e.step;if(!ot)throw"An aggregate function must have a step function in "+ie;var Pt={};Object.hasOwnProperty.call(this.Na,ie)&&(si(this.Na[ie]),delete this.Na[ie]),_e=ie+"__finalize",Object.hasOwnProperty.call(this.Na,_e)&&(si(this.Na[_e]),delete this.Na[_e]);var Xn=eo(function(In,er,io){var wr=Zl(In,1);Object.hasOwnProperty.call(Pt,wr)||(Pt[wr]=De()),er=f(er,io),er=[Pt[wr]].concat(er);try{Pt[wr]=ot.apply(null,er)}catch(so){delete Pt[wr],ro(In,so,-1)}},"viii"),Jn=eo(function(In){var er=Zl(In,1);try{var io=je(Pt[er])}catch(wr){delete Pt[er],ro(In,wr,-1);return}c(In,io),delete Pt[er]},"vi");return this.Na[ie]=Xn,this.Na[_e]=Jn,this.handleError(Gl(this.db,ie,ot.length-1,1,0,0,Xn,Jn,0)),this},u.Database=j};var d=Object.assign({},u),m="./this.program",w=typeof window=="object",g=typeof importScripts=="function",E=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",b="",A,T,x;if(E){var R=_d,O=_d;b=g?O.dirname(b)+"/":__dirname+"/",A=(c,f)=>(c=tt(c)?new URL(c):O.normalize(c),R.readFileSync(c,f?void 0:"utf8")),x=c=>(c=A(c,!0),c.buffer||(c=new Uint8Array(c)),c),T=(c,f,y,P=!0)=>{c=tt(c)?new URL(c):O.normalize(c),R.readFile(c,P?void 0:"utf8",(j,le)=>{j?y(j):f(P?le.buffer:le)})},!u.thisProgram&&1<process.argv.length&&(m=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),t.exports=u,u.inspect=()=>"[Emscripten Module object]"}else(w||g)&&(g?b=self.location.href:typeof document<"u"&&document.currentScript&&(b=document.currentScript.src),b=b.indexOf("blob:")!==0?b.substr(0,b.replace(/[?#].*/,"").lastIndexOf("/")+1):"",A=c=>{var f=new XMLHttpRequest;return f.open("GET",c,!1),f.send(null),f.responseText},g&&(x=c=>{var f=new XMLHttpRequest;return f.open("GET",c,!1),f.responseType="arraybuffer",f.send(null),new Uint8Array(f.response)}),T=(c,f,y)=>{var P=new XMLHttpRequest;P.open("GET",c,!0),P.responseType="arraybuffer",P.onload=()=>{P.status==200||P.status==0&&P.response?f(P.response):y()},P.onerror=y,P.send(null)});var H=u.print||console.log.bind(console),Q=u.printErr||console.error.bind(console);Object.assign(u,d),d=null,u.thisProgram&&(m=u.thisProgram);var z;u.wasmBinary&&(z=u.wasmBinary),typeof WebAssembly!="object"&&ve("no native wasm support detected");var Z,ee=!1,oe,me,$,X,I,re,ae;function K(){var c=Z.buffer;u.HEAP8=oe=new Int8Array(c),u.HEAP16=$=new Int16Array(c),u.HEAPU8=me=new Uint8Array(c),u.HEAPU16=new Uint16Array(c),u.HEAP32=X=new Int32Array(c),u.HEAPU32=I=new Uint32Array(c),u.HEAPF32=re=new Float32Array(c),u.HEAPF64=ae=new Float64Array(c)}var he=[],ne=[],ce=[];function te(){var c=u.preRun.shift();he.unshift(c)}var J=0,ke=null;function ve(c){var f;throw(f=u.onAbort)==null||f.call(u,c),c="Aborted("+c+")",Q(c),ee=!0,new WebAssembly.RuntimeError(c+". Build with -sASSERTIONS for more info.")}var q=c=>c.startsWith("data:application/octet-stream;base64,"),tt=c=>c.startsWith("file://"),ut;if(ut="sql-wasm.wasm",!q(ut)){var qe=ut;ut=u.locateFile?u.locateFile(qe,b):b+qe}function ze(c){if(c==ut&&z)return new Uint8Array(z);if(x)return x(c);throw"both async and sync fetching of the wasm failed"}function He(c){if(!z&&(w||g)){if(typeof fetch=="function"&&!tt(c))return fetch(c,{credentials:"same-origin"}).then(f=>{if(!f.ok)throw"failed to load wasm binary file at '"+c+"'";return f.arrayBuffer()}).catch(()=>ze(c));if(T)return new Promise((f,y)=>{T(c,P=>f(new Uint8Array(P)),y)})}return Promise.resolve().then(()=>ze(c))}function Qe(c,f,y){return He(c).then(P=>WebAssembly.instantiate(P,f)).then(P=>P).then(y,P=>{Q(`failed to asynchronously prepare wasm: ${P}`),ve(P)})}function F(c,f){var y=ut;z||typeof WebAssembly.instantiateStreaming!="function"||q(y)||tt(y)||E||typeof fetch!="function"?Qe(y,c,f):fetch(y,{credentials:"same-origin"}).then(P=>WebAssembly.instantiateStreaming(P,c).then(f,function(j){return Q(`wasm streaming compile failed: ${j}`),Q("falling back to ArrayBuffer instantiation"),Qe(y,c,f)}))}var V,_,B=c=>{for(;0<c.length;)c.shift()(u)};function M(c,f="i8"){switch(f.endsWith("*")&&(f="*"),f){case"i1":return oe[c>>0];case"i8":return oe[c>>0];case"i16":return $[c>>1];case"i32":return X[c>>2];case"i64":ve("to do getValue(i64) use WASM_BIGINT");case"float":return re[c>>2];case"double":return ae[c>>3];case"*":return I[c>>2];default:ve(`invalid type for getValue: ${f}`)}}function S(c){var f="i32";switch(f.endsWith("*")&&(f="*"),f){case"i1":oe[c>>0]=0;break;case"i8":oe[c>>0]=0;break;case"i16":$[c>>1]=0;break;case"i32":X[c>>2]=0;break;case"i64":ve("to do setValue(i64) use WASM_BIGINT");case"float":re[c>>2]=0;break;case"double":ae[c>>3]=0;break;case"*":I[c>>2]=0;break;default:ve(`invalid type for setValue: ${f}`)}}var C=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,D=(c,f,y)=>{var P=f+y;for(y=f;c[y]&&!(y>=P);)++y;if(16<y-f&&c.buffer&&C)return C.decode(c.subarray(f,y));for(P="";f<y;){var j=c[f++];if(j&128){var le=c[f++]&63;if((j&224)==192)P+=String.fromCharCode((j&31)<<6|le);else{var ge=c[f++]&63;j=(j&240)==224?(j&15)<<12|le<<6|ge:(j&7)<<18|le<<12|ge<<6|c[f++]&63,65536>j?P+=String.fromCharCode(j):(j-=65536,P+=String.fromCharCode(55296|j>>10,56320|j&1023))}}else P+=String.fromCharCode(j)}return P},G=(c,f)=>c?D(me,c,f):"",W=(c,f)=>{for(var y=0,P=c.length-1;0<=P;P--){var j=c[P];j==="."?c.splice(P,1):j===".."?(c.splice(P,1),y++):y&&(c.splice(P,1),y--)}if(f)for(;y;y--)c.unshift("..");return c},L=c=>{var f=c.charAt(0)==="/",y=c.substr(-1)==="/";return(c=W(c.split("/").filter(P=>!!P),!f).join("/"))||f||(c="."),c&&y&&(c+="/"),(f?"/":"")+c},se=c=>{var f=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(c).slice(1);return c=f[0],f=f[1],!c&&!f?".":(f&&(f=f.substr(0,f.length-1)),c+f)},de=c=>{if(c==="/")return"/";c=L(c),c=c.replace(/\/$/,"");var f=c.lastIndexOf("/");return f===-1?c:c.substr(f+1)},ue=()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return y=>crypto.getRandomValues(y);if(E)try{var c=_d;if(c.randomFillSync)return y=>c.randomFillSync(y);var f=c.randomBytes;return y=>(y.set(f(y.byteLength)),y)}catch{}ve("initRandomDevice")},ye=c=>(ye=ue())(c);function Pe(){for(var c="",f=!1,y=arguments.length-1;-1<=y&&!f;y--){if(f=0<=y?arguments[y]:"/",typeof f!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!f)return"";c=f+"/"+c,f=f.charAt(0)==="/"}return c=W(c.split("/").filter(P=>!!P),!f).join("/"),(f?"/":"")+c||"."}var xe=[],Fe=c=>{for(var f=0,y=0;y<c.length;++y){var P=c.charCodeAt(y);127>=P?f++:2047>=P?f+=2:55296<=P&&57343>=P?(f+=4,++y):f+=3}return f},rt=(c,f,y,P)=>{if(!(0<P))return 0;var j=y;P=y+P-1;for(var le=0;le<c.length;++le){var ge=c.charCodeAt(le);if(55296<=ge&&57343>=ge){var Be=c.charCodeAt(++le);ge=65536+((ge&1023)<<10)|Be&1023}if(127>=ge){if(y>=P)break;f[y++]=ge}else{if(2047>=ge){if(y+1>=P)break;f[y++]=192|ge>>6}else{if(65535>=ge){if(y+2>=P)break;f[y++]=224|ge>>12}else{if(y+3>=P)break;f[y++]=240|ge>>18,f[y++]=128|ge>>12&63}f[y++]=128|ge>>6&63}f[y++]=128|ge&63}}return f[y]=0,y-j};function ct(c,f){var y=Array(Fe(c)+1);return c=rt(c,y,0,y.length),f&&(y.length=c),y}var Lt=[];function ft(c,f){Lt[c]={input:[],output:[],Xa:f},Y(c,dn)}var dn={open(c){var f=Lt[c.node.rdev];if(!f)throw new Te(43);c.tty=f,c.seekable=!1},close(c){c.tty.Xa.fsync(c.tty)},fsync(c){c.tty.Xa.fsync(c.tty)},read(c,f,y,P){if(!c.tty||!c.tty.Xa.sb)throw new Te(60);for(var j=0,le=0;le<P;le++){try{var ge=c.tty.Xa.sb(c.tty)}catch{throw new Te(29)}if(ge===void 0&&j===0)throw new Te(6);if(ge==null)break;j++,f[y+le]=ge}return j&&(c.node.timestamp=Date.now()),j},write(c,f,y,P){if(!c.tty||!c.tty.Xa.jb)throw new Te(60);try{for(var j=0;j<P;j++)c.tty.Xa.jb(c.tty,f[y+j])}catch{throw new Te(29)}return P&&(c.node.timestamp=Date.now()),j}},Ot={sb(){e:{if(!xe.length){var c=null;if(E){var f=Buffer.alloc(256),y=0,P=process.stdin.fd;try{y=R.readSync(P,f)}catch(j){if(j.toString().includes("EOF"))y=0;else throw j}0<y?c=f.slice(0,y).toString("utf-8"):c=null}else typeof window<"u"&&typeof window.prompt=="function"?(c=window.prompt("Input: "),c!==null&&(c+=`
`)):typeof readline=="function"&&(c=readline(),c!==null&&(c+=`
`));if(!c){c=null;break e}xe=ct(c,!0)}c=xe.shift()}return c},jb(c,f){f===null||f===10?(H(D(c.output,0)),c.output=[]):f!=0&&c.output.push(f)},fsync(c){c.output&&0<c.output.length&&(H(D(c.output,0)),c.output=[])},Mb(){return{Ib:25856,Kb:5,Hb:191,Jb:35387,Gb:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},Nb(){return 0},Ob(){return[24,80]}},kt={jb(c,f){f===null||f===10?(Q(D(c.output,0)),c.output=[]):f!=0&&c.output.push(f)},fsync(c){c.output&&0<c.output.length&&(Q(D(c.output,0)),c.output=[])}};function qn(c,f){var y=c.Ia?c.Ia.length:0;y>=f||(f=Math.max(f,y*(1048576>y?2:1.125)>>>0),y!=0&&(f=Math.max(f,256)),y=c.Ia,c.Ia=new Uint8Array(f),0<c.Ma&&c.Ia.set(y.subarray(0,c.Ma),0))}var We={Qa:null,Ra(){return We.createNode(null,"/",16895,0)},createNode(c,f,y,P){if((y&61440)===24576||(y&61440)===4096)throw new Te(63);return We.Qa||(We.Qa={dir:{node:{Pa:We.Ga.Pa,Oa:We.Ga.Oa,lookup:We.Ga.lookup,ab:We.Ga.ab,rename:We.Ga.rename,unlink:We.Ga.unlink,rmdir:We.Ga.rmdir,readdir:We.Ga.readdir,symlink:We.Ga.symlink},stream:{Ta:We.Ha.Ta}},file:{node:{Pa:We.Ga.Pa,Oa:We.Ga.Oa},stream:{Ta:We.Ha.Ta,read:We.Ha.read,write:We.Ha.write,lb:We.Ha.lb,bb:We.Ha.bb,cb:We.Ha.cb}},link:{node:{Pa:We.Ga.Pa,Oa:We.Ga.Oa,readlink:We.Ga.readlink},stream:{}},pb:{node:{Pa:We.Ga.Pa,Oa:We.Ga.Oa},stream:Ne}}),y=Zn(c,f,y,P),tn(y.mode)?(y.Ga=We.Qa.dir.node,y.Ha=We.Qa.dir.stream,y.Ia={}):(y.mode&61440)===32768?(y.Ga=We.Qa.file.node,y.Ha=We.Qa.file.stream,y.Ma=0,y.Ia=null):(y.mode&61440)===40960?(y.Ga=We.Qa.link.node,y.Ha=We.Qa.link.stream):(y.mode&61440)===8192&&(y.Ga=We.Qa.pb.node,y.Ha=We.Qa.pb.stream),y.timestamp=Date.now(),c&&(c.Ia[f]=y,c.timestamp=y.timestamp),y},Lb(c){return c.Ia?c.Ia.subarray?c.Ia.subarray(0,c.Ma):new Uint8Array(c.Ia):new Uint8Array(0)},Ga:{Pa(c){var f={};return f.dev=(c.mode&61440)===8192?c.id:1,f.ino=c.id,f.mode=c.mode,f.nlink=1,f.uid=0,f.gid=0,f.rdev=c.rdev,tn(c.mode)?f.size=4096:(c.mode&61440)===32768?f.size=c.Ma:(c.mode&61440)===40960?f.size=c.link.length:f.size=0,f.atime=new Date(c.timestamp),f.mtime=new Date(c.timestamp),f.ctime=new Date(c.timestamp),f.zb=4096,f.blocks=Math.ceil(f.size/f.zb),f},Oa(c,f){if(f.mode!==void 0&&(c.mode=f.mode),f.timestamp!==void 0&&(c.timestamp=f.timestamp),f.size!==void 0&&(f=f.size,c.Ma!=f))if(f==0)c.Ia=null,c.Ma=0;else{var y=c.Ia;c.Ia=new Uint8Array(f),y&&c.Ia.set(y.subarray(0,Math.min(f,c.Ma))),c.Ma=f}},lookup(){throw yn[44]},ab(c,f,y,P){return We.createNode(c,f,y,P)},rename(c,f,y){if(tn(c.mode)){try{var P=un(f,y)}catch{}if(P)for(var j in P.Ia)throw new Te(55)}delete c.parent.Ia[c.name],c.parent.timestamp=Date.now(),c.name=y,f.Ia[y]=c,f.timestamp=c.parent.timestamp,c.parent=f},unlink(c,f){delete c.Ia[f],c.timestamp=Date.now()},rmdir(c,f){var y=un(c,f),P;for(P in y.Ia)throw new Te(55);delete c.Ia[f],c.timestamp=Date.now()},readdir(c){var f=[".",".."],y;for(y of Object.keys(c.Ia))f.push(y);return f},symlink(c,f,y){return c=We.createNode(c,f,41471,0),c.link=y,c},readlink(c){if((c.mode&61440)!==40960)throw new Te(28);return c.link}},Ha:{read(c,f,y,P,j){var le=c.node.Ia;if(j>=c.node.Ma)return 0;if(c=Math.min(c.node.Ma-j,P),8<c&&le.subarray)f.set(le.subarray(j,j+c),y);else for(P=0;P<c;P++)f[y+P]=le[j+P];return c},write(c,f,y,P,j,le){if(f.buffer===oe.buffer&&(le=!1),!P)return 0;if(c=c.node,c.timestamp=Date.now(),f.subarray&&(!c.Ia||c.Ia.subarray)){if(le)return c.Ia=f.subarray(y,y+P),c.Ma=P;if(c.Ma===0&&j===0)return c.Ia=f.slice(y,y+P),c.Ma=P;if(j+P<=c.Ma)return c.Ia.set(f.subarray(y,y+P),j),P}if(qn(c,j+P),c.Ia.subarray&&f.subarray)c.Ia.set(f.subarray(y,y+P),j);else for(le=0;le<P;le++)c.Ia[j+le]=f[y+le];return c.Ma=Math.max(c.Ma,j+P),P},Ta(c,f,y){if(y===1?f+=c.position:y===2&&(c.node.mode&61440)===32768&&(f+=c.node.Ma),0>f)throw new Te(28);return f},lb(c,f,y){qn(c.node,f+y),c.node.Ma=Math.max(c.node.Ma,f+y)},bb(c,f,y,P,j){if((c.node.mode&61440)!==32768)throw new Te(43);if(c=c.node.Ia,j&2||c.buffer!==oe.buffer){if((0<y||y+f<c.length)&&(c.subarray?c=c.subarray(y,y+f):c=Array.prototype.slice.call(c,y,y+f)),y=!0,f=65536*Math.ceil(f/65536),(j=Bl(65536,f))?(me.fill(0,j,j+f),f=j):f=0,!f)throw new Te(48);oe.set(c,f)}else y=!1,f=c.byteOffset;return{Db:f,ub:y}},cb(c,f,y,P){return We.Ha.write(c,f,0,P,y,!1),0}}},Bt=(c,f)=>{var y=0;return c&&(y|=365),f&&(y|=146),y},Pn=null,gr={},wn=[],ur=1,zt=null,Hn=!0,Te=null,yn={};function en(c,f={}){if(c=Pe(c),!c)return{path:"",node:null};if(f=Object.assign({qb:!0,kb:0},f),8<f.kb)throw new Te(32);c=c.split("/").filter(ge=>!!ge);for(var y=Pn,P="/",j=0;j<c.length;j++){var le=j===c.length-1;if(le&&f.parent)break;if(y=un(y,c[j]),P=L(P+"/"+c[j]),y.Va&&(!le||le&&f.qb)&&(y=y.Va.root),!le||f.Sa){for(le=0;(y.mode&61440)===40960;)if(y=Dr(P),P=Pe(se(P),y),y=en(P,{kb:f.kb+1}).node,40<le++)throw new Te(32)}}return{path:P,node:y}}function Rr(c){for(var f;;){if(c===c.parent)return c=c.Ra.tb,f?c[c.length-1]!=="/"?`${c}/${f}`:c+f:c;f=f?`${c.name}/${f}`:c.name,c=c.parent}}function Yn(c,f){for(var y=0,P=0;P<f.length;P++)y=(y<<5)-y+f.charCodeAt(P)|0;return(c+y>>>0)%zt.length}function it(c){var f=Yn(c.parent.id,c.name);if(zt[f]===c)zt[f]=c.Wa;else for(f=zt[f];f;){if(f.Wa===c){f.Wa=c.Wa;break}f=f.Wa}}function un(c,f){var y;if(y=(y=yt(c,"x"))?y:c.Ga.lookup?0:2)throw new Te(y,c);for(y=zt[Yn(c.id,f)];y;y=y.Wa){var P=y.name;if(y.parent.id===c.id&&P===f)return y}return c.Ga.lookup(c,f)}function Zn(c,f,y,P){return c=new sa(c,f,y,P),f=Yn(c.parent.id,c.name),c.Wa=zt[f],zt[f]=c}function tn(c){return(c&61440)===16384}function Qt(c){var f=["r","w","rw"][c&3];return c&512&&(f+="w"),f}function yt(c,f){if(Hn)return 0;if(!f.includes("r")||c.mode&292){if(f.includes("w")&&!(c.mode&146)||f.includes("x")&&!(c.mode&73))return 2}else return 2;return 0}function ti(c,f){try{return un(c,f),20}catch{}return yt(c,"wx")}function ki(c,f,y){try{var P=un(c,f)}catch(j){return j.Ka}if(c=yt(c,"wx"))return c;if(y){if(!tn(P.mode))return 54;if(P===P.parent||Rr(P)==="/")return 10}else if(tn(P.mode))return 31;return 0}function Pr(){for(var c=0;4096>=c;c++)if(!wn[c])return c;throw new Te(33)}function bt(c){if(c=wn[c],!c)throw new Te(8);return c}function Ws(c,f=-1){return rs||(rs=function(){this.$a={}},rs.prototype={},Object.defineProperties(rs.prototype,{object:{get(){return this.node},set(y){this.node=y}},flags:{get(){return this.$a.flags},set(y){this.$a.flags=y}},position:{get(){return this.$a.position},set(y){this.$a.position=y}}})),c=Object.assign(new rs,c),f==-1&&(f=Pr()),c.fd=f,wn[f]=c}var Ne={open(c){var f,y;c.Ha=gr[c.node.rdev].Ha,(y=(f=c.Ha).open)==null||y.call(f,c)},Ta(){throw new Te(70)}};function Y(c,f){gr[c]={Ha:f}}function Ee(c,f){var y=f==="/",P=!f;if(y&&Pn)throw new Te(10);if(!y&&!P){var j=en(f,{qb:!1});if(f=j.path,j=j.node,j.Va)throw new Te(10);if(!tn(j.mode))throw new Te(54)}f={type:c,Pb:{},tb:f,Cb:[]},c=c.Ra(f),c.Ra=f,f.root=c,y?Pn=c:j&&(j.Va=f,j.Ra&&j.Ra.Cb.push(f))}function Re(c,f,y){var P=en(c,{parent:!0}).node;if(c=de(c),!c||c==="."||c==="..")throw new Te(28);var j=ti(P,c);if(j)throw new Te(j);if(!P.Ga.ab)throw new Te(63);return P.Ga.ab(P,c,f,y)}function st(c,f){return Re(c,(f!==void 0?f:511)&1023|16384,0)}function Yt(c,f,y){typeof y>"u"&&(y=f,f=438),Re(c,f|8192,y)}function nn(c,f){if(!Pe(c))throw new Te(44);var y=en(f,{parent:!0}).node;if(!y)throw new Te(44);f=de(f);var P=ti(y,f);if(P)throw new Te(P);if(!y.Ga.symlink)throw new Te(63);y.Ga.symlink(y,f,c)}function jt(c){var f=en(c,{parent:!0}).node;c=de(c);var y=un(f,c),P=ki(f,c,!0);if(P)throw new Te(P);if(!f.Ga.rmdir)throw new Te(63);if(y.Va)throw new Te(10);f.Ga.rmdir(f,c),it(y)}function cr(c){var f=en(c,{parent:!0}).node;if(!f)throw new Te(44);c=de(c);var y=un(f,c),P=ki(f,c,!1);if(P)throw new Te(P);if(!f.Ga.unlink)throw new Te(63);if(y.Va)throw new Te(10);f.Ga.unlink(f,c),it(y)}function Dr(c){if(c=en(c).node,!c)throw new Te(44);if(!c.Ga.readlink)throw new Te(28);return Pe(Rr(c.parent),c.Ga.readlink(c))}function rn(c,f){if(c=en(c,{Sa:!f}).node,!c)throw new Te(44);if(!c.Ga.Pa)throw new Te(63);return c.Ga.Pa(c)}function ts(c){return rn(c,!0)}function ni(c,f){if(c=typeof c=="string"?en(c,{Sa:!0}).node:c,!c.Ga.Oa)throw new Te(63);c.Ga.Oa(c,{mode:f&4095|c.mode&-4096,timestamp:Date.now()})}function Ks(c,f){if(0>f)throw new Te(28);if(c=typeof c=="string"?en(c,{Sa:!0}).node:c,!c.Ga.Oa)throw new Te(63);if(tn(c.mode))throw new Te(31);if((c.mode&61440)!==32768)throw new Te(28);var y=yt(c,"w");if(y)throw new Te(y);c.Ga.Oa(c,{size:f,timestamp:Date.now()})}function Ei(c,f,y){if(c==="")throw new Te(44);if(typeof f=="string"){var P={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[f];if(typeof P>"u")throw Error(`Unknown file open mode: ${f}`);f=P}if(y=f&64?(typeof y>"u"?438:y)&4095|32768:0,typeof c=="object")var j=c;else{c=L(c);try{j=en(c,{Sa:!(f&131072)}).node}catch{}}if(P=!1,f&64)if(j){if(f&128)throw new Te(20)}else j=Re(c,y,0),P=!0;if(!j)throw new Te(44);if((j.mode&61440)===8192&&(f&=-513),f&65536&&!tn(j.mode))throw new Te(54);if(!P&&(y=j?(j.mode&61440)===40960?32:tn(j.mode)&&(Qt(f)!=="r"||f&512)?31:yt(j,Qt(f)):44))throw new Te(y);return f&512&&!P&&Ks(j,0),f&=-131713,j=Ws({node:j,path:Rr(j),flags:f,seekable:!0,position:0,Ha:j.Ha,Fb:[],error:!1}),j.Ha.open&&j.Ha.open(j),!u.logReadFiles||f&1||(It||(It={}),c in It||(It[c]=1)),j}function ta(c){if(c.fd===null)throw new Te(8);c.hb&&(c.hb=null);try{c.Ha.close&&c.Ha.close(c)}catch(f){throw f}finally{wn[c.fd]=null}c.fd=null}function Or(c,f,y){if(c.fd===null)throw new Te(8);if(!c.seekable||!c.Ha.Ta)throw new Te(70);if(y!=0&&y!=1&&y!=2)throw new Te(28);c.position=c.Ha.Ta(c,f,y),c.Fb=[]}function Ll(c,f,y,P,j){if(0>P||0>j)throw new Te(28);if(c.fd===null)throw new Te(8);if((c.flags&2097155)===1)throw new Te(8);if(tn(c.node.mode))throw new Te(31);if(!c.Ha.read)throw new Te(28);var le=typeof j<"u";if(!le)j=c.position;else if(!c.seekable)throw new Te(70);return f=c.Ha.read(c,f,y,P,j),le||(c.position+=f),f}function Vl(c,f,y,P,j){if(0>P||0>j)throw new Te(28);if(c.fd===null)throw new Te(8);if(!(c.flags&2097155))throw new Te(8);if(tn(c.node.mode))throw new Te(31);if(!c.Ha.write)throw new Te(28);c.seekable&&c.flags&1024&&Or(c,0,2);var le=typeof j<"u";if(!le)j=c.position;else if(!c.seekable)throw new Te(70);return f=c.Ha.write(c,f,y,P,j,void 0),le||(c.position+=f),f}function gh(c){var f,y=Ei(c,y||0);c=rn(c).size;var P=new Uint8Array(c);return Ll(y,P,0,c,0),f=P,ta(y),f}function Gs(){Te||(Te=function(c,f){this.name="ErrnoError",this.node=f,this.Eb=function(y){this.Ka=y},this.Eb(c),this.message="FS error"},Te.prototype=Error(),Te.prototype.constructor=Te,[44].forEach(c=>{yn[c]=new Te(c),yn[c].stack="<generic error, no stack>"}))}var Ul;function ns(c,f,y){c=L("/dev/"+c);var P=Bt(!!f,!!y);Fl||(Fl=64);var j=Fl++<<8|0;Y(j,{open(le){le.seekable=!1},close(){var le;(le=y==null?void 0:y.buffer)!=null&&le.length&&y(10)},read(le,ge,Be,mt){for(var Je=0,sn=0;sn<mt;sn++){try{var fn=f()}catch{throw new Te(29)}if(fn===void 0&&Je===0)throw new Te(6);if(fn==null)break;Je++,ge[Be+sn]=fn}return Je&&(le.node.timestamp=Date.now()),Je},write(le,ge,Be,mt){for(var Je=0;Je<mt;Je++)try{y(ge[Be+Je])}catch{throw new Te(29)}return mt&&(le.node.timestamp=Date.now()),Je}}),Yt(c,P,j)}var Fl,Nt={},rs,It;function ri(c,f,y){if(f.charAt(0)==="/")return f;if(c=c===-100?"/":bt(c).path,f.length==0){if(!y)throw new Te(44);return c}return L(c+"/"+f)}function Qs(c,f,y){try{var P=c(f)}catch(le){if(le&&le.node&&L(f)!==L(Rr(le.node)))return-54;throw le}X[y>>2]=P.dev,X[y+4>>2]=P.mode,I[y+8>>2]=P.nlink,X[y+12>>2]=P.uid,X[y+16>>2]=P.gid,X[y+20>>2]=P.rdev,_=[P.size>>>0,(V=P.size,1<=+Math.abs(V)?0<V?+Math.floor(V/4294967296)>>>0:~~+Math.ceil((V-+(~~V>>>0))/4294967296)>>>0:0)],X[y+24>>2]=_[0],X[y+28>>2]=_[1],X[y+32>>2]=4096,X[y+36>>2]=P.blocks,c=P.atime.getTime(),f=P.mtime.getTime();var j=P.ctime.getTime();return _=[Math.floor(c/1e3)>>>0,(V=Math.floor(c/1e3),1<=+Math.abs(V)?0<V?+Math.floor(V/4294967296)>>>0:~~+Math.ceil((V-+(~~V>>>0))/4294967296)>>>0:0)],X[y+40>>2]=_[0],X[y+44>>2]=_[1],I[y+48>>2]=c%1e3*1e3,_=[Math.floor(f/1e3)>>>0,(V=Math.floor(f/1e3),1<=+Math.abs(V)?0<V?+Math.floor(V/4294967296)>>>0:~~+Math.ceil((V-+(~~V>>>0))/4294967296)>>>0:0)],X[y+56>>2]=_[0],X[y+60>>2]=_[1],I[y+64>>2]=f%1e3*1e3,_=[Math.floor(j/1e3)>>>0,(V=Math.floor(j/1e3),1<=+Math.abs(V)?0<V?+Math.floor(V/4294967296)>>>0:~~+Math.ceil((V-+(~~V>>>0))/4294967296)>>>0:0)],X[y+72>>2]=_[0],X[y+76>>2]=_[1],I[y+80>>2]=j%1e3*1e3,_=[P.ino>>>0,(V=P.ino,1<=+Math.abs(V)?0<V?+Math.floor(V/4294967296)>>>0:~~+Math.ceil((V-+(~~V>>>0))/4294967296)>>>0:0)],X[y+88>>2]=_[0],X[y+92>>2]=_[1],0}var Ys=void 0;function Zs(){var c=X[+Ys>>2];return Ys+=4,c}var is=(c,f)=>f+2097152>>>0<4194305-!!c?(c>>>0)+4294967296*f:NaN,_h=[0,31,60,91,121,152,182,213,244,274,305,335],na=[0,31,59,90,120,151,181,212,243,273,304,334],Ti=c=>{var f=Fe(c)+1,y=to(f);return y&&rt(c,me,y,f),y},Xs={},ss=()=>{if(!qt){var c={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:m||"./this.program"},f;for(f in Xs)Xs[f]===void 0?delete c[f]:c[f]=Xs[f];var y=[];for(f in c)y.push(`${f}=${c[f]}`);qt=y}return qt},qt,ra=c=>{var f=Fe(c)+1,y=Nr(f);return rt(c,me,y,f),y},wh=(c,f,y,P)=>{var j={string:Je=>{var sn=0;return Je!=null&&Je!==0&&(sn=ra(Je)),sn},array:Je=>{var sn=Nr(Je.length);return oe.set(Je,sn),sn}};c=u["_"+c];var le=[],ge=0;if(P)for(var Be=0;Be<P.length;Be++){var mt=j[y[Be]];mt?(ge===0&&(ge=as()),le[Be]=mt(P[Be])):le[Be]=P[Be]}return y=c.apply(null,le),y=function(Je){return ge!==0&&Ii(ge),f==="string"?Je?D(me,Je):"":f==="boolean"?!!Je:Je}(y)},Js=0,os=(c,f)=>(f=f==1?Nr(c.length):to(c.length),c.subarray||c.slice||(c=new Uint8Array(c)),me.set(c,f),f),ii,ia=[],_r,si=c=>{ii.delete(_r.get(c)),_r.set(c,null),ia.push(c)},eo=(c,f)=>{if(!ii){ii=new WeakMap;var y=_r.length;if(ii)for(var P=0;P<0+y;P++){var j=_r.get(P);j&&ii.set(j,P)}}if(y=ii.get(c)||0)return y;if(ia.length)y=ia.pop();else{try{_r.grow(1)}catch(Be){throw Be instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":Be}y=_r.length-1}try{_r.set(y,c)}catch(Be){if(!(Be instanceof TypeError))throw Be;if(typeof WebAssembly.Function=="function"){P=WebAssembly.Function,j={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"};for(var le={parameters:[],results:f[0]=="v"?[]:[j[f[0]]]},ge=1;ge<f.length;++ge)le.parameters.push(j[f[ge]]);f=new P(le,c)}else{for(P=[1],j=f.slice(0,1),f=f.slice(1),le={i:127,p:127,j:126,f:125,d:124,e:111},P.push(96),ge=f.length,128>ge?P.push(ge):P.push(ge%128|128,ge>>7),ge=0;ge<f.length;++ge)P.push(le[f[ge]]);j=="v"?P.push(0):P.push(1,le[j]),f=[0,97,115,109,1,0,0,0,1],j=P.length,128>j?f.push(j):f.push(j%128|128,j>>7),f.push.apply(f,P),f.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),f=new WebAssembly.Module(new Uint8Array(f)),f=new WebAssembly.Instance(f,{e:{f:c}}).exports.f}_r.set(y,f)}return ii.set(c,y),y};function sa(c,f,y,P){c||(c=this),this.parent=c,this.Ra=c.Ra,this.Va=null,this.id=ur++,this.name=f,this.mode=y,this.Ga={},this.Ha={},this.rdev=P}Object.defineProperties(sa.prototype,{read:{get:function(){return(this.mode&365)===365},set:function(c){c?this.mode|=365:this.mode&=-366}},write:{get:function(){return(this.mode&146)===146},set:function(c){c?this.mode|=146:this.mode&=-147}}}),Gs(),zt=Array(4096),Ee(We,"/"),st("/tmp"),st("/home"),st("/home/web_user"),function(){st("/dev"),Y(259,{read:()=>0,write:(P,j,le,ge)=>ge}),Yt("/dev/null",259),ft(1280,Ot),ft(1536,kt),Yt("/dev/tty",1280),Yt("/dev/tty1",1536);var c=new Uint8Array(1024),f=0,y=()=>(f===0&&(f=ye(c).byteLength),c[--f]);ns("random",y),ns("urandom",y),st("/dev/shm"),st("/dev/shm/tmp")}(),function(){st("/proc");var c=st("/proc/self");st("/proc/self/fd"),Ee({Ra(){var f=Zn(c,"fd",16895,73);return f.Ga={lookup(y,P){var j=bt(+P);return y={parent:null,Ra:{tb:"fake"},Ga:{readlink:()=>j.path}},y.parent=y}},f}},"/proc/self/fd")}();var yh={a:(c,f,y,P)=>{ve(`Assertion failed: ${c?D(me,c):""}, at: `+[f?f?D(me,f):"":"unknown filename",y,P?P?D(me,P):"":"unknown function"])},h:function(c,f){try{return c=c?D(me,c):"",ni(c,f),0}catch(y){if(typeof Nt>"u"||y.name!=="ErrnoError")throw y;return-y.Ka}},H:function(c,f,y){try{if(f=f?D(me,f):"",f=ri(c,f),y&-8)return-28;var P=en(f,{Sa:!0}).node;return P?(c="",y&4&&(c+="r"),y&2&&(c+="w"),y&1&&(c+="x"),c&&yt(P,c)?-2:0):-44}catch(j){if(typeof Nt>"u"||j.name!=="ErrnoError")throw j;return-j.Ka}},i:function(c,f){try{var y=bt(c);return ni(y.node,f),0}catch(P){if(typeof Nt>"u"||P.name!=="ErrnoError")throw P;return-P.Ka}},g:function(c){try{var f=bt(c).node,y=typeof f=="string"?en(f,{Sa:!0}).node:f;if(!y.Ga.Oa)throw new Te(63);return y.Ga.Oa(y,{timestamp:Date.now()}),0}catch(P){if(typeof Nt>"u"||P.name!=="ErrnoError")throw P;return-P.Ka}},b:function(c,f,y){Ys=y;try{var P=bt(c);switch(f){case 0:var j=Zs();if(0>j)return-28;for(;wn[j];)j++;return Ws(P,j).fd;case 1:case 2:return 0;case 3:return P.flags;case 4:return j=Zs(),P.flags|=j,0;case 5:return j=Zs(),$[j+0>>1]=2,0;case 6:case 7:return 0;case 16:case 8:return-28;case 9:return X[$l()>>2]=28,-1;default:return-28}}catch(le){if(typeof Nt>"u"||le.name!=="ErrnoError")throw le;return-le.Ka}},f:function(c,f){try{var y=bt(c);return Qs(rn,y.path,f)}catch(P){if(typeof Nt>"u"||P.name!=="ErrnoError")throw P;return-P.Ka}},n:function(c,f,y){f=is(f,y);try{if(isNaN(f))return 61;var P=bt(c);if(!(P.flags&2097155))throw new Te(28);return Ks(P.node,f),0}catch(j){if(typeof Nt>"u"||j.name!=="ErrnoError")throw j;return-j.Ka}},C:function(c,f){try{if(f===0)return-28;var y=Fe("/")+1;return f<y?-68:(rt("/",me,c,f),y)}catch(P){if(typeof Nt>"u"||P.name!=="ErrnoError")throw P;return-P.Ka}},F:function(c,f){try{return c=c?D(me,c):"",Qs(ts,c,f)}catch(y){if(typeof Nt>"u"||y.name!=="ErrnoError")throw y;return-y.Ka}},z:function(c,f,y){try{return f=f?D(me,f):"",f=ri(c,f),f=L(f),f[f.length-1]==="/"&&(f=f.substr(0,f.length-1)),st(f,y),0}catch(P){if(typeof Nt>"u"||P.name!=="ErrnoError")throw P;return-P.Ka}},E:function(c,f,y,P){try{f=f?D(me,f):"";var j=P&256;return f=ri(c,f,P&4096),Qs(j?ts:rn,f,y)}catch(le){if(typeof Nt>"u"||le.name!=="ErrnoError")throw le;return-le.Ka}},y:function(c,f,y,P){Ys=P;try{f=f?D(me,f):"",f=ri(c,f);var j=P?Zs():0;return Ei(f,y,j).fd}catch(le){if(typeof Nt>"u"||le.name!=="ErrnoError")throw le;return-le.Ka}},w:function(c,f,y,P){try{if(f=f?D(me,f):"",f=ri(c,f),0>=P)return-28;var j=Dr(f),le=Math.min(P,Fe(j)),ge=oe[y+le];return rt(j,me,y,P+1),oe[y+le]=ge,le}catch(Be){if(typeof Nt>"u"||Be.name!=="ErrnoError")throw Be;return-Be.Ka}},v:function(c){try{return c=c?D(me,c):"",jt(c),0}catch(f){if(typeof Nt>"u"||f.name!=="ErrnoError")throw f;return-f.Ka}},G:function(c,f){try{return c=c?D(me,c):"",Qs(rn,c,f)}catch(y){if(typeof Nt>"u"||y.name!=="ErrnoError")throw y;return-y.Ka}},r:function(c,f,y){try{return f=f?D(me,f):"",f=ri(c,f),y===0?cr(f):y===512?jt(f):ve("Invalid flags passed to unlinkat"),0}catch(P){if(typeof Nt>"u"||P.name!=="ErrnoError")throw P;return-P.Ka}},q:function(c,f,y){try{if(f=f?D(me,f):"",f=ri(c,f,!0),y){var P=I[y>>2]+4294967296*X[y+4>>2],j=X[y+8>>2];le=1e3*P+j/1e6,y+=16,P=I[y>>2]+4294967296*X[y+4>>2],j=X[y+8>>2],ge=1e3*P+j/1e6}else var le=Date.now(),ge=le;c=le;var Be=en(f,{Sa:!0}).node;return Be.Ga.Oa(Be,{timestamp:Math.max(c,ge)}),0}catch(mt){if(typeof Nt>"u"||mt.name!=="ErrnoError")throw mt;return-mt.Ka}},l:function(c,f,y){c=new Date(1e3*is(c,f)),X[y>>2]=c.getSeconds(),X[y+4>>2]=c.getMinutes(),X[y+8>>2]=c.getHours(),X[y+12>>2]=c.getDate(),X[y+16>>2]=c.getMonth(),X[y+20>>2]=c.getFullYear()-1900,X[y+24>>2]=c.getDay(),f=c.getFullYear(),X[y+28>>2]=(f%4!==0||f%100===0&&f%400!==0?na:_h)[c.getMonth()]+c.getDate()-1|0,X[y+36>>2]=-(60*c.getTimezoneOffset()),f=new Date(c.getFullYear(),6,1).getTimezoneOffset();var P=new Date(c.getFullYear(),0,1).getTimezoneOffset();X[y+32>>2]=(f!=P&&c.getTimezoneOffset()==Math.min(P,f))|0},j:function(c,f,y,P,j,le,ge,Be){j=is(j,le);try{if(isNaN(j))return 61;var mt=bt(P);if(f&2&&!(y&2)&&(mt.flags&2097155)!==2)throw new Te(2);if((mt.flags&2097155)===1)throw new Te(2);if(!mt.Ha.bb)throw new Te(43);var Je=mt.Ha.bb(mt,c,j,f,y),sn=Je.Db;return X[ge>>2]=Je.ub,I[Be>>2]=sn,0}catch(fn){if(typeof Nt>"u"||fn.name!=="ErrnoError")throw fn;return-fn.Ka}},k:function(c,f,y,P,j,le,ge){le=is(le,ge);try{if(isNaN(le))return 61;var Be=bt(j);if(y&2){if((Be.node.mode&61440)!==32768)throw new Te(43);if(!(P&2)){var mt=me.slice(c,c+f);Be.Ha.cb&&Be.Ha.cb(Be,mt,le,f,P)}}}catch(Je){if(typeof Nt>"u"||Je.name!=="ErrnoError")throw Je;return-Je.Ka}},s:(c,f,y)=>{function P(mt){return(mt=mt.toTimeString().match(/\(([A-Za-z ]+)\)$/))?mt[1]:"GMT"}var j=new Date().getFullYear(),le=new Date(j,0,1),ge=new Date(j,6,1);j=le.getTimezoneOffset();var Be=ge.getTimezoneOffset();I[c>>2]=60*Math.max(j,Be),X[f>>2]=+(j!=Be),c=P(le),f=P(ge),c=Ti(c),f=Ti(f),Be<j?(I[y>>2]=c,I[y+4>>2]=f):(I[y>>2]=f,I[y+4>>2]=c)},d:()=>Date.now(),t:()=>2147483648,c:()=>performance.now(),o:c=>{var f=me.length;if(c>>>=0,2147483648<c)return!1;for(var y=1;4>=y;y*=2){var P=f*(1+.2/y);P=Math.min(P,c+100663296);var j=Math;P=Math.max(c,P);e:{j=(j.min.call(j,2147483648,P+(65536-P%65536)%65536)-Z.buffer.byteLength+65535)/65536;try{Z.grow(j),K();var le=1;break e}catch{}le=void 0}if(le)return!0}return!1},A:(c,f)=>{var y=0;return ss().forEach((P,j)=>{var le=f+y;for(j=I[c+4*j>>2]=le,le=0;le<P.length;++le)oe[j++>>0]=P.charCodeAt(le);oe[j>>0]=0,y+=P.length+1}),0},B:(c,f)=>{var y=ss();I[c>>2]=y.length;var P=0;return y.forEach(j=>P+=j.length+1),I[f>>2]=P,0},e:function(c){try{var f=bt(c);return ta(f),0}catch(y){if(typeof Nt>"u"||y.name!=="ErrnoError")throw y;return y.Ka}},p:function(c,f){try{var y=bt(c);return oe[f>>0]=y.tty?2:tn(y.mode)?3:(y.mode&61440)===40960?7:4,$[f+2>>1]=0,_=[0,(V=0,1<=+Math.abs(V)?0<V?+Math.floor(V/4294967296)>>>0:~~+Math.ceil((V-+(~~V>>>0))/4294967296)>>>0:0)],X[f+8>>2]=_[0],X[f+12>>2]=_[1],_=[0,(V=0,1<=+Math.abs(V)?0<V?+Math.floor(V/4294967296)>>>0:~~+Math.ceil((V-+(~~V>>>0))/4294967296)>>>0:0)],X[f+16>>2]=_[0],X[f+20>>2]=_[1],0}catch(P){if(typeof Nt>"u"||P.name!=="ErrnoError")throw P;return P.Ka}},x:function(c,f,y,P){try{e:{var j=bt(c);c=f;for(var le,ge=f=0;ge<y;ge++){var Be=I[c>>2],mt=I[c+4>>2];c+=8;var Je=Ll(j,oe,Be,mt,le);if(0>Je){var sn=-1;break e}if(f+=Je,Je<mt)break;typeof le<"u"&&(le+=Je)}sn=f}return I[P>>2]=sn,0}catch(fn){if(typeof Nt>"u"||fn.name!=="ErrnoError")throw fn;return fn.Ka}},m:function(c,f,y,P,j){f=is(f,y);try{if(isNaN(f))return 61;var le=bt(c);return Or(le,f,P),_=[le.position>>>0,(V=le.position,1<=+Math.abs(V)?0<V?+Math.floor(V/4294967296)>>>0:~~+Math.ceil((V-+(~~V>>>0))/4294967296)>>>0:0)],X[j>>2]=_[0],X[j+4>>2]=_[1],le.hb&&f===0&&P===0&&(le.hb=null),0}catch(ge){if(typeof Nt>"u"||ge.name!=="ErrnoError")throw ge;return ge.Ka}},D:function(c){var y;try{var f=bt(c);return(y=f.Ha)!=null&&y.fsync?f.Ha.fsync(f):0}catch(P){if(typeof Nt>"u"||P.name!=="ErrnoError")throw P;return P.Ka}},u:function(c,f,y,P){try{e:{var j=bt(c);c=f;for(var le,ge=f=0;ge<y;ge++){var Be=I[c>>2],mt=I[c+4>>2];c+=8;var Je=Vl(j,oe,Be,mt,le);if(0>Je){var sn=-1;break e}f+=Je,typeof le<"u"&&(le+=Je)}sn=f}return I[P>>2]=sn,0}catch(fn){if(typeof Nt>"u"||fn.name!=="ErrnoError")throw fn;return fn.Ka}}},Le=function(){var y;function c(P){var j;return Le=P.exports,Z=Le.I,K(),_r=Le.Aa,ne.unshift(Le.J),J--,(j=u.monitorRunDependencies)==null||j.call(u,J),J==0&&ke&&(P=ke,ke=null,P()),Le}var f={a:yh};if(J++,(y=u.monitorRunDependencies)==null||y.call(u,J),u.instantiateWasm)try{return u.instantiateWasm(f,c)}catch(P){return Q(`Module.instantiateWasm callback failed with error: ${P}`),!1}return F(f,function(P){c(P.instance)}),{}}();u._sqlite3_free=c=>(u._sqlite3_free=Le.K)(c),u._sqlite3_value_text=c=>(u._sqlite3_value_text=Le.L)(c);var $l=()=>($l=Le.M)();u._sqlite3_prepare_v2=(c,f,y,P,j)=>(u._sqlite3_prepare_v2=Le.N)(c,f,y,P,j),u._sqlite3_step=c=>(u._sqlite3_step=Le.O)(c),u._sqlite3_finalize=c=>(u._sqlite3_finalize=Le.P)(c),u._sqlite3_reset=c=>(u._sqlite3_reset=Le.Q)(c),u._sqlite3_clear_bindings=c=>(u._sqlite3_clear_bindings=Le.R)(c),u._sqlite3_value_blob=c=>(u._sqlite3_value_blob=Le.S)(c),u._sqlite3_value_bytes=c=>(u._sqlite3_value_bytes=Le.T)(c),u._sqlite3_value_double=c=>(u._sqlite3_value_double=Le.U)(c),u._sqlite3_value_int=c=>(u._sqlite3_value_int=Le.V)(c),u._sqlite3_value_type=c=>(u._sqlite3_value_type=Le.W)(c),u._sqlite3_result_blob=(c,f,y,P)=>(u._sqlite3_result_blob=Le.X)(c,f,y,P),u._sqlite3_result_double=(c,f)=>(u._sqlite3_result_double=Le.Y)(c,f),u._sqlite3_result_error=(c,f,y)=>(u._sqlite3_result_error=Le.Z)(c,f,y),u._sqlite3_result_int=(c,f)=>(u._sqlite3_result_int=Le._)(c,f),u._sqlite3_result_int64=(c,f,y)=>(u._sqlite3_result_int64=Le.$)(c,f,y),u._sqlite3_result_null=c=>(u._sqlite3_result_null=Le.aa)(c),u._sqlite3_result_text=(c,f,y,P)=>(u._sqlite3_result_text=Le.ba)(c,f,y,P),u._sqlite3_aggregate_context=(c,f)=>(u._sqlite3_aggregate_context=Le.ca)(c,f),u._sqlite3_column_count=c=>(u._sqlite3_column_count=Le.da)(c),u._sqlite3_data_count=c=>(u._sqlite3_data_count=Le.ea)(c),u._sqlite3_column_blob=(c,f)=>(u._sqlite3_column_blob=Le.fa)(c,f),u._sqlite3_column_bytes=(c,f)=>(u._sqlite3_column_bytes=Le.ga)(c,f),u._sqlite3_column_double=(c,f)=>(u._sqlite3_column_double=Le.ha)(c,f),u._sqlite3_column_text=(c,f)=>(u._sqlite3_column_text=Le.ia)(c,f),u._sqlite3_column_type=(c,f)=>(u._sqlite3_column_type=Le.ja)(c,f),u._sqlite3_column_name=(c,f)=>(u._sqlite3_column_name=Le.ka)(c,f),u._sqlite3_bind_blob=(c,f,y,P,j)=>(u._sqlite3_bind_blob=Le.la)(c,f,y,P,j),u._sqlite3_bind_double=(c,f,y)=>(u._sqlite3_bind_double=Le.ma)(c,f,y),u._sqlite3_bind_int=(c,f,y)=>(u._sqlite3_bind_int=Le.na)(c,f,y),u._sqlite3_bind_text=(c,f,y,P,j)=>(u._sqlite3_bind_text=Le.oa)(c,f,y,P,j),u._sqlite3_bind_parameter_index=(c,f)=>(u._sqlite3_bind_parameter_index=Le.pa)(c,f),u._sqlite3_sql=c=>(u._sqlite3_sql=Le.qa)(c),u._sqlite3_normalized_sql=c=>(u._sqlite3_normalized_sql=Le.ra)(c),u._sqlite3_errmsg=c=>(u._sqlite3_errmsg=Le.sa)(c),u._sqlite3_exec=(c,f,y,P,j)=>(u._sqlite3_exec=Le.ta)(c,f,y,P,j),u._sqlite3_changes=c=>(u._sqlite3_changes=Le.ua)(c),u._sqlite3_close_v2=c=>(u._sqlite3_close_v2=Le.va)(c),u._sqlite3_create_function_v2=(c,f,y,P,j,le,ge,Be,mt)=>(u._sqlite3_create_function_v2=Le.wa)(c,f,y,P,j,le,ge,Be,mt),u._sqlite3_open=(c,f)=>(u._sqlite3_open=Le.xa)(c,f);var to=u._malloc=c=>(to=u._malloc=Le.ya)(c),no=u._free=c=>(no=u._free=Le.za)(c);u._RegisterExtensionFunctions=c=>(u._RegisterExtensionFunctions=Le.Ba)(c);var Bl=(c,f)=>(Bl=Le.Ca)(c,f),as=()=>(as=Le.Da)(),Ii=c=>(Ii=Le.Ea)(c),Nr=c=>(Nr=Le.Fa)(c);u.stackAlloc=Nr,u.stackSave=as,u.stackRestore=Ii,u.cwrap=(c,f,y,P)=>{var j=!y||y.every(le=>le==="number"||le==="boolean");return f!=="string"&&j&&!P?u["_"+c]:function(){return wh(c,f,y,arguments)}},u.addFunction=eo,u.removeFunction=si,u.UTF8ToString=G,u.ALLOC_NORMAL=Js,u.allocate=os,u.allocateUTF8OnStack=ra;var ls;ke=function c(){ls||zl(),ls||(ke=c)};function zl(){function c(){if(!ls&&(ls=!0,u.calledRun=!0,!ee)){if(u.noFSInit||Ul||(Ul=!0,Gs(),u.stdin=u.stdin,u.stdout=u.stdout,u.stderr=u.stderr,u.stdin?ns("stdin",u.stdin):nn("/dev/tty","/dev/stdin"),u.stdout?ns("stdout",null,u.stdout):nn("/dev/tty","/dev/stdout"),u.stderr?ns("stderr",null,u.stderr):nn("/dev/tty1","/dev/stderr"),Ei("/dev/stdin",0),Ei("/dev/stdout",1),Ei("/dev/stderr",1)),Hn=!1,B(ne),u.onRuntimeInitialized&&u.onRuntimeInitialized(),u.postRun)for(typeof u.postRun=="function"&&(u.postRun=[u.postRun]);u.postRun.length;){var f=u.postRun.shift();ce.unshift(f)}B(ce)}}if(!(0<J)){if(u.preRun)for(typeof u.preRun=="function"&&(u.preRun=[u.preRun]);u.preRun.length;)te();B(he),0<J||(u.setStatus?(u.setStatus("Running..."),setTimeout(function(){setTimeout(function(){u.setStatus("")},1),c()},1)):c())}}if(u.preInit)for(typeof u.preInit=="function"&&(u.preInit=[u.preInit]);0<u.preInit.length;)u.preInit.pop()();return zl(),a}),n)};t.exports=r,t.exports.default=r})(db);var ZD=db.exports;const XD=hm(ZD),JD={class:"fixed left-1/2 top-1/2 inline-block -translate-x-1/2 -translate-y-1/2 rounded-md bg-cyan-500 p-3 text-center shadow-lg shadow-black"},eO=N("p",{class:"text-4xl"},"Deck Importer",-1),tO=N("p",{class:"mt-1"}," You can only import once a day and max 300 cards per day. Larger decks have to be imported over multiple days. ",-1),nO={class:"mt-3 rounded bg-lime-400 p-3 text-xl"},rO=N("label",{for:"import_file_selector"},"Anki Deck: ",-1),iO={key:0},sO={class:"mt-5 text-xl"},oO={class:"rounded bg-teal-500 p-3"},aO=N("p",null,"Front:",-1),lO=N("option",{value:"0",disabled:""},"Select",-1),uO=["value"],cO={class:"mt-3 rounded bg-teal-500 p-3"},hO=N("p",null,"Back:",-1),dO=N("option",{value:"0",disabled:""},"Select",-1),fO=["value"],pO={class:"mt-3 rounded bg-yellow-500 p-3"},mO=N("p",null,"Sort By:",-1),gO=N("option",{value:"0",disabled:""},"Select",-1),_O=["value"],wO={class:"mt-5 rounded bg-emerald-400 p-3 text-xl"},yO={class:"flex items-center justify-center"},vO=N("label",{for:"exist_deck_checkbox"},"Add To Existing Deck: ",-1),bO={key:0,class:"mt-3"},kO=["value"],EO={class:"mt-5 flex justify-center"},TO={key:0},IO={class:"mt-3 rounded bg-cyan-600 p-3"},AO={__name:"ImportDeck",props:["auth","db","decks"],emits:["close"],setup(t,{emit:e}){const n=t,r=+"300";let i=null,s=null;const o=we([]),a=we(0),l=we(0),u=we(0),d=we(!1),m=we("");let w="";const g=we("");async function E(A){if(o.value=[],a.value=0,l.value=0,u.value=0,d.value=!1,m.value="",g.value="",A.target.files.length!==0){const T=A.target.files[0];w=T.name.split(".")[0],g.value="Loading Zip";const x=await GD.loadAsync(T);g.value="Getting Collection File";const R=await x.file("collection.anki2").async("uint8array");g.value="Initializing SQL",i=await XD({locateFile:H=>`https://sql.js.org/dist/${H}`}),g.value="Initializing Database",s=new i.Database(R),g.value="Reading Field Names";const O=s.exec("SELECT models FROM col LIMIT 1;");if(O.length>0&&O[0].values.length>0){const H=JSON.parse(O[0].values[0][0]);o.value=H[Object.keys(H)[0]].flds,g.value="Awaiting User Selection"}else g.value="Error: Reading Fields Names unsuccessful"}}async function b(){g.value="Checking Last Import";let A=null;const T=await Fs(_t(n.db,`users/${n.auth.currentUser.uid}`));T.data().last_import==null?(g.value="Creating Last Import Field",await Zt(_t(n.db,`users/${n.auth.currentUser.uid}`),{last_import:et.fromDate(new Date(0))}).then(()=>{A=new Date(0)})):A=T.data().last_import.toDate();const x=new Date,R=new Date(x.getFullYear(),x.getMonth(),x.getDate());if(new Date(A.getFullYear(),A.getMonth(),A.getDate())<R){g.value="Getting Cards";const H=s.exec("SELECT flds FROM notes;");if(H.length>0&&H[0].values.length>0){const Q=H[0].values;let z=[];for(let Z=0;Z<Q.length;Z++){const oe=Q[Z][0].split(""),me=oe[a.value-1],$=oe[l.value-1],X=oe[u.value-1];z.push({front:me,back:$,index:X})}z.sort((Z,ee)=>Z.index-ee.index),g.value="Updating Last Import",Zt(_t(n.db,`users/${n.auth.currentUser.uid}`),{last_import:et.fromDate(new Date)}).then(()=>{d.value?(g.value="Getting Deck Import Progress",Fs(_t(n.db,`users/${n.auth.currentUser.uid}/decks/${m.value}`)).then(async Z=>{let ee=null;Z.data().import_progress==null?(g.value="Creating Import Progress Field",await Zt(_t(n.db,`users/${n.auth.currentUser.uid}/decks/${m.value}`),{import_progress:0}),ee=0):ee=Z.data().import_progress,g.value="Adding Cards";let oe=!1;for(let me=ee;me<z.length;me++){const $=z[me];if(me<ee+r)g.value=`Adding Cards ${me}/${z.length}`,await Xr(Mt(n.db,`users/${n.auth.currentUser.uid}/decks/${m.value}/cards/`),{front:$.front,back:$.back,streak:-1,new_card:!0,next_review:et.fromDate(new Date(new Date().getTime()+me)),type_answer:!1}).catch(X=>{Ye.fire({title:X,color:"black",icon:"error"})});else{oe=!0,g.value="Updating Import Progress",await Zt(_t(n.db,`users/${n.auth.currentUser.uid}/decks/${m.value}`),{import_progress:me});break}}oe?g.value="Max Quota Reached":(g.value="Resetting Import Progress",await Zt(_t(n.db,`users/${n.auth.currentUser.uid}/decks/${m.value}`),{import_progress:0}),g.value="Fully Imported")})):(g.value="Creating Deck",Xr(Mt(n.db,`users/${n.auth.currentUser.uid}/decks`),{name:w,new_cards_per_day:10,new_cards_today:10,last_update:et.fromDate(new Date(0)),index:n.decks.length,large_cards:!0,import_progress:0}).then(async Z=>{g.value="Adding Cards";let ee=!1;for(let oe=0;oe<z.length;oe++){const me=z[oe];if(oe<r)g.value=`Adding Cards ${oe}/${z.length}`,await Xr(Mt(n.db,`users/${n.auth.currentUser.uid}/decks/${Z.id}/cards/`),{front:me.front,back:me.back,streak:-1,new_card:!0,next_review:et.fromDate(new Date(new Date().getTime()+oe)),type_answer:!1}).catch($=>{Ye.fire({title:$,color:"black",icon:"error"})});else{ee=!0,g.value="Updating Import Progress",await Zt(_t(n.db,`users/${n.auth.currentUser.uid}/decks/${Z.id}`),{import_progress:oe});break}}ee?g.value="Max Quota Reached":(g.value="Resetting Import Progress",await Zt(_t(n.db,`users/${n.auth.currentUser.uid}/decks/${Z.id}`),{import_progress:0}),g.value="Fully Imported")}).catch(Z=>{console.log(Z)}))}).catch(Z=>{Ye.fire({title:Z,color:"black",icon:"error"})})}}else Ye.fire({title:"You have already imported today!",color:"black",icon:"error"})}return(A,T)=>(Ce(),Me("div",JD,[eO,tO,N("div",nO,[rO,N("input",{onChange:T[0]||(T[0]=x=>E(x)),type:"file",accept:".apkg",id:"import_file_selector"},null,32)]),o.value.length>0?(Ce(),Me("div",iO,[N("div",sO,[N("div",oO,[aO,nt(N("select",{"onUpdate:modelValue":T[1]||(T[1]=x=>a.value=x),class:"rounded bg-teal-600 p-1"},[lO,(Ce(!0),Me(hn,null,Vi(o.value,x=>(Ce(),Me("option",{value:x.ord+1},At(x.name),9,uO))),256))],512),[[po,a.value]])]),N("div",cO,[hO,nt(N("select",{"onUpdate:modelValue":T[2]||(T[2]=x=>l.value=x),class:"rounded bg-teal-600 p-1"},[dO,(Ce(!0),Me(hn,null,Vi(o.value,x=>(Ce(),Me("option",{value:x.ord+1},At(x.name),9,fO))),256))],512),[[po,l.value]])]),N("div",pO,[mO,nt(N("select",{"onUpdate:modelValue":T[3]||(T[3]=x=>u.value=x),class:"rounded bg-yellow-600 p-1"},[gO,(Ce(!0),Me(hn,null,Vi(o.value,x=>(Ce(),Me("option",{value:x.ord+1},At(x.name),9,_O))),256))],512),[[po,u.value]])])]),N("div",wO,[N("div",yO,[vO,nt(N("input",{type:"checkbox","onUpdate:modelValue":T[4]||(T[4]=x=>d.value=x),id:"exist_deck_checkbox",class:"h-7 w-7"},null,512),[[fi,d.value]])]),d.value?(Ce(),Me("div",bO,[nt(N("select",{"onUpdate:modelValue":T[5]||(T[5]=x=>m.value=x),class:"rounded bg-emerald-600 p-1"},[(Ce(!0),Me(hn,null,Vi(t.decks,x=>(Ce(),Me("option",{value:x.id},At(x.name),9,kO))),256))],512),[[po,m.value]])])):St("",!0)])])):St("",!0),N("div",EO,[N("button",{onClick:T[6]||(T[6]=x=>A.$emit("close")),class:"rounded bg-red-600 p-3 text-xl shadow shadow-black"}," Cancel "),a.value!==0&&l.value!==0&&u.value!==0&&(!d.value||m.value!=="")?(Ce(),Me("div",TO,[N("button",{onClick:T[7]||(T[7]=x=>b()),class:"ml-3 rounded bg-orange-600 p-3 text-xl shadow shadow-black"}," Import ")])):St("",!0)]),N("div",IO,[N("p",null,"Status : "+At(g.value),1)])]))}},xO={class:"fixed bottom-0 left-0 right-0 top-0 z-50 bg-gray-600 bg-opacity-50"},CO={class:"fixed left-1/2 top-1/2 inline-block -translate-x-1/2 -translate-y-1/2 rounded-md bg-gradient-to-r from-green-900 to-blue-900 p-3 text-center shadow-lg shadow-black"},SO={class:"mt-3 flex items-center justify-center rounded bg-cyan-400 p-3 text-lg shadow shadow-black"},RO=N("p",{class:"mr-1"},"New Cards Per Day:",-1),PO={class:"mt-3 flex items-center justify-center rounded bg-emerald-400 p-3 text-lg shadow shadow-black"},DO=N("label",{for:"large_cards_elem",class:"mr-1 select-none"},"Large Cards: ",-1),OO={__name:"NewDeckMenu",props:["auth","db","decks"],emits:["close","save"],setup(t,{emit:e}){const n=t,r=we(""),i=we(""),s=we(10),o=we(!1),a=we(!1);function l(){r.value!==""?s.value!==""?Xr(Mt(n.db,`users/${n.auth.currentUser.uid}/decks`),{name:r.value,new_cards_per_day:s.value,new_cards_today:s.value,last_update:et.fromDate(new Date(0)),index:n.decks.length,large_cards:o.value}).then(()=>{e("save"),e("close")}):Ye.fire({title:"New cards per day cannot be empty!",color:"black",icon:"error"}):Ye.fire({title:"Name cannot be empty!",color:"black",icon:"error"})}async function u(){i.value=await gc(r.value)}function d(){a.value=!0}function m(){a.value=!1}return(w,g)=>(Ce(),Me("div",xO,[N("div",CO,[nt(N("input",{type:"text","onUpdate:modelValue":g[0]||(g[0]=E=>r.value=E),onInput:g[1]||(g[1]=E=>u()),style:Cs({backgroundColor:i.value}),class:"rounded bg-indigo-400 p-3 text-center text-lg placeholder-white shadow shadow-black",placeholder:"Name"},null,36),[[Ft,r.value]]),N("div",SO,[RO,nt(N("input",{type:"number","onUpdate:modelValue":g[2]||(g[2]=E=>s.value=E),class:"w-[5ch] rounded bg-cyan-500 p-1 text-center placeholder-white",placeholder:"?"},null,512),[[Ft,s.value,void 0,{number:!0}]])]),N("div",PO,[DO,nt(N("input",{type:"checkbox",id:"large_cards_elem","onUpdate:modelValue":g[3]||(g[3]=E=>o.value=E),class:"h-6 w-6"},null,512),[[fi,o.value]])]),N("div",null,[N("button",{onClick:g[4]||(g[4]=E=>w.$emit("close")),class:"mr-4 mt-3 rounded bg-orange-300 p-3 text-xl shadow shadow-black"}," Cancel "),N("button",{onClick:l,class:"mt-3 rounded bg-rose-300 p-3 text-xl shadow shadow-black"}," Create ")]),N("div",null,[N("button",{onClick:g[5]||(g[5]=E=>d()),class:"mt-7 rounded bg-cyan-300 p-3 text-sm shadow shadow-black"}," Import ")])]),a.value?(Ce(),$r(AO,{key:0,auth:t.auth,db:t.db,decks:t.decks,onClose:g[6]||(g[6]=E=>m())},null,8,["auth","db","decks"])):St("",!0)]))}},NO={class:"fixed bottom-0 left-0 right-0 top-0 z-50 bg-gray-600 bg-opacity-50"},MO={class:"fixed left-1/2 top-1/2 inline-block -translate-x-1/2 -translate-y-1/2 rounded-md bg-gradient-to-tr from-cyan-700 to-zinc-400 p-3 text-center shadow-lg shadow-black"},LO=N("p",null,"Front",-1),VO=N("hr",{class:"mb-4 mt-4 rounded border-2 border-gray-400"},null,-1),UO=N("p",null,"Back",-1),FO=N("hr",{class:"mb-4 mt-4 rounded border-2 border-gray-400"},null,-1),$O={class:"rounded-md bg-gray-500 p-3 shadow shadow-black"},BO=N("label",{for:"reversedCheck",class:"mr-3 text-center text-lg text-white"},"Create Reversed",-1),zO=N("br",null,null,-1),jO=N("label",{for:"typeAnsCheck",class:"mr-3 text-center text-lg text-white"},"Type Answer",-1),qO=N("hr",{class:"mb-4 mt-4 rounded border-2 border-gray-400"},null,-1),HO={__name:"NewCardMenu",props:["auth","db","deckId"],emits:["close"],setup(t,{emit:e}){const n=t,r=we(""),i=we(""),s=we(!1),o=we(!1),a=we(null);function l(){Xr(Mt(n.db,`users/${n.auth.currentUser.uid}/decks/${n.deckId}/cards/`),{front:r.value,back:i.value,streak:-1,new_card:!0,next_review:et.fromDate(new Date),type_answer:o.value}).catch(d=>{Ye.fire({title:d,color:"black",icon:"error"})}),s.value&&Xr(Mt(n.db,`users/${n.auth.currentUser.uid}/decks/${n.deckId}/cards/`),{front:i.value,back:r.value,streak:-1,new_card:!0,next_review:et.fromDate(new Date),type_answer:o.value}).catch(d=>{Ye.fire({title:d,color:"black",icon:"error"})}),r.value="",i.value="",a.value.focus()}function u(d){d.code=="Enter"&&l()}return(d,m)=>(Ce(),Me("div",NO,[N("div",MO,[LO,nt(N("input",{type:"text",ref_key:"front_field_ref",ref:a,"onUpdate:modelValue":m[0]||(m[0]=w=>r.value=w),class:"rounded bg-gray-600 p-3 text-center text-lg text-white shadow shadow-black"},null,512),[[Ft,r.value]]),VO,UO,nt(N("input",{type:"text","onUpdate:modelValue":m[1]||(m[1]=w=>i.value=w),onKeypress:m[2]||(m[2]=w=>u(w)),class:"rounded bg-gray-600 p-3 text-center text-lg text-white shadow shadow-black"},null,544),[[Ft,i.value]]),FO,N("div",$O,[BO,nt(N("input",{"onUpdate:modelValue":m[3]||(m[3]=w=>s.value=w),type:"checkbox",id:"reversedCheck",class:"h-7 w-7 translate-y-1"},null,512),[[fi,s.value]]),zO,jO,nt(N("input",{"onUpdate:modelValue":m[4]||(m[4]=w=>o.value=w),type:"checkbox",id:"typeAnsCheck",class:"h-7 w-7 translate-y-1"},null,512),[[fi,o.value]])]),qO,N("button",{onClick:m[5]||(m[5]=w=>d.$emit("close")),class:"mr-10 rounded bg-red-400 px-3 py-2 text-lg text-white shadow-md shadow-gray-800"}," Cancel "),N("button",{onClick:m[6]||(m[6]=w=>l()),class:"rounded bg-green-600 px-3 py-2 text-lg text-white shadow-md shadow-gray-800"}," Create ")])]))}},WO={class:"fixed bottom-0 left-0 right-0 top-0 z-50 bg-gray-600 bg-opacity-50"},KO={class:"fixed left-1/2 top-1/2 inline-block h-[600px] max-h-[100vh] w-[800px] max-w-[100vw] -translate-x-1/2 -translate-y-1/2 overflow-auto rounded-md bg-gradient-to-tr from-slate-700 to-fuchsia-800 p-3 text-center shadow-lg shadow-black"},GO=N("p",{class:"text-lg text-white"},"Front",-1),QO=N("hr",{class:"mb-4 mt-4 rounded border-2 border-gray-400"},null,-1),YO=N("p",{class:"text-lg text-white"},"Back",-1),ZO=N("hr",{class:"mb-4 mt-4 rounded border-2 border-gray-400"},null,-1),XO={class:"rounded-md bg-gray-500 p-3 shadow shadow-black"},JO=N("label",{for:"reversedCheck",class:"mr-3 text-center text-lg text-white"},"Create Reversed",-1),eN=N("br",null,null,-1),tN=N("label",{for:"typeAnsCheck",class:"mr-3 text-center text-lg text-white"},"Type Answer",-1),nN=N("hr",{class:"mb-4 mt-4 rounded border-2 border-gray-400"},null,-1),rN={__name:"NewLargeCard",props:["auth","db","deckId"],emits:["close"],setup(t,{emit:e}){const n=t,r=we(""),i=we(""),s=we(!1),o=we(!1),a=we(null),l=we(null);function u(){Xr(Mt(n.db,`users/${n.auth.currentUser.uid}/decks/${n.deckId}/cards/`),{front:r.value,back:i.value,streak:-1,new_card:!0,next_review:et.fromDate(new Date),type_answer:o.value}).catch(m=>{Ye.fire({title:m,color:"black",icon:"error"})}),s.value&&Xr(Mt(n.db,`users/${n.auth.currentUser.uid}/decks/${n.deckId}/cards/`),{front:i.value,back:r.value,streak:-1,new_card:!0,next_review:et.fromDate(new Date),type_answer:o.value}).catch(m=>{Ye.fire({title:m,color:"black",icon:"error"})}),r.value="",i.value="",a.value.style.height="auto",l.value.style.height="auto",a.value.focus()}function d(m){m?(a.value.style.height="auto",a.value.style.height=a.value.scrollHeight+"px"):(l.value.style.height="auto",l.value.style.height=l.value.scrollHeight+"px")}return(m,w)=>(Ce(),Me("div",WO,[N("div",KO,[GO,nt(N("textarea",{ref_key:"front_field_ref",ref:a,"onUpdate:modelValue":w[0]||(w[0]=g=>r.value=g),onInput:w[1]||(w[1]=g=>d(!0)),class:"min-h-[150px] w-full resize-none rounded bg-gray-300 p-3 text-center text-lg text-black shadow shadow-black"},null,544),[[Ft,r.value]]),QO,YO,nt(N("textarea",{ref_key:"back_field_ref",ref:l,"onUpdate:modelValue":w[2]||(w[2]=g=>i.value=g),onInput:w[3]||(w[3]=g=>d(!1)),class:"min-h-[150px] w-full resize-none rounded bg-gray-300 p-3 text-center text-lg text-black shadow shadow-black"},null,544),[[Ft,i.value]]),ZO,N("div",XO,[JO,nt(N("input",{"onUpdate:modelValue":w[4]||(w[4]=g=>s.value=g),type:"checkbox",id:"reversedCheck",class:"h-7 w-7 translate-y-1"},null,512),[[fi,s.value]]),eN,tN,nt(N("input",{"onUpdate:modelValue":w[5]||(w[5]=g=>o.value=g),type:"checkbox",id:"typeAnsCheck",class:"h-7 w-7 translate-y-1"},null,512),[[fi,o.value]])]),nN,N("button",{onClick:w[6]||(w[6]=g=>m.$emit("close")),class:"mr-10 rounded bg-red-400 px-3 py-2 text-lg text-white shadow-md shadow-gray-800"}," Cancel "),N("button",{onClick:w[7]||(w[7]=g=>u()),class:"rounded bg-green-600 px-3 py-2 text-lg text-white shadow-md shadow-gray-800"}," Create ")])]))}},iN={class:"flex justify-center"},sN={class:"mt-8 inline-block rounded-xl bg-sky-600 p-3 text-center"},oN=N("p",{class:"text-lg text-white"},"Timeline",-1),aN={class:"mt-1 rounded-xl bg-blue-200 p-1 text-xl"},lN={class:"mt-3"},uN=N("p",{class:"text-lg text-white"},"New Card Forecast",-1),cN={class:"rounded-xl bg-green-200 p-1"},hN={class:"text-lg"},dN={class:"mt-3"},fN=N("p",{class:"text-lg text-white"},"Deck Data",-1),pN={class:"rounded-xl bg-orange-200 p-1 text-xl"},mN={__name:"Timeline",props:["auth","db","deckId","showDays","newCards","reviewsDue","totalCards"],setup(t,{expose:e}){const n=t,r=we([]);async function i(){r.value=[];let s=[];const o=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],a=new Date,l=new Date(a.getFullYear(),a.getMonth(),a.getDate()),u=l.getDay();for(let d=0;d<n.showDays;d++){let m=u+d;m>=o.length&&(m-=o.length),r.value.push({name:o[m],reviews:0}),s.push({name:o[m],reviews:0})}for(let d=0;d<n.showDays;d++){let m=new Date(l);m.setDate(m.getDate()+d);let w=new Date(m);if(w.setDate(w.getDate()+1),d===0)s[0].reviews=n.reviewsDue;else{const g=await xs(dr(Mt(n.db,`users/${n.auth.currentUser.uid}/decks/${n.deckId}/cards`),vn("next_review",">=",et.fromDate(m)),vn("next_review","<",et.fromDate(w))));s[d].reviews=g.data().count}}r.value=s}return e({loadDays:i}),(s,o)=>(Ce(),Me("div",iN,[N("div",sN,[N("div",null,[oN,(Ce(!0),Me(hn,null,Vi(r.value,(a,l)=>(Ce(),Me("p",aN,[ys(" Reviews "+At(l===0?"Now":l===1?"Tomorrow":`on ${a.name}`)+": ",1),N("b",null,At(a.reviews),1)]))),256))]),N("div",lN,[uN,N("div",cN,[N("p",null," At the rate of "+At(t.newCards)+" new cards per day, you will accumulate... ",1),N("div",hN,[N("p",null,[N("b",null,At(t.newCards*7),1),ys(" per Week ")]),N("p",null,[N("b",null,At(t.newCards*30),1),ys(" per Month ")]),N("p",null,[N("b",null,At(t.newCards*365),1),ys(" per Year ")])])])]),N("div",dN,[fN,N("div",pN,[N("p",null,"Total Cards: "+At(t.totalCards),1)])])])]))}},gN={key:0,class:"mt-5 overflow-auto whitespace-nowrap pb-3 text-center"},_N=["onClick","onDblclick"],wN={key:3,class:"mt-10"},yN={class:"flex justify-center text-center"},vN={class:"mr-10 text-lg"},bN={class:"text-lg"},kN={class:"flex justify-center"},EN={class:"mt-2"},TN={__name:"Decks",props:["auth","db"],emits:["loadSettings","review","largeReview"],setup(t,{expose:e,emit:n}){const r=t,i=we([]),s=we(""),o=we(0),a=we(0),l=we(0),u=we(-1),d=we(!1),m=we(!1),w=we(!1),g=we(null),E=we(null),b=we(null),A=we(0),T=we(!1);async function x(K){s.value=K;const he=await xs(Mt(r.db,`users/${r.auth.currentUser.uid}/decks/${s.value}/cards`));l.value=he.data().count;const ne=new Date,ce=await xs(dr(Mt(r.db,`users/${r.auth.currentUser.uid}/decks/${s.value}/cards`),vn("next_review","<=",et.fromDate(ne)))),te=await xs(dr(Mt(r.db,`users/${r.auth.currentUser.uid}/decks/${s.value}/cards`),vn("next_review","<=",et.fromDate(ne)),vn("streak","==",-1)));o.value=ce.data().count-te.data().count,a.value=te.data().count,await Ss(),b.value.loadDays();const J=i.value.find(ke=>ke.id===K);A.value=J.new_cards_per_day,T.value=J.large_cards}async function R(){let K=[];zr(Mt(r.db,`users/${r.auth.currentUser.uid}/decks`)).then(async he=>{await Promise.all(he.docs.map(async ne=>{K.push({name:ne.data().name,color:await gc(ne.data().name),new_cards_per_day:ne.data().new_cards_per_day,id:ne.id,index:ne.data().index,large_cards:ne.data().large_cards})})),K.sort((ne,ce)=>ne.index-ce.index),i.value=K}),O(),n("loadSettings")}function O(){s.value!==""&&x(s.value)}async function H(){const K=await Fs(_t(r.db,`users/${r.auth.currentUser.uid}/decks/${s.value}`));let he=[],ne=K.data().new_cards_today;const ce=new Date,te=new Date(ce.getFullYear(),ce.getMonth(),ce.getDate());te>K.data().last_update.toDate()&&(Zt(_t(r.db,`users/${r.auth.currentUser.uid}/decks/${s.value}`),{new_cards_today:K.data().new_cards_per_day,last_update:et.fromDate(te)}),ne=K.data().new_cards_per_day);const J=await zr(dr(Mt(r.db,`users/${r.auth.currentUser.uid}/decks/${s.value}/cards`),vn("next_review","<=",et.fromDate(ce)),vn("new_card","==",!1)));let ke=null;ne>0&&(ke=await zr(dr(Mt(r.db,`users/${r.auth.currentUser.uid}/decks/${s.value}/cards`),vn("next_review","<=",et.fromDate(ce)),vn("new_card","==",!0),ho("next_review"),fo(ne)))),J.forEach(ve=>{he.push({id:ve.id,front:ve.data().front,back:ve.data().back,streak:ve.data().streak,type_answer:!!ve.data().type_answer})}),ke!==null&&ke.forEach(ve=>{he.push({id:ve.id,front:ve.data().front,back:ve.data().back,streak:0,type_answer:!!ve.data().type_answer}),Zt(_t(r.db,`users/${r.auth.currentUser.uid}/decks/${s.value}/cards/${ve.id}`),{streak:0,new_card:!1}),ne-=1}),Zt(_t(r.db,`users/${r.auth.currentUser.uid}/decks/${s.value}`),{new_cards_today:ne}),he.length!==0?K.data().large_cards?n("largeReview",s.value,he):n("review",s.value,he):Ye.fire({title:"No reviews on this deck at this time.",color:"black",icon:"info"})}async function Q(K){u.value=K,I(!1),await Ss(),g.value.loadInitialCards()}function z(K){u.value=-1,I(!0),K&&R()}function Z(){d.value=!0,I(!1)}function ee(){d.value=!1,I(!0)}function oe(){R()}function me(){T.value?w.value=!0:m.value=!0,I(!1)}function $(){m.value=!1,I(!0)}function X(){w.value=!1,I(!0)}function I(K){K?document.body.style.overflow="auto":document.body.style.overflow="hidden"}function re(){s.value=""}function ae(){re(),i.value=[]}return e({loadDecks:R,reselectDeck:O,logout:ae}),(K,he)=>(Ce(),Me(hn,null,[t.auth!==null&&t.auth.currentUser!==null?(Ce(),Me("div",gN,[(Ce(!0),Me(hn,null,Vi(i.value,(ne,ce)=>(Ce(),Me("div",{key:ne.id,class:"mb-3 inline-block"},[N("button",{onClick:te=>x(ne.id),onDblclick:te=>Q(ce),style:Cs({backgroundColor:ne.color,borderWidth:s.value==ne.id?"4px":"0px"}),class:"mr-5 rounded border-white bg-white p-5 text-lg shadow-md shadow-black"},At(ne.name),45,_N)]))),128)),N("button",{onClick:he[0]||(he[0]=ne=>Z()),class:"rounded bg-gradient-to-r from-emerald-700 to-lime-600 p-5 text-lg text-white shadow-md shadow-black"}," New Deck ")])):St("",!0),u.value!==-1?(Ce(),$r(WD,{key:1,auth:t.auth,db:t.db,deck:i.value[u.value],onClose:he[1]||(he[1]=ne=>z(ne)),onDelete:he[2]||(he[2]=ne=>re()),ref_key:"edit_deck_menu_ref",ref:g},null,8,["auth","db","deck"])):St("",!0),d.value?(Ce(),$r(OO,{key:2,auth:t.auth,db:t.db,decks:i.value,onClose:he[3]||(he[3]=ne=>ee()),onSave:he[4]||(he[4]=ne=>oe()),ref_key:"new_deck_menu_ref",ref:E},null,8,["auth","db","decks"])):St("",!0),s.value!==""?(Ce(),Me("div",wN,[N("div",yN,[N("p",vN,[ys(" New Cards: "),N("b",null,At(a.value),1)]),N("p",bN,[ys(" Reviews: "),N("b",null,At(o.value),1)])]),N("div",kN,[N("div",EN,[N("button",{onClick:he[5]||(he[5]=ne=>me()),class:"mr-5 rounded-lg bg-gradient-to-tr from-orange-600 to-blue-500 p-3 text-2xl text-white shadow-lg shadow-black"}," New Card "),N("button",{onClick:he[6]||(he[6]=ne=>H()),class:"rounded-lg bg-gradient-to-r from-green-500 to-amber-800 p-3 text-2xl text-white shadow-lg shadow-black"}," Review ")])])])):St("",!0),m.value?(Ce(),$r(HO,{key:4,auth:t.auth,db:t.db,"deck-id":s.value,onClose:he[7]||(he[7]=ne=>$())},null,8,["auth","db","deck-id"])):St("",!0),w.value?(Ce(),$r(rN,{key:5,auth:t.auth,db:t.db,"deck-id":s.value,onClose:he[8]||(he[8]=ne=>X())},null,8,["auth","db","deck-id"])):St("",!0),s.value!==""?(Ce(),$r(mN,{key:6,auth:t.auth,db:t.db,"deck-id":s.value,"show-days":7,"new-cards":A.value,"reviews-due":o.value,"total-cards":l.value,ref_key:"timeline_ref",ref:b},null,8,["auth","db","deck-id","new-cards","reviews-due","total-cards"])):St("",!0)],64))}},IN=""+new URL("yes-6050e699.svg",import.meta.url).href;var wd=typeof navigator<"u"?navigator.userAgent.toLowerCase().indexOf("firefox")>0:!1;function yd(t,e,n,r){t.addEventListener?t.addEventListener(e,n,r):t.attachEvent&&t.attachEvent("on".concat(e),function(){n(window.event)})}function fb(t,e){for(var n=e.slice(0,e.length-1),r=0;r<n.length;r++)n[r]=t[n[r].toLowerCase()];return n}function pb(t){typeof t!="string"&&(t=""),t=t.replace(/\s/g,"");for(var e=t.split(","),n=e.lastIndexOf("");n>=0;)e[n-1]+=",",e.splice(n,1),n=e.lastIndexOf("");return e}function AN(t,e){for(var n=t.length>=e.length?t:e,r=t.length>=e.length?e:t,i=!0,s=0;s<n.length;s++)r.indexOf(n[s])===-1&&(i=!1);return i}var ol={backspace:8,"⌫":8,tab:9,clear:12,enter:13,"↩":13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"⇪":20,",":188,".":190,"/":191,"`":192,"-":wd?173:189,"=":wd?61:187,";":wd?59:186,"'":222,"[":219,"]":221,"\\":220},ei={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,cmd:91,command:91},vf={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},xn={16:!1,18:!1,17:!1,91:!1},an={};for(var vu=1;vu<20;vu++)ol["f".concat(vu)]=111+vu;var Vt=[],q_=!1,mb="all",gb=[],Ol=function(e){return ol[e.toLowerCase()]||ei[e.toLowerCase()]||e.toUpperCase().charCodeAt(0)},xN=function(e){return Object.keys(ol).find(function(n){return ol[n]===e})},CN=function(e){return Object.keys(ei).find(function(n){return ei[n]===e})};function _b(t){mb=t||"all"}function al(){return mb||"all"}function SN(){return Vt.slice(0)}function RN(){return Vt.map(function(t){return xN(t)||CN(t)||String.fromCharCode(t)})}function PN(){var t=[];return Object.keys(an).forEach(function(e){an[e].forEach(function(n){var r=n.key,i=n.scope,s=n.mods,o=n.shortcut;t.push({scope:i,shortcut:o,mods:s,keys:r.split("+").map(function(a){return Ol(a)})})})}),t}function DN(t){var e=t.target||t.srcElement,n=e.tagName,r=!0;return(e.isContentEditable||(n==="INPUT"||n==="TEXTAREA"||n==="SELECT")&&!e.readOnly)&&(r=!1),r}function ON(t){return typeof t=="string"&&(t=Ol(t)),Vt.indexOf(t)!==-1}function NN(t,e){var n,r;t||(t=al());for(var i in an)if(Object.prototype.hasOwnProperty.call(an,i))for(n=an[i],r=0;r<n.length;)n[r].scope===t?n.splice(r,1):r++;al()===t&&_b(e||"all")}function MN(t){var e=t.keyCode||t.which||t.charCode,n=Vt.indexOf(e);if(n>=0&&Vt.splice(n,1),t.key&&t.key.toLowerCase()==="meta"&&Vt.splice(0,Vt.length),(e===93||e===224)&&(e=91),e in xn){xn[e]=!1;for(var r in ei)ei[r]===e&&(Ct[r]=!1)}}function LN(t){if(typeof t>"u")Object.keys(an).forEach(function(o){return delete an[o]});else if(Array.isArray(t))t.forEach(function(o){o.key&&vd(o)});else if(typeof t=="object")t.key&&vd(t);else if(typeof t=="string"){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i=n[0],s=n[1];typeof i=="function"&&(s=i,i=""),vd({key:t,scope:i,method:s,splitKey:"+"})}}var vd=function(e){var n=e.key,r=e.scope,i=e.method,s=e.splitKey,o=s===void 0?"+":s,a=pb(n);a.forEach(function(l){var u=l.split(o),d=u.length,m=u[d-1],w=m==="*"?"*":Ol(m);if(an[w]){r||(r=al());var g=d>1?fb(ei,u):[];an[w]=an[w].filter(function(E){var b=i?E.method===i:!0;return!(b&&E.scope===r&&AN(E.mods,g))})}})};function H_(t,e,n,r){if(e.element===r){var i;if(e.scope===n||e.scope==="all"){i=e.mods.length>0;for(var s in xn)Object.prototype.hasOwnProperty.call(xn,s)&&(!xn[s]&&e.mods.indexOf(+s)>-1||xn[s]&&e.mods.indexOf(+s)===-1)&&(i=!1);(e.mods.length===0&&!xn[16]&&!xn[18]&&!xn[17]&&!xn[91]||i||e.shortcut==="*")&&(e.keys=[],e.keys=e.keys.concat(Vt),e.method(t,e)===!1&&(t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation&&t.stopPropagation(),t.cancelBubble&&(t.cancelBubble=!0)))}}}function W_(t,e){var n=an["*"],r=t.keyCode||t.which||t.charCode;if(Ct.filter.call(this,t)){if((r===93||r===224)&&(r=91),Vt.indexOf(r)===-1&&r!==229&&Vt.push(r),["ctrlKey","altKey","shiftKey","metaKey"].forEach(function(E){var b=vf[E];t[E]&&Vt.indexOf(b)===-1?Vt.push(b):!t[E]&&Vt.indexOf(b)>-1?Vt.splice(Vt.indexOf(b),1):E==="metaKey"&&t[E]&&Vt.length===3&&(t.ctrlKey||t.shiftKey||t.altKey||(Vt=Vt.slice(Vt.indexOf(b))))}),r in xn){xn[r]=!0;for(var i in ei)ei[i]===r&&(Ct[i]=!0);if(!n)return}for(var s in xn)Object.prototype.hasOwnProperty.call(xn,s)&&(xn[s]=t[vf[s]]);t.getModifierState&&!(t.altKey&&!t.ctrlKey)&&t.getModifierState("AltGraph")&&(Vt.indexOf(17)===-1&&Vt.push(17),Vt.indexOf(18)===-1&&Vt.push(18),xn[17]=!0,xn[18]=!0);var o=al();if(n)for(var a=0;a<n.length;a++)n[a].scope===o&&(t.type==="keydown"&&n[a].keydown||t.type==="keyup"&&n[a].keyup)&&H_(t,n[a],o,e);if(r in an){for(var l=0;l<an[r].length;l++)if((t.type==="keydown"&&an[r][l].keydown||t.type==="keyup"&&an[r][l].keyup)&&an[r][l].key){for(var u=an[r][l],d=u.splitKey,m=u.key.split(d),w=[],g=0;g<m.length;g++)w.push(Ol(m[g]));w.sort().join("")===Vt.sort().join("")&&H_(t,u,o,e)}}}}function VN(t){return gb.indexOf(t)>-1}function Ct(t,e,n){Vt=[];var r=pb(t),i=[],s="all",o=document,a=0,l=!1,u=!0,d="+",m=!1;for(n===void 0&&typeof e=="function"&&(n=e),Object.prototype.toString.call(e)==="[object Object]"&&(e.scope&&(s=e.scope),e.element&&(o=e.element),e.keyup&&(l=e.keyup),e.keydown!==void 0&&(u=e.keydown),e.capture!==void 0&&(m=e.capture),typeof e.splitKey=="string"&&(d=e.splitKey)),typeof e=="string"&&(s=e);a<r.length;a++)t=r[a].split(d),i=[],t.length>1&&(i=fb(ei,t)),t=t[t.length-1],t=t==="*"?"*":Ol(t),t in an||(an[t]=[]),an[t].push({keyup:l,keydown:u,scope:s,mods:i,shortcut:r[a],method:n,key:r[a],splitKey:d,element:o});typeof o<"u"&&!VN(o)&&window&&(gb.push(o),yd(o,"keydown",function(w){W_(w,o)},m),q_||(q_=!0,yd(window,"focus",function(){Vt=[]},m)),yd(o,"keyup",function(w){W_(w,o),MN(w)},m))}function UN(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"all";Object.keys(an).forEach(function(n){var r=an[n].filter(function(i){return i.scope===e&&i.shortcut===t});r.forEach(function(i){i&&i.method&&i.method()})})}var bd={getPressedKeyString:RN,setScope:_b,getScope:al,deleteScope:NN,getPressedKeyCodes:SN,getAllKeyCodes:PN,isPressed:ON,filter:DN,trigger:UN,unbind:LN,keyMap:ol,modifier:ei,modifierMap:vf};for(var kd in bd)Object.prototype.hasOwnProperty.call(bd,kd)&&(Ct[kd]=bd[kd]);if(typeof window<"u"){var FN=window.hotkeys;Ct.noConflict=function(t){return t&&window.hotkeys===Ct&&(window.hotkeys=FN),Ct},window.hotkeys=Ct}const $N={key:0,class:"fixed bottom-0 left-0 right-0 top-0 z-50 bg-gray-600 bg-opacity-50"},BN={class:"mx-8 my-4 max-h-[10vh] overflow-auto break-all text-2xl text-white"},zN={key:0},jN=N("hr",{class:"mx-3 rounded-full border-2 border-white"},null,-1),qN={class:"mx-8 my-4 max-h-[10vh] overflow-auto break-all text-2xl text-white"},HN=N("br",null,null,-1),WN={key:0,class:"mt-8"},KN=N("img",{height:"65",width:"65",src:cm,alt:"No",draggable:"false"},null,-1),GN=[KN],QN=N("img",{height:"65",width:"65",src:IN,alt:"Yes",draggable:"false"},null,-1),YN=[QN],ZN={key:1},XN=N("hr",{class:"mx-3 rounded-full border-2 border-white"},null,-1),JN=N("br",null,null,-1),e3={__name:"Review",props:["auth","db","timeDuration","timeMultiplier"],emits:["reselectDeck"],setup(t,{expose:e,emit:n}){const r=t;Ct("space","review",function(Q,z){Q.preventDefault(),w()}),Ct("space","yes_no",function(Q,z){Q.preventDefault(),E(!0)}),Ct("c","yes_no",function(Q,z){Q.preventDefault(),E(!1)}),Ct("space","check_type_ans",function(Q,z){Q.preventDefault(),g()}),Ct("enter","check_type_ans",function(Q,z){Q.preventDefault(),g()});const i=we(!1),s=we(""),o=we([]),a=we(0),l=we(!1),u=we(""),d=we(null);function m(Q,z){s.value=Q,o.value=z,a.value=T(0,o.value.length),i.value=!0,Ct.setScope("review"),document.body.style.overflow="hidden",o.value[a.value].type_answer&&A()}function w(){o.value[a.value].type_answer?Ct.getScope()==="check_type_ans"&&g():(l.value=!0,Ct.setScope("yes_no"))}function g(){const Q=o.value[a.value].back.replace(/\[.*?\]/g,"");u.value===Q?(E(!0),u.value=""):(E(!1),u.value="")}function E(Q){const z=new Date,Z=new Date(z.getFullYear(),z.getMonth(),z.getDate());if(Q===!0)if(o.value[a.value].streak===0)o.value[a.value].streak=.5,O(!0);else if(o.value[a.value].streak===.5){let ee=new Date(Z);ee.setDate(ee.getDate()+1),Zt(_t(r.db,`users/${r.auth.currentUser.uid}/decks/${s.value}/cards/${o.value[a.value].id}`),{next_review:et.fromDate(ee),streak:1}),R()}else{const ee=Math.pow(r.timeMultiplier,o.value[a.value].streak)*r.timeDuration,oe=Math.floor(ee/24);let me=new Date(Z);me.setDate(me.getDate()+oe),Zt(_t(r.db,`users/${r.auth.currentUser.uid}/decks/${s.value}/cards/${o.value[a.value].id}`),{next_review:et.fromDate(me),streak:o.value[a.value].streak+1}),R()}else o.value[a.value].streak!==0&&o.value[a.value].streak!==.5&&Zt(_t(r.db,`users/${r.auth.currentUser.uid}/decks/${s.value}/cards/${o.value[a.value].id}`),{next_review:et.fromDate(new Date),streak:0}),o.value[a.value].streak=0,O(!0);o.value.length>0&&o.value[a.value].type_answer&&A()}function b(){l.value=!0,Ct.setScope("check_type_ans")}async function A(){await Ss(),d.value.focus()}function T(Q,z){return Math.floor(Math.random()*(z-Q))+Q}function x(){i.value=!1,l.value=!1,Ct.setScope("all"),document.body.style.overflow="auto",n("reselectDeck")}function R(){o.value.splice(a.value,1),o.value.length!==0?O(!1):(x(),Ye.fire({title:"You've finished all reviews for today.",text:"Come back tomorrow for more.",color:"black",icon:"success"}))}function O(Q){if(Q)if(o.value.length!==1){let z=T(0,o.value.length);for(;z===a.value;)z=T(0,o.value.length);a.value=z}else a.value=0;else a.value=T(0,o.value.length);l.value=!1,Ct.setScope("review")}function H(Q){Q.code=="Enter"&&b()}return e({reviewCards:m}),(Q,z)=>i.value?(Ce(),Me("div",$N,[N("button",{onClick:z[0]||(z[0]=Z=>x()),class:"fixed left-1/2 top-[20%] -translate-x-1/2 rounded bg-gray-700 p-3 text-white"}," Cancel "),N("div",{onClick:z[6]||(z[6]=Z=>w()),class:"fixed left-1/2 top-1/3 min-w-[300px] -translate-x-1/2 rounded-lg bg-gradient-to-t from-pink-700 to-purple-800 p-10 text-center shadow-xl shadow-black"},[N("p",BN,At(o.value[a.value].front),1),l.value===!0?(Ce(),Me("div",zN,[jN,N("p",qN,At(o.value[a.value].back),1),HN,o.value[a.value].type_answer?St("",!0):(Ce(),Me("div",WN,[N("button",{onClick:z[1]||(z[1]=Kh(Z=>E(!1),["stop"])),class:"mr-10 rounded-full bg-gradient-to-br from-pink-500 to-red-900 p-1 shadow-md shadow-black"},GN),N("button",{onClick:z[2]||(z[2]=Kh(Z=>E(!0),["stop"])),class:"rounded-full bg-gradient-to-br from-purple-500 to-blue-900 p-1 shadow-md shadow-black"},YN)]))])):St("",!0),o.value[a.value].type_answer===!0&&l.value===!1?(Ce(),Me("div",ZN,[XN,nt(N("input",{ref_key:"answer_field_ref",ref:d,"onUpdate:modelValue":z[3]||(z[3]=Z=>u.value=Z),type:"text",placeholder:"Type Answer",onKeypress:z[4]||(z[4]=Z=>H(Z)),class:"my-4 w-[250px] rounded-md bg-gradient-to-r from-purple-500 to-pink-500 p-3 text-center text-2xl text-white placeholder-black shadow shadow-black"},null,544),[[Ft,u.value]]),JN,N("button",{onClick:z[5]||(z[5]=Kh(Z=>b(),["stop"])),class:"mt-2 rounded-md bg-gradient-to-br from-purple-500 to-blue-900 p-3 text-xl text-white shadow-md shadow-black"}," Check ")])):St("",!0)])])):St("",!0)}};/*! @license DOMPurify 3.0.9 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.0.9/LICENSE */const{entries:wb,setPrototypeOf:K_,isFrozen:t3,getPrototypeOf:n3,getOwnPropertyDescriptor:r3}=Object;let{freeze:Qn,seal:Sr,create:yb}=Object,{apply:bf,construct:kf}=typeof Reflect<"u"&&Reflect;Qn||(Qn=function(e){return e});Sr||(Sr=function(e){return e});bf||(bf=function(e,n,r){return e.apply(n,r)});kf||(kf=function(e,n){return new e(...n)});const bu=lr(Array.prototype.forEach),G_=lr(Array.prototype.pop),da=lr(Array.prototype.push),$u=lr(String.prototype.toLowerCase),Ed=lr(String.prototype.toString),i3=lr(String.prototype.match),fa=lr(String.prototype.replace),s3=lr(String.prototype.indexOf),o3=lr(String.prototype.trim),vr=lr(Object.prototype.hasOwnProperty),ir=lr(RegExp.prototype.test),pa=a3(TypeError);function lr(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return bf(t,e,r)}}function a3(t){return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return kf(t,n)}}function dt(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:$u;K_&&K_(t,null);let r=e.length;for(;r--;){let i=e[r];if(typeof i=="string"){const s=n(i);s!==i&&(t3(e)||(e[r]=s),i=s)}t[i]=!0}return t}function l3(t){for(let e=0;e<t.length;e++)vr(t,e)||(t[e]=null);return t}function ms(t){const e=yb(null);for(const[n,r]of wb(t))vr(t,n)&&(Array.isArray(r)?e[n]=l3(r):r&&typeof r=="object"&&r.constructor===Object?e[n]=ms(r):e[n]=r);return e}function ku(t,e){for(;t!==null;){const r=r3(t,e);if(r){if(r.get)return lr(r.get);if(typeof r.value=="function")return lr(r.value)}t=n3(t)}function n(){return null}return n}const Q_=Qn(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Td=Qn(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Id=Qn(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),u3=Qn(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Ad=Qn(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),c3=Qn(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Y_=Qn(["#text"]),Z_=Qn(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),xd=Qn(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),X_=Qn(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Eu=Qn(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),h3=Sr(/\{\{[\w\W]*|[\w\W]*\}\}/gm),d3=Sr(/<%[\w\W]*|[\w\W]*%>/gm),f3=Sr(/\${[\w\W]*}/gm),p3=Sr(/^data-[\-\w.\u00B7-\uFFFF]/),m3=Sr(/^aria-[\-\w]+$/),vb=Sr(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),g3=Sr(/^(?:\w+script|data):/i),_3=Sr(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),bb=Sr(/^html$/i);var J_=Object.freeze({__proto__:null,MUSTACHE_EXPR:h3,ERB_EXPR:d3,TMPLIT_EXPR:f3,DATA_ATTR:p3,ARIA_ATTR:m3,IS_ALLOWED_URI:vb,IS_SCRIPT_OR_DATA:g3,ATTR_WHITESPACE:_3,DOCTYPE_NAME:bb});const w3=function(){return typeof window>"u"?null:window},y3=function(e,n){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let r=null;const i="data-tt-policy-suffix";n&&n.hasAttribute(i)&&(r=n.getAttribute(i));const s="dompurify"+(r?"#"+r:"");try{return e.createPolicy(s,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+s+" could not be created."),null}};function kb(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:w3();const e=Ne=>kb(Ne);if(e.version="3.0.9",e.removed=[],!t||!t.document||t.document.nodeType!==9)return e.isSupported=!1,e;let{document:n}=t;const r=n,i=r.currentScript,{DocumentFragment:s,HTMLTemplateElement:o,Node:a,Element:l,NodeFilter:u,NamedNodeMap:d=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:m,DOMParser:w,trustedTypes:g}=t,E=l.prototype,b=ku(E,"cloneNode"),A=ku(E,"nextSibling"),T=ku(E,"childNodes"),x=ku(E,"parentNode");if(typeof o=="function"){const Ne=n.createElement("template");Ne.content&&Ne.content.ownerDocument&&(n=Ne.content.ownerDocument)}let R,O="";const{implementation:H,createNodeIterator:Q,createDocumentFragment:z,getElementsByTagName:Z}=n,{importNode:ee}=r;let oe={};e.isSupported=typeof wb=="function"&&typeof x=="function"&&H&&H.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:me,ERB_EXPR:$,TMPLIT_EXPR:X,DATA_ATTR:I,ARIA_ATTR:re,IS_SCRIPT_OR_DATA:ae,ATTR_WHITESPACE:K}=J_;let{IS_ALLOWED_URI:he}=J_,ne=null;const ce=dt({},[...Q_,...Td,...Id,...Ad,...Y_]);let te=null;const J=dt({},[...Z_,...xd,...X_,...Eu]);let ke=Object.seal(yb(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ve=null,q=null,tt=!0,ut=!0,qe=!1,ze=!0,He=!1,Qe=!1,F=!1,V=!1,_=!1,B=!1,M=!1,S=!0,C=!1;const D="user-content-";let G=!0,W=!1,L={},se=null;const de=dt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let ue=null;const ye=dt({},["audio","video","img","source","image","track"]);let Pe=null;const xe=dt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Fe="http://www.w3.org/1998/Math/MathML",rt="http://www.w3.org/2000/svg",ct="http://www.w3.org/1999/xhtml";let Lt=ct,ft=!1,dn=null;const Ot=dt({},[Fe,rt,ct],Ed);let kt=null;const qn=["application/xhtml+xml","text/html"],We="text/html";let Bt=null,Pn=null;const gr=n.createElement("form"),wn=function(Y){return Y instanceof RegExp||Y instanceof Function},ur=function(){let Y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Pn&&Pn===Y)){if((!Y||typeof Y!="object")&&(Y={}),Y=ms(Y),kt=qn.indexOf(Y.PARSER_MEDIA_TYPE)===-1?We:Y.PARSER_MEDIA_TYPE,Bt=kt==="application/xhtml+xml"?Ed:$u,ne=vr(Y,"ALLOWED_TAGS")?dt({},Y.ALLOWED_TAGS,Bt):ce,te=vr(Y,"ALLOWED_ATTR")?dt({},Y.ALLOWED_ATTR,Bt):J,dn=vr(Y,"ALLOWED_NAMESPACES")?dt({},Y.ALLOWED_NAMESPACES,Ed):Ot,Pe=vr(Y,"ADD_URI_SAFE_ATTR")?dt(ms(xe),Y.ADD_URI_SAFE_ATTR,Bt):xe,ue=vr(Y,"ADD_DATA_URI_TAGS")?dt(ms(ye),Y.ADD_DATA_URI_TAGS,Bt):ye,se=vr(Y,"FORBID_CONTENTS")?dt({},Y.FORBID_CONTENTS,Bt):de,ve=vr(Y,"FORBID_TAGS")?dt({},Y.FORBID_TAGS,Bt):{},q=vr(Y,"FORBID_ATTR")?dt({},Y.FORBID_ATTR,Bt):{},L=vr(Y,"USE_PROFILES")?Y.USE_PROFILES:!1,tt=Y.ALLOW_ARIA_ATTR!==!1,ut=Y.ALLOW_DATA_ATTR!==!1,qe=Y.ALLOW_UNKNOWN_PROTOCOLS||!1,ze=Y.ALLOW_SELF_CLOSE_IN_ATTR!==!1,He=Y.SAFE_FOR_TEMPLATES||!1,Qe=Y.WHOLE_DOCUMENT||!1,_=Y.RETURN_DOM||!1,B=Y.RETURN_DOM_FRAGMENT||!1,M=Y.RETURN_TRUSTED_TYPE||!1,V=Y.FORCE_BODY||!1,S=Y.SANITIZE_DOM!==!1,C=Y.SANITIZE_NAMED_PROPS||!1,G=Y.KEEP_CONTENT!==!1,W=Y.IN_PLACE||!1,he=Y.ALLOWED_URI_REGEXP||vb,Lt=Y.NAMESPACE||ct,ke=Y.CUSTOM_ELEMENT_HANDLING||{},Y.CUSTOM_ELEMENT_HANDLING&&wn(Y.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ke.tagNameCheck=Y.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Y.CUSTOM_ELEMENT_HANDLING&&wn(Y.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ke.attributeNameCheck=Y.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Y.CUSTOM_ELEMENT_HANDLING&&typeof Y.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(ke.allowCustomizedBuiltInElements=Y.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),He&&(ut=!1),B&&(_=!0),L&&(ne=dt({},Y_),te=[],L.html===!0&&(dt(ne,Q_),dt(te,Z_)),L.svg===!0&&(dt(ne,Td),dt(te,xd),dt(te,Eu)),L.svgFilters===!0&&(dt(ne,Id),dt(te,xd),dt(te,Eu)),L.mathMl===!0&&(dt(ne,Ad),dt(te,X_),dt(te,Eu))),Y.ADD_TAGS&&(ne===ce&&(ne=ms(ne)),dt(ne,Y.ADD_TAGS,Bt)),Y.ADD_ATTR&&(te===J&&(te=ms(te)),dt(te,Y.ADD_ATTR,Bt)),Y.ADD_URI_SAFE_ATTR&&dt(Pe,Y.ADD_URI_SAFE_ATTR,Bt),Y.FORBID_CONTENTS&&(se===de&&(se=ms(se)),dt(se,Y.FORBID_CONTENTS,Bt)),G&&(ne["#text"]=!0),Qe&&dt(ne,["html","head","body"]),ne.table&&(dt(ne,["tbody"]),delete ve.tbody),Y.TRUSTED_TYPES_POLICY){if(typeof Y.TRUSTED_TYPES_POLICY.createHTML!="function")throw pa('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof Y.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw pa('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');R=Y.TRUSTED_TYPES_POLICY,O=R.createHTML("")}else R===void 0&&(R=y3(g,i)),R!==null&&typeof O=="string"&&(O=R.createHTML(""));Qn&&Qn(Y),Pn=Y}},zt=dt({},["mi","mo","mn","ms","mtext"]),Hn=dt({},["foreignobject","desc","title","annotation-xml"]),Te=dt({},["title","style","font","a","script"]),yn=dt({},[...Td,...Id,...u3]),en=dt({},[...Ad,...c3]),Rr=function(Y){let Ee=x(Y);(!Ee||!Ee.tagName)&&(Ee={namespaceURI:Lt,tagName:"template"});const Re=$u(Y.tagName),st=$u(Ee.tagName);return dn[Y.namespaceURI]?Y.namespaceURI===rt?Ee.namespaceURI===ct?Re==="svg":Ee.namespaceURI===Fe?Re==="svg"&&(st==="annotation-xml"||zt[st]):!!yn[Re]:Y.namespaceURI===Fe?Ee.namespaceURI===ct?Re==="math":Ee.namespaceURI===rt?Re==="math"&&Hn[st]:!!en[Re]:Y.namespaceURI===ct?Ee.namespaceURI===rt&&!Hn[st]||Ee.namespaceURI===Fe&&!zt[st]?!1:!en[Re]&&(Te[Re]||!yn[Re]):!!(kt==="application/xhtml+xml"&&dn[Y.namespaceURI]):!1},Yn=function(Y){da(e.removed,{element:Y});try{Y.parentNode.removeChild(Y)}catch{Y.remove()}},it=function(Y,Ee){try{da(e.removed,{attribute:Ee.getAttributeNode(Y),from:Ee})}catch{da(e.removed,{attribute:null,from:Ee})}if(Ee.removeAttribute(Y),Y==="is"&&!te[Y])if(_||B)try{Yn(Ee)}catch{}else try{Ee.setAttribute(Y,"")}catch{}},un=function(Y){let Ee=null,Re=null;if(V)Y="<remove></remove>"+Y;else{const nn=i3(Y,/^[\r\n\t ]+/);Re=nn&&nn[0]}kt==="application/xhtml+xml"&&Lt===ct&&(Y='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Y+"</body></html>");const st=R?R.createHTML(Y):Y;if(Lt===ct)try{Ee=new w().parseFromString(st,kt)}catch{}if(!Ee||!Ee.documentElement){Ee=H.createDocument(Lt,"template",null);try{Ee.documentElement.innerHTML=ft?O:st}catch{}}const Yt=Ee.body||Ee.documentElement;return Y&&Re&&Yt.insertBefore(n.createTextNode(Re),Yt.childNodes[0]||null),Lt===ct?Z.call(Ee,Qe?"html":"body")[0]:Qe?Ee.documentElement:Yt},Zn=function(Y){return Q.call(Y.ownerDocument||Y,Y,u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT,null)},tn=function(Y){return Y instanceof m&&(typeof Y.nodeName!="string"||typeof Y.textContent!="string"||typeof Y.removeChild!="function"||!(Y.attributes instanceof d)||typeof Y.removeAttribute!="function"||typeof Y.setAttribute!="function"||typeof Y.namespaceURI!="string"||typeof Y.insertBefore!="function"||typeof Y.hasChildNodes!="function")},Qt=function(Y){return typeof a=="function"&&Y instanceof a},yt=function(Y,Ee,Re){oe[Y]&&bu(oe[Y],st=>{st.call(e,Ee,Re,Pn)})},ti=function(Y){let Ee=null;if(yt("beforeSanitizeElements",Y,null),tn(Y))return Yn(Y),!0;const Re=Bt(Y.nodeName);if(yt("uponSanitizeElement",Y,{tagName:Re,allowedTags:ne}),Y.hasChildNodes()&&!Qt(Y.firstElementChild)&&ir(/<[/\w]/g,Y.innerHTML)&&ir(/<[/\w]/g,Y.textContent))return Yn(Y),!0;if(!ne[Re]||ve[Re]){if(!ve[Re]&&Pr(Re)&&(ke.tagNameCheck instanceof RegExp&&ir(ke.tagNameCheck,Re)||ke.tagNameCheck instanceof Function&&ke.tagNameCheck(Re)))return!1;if(G&&!se[Re]){const st=x(Y)||Y.parentNode,Yt=T(Y)||Y.childNodes;if(Yt&&st){const nn=Yt.length;for(let jt=nn-1;jt>=0;--jt)st.insertBefore(b(Yt[jt],!0),A(Y))}}return Yn(Y),!0}return Y instanceof l&&!Rr(Y)||(Re==="noscript"||Re==="noembed"||Re==="noframes")&&ir(/<\/no(script|embed|frames)/i,Y.innerHTML)?(Yn(Y),!0):(He&&Y.nodeType===3&&(Ee=Y.textContent,bu([me,$,X],st=>{Ee=fa(Ee,st," ")}),Y.textContent!==Ee&&(da(e.removed,{element:Y.cloneNode()}),Y.textContent=Ee)),yt("afterSanitizeElements",Y,null),!1)},ki=function(Y,Ee,Re){if(S&&(Ee==="id"||Ee==="name")&&(Re in n||Re in gr))return!1;if(!(ut&&!q[Ee]&&ir(I,Ee))){if(!(tt&&ir(re,Ee))){if(!te[Ee]||q[Ee]){if(!(Pr(Y)&&(ke.tagNameCheck instanceof RegExp&&ir(ke.tagNameCheck,Y)||ke.tagNameCheck instanceof Function&&ke.tagNameCheck(Y))&&(ke.attributeNameCheck instanceof RegExp&&ir(ke.attributeNameCheck,Ee)||ke.attributeNameCheck instanceof Function&&ke.attributeNameCheck(Ee))||Ee==="is"&&ke.allowCustomizedBuiltInElements&&(ke.tagNameCheck instanceof RegExp&&ir(ke.tagNameCheck,Re)||ke.tagNameCheck instanceof Function&&ke.tagNameCheck(Re))))return!1}else if(!Pe[Ee]){if(!ir(he,fa(Re,K,""))){if(!((Ee==="src"||Ee==="xlink:href"||Ee==="href")&&Y!=="script"&&s3(Re,"data:")===0&&ue[Y])){if(!(qe&&!ir(ae,fa(Re,K,"")))){if(Re)return!1}}}}}}return!0},Pr=function(Y){return Y!=="annotation-xml"&&Y.indexOf("-")>0},bt=function(Y){yt("beforeSanitizeAttributes",Y,null);const{attributes:Ee}=Y;if(!Ee)return;const Re={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:te};let st=Ee.length;for(;st--;){const Yt=Ee[st],{name:nn,namespaceURI:jt,value:cr}=Yt,Dr=Bt(nn);let rn=nn==="value"?cr:o3(cr);if(Re.attrName=Dr,Re.attrValue=rn,Re.keepAttr=!0,Re.forceKeepAttr=void 0,yt("uponSanitizeAttribute",Y,Re),rn=Re.attrValue,Re.forceKeepAttr||(it(nn,Y),!Re.keepAttr))continue;if(!ze&&ir(/\/>/i,rn)){it(nn,Y);continue}He&&bu([me,$,X],ni=>{rn=fa(rn,ni," ")});const ts=Bt(Y.nodeName);if(ki(ts,Dr,rn)){if(C&&(Dr==="id"||Dr==="name")&&(it(nn,Y),rn=D+rn),R&&typeof g=="object"&&typeof g.getAttributeType=="function"&&!jt)switch(g.getAttributeType(ts,Dr)){case"TrustedHTML":{rn=R.createHTML(rn);break}case"TrustedScriptURL":{rn=R.createScriptURL(rn);break}}try{jt?Y.setAttributeNS(jt,nn,rn):Y.setAttribute(nn,rn),G_(e.removed)}catch{}}}yt("afterSanitizeAttributes",Y,null)},Ws=function Ne(Y){let Ee=null;const Re=Zn(Y);for(yt("beforeSanitizeShadowDOM",Y,null);Ee=Re.nextNode();)yt("uponSanitizeShadowNode",Ee,null),!ti(Ee)&&(Ee.content instanceof s&&Ne(Ee.content),bt(Ee));yt("afterSanitizeShadowDOM",Y,null)};return e.sanitize=function(Ne){let Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ee=null,Re=null,st=null,Yt=null;if(ft=!Ne,ft&&(Ne="<!-->"),typeof Ne!="string"&&!Qt(Ne))if(typeof Ne.toString=="function"){if(Ne=Ne.toString(),typeof Ne!="string")throw pa("dirty is not a string, aborting")}else throw pa("toString is not a function");if(!e.isSupported)return Ne;if(F||ur(Y),e.removed=[],typeof Ne=="string"&&(W=!1),W){if(Ne.nodeName){const cr=Bt(Ne.nodeName);if(!ne[cr]||ve[cr])throw pa("root node is forbidden and cannot be sanitized in-place")}}else if(Ne instanceof a)Ee=un("<!---->"),Re=Ee.ownerDocument.importNode(Ne,!0),Re.nodeType===1&&Re.nodeName==="BODY"||Re.nodeName==="HTML"?Ee=Re:Ee.appendChild(Re);else{if(!_&&!He&&!Qe&&Ne.indexOf("<")===-1)return R&&M?R.createHTML(Ne):Ne;if(Ee=un(Ne),!Ee)return _?null:M?O:""}Ee&&V&&Yn(Ee.firstChild);const nn=Zn(W?Ne:Ee);for(;st=nn.nextNode();)ti(st)||(st.content instanceof s&&Ws(st.content),bt(st));if(W)return Ne;if(_){if(B)for(Yt=z.call(Ee.ownerDocument);Ee.firstChild;)Yt.appendChild(Ee.firstChild);else Yt=Ee;return(te.shadowroot||te.shadowrootmode)&&(Yt=ee.call(r,Yt,!0)),Yt}let jt=Qe?Ee.outerHTML:Ee.innerHTML;return Qe&&ne["!doctype"]&&Ee.ownerDocument&&Ee.ownerDocument.doctype&&Ee.ownerDocument.doctype.name&&ir(bb,Ee.ownerDocument.doctype.name)&&(jt="<!DOCTYPE "+Ee.ownerDocument.doctype.name+`>
`+jt),He&&bu([me,$,X],cr=>{jt=fa(jt,cr," ")}),R&&M?R.createHTML(jt):jt},e.setConfig=function(){let Ne=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ur(Ne),F=!0},e.clearConfig=function(){Pn=null,F=!1},e.isValidAttribute=function(Ne,Y,Ee){Pn||ur({});const Re=Bt(Ne),st=Bt(Y);return ki(Re,st,Ee)},e.addHook=function(Ne,Y){typeof Y=="function"&&(oe[Ne]=oe[Ne]||[],da(oe[Ne],Y))},e.removeHook=function(Ne){if(oe[Ne])return G_(oe[Ne])},e.removeHooks=function(Ne){oe[Ne]&&(oe[Ne]=[])},e.removeAllHooks=function(){oe={}},e}var Cd=kb();function dm(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let Hs=dm();function Eb(t){Hs=t}const Tb=/[&<>"']/,v3=new RegExp(Tb.source,"g"),Ib=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,b3=new RegExp(Ib.source,"g"),k3={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ew=t=>k3[t];function sr(t,e){if(e){if(Tb.test(t))return t.replace(v3,ew)}else if(Ib.test(t))return t.replace(b3,ew);return t}const E3=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function T3(t){return t.replace(E3,(e,n)=>(n=n.toLowerCase(),n==="colon"?":":n.charAt(0)==="#"?n.charAt(1)==="x"?String.fromCharCode(parseInt(n.substring(2),16)):String.fromCharCode(+n.substring(1)):""))}const I3=/(^|[^\[])\^/g;function Dt(t,e){let n=typeof t=="string"?t:t.source;e=e||"";const r={replace:(i,s)=>{let o=typeof s=="string"?s:s.source;return o=o.replace(I3,"$1"),n=n.replace(i,o),r},getRegex:()=>new RegExp(n,e)};return r}function tw(t){try{t=encodeURI(t).replace(/%25/g,"%")}catch{return null}return t}const Oa={exec:()=>null};function nw(t,e){const n=t.replace(/\|/g,(s,o,a)=>{let l=!1,u=o;for(;--u>=0&&a[u]==="\\";)l=!l;return l?"|":" |"}),r=n.split(/ \|/);let i=0;if(r[0].trim()||r.shift(),r.length>0&&!r[r.length-1].trim()&&r.pop(),e)if(r.length>e)r.splice(e);else for(;r.length<e;)r.push("");for(;i<r.length;i++)r[i]=r[i].trim().replace(/\\\|/g,"|");return r}function Tu(t,e,n){const r=t.length;if(r===0)return"";let i=0;for(;i<r;){const s=t.charAt(r-i-1);if(s===e&&!n)i++;else if(s!==e&&n)i++;else break}return t.slice(0,r-i)}function A3(t,e){if(t.indexOf(e[1])===-1)return-1;let n=0;for(let r=0;r<t.length;r++)if(t[r]==="\\")r++;else if(t[r]===e[0])n++;else if(t[r]===e[1]&&(n--,n<0))return r;return-1}function rw(t,e,n,r){const i=e.href,s=e.title?sr(e.title):null,o=t[1].replace(/\\([\[\]])/g,"$1");if(t[0].charAt(0)!=="!"){r.state.inLink=!0;const a={type:"link",raw:n,href:i,title:s,text:o,tokens:r.inlineTokens(o)};return r.state.inLink=!1,a}return{type:"image",raw:n,href:i,title:s,text:sr(o)}}function x3(t,e){const n=t.match(/^(\s+)(?:```)/);if(n===null)return e;const r=n[1];return e.split(`
`).map(i=>{const s=i.match(/^\s+/);if(s===null)return i;const[o]=s;return o.length>=r.length?i.slice(r.length):i}).join(`
`)}class _c{constructor(e){Ht(this,"options");Ht(this,"rules");Ht(this,"lexer");this.options=e||Hs}space(e){const n=this.rules.block.newline.exec(e);if(n&&n[0].length>0)return{type:"space",raw:n[0]}}code(e){const n=this.rules.block.code.exec(e);if(n){const r=n[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:n[0],codeBlockStyle:"indented",text:this.options.pedantic?r:Tu(r,`
`)}}}fences(e){const n=this.rules.block.fences.exec(e);if(n){const r=n[0],i=x3(r,n[3]||"");return{type:"code",raw:r,lang:n[2]?n[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):n[2],text:i}}}heading(e){const n=this.rules.block.heading.exec(e);if(n){let r=n[2].trim();if(/#$/.test(r)){const i=Tu(r,"#");(this.options.pedantic||!i||/ $/.test(i))&&(r=i.trim())}return{type:"heading",raw:n[0],depth:n[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(e){const n=this.rules.block.hr.exec(e);if(n)return{type:"hr",raw:n[0]}}blockquote(e){const n=this.rules.block.blockquote.exec(e);if(n){const r=Tu(n[0].replace(/^ *>[ \t]?/gm,""),`
`),i=this.lexer.state.top;this.lexer.state.top=!0;const s=this.lexer.blockTokens(r);return this.lexer.state.top=i,{type:"blockquote",raw:n[0],tokens:s,text:r}}}list(e){let n=this.rules.block.list.exec(e);if(n){let r=n[1].trim();const i=r.length>1,s={type:"list",raw:"",ordered:i,start:i?+r.slice(0,-1):"",loose:!1,items:[]};r=i?`\\d{1,9}\\${r.slice(-1)}`:`\\${r}`,this.options.pedantic&&(r=i?r:"[*+-]");const o=new RegExp(`^( {0,3}${r})((?:[	 ][^\\n]*)?(?:\\n|$))`);let a="",l="",u=!1;for(;e;){let d=!1;if(!(n=o.exec(e))||this.rules.block.hr.test(e))break;a=n[0],e=e.substring(a.length);let m=n[2].split(`
`,1)[0].replace(/^\t+/,T=>" ".repeat(3*T.length)),w=e.split(`
`,1)[0],g=0;this.options.pedantic?(g=2,l=m.trimStart()):(g=n[2].search(/[^ ]/),g=g>4?1:g,l=m.slice(g),g+=n[1].length);let E=!1;if(!m&&/^ *$/.test(w)&&(a+=w+`
`,e=e.substring(w.length+1),d=!0),!d){const T=new RegExp(`^ {0,${Math.min(3,g-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),x=new RegExp(`^ {0,${Math.min(3,g-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),R=new RegExp(`^ {0,${Math.min(3,g-1)}}(?:\`\`\`|~~~)`),O=new RegExp(`^ {0,${Math.min(3,g-1)}}#`);for(;e;){const H=e.split(`
`,1)[0];if(w=H,this.options.pedantic&&(w=w.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),R.test(w)||O.test(w)||T.test(w)||x.test(e))break;if(w.search(/[^ ]/)>=g||!w.trim())l+=`
`+w.slice(g);else{if(E||m.search(/[^ ]/)>=4||R.test(m)||O.test(m)||x.test(m))break;l+=`
`+w}!E&&!w.trim()&&(E=!0),a+=H+`
`,e=e.substring(H.length+1),m=w.slice(g)}}s.loose||(u?s.loose=!0:/\n *\n *$/.test(a)&&(u=!0));let b=null,A;this.options.gfm&&(b=/^\[[ xX]\] /.exec(l),b&&(A=b[0]!=="[ ] ",l=l.replace(/^\[[ xX]\] +/,""))),s.items.push({type:"list_item",raw:a,task:!!b,checked:A,loose:!1,text:l,tokens:[]}),s.raw+=a}s.items[s.items.length-1].raw=a.trimEnd(),s.items[s.items.length-1].text=l.trimEnd(),s.raw=s.raw.trimEnd();for(let d=0;d<s.items.length;d++)if(this.lexer.state.top=!1,s.items[d].tokens=this.lexer.blockTokens(s.items[d].text,[]),!s.loose){const m=s.items[d].tokens.filter(g=>g.type==="space"),w=m.length>0&&m.some(g=>/\n.*\n/.test(g.raw));s.loose=w}if(s.loose)for(let d=0;d<s.items.length;d++)s.items[d].loose=!0;return s}}html(e){const n=this.rules.block.html.exec(e);if(n)return{type:"html",block:!0,raw:n[0],pre:n[1]==="pre"||n[1]==="script"||n[1]==="style",text:n[0]}}def(e){const n=this.rules.block.def.exec(e);if(n){const r=n[1].toLowerCase().replace(/\s+/g," "),i=n[2]?n[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",s=n[3]?n[3].substring(1,n[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):n[3];return{type:"def",tag:r,raw:n[0],href:i,title:s}}}table(e){const n=this.rules.block.table.exec(e);if(!n||!/[:|]/.test(n[2]))return;const r=nw(n[1]),i=n[2].replace(/^\||\| *$/g,"").split("|"),s=n[3]&&n[3].trim()?n[3].replace(/\n[ \t]*$/,"").split(`
`):[],o={type:"table",raw:n[0],header:[],align:[],rows:[]};if(r.length===i.length){for(const a of i)/^ *-+: *$/.test(a)?o.align.push("right"):/^ *:-+: *$/.test(a)?o.align.push("center"):/^ *:-+ *$/.test(a)?o.align.push("left"):o.align.push(null);for(const a of r)o.header.push({text:a,tokens:this.lexer.inline(a)});for(const a of s)o.rows.push(nw(a,o.header.length).map(l=>({text:l,tokens:this.lexer.inline(l)})));return o}}lheading(e){const n=this.rules.block.lheading.exec(e);if(n)return{type:"heading",raw:n[0],depth:n[2].charAt(0)==="="?1:2,text:n[1],tokens:this.lexer.inline(n[1])}}paragraph(e){const n=this.rules.block.paragraph.exec(e);if(n){const r=n[1].charAt(n[1].length-1)===`
`?n[1].slice(0,-1):n[1];return{type:"paragraph",raw:n[0],text:r,tokens:this.lexer.inline(r)}}}text(e){const n=this.rules.block.text.exec(e);if(n)return{type:"text",raw:n[0],text:n[0],tokens:this.lexer.inline(n[0])}}escape(e){const n=this.rules.inline.escape.exec(e);if(n)return{type:"escape",raw:n[0],text:sr(n[1])}}tag(e){const n=this.rules.inline.tag.exec(e);if(n)return!this.lexer.state.inLink&&/^<a /i.test(n[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(n[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(n[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(n[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:n[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:n[0]}}link(e){const n=this.rules.inline.link.exec(e);if(n){const r=n[2].trim();if(!this.options.pedantic&&/^</.test(r)){if(!/>$/.test(r))return;const o=Tu(r.slice(0,-1),"\\");if((r.length-o.length)%2===0)return}else{const o=A3(n[2],"()");if(o>-1){const l=(n[0].indexOf("!")===0?5:4)+n[1].length+o;n[2]=n[2].substring(0,o),n[0]=n[0].substring(0,l).trim(),n[3]=""}}let i=n[2],s="";if(this.options.pedantic){const o=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(i);o&&(i=o[1],s=o[3])}else s=n[3]?n[3].slice(1,-1):"";return i=i.trim(),/^</.test(i)&&(this.options.pedantic&&!/>$/.test(r)?i=i.slice(1):i=i.slice(1,-1)),rw(n,{href:i&&i.replace(this.rules.inline.anyPunctuation,"$1"),title:s&&s.replace(this.rules.inline.anyPunctuation,"$1")},n[0],this.lexer)}}reflink(e,n){let r;if((r=this.rules.inline.reflink.exec(e))||(r=this.rules.inline.nolink.exec(e))){const i=(r[2]||r[1]).replace(/\s+/g," "),s=n[i.toLowerCase()];if(!s){const o=r[0].charAt(0);return{type:"text",raw:o,text:o}}return rw(r,s,r[0],this.lexer)}}emStrong(e,n,r=""){let i=this.rules.inline.emStrongLDelim.exec(e);if(!i||i[3]&&r.match(/[\p{L}\p{N}]/u))return;if(!(i[1]||i[2]||"")||!r||this.rules.inline.punctuation.exec(r)){const o=[...i[0]].length-1;let a,l,u=o,d=0;const m=i[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(m.lastIndex=0,n=n.slice(-1*e.length+o);(i=m.exec(n))!=null;){if(a=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!a)continue;if(l=[...a].length,i[3]||i[4]){u+=l;continue}else if((i[5]||i[6])&&o%3&&!((o+l)%3)){d+=l;continue}if(u-=l,u>0)continue;l=Math.min(l,l+u+d);const w=[...i[0]][0].length,g=e.slice(0,o+i.index+w+l);if(Math.min(o,l)%2){const b=g.slice(1,-1);return{type:"em",raw:g,text:b,tokens:this.lexer.inlineTokens(b)}}const E=g.slice(2,-2);return{type:"strong",raw:g,text:E,tokens:this.lexer.inlineTokens(E)}}}}codespan(e){const n=this.rules.inline.code.exec(e);if(n){let r=n[2].replace(/\n/g," ");const i=/[^ ]/.test(r),s=/^ /.test(r)&&/ $/.test(r);return i&&s&&(r=r.substring(1,r.length-1)),r=sr(r,!0),{type:"codespan",raw:n[0],text:r}}}br(e){const n=this.rules.inline.br.exec(e);if(n)return{type:"br",raw:n[0]}}del(e){const n=this.rules.inline.del.exec(e);if(n)return{type:"del",raw:n[0],text:n[2],tokens:this.lexer.inlineTokens(n[2])}}autolink(e){const n=this.rules.inline.autolink.exec(e);if(n){let r,i;return n[2]==="@"?(r=sr(n[1]),i="mailto:"+r):(r=sr(n[1]),i=r),{type:"link",raw:n[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}url(e){var r;let n;if(n=this.rules.inline.url.exec(e)){let i,s;if(n[2]==="@")i=sr(n[0]),s="mailto:"+i;else{let o;do o=n[0],n[0]=((r=this.rules.inline._backpedal.exec(n[0]))==null?void 0:r[0])??"";while(o!==n[0]);i=sr(n[0]),n[1]==="www."?s="http://"+n[0]:s=n[0]}return{type:"link",raw:n[0],text:i,href:s,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(e){const n=this.rules.inline.text.exec(e);if(n){let r;return this.lexer.state.inRawBlock?r=n[0]:r=sr(n[0]),{type:"text",raw:n[0],text:r}}}}const C3=/^(?: *(?:\n|$))+/,S3=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,R3=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Nl=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,P3=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Ab=/(?:[*+-]|\d{1,9}[.)])/,xb=Dt(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,Ab).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),fm=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,D3=/^[^\n]+/,pm=/(?!\s*\])(?:\\.|[^\[\]\\])+/,O3=Dt(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",pm).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),N3=Dt(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Ab).getRegex(),mh="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",mm=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,M3=Dt("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",mm).replace("tag",mh).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Cb=Dt(fm).replace("hr",Nl).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",mh).getRegex(),L3=Dt(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Cb).getRegex(),gm={blockquote:L3,code:S3,def:O3,fences:R3,heading:P3,hr:Nl,html:M3,lheading:xb,list:N3,newline:C3,paragraph:Cb,table:Oa,text:D3},iw=Dt("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Nl).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",mh).getRegex(),V3={...gm,table:iw,paragraph:Dt(fm).replace("hr",Nl).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",iw).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",mh).getRegex()},U3={...gm,html:Dt(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",mm).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Oa,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Dt(fm).replace("hr",Nl).replace("heading",` *#{1,6} *[^
]`).replace("lheading",xb).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Sb=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,F3=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Rb=/^( {2,}|\\)\n(?!\s*$)/,$3=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Ml="\\p{P}\\p{S}",B3=Dt(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,Ml).getRegex(),z3=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,j3=Dt(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,Ml).getRegex(),q3=Dt("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,Ml).getRegex(),H3=Dt("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,Ml).getRegex(),W3=Dt(/\\([punct])/,"gu").replace(/punct/g,Ml).getRegex(),K3=Dt(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),G3=Dt(mm).replace("(?:-->|$)","-->").getRegex(),Q3=Dt("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",G3).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),wc=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Y3=Dt(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",wc).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Pb=Dt(/^!?\[(label)\]\[(ref)\]/).replace("label",wc).replace("ref",pm).getRegex(),Db=Dt(/^!?\[(ref)\](?:\[\])?/).replace("ref",pm).getRegex(),Z3=Dt("reflink|nolink(?!\\()","g").replace("reflink",Pb).replace("nolink",Db).getRegex(),_m={_backpedal:Oa,anyPunctuation:W3,autolink:K3,blockSkip:z3,br:Rb,code:F3,del:Oa,emStrongLDelim:j3,emStrongRDelimAst:q3,emStrongRDelimUnd:H3,escape:Sb,link:Y3,nolink:Db,punctuation:B3,reflink:Pb,reflinkSearch:Z3,tag:Q3,text:$3,url:Oa},X3={..._m,link:Dt(/^!?\[(label)\]\((.*?)\)/).replace("label",wc).getRegex(),reflink:Dt(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",wc).getRegex()},Ef={..._m,escape:Dt(Sb).replace("])","~|])").getRegex(),url:Dt(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},J3={...Ef,br:Dt(Rb).replace("{2,}","*").getRegex(),text:Dt(Ef.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Iu={normal:gm,gfm:V3,pedantic:U3},ma={normal:_m,gfm:Ef,breaks:J3,pedantic:X3};class Hr{constructor(e){Ht(this,"tokens");Ht(this,"options");Ht(this,"state");Ht(this,"tokenizer");Ht(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Hs,this.options.tokenizer=this.options.tokenizer||new _c,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const n={block:Iu.normal,inline:ma.normal};this.options.pedantic?(n.block=Iu.pedantic,n.inline=ma.pedantic):this.options.gfm&&(n.block=Iu.gfm,this.options.breaks?n.inline=ma.breaks:n.inline=ma.gfm),this.tokenizer.rules=n}static get rules(){return{block:Iu,inline:ma}}static lex(e,n){return new Hr(n).lex(e)}static lexInline(e,n){return new Hr(n).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,`
`),this.blockTokens(e,this.tokens);for(let n=0;n<this.inlineQueue.length;n++){const r=this.inlineQueue[n];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,n=[]){this.options.pedantic?e=e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e=e.replace(/^( *)(\t+)/gm,(a,l,u)=>l+"    ".repeat(u.length));let r,i,s,o;for(;e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>(r=a.call({lexer:this},e,n))?(e=e.substring(r.raw.length),n.push(r),!0):!1))){if(r=this.tokenizer.space(e)){e=e.substring(r.raw.length),r.raw.length===1&&n.length>0?n[n.length-1].raw+=`
`:n.push(r);continue}if(r=this.tokenizer.code(e)){e=e.substring(r.raw.length),i=n[n.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+r.raw,i.text+=`
`+r.text,this.inlineQueue[this.inlineQueue.length-1].src=i.text):n.push(r);continue}if(r=this.tokenizer.fences(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.heading(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.hr(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.blockquote(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.list(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.html(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.def(e)){e=e.substring(r.raw.length),i=n[n.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+r.raw,i.text+=`
`+r.raw,this.inlineQueue[this.inlineQueue.length-1].src=i.text):this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title});continue}if(r=this.tokenizer.table(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.lheading(e)){e=e.substring(r.raw.length),n.push(r);continue}if(s=e,this.options.extensions&&this.options.extensions.startBlock){let a=1/0;const l=e.slice(1);let u;this.options.extensions.startBlock.forEach(d=>{u=d.call({lexer:this},l),typeof u=="number"&&u>=0&&(a=Math.min(a,u))}),a<1/0&&a>=0&&(s=e.substring(0,a+1))}if(this.state.top&&(r=this.tokenizer.paragraph(s))){i=n[n.length-1],o&&i.type==="paragraph"?(i.raw+=`
`+r.raw,i.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):n.push(r),o=s.length!==e.length,e=e.substring(r.raw.length);continue}if(r=this.tokenizer.text(e)){e=e.substring(r.raw.length),i=n[n.length-1],i&&i.type==="text"?(i.raw+=`
`+r.raw,i.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):n.push(r);continue}if(e){const a="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(a);break}else throw new Error(a)}}return this.state.top=!0,n}inline(e,n=[]){return this.inlineQueue.push({src:e,tokens:n}),n}inlineTokens(e,n=[]){let r,i,s,o=e,a,l,u;if(this.tokens.links){const d=Object.keys(this.tokens.links);if(d.length>0)for(;(a=this.tokenizer.rules.inline.reflinkSearch.exec(o))!=null;)d.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(a=this.tokenizer.rules.inline.blockSkip.exec(o))!=null;)o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(a=this.tokenizer.rules.inline.anyPunctuation.exec(o))!=null;)o=o.slice(0,a.index)+"++"+o.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;e;)if(l||(u=""),l=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(d=>(r=d.call({lexer:this},e,n))?(e=e.substring(r.raw.length),n.push(r),!0):!1))){if(r=this.tokenizer.escape(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.tag(e)){e=e.substring(r.raw.length),i=n[n.length-1],i&&r.type==="text"&&i.type==="text"?(i.raw+=r.raw,i.text+=r.text):n.push(r);continue}if(r=this.tokenizer.link(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(r.raw.length),i=n[n.length-1],i&&r.type==="text"&&i.type==="text"?(i.raw+=r.raw,i.text+=r.text):n.push(r);continue}if(r=this.tokenizer.emStrong(e,o,u)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.codespan(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.br(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.del(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.autolink(e)){e=e.substring(r.raw.length),n.push(r);continue}if(!this.state.inLink&&(r=this.tokenizer.url(e))){e=e.substring(r.raw.length),n.push(r);continue}if(s=e,this.options.extensions&&this.options.extensions.startInline){let d=1/0;const m=e.slice(1);let w;this.options.extensions.startInline.forEach(g=>{w=g.call({lexer:this},m),typeof w=="number"&&w>=0&&(d=Math.min(d,w))}),d<1/0&&d>=0&&(s=e.substring(0,d+1))}if(r=this.tokenizer.inlineText(s)){e=e.substring(r.raw.length),r.raw.slice(-1)!=="_"&&(u=r.raw.slice(-1)),l=!0,i=n[n.length-1],i&&i.type==="text"?(i.raw+=r.raw,i.text+=r.text):n.push(r);continue}if(e){const d="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(d);break}else throw new Error(d)}}return n}}class yc{constructor(e){Ht(this,"options");this.options=e||Hs}code(e,n,r){var s;const i=(s=(n||"").match(/^\S*/))==null?void 0:s[0];return e=e.replace(/\n$/,"")+`
`,i?'<pre><code class="language-'+sr(i)+'">'+(r?e:sr(e,!0))+`</code></pre>
`:"<pre><code>"+(r?e:sr(e,!0))+`</code></pre>
`}blockquote(e){return`<blockquote>
${e}</blockquote>
`}html(e,n){return e}heading(e,n,r){return`<h${n}>${e}</h${n}>
`}hr(){return`<hr>
`}list(e,n,r){const i=n?"ol":"ul",s=n&&r!==1?' start="'+r+'"':"";return"<"+i+s+`>
`+e+"</"+i+`>
`}listitem(e,n,r){return`<li>${e}</li>
`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph(e){return`<p>${e}</p>
`}table(e,n){return n&&(n=`<tbody>${n}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+n+`</table>
`}tablerow(e){return`<tr>
${e}</tr>
`}tablecell(e,n){const r=n.header?"th":"td";return(n.align?`<${r} align="${n.align}">`:`<${r}>`)+e+`</${r}>
`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return"<br>"}del(e){return`<del>${e}</del>`}link(e,n,r){const i=tw(e);if(i===null)return r;e=i;let s='<a href="'+e+'"';return n&&(s+=' title="'+n+'"'),s+=">"+r+"</a>",s}image(e,n,r){const i=tw(e);if(i===null)return r;e=i;let s=`<img src="${e}" alt="${r}"`;return n&&(s+=` title="${n}"`),s+=">",s}text(e){return e}}class wm{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,n,r){return""+r}image(e,n,r){return""+r}br(){return""}}class Wr{constructor(e){Ht(this,"options");Ht(this,"renderer");Ht(this,"textRenderer");this.options=e||Hs,this.options.renderer=this.options.renderer||new yc,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new wm}static parse(e,n){return new Wr(n).parse(e)}static parseInline(e,n){return new Wr(n).parseInline(e)}parse(e,n=!0){let r="";for(let i=0;i<e.length;i++){const s=e[i];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]){const o=s,a=this.options.extensions.renderers[o.type].call({parser:this},o);if(a!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(o.type)){r+=a||"";continue}}switch(s.type){case"space":continue;case"hr":{r+=this.renderer.hr();continue}case"heading":{const o=s;r+=this.renderer.heading(this.parseInline(o.tokens),o.depth,T3(this.parseInline(o.tokens,this.textRenderer)));continue}case"code":{const o=s;r+=this.renderer.code(o.text,o.lang,!!o.escaped);continue}case"table":{const o=s;let a="",l="";for(let d=0;d<o.header.length;d++)l+=this.renderer.tablecell(this.parseInline(o.header[d].tokens),{header:!0,align:o.align[d]});a+=this.renderer.tablerow(l);let u="";for(let d=0;d<o.rows.length;d++){const m=o.rows[d];l="";for(let w=0;w<m.length;w++)l+=this.renderer.tablecell(this.parseInline(m[w].tokens),{header:!1,align:o.align[w]});u+=this.renderer.tablerow(l)}r+=this.renderer.table(a,u);continue}case"blockquote":{const o=s,a=this.parse(o.tokens);r+=this.renderer.blockquote(a);continue}case"list":{const o=s,a=o.ordered,l=o.start,u=o.loose;let d="";for(let m=0;m<o.items.length;m++){const w=o.items[m],g=w.checked,E=w.task;let b="";if(w.task){const A=this.renderer.checkbox(!!g);u?w.tokens.length>0&&w.tokens[0].type==="paragraph"?(w.tokens[0].text=A+" "+w.tokens[0].text,w.tokens[0].tokens&&w.tokens[0].tokens.length>0&&w.tokens[0].tokens[0].type==="text"&&(w.tokens[0].tokens[0].text=A+" "+w.tokens[0].tokens[0].text)):w.tokens.unshift({type:"text",text:A+" "}):b+=A+" "}b+=this.parse(w.tokens,u),d+=this.renderer.listitem(b,E,!!g)}r+=this.renderer.list(d,a,l);continue}case"html":{const o=s;r+=this.renderer.html(o.text,o.block);continue}case"paragraph":{const o=s;r+=this.renderer.paragraph(this.parseInline(o.tokens));continue}case"text":{let o=s,a=o.tokens?this.parseInline(o.tokens):o.text;for(;i+1<e.length&&e[i+1].type==="text";)o=e[++i],a+=`
`+(o.tokens?this.parseInline(o.tokens):o.text);r+=n?this.renderer.paragraph(a):a;continue}default:{const o='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return r}parseInline(e,n){n=n||this.renderer;let r="";for(let i=0;i<e.length;i++){const s=e[i];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]){const o=this.options.extensions.renderers[s.type].call({parser:this},s);if(o!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type)){r+=o||"";continue}}switch(s.type){case"escape":{const o=s;r+=n.text(o.text);break}case"html":{const o=s;r+=n.html(o.text);break}case"link":{const o=s;r+=n.link(o.href,o.title,this.parseInline(o.tokens,n));break}case"image":{const o=s;r+=n.image(o.href,o.title,o.text);break}case"strong":{const o=s;r+=n.strong(this.parseInline(o.tokens,n));break}case"em":{const o=s;r+=n.em(this.parseInline(o.tokens,n));break}case"codespan":{const o=s;r+=n.codespan(o.text);break}case"br":{r+=n.br();break}case"del":{const o=s;r+=n.del(this.parseInline(o.tokens,n));break}case"text":{const o=s;r+=n.text(o.text);break}default:{const o='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return r}}class Na{constructor(e){Ht(this,"options");this.options=e||Hs}preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}}Ht(Na,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));var ll,Tf,vc,Ob;class e5{constructor(...e){$h(this,ll);$h(this,vc);Ht(this,"defaults",dm());Ht(this,"options",this.setOptions);Ht(this,"parse",nu(this,ll,Tf).call(this,Hr.lex,Wr.parse));Ht(this,"parseInline",nu(this,ll,Tf).call(this,Hr.lexInline,Wr.parseInline));Ht(this,"Parser",Wr);Ht(this,"Renderer",yc);Ht(this,"TextRenderer",wm);Ht(this,"Lexer",Hr);Ht(this,"Tokenizer",_c);Ht(this,"Hooks",Na);this.use(...e)}walkTokens(e,n){var i,s;let r=[];for(const o of e)switch(r=r.concat(n.call(this,o)),o.type){case"table":{const a=o;for(const l of a.header)r=r.concat(this.walkTokens(l.tokens,n));for(const l of a.rows)for(const u of l)r=r.concat(this.walkTokens(u.tokens,n));break}case"list":{const a=o;r=r.concat(this.walkTokens(a.items,n));break}default:{const a=o;(s=(i=this.defaults.extensions)==null?void 0:i.childTokens)!=null&&s[a.type]?this.defaults.extensions.childTokens[a.type].forEach(l=>{const u=a[l].flat(1/0);r=r.concat(this.walkTokens(u,n))}):a.tokens&&(r=r.concat(this.walkTokens(a.tokens,n)))}}return r}use(...e){const n=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(r=>{const i={...r};if(i.async=this.defaults.async||i.async||!1,r.extensions&&(r.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if("renderer"in s){const o=n.renderers[s.name];o?n.renderers[s.name]=function(...a){let l=s.renderer.apply(this,a);return l===!1&&(l=o.apply(this,a)),l}:n.renderers[s.name]=s.renderer}if("tokenizer"in s){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const o=n[s.level];o?o.unshift(s.tokenizer):n[s.level]=[s.tokenizer],s.start&&(s.level==="block"?n.startBlock?n.startBlock.push(s.start):n.startBlock=[s.start]:s.level==="inline"&&(n.startInline?n.startInline.push(s.start):n.startInline=[s.start]))}"childTokens"in s&&s.childTokens&&(n.childTokens[s.name]=s.childTokens)}),i.extensions=n),r.renderer){const s=this.defaults.renderer||new yc(this.defaults);for(const o in r.renderer){if(!(o in s))throw new Error(`renderer '${o}' does not exist`);if(o==="options")continue;const a=o,l=r.renderer[a],u=s[a];s[a]=(...d)=>{let m=l.apply(s,d);return m===!1&&(m=u.apply(s,d)),m||""}}i.renderer=s}if(r.tokenizer){const s=this.defaults.tokenizer||new _c(this.defaults);for(const o in r.tokenizer){if(!(o in s))throw new Error(`tokenizer '${o}' does not exist`);if(["options","rules","lexer"].includes(o))continue;const a=o,l=r.tokenizer[a],u=s[a];s[a]=(...d)=>{let m=l.apply(s,d);return m===!1&&(m=u.apply(s,d)),m}}i.tokenizer=s}if(r.hooks){const s=this.defaults.hooks||new Na;for(const o in r.hooks){if(!(o in s))throw new Error(`hook '${o}' does not exist`);if(o==="options")continue;const a=o,l=r.hooks[a],u=s[a];Na.passThroughHooks.has(o)?s[a]=d=>{if(this.defaults.async)return Promise.resolve(l.call(s,d)).then(w=>u.call(s,w));const m=l.call(s,d);return u.call(s,m)}:s[a]=(...d)=>{let m=l.apply(s,d);return m===!1&&(m=u.apply(s,d)),m}}i.hooks=s}if(r.walkTokens){const s=this.defaults.walkTokens,o=r.walkTokens;i.walkTokens=function(a){let l=[];return l.push(o.call(this,a)),s&&(l=l.concat(s.call(this,a))),l}}this.defaults={...this.defaults,...i}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,n){return Hr.lex(e,n??this.defaults)}parser(e,n){return Wr.parse(e,n??this.defaults)}}ll=new WeakSet,Tf=function(e,n){return(r,i)=>{const s={...i},o={...this.defaults,...s};this.defaults.async===!0&&s.async===!1&&(o.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),o.async=!0);const a=nu(this,vc,Ob).call(this,!!o.silent,!!o.async);if(typeof r>"u"||r===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof r!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(r)+", string expected"));if(o.hooks&&(o.hooks.options=o),o.async)return Promise.resolve(o.hooks?o.hooks.preprocess(r):r).then(l=>e(l,o)).then(l=>o.hooks?o.hooks.processAllTokens(l):l).then(l=>o.walkTokens?Promise.all(this.walkTokens(l,o.walkTokens)).then(()=>l):l).then(l=>n(l,o)).then(l=>o.hooks?o.hooks.postprocess(l):l).catch(a);try{o.hooks&&(r=o.hooks.preprocess(r));let l=e(r,o);o.hooks&&(l=o.hooks.processAllTokens(l)),o.walkTokens&&this.walkTokens(l,o.walkTokens);let u=n(l,o);return o.hooks&&(u=o.hooks.postprocess(u)),u}catch(l){return a(l)}}},vc=new WeakSet,Ob=function(e,n){return r=>{if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,e){const i="<p>An error occurred:</p><pre>"+sr(r.message+"",!0)+"</pre>";return n?Promise.resolve(i):i}if(n)return Promise.reject(r);throw r}};const $s=new e5;function xt(t,e){return $s.parse(t,e)}xt.options=xt.setOptions=function(t){return $s.setOptions(t),xt.defaults=$s.defaults,Eb(xt.defaults),xt};xt.getDefaults=dm;xt.defaults=Hs;xt.use=function(...t){return $s.use(...t),xt.defaults=$s.defaults,Eb(xt.defaults),xt};xt.walkTokens=function(t,e){return $s.walkTokens(t,e)};xt.parseInline=$s.parseInline;xt.Parser=Wr;xt.parser=Wr.parse;xt.Renderer=yc;xt.TextRenderer=wm;xt.Lexer=Hr;xt.lexer=Hr.lex;xt.Tokenizer=_c;xt.Hooks=Na;xt.parse=xt;xt.options;xt.setOptions;xt.use;xt.walkTokens;xt.parseInline;Wr.parse;Hr.lex;const t5={key:0,class:"fixed bottom-0 left-0 right-0 top-0 z-50 rounded-lg bg-gradient-to-t from-pink-700 to-purple-800 p-10 text-center shadow-xl shadow-black"},n5={class:"max-h-[80vh] overflow-auto"},r5=["innerHTML"],i5={key:0},s5=N("hr",{class:"mx-3 rounded-full border-2 border-white"},null,-1),o5=["innerHTML"],a5=N("br",null,null,-1),l5={key:1},u5=N("hr",{class:"mx-3 rounded-full border-2 border-white"},null,-1),c5={class:"absolute bottom-0 left-1/2 w-full -translate-x-1/2 text-5xl"},h5={key:0},d5={key:1},f5={key:0,class:"flex"},p5={key:1},m5={__name:"LargeReview",props:["auth","db","timeDuration","timeMultiplier"],emits:["reselectDeck"],setup(t,{expose:e,emit:n}){const r=t;Ct("space","large_review",function(Q,z){Q.preventDefault(),w()}),Ct("space","large_yes_no",function(Q,z){Q.preventDefault(),E(!0)}),Ct("c","large_yes_no",function(Q,z){Q.preventDefault(),E(!1)}),Ct("space","large_check_type_ans",function(Q,z){Q.preventDefault(),g()}),Ct("enter","large_check_type_ans",function(Q,z){Q.preventDefault(),g()});const i=we(!1),s=we(""),o=we([]),a=we(0),l=we(!1),u=we(""),d=we(null);function m(Q,z){z.forEach(Z=>{(Z.front.split(`
`)[0]==="[markdown]"||Z.front.split(`
`)[0]==="[md]")&&(Z.front=Z.front.split(`
`).slice(1).join(`
`),Z.front=Cd.sanitize(xt.parse(Z.front))),(Z.back.split(`
`)[0]==="[markdown]"||Z.back.split(`
`)[0]==="[md]")&&(Z.back=Z.back.split(`
`).slice(1).join(`
`),Z.back=xt.parse(Z.back)),Z.front=Cd.sanitize(Z.front),Z.back=Cd.sanitize(Z.back)}),s.value=Q,o.value=z,a.value=T(0,o.value.length),i.value=!0,Ct.setScope("large_review"),document.body.style.overflow="hidden",o.value[a.value].type_answer&&A()}function w(){l.value=!0,Ct.setScope("large_yes_no")}function g(){const Q=o.value[a.value].back.replace(/\[.*?\]/gs,"");u.value===Q?(E(!0),u.value=""):(E(!1),u.value="")}function E(Q){const z=new Date,Z=new Date(z.getFullYear(),z.getMonth(),z.getDate());if(Q===!0)if(o.value[a.value].streak===0)o.value[a.value].streak=.5,O(!0);else if(o.value[a.value].streak===.5){let ee=new Date(Z);ee.setDate(ee.getDate()+1),Zt(_t(r.db,`users/${r.auth.currentUser.uid}/decks/${s.value}/cards/${o.value[a.value].id}`),{next_review:et.fromDate(ee),streak:1}),R()}else{const ee=Math.pow(r.timeMultiplier,o.value[a.value].streak)*r.timeDuration,oe=Math.floor(ee/24);let me=new Date(Z);me.setDate(me.getDate()+oe),Zt(_t(r.db,`users/${r.auth.currentUser.uid}/decks/${s.value}/cards/${o.value[a.value].id}`),{next_review:et.fromDate(me),streak:o.value[a.value].streak+1}),R()}else o.value[a.value].streak!==0&&o.value[a.value].streak!==.5&&Zt(_t(r.db,`users/${r.auth.currentUser.uid}/decks/${s.value}/cards/${o.value[a.value].id}`),{next_review:et.fromDate(new Date),streak:0}),o.value[a.value].streak=0,O(!0);o.value.length>0&&o.value[a.value].type_answer&&A()}function b(){l.value=!0,Ct.setScope("large_check_type_ans")}async function A(){await Ss(),d.value.focus()}function T(Q,z){return Math.floor(Math.random()*(z-Q))+Q}function x(){i.value=!1,l.value=!1,document.body.style.overflow="auto",Ct.setScope("all"),n("reselectDeck")}function R(){o.value.splice(a.value,1),o.value.length!==0?O(!1):(x(),Ye.fire({title:"You've finished all reviews for today.",text:"Come back tomorrow for more.",color:"black",icon:"success"}))}function O(Q){if(Q)if(o.value.length!==1){let z=T(0,o.value.length);for(;z===a.value;)z=T(0,o.value.length);a.value=z}else a.value=0;else a.value=T(0,o.value.length);l.value=!1,Ct.setScope("large_review")}function H(){d.value.style.height="auto",d.value.style.height=d.value.scrollHeight+"px"}return e({reviewCards:m}),(Q,z)=>i.value?(Ce(),Me("div",t5,[N("button",{onClick:z[0]||(z[0]=Z=>x()),class:"fixed left-5 top-5 rounded bg-gray-700 p-3 text-white"}," Cancel "),N("div",n5,[N("div",{innerHTML:o.value[a.value].front,class:"prose mx-8 my-4 inline-block whitespace-pre-wrap text-2xl text-white prose-headings:text-inherit prose-a:text-blue-500 prose-blockquote:text-inherit prose-strong:text-inherit prose-code:text-inherit prose-li:marker:text-inherit prose-img:m-auto prose-img:block prose-video:m-auto prose-video:block"},null,8,r5),l.value===!0?(Ce(),Me("div",i5,[s5,N("div",{innerHTML:o.value[a.value].back,class:"prose mx-8 my-4 inline-block whitespace-pre-wrap text-2xl text-white prose-headings:text-inherit prose-a:text-blue-500 prose-blockquote:text-inherit prose-strong:text-inherit prose-code:text-inherit prose-li:marker:text-inherit prose-img:m-auto prose-img:block prose-video:m-auto prose-video:block"},null,8,o5),a5])):St("",!0),o.value[a.value].type_answer===!0&&l.value===!1?(Ce(),Me("div",l5,[u5,nt(N("textarea",{ref_key:"answer_field_ref",ref:d,"onUpdate:modelValue":z[1]||(z[1]=Z=>u.value=Z),onInput:z[2]||(z[2]=Z=>H()),placeholder:"Type Answer",class:"my-4 min-h-[125px] w-full resize-none rounded-md bg-gradient-to-r from-purple-500 to-pink-500 p-3 text-center text-2xl text-white placeholder-black shadow shadow-black"},null,544),[[Ft,u.value]])])):St("",!0)]),N("div",c5,[l.value?(Ce(),Me("div",d5,[o.value[a.value].type_answer?(Ce(),Me("div",p5,[N("button",{onClick:z[7]||(z[7]=Z=>g()),class:"w-full bg-gray-300 p-3"}," Next ")])):(Ce(),Me("div",f5,[N("button",{onClick:z[5]||(z[5]=Z=>E(!1)),class:"w-full flex-1 bg-red-400 p-3"}," Wrong "),N("button",{onClick:z[6]||(z[6]=Z=>E(!0)),class:"w-full flex-1 bg-green-400 p-3"}," Correct ")]))])):(Ce(),Me("div",h5,[o.value[a.value].type_answer?(Ce(),Me("button",{key:1,onClick:z[4]||(z[4]=Z=>b()),class:"w-full bg-gray-400 p-3"}," Check ")):(Ce(),Me("button",{key:0,onClick:z[3]||(z[3]=Z=>w()),class:"w-full bg-gray-400 p-3"}," Show Back "))]))])])):St("",!0)}},g5={class:"fixed bottom-0 left-0 right-0 top-0 z-50 bg-gray-600 bg-opacity-50"},_5={class:"fixed left-1/2 top-1/2 max-h-screen w-[500px] max-w-[80vw] -translate-x-1/2 -translate-y-1/2 overflow-auto rounded-md bg-orange-300 px-3 py-10 text-center text-xl shadow-lg shadow-black"},w5={class:"text-3xl"},y5=Qw('<div class="mt-5"><p class="text-2xl">Summary</p><p> This update introduces two significant features: Large Cards and Anki Import. Large Cards offer users increased customization options with support for HTML and Markdown formats, enabling seamless integration of multimedia elements. With the addition of Anki Import functionality, users can effortlessly incorporate premade decks into their study routines, enhancing versatility and accessibility. </p></div><div class="mt-5"><p class="text-2xl">Changelog</p><ul class="ml-5 list-disc"><li><strong>Anki Import Added:</strong> Implemented Anki Import feature for seamless deck integration. Find premade decks at <a href="https://ankiweb.net/shared/decks">AnkiWeb</a>. </li><li><strong>Large Cards Added:</strong> Introduced Large Cards supporting HTML and Markdown formats for enhanced customization and multimedia integration. </li><li><strong>Deck Card Editor Update:</strong> Enhanced search functionality by querying firestore instead of local storage and introduced pagination. </li><li><strong>Alerts Switched:</strong> Replaced regular alerts with sweetalert2 library. </li><li><strong>Improved Settings:</strong> Refined the settings interface and relocated the DeckMigration button. </li><li><strong>Fixed Background Scrolling:</strong> Prevented background scrolling when a menu is open. </li><li><strong>Review Issues Fix:</strong> Addressed various review-related issues. </li><li><strong>Total Cards Display:</strong> Added total cards text feature. </li></ul></div>',2),v5={__name:"Changelog",props:["appVersion"],emits:["close"],setup(t,{emit:e}){return(n,r)=>(Ce(),Me("div",g5,[N("div",_5,[N("button",{onClick:r[0]||(r[0]=i=>n.$emit("close")),class:"mb-5 rounded-md bg-gray-500 p-2 shadow shadow-black"}," Close "),N("p",w5,"Update "+At(t.appVersion),1),y5])]))}},b5={key:0,class:"absolute left-5 top-5"},k5={key:1,class:"fixed bottom-0 left-0 right-0 top-0 z-50 bg-gray-600 bg-opacity-50"},E5={class:"fixed left-1/2 top-1/2 inline-block -translate-x-1/2 -translate-y-1/2 rounded-md bg-yellow-300 p-3 text-center shadow-lg shadow-black"},T5=N("p",{class:"text-lg"},"Deck Migration Tool",-1),I5=N("p",null," This tool adds a required new_card field to all new cards in your deck. ",-1),A5=N("option",{selected:"",disabled:"",value:""},"Select Deck",-1),x5=["value"],C5=N("br",null,null,-1),S5={key:0,class:"mt-3 rounded bg-amber-400 p-3"},R5={__name:"DeckMigration",props:["auth","db"],emits:["loadDecks"],setup(t,{expose:e,emit:n}){const r=t,i=we(!1),s=we([]),o=we(null),a=we("");async function l(){s.value=[],(await zr(Mt(r.db,`users/${r.auth.currentUser.uid}/decks`))).forEach(w=>{s.value.push({name:w.data().name,id:w.id})}),i.value=!0,document.body.style.overflow="hidden"}function u(){i.value=!1,document.body.style.overflow="auto"}async function d(){console.log(o.value),a.value="Getting Old Deck";const m=await Fs(_t(r.db,`users/${r.auth.currentUser.uid}/decks/${o.value}`));a.value="Creating New Deck";const w=await Xr(Mt(r.db,`users/${r.auth.currentUser.uid}/decks`),{name:m.data().name+"(new)",new_cards_today:m.data().new_cards_today,last_update:m.data().last_update,index:m.data().index,new_cards_per_day:m.data().new_cards_per_day,large_cards:m.data().large_cards}).catch(b=>{Ye.fire({title:b,color:"black",icon:"error"})});a.value="Getting Old Cards";const g=await zr(Mt(r.db,`users/${r.auth.currentUser.uid}/decks/${o.value}/cards`)),E=g.size;g.forEach(async(b,A)=>{a.value="Creating New Cards"+A+"/"+E,await Xr(Mt(r.db,`users/${r.auth.currentUser.uid}/decks/${w.id}/cards/`),{front:b.data().front,back:b.data().back,streak:b.data().streak,next_review:b.data().next_review,type_answer:!!b.data().type_answer,new_card:b.data().streak===-1}).catch(T=>{Ye.fire({title:T,color:"black",icon:"error"})})}),a.value="Done",n("loadDecks")}return e({openMigrate:l}),(m,w)=>(Ce(),Me(hn,null,[t.auth!==null&&t.auth.currentUser!==null?(Ce(),Me("div",b5)):St("",!0),i.value?(Ce(),Me("div",k5,[N("div",E5,[N("button",{onClick:w[0]||(w[0]=g=>u()),class:"rounded bg-red-400 p-3"}," Close "),T5,I5,nt(N("select",{"onUpdate:modelValue":w[1]||(w[1]=g=>o.value=g),class:"mt-3 rounded bg-orange-300 p-3"},[A5,(Ce(!0),Me(hn,null,Vi(s.value,g=>(Ce(),Me("option",{value:g.id},At(g.name),9,x5))),256))],512),[[po,o.value]]),C5,N("div",null,[o.value?(Ce(),Me("button",{key:0,onClick:w[2]||(w[2]=g=>d()),class:"mt-3 rounded bg-blue-500 p-3"}," Migrate ")):St("",!0)]),a.value!==""?(Ce(),Me("div",S5,[N("p",null,At(a.value),1)])):St("",!0)])])):St("",!0)],64))}},P5={class:"mb-5 mt-8"},D5=N("br",null,null,-1),O5={__name:"App",setup(t){const e=we(null);let n=!1;const r=we(null),i=we(null),s=we(null),o=we(null),a=we(null),l=we(null),u=we(null),d=we(!1),m=we(!1),w=we(1.5),g=we(24),E=we("0.7.0");Vw(()=>{const x=ex();$2(x,async()=>{n||(n=!0,e.value=x,await Ss(),e.value.currentUser!==null&&(o.value.loadDecks(),T()))})});async function b(){const x=await Fs(_t(ai,`users/${e.value.currentUser.uid}`));w.value=x.data().time_multiplier,g.value=x.data().time_duration}function A(){m.value=!1,e.value.currentUser!==null&&Zt(_t(ai,`users/${e.value.currentUser.uid}`),{seen_changelog_version:E.value})}function T(){e.value.currentUser!==null&&Fs(_t(ai,`users/${e.value.currentUser.uid}`)).then(x=>{x.data().seen_changelog_version!==E.value&&(m.value=!0)})}return(x,R)=>(Ce(),Me(hn,null,[N("div",P5,[bn(zP,{auth:e.value,onOpenSettings:R[0]||(R[0]=O=>s.value.openSettings()),onOpenSignIn:R[1]||(R[1]=O=>r.value.openMenu()),onOpenSignUp:R[2]||(R[2]=O=>i.value.openMenu()),onSignOut:R[3]||(R[3]=O=>o.value.logout())},null,8,["auth"]),D5,bn(TN,{auth:e.value,db:fs(ai),onLoadSettings:R[4]||(R[4]=O=>b()),onReview:R[5]||(R[5]=(O,H)=>a.value.reviewCards(O,H)),onLargeReview:R[6]||(R[6]=(O,H)=>l.value.reviewCards(O,H)),ref_key:"decks_ref",ref:o},null,8,["auth","db"])]),bn(AP,{auth:e.value,onLoadDecks:R[7]||(R[7]=O=>{o.value.loadDecks(),T()}),ref_key:"sign_in_menu_ref",ref:r},null,8,["auth"]),bn(LP,{auth:e.value,db:fs(ai),onLoadDecks:R[8]||(R[8]=O=>{o.value.loadDecks(),T()}),ref_key:"sign_up_menu_ref",ref:i},null,8,["auth","db"]),bn(e3,{auth:e.value,db:fs(ai),"time-duration":g.value,"time-multiplier":w.value,onReselectDeck:R[9]||(R[9]=O=>o.value.reselectDeck()),ref_key:"review_ref",ref:a},null,8,["auth","db","time-duration","time-multiplier"]),bn(m5,{auth:e.value,db:fs(ai),"time-duration":g.value,"time-multiplier":w.value,onReselectDeck:R[10]||(R[10]=O=>o.value.reselectDeck()),ref_key:"large_review_ref",ref:l},null,8,["auth","db","time-duration","time-multiplier"]),bn(nD,{auth:e.value,db:fs(ai),onSaveSettings:R[11]||(R[11]=O=>b()),onOpenMigrate:R[12]||(R[12]=O=>u.value.openMigrate()),ref_key:"settings_ref",ref:s},null,8,["auth","db"]),N("div",null,[N("button",{onClick:R[13]||(R[13]=O=>d.value=!0),class:"absolute right-5 top-5 rounded-md bg-gray-500 p-2 shadow shadow-black"}," Guide "),d.value?(Ce(),$r(mP,{key:0,"app-version":E.value,onClose:R[14]||(R[14]=O=>d.value=!1),onShowChangelog:R[15]||(R[15]=O=>m.value=!0)},null,8,["app-version"])):St("",!0)]),m.value?(Ce(),$r(v5,{key:0,"app-version":E.value,onClose:R[16]||(R[16]=O=>A())},null,8,["app-version"])):St("",!0),bn(R5,{auth:e.value,db:fs(ai),onLoadDecks:R[17]||(R[17]=O=>o.value.loadDecks()),ref_key:"deck_migrate_ref",ref:u},null,8,["auth","db"])],64))}};var N5="firebase",M5="10.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ji(N5,M5,"app");const L5={apiKey:"AIzaSyAGYqERiL1fj0l2m1ZmlkHFd5Vq8OiMubw",authDomain:"spare-a6401.firebaseapp.com",projectId:"spare-a6401",storageBucket:"spare-a6401.appspot.com",messagingSenderId:"277807224978",appId:"1:277807224978:web:6420ae19b4ca94e41c6e4b"},V5=ay(L5),ai=HR(V5);aT(O5).mount("#app");
