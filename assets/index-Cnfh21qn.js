var Kb=Object.defineProperty;var Vp=n=>{throw TypeError(n)};var Qb=(n,e,t)=>e in n?Kb(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var fn=(n,e,t)=>Qb(n,typeof e!="symbol"?e+"":e,t),Yb=(n,e,t)=>e.has(n)||Vp("Cannot "+t);var Up=(n,e,t)=>e.has(n)?Vp("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t);var Zl=(n,e,t)=>(Yb(n,e,"access private method"),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Mh(n){const e=Object.create(null);for(const t of n.split(","))e[t]=1;return t=>t in e}const en={},aa=[],Ri=()=>{},Xb=()=>!1,Tc=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&(n.charCodeAt(2)>122||n.charCodeAt(2)<97),Vh=n=>n.startsWith("onUpdate:"),gr=Object.assign,Uh=(n,e)=>{const t=n.indexOf(e);t>-1&&n.splice(t,1)},Zb=Object.prototype.hasOwnProperty,$t=(n,e)=>Zb.call(n,e),nt=Array.isArray,la=n=>Rl(n)==="[object Map]",xa=n=>Rl(n)==="[object Set]",Fp=n=>Rl(n)==="[object Date]",ft=n=>typeof n=="function",Sn=n=>typeof n=="string",Fi=n=>typeof n=="symbol",pn=n=>n!==null&&typeof n=="object",x_=n=>(pn(n)||ft(n))&&ft(n.then)&&ft(n.catch),C_=Object.prototype.toString,Rl=n=>C_.call(n),Jb=n=>Rl(n).slice(8,-1),S_=n=>Rl(n)==="[object Object]",Fh=n=>Sn(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,Ja=Mh(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ic=n=>{const e=Object.create(null);return t=>e[t]||(e[t]=n(t))},e1=/-(\w)/g,Us=Ic(n=>n.replace(e1,(e,t)=>t?t.toUpperCase():"")),t1=/\B([A-Z])/g,Oo=Ic(n=>n.replace(t1,"-$1").toLowerCase()),R_=Ic(n=>n.charAt(0).toUpperCase()+n.slice(1)),ud=Ic(n=>n?`on${R_(n)}`:""),Os=(n,e)=>!Object.is(n,e),yu=(n,...e)=>{for(let t=0;t<n.length;t++)n[t](...e)},P_=(n,e,t,r=!1)=>{Object.defineProperty(n,e,{configurable:!0,enumerable:!1,writable:r,value:t})},Wu=n=>{const e=parseFloat(n);return isNaN(e)?n:e};let $p;const Ac=()=>$p||($p=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function yo(n){if(nt(n)){const e={};for(let t=0;t<n.length;t++){const r=n[t],i=Sn(r)?s1(r):yo(r);if(i)for(const s in i)e[s]=i[s]}return e}else if(Sn(n)||pn(n))return n}const n1=/;(?![^(]*\))/g,r1=/:([^]+)/,i1=/\/\*[^]*?\*\//g;function s1(n){const e={};return n.replace(i1,"").split(n1).forEach(t=>{if(t){const r=t.split(r1);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function $h(n){let e="";if(Sn(n))e=n;else if(nt(n))for(let t=0;t<n.length;t++){const r=$h(n[t]);r&&(e+=r+" ")}else if(pn(n))for(const t in n)n[t]&&(e+=t+" ");return e.trim()}const o1="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",a1=Mh(o1);function D_(n){return!!n||n===""}function l1(n,e){if(n.length!==e.length)return!1;let t=!0;for(let r=0;t&&r<n.length;r++)t=Pl(n[r],e[r]);return t}function Pl(n,e){if(n===e)return!0;let t=Fp(n),r=Fp(e);if(t||r)return t&&r?n.getTime()===e.getTime():!1;if(t=Fi(n),r=Fi(e),t||r)return n===e;if(t=nt(n),r=nt(e),t||r)return t&&r?l1(n,e):!1;if(t=pn(n),r=pn(e),t||r){if(!t||!r)return!1;const i=Object.keys(n).length,s=Object.keys(e).length;if(i!==s)return!1;for(const o in n){const a=n.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!Pl(n[o],e[o]))return!1}}return String(n)===String(e)}function Bh(n,e){return n.findIndex(t=>Pl(t,e))}const O_=n=>!!(n&&n.__v_isRef===!0),It=n=>Sn(n)?n:n==null?"":nt(n)||pn(n)&&(n.toString===C_||!ft(n.toString))?O_(n)?It(n.value):JSON.stringify(n,N_,2):String(n),N_=(n,e)=>O_(e)?N_(n,e.value):la(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[r,i],s)=>(t[cd(r,s)+" =>"]=i,t),{})}:xa(e)?{[`Set(${e.size})`]:[...e.values()].map(t=>cd(t))}:Fi(e)?cd(e):pn(e)&&!nt(e)&&!S_(e)?String(e):e,cd=(n,e="")=>{var t;return Fi(n)?`Symbol(${(t=n.description)!=null?t:e})`:n};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Pr;class u1{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Pr,!e&&Pr&&(this.index=(Pr.scopes||(Pr.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=Pr;try{return Pr=this,e()}finally{Pr=t}}}on(){Pr=this}off(){Pr=this.parent}stop(e){if(this._active){this._active=!1;let t,r;for(t=0,r=this.effects.length;t<r;t++)this.effects[t].stop();for(this.effects.length=0,t=0,r=this.cleanups.length;t<r;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,r=this.scopes.length;t<r;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function c1(){return Pr}let ln;const dd=new WeakSet;class L_{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Pr&&Pr.active&&Pr.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,dd.has(this)&&(dd.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||V_(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Bp(this),U_(this);const e=ln,t=ui;ln=this,ui=!0;try{return this.fn()}finally{F_(this),ln=e,ui=t,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)qh(e);this.deps=this.depsTail=void 0,Bp(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?dd.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Gd(this)&&this.run()}get dirty(){return Gd(this)}}let M_=0,el,tl;function V_(n,e=!1){if(n.flags|=8,e){n.next=tl,tl=n;return}n.next=el,el=n}function zh(){M_++}function jh(){if(--M_>0)return;if(tl){let e=tl;for(tl=void 0;e;){const t=e.next;e.next=void 0,e.flags&=-9,e=t}}let n;for(;el;){let e=el;for(el=void 0;e;){const t=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){n||(n=r)}e=t}}if(n)throw n}function U_(n){for(let e=n.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function F_(n){let e,t=n.depsTail,r=t;for(;r;){const i=r.prevDep;r.version===-1?(r===t&&(t=i),qh(r),d1(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=i}n.deps=e,n.depsTail=t}function Gd(n){for(let e=n.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&($_(e.dep.computed)||e.dep.version!==e.version))return!0;return!!n._dirty}function $_(n){if(n.flags&4&&!(n.flags&16)||(n.flags&=-17,n.globalVersion===fl))return;n.globalVersion=fl;const e=n.dep;if(n.flags|=2,e.version>0&&!n.isSSR&&n.deps&&!Gd(n)){n.flags&=-3;return}const t=ln,r=ui;ln=n,ui=!0;try{U_(n);const i=n.fn(n._value);(e.version===0||Os(i,n._value))&&(n._value=i,e.version++)}catch(i){throw e.version++,i}finally{ln=t,ui=r,F_(n),n.flags&=-3}}function qh(n,e=!1){const{dep:t,prevSub:r,nextSub:i}=n;if(r&&(r.nextSub=i,n.prevSub=void 0),i&&(i.prevSub=r,n.nextSub=void 0),t.subs===n&&(t.subs=r,!r&&t.computed)){t.computed.flags&=-5;for(let s=t.computed.deps;s;s=s.nextDep)qh(s,!0)}!e&&!--t.sc&&t.map&&t.map.delete(t.key)}function d1(n){const{prevDep:e,nextDep:t}=n;e&&(e.nextDep=t,n.prevDep=void 0),t&&(t.prevDep=e,n.nextDep=void 0)}let ui=!0;const B_=[];function Gs(){B_.push(ui),ui=!1}function Ks(){const n=B_.pop();ui=n===void 0?!0:n}function Bp(n){const{cleanup:e}=n;if(n.cleanup=void 0,e){const t=ln;ln=void 0;try{e()}finally{ln=t}}}let fl=0;class h1{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Hh{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!ln||!ui||ln===this.computed)return;let t=this.activeLink;if(t===void 0||t.sub!==ln)t=this.activeLink=new h1(ln,this),ln.deps?(t.prevDep=ln.depsTail,ln.depsTail.nextDep=t,ln.depsTail=t):ln.deps=ln.depsTail=t,z_(t);else if(t.version===-1&&(t.version=this.version,t.nextDep)){const r=t.nextDep;r.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=r),t.prevDep=ln.depsTail,t.nextDep=void 0,ln.depsTail.nextDep=t,ln.depsTail=t,ln.deps===t&&(ln.deps=r)}return t}trigger(e){this.version++,fl++,this.notify(e)}notify(e){zh();try{for(let t=this.subs;t;t=t.prevSub)t.sub.notify()&&t.sub.dep.notify()}finally{jh()}}}function z_(n){if(n.dep.sc++,n.sub.flags&4){const e=n.dep.computed;if(e&&!n.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)z_(r)}const t=n.dep.subs;t!==n&&(n.prevSub=t,t&&(t.nextSub=n)),n.dep.subs=n}}const Kd=new WeakMap,_o=Symbol(""),Qd=Symbol(""),pl=Symbol("");function Xn(n,e,t){if(ui&&ln){let r=Kd.get(n);r||Kd.set(n,r=new Map);let i=r.get(t);i||(r.set(t,i=new Hh),i.map=r,i.key=t),i.track()}}function Zi(n,e,t,r,i,s){const o=Kd.get(n);if(!o){fl++;return}const a=l=>{l&&l.trigger()};if(zh(),e==="clear")o.forEach(a);else{const l=nt(n),c=l&&Fh(t);if(l&&t==="length"){const h=Number(r);o.forEach((p,m)=>{(m==="length"||m===pl||!Fi(m)&&m>=h)&&a(p)})}else switch((t!==void 0||o.has(void 0))&&a(o.get(t)),c&&a(o.get(pl)),e){case"add":l?c&&a(o.get("length")):(a(o.get(_o)),la(n)&&a(o.get(Qd)));break;case"delete":l||(a(o.get(_o)),la(n)&&a(o.get(Qd)));break;case"set":la(n)&&a(o.get(_o));break}}jh()}function ta(n){const e=Ft(n);return e===n?e:(Xn(e,"iterate",pl),Wr(n)?e:e.map(Zn))}function xc(n){return Xn(n=Ft(n),"iterate",pl),n}const f1={__proto__:null,[Symbol.iterator](){return hd(this,Symbol.iterator,Zn)},concat(...n){return ta(this).concat(...n.map(e=>nt(e)?ta(e):e))},entries(){return hd(this,"entries",n=>(n[1]=Zn(n[1]),n))},every(n,e){return Ki(this,"every",n,e,void 0,arguments)},filter(n,e){return Ki(this,"filter",n,e,t=>t.map(Zn),arguments)},find(n,e){return Ki(this,"find",n,e,Zn,arguments)},findIndex(n,e){return Ki(this,"findIndex",n,e,void 0,arguments)},findLast(n,e){return Ki(this,"findLast",n,e,Zn,arguments)},findLastIndex(n,e){return Ki(this,"findLastIndex",n,e,void 0,arguments)},forEach(n,e){return Ki(this,"forEach",n,e,void 0,arguments)},includes(...n){return fd(this,"includes",n)},indexOf(...n){return fd(this,"indexOf",n)},join(n){return ta(this).join(n)},lastIndexOf(...n){return fd(this,"lastIndexOf",n)},map(n,e){return Ki(this,"map",n,e,void 0,arguments)},pop(){return Va(this,"pop")},push(...n){return Va(this,"push",n)},reduce(n,...e){return zp(this,"reduce",n,e)},reduceRight(n,...e){return zp(this,"reduceRight",n,e)},shift(){return Va(this,"shift")},some(n,e){return Ki(this,"some",n,e,void 0,arguments)},splice(...n){return Va(this,"splice",n)},toReversed(){return ta(this).toReversed()},toSorted(n){return ta(this).toSorted(n)},toSpliced(...n){return ta(this).toSpliced(...n)},unshift(...n){return Va(this,"unshift",n)},values(){return hd(this,"values",Zn)}};function hd(n,e,t){const r=xc(n),i=r[e]();return r!==n&&!Wr(n)&&(i._next=i.next,i.next=()=>{const s=i._next();return s.value&&(s.value=t(s.value)),s}),i}const p1=Array.prototype;function Ki(n,e,t,r,i,s){const o=xc(n),a=o!==n&&!Wr(n),l=o[e];if(l!==p1[e]){const p=l.apply(n,s);return a?Zn(p):p}let c=t;o!==n&&(a?c=function(p,m){return t.call(this,Zn(p),m,n)}:t.length>2&&(c=function(p,m){return t.call(this,p,m,n)}));const h=l.call(o,c,r);return a&&i?i(h):h}function zp(n,e,t,r){const i=xc(n);let s=t;return i!==n&&(Wr(n)?t.length>3&&(s=function(o,a,l){return t.call(this,o,a,l,n)}):s=function(o,a,l){return t.call(this,o,Zn(a),l,n)}),i[e](s,...r)}function fd(n,e,t){const r=Ft(n);Xn(r,"iterate",pl);const i=r[e](...t);return(i===-1||i===!1)&&Qh(t[0])?(t[0]=Ft(t[0]),r[e](...t)):i}function Va(n,e,t=[]){Gs(),zh();const r=Ft(n)[e].apply(n,t);return jh(),Ks(),r}const m1=Mh("__proto__,__v_isRef,__isVue"),j_=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(Fi));function g1(n){Fi(n)||(n=String(n));const e=Ft(this);return Xn(e,"has",n),e.hasOwnProperty(n)}class q_{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,r){if(t==="__v_skip")return e.__v_skip;const i=this._isReadonly,s=this._isShallow;if(t==="__v_isReactive")return!i;if(t==="__v_isReadonly")return i;if(t==="__v_isShallow")return s;if(t==="__v_raw")return r===(i?s?A1:K_:s?G_:W_).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=nt(e);if(!i){let l;if(o&&(l=f1[t]))return l;if(t==="hasOwnProperty")return g1}const a=Reflect.get(e,t,er(e)?e:r);return(Fi(t)?j_.has(t):m1(t))||(i||Xn(e,"get",t),s)?a:er(a)?o&&Fh(t)?a:a.value:pn(a)?i?Q_(a):Gh(a):a}}class H_ extends q_{constructor(e=!1){super(!1,e)}set(e,t,r,i){let s=e[t];if(!this._isShallow){const l=bo(s);if(!Wr(r)&&!bo(r)&&(s=Ft(s),r=Ft(r)),!nt(e)&&er(s)&&!er(r))return l?!1:(s.value=r,!0)}const o=nt(e)&&Fh(t)?Number(t)<e.length:$t(e,t),a=Reflect.set(e,t,r,er(e)?e:i);return e===Ft(i)&&(o?Os(r,s)&&Zi(e,"set",t,r):Zi(e,"add",t,r)),a}deleteProperty(e,t){const r=$t(e,t);e[t];const i=Reflect.deleteProperty(e,t);return i&&r&&Zi(e,"delete",t,void 0),i}has(e,t){const r=Reflect.has(e,t);return(!Fi(t)||!j_.has(t))&&Xn(e,"has",t),r}ownKeys(e){return Xn(e,"iterate",nt(e)?"length":_o),Reflect.ownKeys(e)}}class _1 extends q_{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const w1=new H_,v1=new _1,y1=new H_(!0);const Yd=n=>n,Jl=n=>Reflect.getPrototypeOf(n);function b1(n,e,t){return function(...r){const i=this.__v_raw,s=Ft(i),o=la(s),a=n==="entries"||n===Symbol.iterator&&o,l=n==="keys"&&o,c=i[n](...r),h=t?Yd:e?Xd:Zn;return!e&&Xn(s,"iterate",l?Qd:_o),{next(){const{value:p,done:m}=c.next();return m?{value:p,done:m}:{value:a?[h(p[0]),h(p[1])]:h(p),done:m}},[Symbol.iterator](){return this}}}}function eu(n){return function(...e){return n==="delete"?!1:n==="clear"?void 0:this}}function E1(n,e){const t={get(i){const s=this.__v_raw,o=Ft(s),a=Ft(i);n||(Os(i,a)&&Xn(o,"get",i),Xn(o,"get",a));const{has:l}=Jl(o),c=e?Yd:n?Xd:Zn;if(l.call(o,i))return c(s.get(i));if(l.call(o,a))return c(s.get(a));s!==o&&s.get(i)},get size(){const i=this.__v_raw;return!n&&Xn(Ft(i),"iterate",_o),Reflect.get(i,"size",i)},has(i){const s=this.__v_raw,o=Ft(s),a=Ft(i);return n||(Os(i,a)&&Xn(o,"has",i),Xn(o,"has",a)),i===a?s.has(i):s.has(i)||s.has(a)},forEach(i,s){const o=this,a=o.__v_raw,l=Ft(a),c=e?Yd:n?Xd:Zn;return!n&&Xn(l,"iterate",_o),a.forEach((h,p)=>i.call(s,c(h),c(p),o))}};return gr(t,n?{add:eu("add"),set:eu("set"),delete:eu("delete"),clear:eu("clear")}:{add(i){!e&&!Wr(i)&&!bo(i)&&(i=Ft(i));const s=Ft(this);return Jl(s).has.call(s,i)||(s.add(i),Zi(s,"add",i,i)),this},set(i,s){!e&&!Wr(s)&&!bo(s)&&(s=Ft(s));const o=Ft(this),{has:a,get:l}=Jl(o);let c=a.call(o,i);c||(i=Ft(i),c=a.call(o,i));const h=l.call(o,i);return o.set(i,s),c?Os(s,h)&&Zi(o,"set",i,s):Zi(o,"add",i,s),this},delete(i){const s=Ft(this),{has:o,get:a}=Jl(s);let l=o.call(s,i);l||(i=Ft(i),l=o.call(s,i)),a&&a.call(s,i);const c=s.delete(i);return l&&Zi(s,"delete",i,void 0),c},clear(){const i=Ft(this),s=i.size!==0,o=i.clear();return s&&Zi(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{t[i]=b1(i,n,e)}),t}function Wh(n,e){const t=E1(n,e);return(r,i,s)=>i==="__v_isReactive"?!n:i==="__v_isReadonly"?n:i==="__v_raw"?r:Reflect.get($t(t,i)&&i in r?t:r,i,s)}const k1={get:Wh(!1,!1)},T1={get:Wh(!1,!0)},I1={get:Wh(!0,!1)};const W_=new WeakMap,G_=new WeakMap,K_=new WeakMap,A1=new WeakMap;function x1(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function C1(n){return n.__v_skip||!Object.isExtensible(n)?0:x1(Jb(n))}function Gh(n){return bo(n)?n:Kh(n,!1,w1,k1,W_)}function S1(n){return Kh(n,!1,y1,T1,G_)}function Q_(n){return Kh(n,!0,v1,I1,K_)}function Kh(n,e,t,r,i){if(!pn(n)||n.__v_raw&&!(e&&n.__v_isReactive))return n;const s=i.get(n);if(s)return s;const o=C1(n);if(o===0)return n;const a=new Proxy(n,o===2?r:t);return i.set(n,a),a}function ua(n){return bo(n)?ua(n.__v_raw):!!(n&&n.__v_isReactive)}function bo(n){return!!(n&&n.__v_isReadonly)}function Wr(n){return!!(n&&n.__v_isShallow)}function Qh(n){return n?!!n.__v_raw:!1}function Ft(n){const e=n&&n.__v_raw;return e?Ft(e):n}function R1(n){return!$t(n,"__v_skip")&&Object.isExtensible(n)&&P_(n,"__v_skip",!0),n}const Zn=n=>pn(n)?Gh(n):n,Xd=n=>pn(n)?Q_(n):n;function er(n){return n?n.__v_isRef===!0:!1}function Ae(n){return P1(n,!1)}function P1(n,e){return er(n)?n:new D1(n,e)}class D1{constructor(e,t){this.dep=new Hh,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:Ft(e),this._value=t?e:Zn(e),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){const t=this._rawValue,r=this.__v_isShallow||Wr(e)||bo(e);e=r?e:Ft(e),Os(e,t)&&(this._rawValue=e,this._value=r?e:Zn(e),this.dep.trigger())}}function hr(n){return er(n)?n.value:n}const O1={get:(n,e,t)=>e==="__v_raw"?n:hr(Reflect.get(n,e,t)),set:(n,e,t,r)=>{const i=n[e];return er(i)&&!er(t)?(i.value=t,!0):Reflect.set(n,e,t,r)}};function Y_(n){return ua(n)?n:new Proxy(n,O1)}class N1{constructor(e,t,r){this.fn=e,this.setter=t,this._value=void 0,this.dep=new Hh(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=fl-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&ln!==this)return V_(this,!0),!0}get value(){const e=this.dep.track();return $_(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function L1(n,e,t=!1){let r,i;return ft(n)?r=n:(r=n.get,i=n.set),new N1(r,i,t)}const tu={},Gu=new WeakMap;let co;function M1(n,e=!1,t=co){if(t){let r=Gu.get(t);r||Gu.set(t,r=[]),r.push(n)}}function V1(n,e,t=en){const{immediate:r,deep:i,once:s,scheduler:o,augmentJob:a,call:l}=t,c=V=>i?V:Wr(V)||i===!1||i===0?Ji(V,1):Ji(V);let h,p,m,g,b=!1,E=!1;if(er(n)?(p=()=>n.value,b=Wr(n)):ua(n)?(p=()=>c(n),b=!0):nt(n)?(E=!0,b=n.some(V=>ua(V)||Wr(V)),p=()=>n.map(V=>{if(er(V))return V.value;if(ua(V))return c(V);if(ft(V))return l?l(V,2):V()})):ft(n)?e?p=l?()=>l(n,2):n:p=()=>{if(m){Gs();try{m()}finally{Ks()}}const V=co;co=h;try{return l?l(n,3,[g]):n(g)}finally{co=V}}:p=Ri,e&&i){const V=p,K=i===!0?1/0:i;p=()=>Ji(V(),K)}const S=c1(),O=()=>{h.stop(),S&&S.active&&Uh(S.effects,h)};if(s&&e){const V=e;e=(...K)=>{V(...K),O()}}let U=E?new Array(n.length).fill(tu):tu;const D=V=>{if(!(!(h.flags&1)||!h.dirty&&!V))if(e){const K=h.run();if(i||b||(E?K.some((oe,L)=>Os(oe,U[L])):Os(K,U))){m&&m();const oe=co;co=h;try{const L=[K,U===tu?void 0:E&&U[0]===tu?[]:U,g];l?l(e,3,L):e(...L),U=K}finally{co=oe}}}else h.run()};return a&&a(D),h=new L_(p),h.scheduler=o?()=>o(D,!1):D,g=V=>M1(V,!1,h),m=h.onStop=()=>{const V=Gu.get(h);if(V){if(l)l(V,4);else for(const K of V)K();Gu.delete(h)}},e?r?D(!0):U=h.run():o?o(D.bind(null,!0),!0):h.run(),O.pause=h.pause.bind(h),O.resume=h.resume.bind(h),O.stop=O,O}function Ji(n,e=1/0,t){if(e<=0||!pn(n)||n.__v_skip||(t=t||new Set,t.has(n)))return n;if(t.add(n),e--,er(n))Ji(n.value,e,t);else if(nt(n))for(let r=0;r<n.length;r++)Ji(n[r],e,t);else if(xa(n)||la(n))n.forEach(r=>{Ji(r,e,t)});else if(S_(n)){for(const r in n)Ji(n[r],e,t);for(const r of Object.getOwnPropertySymbols(n))Object.prototype.propertyIsEnumerable.call(n,r)&&Ji(n[r],e,t)}return n}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Dl(n,e,t,r){try{return r?n(...r):n()}catch(i){Cc(i,e,t)}}function $i(n,e,t,r){if(ft(n)){const i=Dl(n,e,t,r);return i&&x_(i)&&i.catch(s=>{Cc(s,e,t)}),i}if(nt(n)){const i=[];for(let s=0;s<n.length;s++)i.push($i(n[s],e,t,r));return i}}function Cc(n,e,t,r=!0){const i=e?e.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||en;if(e){let a=e.parent;const l=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${t}`;for(;a;){const h=a.ec;if(h){for(let p=0;p<h.length;p++)if(h[p](n,l,c)===!1)return}a=a.parent}if(s){Gs(),Dl(s,null,10,[n,l,c]),Ks();return}}U1(n,t,i,r,o)}function U1(n,e,t,r=!0,i=!1){if(i)throw n;console.error(n)}const fr=[];let ki=-1;const ca=[];let Es=null,na=0;const X_=Promise.resolve();let Ku=null;function rs(n){const e=Ku||X_;return n?e.then(this?n.bind(this):n):e}function F1(n){let e=ki+1,t=fr.length;for(;e<t;){const r=e+t>>>1,i=fr[r],s=ml(i);s<n||s===n&&i.flags&2?e=r+1:t=r}return e}function Yh(n){if(!(n.flags&1)){const e=ml(n),t=fr[fr.length-1];!t||!(n.flags&2)&&e>=ml(t)?fr.push(n):fr.splice(F1(e),0,n),n.flags|=1,Z_()}}function Z_(){Ku||(Ku=X_.then(ew))}function $1(n){nt(n)?ca.push(...n):Es&&n.id===-1?Es.splice(na+1,0,n):n.flags&1||(ca.push(n),n.flags|=1),Z_()}function jp(n,e,t=ki+1){for(;t<fr.length;t++){const r=fr[t];if(r&&r.flags&2){if(n&&r.id!==n.uid)continue;fr.splice(t,1),t--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function J_(n){if(ca.length){const e=[...new Set(ca)].sort((t,r)=>ml(t)-ml(r));if(ca.length=0,Es){Es.push(...e);return}for(Es=e,na=0;na<Es.length;na++){const t=Es[na];t.flags&4&&(t.flags&=-2),t.flags&8||t(),t.flags&=-2}Es=null,na=0}}const ml=n=>n.id==null?n.flags&2?-1:1/0:n.id;function ew(n){try{for(ki=0;ki<fr.length;ki++){const e=fr[ki];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Dl(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;ki<fr.length;ki++){const e=fr[ki];e&&(e.flags&=-2)}ki=-1,fr.length=0,J_(),Ku=null,(fr.length||ca.length)&&ew()}}let Hr=null,tw=null;function Qu(n){const e=Hr;return Hr=n,tw=n&&n.type.__scopeId||null,e}function B1(n,e=Hr,t){if(!e||n._n)return n;const r=(...i)=>{r._d&&tm(-1);const s=Qu(e);let o;try{o=n(...i)}finally{Qu(s),r._d&&tm(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function Ze(n,e){if(Hr===null)return n;const t=Dc(Hr),r=n.dirs||(n.dirs=[]);for(let i=0;i<e.length;i++){let[s,o,a,l=en]=e[i];s&&(ft(s)&&(s={mounted:s,updated:s}),s.deep&&Ji(o),r.push({dir:s,instance:t,value:o,oldValue:void 0,arg:a,modifiers:l}))}return n}function lo(n,e,t,r){const i=n.dirs,s=e&&e.dirs;for(let o=0;o<i.length;o++){const a=i[o];s&&(a.oldValue=s[o].value);let l=a.dir[r];l&&(Gs(),$i(l,t,8,[n.el,a,n,e]),Ks())}}const nw=Symbol("_vte"),z1=n=>n.__isTeleport,nl=n=>n&&(n.disabled||n.disabled===""),qp=n=>n&&(n.defer||n.defer===""),Hp=n=>typeof SVGElement<"u"&&n instanceof SVGElement,Wp=n=>typeof MathMLElement=="function"&&n instanceof MathMLElement,Zd=(n,e)=>{const t=n&&n.to;return Sn(t)?e?e(t):null:t},rw={name:"Teleport",__isTeleport:!0,process(n,e,t,r,i,s,o,a,l,c){const{mc:h,pc:p,pbc:m,o:{insert:g,querySelector:b,createText:E,createComment:S}}=c,O=nl(e.props);let{shapeFlag:U,children:D,dynamicChildren:V}=e;if(n==null){const K=e.el=E(""),oe=e.anchor=E("");g(K,t,r),g(oe,t,r);const L=(N,F)=>{U&16&&(i&&i.isCE&&(i.ce._teleportTarget=N),h(D,N,F,i,s,o,a,l))},R=()=>{const N=e.target=Zd(e.props,b),F=iw(N,e,E,g);N&&(o!=="svg"&&Hp(N)?o="svg":o!=="mathml"&&Wp(N)&&(o="mathml"),O||(L(N,F),bu(e,!1)))};O&&(L(t,oe),bu(e,!0)),qp(e.props)?dr(()=>{R(),e.el.__isMounted=!0},s):R()}else{if(qp(e.props)&&!n.el.__isMounted){dr(()=>{rw.process(n,e,t,r,i,s,o,a,l,c),delete n.el.__isMounted},s);return}e.el=n.el,e.targetStart=n.targetStart;const K=e.anchor=n.anchor,oe=e.target=n.target,L=e.targetAnchor=n.targetAnchor,R=nl(n.props),N=R?t:oe,F=R?K:L;if(o==="svg"||Hp(oe)?o="svg":(o==="mathml"||Wp(oe))&&(o="mathml"),V?(m(n.dynamicChildren,V,N,i,s,o,a),Jh(n,e,!0)):l||p(n,e,N,F,i,s,o,a,!1),O)R?e.props&&n.props&&e.props.to!==n.props.to&&(e.props.to=n.props.to):nu(e,t,K,c,1);else if((e.props&&e.props.to)!==(n.props&&n.props.to)){const z=e.target=Zd(e.props,b);z&&nu(e,z,null,c,0)}else R&&nu(e,oe,L,c,1);bu(e,O)}},remove(n,e,t,{um:r,o:{remove:i}},s){const{shapeFlag:o,children:a,anchor:l,targetStart:c,targetAnchor:h,target:p,props:m}=n;if(p&&(i(c),i(h)),s&&i(l),o&16){const g=s||!nl(m);for(let b=0;b<a.length;b++){const E=a[b];r(E,e,t,g,!!E.dynamicChildren)}}},move:nu,hydrate:j1};function nu(n,e,t,{o:{insert:r},m:i},s=2){s===0&&r(n.targetAnchor,e,t);const{el:o,anchor:a,shapeFlag:l,children:c,props:h}=n,p=s===2;if(p&&r(o,e,t),(!p||nl(h))&&l&16)for(let m=0;m<c.length;m++)i(c[m],e,t,2);p&&r(a,e,t)}function j1(n,e,t,r,i,s,{o:{nextSibling:o,parentNode:a,querySelector:l,insert:c,createText:h}},p){const m=e.target=Zd(e.props,l);if(m){const g=nl(e.props),b=m._lpa||m.firstChild;if(e.shapeFlag&16)if(g)e.anchor=p(o(n),e,a(n),t,r,i,s),e.targetStart=b,e.targetAnchor=b&&o(b);else{e.anchor=o(n);let E=b;for(;E;){if(E&&E.nodeType===8){if(E.data==="teleport start anchor")e.targetStart=E;else if(E.data==="teleport anchor"){e.targetAnchor=E,m._lpa=e.targetAnchor&&o(e.targetAnchor);break}}E=o(E)}e.targetAnchor||iw(m,e,h,c),p(b&&o(b),e,m,t,r,i,s)}bu(e,g)}return e.anchor&&o(e.anchor)}const q1=rw;function bu(n,e){const t=n.ctx;if(t&&t.ut){let r,i;for(e?(r=n.el,i=n.anchor):(r=n.targetStart,i=n.targetAnchor);r&&r!==i;)r.nodeType===1&&r.setAttribute("data-v-owner",t.uid),r=r.nextSibling;t.ut()}}function iw(n,e,t,r){const i=e.targetStart=t(""),s=e.targetAnchor=t("");return i[nw]=s,n&&(r(i,n),r(s,n)),s}function Xh(n,e){n.shapeFlag&6&&n.component?(n.transition=e,Xh(n.component.subTree,e)):n.shapeFlag&128?(n.ssContent.transition=e.clone(n.ssContent),n.ssFallback.transition=e.clone(n.ssFallback)):n.transition=e}function sw(n){n.ids=[n.ids[0]+n.ids[2]+++"-",0,0]}function Yu(n,e,t,r,i=!1){if(nt(n)){n.forEach((b,E)=>Yu(b,e&&(nt(e)?e[E]:e),t,r,i));return}if(rl(r)&&!i){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&Yu(n,e,t,r.component.subTree);return}const s=r.shapeFlag&4?Dc(r.component):r.el,o=i?null:s,{i:a,r:l}=n,c=e&&e.r,h=a.refs===en?a.refs={}:a.refs,p=a.setupState,m=Ft(p),g=p===en?()=>!1:b=>$t(m,b);if(c!=null&&c!==l&&(Sn(c)?(h[c]=null,g(c)&&(p[c]=null)):er(c)&&(c.value=null)),ft(l))Dl(l,a,12,[o,h]);else{const b=Sn(l),E=er(l);if(b||E){const S=()=>{if(n.f){const O=b?g(l)?p[l]:h[l]:l.value;i?nt(O)&&Uh(O,s):nt(O)?O.includes(s)||O.push(s):b?(h[l]=[s],g(l)&&(p[l]=h[l])):(l.value=[s],n.k&&(h[n.k]=l.value))}else b?(h[l]=o,g(l)&&(p[l]=o)):E&&(l.value=o,n.k&&(h[n.k]=o))};o?(S.id=-1,dr(S,t)):S()}}}Ac().requestIdleCallback;Ac().cancelIdleCallback;const rl=n=>!!n.type.__asyncLoader,ow=n=>n.type.__isKeepAlive;function H1(n,e){aw(n,"a",e)}function W1(n,e){aw(n,"da",e)}function aw(n,e,t=pr){const r=n.__wdc||(n.__wdc=()=>{let i=t;for(;i;){if(i.isDeactivated)return;i=i.parent}return n()});if(Sc(e,r,t),t){let i=t.parent;for(;i&&i.parent;)ow(i.parent.vnode)&&G1(r,e,t,i),i=i.parent}}function G1(n,e,t,r){const i=Sc(e,n,r,!0);uw(()=>{Uh(r[e],i)},t)}function Sc(n,e,t=pr,r=!1){if(t){const i=t[n]||(t[n]=[]),s=e.__weh||(e.__weh=(...o)=>{Gs();const a=Ol(t),l=$i(e,t,n,o);return a(),Ks(),l});return r?i.unshift(s):i.push(s),s}}const ls=n=>(e,t=pr)=>{(!_l||n==="sp")&&Sc(n,(...r)=>e(...r),t)},K1=ls("bm"),lw=ls("m"),Q1=ls("bu"),Y1=ls("u"),X1=ls("bum"),uw=ls("um"),Z1=ls("sp"),J1=ls("rtg"),eE=ls("rtc");function tE(n,e=pr){Sc("ec",n,e)}const nE=Symbol.for("v-ndc");function ai(n,e,t,r){let i;const s=t,o=nt(n);if(o||Sn(n)){const a=o&&ua(n);let l=!1;a&&(l=!Wr(n),n=xc(n)),i=new Array(n.length);for(let c=0,h=n.length;c<h;c++)i[c]=e(l?Zn(n[c]):n[c],c,void 0,s)}else if(typeof n=="number"){i=new Array(n);for(let a=0;a<n;a++)i[a]=e(a+1,a,void 0,s)}else if(pn(n))if(n[Symbol.iterator])i=Array.from(n,(a,l)=>e(a,l,void 0,s));else{const a=Object.keys(n);i=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const h=a[l];i[l]=e(n[h],h,l,s)}}else i=[];return i}const Jd=n=>n?Pw(n)?Dc(n):Jd(n.parent):null,il=gr(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>Jd(n.parent),$root:n=>Jd(n.root),$host:n=>n.ce,$emit:n=>n.emit,$options:n=>dw(n),$forceUpdate:n=>n.f||(n.f=()=>{Yh(n.update)}),$nextTick:n=>n.n||(n.n=rs.bind(n.proxy)),$watch:n=>TE.bind(n)}),pd=(n,e)=>n!==en&&!n.__isScriptSetup&&$t(n,e),rE={get({_:n},e){if(e==="__v_skip")return!0;const{ctx:t,setupState:r,data:i,props:s,accessCache:o,type:a,appContext:l}=n;let c;if(e[0]!=="$"){const g=o[e];if(g!==void 0)switch(g){case 1:return r[e];case 2:return i[e];case 4:return t[e];case 3:return s[e]}else{if(pd(r,e))return o[e]=1,r[e];if(i!==en&&$t(i,e))return o[e]=2,i[e];if((c=n.propsOptions[0])&&$t(c,e))return o[e]=3,s[e];if(t!==en&&$t(t,e))return o[e]=4,t[e];eh&&(o[e]=0)}}const h=il[e];let p,m;if(h)return e==="$attrs"&&Xn(n.attrs,"get",""),h(n);if((p=a.__cssModules)&&(p=p[e]))return p;if(t!==en&&$t(t,e))return o[e]=4,t[e];if(m=l.config.globalProperties,$t(m,e))return m[e]},set({_:n},e,t){const{data:r,setupState:i,ctx:s}=n;return pd(i,e)?(i[e]=t,!0):r!==en&&$t(r,e)?(r[e]=t,!0):$t(n.props,e)||e[0]==="$"&&e.slice(1)in n?!1:(s[e]=t,!0)},has({_:{data:n,setupState:e,accessCache:t,ctx:r,appContext:i,propsOptions:s}},o){let a;return!!t[o]||n!==en&&$t(n,o)||pd(e,o)||(a=s[0])&&$t(a,o)||$t(r,o)||$t(il,o)||$t(i.config.globalProperties,o)},defineProperty(n,e,t){return t.get!=null?n._.accessCache[e]=0:$t(t,"value")&&this.set(n,e,t.value,null),Reflect.defineProperty(n,e,t)}};function Gp(n){return nt(n)?n.reduce((e,t)=>(e[t]=null,e),{}):n}let eh=!0;function iE(n){const e=dw(n),t=n.proxy,r=n.ctx;eh=!1,e.beforeCreate&&Kp(e.beforeCreate,n,"bc");const{data:i,computed:s,methods:o,watch:a,provide:l,inject:c,created:h,beforeMount:p,mounted:m,beforeUpdate:g,updated:b,activated:E,deactivated:S,beforeDestroy:O,beforeUnmount:U,destroyed:D,unmounted:V,render:K,renderTracked:oe,renderTriggered:L,errorCaptured:R,serverPrefetch:N,expose:F,inheritAttrs:z,components:C,directives:P,filters:x}=e;if(c&&sE(c,r,null),o)for(const X in o){const xe=o[X];ft(xe)&&(r[X]=xe.bind(t))}if(i){const X=i.call(t,t);pn(X)&&(n.data=Gh(X))}if(eh=!0,s)for(const X in s){const xe=s[X],Ee=ft(xe)?xe.bind(t,t):ft(xe.get)?xe.get.bind(t,t):Ri,ve=!ft(xe)&&ft(xe.set)?xe.set.bind(t):Ri,ce=qE({get:Ee,set:ve});Object.defineProperty(r,X,{enumerable:!0,configurable:!0,get:()=>ce.value,set:le=>ce.value=le})}if(a)for(const X in a)cw(a[X],r,t,X);if(l){const X=ft(l)?l.call(t):l;Reflect.ownKeys(X).forEach(xe=>{dE(xe,X[xe])})}h&&Kp(h,n,"c");function Y(X,xe){nt(xe)?xe.forEach(Ee=>X(Ee.bind(t))):xe&&X(xe.bind(t))}if(Y(K1,p),Y(lw,m),Y(Q1,g),Y(Y1,b),Y(H1,E),Y(W1,S),Y(tE,R),Y(eE,oe),Y(J1,L),Y(X1,U),Y(uw,V),Y(Z1,N),nt(F))if(F.length){const X=n.exposed||(n.exposed={});F.forEach(xe=>{Object.defineProperty(X,xe,{get:()=>t[xe],set:Ee=>t[xe]=Ee})})}else n.exposed||(n.exposed={});K&&n.render===Ri&&(n.render=K),z!=null&&(n.inheritAttrs=z),C&&(n.components=C),P&&(n.directives=P),N&&sw(n)}function sE(n,e,t=Ri){nt(n)&&(n=th(n));for(const r in n){const i=n[r];let s;pn(i)?"default"in i?s=Eu(i.from||r,i.default,!0):s=Eu(i.from||r):s=Eu(i),er(s)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):e[r]=s}}function Kp(n,e,t){$i(nt(n)?n.map(r=>r.bind(e.proxy)):n.bind(e.proxy),e,t)}function cw(n,e,t,r){let i=r.includes(".")?Tw(t,r):()=>t[r];if(Sn(n)){const s=e[n];ft(s)&&gd(i,s)}else if(ft(n))gd(i,n.bind(t));else if(pn(n))if(nt(n))n.forEach(s=>cw(s,e,t,r));else{const s=ft(n.handler)?n.handler.bind(t):e[n.handler];ft(s)&&gd(i,s,n)}}function dw(n){const e=n.type,{mixins:t,extends:r}=e,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=n.appContext,a=s.get(e);let l;return a?l=a:!i.length&&!t&&!r?l=e:(l={},i.length&&i.forEach(c=>Xu(l,c,o,!0)),Xu(l,e,o)),pn(e)&&s.set(e,l),l}function Xu(n,e,t,r=!1){const{mixins:i,extends:s}=e;s&&Xu(n,s,t,!0),i&&i.forEach(o=>Xu(n,o,t,!0));for(const o in e)if(!(r&&o==="expose")){const a=oE[o]||t&&t[o];n[o]=a?a(n[o],e[o]):e[o]}return n}const oE={data:Qp,props:Yp,emits:Yp,methods:Wa,computed:Wa,beforeCreate:cr,created:cr,beforeMount:cr,mounted:cr,beforeUpdate:cr,updated:cr,beforeDestroy:cr,beforeUnmount:cr,destroyed:cr,unmounted:cr,activated:cr,deactivated:cr,errorCaptured:cr,serverPrefetch:cr,components:Wa,directives:Wa,watch:lE,provide:Qp,inject:aE};function Qp(n,e){return e?n?function(){return gr(ft(n)?n.call(this,this):n,ft(e)?e.call(this,this):e)}:e:n}function aE(n,e){return Wa(th(n),th(e))}function th(n){if(nt(n)){const e={};for(let t=0;t<n.length;t++)e[n[t]]=n[t];return e}return n}function cr(n,e){return n?[...new Set([].concat(n,e))]:e}function Wa(n,e){return n?gr(Object.create(null),n,e):e}function Yp(n,e){return n?nt(n)&&nt(e)?[...new Set([...n,...e])]:gr(Object.create(null),Gp(n),Gp(e??{})):e}function lE(n,e){if(!n)return e;if(!e)return n;const t=gr(Object.create(null),n);for(const r in e)t[r]=cr(n[r],e[r]);return t}function hw(){return{app:null,config:{isNativeTag:Xb,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uE=0;function cE(n,e){return function(r,i=null){ft(r)||(r=gr({},r)),i!=null&&!pn(i)&&(i=null);const s=hw(),o=new WeakSet,a=[];let l=!1;const c=s.app={_uid:uE++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:HE,get config(){return s.config},set config(h){},use(h,...p){return o.has(h)||(h&&ft(h.install)?(o.add(h),h.install(c,...p)):ft(h)&&(o.add(h),h(c,...p))),c},mixin(h){return s.mixins.includes(h)||s.mixins.push(h),c},component(h,p){return p?(s.components[h]=p,c):s.components[h]},directive(h,p){return p?(s.directives[h]=p,c):s.directives[h]},mount(h,p,m){if(!l){const g=c._ceVNode||Ln(r,i);return g.appContext=s,m===!0?m="svg":m===!1&&(m=void 0),n(g,h,m),l=!0,c._container=h,h.__vue_app__=c,Dc(g.component)}},onUnmount(h){a.push(h)},unmount(){l&&($i(a,c._instance,16),n(null,c._container),delete c._container.__vue_app__)},provide(h,p){return s.provides[h]=p,c},runWithContext(h){const p=da;da=c;try{return h()}finally{da=p}}};return c}}let da=null;function dE(n,e){if(pr){let t=pr.provides;const r=pr.parent&&pr.parent.provides;r===t&&(t=pr.provides=Object.create(r)),t[n]=e}}function Eu(n,e,t=!1){const r=pr||Hr;if(r||da){const i=da?da._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(i&&n in i)return i[n];if(arguments.length>1)return t&&ft(e)?e.call(r&&r.proxy):e}}const fw={},pw=()=>Object.create(fw),mw=n=>Object.getPrototypeOf(n)===fw;function hE(n,e,t,r=!1){const i={},s=pw();n.propsDefaults=Object.create(null),gw(n,e,i,s);for(const o in n.propsOptions[0])o in i||(i[o]=void 0);t?n.props=r?i:S1(i):n.type.props?n.props=i:n.props=s,n.attrs=s}function fE(n,e,t,r){const{props:i,attrs:s,vnode:{patchFlag:o}}=n,a=Ft(i),[l]=n.propsOptions;let c=!1;if((r||o>0)&&!(o&16)){if(o&8){const h=n.vnode.dynamicProps;for(let p=0;p<h.length;p++){let m=h[p];if(Rc(n.emitsOptions,m))continue;const g=e[m];if(l)if($t(s,m))g!==s[m]&&(s[m]=g,c=!0);else{const b=Us(m);i[b]=nh(l,a,b,g,n,!1)}else g!==s[m]&&(s[m]=g,c=!0)}}}else{gw(n,e,i,s)&&(c=!0);let h;for(const p in a)(!e||!$t(e,p)&&((h=Oo(p))===p||!$t(e,h)))&&(l?t&&(t[p]!==void 0||t[h]!==void 0)&&(i[p]=nh(l,a,p,void 0,n,!0)):delete i[p]);if(s!==a)for(const p in s)(!e||!$t(e,p))&&(delete s[p],c=!0)}c&&Zi(n.attrs,"set","")}function gw(n,e,t,r){const[i,s]=n.propsOptions;let o=!1,a;if(e)for(let l in e){if(Ja(l))continue;const c=e[l];let h;i&&$t(i,h=Us(l))?!s||!s.includes(h)?t[h]=c:(a||(a={}))[h]=c:Rc(n.emitsOptions,l)||(!(l in r)||c!==r[l])&&(r[l]=c,o=!0)}if(s){const l=Ft(t),c=a||en;for(let h=0;h<s.length;h++){const p=s[h];t[p]=nh(i,l,p,c[p],n,!$t(c,p))}}return o}function nh(n,e,t,r,i,s){const o=n[t];if(o!=null){const a=$t(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&ft(l)){const{propsDefaults:c}=i;if(t in c)r=c[t];else{const h=Ol(i);r=c[t]=l.call(null,e),h()}}else r=l;i.ce&&i.ce._setProp(t,r)}o[0]&&(s&&!a?r=!1:o[1]&&(r===""||r===Oo(t))&&(r=!0))}return r}const pE=new WeakMap;function _w(n,e,t=!1){const r=t?pE:e.propsCache,i=r.get(n);if(i)return i;const s=n.props,o={},a=[];let l=!1;if(!ft(n)){const h=p=>{l=!0;const[m,g]=_w(p,e,!0);gr(o,m),g&&a.push(...g)};!t&&e.mixins.length&&e.mixins.forEach(h),n.extends&&h(n.extends),n.mixins&&n.mixins.forEach(h)}if(!s&&!l)return pn(n)&&r.set(n,aa),aa;if(nt(s))for(let h=0;h<s.length;h++){const p=Us(s[h]);Xp(p)&&(o[p]=en)}else if(s)for(const h in s){const p=Us(h);if(Xp(p)){const m=s[h],g=o[p]=nt(m)||ft(m)?{type:m}:gr({},m),b=g.type;let E=!1,S=!0;if(nt(b))for(let O=0;O<b.length;++O){const U=b[O],D=ft(U)&&U.name;if(D==="Boolean"){E=!0;break}else D==="String"&&(S=!1)}else E=ft(b)&&b.name==="Boolean";g[0]=E,g[1]=S,(E||$t(g,"default"))&&a.push(p)}}const c=[o,a];return pn(n)&&r.set(n,c),c}function Xp(n){return n[0]!=="$"&&!Ja(n)}const ww=n=>n[0]==="_"||n==="$stable",Zh=n=>nt(n)?n.map(Ii):[Ii(n)],mE=(n,e,t)=>{if(e._n)return e;const r=B1((...i)=>Zh(e(...i)),t);return r._c=!1,r},vw=(n,e,t)=>{const r=n._ctx;for(const i in n){if(ww(i))continue;const s=n[i];if(ft(s))e[i]=mE(i,s,r);else if(s!=null){const o=Zh(s);e[i]=()=>o}}},yw=(n,e)=>{const t=Zh(e);n.slots.default=()=>t},bw=(n,e,t)=>{for(const r in e)(t||r!=="_")&&(n[r]=e[r])},gE=(n,e,t)=>{const r=n.slots=pw();if(n.vnode.shapeFlag&32){const i=e._;i?(bw(r,e,t),t&&P_(r,"_",i,!0)):vw(e,r)}else e&&yw(n,e)},_E=(n,e,t)=>{const{vnode:r,slots:i}=n;let s=!0,o=en;if(r.shapeFlag&32){const a=e._;a?t&&a===1?s=!1:bw(i,e,t):(s=!e.$stable,vw(e,i)),o=e}else e&&(yw(n,e),o={default:1});if(s)for(const a in i)!ww(a)&&o[a]==null&&delete i[a]},dr=PE;function wE(n){return vE(n)}function vE(n,e){const t=Ac();t.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:o,createText:a,createComment:l,setText:c,setElementText:h,parentNode:p,nextSibling:m,setScopeId:g=Ri,insertStaticContent:b}=n,E=(Q,H,v,te=null,G=null,M=null,$=void 0,q=null,ae=!!H.dynamicChildren)=>{if(Q===H)return;Q&&!Ua(Q,H)&&(te=ke(Q),le(Q,G,M,!0),Q=null),H.patchFlag===-2&&(ae=!1,H.dynamicChildren=null);const{type:ie,ref:J,shapeFlag:de}=H;switch(ie){case Pc:S(Q,H,v,te);break;case Eo:O(Q,H,v,te);break;case ku:Q==null&&U(H,v,te,$);break;case mn:C(Q,H,v,te,G,M,$,q,ae);break;default:de&1?K(Q,H,v,te,G,M,$,q,ae):de&6?P(Q,H,v,te,G,M,$,q,ae):(de&64||de&128)&&ie.process(Q,H,v,te,G,M,$,q,ae,$e)}J!=null&&G&&Yu(J,Q&&Q.ref,M,H||Q,!H)},S=(Q,H,v,te)=>{if(Q==null)r(H.el=a(H.children),v,te);else{const G=H.el=Q.el;H.children!==Q.children&&c(G,H.children)}},O=(Q,H,v,te)=>{Q==null?r(H.el=l(H.children||""),v,te):H.el=Q.el},U=(Q,H,v,te)=>{[Q.el,Q.anchor]=b(Q.children,H,v,te,Q.el,Q.anchor)},D=({el:Q,anchor:H},v,te)=>{let G;for(;Q&&Q!==H;)G=m(Q),r(Q,v,te),Q=G;r(H,v,te)},V=({el:Q,anchor:H})=>{let v;for(;Q&&Q!==H;)v=m(Q),i(Q),Q=v;i(H)},K=(Q,H,v,te,G,M,$,q,ae)=>{H.type==="svg"?$="svg":H.type==="math"&&($="mathml"),Q==null?oe(H,v,te,G,M,$,q,ae):N(Q,H,G,M,$,q,ae)},oe=(Q,H,v,te,G,M,$,q)=>{let ae,ie;const{props:J,shapeFlag:de,transition:ge,dirs:pe}=Q;if(ae=Q.el=o(Q.type,M,J&&J.is,J),de&8?h(ae,Q.children):de&16&&R(Q.children,ae,null,te,G,md(Q,M),$,q),pe&&lo(Q,null,te,"created"),L(ae,Q,Q.scopeId,$,te),J){for(const Ve in J)Ve!=="value"&&!Ja(Ve)&&s(ae,Ve,null,J[Ve],M,te);"value"in J&&s(ae,"value",null,J.value,M),(ie=J.onVnodeBeforeMount)&&Ei(ie,te,Q)}pe&&lo(Q,null,te,"beforeMount");const Ce=yE(G,ge);Ce&&ge.beforeEnter(ae),r(ae,H,v),((ie=J&&J.onVnodeMounted)||Ce||pe)&&dr(()=>{ie&&Ei(ie,te,Q),Ce&&ge.enter(ae),pe&&lo(Q,null,te,"mounted")},G)},L=(Q,H,v,te,G)=>{if(v&&g(Q,v),te)for(let M=0;M<te.length;M++)g(Q,te[M]);if(G){let M=G.subTree;if(H===M||Aw(M.type)&&(M.ssContent===H||M.ssFallback===H)){const $=G.vnode;L(Q,$,$.scopeId,$.slotScopeIds,G.parent)}}},R=(Q,H,v,te,G,M,$,q,ae=0)=>{for(let ie=ae;ie<Q.length;ie++){const J=Q[ie]=q?ks(Q[ie]):Ii(Q[ie]);E(null,J,H,v,te,G,M,$,q)}},N=(Q,H,v,te,G,M,$)=>{const q=H.el=Q.el;let{patchFlag:ae,dynamicChildren:ie,dirs:J}=H;ae|=Q.patchFlag&16;const de=Q.props||en,ge=H.props||en;let pe;if(v&&uo(v,!1),(pe=ge.onVnodeBeforeUpdate)&&Ei(pe,v,H,Q),J&&lo(H,Q,v,"beforeUpdate"),v&&uo(v,!0),(de.innerHTML&&ge.innerHTML==null||de.textContent&&ge.textContent==null)&&h(q,""),ie?F(Q.dynamicChildren,ie,q,v,te,md(H,G),M):$||xe(Q,H,q,null,v,te,md(H,G),M,!1),ae>0){if(ae&16)z(q,de,ge,v,G);else if(ae&2&&de.class!==ge.class&&s(q,"class",null,ge.class,G),ae&4&&s(q,"style",de.style,ge.style,G),ae&8){const Ce=H.dynamicProps;for(let Ve=0;Ve<Ce.length;Ve++){const Ue=Ce[Ve],ct=de[Ue],at=ge[Ue];(at!==ct||Ue==="value")&&s(q,Ue,ct,at,G,v)}}ae&1&&Q.children!==H.children&&h(q,H.children)}else!$&&ie==null&&z(q,de,ge,v,G);((pe=ge.onVnodeUpdated)||J)&&dr(()=>{pe&&Ei(pe,v,H,Q),J&&lo(H,Q,v,"updated")},te)},F=(Q,H,v,te,G,M,$)=>{for(let q=0;q<H.length;q++){const ae=Q[q],ie=H[q],J=ae.el&&(ae.type===mn||!Ua(ae,ie)||ae.shapeFlag&70)?p(ae.el):v;E(ae,ie,J,null,te,G,M,$,!0)}},z=(Q,H,v,te,G)=>{if(H!==v){if(H!==en)for(const M in H)!Ja(M)&&!(M in v)&&s(Q,M,H[M],null,G,te);for(const M in v){if(Ja(M))continue;const $=v[M],q=H[M];$!==q&&M!=="value"&&s(Q,M,q,$,G,te)}"value"in v&&s(Q,"value",H.value,v.value,G)}},C=(Q,H,v,te,G,M,$,q,ae)=>{const ie=H.el=Q?Q.el:a(""),J=H.anchor=Q?Q.anchor:a("");let{patchFlag:de,dynamicChildren:ge,slotScopeIds:pe}=H;pe&&(q=q?q.concat(pe):pe),Q==null?(r(ie,v,te),r(J,v,te),R(H.children||[],v,J,G,M,$,q,ae)):de>0&&de&64&&ge&&Q.dynamicChildren?(F(Q.dynamicChildren,ge,v,G,M,$,q),(H.key!=null||G&&H===G.subTree)&&Jh(Q,H,!0)):xe(Q,H,v,J,G,M,$,q,ae)},P=(Q,H,v,te,G,M,$,q,ae)=>{H.slotScopeIds=q,Q==null?H.shapeFlag&512?G.ctx.activate(H,v,te,$,ae):x(H,v,te,G,M,$,ae):ue(Q,H,ae)},x=(Q,H,v,te,G,M,$)=>{const q=Q.component=UE(Q,te,G);if(ow(Q)&&(q.ctx.renderer=$e),FE(q,!1,$),q.asyncDep){if(G&&G.registerDep(q,Y,$),!Q.el){const ae=q.subTree=Ln(Eo);O(null,ae,H,v)}}else Y(q,Q,H,v,G,M,$)},ue=(Q,H,v)=>{const te=H.component=Q.component;if(SE(Q,H,v))if(te.asyncDep&&!te.asyncResolved){X(te,H,v);return}else te.next=H,te.update();else H.el=Q.el,te.vnode=H},Y=(Q,H,v,te,G,M,$)=>{const q=()=>{if(Q.isMounted){let{next:de,bu:ge,u:pe,parent:Ce,vnode:Ve}=Q;{const gt=Ew(Q);if(gt){de&&(de.el=Ve.el,X(Q,de,$)),gt.asyncDep.then(()=>{Q.isUnmounted||q()});return}}let Ue=de,ct;uo(Q,!1),de?(de.el=Ve.el,X(Q,de,$)):de=Ve,ge&&yu(ge),(ct=de.props&&de.props.onVnodeBeforeUpdate)&&Ei(ct,Ce,de,Ve),uo(Q,!0);const at=Jp(Q),bt=Q.subTree;Q.subTree=at,E(bt,at,p(bt.el),ke(bt),Q,G,M),de.el=at.el,Ue===null&&RE(Q,at.el),pe&&dr(pe,G),(ct=de.props&&de.props.onVnodeUpdated)&&dr(()=>Ei(ct,Ce,de,Ve),G)}else{let de;const{el:ge,props:pe}=H,{bm:Ce,m:Ve,parent:Ue,root:ct,type:at}=Q,bt=rl(H);uo(Q,!1),Ce&&yu(Ce),!bt&&(de=pe&&pe.onVnodeBeforeMount)&&Ei(de,Ue,H),uo(Q,!0);{ct.ce&&ct.ce._injectChildStyle(at);const gt=Q.subTree=Jp(Q);E(null,gt,v,te,Q,G,M),H.el=gt.el}if(Ve&&dr(Ve,G),!bt&&(de=pe&&pe.onVnodeMounted)){const gt=H;dr(()=>Ei(de,Ue,gt),G)}(H.shapeFlag&256||Ue&&rl(Ue.vnode)&&Ue.vnode.shapeFlag&256)&&Q.a&&dr(Q.a,G),Q.isMounted=!0,H=v=te=null}};Q.scope.on();const ae=Q.effect=new L_(q);Q.scope.off();const ie=Q.update=ae.run.bind(ae),J=Q.job=ae.runIfDirty.bind(ae);J.i=Q,J.id=Q.uid,ae.scheduler=()=>Yh(J),uo(Q,!0),ie()},X=(Q,H,v)=>{H.component=Q;const te=Q.vnode.props;Q.vnode=H,Q.next=null,fE(Q,H.props,te,v),_E(Q,H.children,v),Gs(),jp(Q),Ks()},xe=(Q,H,v,te,G,M,$,q,ae=!1)=>{const ie=Q&&Q.children,J=Q?Q.shapeFlag:0,de=H.children,{patchFlag:ge,shapeFlag:pe}=H;if(ge>0){if(ge&128){ve(ie,de,v,te,G,M,$,q,ae);return}else if(ge&256){Ee(ie,de,v,te,G,M,$,q,ae);return}}pe&8?(J&16&&ze(ie,G,M),de!==ie&&h(v,de)):J&16?pe&16?ve(ie,de,v,te,G,M,$,q,ae):ze(ie,G,M,!0):(J&8&&h(v,""),pe&16&&R(de,v,te,G,M,$,q,ae))},Ee=(Q,H,v,te,G,M,$,q,ae)=>{Q=Q||aa,H=H||aa;const ie=Q.length,J=H.length,de=Math.min(ie,J);let ge;for(ge=0;ge<de;ge++){const pe=H[ge]=ae?ks(H[ge]):Ii(H[ge]);E(Q[ge],pe,v,null,G,M,$,q,ae)}ie>J?ze(Q,G,M,!0,!1,de):R(H,v,te,G,M,$,q,ae,de)},ve=(Q,H,v,te,G,M,$,q,ae)=>{let ie=0;const J=H.length;let de=Q.length-1,ge=J-1;for(;ie<=de&&ie<=ge;){const pe=Q[ie],Ce=H[ie]=ae?ks(H[ie]):Ii(H[ie]);if(Ua(pe,Ce))E(pe,Ce,v,null,G,M,$,q,ae);else break;ie++}for(;ie<=de&&ie<=ge;){const pe=Q[de],Ce=H[ge]=ae?ks(H[ge]):Ii(H[ge]);if(Ua(pe,Ce))E(pe,Ce,v,null,G,M,$,q,ae);else break;de--,ge--}if(ie>de){if(ie<=ge){const pe=ge+1,Ce=pe<J?H[pe].el:te;for(;ie<=ge;)E(null,H[ie]=ae?ks(H[ie]):Ii(H[ie]),v,Ce,G,M,$,q,ae),ie++}}else if(ie>ge)for(;ie<=de;)le(Q[ie],G,M,!0),ie++;else{const pe=ie,Ce=ie,Ve=new Map;for(ie=Ce;ie<=ge;ie++){const Et=H[ie]=ae?ks(H[ie]):Ii(H[ie]);Et.key!=null&&Ve.set(Et.key,ie)}let Ue,ct=0;const at=ge-Ce+1;let bt=!1,gt=0;const pt=new Array(at);for(ie=0;ie<at;ie++)pt[ie]=0;for(ie=pe;ie<=de;ie++){const Et=Q[ie];if(ct>=at){le(Et,G,M,!0);continue}let Nt;if(Et.key!=null)Nt=Ve.get(Et.key);else for(Ue=Ce;Ue<=ge;Ue++)if(pt[Ue-Ce]===0&&Ua(Et,H[Ue])){Nt=Ue;break}Nt===void 0?le(Et,G,M,!0):(pt[Nt-Ce]=ie+1,Nt>=gt?gt=Nt:bt=!0,E(Et,H[Nt],v,null,G,M,$,q,ae),ct++)}const zt=bt?bE(pt):aa;for(Ue=zt.length-1,ie=at-1;ie>=0;ie--){const Et=Ce+ie,Nt=H[Et],On=Et+1<J?H[Et+1].el:te;pt[ie]===0?E(null,Nt,v,On,G,M,$,q,ae):bt&&(Ue<0||ie!==zt[Ue]?ce(Nt,v,On,2):Ue--)}}},ce=(Q,H,v,te,G=null)=>{const{el:M,type:$,transition:q,children:ae,shapeFlag:ie}=Q;if(ie&6){ce(Q.component.subTree,H,v,te);return}if(ie&128){Q.suspense.move(H,v,te);return}if(ie&64){$.move(Q,H,v,$e);return}if($===mn){r(M,H,v);for(let de=0;de<ae.length;de++)ce(ae[de],H,v,te);r(Q.anchor,H,v);return}if($===ku){D(Q,H,v);return}if(te!==2&&ie&1&&q)if(te===0)q.beforeEnter(M),r(M,H,v),dr(()=>q.enter(M),G);else{const{leave:de,delayLeave:ge,afterLeave:pe}=q,Ce=()=>r(M,H,v),Ve=()=>{de(M,()=>{Ce(),pe&&pe()})};ge?ge(M,Ce,Ve):Ve()}else r(M,H,v)},le=(Q,H,v,te=!1,G=!1)=>{const{type:M,props:$,ref:q,children:ae,dynamicChildren:ie,shapeFlag:J,patchFlag:de,dirs:ge,cacheIndex:pe}=Q;if(de===-2&&(G=!1),q!=null&&Yu(q,null,v,Q,!0),pe!=null&&(H.renderCache[pe]=void 0),J&256){H.ctx.deactivate(Q);return}const Ce=J&1&&ge,Ve=!rl(Q);let Ue;if(Ve&&(Ue=$&&$.onVnodeBeforeUnmount)&&Ei(Ue,H,Q),J&6)Z(Q.component,v,te);else{if(J&128){Q.suspense.unmount(v,te);return}Ce&&lo(Q,null,H,"beforeUnmount"),J&64?Q.type.remove(Q,H,v,$e,te):ie&&!ie.hasOnce&&(M!==mn||de>0&&de&64)?ze(ie,H,v,!1,!0):(M===mn&&de&384||!G&&J&16)&&ze(ae,H,v),te&&ye(Q)}(Ve&&(Ue=$&&$.onVnodeUnmounted)||Ce)&&dr(()=>{Ue&&Ei(Ue,H,Q),Ce&&lo(Q,null,H,"unmounted")},v)},ye=Q=>{const{type:H,el:v,anchor:te,transition:G}=Q;if(H===mn){De(v,te);return}if(H===ku){V(Q);return}const M=()=>{i(v),G&&!G.persisted&&G.afterLeave&&G.afterLeave()};if(Q.shapeFlag&1&&G&&!G.persisted){const{leave:$,delayLeave:q}=G,ae=()=>$(v,M);q?q(Q.el,M,ae):ae()}else M()},De=(Q,H)=>{let v;for(;Q!==H;)v=m(Q),i(Q),Q=v;i(H)},Z=(Q,H,v)=>{const{bum:te,scope:G,job:M,subTree:$,um:q,m:ae,a:ie}=Q;Zp(ae),Zp(ie),te&&yu(te),G.stop(),M&&(M.flags|=8,le($,Q,H,v)),q&&dr(q,H),dr(()=>{Q.isUnmounted=!0},H),H&&H.pendingBranch&&!H.isUnmounted&&Q.asyncDep&&!Q.asyncResolved&&Q.suspenseId===H.pendingId&&(H.deps--,H.deps===0&&H.resolve())},ze=(Q,H,v,te=!1,G=!1,M=0)=>{for(let $=M;$<Q.length;$++)le(Q[$],H,v,te,G)},ke=Q=>{if(Q.shapeFlag&6)return ke(Q.component.subTree);if(Q.shapeFlag&128)return Q.suspense.next();const H=m(Q.anchor||Q.el),v=H&&H[nw];return v?m(v):H};let _e=!1;const Re=(Q,H,v)=>{Q==null?H._vnode&&le(H._vnode,null,null,!0):E(H._vnode||null,Q,H,null,null,null,v),H._vnode=Q,_e||(_e=!0,jp(),J_(),_e=!1)},$e={p:E,um:le,m:ce,r:ye,mt:x,mc:R,pc:xe,pbc:F,n:ke,o:n};return{render:Re,hydrate:void 0,createApp:cE(Re)}}function md({type:n,props:e},t){return t==="svg"&&n==="foreignObject"||t==="mathml"&&n==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function uo({effect:n,job:e},t){t?(n.flags|=32,e.flags|=4):(n.flags&=-33,e.flags&=-5)}function yE(n,e){return(!n||n&&!n.pendingBranch)&&e&&!e.persisted}function Jh(n,e,t=!1){const r=n.children,i=e.children;if(nt(r)&&nt(i))for(let s=0;s<r.length;s++){const o=r[s];let a=i[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[s]=ks(i[s]),a.el=o.el),!t&&a.patchFlag!==-2&&Jh(o,a)),a.type===Pc&&(a.el=o.el)}}function bE(n){const e=n.slice(),t=[0];let r,i,s,o,a;const l=n.length;for(r=0;r<l;r++){const c=n[r];if(c!==0){if(i=t[t.length-1],n[i]<c){e[r]=i,t.push(r);continue}for(s=0,o=t.length-1;s<o;)a=s+o>>1,n[t[a]]<c?s=a+1:o=a;c<n[t[s]]&&(s>0&&(e[r]=t[s-1]),t[s]=r)}}for(s=t.length,o=t[s-1];s-- >0;)t[s]=o,o=e[o];return t}function Ew(n){const e=n.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Ew(e)}function Zp(n){if(n)for(let e=0;e<n.length;e++)n[e].flags|=8}const EE=Symbol.for("v-scx"),kE=()=>Eu(EE);function gd(n,e,t){return kw(n,e,t)}function kw(n,e,t=en){const{immediate:r,deep:i,flush:s,once:o}=t,a=gr({},t),l=e&&r||!e&&s!=="post";let c;if(_l){if(s==="sync"){const g=kE();c=g.__watcherHandles||(g.__watcherHandles=[])}else if(!l){const g=()=>{};return g.stop=Ri,g.resume=Ri,g.pause=Ri,g}}const h=pr;a.call=(g,b,E)=>$i(g,h,b,E);let p=!1;s==="post"?a.scheduler=g=>{dr(g,h&&h.suspense)}:s!=="sync"&&(p=!0,a.scheduler=(g,b)=>{b?g():Yh(g)}),a.augmentJob=g=>{e&&(g.flags|=4),p&&(g.flags|=2,h&&(g.id=h.uid,g.i=h))};const m=V1(n,e,a);return _l&&(c?c.push(m):l&&m()),m}function TE(n,e,t){const r=this.proxy,i=Sn(n)?n.includes(".")?Tw(r,n):()=>r[n]:n.bind(r,r);let s;ft(e)?s=e:(s=e.handler,t=e);const o=Ol(this),a=kw(i,s.bind(r),t);return o(),a}function Tw(n,e){const t=e.split(".");return()=>{let r=n;for(let i=0;i<t.length&&r;i++)r=r[t[i]];return r}}const IE=(n,e)=>e==="modelValue"||e==="model-value"?n.modelModifiers:n[`${e}Modifiers`]||n[`${Us(e)}Modifiers`]||n[`${Oo(e)}Modifiers`];function AE(n,e,...t){if(n.isUnmounted)return;const r=n.vnode.props||en;let i=t;const s=e.startsWith("update:"),o=s&&IE(r,e.slice(7));o&&(o.trim&&(i=t.map(h=>Sn(h)?h.trim():h)),o.number&&(i=t.map(Wu)));let a,l=r[a=ud(e)]||r[a=ud(Us(e))];!l&&s&&(l=r[a=ud(Oo(e))]),l&&$i(l,n,6,i);const c=r[a+"Once"];if(c){if(!n.emitted)n.emitted={};else if(n.emitted[a])return;n.emitted[a]=!0,$i(c,n,6,i)}}function Iw(n,e,t=!1){const r=e.emitsCache,i=r.get(n);if(i!==void 0)return i;const s=n.emits;let o={},a=!1;if(!ft(n)){const l=c=>{const h=Iw(c,e,!0);h&&(a=!0,gr(o,h))};!t&&e.mixins.length&&e.mixins.forEach(l),n.extends&&l(n.extends),n.mixins&&n.mixins.forEach(l)}return!s&&!a?(pn(n)&&r.set(n,null),null):(nt(s)?s.forEach(l=>o[l]=null):gr(o,s),pn(n)&&r.set(n,o),o)}function Rc(n,e){return!n||!Tc(e)?!1:(e=e.slice(2).replace(/Once$/,""),$t(n,e[0].toLowerCase()+e.slice(1))||$t(n,Oo(e))||$t(n,e))}function Jp(n){const{type:e,vnode:t,proxy:r,withProxy:i,propsOptions:[s],slots:o,attrs:a,emit:l,render:c,renderCache:h,props:p,data:m,setupState:g,ctx:b,inheritAttrs:E}=n,S=Qu(n);let O,U;try{if(t.shapeFlag&4){const V=i||r,K=V;O=Ii(c.call(K,V,h,p,g,m,b)),U=a}else{const V=e;O=Ii(V.length>1?V(p,{attrs:a,slots:o,emit:l}):V(p,null)),U=e.props?a:xE(a)}}catch(V){sl.length=0,Cc(V,n,1),O=Ln(Eo)}let D=O;if(U&&E!==!1){const V=Object.keys(U),{shapeFlag:K}=D;V.length&&K&7&&(s&&V.some(Vh)&&(U=CE(U,s)),D=_a(D,U,!1,!0))}return t.dirs&&(D=_a(D,null,!1,!0),D.dirs=D.dirs?D.dirs.concat(t.dirs):t.dirs),t.transition&&Xh(D,t.transition),O=D,Qu(S),O}const xE=n=>{let e;for(const t in n)(t==="class"||t==="style"||Tc(t))&&((e||(e={}))[t]=n[t]);return e},CE=(n,e)=>{const t={};for(const r in n)(!Vh(r)||!(r.slice(9)in e))&&(t[r]=n[r]);return t};function SE(n,e,t){const{props:r,children:i,component:s}=n,{props:o,children:a,patchFlag:l}=e,c=s.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&l>=0){if(l&1024)return!0;if(l&16)return r?em(r,o,c):!!o;if(l&8){const h=e.dynamicProps;for(let p=0;p<h.length;p++){const m=h[p];if(o[m]!==r[m]&&!Rc(c,m))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?em(r,o,c):!0:!!o;return!1}function em(n,e,t){const r=Object.keys(e);if(r.length!==Object.keys(n).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(e[s]!==n[s]&&!Rc(t,s))return!0}return!1}function RE({vnode:n,parent:e},t){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===n&&(r.el=n.el),r===n)(n=e.vnode).el=t,e=e.parent;else break}}const Aw=n=>n.__isSuspense;function PE(n,e){e&&e.pendingBranch?nt(n)?e.effects.push(...n):e.effects.push(n):$1(n)}const mn=Symbol.for("v-fgt"),Pc=Symbol.for("v-txt"),Eo=Symbol.for("v-cmt"),ku=Symbol.for("v-stc"),sl=[];let Or=null;function Me(n=!1){sl.push(Or=n?null:[])}function DE(){sl.pop(),Or=sl[sl.length-1]||null}let gl=1;function tm(n,e=!1){gl+=n,n<0&&Or&&e&&(Or.hasOnce=!0)}function xw(n){return n.dynamicChildren=gl>0?Or||aa:null,DE(),gl>0&&Or&&Or.push(n),n}function je(n,e,t,r,i,s){return xw(W(n,e,t,r,i,s,!0))}function Ai(n,e,t,r,i){return xw(Ln(n,e,t,r,i,!0))}function Cw(n){return n?n.__v_isVNode===!0:!1}function Ua(n,e){return n.type===e.type&&n.key===e.key}const Sw=({key:n})=>n??null,Tu=({ref:n,ref_key:e,ref_for:t})=>(typeof n=="number"&&(n=""+n),n!=null?Sn(n)||er(n)||ft(n)?{i:Hr,r:n,k:e,f:!!t}:n:null);function W(n,e=null,t=null,r=0,i=null,s=n===mn?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:n,props:e,key:e&&Sw(e),ref:e&&Tu(e),scopeId:tw,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Hr};return a?(ef(l,t),s&128&&n.normalize(l)):t&&(l.shapeFlag|=Sn(t)?8:16),gl>0&&!o&&Or&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&Or.push(l),l}const Ln=OE;function OE(n,e=null,t=null,r=0,i=null,s=!1){if((!n||n===nE)&&(n=Eo),Cw(n)){const a=_a(n,e,!0);return t&&ef(a,t),gl>0&&!s&&Or&&(a.shapeFlag&6?Or[Or.indexOf(n)]=a:Or.push(a)),a.patchFlag=-2,a}if(jE(n)&&(n=n.__vccOpts),e){e=NE(e);let{class:a,style:l}=e;a&&!Sn(a)&&(e.class=$h(a)),pn(l)&&(Qh(l)&&!nt(l)&&(l=gr({},l)),e.style=yo(l))}const o=Sn(n)?1:Aw(n)?128:z1(n)?64:pn(n)?4:ft(n)?2:0;return W(n,e,t,r,i,o,s,!0)}function NE(n){return n?Qh(n)||mw(n)?gr({},n):n:null}function _a(n,e,t=!1,r=!1){const{props:i,ref:s,patchFlag:o,children:a,transition:l}=n,c=e?LE(i||{},e):i,h={__v_isVNode:!0,__v_skip:!0,type:n.type,props:c,key:c&&Sw(c),ref:e&&e.ref?t&&s?nt(s)?s.concat(Tu(e)):[s,Tu(e)]:Tu(e):s,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:a,target:n.target,targetStart:n.targetStart,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:e&&n.type!==mn?o===-1?16:o|16:o,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:l,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&_a(n.ssContent),ssFallback:n.ssFallback&&_a(n.ssFallback),el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce};return l&&r&&Xh(h,l.clone(h)),h}function mo(n=" ",e=0){return Ln(Pc,null,n,e)}function Rw(n,e){const t=Ln(ku,null,n);return t.staticCount=e,t}function Ot(n="",e=!1){return e?(Me(),Ai(Eo,null,n)):Ln(Eo,null,n)}function Ii(n){return n==null||typeof n=="boolean"?Ln(Eo):nt(n)?Ln(mn,null,n.slice()):Cw(n)?ks(n):Ln(Pc,null,String(n))}function ks(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:_a(n)}function ef(n,e){let t=0;const{shapeFlag:r}=n;if(e==null)e=null;else if(nt(e))t=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),ef(n,i()),i._c&&(i._d=!0));return}else{t=32;const i=e._;!i&&!mw(e)?e._ctx=Hr:i===3&&Hr&&(Hr.slots._===1?e._=1:(e._=2,n.patchFlag|=1024))}else ft(e)?(e={default:e,_ctx:Hr},t=32):(e=String(e),r&64?(t=16,e=[mo(e)]):t=8);n.children=e,n.shapeFlag|=t}function LE(...n){const e={};for(let t=0;t<n.length;t++){const r=n[t];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=$h([e.class,r.class]));else if(i==="style")e.style=yo([e.style,r.style]);else if(Tc(i)){const s=e[i],o=r[i];o&&s!==o&&!(nt(s)&&s.includes(o))&&(e[i]=s?[].concat(s,o):o)}else i!==""&&(e[i]=r[i])}return e}function Ei(n,e,t,r=null){$i(n,e,7,[t,r])}const ME=hw();let VE=0;function UE(n,e,t){const r=n.type,i=(e?e.appContext:n.appContext)||ME,s={uid:VE++,vnode:n,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new u1(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:_w(r,i),emitsOptions:Iw(r,i),emit:null,emitted:null,propsDefaults:en,inheritAttrs:r.inheritAttrs,ctx:en,data:en,props:en,attrs:en,slots:en,refs:en,setupState:en,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=AE.bind(null,s),n.ce&&n.ce(s),s}let pr=null,Zu,rh;{const n=Ac(),e=(t,r)=>{let i;return(i=n[t])||(i=n[t]=[]),i.push(r),s=>{i.length>1?i.forEach(o=>o(s)):i[0](s)}};Zu=e("__VUE_INSTANCE_SETTERS__",t=>pr=t),rh=e("__VUE_SSR_SETTERS__",t=>_l=t)}const Ol=n=>{const e=pr;return Zu(n),n.scope.on(),()=>{n.scope.off(),Zu(e)}},nm=()=>{pr&&pr.scope.off(),Zu(null)};function Pw(n){return n.vnode.shapeFlag&4}let _l=!1;function FE(n,e=!1,t=!1){e&&rh(e);const{props:r,children:i}=n.vnode,s=Pw(n);hE(n,r,s,e),gE(n,i,t);const o=s?$E(n,e):void 0;return e&&rh(!1),o}function $E(n,e){const t=n.type;n.accessCache=Object.create(null),n.proxy=new Proxy(n.ctx,rE);const{setup:r}=t;if(r){Gs();const i=n.setupContext=r.length>1?zE(n):null,s=Ol(n),o=Dl(r,n,0,[n.props,i]),a=x_(o);if(Ks(),s(),(a||n.sp)&&!rl(n)&&sw(n),a){if(o.then(nm,nm),e)return o.then(l=>{rm(n,l)}).catch(l=>{Cc(l,n,0)});n.asyncDep=o}else rm(n,o)}else Dw(n)}function rm(n,e,t){ft(e)?n.type.__ssrInlineRender?n.ssrRender=e:n.render=e:pn(e)&&(n.setupState=Y_(e)),Dw(n)}function Dw(n,e,t){const r=n.type;n.render||(n.render=r.render||Ri);{const i=Ol(n);Gs();try{iE(n)}finally{Ks(),i()}}}const BE={get(n,e){return Xn(n,"get",""),n[e]}};function zE(n){const e=t=>{n.exposed=t||{}};return{attrs:new Proxy(n.attrs,BE),slots:n.slots,emit:n.emit,expose:e}}function Dc(n){return n.exposed?n.exposeProxy||(n.exposeProxy=new Proxy(Y_(R1(n.exposed)),{get(e,t){if(t in e)return e[t];if(t in il)return il[t](n)},has(e,t){return t in e||t in il}})):n.proxy}function jE(n){return ft(n)&&"__vccOpts"in n}const qE=(n,e)=>L1(n,e,_l),HE="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ih;const im=typeof window<"u"&&window.trustedTypes;if(im)try{ih=im.createPolicy("vue",{createHTML:n=>n})}catch{}const Ow=ih?n=>ih.createHTML(n):n=>n,WE="http://www.w3.org/2000/svg",GE="http://www.w3.org/1998/Math/MathML",Yi=typeof document<"u"?document:null,sm=Yi&&Yi.createElement("template"),KE={insert:(n,e,t)=>{e.insertBefore(n,t||null)},remove:n=>{const e=n.parentNode;e&&e.removeChild(n)},createElement:(n,e,t,r)=>{const i=e==="svg"?Yi.createElementNS(WE,n):e==="mathml"?Yi.createElementNS(GE,n):t?Yi.createElement(n,{is:t}):Yi.createElement(n);return n==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:n=>Yi.createTextNode(n),createComment:n=>Yi.createComment(n),setText:(n,e)=>{n.nodeValue=e},setElementText:(n,e)=>{n.textContent=e},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>Yi.querySelector(n),setScopeId(n,e){n.setAttribute(e,"")},insertStaticContent(n,e,t,r,i,s){const o=t?t.previousSibling:e.lastChild;if(i&&(i===s||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),t),!(i===s||!(i=i.nextSibling)););else{sm.innerHTML=Ow(r==="svg"?`<svg>${n}</svg>`:r==="mathml"?`<math>${n}</math>`:n);const a=sm.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,t)}return[o?o.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},QE=Symbol("_vtc");function YE(n,e,t){const r=n[QE];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?n.removeAttribute("class"):t?n.setAttribute("class",e):n.className=e}const om=Symbol("_vod"),XE=Symbol("_vsh"),ZE=Symbol(""),JE=/(^|;)\s*display\s*:/;function ek(n,e,t){const r=n.style,i=Sn(t);let s=!1;if(t&&!i){if(e)if(Sn(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();t[a]==null&&Iu(r,a,"")}else for(const o in e)t[o]==null&&Iu(r,o,"");for(const o in t)o==="display"&&(s=!0),Iu(r,o,t[o])}else if(i){if(e!==t){const o=r[ZE];o&&(t+=";"+o),r.cssText=t,s=JE.test(t)}}else e&&n.removeAttribute("style");om in n&&(n[om]=s?r.display:"",n[XE]&&(r.display="none"))}const am=/\s*!important$/;function Iu(n,e,t){if(nt(t))t.forEach(r=>Iu(n,e,r));else if(t==null&&(t=""),e.startsWith("--"))n.setProperty(e,t);else{const r=tk(n,e);am.test(t)?n.setProperty(Oo(r),t.replace(am,""),"important"):n[r]=t}}const lm=["Webkit","Moz","ms"],_d={};function tk(n,e){const t=_d[e];if(t)return t;let r=Us(e);if(r!=="filter"&&r in n)return _d[e]=r;r=R_(r);for(let i=0;i<lm.length;i++){const s=lm[i]+r;if(s in n)return _d[e]=s}return e}const um="http://www.w3.org/1999/xlink";function cm(n,e,t,r,i,s=a1(e)){r&&e.startsWith("xlink:")?t==null?n.removeAttributeNS(um,e.slice(6,e.length)):n.setAttributeNS(um,e,t):t==null||s&&!D_(t)?n.removeAttribute(e):n.setAttribute(e,s?"":Fi(t)?String(t):t)}function dm(n,e,t,r,i){if(e==="innerHTML"||e==="textContent"){t!=null&&(n[e]=e==="innerHTML"?Ow(t):t);return}const s=n.tagName;if(e==="value"&&s!=="PROGRESS"&&!s.includes("-")){const a=s==="OPTION"?n.getAttribute("value")||"":n.value,l=t==null?n.type==="checkbox"?"on":"":String(t);(a!==l||!("_value"in n))&&(n.value=l),t==null&&n.removeAttribute(e),n._value=t;return}let o=!1;if(t===""||t==null){const a=typeof n[e];a==="boolean"?t=D_(t):t==null&&a==="string"?(t="",o=!0):a==="number"&&(t=0,o=!0)}try{n[e]=t}catch{}o&&n.removeAttribute(i||e)}function Ts(n,e,t,r){n.addEventListener(e,t,r)}function nk(n,e,t,r){n.removeEventListener(e,t,r)}const hm=Symbol("_vei");function rk(n,e,t,r,i=null){const s=n[hm]||(n[hm]={}),o=s[e];if(r&&o)o.value=r;else{const[a,l]=ik(e);if(r){const c=s[e]=ak(r,i);Ts(n,a,c,l)}else o&&(nk(n,a,o,l),s[e]=void 0)}}const fm=/(?:Once|Passive|Capture)$/;function ik(n){let e;if(fm.test(n)){e={};let r;for(;r=n.match(fm);)n=n.slice(0,n.length-r[0].length),e[r[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):Oo(n.slice(2)),e]}let wd=0;const sk=Promise.resolve(),ok=()=>wd||(sk.then(()=>wd=0),wd=Date.now());function ak(n,e){const t=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=t.attached)return;$i(lk(r,t.value),e,5,[r])};return t.value=n,t.attached=ok(),t}function lk(n,e){if(nt(e)){const t=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{t.call(n),n._stopped=!0},e.map(r=>i=>!i._stopped&&r&&r(i))}else return e}const pm=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)>96&&n.charCodeAt(2)<123,uk=(n,e,t,r,i,s)=>{const o=i==="svg";e==="class"?YE(n,r,o):e==="style"?ek(n,t,r):Tc(e)?Vh(e)||rk(n,e,t,r,s):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):ck(n,e,r,o))?(dm(n,e,r),!n.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&cm(n,e,r,o,s,e!=="value")):n._isVueCE&&(/[A-Z]/.test(e)||!Sn(r))?dm(n,Us(e),r,s,e):(e==="true-value"?n._trueValue=r:e==="false-value"&&(n._falseValue=r),cm(n,e,r,o))};function ck(n,e,t,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in n&&pm(e)&&ft(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&n.tagName==="INPUT"||e==="type"&&n.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=n.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return pm(e)&&Sn(t)?!1:e in n}const wa=n=>{const e=n.props["onUpdate:modelValue"]||!1;return nt(e)?t=>yu(e,t):e};function dk(n){n.target.composing=!0}function mm(n){const e=n.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const ns=Symbol("_assign"),Gt={created(n,{modifiers:{lazy:e,trim:t,number:r}},i){n[ns]=wa(i);const s=r||i.props&&i.props.type==="number";Ts(n,e?"change":"input",o=>{if(o.target.composing)return;let a=n.value;t&&(a=a.trim()),s&&(a=Wu(a)),n[ns](a)}),t&&Ts(n,"change",()=>{n.value=n.value.trim()}),e||(Ts(n,"compositionstart",dk),Ts(n,"compositionend",mm),Ts(n,"change",mm))},mounted(n,{value:e}){n.value=e??""},beforeUpdate(n,{value:e,oldValue:t,modifiers:{lazy:r,trim:i,number:s}},o){if(n[ns]=wa(o),n.composing)return;const a=(s||n.type==="number")&&!/^0\d/.test(n.value)?Wu(n.value):n.value,l=e??"";a!==l&&(document.activeElement===n&&n.type!=="range"&&(r&&e===t||i&&n.value.trim()===l)||(n.value=l))}},Nr={deep:!0,created(n,e,t){n[ns]=wa(t),Ts(n,"change",()=>{const r=n._modelValue,i=wl(n),s=n.checked,o=n[ns];if(nt(r)){const a=Bh(r,i),l=a!==-1;if(s&&!l)o(r.concat(i));else if(!s&&l){const c=[...r];c.splice(a,1),o(c)}}else if(xa(r)){const a=new Set(r);s?a.add(i):a.delete(i),o(a)}else o(Nw(n,s))})},mounted:gm,beforeUpdate(n,e,t){n[ns]=wa(t),gm(n,e,t)}};function gm(n,{value:e,oldValue:t},r){n._modelValue=e;let i;if(nt(e))i=Bh(e,r.props.value)>-1;else if(xa(e))i=e.has(r.props.value);else{if(e===t)return;i=Pl(e,Nw(n,!0))}n.checked!==i&&(n.checked=i)}const Xi={deep:!0,created(n,{value:e,modifiers:{number:t}},r){const i=xa(e);Ts(n,"change",()=>{const s=Array.prototype.filter.call(n.options,o=>o.selected).map(o=>t?Wu(wl(o)):wl(o));n[ns](n.multiple?i?new Set(s):s:s[0]),n._assigning=!0,rs(()=>{n._assigning=!1})}),n[ns]=wa(r)},mounted(n,{value:e}){_m(n,e)},beforeUpdate(n,e,t){n[ns]=wa(t)},updated(n,{value:e}){n._assigning||_m(n,e)}};function _m(n,e){const t=n.multiple,r=nt(e);if(!(t&&!r&&!xa(e))){for(let i=0,s=n.options.length;i<s;i++){const o=n.options[i],a=wl(o);if(t)if(r){const l=typeof a;l==="string"||l==="number"?o.selected=e.some(c=>String(c)===String(a)):o.selected=Bh(e,a)>-1}else o.selected=e.has(a);else if(Pl(wl(o),e)){n.selectedIndex!==i&&(n.selectedIndex=i);return}}!t&&n.selectedIndex!==-1&&(n.selectedIndex=-1)}}function wl(n){return"_value"in n?n._value:n.value}function Nw(n,e){const t=e?"_trueValue":"_falseValue";return t in n?n[t]:e}const hk=["ctrl","shift","alt","meta"],fk={stop:n=>n.stopPropagation(),prevent:n=>n.preventDefault(),self:n=>n.target!==n.currentTarget,ctrl:n=>!n.ctrlKey,shift:n=>!n.shiftKey,alt:n=>!n.altKey,meta:n=>!n.metaKey,left:n=>"button"in n&&n.button!==0,middle:n=>"button"in n&&n.button!==1,right:n=>"button"in n&&n.button!==2,exact:(n,e)=>hk.some(t=>n[`${t}Key`]&&!e.includes(t))},vd=(n,e)=>{const t=n._withMods||(n._withMods={}),r=e.join(".");return t[r]||(t[r]=(i,...s)=>{for(let o=0;o<e.length;o++){const a=fk[e[o]];if(a&&a(i,e))return}return n(i,...s)})},pk=gr({patchProp:uk},KE);let wm;function mk(){return wm||(wm=wE(pk))}const gk=(...n)=>{const e=mk().createApp(...n),{mount:t}=e;return e.mount=r=>{const i=wk(r);if(!i)return;const s=e._component;!ft(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=t(i,!1,_k(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e};function _k(n){if(n instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&n instanceof MathMLElement)return"mathml"}function wk(n){return Sn(n)?document.querySelector(n):n}const vk=()=>{};var vm={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lw=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},yk=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=n[t++],o=n[t++],a=n[t++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Mw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],o=i+1<n.length,a=o?n[i+1]:0,l=i+2<n.length,c=l?n[i+2]:0,h=s>>2,p=(s&3)<<4|a>>4;let m=(a&15)<<2|c>>6,g=c&63;l||(g=64,o||(m=64)),r.push(t[h],t[p],t[m],t[g])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Lw(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):yk(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;const c=i<n.length?t[n.charAt(i)]:64;++i;const p=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||c==null||p==null)throw new bk;const m=s<<2|a>>4;if(r.push(m),c!==64){const g=a<<4&240|c>>2;if(r.push(g),p!==64){const b=c<<6&192|p;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class bk extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ek=function(n){const e=Lw(n);return Mw.encodeByteArray(e,!0)},Ju=function(n){return Ek(n).replace(/\./g,"")},Vw=function(n){try{return Mw.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kk(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tk=()=>kk().__FIREBASE_DEFAULTS__,Ik=()=>{if(typeof process>"u"||typeof vm>"u")return;const n=vm.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Ak=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Vw(n[1]);return e&&JSON.parse(e)},Oc=()=>{try{return vk()||Tk()||Ik()||Ak()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Uw=n=>{var e,t;return(t=(e=Oc())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Fw=n=>{const e=Uw(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},$w=()=>{var n;return(n=Oc())===null||n===void 0?void 0:n.config},Bw=n=>{var e;return(e=Oc())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zw(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Ju(JSON.stringify(t)),Ju(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Ck(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(tr())}function Sk(){var n;const e=(n=Oc())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Rk(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Pk(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Dk(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Ok(){const n=tr();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Nk(){return!Sk()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Lk(){try{return typeof indexedDB=="object"}catch{return!1}}function Mk(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vk="FirebaseError";class ji extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=Vk,Object.setPrototypeOf(this,ji.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Nl.prototype.create)}}class Nl{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?Uk(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new ji(i,a,r)}}function Uk(n,e){return n.replace(Fk,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const Fk=/\{\$([^}]+)}/g;function $k(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ko(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],o=e[i];if(ym(s)&&ym(o)){if(!ko(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function ym(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ll(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ga(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Ka(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function Bk(n,e){const t=new zk(n,e);return t.subscribe.bind(t)}class zk{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");jk(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=yd),i.error===void 0&&(i.error=yd),i.complete===void 0&&(i.complete=yd);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function jk(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function yd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tn(n){return n&&n._delegate?n._delegate:n}class Fs{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ho="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new xk;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Wk(e))try{this.getOrInitializeService({instanceIdentifier:ho})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=ho){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ho){return this.instances.has(e)}getOptions(e=ho){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Hk(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ho){return this.component?this.component.multipleInstances?e:ho:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Hk(n){return n===ho?void 0:n}function Wk(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new qk(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Tt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Tt||(Tt={}));const Kk={debug:Tt.DEBUG,verbose:Tt.VERBOSE,info:Tt.INFO,warn:Tt.WARN,error:Tt.ERROR,silent:Tt.SILENT},Qk=Tt.INFO,Yk={[Tt.DEBUG]:"log",[Tt.VERBOSE]:"log",[Tt.INFO]:"info",[Tt.WARN]:"warn",[Tt.ERROR]:"error"},Xk=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=Yk[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class tf{constructor(e){this.name=e,this._logLevel=Qk,this._logHandler=Xk,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Tt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Kk[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Tt.DEBUG,...e),this._logHandler(this,Tt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Tt.VERBOSE,...e),this._logHandler(this,Tt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Tt.INFO,...e),this._logHandler(this,Tt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Tt.WARN,...e),this._logHandler(this,Tt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Tt.ERROR,...e),this._logHandler(this,Tt.ERROR,...e)}}const Zk=(n,e)=>e.some(t=>n instanceof t);let bm,Em;function Jk(){return bm||(bm=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function eT(){return Em||(Em=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const jw=new WeakMap,sh=new WeakMap,qw=new WeakMap,bd=new WeakMap,nf=new WeakMap;function tT(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(Ns(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&jw.set(t,n)}).catch(()=>{}),nf.set(e,n),e}function nT(n){if(sh.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});sh.set(n,e)}let oh={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return sh.get(n);if(e==="objectStoreNames")return n.objectStoreNames||qw.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ns(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function rT(n){oh=n(oh)}function iT(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Ed(this),e,...t);return qw.set(r,e.sort?e.sort():[e]),Ns(r)}:eT().includes(n)?function(...e){return n.apply(Ed(this),e),Ns(jw.get(this))}:function(...e){return Ns(n.apply(Ed(this),e))}}function sT(n){return typeof n=="function"?iT(n):(n instanceof IDBTransaction&&nT(n),Zk(n,Jk())?new Proxy(n,oh):n)}function Ns(n){if(n instanceof IDBRequest)return tT(n);if(bd.has(n))return bd.get(n);const e=sT(n);return e!==n&&(bd.set(n,e),nf.set(e,n)),e}const Ed=n=>nf.get(n);function oT(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(n,e),a=Ns(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Ns(o.result),l.oldVersion,l.newVersion,Ns(o.transaction),l)}),t&&o.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const aT=["get","getKey","getAll","getAllKeys","count"],lT=["put","add","delete","clear"],kd=new Map;function km(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(kd.get(e))return kd.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=lT.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||aT.includes(t)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[t](...a),i&&l.done]))[0]};return kd.set(e,s),s}rT(n=>({...n,get:(e,t,r)=>km(e,t)||n.get(e,t,r),has:(e,t)=>!!km(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(cT(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function cT(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ah="@firebase/app",Tm="0.11.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const is=new tf("@firebase/app"),dT="@firebase/app-compat",hT="@firebase/analytics-compat",fT="@firebase/analytics",pT="@firebase/app-check-compat",mT="@firebase/app-check",gT="@firebase/auth",_T="@firebase/auth-compat",wT="@firebase/database",vT="@firebase/data-connect",yT="@firebase/database-compat",bT="@firebase/functions",ET="@firebase/functions-compat",kT="@firebase/installations",TT="@firebase/installations-compat",IT="@firebase/messaging",AT="@firebase/messaging-compat",xT="@firebase/performance",CT="@firebase/performance-compat",ST="@firebase/remote-config",RT="@firebase/remote-config-compat",PT="@firebase/storage",DT="@firebase/storage-compat",OT="@firebase/firestore",NT="@firebase/vertexai",LT="@firebase/firestore-compat",MT="firebase",VT="11.6.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lh="[DEFAULT]",UT={[ah]:"fire-core",[dT]:"fire-core-compat",[fT]:"fire-analytics",[hT]:"fire-analytics-compat",[mT]:"fire-app-check",[pT]:"fire-app-check-compat",[gT]:"fire-auth",[_T]:"fire-auth-compat",[wT]:"fire-rtdb",[vT]:"fire-data-connect",[yT]:"fire-rtdb-compat",[bT]:"fire-fn",[ET]:"fire-fn-compat",[kT]:"fire-iid",[TT]:"fire-iid-compat",[IT]:"fire-fcm",[AT]:"fire-fcm-compat",[xT]:"fire-perf",[CT]:"fire-perf-compat",[ST]:"fire-rc",[RT]:"fire-rc-compat",[PT]:"fire-gcs",[DT]:"fire-gcs-compat",[OT]:"fire-fst",[LT]:"fire-fst-compat",[NT]:"fire-vertex","fire-js":"fire-js",[MT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ec=new Map,FT=new Map,uh=new Map;function Im(n,e){try{n.container.addComponent(e)}catch(t){is.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function To(n){const e=n.name;if(uh.has(e))return is.debug(`There were multiple attempts to register component ${e}.`),!1;uh.set(e,n);for(const t of ec.values())Im(t,n);for(const t of FT.values())Im(t,n);return!0}function Nc(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Tr(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $T={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ls=new Nl("app","Firebase",$T);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Fs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ls.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const No=VT;function Hw(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:lh,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Ls.create("bad-app-name",{appName:String(i)});if(t||(t=$w()),!t)throw Ls.create("no-options");const s=ec.get(i);if(s){if(ko(t,s.options)&&ko(r,s.config))return s;throw Ls.create("duplicate-app",{appName:i})}const o=new Gk(i);for(const l of uh.values())o.addComponent(l);const a=new BT(t,r,o);return ec.set(i,a),a}function rf(n=lh){const e=ec.get(n);if(!e&&n===lh&&$w())return Hw();if(!e)throw Ls.create("no-app",{appName:n});return e}function Pi(n,e,t){var r;let i=(r=UT[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),is.warn(a.join(" "));return}To(new Fs(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zT="firebase-heartbeat-database",jT=1,vl="firebase-heartbeat-store";let Td=null;function Ww(){return Td||(Td=oT(zT,jT,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(vl)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ls.create("idb-open",{originalErrorMessage:n.message})})),Td}async function qT(n){try{const t=(await Ww()).transaction(vl),r=await t.objectStore(vl).get(Gw(n));return await t.done,r}catch(e){if(e instanceof ji)is.warn(e.message);else{const t=Ls.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});is.warn(t.message)}}}async function Am(n,e){try{const r=(await Ww()).transaction(vl,"readwrite");await r.objectStore(vl).put(e,Gw(n)),await r.done}catch(t){if(t instanceof ji)is.warn(t.message);else{const r=Ls.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});is.warn(r.message)}}}function Gw(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HT=1024,WT=30;class GT{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new QT(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=xm();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>WT){const o=YT(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){is.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=xm(),{heartbeatsToSend:r,unsentEntries:i}=KT(this._heartbeatsCache.heartbeats),s=Ju(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return is.warn(t),""}}}function xm(){return new Date().toISOString().substring(0,10)}function KT(n,e=HT){const t=[];let r=n.slice();for(const i of n){const s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Cm(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Cm(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class QT{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Lk()?Mk().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await qT(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return Am(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return Am(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Cm(n){return Ju(JSON.stringify({version:2,heartbeats:n})).length}function YT(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XT(n){To(new Fs("platform-logger",e=>new uT(e),"PRIVATE")),To(new Fs("heartbeat",e=>new GT(e),"PRIVATE")),Pi(ah,Tm,n),Pi(ah,Tm,"esm2017"),Pi("fire-js","")}XT("");function sf(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function Kw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ZT=Kw,Qw=new Nl("auth","Firebase",Kw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tc=new tf("@firebase/auth");function JT(n,...e){tc.logLevel<=Tt.WARN&&tc.warn(`Auth (${No}): ${n}`,...e)}function Au(n,...e){tc.logLevel<=Tt.ERROR&&tc.error(`Auth (${No}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ci(n,...e){throw of(n,...e)}function Di(n,...e){return of(n,...e)}function Yw(n,e,t){const r=Object.assign(Object.assign({},ZT()),{[e]:t});return new Nl("auth","Firebase",r).create(e,{appName:n.name})}function Oi(n){return Yw(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function of(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return Qw.create(n,...e)}function et(n,e,...t){if(!n)throw of(e,...t)}function es(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Au(e),new Error(e)}function ss(n,e){n||es(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ch(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function e2(){return Sm()==="http:"||Sm()==="https:"}function Sm(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(e2()||Pk()||"connection"in navigator)?navigator.onLine:!0}function n2(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(e,t){this.shortDelay=e,this.longDelay=t,ss(t>e,"Short delay should be less than long delay!"),this.isMobile=Ck()||Dk()}get(){return t2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function af(n,e){ss(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;es("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;es("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;es("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i2=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],s2=new Ml(3e4,6e4);function us(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function hi(n,e,t,r,i={}){return Zw(n,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Ll(Object.assign({key:n.config.apiKey},o)).slice(1),l=await n._getAdditionalHeaders();l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode);const c=Object.assign({method:e,headers:l},s);return Rk()||(c.referrerPolicy="no-referrer"),Xw.fetch()(await Jw(n,n.config.apiHost,t,a),c)})}async function Zw(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},r2),e);try{const i=new a2(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw ru(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw ru(n,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw ru(n,"email-already-in-use",o);if(l==="USER_DISABLED")throw ru(n,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Yw(n,h,c);ci(n,h)}}catch(i){if(i instanceof ji)throw i;ci(n,"network-request-failed",{message:String(i)})}}async function Vl(n,e,t,r,i={}){const s=await hi(n,e,t,r,i);return"mfaPendingCredential"in s&&ci(n,"multi-factor-auth-required",{_serverResponse:s}),s}async function Jw(n,e,t,r){const i=`${e}${t}?${r}`,s=n,o=s.config.emulator?af(n.config,i):`${n.config.apiScheme}://${i}`;return i2.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function o2(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class a2{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Di(this.auth,"network-request-failed")),s2.get())})}}function ru(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Di(n,e,r);return i.customData._tokenResponse=t,i}function Rm(n){return n!==void 0&&n.enterprise!==void 0}class l2{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return o2(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function u2(n,e){return hi(n,"GET","/v2/recaptchaConfig",us(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c2(n,e){return hi(n,"POST","/v1/accounts:delete",e)}async function nc(n,e){return hi(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ol(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function d2(n,e=!1){const t=tn(n),r=await t.getIdToken(e),i=lf(r);et(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:ol(Id(i.auth_time)),issuedAtTime:ol(Id(i.iat)),expirationTime:ol(Id(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Id(n){return Number(n)*1e3}function lf(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Au("JWT malformed, contained fewer than 3 sections"),null;try{const i=Vw(t);return i?JSON.parse(i):(Au("Failed to decode base64 JWT payload"),null)}catch(i){return Au("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Pm(n){const e=lf(n);return et(e,"internal-error"),et(typeof e.exp<"u","internal-error"),et(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Io(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof ji&&h2(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function h2({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ol(this.lastLoginAt),this.creationTime=ol(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rc(n){var e;const t=n.auth,r=await n.getIdToken(),i=await Io(n,nc(t,{idToken:r}));et(i==null?void 0:i.users.length,t,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?ev(s.providerUserInfo):[],a=m2(n.providerData,o),l=n.isAnonymous,c=!(n.email&&s.passwordHash)&&!(a!=null&&a.length),h=l?c:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new dh(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(n,p)}async function p2(n){const e=tn(n);await rc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function m2(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function ev(n){return n.map(e=>{var{providerId:t}=e,r=sf(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g2(n,e){const t=await Zw(n,{},async()=>{const r=Ll({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=await Jw(n,i,"/v1/token",`key=${s}`),a=await n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Xw.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function _2(n,e){return hi(n,"POST","/v2/accounts:revokeToken",us(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){et(e.idToken,"internal-error"),et(typeof e.idToken<"u","internal-error"),et(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Pm(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){et(e.length!==0,"internal-error");const t=Pm(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(et(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:s}=await g2(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new ha;return r&&(et(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(et(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(et(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ha,this.toJSON())}_performRefresh(){return es("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ys(n,e){et(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class li{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=sf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new f2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new dh(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Io(this,this.stsTokenManager.getToken(this.auth,e));return et(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return d2(this,e)}reload(){return p2(this)}_assign(e){this!==e&&(et(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new li(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){et(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await rc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Tr(this.auth.app))return Promise.reject(Oi(this.auth));const e=await this.getIdToken();return await Io(this,c2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,l,c,h;const p=(r=t.displayName)!==null&&r!==void 0?r:void 0,m=(i=t.email)!==null&&i!==void 0?i:void 0,g=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,b=(o=t.photoURL)!==null&&o!==void 0?o:void 0,E=(a=t.tenantId)!==null&&a!==void 0?a:void 0,S=(l=t._redirectEventId)!==null&&l!==void 0?l:void 0,O=(c=t.createdAt)!==null&&c!==void 0?c:void 0,U=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:D,emailVerified:V,isAnonymous:K,providerData:oe,stsTokenManager:L}=t;et(D&&L,e,"internal-error");const R=ha.fromJSON(this.name,L);et(typeof D=="string",e,"internal-error"),ys(p,e.name),ys(m,e.name),et(typeof V=="boolean",e,"internal-error"),et(typeof K=="boolean",e,"internal-error"),ys(g,e.name),ys(b,e.name),ys(E,e.name),ys(S,e.name),ys(O,e.name),ys(U,e.name);const N=new li({uid:D,auth:e,email:m,emailVerified:V,displayName:p,isAnonymous:K,photoURL:b,phoneNumber:g,tenantId:E,stsTokenManager:R,createdAt:O,lastLoginAt:U});return oe&&Array.isArray(oe)&&(N.providerData=oe.map(F=>Object.assign({},F))),S&&(N._redirectEventId=S),N}static async _fromIdTokenResponse(e,t,r=!1){const i=new ha;i.updateFromServerResponse(t);const s=new li({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await rc(s),s}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];et(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?ev(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new ha;a.updateFromIdToken(r);const l=new li({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new dh(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dm=new Map;function ts(n){ss(n instanceof Function,"Expected a class definition");let e=Dm.get(n);return e?(ss(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Dm.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tv{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}tv.type="NONE";const Om=tv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xu(n,e,t){return`firebase:${n}:${e}:${t}`}class fa{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=xu(this.userKey,i.apiKey,s),this.fullPersistenceKey=xu("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await nc(this.auth,{idToken:e}).catch(()=>{});return t?li._fromGetAccountInfoResponse(this.auth,t,e):null}return li._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new fa(ts(Om),e,r);const i=(await Promise.all(t.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||ts(Om);const o=xu(r,e.config.apiKey,e.name);let a=null;for(const c of t)try{const h=await c._get(o);if(h){let p;if(typeof h=="string"){const m=await nc(e,{idToken:h}).catch(()=>{});if(!m)break;p=await li._fromGetAccountInfoResponse(e,m,h)}else p=li._fromJSON(e,h);c!==s&&(a=p),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new fa(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(t.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new fa(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nm(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(sv(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(nv(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(av(e))return"Blackberry";if(lv(e))return"Webos";if(rv(e))return"Safari";if((e.includes("chrome/")||iv(e))&&!e.includes("edge/"))return"Chrome";if(ov(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function nv(n=tr()){return/firefox\//i.test(n)}function rv(n=tr()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function iv(n=tr()){return/crios\//i.test(n)}function sv(n=tr()){return/iemobile/i.test(n)}function ov(n=tr()){return/android/i.test(n)}function av(n=tr()){return/blackberry/i.test(n)}function lv(n=tr()){return/webos/i.test(n)}function uf(n=tr()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function w2(n=tr()){var e;return uf(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function v2(){return Ok()&&document.documentMode===10}function uv(n=tr()){return uf(n)||ov(n)||lv(n)||av(n)||/windows phone/i.test(n)||sv(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cv(n,e=[]){let t;switch(n){case"Browser":t=Nm(tr());break;case"Worker":t=`${Nm(tr())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${No}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b2(n,e={}){return hi(n,"GET","/v2/passwordPolicy",us(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E2=6;class k2{constructor(e){var t,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:E2,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(t=l.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Lm(this),this.idTokenSubscription=new Lm(this),this.beforeStateQueue=new y2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Qw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ts(t)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await fa.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await nc(this,{idToken:e}),r=await li._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Tr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return et(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await rc(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=n2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Tr(this.app))return Promise.reject(Oi(this));const t=e?tn(e):null;return t&&et(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&et(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Tr(this.app)?Promise.reject(Oi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Tr(this.app)?Promise.reject(Oi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ts(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await b2(this),t=new k2(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Nl("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await _2(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ts(e)||this._popupRedirectResolver;et(t,this,"argument-error"),this.redirectPersistenceManager=await fa.create(this,[ts(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(et(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){const l=e.addObserver(t,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(t);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return et(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=cv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(Tr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&JT(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Qs(n){return tn(n)}class Lm{constructor(e){this.auth=e,this.observer=null,this.addObserver=Bk(t=>this.observer=t)}get next(){return et(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function I2(n){Lc=n}function dv(n){return Lc.loadJS(n)}function A2(){return Lc.recaptchaEnterpriseScript}function x2(){return Lc.gapiScript}function C2(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class S2{constructor(){this.enterprise=new R2}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class R2{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const P2="recaptcha-enterprise",hv="NO_RECAPTCHA";class D2{constructor(e){this.type=P2,this.auth=Qs(e)}async verify(e="verify",t=!1){async function r(s){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{u2(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new l2(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;Rm(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(hv)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new S2().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(a=>{if(!t&&Rm(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=A2();l.length!==0&&(l+=a),dv(l).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function Mm(n,e,t,r=!1,i=!1){const s=new D2(n);let o;if(i)o=hv;else try{o=await s.verify(t)}catch{o=await s.verify(t,!0)}const a=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function ic(n,e,t,r,i){var s;if(!((s=n._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await Mm(n,e,t,t==="getOobCode");return r(n,o)}else return r(n,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await Mm(n,e,t,t==="getOobCode");return r(n,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O2(n,e){const t=Nc(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),s=t.getOptions();if(ko(s,e??{}))return i;ci(i,"already-initialized")}return t.initialize({options:e})}function N2(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(ts);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function L2(n,e,t){const r=Qs(n);et(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=fv(e),{host:o,port:a}=M2(e),l=a===null?"":`:${a}`,c={url:`${s}//${o}${l}/`},h=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){et(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),et(ko(c,r.config.emulator)&&ko(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=c,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,V2()}function fv(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function M2(n){const e=fv(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Vm(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:Vm(o)}}}function Vm(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function V2(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return es("not implemented")}_getIdTokenResponse(e){return es("not implemented")}_linkToIdToken(e,t){return es("not implemented")}_getReauthenticationResolver(e){return es("not implemented")}}async function U2(n,e){return hi(n,"POST","/v1/accounts:update",e)}async function F2(n,e){return hi(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $2(n,e){return Vl(n,"POST","/v1/accounts:signInWithPassword",us(n,e))}async function B2(n,e){return hi(n,"POST","/v1/accounts:sendOobCode",us(n,e))}async function z2(n,e){return B2(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j2(n,e){return Vl(n,"POST","/v1/accounts:signInWithEmailLink",us(n,e))}async function q2(n,e){return Vl(n,"POST","/v1/accounts:signInWithEmailLink",us(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl extends cf{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new yl(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new yl(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ic(e,t,"signInWithPassword",$2);case"emailLink":return j2(e,{email:this._email,oobCode:this._password});default:ci(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ic(e,r,"signUpPassword",F2);case"emailLink":return q2(e,{idToken:t,email:this._email,oobCode:this._password});default:ci(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pa(n,e){return Vl(n,"POST","/v1/accounts:signInWithIdp",us(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H2="http://localhost";class Ao extends cf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ao(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ci("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,s=sf(t,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Ao(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return pa(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,pa(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,pa(e,t)}buildRequest(){const e={requestUri:H2,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ll(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W2(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function G2(n){const e=Ga(Ka(n)).link,t=e?Ga(Ka(e)).deep_link_id:null,r=Ga(Ka(n)).deep_link_id;return(r?Ga(Ka(r)).link:null)||r||t||e||n}class df{constructor(e){var t,r,i,s,o,a;const l=Ga(Ka(e)),c=(t=l.apiKey)!==null&&t!==void 0?t:null,h=(r=l.oobCode)!==null&&r!==void 0?r:null,p=W2((i=l.mode)!==null&&i!==void 0?i:null);et(c&&h&&p,"argument-error"),this.apiKey=c,this.operation=p,this.code=h,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.lang)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const t=G2(e);try{return new df(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(){this.providerId=Ca.PROVIDER_ID}static credential(e,t){return yl._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=df.parseLink(t);return et(r,"argument-error"),yl._fromEmailAndCode(e,r.code,r.tenantId)}}Ca.PROVIDER_ID="password";Ca.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ca.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul extends pv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is extends Ul{constructor(){super("facebook.com")}static credential(e){return Ao._fromParams({providerId:Is.PROVIDER_ID,signInMethod:Is.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Is.credentialFromTaggedObject(e)}static credentialFromError(e){return Is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Is.credential(e.oauthAccessToken)}catch{return null}}}Is.FACEBOOK_SIGN_IN_METHOD="facebook.com";Is.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As extends Ul{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ao._fromParams({providerId:As.PROVIDER_ID,signInMethod:As.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return As.credentialFromTaggedObject(e)}static credentialFromError(e){return As.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return As.credential(t,r)}catch{return null}}}As.GOOGLE_SIGN_IN_METHOD="google.com";As.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs extends Ul{constructor(){super("github.com")}static credential(e){return Ao._fromParams({providerId:xs.PROVIDER_ID,signInMethod:xs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return xs.credentialFromTaggedObject(e)}static credentialFromError(e){return xs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return xs.credential(e.oauthAccessToken)}catch{return null}}}xs.GITHUB_SIGN_IN_METHOD="github.com";xs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs extends Ul{constructor(){super("twitter.com")}static credential(e,t){return Ao._fromParams({providerId:Cs.PROVIDER_ID,signInMethod:Cs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Cs.credentialFromTaggedObject(e)}static credentialFromError(e){return Cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Cs.credential(t,r)}catch{return null}}}Cs.TWITTER_SIGN_IN_METHOD="twitter.com";Cs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K2(n,e){return Vl(n,"POST","/v1/accounts:signUp",us(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const s=await li._fromIdTokenResponse(e,r,i),o=Um(r);return new xo({user:s,providerId:o,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=Um(r);return new xo({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function Um(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc extends ji{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,sc.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new sc(e,t,r,i)}}function mv(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?sc._fromErrorAndOperation(n,s,e,r):s})}async function Q2(n,e,t=!1){const r=await Io(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return xo._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y2(n,e,t=!1){const{auth:r}=n;if(Tr(r.app))return Promise.reject(Oi(r));const i="reauthenticate";try{const s=await Io(n,mv(r,i,e,n),t);et(s.idToken,r,"internal-error");const o=lf(s.idToken);et(o,r,"internal-error");const{sub:a}=o;return et(n.uid===a,r,"user-mismatch"),xo._forOperation(n,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&ci(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gv(n,e,t=!1){if(Tr(n.app))return Promise.reject(Oi(n));const r="signIn",i=await mv(n,r,e),s=await xo._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}async function X2(n,e){return gv(Qs(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _v(n){const e=Qs(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Z2(n,e,t){const r=Qs(n);await ic(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",z2)}async function J2(n,e,t){if(Tr(n.app))return Promise.reject(Oi(n));const r=Qs(n),o=await ic(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",K2).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&_v(n),l}),a=await xo._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function eI(n,e,t){return Tr(n.app)?Promise.reject(Oi(n)):X2(tn(n),Ca.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&_v(n),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tI(n,e){return hi(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wv(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=tn(n),s={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},o=await Io(r,tI(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function nI(n,e){const t=tn(n);return Tr(t.auth.app)?Promise.reject(Oi(t.auth)):vv(t,e,null)}function rI(n,e){return vv(tn(n),null,e)}async function vv(n,e,t){const{auth:r}=n,s={idToken:await n.getIdToken(),returnSecureToken:!0};e&&(s.email=e),t&&(s.password=t);const o=await Io(n,U2(r,s));await n._updateTokensIfNecessary(o,!0)}function iI(n,e,t,r){return tn(n).onIdTokenChanged(e,t,r)}function sI(n,e,t){return tn(n).beforeAuthStateChanged(e,t)}function oI(n,e,t,r){return tn(n).onAuthStateChanged(e,t,r)}function aI(n){return tn(n).signOut()}async function lI(n){return tn(n).delete()}const oc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yv{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(oc,"1"),this.storage.removeItem(oc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uI=1e3,cI=10;class bv extends yv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=uv(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!t&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);v2()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,cI):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},uI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}bv.type="LOCAL";const dI=bv;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ev extends yv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Ev.type="SESSION";const kv=Ev;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hI(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new Mc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:s}=t.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(t.origin,s)),l=await hI(a);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Mc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hf(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=hf("",20);i.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){const m=p;if(m.data.eventId===c)switch(m.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(m.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ni(){return window}function pI(n){Ni().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tv(){return typeof Ni().WorkerGlobalScope<"u"&&typeof Ni().importScripts=="function"}async function mI(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function gI(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function _I(){return Tv()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iv="firebaseLocalStorageDb",wI=1,ac="firebaseLocalStorage",Av="fbase_key";class Fl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Vc(n,e){return n.transaction([ac],e?"readwrite":"readonly").objectStore(ac)}function vI(){const n=indexedDB.deleteDatabase(Iv);return new Fl(n).toPromise()}function hh(){const n=indexedDB.open(Iv,wI);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(ac,{keyPath:Av})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(ac)?e(r):(r.close(),await vI(),e(await hh()))})})}async function Fm(n,e,t){const r=Vc(n,!0).put({[Av]:e,value:t});return new Fl(r).toPromise()}async function yI(n,e){const t=Vc(n,!1).get(e),r=await new Fl(t).toPromise();return r===void 0?null:r.value}function $m(n,e){const t=Vc(n,!0).delete(e);return new Fl(t).toPromise()}const bI=800,EI=3;class xv{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await hh(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>EI)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Tv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Mc._getInstance(_I()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await mI(),!this.activeServiceWorker)return;this.sender=new fI(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||gI()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await hh();return await Fm(e,oc,"1"),await $m(e,oc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>Fm(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>yI(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>$m(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Vc(i,!1).getAll();return new Fl(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),bI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}xv.type="LOCAL";const kI=xv;new Ml(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TI(n,e){return e?ts(e):(et(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ff extends cf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return pa(e,this._buildIdpRequest())}_linkToIdToken(e,t){return pa(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return pa(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function II(n){return gv(n.auth,new ff(n),n.bypassAuthState)}function AI(n){const{auth:e,user:t}=n;return et(t,e,"internal-error"),Y2(t,new ff(n),n.bypassAuthState)}async function xI(n){const{auth:e,user:t}=n;return et(t,e,"internal-error"),Q2(t,new ff(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cv{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return II;case"linkViaPopup":case"linkViaRedirect":return xI;case"reauthViaPopup":case"reauthViaRedirect":return AI;default:ci(this.auth,"internal-error")}}resolve(e){ss(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ss(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CI=new Ml(2e3,1e4);class oa extends Cv{constructor(e,t,r,i,s){super(e,t,i,s),this.provider=r,this.authWindow=null,this.pollId=null,oa.currentPopupAction&&oa.currentPopupAction.cancel(),oa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return et(e,this.auth,"internal-error"),e}async onExecution(){ss(this.filter.length===1,"Popup operations only handle one event");const e=hf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Di(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Di(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,oa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Di(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,CI.get())};e()}}oa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SI="pendingRedirect",Cu=new Map;class RI extends Cv{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Cu.get(this.auth._key());if(!e){try{const r=await PI(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Cu.set(this.auth._key(),e)}return this.bypassAuthState||Cu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function PI(n,e){const t=NI(e),r=OI(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function DI(n,e){Cu.set(n._key(),e)}function OI(n){return ts(n._redirectPersistence)}function NI(n){return xu(SI,n.config.apiKey,n.name)}async function LI(n,e,t=!1){if(Tr(n.app))return Promise.reject(Oi(n));const r=Qs(n),i=TI(r,e),o=await new RI(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MI=10*60*1e3;class VI{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!UI(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!Sv(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Di(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=MI&&this.cachedEventUids.clear(),this.cachedEventUids.has(Bm(e))}saveEventToCache(e){this.cachedEventUids.add(Bm(e)),this.lastProcessedEventTime=Date.now()}}function Bm(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Sv({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function UI(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Sv(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FI(n,e={}){return hi(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $I=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,BI=/^https?/;async function zI(n){if(n.config.emulator)return;const{authorizedDomains:e}=await FI(n);for(const t of e)try{if(jI(t))return}catch{}ci(n,"unauthorized-domain")}function jI(n){const e=ch(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!BI.test(t))return!1;if($I.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qI=new Ml(3e4,6e4);function zm(){const n=Ni().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function HI(n){return new Promise((e,t)=>{var r,i,s;function o(){zm(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{zm(),t(Di(n,"network-request-failed"))},timeout:qI.get()})}if(!((i=(r=Ni().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Ni().gapi)===null||s===void 0)&&s.load)o();else{const a=C2("iframefcb");return Ni()[a]=()=>{gapi.load?o():t(Di(n,"network-request-failed"))},dv(`${x2()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw Su=null,e})}let Su=null;function WI(n){return Su=Su||HI(n),Su}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GI=new Ml(5e3,15e3),KI="__/auth/iframe",QI="emulator/auth/iframe",YI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},XI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ZI(n){const e=n.config;et(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?af(e,QI):`https://${n.config.authDomain}/${KI}`,r={apiKey:e.apiKey,appName:n.name,v:No},i=XI.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${Ll(r).slice(1)}`}async function JI(n){const e=await WI(n),t=Ni().gapi;return et(t,n,"internal-error"),e.open({where:document.body,url:ZI(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:YI,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Di(n,"network-request-failed"),a=Ni().setTimeout(()=>{s(o)},GI.get());function l(){Ni().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eA={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},tA=500,nA=600,rA="_blank",iA="http://localhost";class jm{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function sA(n,e,t,r=tA,i=nA){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},eA),{width:r.toString(),height:i.toString(),top:s,left:o}),c=tr().toLowerCase();t&&(a=iv(c)?rA:t),nv(c)&&(e=e||iA,l.scrollbars="yes");const h=Object.entries(l).reduce((m,[g,b])=>`${m}${g}=${b},`,"");if(w2(c)&&a!=="_self")return oA(e||"",a),new jm(null);const p=window.open(e||"",a,h);et(p,n,"popup-blocked");try{p.focus()}catch{}return new jm(p)}function oA(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aA="__/auth/handler",lA="emulator/auth/handler",uA=encodeURIComponent("fac");async function qm(n,e,t,r,i,s){et(n.config.authDomain,n,"auth-domain-config-required"),et(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:No,eventId:i};if(e instanceof pv){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",$k(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,p]of Object.entries({}))o[h]=p}if(e instanceof Ul){const h=e.getScopes().filter(p=>p!=="");h.length>0&&(o.scopes=h.join(","))}n.tenantId&&(o.tid=n.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await n._getAppCheckToken(),c=l?`#${uA}=${encodeURIComponent(l)}`:"";return`${cA(n)}?${Ll(a).slice(1)}${c}`}function cA({config:n}){return n.emulator?af(n,lA):`https://${n.authDomain}/${aA}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ad="webStorageSupport";class dA{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=kv,this._completeRedirectFn=LI,this._overrideRedirectResult=DI}async _openPopup(e,t,r,i){var s;ss((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await qm(e,t,r,ch(),i);return sA(e,o,hf())}async _openRedirect(e,t,r,i){await this._originValidation(e);const s=await qm(e,t,r,ch(),i);return pI(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(ss(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await JI(e),r=new VI(e);return t.register("authEvent",i=>(et(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ad,{type:Ad},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Ad];o!==void 0&&t(!!o),ci(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=zI(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return uv()||rv()||uf()}}const hA=dA;var Hm="@firebase/auth",Wm="1.10.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){et(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pA(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function mA(n){To(new Fs("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;et(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:cv(n)},c=new T2(r,i,s,l);return N2(c,t),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),To(new Fs("auth-internal",e=>{const t=Qs(e.getProvider("auth").getImmediate());return(r=>new fA(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Pi(Hm,Wm,pA(n)),Pi(Hm,Wm,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gA=5*60,_A=Bw("authIdTokenMaxAge")||gA;let Gm=null;const wA=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>_A)return;const i=t==null?void 0:t.token;Gm!==i&&(Gm=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function vA(n=rf()){const e=Nc(n,"auth");if(e.isInitialized())return e.getImmediate();const t=O2(n,{popupRedirectResolver:hA,persistence:[kI,dI,kv]}),r=Bw("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=wA(s.toString());sI(t,o,()=>o(t.currentUser)),iI(t,a=>o(a))}}const i=Uw("auth");return i&&L2(t,`http://${i}`),t}function yA(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}I2({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=Di("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",yA().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});mA("Browser");var Km=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ms,Rv;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(L,R){function N(){}N.prototype=R.prototype,L.D=R.prototype,L.prototype=new N,L.prototype.constructor=L,L.C=function(F,z,C){for(var P=Array(arguments.length-2),x=2;x<arguments.length;x++)P[x-2]=arguments[x];return R.prototype[z].apply(F,P)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(L,R,N){N||(N=0);var F=Array(16);if(typeof R=="string")for(var z=0;16>z;++z)F[z]=R.charCodeAt(N++)|R.charCodeAt(N++)<<8|R.charCodeAt(N++)<<16|R.charCodeAt(N++)<<24;else for(z=0;16>z;++z)F[z]=R[N++]|R[N++]<<8|R[N++]<<16|R[N++]<<24;R=L.g[0],N=L.g[1],z=L.g[2];var C=L.g[3],P=R+(C^N&(z^C))+F[0]+3614090360&4294967295;R=N+(P<<7&4294967295|P>>>25),P=C+(z^R&(N^z))+F[1]+3905402710&4294967295,C=R+(P<<12&4294967295|P>>>20),P=z+(N^C&(R^N))+F[2]+606105819&4294967295,z=C+(P<<17&4294967295|P>>>15),P=N+(R^z&(C^R))+F[3]+3250441966&4294967295,N=z+(P<<22&4294967295|P>>>10),P=R+(C^N&(z^C))+F[4]+4118548399&4294967295,R=N+(P<<7&4294967295|P>>>25),P=C+(z^R&(N^z))+F[5]+1200080426&4294967295,C=R+(P<<12&4294967295|P>>>20),P=z+(N^C&(R^N))+F[6]+2821735955&4294967295,z=C+(P<<17&4294967295|P>>>15),P=N+(R^z&(C^R))+F[7]+4249261313&4294967295,N=z+(P<<22&4294967295|P>>>10),P=R+(C^N&(z^C))+F[8]+1770035416&4294967295,R=N+(P<<7&4294967295|P>>>25),P=C+(z^R&(N^z))+F[9]+2336552879&4294967295,C=R+(P<<12&4294967295|P>>>20),P=z+(N^C&(R^N))+F[10]+4294925233&4294967295,z=C+(P<<17&4294967295|P>>>15),P=N+(R^z&(C^R))+F[11]+2304563134&4294967295,N=z+(P<<22&4294967295|P>>>10),P=R+(C^N&(z^C))+F[12]+1804603682&4294967295,R=N+(P<<7&4294967295|P>>>25),P=C+(z^R&(N^z))+F[13]+4254626195&4294967295,C=R+(P<<12&4294967295|P>>>20),P=z+(N^C&(R^N))+F[14]+2792965006&4294967295,z=C+(P<<17&4294967295|P>>>15),P=N+(R^z&(C^R))+F[15]+1236535329&4294967295,N=z+(P<<22&4294967295|P>>>10),P=R+(z^C&(N^z))+F[1]+4129170786&4294967295,R=N+(P<<5&4294967295|P>>>27),P=C+(N^z&(R^N))+F[6]+3225465664&4294967295,C=R+(P<<9&4294967295|P>>>23),P=z+(R^N&(C^R))+F[11]+643717713&4294967295,z=C+(P<<14&4294967295|P>>>18),P=N+(C^R&(z^C))+F[0]+3921069994&4294967295,N=z+(P<<20&4294967295|P>>>12),P=R+(z^C&(N^z))+F[5]+3593408605&4294967295,R=N+(P<<5&4294967295|P>>>27),P=C+(N^z&(R^N))+F[10]+38016083&4294967295,C=R+(P<<9&4294967295|P>>>23),P=z+(R^N&(C^R))+F[15]+3634488961&4294967295,z=C+(P<<14&4294967295|P>>>18),P=N+(C^R&(z^C))+F[4]+3889429448&4294967295,N=z+(P<<20&4294967295|P>>>12),P=R+(z^C&(N^z))+F[9]+568446438&4294967295,R=N+(P<<5&4294967295|P>>>27),P=C+(N^z&(R^N))+F[14]+3275163606&4294967295,C=R+(P<<9&4294967295|P>>>23),P=z+(R^N&(C^R))+F[3]+4107603335&4294967295,z=C+(P<<14&4294967295|P>>>18),P=N+(C^R&(z^C))+F[8]+1163531501&4294967295,N=z+(P<<20&4294967295|P>>>12),P=R+(z^C&(N^z))+F[13]+2850285829&4294967295,R=N+(P<<5&4294967295|P>>>27),P=C+(N^z&(R^N))+F[2]+4243563512&4294967295,C=R+(P<<9&4294967295|P>>>23),P=z+(R^N&(C^R))+F[7]+1735328473&4294967295,z=C+(P<<14&4294967295|P>>>18),P=N+(C^R&(z^C))+F[12]+2368359562&4294967295,N=z+(P<<20&4294967295|P>>>12),P=R+(N^z^C)+F[5]+4294588738&4294967295,R=N+(P<<4&4294967295|P>>>28),P=C+(R^N^z)+F[8]+2272392833&4294967295,C=R+(P<<11&4294967295|P>>>21),P=z+(C^R^N)+F[11]+1839030562&4294967295,z=C+(P<<16&4294967295|P>>>16),P=N+(z^C^R)+F[14]+4259657740&4294967295,N=z+(P<<23&4294967295|P>>>9),P=R+(N^z^C)+F[1]+2763975236&4294967295,R=N+(P<<4&4294967295|P>>>28),P=C+(R^N^z)+F[4]+1272893353&4294967295,C=R+(P<<11&4294967295|P>>>21),P=z+(C^R^N)+F[7]+4139469664&4294967295,z=C+(P<<16&4294967295|P>>>16),P=N+(z^C^R)+F[10]+3200236656&4294967295,N=z+(P<<23&4294967295|P>>>9),P=R+(N^z^C)+F[13]+681279174&4294967295,R=N+(P<<4&4294967295|P>>>28),P=C+(R^N^z)+F[0]+3936430074&4294967295,C=R+(P<<11&4294967295|P>>>21),P=z+(C^R^N)+F[3]+3572445317&4294967295,z=C+(P<<16&4294967295|P>>>16),P=N+(z^C^R)+F[6]+76029189&4294967295,N=z+(P<<23&4294967295|P>>>9),P=R+(N^z^C)+F[9]+3654602809&4294967295,R=N+(P<<4&4294967295|P>>>28),P=C+(R^N^z)+F[12]+3873151461&4294967295,C=R+(P<<11&4294967295|P>>>21),P=z+(C^R^N)+F[15]+530742520&4294967295,z=C+(P<<16&4294967295|P>>>16),P=N+(z^C^R)+F[2]+3299628645&4294967295,N=z+(P<<23&4294967295|P>>>9),P=R+(z^(N|~C))+F[0]+4096336452&4294967295,R=N+(P<<6&4294967295|P>>>26),P=C+(N^(R|~z))+F[7]+1126891415&4294967295,C=R+(P<<10&4294967295|P>>>22),P=z+(R^(C|~N))+F[14]+2878612391&4294967295,z=C+(P<<15&4294967295|P>>>17),P=N+(C^(z|~R))+F[5]+4237533241&4294967295,N=z+(P<<21&4294967295|P>>>11),P=R+(z^(N|~C))+F[12]+1700485571&4294967295,R=N+(P<<6&4294967295|P>>>26),P=C+(N^(R|~z))+F[3]+2399980690&4294967295,C=R+(P<<10&4294967295|P>>>22),P=z+(R^(C|~N))+F[10]+4293915773&4294967295,z=C+(P<<15&4294967295|P>>>17),P=N+(C^(z|~R))+F[1]+2240044497&4294967295,N=z+(P<<21&4294967295|P>>>11),P=R+(z^(N|~C))+F[8]+1873313359&4294967295,R=N+(P<<6&4294967295|P>>>26),P=C+(N^(R|~z))+F[15]+4264355552&4294967295,C=R+(P<<10&4294967295|P>>>22),P=z+(R^(C|~N))+F[6]+2734768916&4294967295,z=C+(P<<15&4294967295|P>>>17),P=N+(C^(z|~R))+F[13]+1309151649&4294967295,N=z+(P<<21&4294967295|P>>>11),P=R+(z^(N|~C))+F[4]+4149444226&4294967295,R=N+(P<<6&4294967295|P>>>26),P=C+(N^(R|~z))+F[11]+3174756917&4294967295,C=R+(P<<10&4294967295|P>>>22),P=z+(R^(C|~N))+F[2]+718787259&4294967295,z=C+(P<<15&4294967295|P>>>17),P=N+(C^(z|~R))+F[9]+3951481745&4294967295,L.g[0]=L.g[0]+R&4294967295,L.g[1]=L.g[1]+(z+(P<<21&4294967295|P>>>11))&4294967295,L.g[2]=L.g[2]+z&4294967295,L.g[3]=L.g[3]+C&4294967295}r.prototype.u=function(L,R){R===void 0&&(R=L.length);for(var N=R-this.blockSize,F=this.B,z=this.h,C=0;C<R;){if(z==0)for(;C<=N;)i(this,L,C),C+=this.blockSize;if(typeof L=="string"){for(;C<R;)if(F[z++]=L.charCodeAt(C++),z==this.blockSize){i(this,F),z=0;break}}else for(;C<R;)if(F[z++]=L[C++],z==this.blockSize){i(this,F),z=0;break}}this.h=z,this.o+=R},r.prototype.v=function(){var L=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);L[0]=128;for(var R=1;R<L.length-8;++R)L[R]=0;var N=8*this.o;for(R=L.length-8;R<L.length;++R)L[R]=N&255,N/=256;for(this.u(L),L=Array(16),R=N=0;4>R;++R)for(var F=0;32>F;F+=8)L[N++]=this.g[R]>>>F&255;return L};function s(L,R){var N=a;return Object.prototype.hasOwnProperty.call(N,L)?N[L]:N[L]=R(L)}function o(L,R){this.h=R;for(var N=[],F=!0,z=L.length-1;0<=z;z--){var C=L[z]|0;F&&C==R||(N[z]=C,F=!1)}this.g=N}var a={};function l(L){return-128<=L&&128>L?s(L,function(R){return new o([R|0],0>R?-1:0)}):new o([L|0],0>L?-1:0)}function c(L){if(isNaN(L)||!isFinite(L))return p;if(0>L)return S(c(-L));for(var R=[],N=1,F=0;L>=N;F++)R[F]=L/N|0,N*=4294967296;return new o(R,0)}function h(L,R){if(L.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(L.charAt(0)=="-")return S(h(L.substring(1),R));if(0<=L.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=c(Math.pow(R,8)),F=p,z=0;z<L.length;z+=8){var C=Math.min(8,L.length-z),P=parseInt(L.substring(z,z+C),R);8>C?(C=c(Math.pow(R,C)),F=F.j(C).add(c(P))):(F=F.j(N),F=F.add(c(P)))}return F}var p=l(0),m=l(1),g=l(16777216);n=o.prototype,n.m=function(){if(E(this))return-S(this).m();for(var L=0,R=1,N=0;N<this.g.length;N++){var F=this.i(N);L+=(0<=F?F:4294967296+F)*R,R*=4294967296}return L},n.toString=function(L){if(L=L||10,2>L||36<L)throw Error("radix out of range: "+L);if(b(this))return"0";if(E(this))return"-"+S(this).toString(L);for(var R=c(Math.pow(L,6)),N=this,F="";;){var z=V(N,R).g;N=O(N,z.j(R));var C=((0<N.g.length?N.g[0]:N.h)>>>0).toString(L);if(N=z,b(N))return C+F;for(;6>C.length;)C="0"+C;F=C+F}},n.i=function(L){return 0>L?0:L<this.g.length?this.g[L]:this.h};function b(L){if(L.h!=0)return!1;for(var R=0;R<L.g.length;R++)if(L.g[R]!=0)return!1;return!0}function E(L){return L.h==-1}n.l=function(L){return L=O(this,L),E(L)?-1:b(L)?0:1};function S(L){for(var R=L.g.length,N=[],F=0;F<R;F++)N[F]=~L.g[F];return new o(N,~L.h).add(m)}n.abs=function(){return E(this)?S(this):this},n.add=function(L){for(var R=Math.max(this.g.length,L.g.length),N=[],F=0,z=0;z<=R;z++){var C=F+(this.i(z)&65535)+(L.i(z)&65535),P=(C>>>16)+(this.i(z)>>>16)+(L.i(z)>>>16);F=P>>>16,C&=65535,P&=65535,N[z]=P<<16|C}return new o(N,N[N.length-1]&-2147483648?-1:0)};function O(L,R){return L.add(S(R))}n.j=function(L){if(b(this)||b(L))return p;if(E(this))return E(L)?S(this).j(S(L)):S(S(this).j(L));if(E(L))return S(this.j(S(L)));if(0>this.l(g)&&0>L.l(g))return c(this.m()*L.m());for(var R=this.g.length+L.g.length,N=[],F=0;F<2*R;F++)N[F]=0;for(F=0;F<this.g.length;F++)for(var z=0;z<L.g.length;z++){var C=this.i(F)>>>16,P=this.i(F)&65535,x=L.i(z)>>>16,ue=L.i(z)&65535;N[2*F+2*z]+=P*ue,U(N,2*F+2*z),N[2*F+2*z+1]+=C*ue,U(N,2*F+2*z+1),N[2*F+2*z+1]+=P*x,U(N,2*F+2*z+1),N[2*F+2*z+2]+=C*x,U(N,2*F+2*z+2)}for(F=0;F<R;F++)N[F]=N[2*F+1]<<16|N[2*F];for(F=R;F<2*R;F++)N[F]=0;return new o(N,0)};function U(L,R){for(;(L[R]&65535)!=L[R];)L[R+1]+=L[R]>>>16,L[R]&=65535,R++}function D(L,R){this.g=L,this.h=R}function V(L,R){if(b(R))throw Error("division by zero");if(b(L))return new D(p,p);if(E(L))return R=V(S(L),R),new D(S(R.g),S(R.h));if(E(R))return R=V(L,S(R)),new D(S(R.g),R.h);if(30<L.g.length){if(E(L)||E(R))throw Error("slowDivide_ only works with positive integers.");for(var N=m,F=R;0>=F.l(L);)N=K(N),F=K(F);var z=oe(N,1),C=oe(F,1);for(F=oe(F,2),N=oe(N,2);!b(F);){var P=C.add(F);0>=P.l(L)&&(z=z.add(N),C=P),F=oe(F,1),N=oe(N,1)}return R=O(L,z.j(R)),new D(z,R)}for(z=p;0<=L.l(R);){for(N=Math.max(1,Math.floor(L.m()/R.m())),F=Math.ceil(Math.log(N)/Math.LN2),F=48>=F?1:Math.pow(2,F-48),C=c(N),P=C.j(R);E(P)||0<P.l(L);)N-=F,C=c(N),P=C.j(R);b(C)&&(C=m),z=z.add(C),L=O(L,P)}return new D(z,L)}n.A=function(L){return V(this,L).h},n.and=function(L){for(var R=Math.max(this.g.length,L.g.length),N=[],F=0;F<R;F++)N[F]=this.i(F)&L.i(F);return new o(N,this.h&L.h)},n.or=function(L){for(var R=Math.max(this.g.length,L.g.length),N=[],F=0;F<R;F++)N[F]=this.i(F)|L.i(F);return new o(N,this.h|L.h)},n.xor=function(L){for(var R=Math.max(this.g.length,L.g.length),N=[],F=0;F<R;F++)N[F]=this.i(F)^L.i(F);return new o(N,this.h^L.h)};function K(L){for(var R=L.g.length+1,N=[],F=0;F<R;F++)N[F]=L.i(F)<<1|L.i(F-1)>>>31;return new o(N,L.h)}function oe(L,R){var N=R>>5;R%=32;for(var F=L.g.length-N,z=[],C=0;C<F;C++)z[C]=0<R?L.i(C+N)>>>R|L.i(C+N+1)<<32-R:L.i(C+N);return new o(z,L.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Rv=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,Ms=o}).apply(typeof Km<"u"?Km:typeof self<"u"?self:typeof window<"u"?window:{});var iu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Pv,Qa,Dv,Ru,fh,Ov,Nv,Lv;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,y,T){return u==Array.prototype||u==Object.prototype||(u[y]=T.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof iu=="object"&&iu];for(var y=0;y<u.length;++y){var T=u[y];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var r=t(this);function i(u,y){if(y)e:{var T=r;u=u.split(".");for(var j=0;j<u.length-1;j++){var he=u[j];if(!(he in T))break e;T=T[he]}u=u[u.length-1],j=T[u],y=y(j),y!=j&&y!=null&&e(T,u,{configurable:!0,writable:!0,value:y})}}function s(u,y){u instanceof String&&(u+="");var T=0,j=!1,he={next:function(){if(!j&&T<u.length){var me=T++;return{value:y(me,u[me]),done:!1}}return j=!0,{done:!0,value:void 0}}};return he[Symbol.iterator]=function(){return he},he}i("Array.prototype.values",function(u){return u||function(){return s(this,function(y,T){return T})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var y=typeof u;return y=y!="object"?y:u?Array.isArray(u)?"array":y:"null",y=="array"||y=="object"&&typeof u.length=="number"}function c(u){var y=typeof u;return y=="object"&&u!=null||y=="function"}function h(u,y,T){return u.call.apply(u.bind,arguments)}function p(u,y,T){if(!u)throw Error();if(2<arguments.length){var j=Array.prototype.slice.call(arguments,2);return function(){var he=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(he,j),u.apply(y,he)}}return function(){return u.apply(y,arguments)}}function m(u,y,T){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function g(u,y){var T=Array.prototype.slice.call(arguments,1);return function(){var j=T.slice();return j.push.apply(j,arguments),u.apply(this,j)}}function b(u,y){function T(){}T.prototype=y.prototype,u.aa=y.prototype,u.prototype=new T,u.prototype.constructor=u,u.Qb=function(j,he,me){for(var ee=Array(arguments.length-2),we=2;we<arguments.length;we++)ee[we-2]=arguments[we];return y.prototype[he].apply(j,ee)}}function E(u){const y=u.length;if(0<y){const T=Array(y);for(let j=0;j<y;j++)T[j]=u[j];return T}return[]}function S(u,y){for(let T=1;T<arguments.length;T++){const j=arguments[T];if(l(j)){const he=u.length||0,me=j.length||0;u.length=he+me;for(let ee=0;ee<me;ee++)u[he+ee]=j[ee]}else u.push(j)}}class O{constructor(y,T){this.i=y,this.j=T,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function U(u){return/^[\s\xa0]*$/.test(u)}function D(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function V(u){return V[" "](u),u}V[" "]=function(){};var K=D().indexOf("Gecko")!=-1&&!(D().toLowerCase().indexOf("webkit")!=-1&&D().indexOf("Edge")==-1)&&!(D().indexOf("Trident")!=-1||D().indexOf("MSIE")!=-1)&&D().indexOf("Edge")==-1;function oe(u,y,T){for(const j in u)y.call(T,u[j],j,u)}function L(u,y){for(const T in u)y.call(void 0,u[T],T,u)}function R(u){const y={};for(const T in u)y[T]=u[T];return y}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function F(u,y){let T,j;for(let he=1;he<arguments.length;he++){j=arguments[he];for(T in j)u[T]=j[T];for(let me=0;me<N.length;me++)T=N[me],Object.prototype.hasOwnProperty.call(j,T)&&(u[T]=j[T])}}function z(u){var y=1;u=u.split(":");const T=[];for(;0<y&&u.length;)T.push(u.shift()),y--;return u.length&&T.push(u.join(":")),T}function C(u){a.setTimeout(()=>{throw u},0)}function P(){var u=Ee;let y=null;return u.g&&(y=u.g,u.g=u.g.next,u.g||(u.h=null),y.next=null),y}class x{constructor(){this.h=this.g=null}add(y,T){const j=ue.get();j.set(y,T),this.h?this.h.next=j:this.g=j,this.h=j}}var ue=new O(()=>new Y,u=>u.reset());class Y{constructor(){this.next=this.g=this.h=null}set(y,T){this.h=y,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let X,xe=!1,Ee=new x,ve=()=>{const u=a.Promise.resolve(void 0);X=()=>{u.then(ce)}};var ce=()=>{for(var u;u=P();){try{u.h.call(u.g)}catch(T){C(T)}var y=ue;y.j(u),100>y.h&&(y.h++,u.next=y.g,y.g=u)}xe=!1};function le(){this.s=this.s,this.C=this.C}le.prototype.s=!1,le.prototype.ma=function(){this.s||(this.s=!0,this.N())},le.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ye(u,y){this.type=u,this.g=this.target=y,this.defaultPrevented=!1}ye.prototype.h=function(){this.defaultPrevented=!0};var De=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,y=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const T=()=>{};a.addEventListener("test",T,y),a.removeEventListener("test",T,y)}catch{}return u}();function Z(u,y){if(ye.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var T=this.type=u.type,j=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=y,y=u.relatedTarget){if(K){e:{try{V(y.nodeName);var he=!0;break e}catch{}he=!1}he||(y=null)}}else T=="mouseover"?y=u.fromElement:T=="mouseout"&&(y=u.toElement);this.relatedTarget=y,j?(this.clientX=j.clientX!==void 0?j.clientX:j.pageX,this.clientY=j.clientY!==void 0?j.clientY:j.pageY,this.screenX=j.screenX||0,this.screenY=j.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:ze[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Z.aa.h.call(this)}}b(Z,ye);var ze={2:"touch",3:"pen",4:"mouse"};Z.prototype.h=function(){Z.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ke="closure_listenable_"+(1e6*Math.random()|0),_e=0;function Re(u,y,T,j,he){this.listener=u,this.proxy=null,this.src=y,this.type=T,this.capture=!!j,this.ha=he,this.key=++_e,this.da=this.fa=!1}function $e(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Ne(u){this.src=u,this.g={},this.h=0}Ne.prototype.add=function(u,y,T,j,he){var me=u.toString();u=this.g[me],u||(u=this.g[me]=[],this.h++);var ee=H(u,y,j,he);return-1<ee?(y=u[ee],T||(y.fa=!1)):(y=new Re(y,this.src,me,!!j,he),y.fa=T,u.push(y)),y};function Q(u,y){var T=y.type;if(T in u.g){var j=u.g[T],he=Array.prototype.indexOf.call(j,y,void 0),me;(me=0<=he)&&Array.prototype.splice.call(j,he,1),me&&($e(y),u.g[T].length==0&&(delete u.g[T],u.h--))}}function H(u,y,T,j){for(var he=0;he<u.length;++he){var me=u[he];if(!me.da&&me.listener==y&&me.capture==!!T&&me.ha==j)return he}return-1}var v="closure_lm_"+(1e6*Math.random()|0),te={};function G(u,y,T,j,he){if(Array.isArray(y)){for(var me=0;me<y.length;me++)G(u,y[me],T,j,he);return null}return T=pe(T),u&&u[ke]?u.K(y,T,c(j)?!!j.capture:!1,he):M(u,y,T,!1,j,he)}function M(u,y,T,j,he,me){if(!y)throw Error("Invalid event type");var ee=c(he)?!!he.capture:!!he,we=de(u);if(we||(u[v]=we=new Ne(u)),T=we.add(y,T,j,ee,me),T.proxy)return T;if(j=$(),T.proxy=j,j.src=u,j.listener=T,u.addEventListener)De||(he=ee),he===void 0&&(he=!1),u.addEventListener(y.toString(),j,he);else if(u.attachEvent)u.attachEvent(ie(y.toString()),j);else if(u.addListener&&u.removeListener)u.addListener(j);else throw Error("addEventListener and attachEvent are unavailable.");return T}function $(){function u(T){return y.call(u.src,u.listener,T)}const y=J;return u}function q(u,y,T,j,he){if(Array.isArray(y))for(var me=0;me<y.length;me++)q(u,y[me],T,j,he);else j=c(j)?!!j.capture:!!j,T=pe(T),u&&u[ke]?(u=u.i,y=String(y).toString(),y in u.g&&(me=u.g[y],T=H(me,T,j,he),-1<T&&($e(me[T]),Array.prototype.splice.call(me,T,1),me.length==0&&(delete u.g[y],u.h--)))):u&&(u=de(u))&&(y=u.g[y.toString()],u=-1,y&&(u=H(y,T,j,he)),(T=-1<u?y[u]:null)&&ae(T))}function ae(u){if(typeof u!="number"&&u&&!u.da){var y=u.src;if(y&&y[ke])Q(y.i,u);else{var T=u.type,j=u.proxy;y.removeEventListener?y.removeEventListener(T,j,u.capture):y.detachEvent?y.detachEvent(ie(T),j):y.addListener&&y.removeListener&&y.removeListener(j),(T=de(y))?(Q(T,u),T.h==0&&(T.src=null,y[v]=null)):$e(u)}}}function ie(u){return u in te?te[u]:te[u]="on"+u}function J(u,y){if(u.da)u=!0;else{y=new Z(y,this);var T=u.listener,j=u.ha||u.src;u.fa&&ae(u),u=T.call(j,y)}return u}function de(u){return u=u[v],u instanceof Ne?u:null}var ge="__closure_events_fn_"+(1e9*Math.random()>>>0);function pe(u){return typeof u=="function"?u:(u[ge]||(u[ge]=function(y){return u.handleEvent(y)}),u[ge])}function Ce(){le.call(this),this.i=new Ne(this),this.M=this,this.F=null}b(Ce,le),Ce.prototype[ke]=!0,Ce.prototype.removeEventListener=function(u,y,T,j){q(this,u,y,T,j)};function Ve(u,y){var T,j=u.F;if(j)for(T=[];j;j=j.F)T.push(j);if(u=u.M,j=y.type||y,typeof y=="string")y=new ye(y,u);else if(y instanceof ye)y.target=y.target||u;else{var he=y;y=new ye(j,u),F(y,he)}if(he=!0,T)for(var me=T.length-1;0<=me;me--){var ee=y.g=T[me];he=Ue(ee,j,!0,y)&&he}if(ee=y.g=u,he=Ue(ee,j,!0,y)&&he,he=Ue(ee,j,!1,y)&&he,T)for(me=0;me<T.length;me++)ee=y.g=T[me],he=Ue(ee,j,!1,y)&&he}Ce.prototype.N=function(){if(Ce.aa.N.call(this),this.i){var u=this.i,y;for(y in u.g){for(var T=u.g[y],j=0;j<T.length;j++)$e(T[j]);delete u.g[y],u.h--}}this.F=null},Ce.prototype.K=function(u,y,T,j){return this.i.add(String(u),y,!1,T,j)},Ce.prototype.L=function(u,y,T,j){return this.i.add(String(u),y,!0,T,j)};function Ue(u,y,T,j){if(y=u.i.g[String(y)],!y)return!0;y=y.concat();for(var he=!0,me=0;me<y.length;++me){var ee=y[me];if(ee&&!ee.da&&ee.capture==T){var we=ee.listener,Le=ee.ha||ee.src;ee.fa&&Q(u.i,ee),he=we.call(Le,j)!==!1&&he}}return he&&!j.defaultPrevented}function ct(u,y,T){if(typeof u=="function")T&&(u=m(u,T));else if(u&&typeof u.handleEvent=="function")u=m(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:a.setTimeout(u,y||0)}function at(u){u.g=ct(()=>{u.g=null,u.i&&(u.i=!1,at(u))},u.l);const y=u.h;u.h=null,u.m.apply(null,y)}class bt extends le{constructor(y,T){super(),this.m=y,this.l=T,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:at(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function gt(u){le.call(this),this.h=u,this.g={}}b(gt,le);var pt=[];function zt(u){oe(u.g,function(y,T){this.g.hasOwnProperty(T)&&ae(y)},u),u.g={}}gt.prototype.N=function(){gt.aa.N.call(this),zt(this)},gt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Et=a.JSON.stringify,Nt=a.JSON.parse,On=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Je(){}Je.prototype.h=null;function vr(u){return u.h||(u.h=u.i())}function Bn(){}var zn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function nn(){ye.call(this,"d")}b(nn,ye);function yr(){ye.call(this,"c")}b(yr,ye);var Dt={},Ct=null;function Oe(){return Ct=Ct||new Ce}Dt.La="serverreachability";function In(u){ye.call(this,Dt.La,u)}b(In,ye);function Kt(u){const y=Oe();Ve(y,new In(y))}Dt.STAT_EVENT="statevent";function nr(u,y){ye.call(this,Dt.STAT_EVENT,u),this.stat=y}b(nr,ye);function cn(u){const y=Oe();Ve(y,new nr(y,u))}Dt.Ma="timingevent";function dt(u,y){ye.call(this,Dt.Ma,u),this.size=y}b(dt,ye);function rn(u,y){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},y)}function Qt(){this.g=!0}Qt.prototype.xa=function(){this.g=!1};function Xt(u,y,T,j,he,me){u.info(function(){if(u.g)if(me)for(var ee="",we=me.split("&"),Le=0;Le<we.length;Le++){var Fe=we[Le].split("=");if(1<Fe.length){var Qe=Fe[0];Fe=Fe[1];var lt=Qe.split("_");ee=2<=lt.length&&lt[1]=="type"?ee+(Qe+"="+Fe+"&"):ee+(Qe+"=redacted&")}}else ee=null;else ee=me;return"XMLHTTP REQ ("+j+") [attempt "+he+"]: "+y+`
`+T+`
`+ee})}function sn(u,y,T,j,he,me,ee){u.info(function(){return"XMLHTTP RESP ("+j+") [ attempt "+he+"]: "+y+`
`+T+`
`+me+" "+ee})}function Rt(u,y,T,j){u.info(function(){return"XMLHTTP TEXT ("+y+"): "+fi(u,T)+(j?" "+j:"")})}function Vr(u,y){u.info(function(){return"TIMEOUT: "+y})}Qt.prototype.info=function(){};function fi(u,y){if(!u.g)return y;if(!y)return null;try{var T=JSON.parse(y);if(T){for(u=0;u<T.length;u++)if(Array.isArray(T[u])){var j=T[u];if(!(2>j.length)){var he=j[1];if(Array.isArray(he)&&!(1>he.length)){var me=he[0];if(me!="noop"&&me!="stop"&&me!="close")for(var ee=1;ee<he.length;ee++)he[ee]=""}}}}return Et(T)}catch{return y}}var vn={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},xt={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Yr;function Ur(){}b(Ur,Je),Ur.prototype.g=function(){return new XMLHttpRequest},Ur.prototype.i=function(){return{}},Yr=new Ur;function Vn(u,y,T,j){this.j=u,this.i=y,this.l=T,this.R=j||1,this.U=new gt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Xr}function Xr(){this.i=null,this.g="",this.h=!1}var Ge={},se={};function Pe(u,y,T){u.L=1,u.v=xr(Kn(y)),u.m=T,u.P=!0,qe(u,null)}function qe(u,y){u.F=Date.now(),Zt(u),u.A=Kn(u.v);var T=u.A,j=u.R;Array.isArray(j)||(j=[String(j)]),fs(T.i,"t",j),u.C=0,T=u.j.J,u.h=new Xr,u.g=Qo(u.j,T?y:null,!u.m),0<u.O&&(u.M=new bt(m(u.Y,u,u.g),u.O)),y=u.U,T=u.g,j=u.ca;var he="readystatechange";Array.isArray(he)||(he&&(pt[0]=he.toString()),he=pt);for(var me=0;me<he.length;me++){var ee=G(T,he[me],j||y.handleEvent,!1,y.h||y);if(!ee)break;y.g[ee.key]=ee}y=u.H?R(u.H):{},u.m?(u.u||(u.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,y)):(u.u="GET",u.g.ea(u.A,u.u,null,y)),Kt(),Xt(u.i,u.u,u.A,u.l,u.R,u.m)}Vn.prototype.ca=function(u){u=u.target;const y=this.M;y&&Ut(u)==3?y.j():this.Y(u)},Vn.prototype.Y=function(u){try{if(u==this.g)e:{const lt=Ut(this.g);var y=this.g.Ba();const An=this.g.Z();if(!(3>lt)&&(lt!=3||this.g&&(this.h.h||this.g.oa()||zr(this.g)))){this.J||lt!=4||y==7||(y==8||0>=An?Kt(3):Kt(2)),Nn(this);var T=this.g.Z();this.X=T;t:if(_t(this)){var j=zr(this.g);u="";var he=j.length,me=Ut(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Vt(this),Un(this);var ee="";break t}this.h.i=new a.TextDecoder}for(y=0;y<he;y++)this.h.h=!0,u+=this.h.i.decode(j[y],{stream:!(me&&y==he-1)});j.length=0,this.h.g+=u,this.C=0,ee=this.h.g}else ee=this.g.oa();if(this.o=T==200,sn(this.i,this.u,this.A,this.l,this.R,lt,T),this.o){if(this.T&&!this.K){t:{if(this.g){var we,Le=this.g;if((we=Le.g?Le.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!U(we)){var Fe=we;break t}}Fe=null}if(T=Fe)Rt(this.i,this.l,T,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,rr(this,T);else{this.o=!1,this.s=3,cn(12),Vt(this),Un(this);break e}}if(this.P){T=!0;let on;for(;!this.J&&this.C<ee.length;)if(on=gn(this,ee),on==se){lt==4&&(this.s=4,cn(14),T=!1),Rt(this.i,this.l,null,"[Incomplete Response]");break}else if(on==Ge){this.s=4,cn(15),Rt(this.i,this.l,ee,"[Invalid Chunk]"),T=!1;break}else Rt(this.i,this.l,on,null),rr(this,on);if(_t(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),lt!=4||ee.length!=0||this.h.h||(this.s=1,cn(16),T=!1),this.o=this.o&&T,!T)Rt(this.i,this.l,ee,"[Invalid Chunked Response]"),Vt(this),Un(this);else if(0<ee.length&&!this.W){this.W=!0;var Qe=this.j;Qe.g==this&&Qe.ba&&!Qe.M&&(Qe.j.info("Great, no buffering proxy detected. Bytes received: "+ee.length),vs(Qe),Qe.M=!0,cn(11))}}else Rt(this.i,this.l,ee,null),rr(this,ee);lt==4&&Vt(this),this.o&&!this.J&&(lt==4?Go(this.j,this):(this.o=!1,Zt(this)))}else Na(this.g),T==400&&0<ee.indexOf("Unknown SID")?(this.s=3,cn(12)):(this.s=0,cn(13)),Vt(this),Un(this)}}}catch{}finally{}};function _t(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function gn(u,y){var T=u.C,j=y.indexOf(`
`,T);return j==-1?se:(T=Number(y.substring(T,j)),isNaN(T)?Ge:(j+=1,j+T>y.length?se:(y=y.slice(j,j+T),u.C=j+T,y)))}Vn.prototype.cancel=function(){this.J=!0,Vt(this)};function Zt(u){u.S=Date.now()+u.I,dn(u,u.I)}function dn(u,y){if(u.B!=null)throw Error("WatchDog timer not null");u.B=rn(m(u.ba,u),y)}function Nn(u){u.B&&(a.clearTimeout(u.B),u.B=null)}Vn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Vr(this.i,this.A),this.L!=2&&(Kt(),cn(17)),Vt(this),this.s=2,Un(this)):dn(this,this.S-u)};function Un(u){u.j.G==0||u.J||Go(u.j,u)}function Vt(u){Nn(u);var y=u.M;y&&typeof y.ma=="function"&&y.ma(),u.M=null,zt(u.U),u.g&&(y=u.g,u.g=null,y.abort(),y.ma())}function rr(u,y){try{var T=u.j;if(T.G!=0&&(T.g==u||to(T.h,u))){if(!u.K&&to(T.h,u)&&T.G==3){try{var j=T.Da.g.parse(y)}catch{j=null}if(Array.isArray(j)&&j.length==3){var he=j;if(he[0]==0){e:if(!T.u){if(T.g)if(T.g.F+3e3<u.F)or(T),gs(T);else break e;ws(T),cn(18)}}else T.za=he[1],0<T.za-T.T&&37500>he[2]&&T.F&&T.v==0&&!T.C&&(T.C=rn(m(T.Za,T),6e3));if(1>=eo(T.h)&&T.ca){try{T.ca()}catch{}T.ca=void 0}}else ar(T,11)}else if((u.K||T.g==u)&&or(T),!U(y))for(he=T.Da.g.parse(y),y=0;y<he.length;y++){let Fe=he[y];if(T.T=Fe[0],Fe=Fe[1],T.G==2)if(Fe[0]=="c"){T.K=Fe[1],T.ia=Fe[2];const Qe=Fe[3];Qe!=null&&(T.la=Qe,T.j.info("VER="+T.la));const lt=Fe[4];lt!=null&&(T.Aa=lt,T.j.info("SVER="+T.Aa));const An=Fe[5];An!=null&&typeof An=="number"&&0<An&&(j=1.5*An,T.L=j,T.j.info("backChannelRequestTimeoutMs_="+j)),j=T;const on=u.g;if(on){const yn=on.g?on.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(yn){var me=j.h;me.g||yn.indexOf("spdy")==-1&&yn.indexOf("quic")==-1&&yn.indexOf("h2")==-1||(me.j=me.l,me.g=new Set,me.h&&(mi(me,me.h),me.h=null))}if(j.D){const Fn=on.g?on.g.getResponseHeader("X-HTTP-Session-Id"):null;Fn&&(j.ya=Fn,Lt(j.I,j.D,Fn))}}T.G=3,T.l&&T.l.ua(),T.ba&&(T.R=Date.now()-u.F,T.j.info("Handshake RTT: "+T.R+"ms")),j=T;var ee=u;if(j.qa=so(j,j.J?j.ia:null,j.W),ee.K){no(j.h,ee);var we=ee,Le=j.L;Le&&(we.I=Le),we.B&&(Nn(we),Zt(we)),j.g=ee}else Ho(j);0<T.i.length&&_s(T)}else Fe[0]!="stop"&&Fe[0]!="close"||ar(T,7);else T.G==3&&(Fe[0]=="stop"||Fe[0]=="close"?Fe[0]=="stop"?ar(T,7):ms(T):Fe[0]!="noop"&&T.l&&T.l.ta(Fe),T.v=0)}}Kt(4)}catch{}}var pi=class{constructor(u,y){this.g=u,this.map=y}};function Ar(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Js(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function eo(u){return u.h?1:u.g?u.g.size:0}function to(u,y){return u.h?u.h==y:u.g?u.g.has(y):!1}function mi(u,y){u.g?u.g.add(y):u.h=y}function no(u,y){u.h&&u.h==y?u.h=null:u.g&&u.g.has(y)&&u.g.delete(y)}Ar.prototype.cancel=function(){if(this.i=gi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function gi(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let y=u.i;for(const T of u.g.values())y=y.concat(T.D);return y}return E(u.i)}function Fo(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var y=[],T=u.length,j=0;j<T;j++)y.push(u[j]);return y}y=[],T=0;for(j in u)y[T++]=u[j];return y}function jt(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var y=[];u=u.length;for(var T=0;T<u;T++)y.push(T);return y}y=[],T=0;for(const j in u)y[T++]=j;return y}}}function _i(u,y){if(u.forEach&&typeof u.forEach=="function")u.forEach(y,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,y,void 0);else for(var T=jt(u),j=Fo(u),he=j.length,me=0;me<he;me++)y.call(void 0,j[me],T&&T[me],u)}var Pt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Zr(u,y){if(u){u=u.split("&");for(var T=0;T<u.length;T++){var j=u[T].indexOf("="),he=null;if(0<=j){var me=u[T].substring(0,j);he=u[T].substring(j+1)}else me=u[T];y(me,he?decodeURIComponent(he.replace(/\+/g," ")):"")}}}function br(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof br){this.h=u.h,Jr(this,u.j),this.o=u.o,this.g=u.g,Fr(this,u.s),this.l=u.l;var y=u.i,T=new ti;T.i=y.i,y.g&&(T.g=new Map(y.g),T.h=y.h),$o(this,T),this.m=u.m}else u&&(y=String(u).match(Pt))?(this.h=!1,Jr(this,y[1]||"",!0),this.o=$r(y[2]||""),this.g=$r(y[3]||"",!0),Fr(this,y[4]),this.l=$r(y[5]||"",!0),$o(this,y[6]||"",!0),this.m=$r(y[7]||"")):(this.h=!1,this.i=new ti(null,this.h))}br.prototype.toString=function(){var u=[],y=this.j;y&&u.push(Cr(y,ds,!0),":");var T=this.g;return(T||y=="file")&&(u.push("//"),(y=this.o)&&u.push(Cr(y,ds,!0),"@"),u.push(encodeURIComponent(String(T)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.s,T!=null&&u.push(":",String(T))),(T=this.l)&&(this.g&&T.charAt(0)!="/"&&u.push("/"),u.push(Cr(T,T.charAt(0)=="/"?hs:Oa,!0))),(T=this.i.toString())&&u.push("?",T),(T=this.m)&&u.push("#",Cr(T,ei)),u.join("")};function Kn(u){return new br(u)}function Jr(u,y,T){u.j=T?$r(y,!0):y,u.j&&(u.j=u.j.replace(/:$/,""))}function Fr(u,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);u.s=y}else u.s=null}function $o(u,y,T){y instanceof ti?(u.i=y,Ke(u.i,u.h)):(T||(y=Cr(y,qi)),u.i=new ti(y,u.h))}function Lt(u,y,T){u.i.set(y,T)}function xr(u){return Lt(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function $r(u,y){return u?y?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Cr(u,y,T){return typeof u=="string"?(u=encodeURI(u).replace(y,Jt),T&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Jt(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var ds=/[#\/\?@]/g,Oa=/[#\?:]/g,hs=/[#\?]/g,qi=/[#\?@]/g,ei=/#/g;function ti(u,y){this.h=this.g=null,this.i=u||null,this.j=!!y}function Rn(u){u.g||(u.g=new Map,u.h=0,u.i&&Zr(u.i,function(y,T){u.add(decodeURIComponent(y.replace(/\+/g," ")),T)}))}n=ti.prototype,n.add=function(u,y){Rn(this),this.i=null,u=wi(this,u);var T=this.g.get(u);return T||this.g.set(u,T=[]),T.push(y),this.h+=1,this};function Br(u,y){Rn(u),y=wi(u,y),u.g.has(y)&&(u.i=null,u.h-=u.g.get(y).length,u.g.delete(y))}function Hi(u,y){return Rn(u),y=wi(u,y),u.g.has(y)}n.forEach=function(u,y){Rn(this),this.g.forEach(function(T,j){T.forEach(function(he){u.call(y,he,j,this)},this)},this)},n.na=function(){Rn(this);const u=Array.from(this.g.values()),y=Array.from(this.g.keys()),T=[];for(let j=0;j<y.length;j++){const he=u[j];for(let me=0;me<he.length;me++)T.push(y[j])}return T},n.V=function(u){Rn(this);let y=[];if(typeof u=="string")Hi(this,u)&&(y=y.concat(this.g.get(wi(this,u))));else{u=Array.from(this.g.values());for(let T=0;T<u.length;T++)y=y.concat(u[T])}return y},n.set=function(u,y){return Rn(this),this.i=null,u=wi(this,u),Hi(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[y]),this.h+=1,this},n.get=function(u,y){return u?(u=this.V(u),0<u.length?String(u[0]):y):y};function fs(u,y,T){Br(u,y),0<T.length&&(u.i=null,u.g.set(wi(u,y),E(T)),u.h+=T.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],y=Array.from(this.g.keys());for(var T=0;T<y.length;T++){var j=y[T];const me=encodeURIComponent(String(j)),ee=this.V(j);for(j=0;j<ee.length;j++){var he=me;ee[j]!==""&&(he+="="+encodeURIComponent(String(ee[j]))),u.push(he)}}return this.i=u.join("&")};function wi(u,y){return y=String(y),u.j&&(y=y.toLowerCase()),y}function Ke(u,y){y&&!u.j&&(Rn(u),u.i=null,u.g.forEach(function(T,j){var he=j.toLowerCase();j!=he&&(Br(this,j),fs(this,he,T))},u)),u.j=y}function Bo(u,y){const T=new Qt;if(a.Image){const j=new Image;j.onload=g(ir,T,"TestLoadImage: loaded",!0,y,j),j.onerror=g(ir,T,"TestLoadImage: error",!1,y,j),j.onabort=g(ir,T,"TestLoadImage: abort",!1,y,j),j.ontimeout=g(ir,T,"TestLoadImage: timeout",!1,y,j),a.setTimeout(function(){j.ontimeout&&j.ontimeout()},1e4),j.src=u}else y(!1)}function ps(u,y){const T=new Qt,j=new AbortController,he=setTimeout(()=>{j.abort(),ir(T,"TestPingServer: timeout",!1,y)},1e4);fetch(u,{signal:j.signal}).then(me=>{clearTimeout(he),me.ok?ir(T,"TestPingServer: ok",!0,y):ir(T,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(he),ir(T,"TestPingServer: error",!1,y)})}function ir(u,y,T,j,he){try{he&&(he.onload=null,he.onerror=null,he.onabort=null,he.ontimeout=null),j(T)}catch{}}function zo(){this.g=new On}function Wi(u,y,T){const j=T||"";try{_i(u,function(he,me){let ee=he;c(he)&&(ee=Et(he)),y.push(j+me+"="+encodeURIComponent(ee))})}catch(he){throw y.push(j+"type="+encodeURIComponent("_badmap")),he}}function Sr(u){this.l=u.Ub||null,this.j=u.eb||!1}b(Sr,Je),Sr.prototype.g=function(){return new sr(this.l,this.j)},Sr.prototype.i=function(u){return function(){return u}}({});function sr(u,y){Ce.call(this),this.D=u,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(sr,Ce),n=sr.prototype,n.open=function(u,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=y,this.readyState=1,d(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(y.body=u),(this.D||a).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,yi(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,d(this)),this.g&&(this.readyState=3,d(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;vi(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function vi(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var y=u.value?u.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!u.done}))&&(this.response=this.responseText+=y)}u.done?yi(this):d(this),this.readyState==3&&vi(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,yi(this))},n.Qa=function(u){this.g&&(this.response=u,yi(this))},n.ga=function(){this.g&&yi(this)};function yi(u){u.readyState=4,u.l=null,u.j=null,u.v=null,d(u)}n.setRequestHeader=function(u,y){this.u.append(u,y)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],y=this.h.entries();for(var T=y.next();!T.done;)T=T.value,u.push(T[0]+": "+T[1]),T=y.next();return u.join(`\r
`)};function d(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(sr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function _(u){let y="";return oe(u,function(T,j){y+=j,y+=":",y+=T,y+=`\r
`}),y}function k(u,y,T){e:{for(j in T){var j=!1;break e}j=!0}j||(T=_(T),typeof u=="string"?T!=null&&encodeURIComponent(String(T)):Lt(u,y,T))}function B(u){Ce.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(B,Ce);var re=/^https?$/i,fe=["POST","PUT"];n=B.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,y,T,j){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);y=y?y.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Yr.g(),this.v=this.o?vr(this.o):vr(Yr),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(y,String(u),!0),this.B=!1}catch(me){Ie(this,me);return}if(u=T||"",T=new Map(this.headers),j)if(Object.getPrototypeOf(j)===Object.prototype)for(var he in j)T.set(he,j[he]);else if(typeof j.keys=="function"&&typeof j.get=="function")for(const me of j.keys())T.set(me,j.get(me));else throw Error("Unknown input type for opt_headers: "+String(j));j=Array.from(T.keys()).find(me=>me.toLowerCase()=="content-type"),he=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(fe,y,void 0))||j||he||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[me,ee]of T)this.g.setRequestHeader(me,ee);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{hn(this),this.u=!0,this.g.send(u),this.u=!1}catch(me){Ie(this,me)}};function Ie(u,y){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=y,u.m=5,Xe(u),it(u)}function Xe(u){u.A||(u.A=!0,Ve(u,"complete"),Ve(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Ve(this,"complete"),Ve(this,"abort"),it(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),it(this,!0)),B.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?wt(this):this.bb())},n.bb=function(){wt(this)};function wt(u){if(u.h&&typeof o<"u"&&(!u.v[1]||Ut(u)!=4||u.Z()!=2)){if(u.u&&Ut(u)==4)ct(u.Ea,0,u);else if(Ve(u,"readystatechange"),Ut(u)==4){u.h=!1;try{const ee=u.Z();e:switch(ee){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var T;if(!(T=y)){var j;if(j=ee===0){var he=String(u.D).match(Pt)[1]||null;!he&&a.self&&a.self.location&&(he=a.self.location.protocol.slice(0,-1)),j=!re.test(he?he.toLowerCase():"")}T=j}if(T)Ve(u,"complete"),Ve(u,"success");else{u.m=6;try{var me=2<Ut(u)?u.g.statusText:""}catch{me=""}u.l=me+" ["+u.Z()+"]",Xe(u)}}finally{it(u)}}}}function it(u,y){if(u.g){hn(u);const T=u.g,j=u.v[0]?()=>{}:null;u.g=null,u.v=null,y||Ve(u,"ready");try{T.onreadystatechange=j}catch{}}}function hn(u){u.I&&(a.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function Ut(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<Ut(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var y=this.g.responseText;return u&&y.indexOf(u)==0&&(y=y.substring(u.length)),Nt(y)}};function zr(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Na(u){const y={};u=(u.g&&2<=Ut(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let j=0;j<u.length;j++){if(U(u[j]))continue;var T=z(u[j]);const he=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const me=y[he]||[];y[he]=me,me.push(T)}L(y,function(j){return j.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ni(u,y,T){return T&&T.internalChannelParams&&T.internalChannelParams[u]||y}function ro(u){this.Aa=0,this.i=[],this.j=new Qt,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ni("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ni("baseRetryDelayMs",5e3,u),this.cb=ni("retryDelaySeedMs",1e4,u),this.Wa=ni("forwardChannelMaxRetries",2,u),this.wa=ni("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Ar(u&&u.concurrentRequestLimit),this.Da=new zo,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=ro.prototype,n.la=8,n.G=1,n.connect=function(u,y,T,j){cn(0),this.W=u,this.H=y||{},T&&j!==void 0&&(this.H.OSID=T,this.H.OAID=j),this.F=this.X,this.I=so(this,null,this.W),_s(this)};function ms(u){if(jo(u),u.G==3){var y=u.U++,T=Kn(u.I);if(Lt(T,"SID",u.K),Lt(T,"RID",y),Lt(T,"TYPE","terminate"),Gi(u,T),y=new Vn(u,u.j,y),y.L=2,y.v=xr(Kn(T)),T=!1,a.navigator&&a.navigator.sendBeacon)try{T=a.navigator.sendBeacon(y.v.toString(),"")}catch{}!T&&a.Image&&(new Image().src=y.v,T=!0),T||(y.g=Qo(y.j,null),y.g.ea(y.v)),y.F=Date.now(),Zt(y)}Ko(u)}function gs(u){u.g&&(vs(u),u.g.cancel(),u.g=null)}function jo(u){gs(u),u.u&&(a.clearTimeout(u.u),u.u=null),or(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function _s(u){if(!Js(u.h)&&!u.s){u.s=!0;var y=u.Ga;X||ve(),xe||(X(),xe=!0),Ee.add(y,u),u.B=0}}function La(u,y){return eo(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=y.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=rn(m(u.Ga,u,y),io(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const he=new Vn(this,this.j,u);let me=this.o;if(this.S&&(me?(me=R(me),F(me,this.S)):me=this.S),this.m!==null||this.O||(he.H=me,me=null),this.P)e:{for(var y=0,T=0;T<this.i.length;T++){t:{var j=this.i[T];if("__data__"in j.map&&(j=j.map.__data__,typeof j=="string")){j=j.length;break t}j=void 0}if(j===void 0)break;if(y+=j,4096<y){y=T;break e}if(y===4096||T===this.i.length-1){y=T+1;break e}}y=1e3}else y=1e3;y=ri(this,he,y),T=Kn(this.I),Lt(T,"RID",u),Lt(T,"CVER",22),this.D&&Lt(T,"X-HTTP-Session-Id",this.D),Gi(this,T),me&&(this.O?y="headers="+encodeURIComponent(String(_(me)))+"&"+y:this.m&&k(T,this.m,me)),mi(this.h,he),this.Ua&&Lt(T,"TYPE","init"),this.P?(Lt(T,"$req",y),Lt(T,"SID","null"),he.T=!0,Pe(he,T,null)):Pe(he,T,y),this.G=2}}else this.G==3&&(u?qo(this,u):this.i.length==0||Js(this.h)||qo(this))};function qo(u,y){var T;y?T=y.l:T=u.U++;const j=Kn(u.I);Lt(j,"SID",u.K),Lt(j,"RID",T),Lt(j,"AID",u.T),Gi(u,j),u.m&&u.o&&k(j,u.m,u.o),T=new Vn(u,u.j,T,u.B+1),u.m===null&&(T.H=u.o),y&&(u.i=y.D.concat(u.i)),y=ri(u,T,1e3),T.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),mi(u.h,T),Pe(T,j,y)}function Gi(u,y){u.H&&oe(u.H,function(T,j){Lt(y,j,T)}),u.l&&_i({},function(T,j){Lt(y,j,T)})}function ri(u,y,T){T=Math.min(u.i.length,T);var j=u.l?m(u.l.Na,u.l,u):null;e:{var he=u.i;let me=-1;for(;;){const ee=["count="+T];me==-1?0<T?(me=he[0].g,ee.push("ofs="+me)):me=0:ee.push("ofs="+me);let we=!0;for(let Le=0;Le<T;Le++){let Fe=he[Le].g;const Qe=he[Le].map;if(Fe-=me,0>Fe)me=Math.max(0,he[Le].g-100),we=!1;else try{Wi(Qe,ee,"req"+Fe+"_")}catch{j&&j(Qe)}}if(we){j=ee.join("&");break e}}}return u=u.i.splice(0,T),y.D=u,j}function Ho(u){if(!u.g&&!u.u){u.Y=1;var y=u.Fa;X||ve(),xe||(X(),xe=!0),Ee.add(y,u),u.v=0}}function ws(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=rn(m(u.Fa,u),io(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,Wo(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=rn(m(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,cn(10),gs(this),Wo(this))};function vs(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function Wo(u){u.g=new Vn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var y=Kn(u.qa);Lt(y,"RID","rpc"),Lt(y,"SID",u.K),Lt(y,"AID",u.T),Lt(y,"CI",u.F?"0":"1"),!u.F&&u.ja&&Lt(y,"TO",u.ja),Lt(y,"TYPE","xmlhttp"),Gi(u,y),u.m&&u.o&&k(y,u.m,u.o),u.L&&(u.g.I=u.L);var T=u.g;u=u.ia,T.L=1,T.v=xr(Kn(y)),T.m=null,T.P=!0,qe(T,u)}n.Za=function(){this.C!=null&&(this.C=null,gs(this),ws(this),cn(19))};function or(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function Go(u,y){var T=null;if(u.g==y){or(u),vs(u),u.g=null;var j=2}else if(to(u.h,y))T=y.D,no(u.h,y),j=1;else return;if(u.G!=0){if(y.o)if(j==1){T=y.m?y.m.length:0,y=Date.now()-y.F;var he=u.B;j=Oe(),Ve(j,new dt(j,T)),_s(u)}else Ho(u);else if(he=y.s,he==3||he==0&&0<y.X||!(j==1&&La(u,y)||j==2&&ws(u)))switch(T&&0<T.length&&(y=u.h,y.i=y.i.concat(T)),he){case 1:ar(u,5);break;case 4:ar(u,10);break;case 3:ar(u,6);break;default:ar(u,2)}}}function io(u,y){let T=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(T*=2),T*y}function ar(u,y){if(u.j.info("Error code "+y),y==2){var T=m(u.fb,u),j=u.Xa;const he=!j;j=new br(j||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Jr(j,"https"),xr(j),he?Bo(j.toString(),T):ps(j.toString(),T)}else cn(2);u.G=0,u.l&&u.l.sa(y),Ko(u),jo(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),cn(2)):(this.j.info("Failed to ping google.com"),cn(1))};function Ko(u){if(u.G=0,u.ka=[],u.l){const y=gi(u.h);(y.length!=0||u.i.length!=0)&&(S(u.ka,y),S(u.ka,u.i),u.h.i.length=0,E(u.i),u.i.length=0),u.l.ra()}}function so(u,y,T){var j=T instanceof br?Kn(T):new br(T);if(j.g!="")y&&(j.g=y+"."+j.g),Fr(j,j.s);else{var he=a.location;j=he.protocol,y=y?y+"."+he.hostname:he.hostname,he=+he.port;var me=new br(null);j&&Jr(me,j),y&&(me.g=y),he&&Fr(me,he),T&&(me.l=T),j=me}return T=u.D,y=u.ya,T&&y&&Lt(j,T,y),Lt(j,"VER",u.la),Gi(u,j),j}function Qo(u,y,T){if(y&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=u.Ca&&!u.pa?new B(new Sr({eb:T})):new B(u.pa),y.Ha(u.J),y}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function oo(){}n=oo.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Rr(){}Rr.prototype.g=function(u,y){return new jn(u,y)};function jn(u,y){Ce.call(this),this.g=new ro(y),this.l=u,this.h=y&&y.messageUrlParams||null,u=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(u?u["X-WebChannel-Content-Type"]=y.messageContentType:u={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(u?u["X-WebChannel-Client-Profile"]=y.va:u={"X-WebChannel-Client-Profile":y.va}),this.g.S=u,(u=y&&y.Sb)&&!U(u)&&(this.g.m=u),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!U(y)&&(this.g.D=y,u=this.h,u!==null&&y in u&&(u=this.h,y in u&&delete u[y])),this.j=new ii(this)}b(jn,Ce),jn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},jn.prototype.close=function(){ms(this.g)},jn.prototype.o=function(u){var y=this.g;if(typeof u=="string"){var T={};T.__data__=u,u=T}else this.u&&(T={},T.__data__=Et(u),u=T);y.i.push(new pi(y.Ya++,u)),y.G==3&&_s(y)},jn.prototype.N=function(){this.g.l=null,delete this.j,ms(this.g),delete this.g,jn.aa.N.call(this)};function Yo(u){nn.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var y=u.__sm__;if(y){e:{for(const T in y){u=T;break e}u=void 0}(this.i=u)&&(u=this.i,y=y!==null&&u in y?y[u]:void 0),this.data=y}else this.data=u}b(Yo,nn);function Xo(){yr.call(this),this.status=1}b(Xo,yr);function ii(u){this.g=u}b(ii,oo),ii.prototype.ua=function(){Ve(this.g,"a")},ii.prototype.ta=function(u){Ve(this.g,new Yo(u))},ii.prototype.sa=function(u){Ve(this.g,new Xo)},ii.prototype.ra=function(){Ve(this.g,"b")},Rr.prototype.createWebChannel=Rr.prototype.g,jn.prototype.send=jn.prototype.o,jn.prototype.open=jn.prototype.m,jn.prototype.close=jn.prototype.close,Lv=function(){return new Rr},Nv=function(){return Oe()},Ov=Dt,fh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},vn.NO_ERROR=0,vn.TIMEOUT=8,vn.HTTP_ERROR=6,Ru=vn,xt.COMPLETE="complete",Dv=xt,Bn.EventType=zn,zn.OPEN="a",zn.CLOSE="b",zn.ERROR="c",zn.MESSAGE="d",Ce.prototype.listen=Ce.prototype.K,Qa=Bn,B.prototype.listenOnce=B.prototype.L,B.prototype.getLastError=B.prototype.Ka,B.prototype.getLastErrorCode=B.prototype.Ba,B.prototype.getStatus=B.prototype.Z,B.prototype.getResponseJson=B.prototype.Oa,B.prototype.getResponseText=B.prototype.oa,B.prototype.send=B.prototype.ea,B.prototype.setWithCredentials=B.prototype.Ha,Pv=B}).apply(typeof iu<"u"?iu:typeof self<"u"?self:typeof window<"u"?window:{});const Qm="@firebase/firestore",Ym="4.7.11";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Yn.UNAUTHENTICATED=new Yn(null),Yn.GOOGLE_CREDENTIALS=new Yn("google-credentials-uid"),Yn.FIRST_PARTY=new Yn("first-party-uid"),Yn.MOCK_USER=new Yn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sa="11.6.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Co=new tf("@firebase/firestore");function ra(){return Co.logLevel}function We(n,...e){if(Co.logLevel<=Tt.DEBUG){const t=e.map(pf);Co.debug(`Firestore (${Sa}): ${n}`,...t)}}function os(n,...e){if(Co.logLevel<=Tt.ERROR){const t=e.map(pf);Co.error(`Firestore (${Sa}): ${n}`,...t)}}function va(n,...e){if(Co.logLevel<=Tt.WARN){const t=e.map(pf);Co.warn(`Firestore (${Sa}): ${n}`,...t)}}function pf(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tt(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,Mv(n,r,t)}function Mv(n,e,t){let r=`FIRESTORE (${Sa}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw os(r),new Error(r)}function Mt(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||Mv(e,i,r)}function ot(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Be extends ji{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vv{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class bA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Yn.UNAUTHENTICATED))}shutdown(){}}class EA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class kA{constructor(e){this.t=e,this.currentUser=Yn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Mt(this.o===void 0,42304);let r=this.i;const i=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve();let s=new Li;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Li,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{We("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(We("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Li)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(We("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Mt(typeof r.accessToken=="string",31837,{l:r}),new Vv(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Mt(e===null||typeof e=="string",2055,{h:e}),new Yn(e)}}class TA{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Yn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class IA{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new TA(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Yn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Xm{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class AA{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Tr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Mt(this.o===void 0,3512);const r=s=>{s.error!=null&&We("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,We("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{We("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):We("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Xm(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Mt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Xm(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xA(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uv(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=xA(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}}function mt(n,e){return n<e?-1:n>e?1:0}function ph(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return mt(r,i);{const s=Uv(),o=CA(s.encode(Zm(n,t)),s.encode(Zm(e,t)));return o!==0?o:mt(r,i)}}t+=r>65535?2:1}return mt(n.length,e.length)}function Zm(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function CA(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return mt(n[t],e[t]);return mt(n.length,e.length)}function ya(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jm=-62135596800,eg=1e6;class st{static now(){return st.fromMillis(Date.now())}static fromDate(e){return st.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*eg);return new st(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Be(Te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Be(Te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Jm)throw new Be(Te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Be(Te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/eg}_compareTo(e){return this.seconds===e.seconds?mt(this.nanoseconds,e.nanoseconds):mt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Jm;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{static fromTimestamp(e){return new ut(e)}static min(){return new ut(new st(0,0))}static max(){return new ut(new st(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tg="__name__";class Ti{constructor(e,t,r){t===void 0?t=0:t>e.length&&tt(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&tt(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Ti.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ti?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=Ti.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return mt(e.length,t.length)}static compareSegments(e,t){const r=Ti.isNumericId(e),i=Ti.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?Ti.extractNumericId(e).compare(Ti.extractNumericId(t)):ph(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ms.fromString(e.substring(4,e.length-2))}}class un extends Ti{construct(e,t,r){return new un(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Be(Te.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new un(t)}static emptyPath(){return new un([])}}const SA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Wn extends Ti{construct(e,t,r){return new Wn(e,t,r)}static isValidIdentifier(e){return SA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Wn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===tg}static keyField(){return new Wn([tg])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Be(Te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new Be(Te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Be(Te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Be(Te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Wn(t)}static emptyPath(){return new Wn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e){this.path=e}static fromPath(e){return new Ye(un.fromString(e))}static fromName(e){return new Ye(un.fromString(e).popFirst(5))}static empty(){return new Ye(un.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&un.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return un.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ye(new un(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bl=-1;function RA(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ut.fromTimestamp(r===1e9?new st(t+1,0):new st(t,r));return new $s(i,Ye.empty(),e)}function PA(n){return new $s(n.readTime,n.key,bl)}class $s{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new $s(ut.min(),Ye.empty(),bl)}static max(){return new $s(ut.max(),Ye.empty(),bl)}}function DA(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ye.comparator(n.documentKey,e.documentKey),t!==0?t:mt(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class NA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ra(n){if(n.code!==Te.FAILED_PRECONDITION||n.message!==OA)throw n;We("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&tt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Se((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Se?t:Se.resolve(t)}catch(t){return Se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Se.reject(t)}static resolve(e){return new Se((t,r)=>{t(e)})}static reject(e){return new Se((t,r)=>{r(e)})}static waitFor(e){return new Se((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},l=>r(l))}),o=!0,s===i&&t()})}static or(e){let t=Se.resolve(!1);for(const r of e)t=t.next(i=>i?Se.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new Se((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;t(e[c]).next(h=>{o[c]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,t){return new Se((r,i)=>{const s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}}function LA(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Pa(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>t.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}Uc.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mf=-1;function Fc(n){return n==null}function lc(n){return n===0&&1/n==-1/0}function MA(n){return typeof n=="number"&&Number.isInteger(n)&&!lc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $v="";function VA(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=ng(e)),e=UA(n.get(t),e);return ng(e)}function UA(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="";break;case $v:t+="";break;default:t+=s}}return t}function ng(n){return n+$v+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rg(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ys(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function FA(n,e){const t=[];for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.push(e(n[r],r,n));return t}function Bv(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e,t){this.comparator=e,this.root=t||qn.EMPTY}insert(e,t){return new wn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,qn.BLACK,null,null))}remove(e){return new wn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,qn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new su(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new su(this.root,e,this.comparator,!1)}getReverseIterator(){return new su(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new su(this.root,e,this.comparator,!0)}}class su{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class qn{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??qn.RED,this.left=i??qn.EMPTY,this.right=s??qn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new qn(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return qn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return qn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,qn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,qn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw tt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw tt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw tt(27949);return e+(this.isRed()?0:1)}}qn.EMPTY=null,qn.RED=!0,qn.BLACK=!1;qn.EMPTY=new class{constructor(){this.size=0}get key(){throw tt(57766)}get value(){throw tt(16141)}get color(){throw tt(16727)}get left(){throw tt(29726)}get right(){throw tt(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new qn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e){this.comparator=e,this.data=new wn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ig(this.data.getIterator())}getIteratorFrom(e){return new ig(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Mn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Mn(this.comparator);return t.data=e,t}}class ig{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(e){this.fields=e,e.sort(Wn.comparator)}static empty(){return new Lr([])}unionWith(e){let t=new Mn(Wn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Lr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ya(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new zv("Invalid base64 string: "+s):s}}(e);return new Gn(t)}static fromUint8Array(e){const t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Gn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return mt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Gn.EMPTY_BYTE_STRING=new Gn("");const $A=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Bs(n){if(Mt(!!n,39018),typeof n=="string"){let e=0;const t=$A.exec(n);if(Mt(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Cn(n.seconds),nanos:Cn(n.nanos)}}function Cn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function zs(n){return typeof n=="string"?Gn.fromBase64String(n):Gn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jv="server_timestamp",qv="__type__",Hv="__previous_value__",Wv="__local_write_time__";function $c(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[qv])===null||t===void 0?void 0:t.stringValue)===jv}function Bc(n){const e=n.mapValue.fields[Hv];return $c(e)?Bc(e):e}function El(n){const e=Bs(n.mapValue.fields[Wv].timestampValue);return new st(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(e,t,r,i,s,o,a,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}const uc="(default)";class kl{constructor(e,t){this.projectId=e,this.database=t||uc}static empty(){return new kl("","")}get isDefaultDatabase(){return this.database===uc}isEqual(e){return e instanceof kl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv="__type__",zA="__max__",ou={mapValue:{}},Kv="__vector__",cc="value";function js(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?$c(n)?4:qA(n)?9007199254740991:jA(n)?10:11:tt(28295,{value:n})}function Bi(n,e){if(n===e)return!0;const t=js(n);if(t!==js(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return El(n).isEqual(El(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Bs(i.timestampValue),a=Bs(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return zs(i.bytesValue).isEqual(zs(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return Cn(i.geoPointValue.latitude)===Cn(s.geoPointValue.latitude)&&Cn(i.geoPointValue.longitude)===Cn(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Cn(i.integerValue)===Cn(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Cn(i.doubleValue),a=Cn(s.doubleValue);return o===a?lc(o)===lc(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return ya(n.arrayValue.values||[],e.arrayValue.values||[],Bi);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(rg(o)!==rg(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Bi(o[l],a[l])))return!1;return!0}(n,e);default:return tt(52216,{left:n})}}function Tl(n,e){return(n.values||[]).find(t=>Bi(t,e))!==void 0}function ba(n,e){if(n===e)return 0;const t=js(n),r=js(e);if(t!==r)return mt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return mt(n.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Cn(s.integerValue||s.doubleValue),l=Cn(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,e);case 3:return sg(n.timestampValue,e.timestampValue);case 4:return sg(El(n),El(e));case 5:return ph(n.stringValue,e.stringValue);case 6:return function(s,o){const a=zs(s),l=zs(o);return a.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=mt(a[c],l[c]);if(h!==0)return h}return mt(a.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const a=mt(Cn(s.latitude),Cn(o.latitude));return a!==0?a:mt(Cn(s.longitude),Cn(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return og(n.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,h;const p=s.fields||{},m=o.fields||{},g=(a=p[cc])===null||a===void 0?void 0:a.arrayValue,b=(l=m[cc])===null||l===void 0?void 0:l.arrayValue,E=mt(((c=g==null?void 0:g.values)===null||c===void 0?void 0:c.length)||0,((h=b==null?void 0:b.values)===null||h===void 0?void 0:h.length)||0);return E!==0?E:og(g,b)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===ou.mapValue&&o===ou.mapValue)return 0;if(s===ou.mapValue)return 1;if(o===ou.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let p=0;p<l.length&&p<h.length;++p){const m=ph(l[p],h[p]);if(m!==0)return m;const g=ba(a[l[p]],c[h[p]]);if(g!==0)return g}return mt(l.length,h.length)}(n.mapValue,e.mapValue);default:throw tt(23264,{Pe:t})}}function sg(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return mt(n,e);const t=Bs(n),r=Bs(e),i=mt(t.seconds,r.seconds);return i!==0?i:mt(t.nanos,r.nanos)}function og(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=ba(t[i],r[i]);if(s)return s}return mt(t.length,r.length)}function Ea(n){return mh(n)}function mh(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Bs(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return zs(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Ye.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=mh(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${mh(t.fields[o])}`;return i+"}"}(n.mapValue):tt(61005,{value:n})}function Pu(n){switch(js(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Bc(n);return e?16+Pu(e):16;case 5:return 2*n.stringValue.length;case 6:return zs(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+Pu(s),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return Ys(r.fields,(s,o)=>{i+=s.length+Pu(o)}),i}(n.mapValue);default:throw tt(13486,{value:n})}}function dc(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function gh(n){return!!n&&"integerValue"in n}function gf(n){return!!n&&"arrayValue"in n}function ag(n){return!!n&&"nullValue"in n}function lg(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Du(n){return!!n&&"mapValue"in n}function jA(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[Gv])===null||t===void 0?void 0:t.stringValue)===Kv}function al(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ys(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=al(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=al(n.arrayValue.values[t]);return e}return Object.assign({},n)}function qA(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===zA}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(e){this.value=e}static empty(){return new Ir({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Du(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=al(t)}setAll(e){let t=Wn.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=al(o):i.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());Du(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Bi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Du(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Ys(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Ir(al(this.value))}}function Qv(n){const e=[];return Ys(n.fields,(t,r)=>{const i=new Wn([t]);if(Du(r)){const s=Qv(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Lr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Jn(e,0,ut.min(),ut.min(),ut.min(),Ir.empty(),0)}static newFoundDocument(e,t,r,i){return new Jn(e,1,t,ut.min(),r,i,0)}static newNoDocument(e,t){return new Jn(e,2,t,ut.min(),ut.min(),Ir.empty(),0)}static newUnknownDocument(e,t){return new Jn(e,3,t,ut.min(),ut.min(),Ir.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ut.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ir.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ir.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ut.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Jn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Jn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(e,t){this.position=e,this.inclusive=t}}function ug(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(s.field.isKeyField()?r=Ye.comparator(Ye.fromName(o.referenceValue),t.key):r=ba(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function cg(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Bi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(e,t="asc"){this.field=e,this.dir=t}}function HA(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv{}class Dn extends Yv{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new GA(e,t,r):t==="array-contains"?new YA(e,r):t==="in"?new XA(e,r):t==="not-in"?new ZA(e,r):t==="array-contains-any"?new JA(e,r):new Dn(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new KA(e,r):new QA(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ba(t,this.value)):t!==null&&js(this.value)===js(t)&&this.matchesComparison(ba(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return tt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class di extends Yv{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new di(e,t)}matches(e){return Xv(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function Xv(n){return n.op==="and"}function Zv(n){return WA(n)&&Xv(n)}function WA(n){for(const e of n.filters)if(e instanceof di)return!1;return!0}function _h(n){if(n instanceof Dn)return n.field.canonicalString()+n.op.toString()+Ea(n.value);if(Zv(n))return n.filters.map(e=>_h(e)).join(",");{const e=n.filters.map(t=>_h(t)).join(",");return`${n.op}(${e})`}}function Jv(n,e){return n instanceof Dn?function(r,i){return i instanceof Dn&&r.op===i.op&&r.field.isEqual(i.field)&&Bi(r.value,i.value)}(n,e):n instanceof di?function(r,i){return i instanceof di&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&Jv(o,i.filters[a]),!0):!1}(n,e):void tt(19439)}function ey(n){return n instanceof Dn?function(t){return`${t.field.canonicalString()} ${t.op} ${Ea(t.value)}`}(n):n instanceof di?function(t){return t.op.toString()+" {"+t.getFilters().map(ey).join(" ,")+"}"}(n):"Filter"}class GA extends Dn{constructor(e,t,r){super(e,t,r),this.key=Ye.fromName(r.referenceValue)}matches(e){const t=Ye.comparator(e.key,this.key);return this.matchesComparison(t)}}class KA extends Dn{constructor(e,t){super(e,"in",t),this.keys=ty("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class QA extends Dn{constructor(e,t){super(e,"not-in",t),this.keys=ty("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function ty(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Ye.fromName(r.referenceValue))}class YA extends Dn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return gf(t)&&Tl(t.arrayValue,this.value)}}class XA extends Dn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Tl(this.value.arrayValue,t)}}class ZA extends Dn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Tl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Tl(this.value.arrayValue,t)}}class JA extends Dn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!gf(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Tl(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Ie=null}}function dg(n,e=null,t=[],r=[],i=null,s=null,o=null){return new ex(n,e,t,r,i,s,o)}function _f(n){const e=ot(n);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>_h(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Fc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ea(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ea(r)).join(",")),e.Ie=t}return e.Ie}function wf(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!HA(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Jv(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!cg(n.startAt,e.startAt)&&cg(n.endAt,e.endAt)}function wh(n){return Ye.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function tx(n,e,t,r,i,s,o,a){return new Lo(n,e,t,r,i,s,o,a)}function vf(n){return new Lo(n)}function hg(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function yf(n){return n.collectionGroup!==null}function ma(n){const e=ot(n);if(e.Ee===null){e.Ee=[];const t=new Set;for(const s of e.explicitOrderBy)e.Ee.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Mn(Wn.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.Ee.push(new Il(s,r))}),t.has(Wn.keyField().canonicalString())||e.Ee.push(new Il(Wn.keyField(),r))}return e.Ee}function Mi(n){const e=ot(n);return e.de||(e.de=ny(e,ma(n))),e.de}function nx(n){const e=ot(n);return e.Ae||(e.Ae=ny(e,n.explicitOrderBy)),e.Ae}function ny(n,e){if(n.limitType==="F")return dg(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Il(i.field,s)});const t=n.endAt?new ka(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new ka(n.startAt.position,n.startAt.inclusive):null;return dg(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function vh(n,e){const t=n.filters.concat([e]);return new Lo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function hc(n,e,t){return new Lo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function zc(n,e){return wf(Mi(n),Mi(e))&&n.limitType===e.limitType}function ry(n){return`${_f(Mi(n))}|lt:${n.limitType}`}function ia(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>ey(i)).join(", ")}]`),Fc(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Ea(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Ea(i)).join(",")),`Target(${r})`}(Mi(n))}; limitType=${n.limitType})`}function jc(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Ye.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of ma(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=ug(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,ma(r),i)||r.endAt&&!function(o,a,l){const c=ug(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,ma(r),i))}(n,e)}function rx(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function iy(n){return(e,t)=>{let r=!1;for(const i of ma(n)){const s=ix(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function ix(n,e,t){const r=n.field.isKeyField()?Ye.comparator(e.key,t.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?ba(l,c):tt(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return tt(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ys(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return Bv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sx=new wn(Ye.comparator);function as(){return sx}const sy=new wn(Ye.comparator);function Ya(...n){let e=sy;for(const t of n)e=e.insert(t.key,t);return e}function oy(n){let e=sy;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function go(){return ll()}function ay(){return ll()}function ll(){return new Mo(n=>n.toString(),(n,e)=>n.isEqual(e))}const ox=new wn(Ye.comparator),ax=new Mn(Ye.comparator);function At(...n){let e=ax;for(const t of n)e=e.add(t);return e}const lx=new Mn(mt);function ux(){return lx}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bf(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:lc(e)?"-0":e}}function ly(n){return{integerValue:""+n}}function cx(n,e){return MA(e)?ly(e):bf(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(){this._=void 0}}function dx(n,e,t){return n instanceof fc?function(i,s){const o={fields:{[qv]:{stringValue:jv},[Wv]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&$c(s)&&(s=Bc(s)),s&&(o.fields[Hv]=s),{mapValue:o}}(t,e):n instanceof Al?cy(n,e):n instanceof xl?dy(n,e):function(i,s){const o=uy(i,s),a=fg(o)+fg(i.Re);return gh(o)&&gh(i.Re)?ly(a):bf(i.serializer,a)}(n,e)}function hx(n,e,t){return n instanceof Al?cy(n,e):n instanceof xl?dy(n,e):t}function uy(n,e){return n instanceof pc?function(r){return gh(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class fc extends qc{}class Al extends qc{constructor(e){super(),this.elements=e}}function cy(n,e){const t=hy(e);for(const r of n.elements)t.some(i=>Bi(i,r))||t.push(r);return{arrayValue:{values:t}}}class xl extends qc{constructor(e){super(),this.elements=e}}function dy(n,e){let t=hy(e);for(const r of n.elements)t=t.filter(i=>!Bi(i,r));return{arrayValue:{values:t}}}class pc extends qc{constructor(e,t){super(),this.serializer=e,this.Re=t}}function fg(n){return Cn(n.integerValue||n.doubleValue)}function hy(n){return gf(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function fx(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Al&&i instanceof Al||r instanceof xl&&i instanceof xl?ya(r.elements,i.elements,Bi):r instanceof pc&&i instanceof pc?Bi(r.Re,i.Re):r instanceof fc&&i instanceof fc}(n.transform,e.transform)}class px{constructor(e,t){this.version=e,this.transformResults=t}}class Gr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Gr}static exists(e){return new Gr(void 0,e)}static updateTime(e){return new Gr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ou(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Hc{}function fy(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Ef(n.key,Gr.none()):new $l(n.key,n.data,Gr.none());{const t=n.data,r=Ir.empty();let i=new Mn(Wn.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Xs(n.key,r,new Lr(i.toArray()),Gr.none())}}function mx(n,e,t){n instanceof $l?function(i,s,o){const a=i.value.clone(),l=mg(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Xs?function(i,s,o){if(!Ou(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=mg(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(py(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function ul(n,e,t,r){return n instanceof $l?function(s,o,a,l){if(!Ou(s.precondition,o))return a;const c=s.value.clone(),h=gg(s.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(n,e,t,r):n instanceof Xs?function(s,o,a,l){if(!Ou(s.precondition,o))return a;const c=gg(s.fieldTransforms,l,o),h=o.data;return h.setAll(py(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(s,o,a){return Ou(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function gx(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=uy(r.transform,i||null);s!=null&&(t===null&&(t=Ir.empty()),t.set(r.field,s))}return t||null}function pg(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ya(r,i,(s,o)=>fx(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class $l extends Hc{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Xs extends Hc{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function py(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function mg(n,e,t){const r=new Map;Mt(n.length===t.length,32656,{Ve:t.length,me:n.length});for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,hx(o,a,t[i]))}return r}function gg(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,dx(s,o,e))}return r}class Ef extends Hc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class _x extends Hc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&mx(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=ul(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=ul(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=ay();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;const l=fy(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(ut.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),At())}isEqual(e){return this.batchId===e.batchId&&ya(this.mutations,e.mutations,(t,r)=>pg(t,r))&&ya(this.baseMutations,e.baseMutations,(t,r)=>pg(t,r))}}class kf{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Mt(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let i=function(){return ox}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new kf(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vx{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(e,t,r){this.alias=e,this.aggregateType=t,this.fieldPath=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pn,St;function Ex(n){switch(n){case Te.OK:return tt(64938);case Te.CANCELLED:case Te.UNKNOWN:case Te.DEADLINE_EXCEEDED:case Te.RESOURCE_EXHAUSTED:case Te.INTERNAL:case Te.UNAVAILABLE:case Te.UNAUTHENTICATED:return!1;case Te.INVALID_ARGUMENT:case Te.NOT_FOUND:case Te.ALREADY_EXISTS:case Te.PERMISSION_DENIED:case Te.FAILED_PRECONDITION:case Te.ABORTED:case Te.OUT_OF_RANGE:case Te.UNIMPLEMENTED:case Te.DATA_LOSS:return!0;default:return tt(15467,{code:n})}}function my(n){if(n===void 0)return os("GRPC error has no .code"),Te.UNKNOWN;switch(n){case Pn.OK:return Te.OK;case Pn.CANCELLED:return Te.CANCELLED;case Pn.UNKNOWN:return Te.UNKNOWN;case Pn.DEADLINE_EXCEEDED:return Te.DEADLINE_EXCEEDED;case Pn.RESOURCE_EXHAUSTED:return Te.RESOURCE_EXHAUSTED;case Pn.INTERNAL:return Te.INTERNAL;case Pn.UNAVAILABLE:return Te.UNAVAILABLE;case Pn.UNAUTHENTICATED:return Te.UNAUTHENTICATED;case Pn.INVALID_ARGUMENT:return Te.INVALID_ARGUMENT;case Pn.NOT_FOUND:return Te.NOT_FOUND;case Pn.ALREADY_EXISTS:return Te.ALREADY_EXISTS;case Pn.PERMISSION_DENIED:return Te.PERMISSION_DENIED;case Pn.FAILED_PRECONDITION:return Te.FAILED_PRECONDITION;case Pn.ABORTED:return Te.ABORTED;case Pn.OUT_OF_RANGE:return Te.OUT_OF_RANGE;case Pn.UNIMPLEMENTED:return Te.UNIMPLEMENTED;case Pn.DATA_LOSS:return Te.DATA_LOSS;default:return tt(39323,{code:n})}}(St=Pn||(Pn={}))[St.OK=0]="OK",St[St.CANCELLED=1]="CANCELLED",St[St.UNKNOWN=2]="UNKNOWN",St[St.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",St[St.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",St[St.NOT_FOUND=5]="NOT_FOUND",St[St.ALREADY_EXISTS=6]="ALREADY_EXISTS",St[St.PERMISSION_DENIED=7]="PERMISSION_DENIED",St[St.UNAUTHENTICATED=16]="UNAUTHENTICATED",St[St.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",St[St.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",St[St.ABORTED=10]="ABORTED",St[St.OUT_OF_RANGE=11]="OUT_OF_RANGE",St[St.UNIMPLEMENTED=12]="UNIMPLEMENTED",St[St.INTERNAL=13]="INTERNAL",St[St.UNAVAILABLE=14]="UNAVAILABLE",St[St.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kx=new Ms([4294967295,4294967295],0);function _g(n){const e=Uv().encode(n),t=new Rv;return t.update(e),new Uint8Array(t.digest())}function wg(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ms([t,r],0),new Ms([i,s],0)]}class Tf{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Xa(`Invalid padding: ${t}`);if(r<0)throw new Xa(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Xa(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Xa(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=Ms.fromNumber(this.pe)}we(e,t,r){let i=e.add(t.multiply(Ms.fromNumber(r)));return i.compare(kx)===1&&(i=new Ms([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const t=_g(e),[r,i]=wg(t);for(let s=0;s<this.hashCount;s++){const o=this.we(r,i,s);if(!this.be(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Tf(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.pe===0)return;const t=_g(e),[r,i]=wg(t);for(let s=0;s<this.hashCount;s++){const o=this.we(r,i,s);this.Se(o)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Xa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Bl.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Wc(ut.min(),i,new wn(mt),as(),At())}}class Bl{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Bl(r,t,At(),At(),At())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{constructor(e,t,r,i){this.De=e,this.removedTargetIds=t,this.key=r,this.ve=i}}class gy{constructor(e,t){this.targetId=e,this.Ce=t}}class _y{constructor(e,t,r=Gn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class vg{constructor(){this.Fe=0,this.Me=yg(),this.xe=Gn.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=At(),t=At(),r=At();return this.Me.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:tt(38017,{changeType:s})}}),new Bl(this.xe,this.Oe,e,t,r)}Qe(){this.Ne=!1,this.Me=yg()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,Mt(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class Tx{constructor(e){this.ze=e,this.je=new Map,this.He=as(),this.Je=au(),this.Ye=au(),this.Ze=new wn(mt)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{const r=this.rt(t);switch(e.state){case 0:this.it(t)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(t);break;case 3:this.it(t)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),r.ke(e.resumeToken));break;default:tt(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((r,i)=>{this.it(i)&&t(i)})}ot(e){const t=e.targetId,r=e.Ce.count,i=this._t(t);if(i){const s=i.target;if(wh(s))if(r===0){const o=new Ye(s.path);this.tt(t,o,Jn.newNoDocument(o,ut.min()))}else Mt(r===1,20013,{expectedCount:r});else{const o=this.ut(t);if(o!==r){const a=this.ct(e),l=a?this.lt(a,e,o):1;if(l!==0){this.st(t);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,c)}}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let o,a;try{o=zs(r).toUint8Array()}catch(l){if(l instanceof zv)return va("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Tf(o,i,s)}catch(l){return va(l instanceof Xa?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.pe===0?null:a}lt(e,t,r){return t.Ce.count===r-this.Tt(e,t.targetId)?0:2}Tt(e,t){const r=this.ze.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const o=this.ze.Pt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.tt(t,s,null),i++)}),i}It(e){const t=new Map;this.je.forEach((s,o)=>{const a=this._t(o);if(a){if(s.current&&wh(a.target)){const l=new Ye(a.target.path);this.Et(l).has(o)||this.dt(o,l)||this.tt(o,l,Jn.newNoDocument(l,e))}s.Le&&(t.set(o,s.qe()),s.Qe())}});let r=At();this.Ye.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this._t(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.He.forEach((s,o)=>o.setReadTime(e));const i=new Wc(e,t,this.Ze,this.He,r);return this.He=as(),this.Je=au(),this.Ye=au(),this.Ze=new wn(mt),i}et(e,t){if(!this.it(e))return;const r=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,r),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,r){if(!this.it(e))return;const i=this.rt(e);this.dt(e,t)?i.$e(t,1):i.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),r&&(this.He=this.He.insert(t,r))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new vg,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new Mn(mt),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new Mn(mt),this.Je=this.Je.insert(e,t)),t}it(e){const t=this._t(e)!==null;return t||We("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new vg),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function au(){return new wn(Ye.comparator)}function yg(){return new wn(Ye.comparator)}const Ix={asc:"ASCENDING",desc:"DESCENDING"},Ax={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},xx={and:"AND",or:"OR"};class Cx{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function yh(n,e){return n.useProto3Json||Fc(e)?e:{value:e}}function mc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function wy(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Sx(n,e){return mc(n,e.toTimestamp())}function Vi(n){return Mt(!!n,49232),ut.fromTimestamp(function(t){const r=Bs(t);return new st(r.seconds,r.nanos)}(n))}function If(n,e){return bh(n,e).canonicalString()}function bh(n,e){const t=function(i){return new un(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function vy(n){const e=un.fromString(n);return Mt(Iy(e),10190,{key:e.toString()}),e}function Eh(n,e){return If(n.databaseId,e.path)}function xd(n,e){const t=vy(e);if(t.get(1)!==n.databaseId.projectId)throw new Be(Te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Be(Te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ye(by(t))}function yy(n,e){return If(n.databaseId,e)}function Rx(n){const e=vy(n);return e.length===4?un.emptyPath():by(e)}function kh(n){return new un(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function by(n){return Mt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function bg(n,e,t){return{name:Eh(n,e),fields:t.value.mapValue.fields}}function Px(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:tt(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(Mt(h===void 0||typeof h=="string",58123),Gn.fromBase64String(h||"")):(Mt(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Gn.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?Te.UNKNOWN:my(c.code);return new Be(h,c.message||"")}(o);t=new _y(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=xd(n,r.document.name),s=Vi(r.document.updateTime),o=r.document.createTime?Vi(r.document.createTime):ut.min(),a=new Ir({mapValue:{fields:r.document.fields}}),l=Jn.newFoundDocument(i,s,o,a),c=r.targetIds||[],h=r.removedTargetIds||[];t=new Nu(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=xd(n,r.document),s=r.readTime?Vi(r.readTime):ut.min(),o=Jn.newNoDocument(i,s),a=r.removedTargetIds||[];t=new Nu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=xd(n,r.document),s=r.removedTargetIds||[];t=new Nu([],s,i,null)}else{if(!("filter"in e))return tt(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new bx(i,s),a=r.targetId;t=new gy(a,o)}}return t}function Dx(n,e){let t;if(e instanceof $l)t={update:bg(n,e.key,e.value)};else if(e instanceof Ef)t={delete:Eh(n,e.key)};else if(e instanceof Xs)t={update:bg(n,e.key,e.data),updateMask:Bx(e.fieldMask)};else{if(!(e instanceof _x))return tt(16599,{ft:e.type});t={verify:Eh(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof fc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Al)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof xl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof pc)return{fieldPath:o.field.canonicalString(),increment:a.Re};throw tt(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:Sx(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:tt(27497)}(n,e.precondition)),t}function Ox(n,e){return n&&n.length>0?(Mt(e!==void 0,14353),n.map(t=>function(i,s){let o=i.updateTime?Vi(i.updateTime):Vi(s);return o.isEqual(ut.min())&&(o=Vi(s)),new px(o,i.transformResults||[])}(t,e))):[]}function Nx(n,e){return{documents:[yy(n,e.path)]}}function Ey(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=yy(n,i);const s=function(c){if(c.length!==0)return Ty(di.create(c,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(h=>function(m){return{field:Ss(m.field),direction:Ux(m.dir)}}(h))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=yh(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{gt:t,parent:i}}function Lx(n,e,t,r){const{gt:i,parent:s}=Ey(n,e),o={},a=[];let l=0;return t.forEach(c=>{const h="aggregate_"+l++;o[h]=c.alias,c.aggregateType==="count"?a.push({alias:h,count:{}}):c.aggregateType==="avg"?a.push({alias:h,avg:{field:Ss(c.fieldPath)}}):c.aggregateType==="sum"&&a.push({alias:h,sum:{field:Ss(c.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:a,structuredQuery:i.structuredQuery},parent:i.parent},yt:o,parent:s}}function Mx(n){let e=Rx(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Mt(r===1,65062);const h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];t.where&&(s=function(p){const m=ky(p);return m instanceof di&&Zv(m)?m.getFilters():[m]}(t.where));let o=[];t.orderBy&&(o=function(p){return p.map(m=>function(b){return new Il(sa(b.field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(m))}(t.orderBy));let a=null;t.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,Fc(m)?null:m}(t.limit));let l=null;t.startAt&&(l=function(p){const m=!!p.before,g=p.values||[];return new ka(g,m)}(t.startAt));let c=null;return t.endAt&&(c=function(p){const m=!p.before,g=p.values||[];return new ka(g,m)}(t.endAt)),tx(e,i,o,s,a,"F",l,c)}function Vx(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return tt(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function ky(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=sa(t.unaryFilter.field);return Dn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=sa(t.unaryFilter.field);return Dn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=sa(t.unaryFilter.field);return Dn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=sa(t.unaryFilter.field);return Dn.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return tt(61313);default:return tt(60726)}}(n):n.fieldFilter!==void 0?function(t){return Dn.create(sa(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return tt(58110);default:return tt(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return di.create(t.compositeFilter.filters.map(r=>ky(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return tt(1026)}}(t.compositeFilter.op))}(n):tt(30097,{filter:n})}function Ux(n){return Ix[n]}function Fx(n){return Ax[n]}function $x(n){return xx[n]}function Ss(n){return{fieldPath:n.canonicalString()}}function sa(n){return Wn.fromServerFormat(n.fieldPath)}function Ty(n){return n instanceof Dn?function(t){if(t.op==="=="){if(lg(t.value))return{unaryFilter:{field:Ss(t.field),op:"IS_NAN"}};if(ag(t.value))return{unaryFilter:{field:Ss(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(lg(t.value))return{unaryFilter:{field:Ss(t.field),op:"IS_NOT_NAN"}};if(ag(t.value))return{unaryFilter:{field:Ss(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ss(t.field),op:Fx(t.op),value:t.value}}}(n):n instanceof di?function(t){const r=t.getFilters().map(i=>Ty(i));return r.length===1?r[0]:{compositeFilter:{op:$x(t.op),filters:r}}}(n):tt(54877,{filter:n})}function Bx(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Iy(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(e,t,r,i,s=ut.min(),o=ut.min(),a=Gn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Ds(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ds(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ds(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ds(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(e){this.wt=e}}function jx(n){const e=Mx({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?hc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qx{constructor(){this.yn=new Hx}addToCollectionParentIndex(e,t){return this.yn.add(t),Se.resolve()}getCollectionParents(e,t){return Se.resolve(this.yn.getEntries(t))}addFieldIndex(e,t){return Se.resolve()}deleteFieldIndex(e,t){return Se.resolve()}deleteAllFieldIndexes(e){return Se.resolve()}createTargetIndexes(e,t){return Se.resolve()}getDocumentsMatchingTarget(e,t){return Se.resolve(null)}getIndexType(e,t){return Se.resolve(0)}getFieldIndexes(e,t){return Se.resolve([])}getNextCollectionGroupToUpdate(e){return Se.resolve(null)}getMinOffset(e,t){return Se.resolve($s.min())}getMinOffsetFromCollectionGroup(e,t){return Se.resolve($s.min())}updateCollectionGroup(e,t,r){return Se.resolve()}updateIndexEntries(e,t){return Se.resolve()}}class Hx{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Mn(un.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Mn(un.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ay=41943040;class Er{static withCacheSize(e){return new Er(e,Er.DEFAULT_COLLECTION_PERCENTILE,Er.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Er.DEFAULT_COLLECTION_PERCENTILE=10,Er.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Er.DEFAULT=new Er(Ay,Er.DEFAULT_COLLECTION_PERCENTILE,Er.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Er.DISABLED=new Er(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e){this.nr=e}next(){return this.nr+=2,this.nr}static rr(){return new Ta(0)}static ir(){return new Ta(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kg="LruGarbageCollector",Wx=1048576;function Tg([n,e],[t,r]){const i=mt(n,t);return i===0?mt(e,r):i}class Gx{constructor(e){this.cr=e,this.buffer=new Mn(Tg),this.lr=0}hr(){return++this.lr}Pr(e){const t=[e,this.hr()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Tg(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Kx{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Tr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ir(6e4)}stop(){this.Tr&&(this.Tr.cancel(),this.Tr=null)}get started(){return this.Tr!==null}Ir(e){We(kg,`Garbage collection scheduled in ${e}ms`),this.Tr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Tr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Pa(t)?We(kg,"Ignoring IndexedDB error during garbage collection: ",t):await Ra(t)}await this.Ir(3e5)})}}class Qx{constructor(e,t){this.Er=e,this.params=t}calculateTargetCount(e,t){return this.Er.dr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return Se.resolve(Uc.le);const r=new Gx(t);return this.Er.forEachTarget(e,i=>r.Pr(i.sequenceNumber)).next(()=>this.Er.Ar(e,i=>r.Pr(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Er.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Er.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(We("LruGarbageCollector","Garbage collection skipped; disabled"),Se.resolve(Eg)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(We("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Eg):this.Rr(e,t))}getCacheSize(e){return this.Er.getCacheSize(e)}Rr(e,t){let r,i,s,o,a,l,c;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(We("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,o=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(s=p,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(c=Date.now(),ra()<=Tt.DEBUG&&We("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${p} documents in `+(c-l)+`ms
Total Duration: ${c-h}ms`),Se.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:p})))}}function Yx(n,e){return new Qx(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{constructor(){this.changes=new Mo(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Jn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?Se.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&ul(r.mutation,i,Lr.empty(),st.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,At()).next(()=>r))}getLocalViewOfDocuments(e,t,r=At()){const i=go();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=Ya();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=go();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,At()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=as();const o=ll(),a=function(){return ll()}();return t.forEach((l,c)=>{const h=r.get(c.key);i.has(c.key)&&(h===void 0||h.mutation instanceof Xs)?s=s.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),ul(h.mutation,c,h.mutation.getFieldMask(),st.now())):o.set(c.key,Lr.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,h)=>o.set(c,h)),t.forEach((c,h)=>{var p;return a.set(c,new Zx(h,(p=o.get(c))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){const r=ll();let i=new wn((o,a)=>o-a),s=At();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=t.get(l);if(c===null)return;let h=r.get(l)||Lr.empty();h=a.applyToLocalView(c,h),r.set(l,h);const p=(i.get(a.batchId)||At()).add(l);i=i.insert(a.batchId,p)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,p=ay();h.forEach(m=>{if(!s.has(m)){const g=fy(t.get(m),r.get(m));g!==null&&p.set(m,g),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,p))}return Se.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return Ye.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):yf(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):Se.resolve(go());let a=bl,l=s;return o.next(c=>Se.forEach(c,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),s.get(h)?Se.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{l=l.insert(h,m)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,At())).next(h=>({batchId:a,changes:oy(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ye(t)).next(r=>{let i=Ya();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let o=Ya();return this.indexManager.getCollectionParents(e,s).next(a=>Se.forEach(a,l=>{const c=function(p,m){return new Lo(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(h=>{h.forEach((p,m)=>{o=o.insert(p,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((l,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,Jn.newInvalidDocument(h)))});let a=Ya();return o.forEach((l,c)=>{const h=s.get(l);h!==void 0&&ul(h.mutation,c,Lr.empty(),st.now()),jc(t,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(e){this.serializer=e,this.Fr=new Map,this.Mr=new Map}getBundleMetadata(e,t){return Se.resolve(this.Fr.get(t))}saveBundleMetadata(e,t){return this.Fr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Vi(i.createTime)}}(t)),Se.resolve()}getNamedQuery(e,t){return Se.resolve(this.Mr.get(t))}saveNamedQuery(e,t){return this.Mr.set(t.name,function(i){return{name:i.name,query:jx(i.bundledQuery),readTime:Vi(i.readTime)}}(t)),Se.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(){this.overlays=new wn(Ye.comparator),this.Or=new Map}getOverlay(e,t){return Se.resolve(this.overlays.get(t))}getOverlays(e,t){const r=go();return Se.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.St(e,t,s)}),Se.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Or.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Or.delete(r)),Se.resolve()}getOverlaysForCollection(e,t,r){const i=go(),s=t.length+1,o=new Ye(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!t.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return Se.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new wn((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===t&&c.largestBatchId>r){let h=s.get(c.largestBatchId);h===null&&(h=go(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=go(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=i)););return Se.resolve(a)}St(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Or.get(i.largestBatchId).delete(r.key);this.Or.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new vx(t,r));let s=this.Or.get(t);s===void 0&&(s=At(),this.Or.set(t,s)),this.Or.set(t,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(){this.sessionToken=Gn.EMPTY_BYTE_STRING}getSessionToken(e){return Se.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Se.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(){this.Nr=new Mn($n.Br),this.Lr=new Mn($n.kr)}isEmpty(){return this.Nr.isEmpty()}addReference(e,t){const r=new $n(e,t);this.Nr=this.Nr.add(r),this.Lr=this.Lr.add(r)}qr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Qr(new $n(e,t))}$r(e,t){e.forEach(r=>this.removeReference(r,t))}Ur(e){const t=new Ye(new un([])),r=new $n(t,e),i=new $n(t,e+1),s=[];return this.Lr.forEachInRange([r,i],o=>{this.Qr(o),s.push(o.key)}),s}Kr(){this.Nr.forEach(e=>this.Qr(e))}Qr(e){this.Nr=this.Nr.delete(e),this.Lr=this.Lr.delete(e)}Wr(e){const t=new Ye(new un([])),r=new $n(t,e),i=new $n(t,e+1);let s=At();return this.Lr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new $n(e,0),r=this.Nr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class $n{constructor(e,t){this.key=e,this.Gr=t}static Br(e,t){return Ye.comparator(e.key,t.key)||mt(e.Gr,t.Gr)}static kr(e,t){return mt(e.Gr,t.Gr)||Ye.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Jn=1,this.zr=new Mn($n.Br)}checkEmpty(e){return Se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const s=this.Jn;this.Jn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new wx(s,t,r,i);this.mutationQueue.push(o);for(const a of i)this.zr=this.zr.add(new $n(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Se.resolve(o)}lookupMutationBatch(e,t){return Se.resolve(this.jr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.Hr(r),s=i<0?0:i;return Se.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Se.resolve(this.mutationQueue.length===0?mf:this.Jn-1)}getAllMutationBatches(e){return Se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new $n(t,0),i=new $n(t,Number.POSITIVE_INFINITY),s=[];return this.zr.forEachInRange([r,i],o=>{const a=this.jr(o.Gr);s.push(a)}),Se.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Mn(mt);return t.forEach(i=>{const s=new $n(i,0),o=new $n(i,Number.POSITIVE_INFINITY);this.zr.forEachInRange([s,o],a=>{r=r.add(a.Gr)})}),Se.resolve(this.Jr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;Ye.isDocumentKey(s)||(s=s.child(""));const o=new $n(new Ye(s),0);let a=new Mn(mt);return this.zr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.Gr)),!0)},o),Se.resolve(this.Jr(a))}Jr(e){const t=[];return e.forEach(r=>{const i=this.jr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Mt(this.Yr(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.zr;return Se.forEach(t.mutations,i=>{const s=new $n(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.zr=r})}Xn(e){}containsKey(e,t){const r=new $n(t,0),i=this.zr.firstAfterOrEqual(r);return Se.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Se.resolve()}Yr(e,t){return this.Hr(e)}Hr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}jr(e){const t=this.Hr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(e){this.Zr=e,this.docs=function(){return new wn(Ye.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Zr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Se.resolve(r?r.document.mutableCopy():Jn.newInvalidDocument(t))}getEntries(e,t){let r=as();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Jn.newInvalidDocument(i))}),Se.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=as();const o=t.path,a=new Ye(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||DA(PA(h),r)<=0||(i.has(h.key)||jc(t,h))&&(s=s.insert(h.key,h.mutableCopy()))}return Se.resolve(s)}getAllFromCollectionGroup(e,t,r,i){tt(9500)}Xr(e,t){return Se.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new sC(this)}getSize(e){return Se.resolve(this.size)}}class sC extends Xx{constructor(e){super(),this.vr=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.vr.addEntry(e,i)):this.vr.removeEntry(r)}),Se.waitFor(t)}getFromCache(e,t){return this.vr.getEntry(e,t)}getAllFromCache(e,t){return this.vr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(e){this.persistence=e,this.ei=new Mo(t=>_f(t),wf),this.lastRemoteSnapshotVersion=ut.min(),this.highestTargetId=0,this.ti=0,this.ni=new Af,this.targetCount=0,this.ri=Ta.rr()}forEachTarget(e,t){return this.ei.forEach((r,i)=>t(i)),Se.resolve()}getLastRemoteSnapshotVersion(e){return Se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Se.resolve(this.ti)}allocateTargetId(e){return this.highestTargetId=this.ri.next(),Se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.ti&&(this.ti=t),Se.resolve()}ar(e){this.ei.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ri=new Ta(t),this.highestTargetId=t),e.sequenceNumber>this.ti&&(this.ti=e.sequenceNumber)}addTargetData(e,t){return this.ar(t),this.targetCount+=1,Se.resolve()}updateTargetData(e,t){return this.ar(t),Se.resolve()}removeTargetData(e,t){return this.ei.delete(t.target),this.ni.Ur(t.targetId),this.targetCount-=1,Se.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.ei.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.ei.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),Se.waitFor(s).next(()=>i)}getTargetCount(e){return Se.resolve(this.targetCount)}getTargetData(e,t){const r=this.ei.get(t)||null;return Se.resolve(r)}addMatchingKeys(e,t,r){return this.ni.qr(t,r),Se.resolve()}removeMatchingKeys(e,t,r){this.ni.$r(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),Se.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.ni.Ur(t),Se.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ni.Wr(t);return Se.resolve(r)}containsKey(e,t){return Se.resolve(this.ni.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xy{constructor(e,t){this.ii={},this.overlays={},this.si=new Uc(0),this.oi=!1,this.oi=!0,this._i=new nC,this.referenceDelegate=e(this),this.ai=new oC(this),this.indexManager=new qx,this.remoteDocumentCache=function(i){return new iC(i)}(r=>this.referenceDelegate.ui(r)),this.serializer=new zx(t),this.ci=new eC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.oi=!1,Promise.resolve()}get started(){return this.oi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new tC,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ii[e.toKey()];return r||(r=new rC(t,this.referenceDelegate),this.ii[e.toKey()]=r),r}getGlobalsCache(){return this._i}getTargetCache(){return this.ai}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.ci}runTransaction(e,t,r){We("MemoryPersistence","Starting transaction:",e);const i=new aC(this.si.next());return this.referenceDelegate.li(),r(i).next(s=>this.referenceDelegate.hi(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Pi(e,t){return Se.or(Object.values(this.ii).map(r=>()=>r.containsKey(e,t)))}}class aC extends NA{constructor(e){super(),this.currentSequenceNumber=e}}class xf{constructor(e){this.persistence=e,this.Ti=new Af,this.Ii=null}static Ei(e){return new xf(e)}get di(){if(this.Ii)return this.Ii;throw tt(60996)}addReference(e,t,r){return this.Ti.addReference(r,t),this.di.delete(r.toString()),Se.resolve()}removeReference(e,t,r){return this.Ti.removeReference(r,t),this.di.add(r.toString()),Se.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),Se.resolve()}removeTarget(e,t){this.Ti.Ur(t.targetId).forEach(i=>this.di.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.di.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}li(){this.Ii=new Set}hi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Se.forEach(this.di,r=>{const i=Ye.fromPath(r);return this.Ai(e,i).next(s=>{s||t.removeEntry(i,ut.min())})}).next(()=>(this.Ii=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ai(e,t).next(r=>{r?this.di.delete(t.toString()):this.di.add(t.toString())})}ui(e){return 0}Ai(e,t){return Se.or([()=>Se.resolve(this.Ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Pi(e,t)])}}class gc{constructor(e,t){this.persistence=e,this.Ri=new Mo(r=>VA(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=Yx(this,t)}static Ei(e,t){return new gc(e,t)}li(){}hi(e){return Se.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.Vr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Vr(e){let t=0;return this.Ar(e,r=>{t++}).next(()=>t)}Ar(e,t){return Se.forEach(this.Ri,(r,i)=>this.gr(e,r,i).next(s=>s?Se.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.Xr(e,o=>this.gr(e,o,t).next(a=>{a||(r++,s.removeEntry(o,ut.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.Ri.set(t,e.currentSequenceNumber),Se.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.Ri.set(r,e.currentSequenceNumber),Se.resolve()}removeReference(e,t,r){return this.Ri.set(r,e.currentSequenceNumber),Se.resolve()}updateLimboDocument(e,t){return this.Ri.set(t,e.currentSequenceNumber),Se.resolve()}ui(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Pu(e.data.value)),t}gr(e,t,r){return Se.or([()=>this.persistence.Pi(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.Ri.get(t);return Se.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.ls=r,this.hs=i}static Ps(e,t){let r=At(),i=At();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Cf(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(){this.Ts=!1,this.Is=!1,this.Es=100,this.ds=function(){return Nk()?8:LA(tr())>0?6:4}()}initialize(e,t){this.As=e,this.indexManager=t,this.Ts=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.Rs(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Vs(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new lC;return this.fs(e,t,o).next(a=>{if(s.result=a,this.Is)return this.gs(e,t,o,a.size)})}).next(()=>s.result)}gs(e,t,r,i){return r.documentReadCount<this.Es?(ra()<=Tt.DEBUG&&We("QueryEngine","SDK will not create cache indexes for query:",ia(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Es,"documents"),Se.resolve()):(ra()<=Tt.DEBUG&&We("QueryEngine","Query:",ia(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ds*i?(ra()<=Tt.DEBUG&&We("QueryEngine","The SDK decides to create cache indexes for query:",ia(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Mi(t))):Se.resolve())}Rs(e,t){if(hg(t))return Se.resolve(null);let r=Mi(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=hc(t,null,"F"),r=Mi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=At(...s);return this.As.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ps(t,a);return this.ys(t,c,o,l.readTime)?this.Rs(e,hc(t,null,"F")):this.ws(e,c,t,l)}))})))}Vs(e,t,r,i){return hg(t)||i.isEqual(ut.min())?Se.resolve(null):this.As.getDocuments(e,r).next(s=>{const o=this.ps(t,s);return this.ys(t,o,r,i)?Se.resolve(null):(ra()<=Tt.DEBUG&&We("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ia(t)),this.ws(e,o,t,RA(i,bl)).next(a=>a))})}ps(e,t){let r=new Mn(iy(e));return t.forEach((i,s)=>{jc(e,s)&&(r=r.add(s))}),r}ys(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}fs(e,t,r){return ra()<=Tt.DEBUG&&We("QueryEngine","Using full collection scan to execute query:",ia(t)),this.As.getDocumentsMatchingQuery(e,t,$s.min(),r)}ws(e,t,r,i){return this.As.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sf="LocalStore",cC=3e8;class dC{constructor(e,t,r,i){this.persistence=e,this.bs=t,this.serializer=i,this.Ss=new wn(mt),this.Ds=new Mo(s=>_f(s),wf),this.vs=new Map,this.Cs=e.getRemoteDocumentCache(),this.ai=e.getTargetCache(),this.ci=e.getBundleCache(),this.Fs(r)}Fs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Jx(this.Cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Cs.setIndexManager(this.indexManager),this.bs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ss))}}function hC(n,e,t,r){return new dC(n,e,t,r)}async function Cy(n,e){const t=ot(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Fs(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=At();for(const c of i){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of s){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return t.localDocuments.getDocuments(r,l).next(c=>({Ms:c,removedBatchIds:o,addedBatchIds:a}))})})}function fC(n,e){const t=ot(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.Cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const p=c.batch,m=p.keys();let g=Se.resolve();return m.forEach(b=>{g=g.next(()=>h.getEntry(l,b)).next(E=>{const S=c.docVersions.get(b);Mt(S!==null,48541),E.version.compareTo(S)<0&&(p.applyToRemoteDocument(E,c),E.isValidDocument()&&(E.setReadTime(c.commitVersion),h.addEntry(E)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(l,p))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=At();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function Sy(n){const e=ot(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ai.getLastRemoteSnapshotVersion(t))}function pC(n,e){const t=ot(n),r=e.snapshotVersion;let i=t.Ss;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.Cs.newChangeBuffer({trackRemovals:!0});i=t.Ss;const a=[];e.targetChanges.forEach((h,p)=>{const m=i.get(p);if(!m)return;a.push(t.ai.removeMatchingKeys(s,h.removedDocuments,p).next(()=>t.ai.addMatchingKeys(s,h.addedDocuments,p)));let g=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?g=g.withResumeToken(Gn.EMPTY_BYTE_STRING,ut.min()).withLastLimboFreeSnapshotVersion(ut.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,r)),i=i.insert(p,g),function(E,S,O){return E.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=cC?!0:O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0}(m,g,h)&&a.push(t.ai.updateTargetData(s,g))});let l=as(),c=At();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(mC(s,o,e.documentUpdates).next(h=>{l=h.xs,c=h.Os})),!r.isEqual(ut.min())){const h=t.ai.getLastRemoteSnapshotVersion(s).next(p=>t.ai.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return Se.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(t.Ss=i,s))}function mC(n,e,t){let r=At(),i=At();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=as();return t.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(ut.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):We(Sf,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{xs:o,Os:i}})}function gC(n,e){const t=ot(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=mf),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function _C(n,e){const t=ot(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.ai.getTargetData(r,e).next(s=>s?(i=s,Se.resolve(i)):t.ai.allocateTargetId(r).next(o=>(i=new Ds(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.ai.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ss.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ss=t.Ss.insert(r.targetId,r),t.Ds.set(e,r.targetId)),r})}async function Th(n,e,t){const r=ot(n),i=r.Ss.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Pa(o))throw o;We(Sf,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ss=r.Ss.remove(e),r.Ds.delete(i.target)}function Ig(n,e,t){const r=ot(n);let i=ut.min(),s=At();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,h){const p=ot(l),m=p.Ds.get(h);return m!==void 0?Se.resolve(p.Ss.get(m)):p.ai.getTargetData(c,h)}(r,o,Mi(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.ai.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.bs.getDocumentsMatchingQuery(o,e,t?i:ut.min(),t?s:At())).next(a=>(wC(r,rx(e),a),{documents:a,Ns:s})))}function wC(n,e,t){let r=n.vs.get(e)||ut.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.vs.set(e,r)}class Ag{constructor(){this.activeTargetIds=ux()}$s(e){this.activeTargetIds=this.activeTargetIds.add(e)}Us(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Qs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class vC{constructor(){this.So=new Ag,this.Do={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.So.$s(e),this.Do[e]||"not-current"}updateQueryState(e,t,r){this.Do[e]=t}removeLocalQueryTarget(e){this.So.Us(e)}isLocalQueryTarget(e){return this.So.activeTargetIds.has(e)}clearQueryState(e){delete this.Do[e]}getAllActiveQueryTargets(){return this.So.activeTargetIds}isActiveQueryTarget(e){return this.So.activeTargetIds.has(e)}start(){return this.So=new Ag,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{vo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xg="ConnectivityMonitor";class Cg{constructor(){this.Co=()=>this.Fo(),this.Mo=()=>this.xo(),this.Oo=[],this.No()}vo(e){this.Oo.push(e)}shutdown(){window.removeEventListener("online",this.Co),window.removeEventListener("offline",this.Mo)}No(){window.addEventListener("online",this.Co),window.addEventListener("offline",this.Mo)}Fo(){We(xg,"Network connectivity changed: AVAILABLE");for(const e of this.Oo)e(0)}xo(){We(xg,"Network connectivity changed: UNAVAILABLE");for(const e of this.Oo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lu=null;function Ih(){return lu===null?lu=function(){return 268435456+Math.round(2147483648*Math.random())}():lu++,"0x"+lu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cd="RestConnection",bC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class EC{get Bo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Lo=t+"://"+e.host,this.ko=`projects/${r}/databases/${i}`,this.qo=this.databaseId.database===uc?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Qo(e,t,r,i,s){const o=Ih(),a=this.$o(e,t.toUriEncodedString());We(Cd,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.ko,"x-goog-request-params":this.qo};return this.Uo(l,i,s),this.Ko(e,a,l,r).then(c=>(We(Cd,`Received RPC '${e}' ${o}: `,c),c),c=>{throw va(Cd,`RPC '${e}' ${o} failed with error: `,c,"url: ",a,"request:",r),c})}Wo(e,t,r,i,s,o){return this.Qo(e,t,r,i,s)}Uo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Sa}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}$o(e,t){const r=bC[e];return`${this.Lo}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(e){this.Go=e.Go,this.zo=e.zo}jo(e){this.Ho=e}Jo(e){this.Yo=e}Zo(e){this.Xo=e}onMessage(e){this.e_=e}close(){this.zo()}send(e){this.Go(e)}t_(){this.Ho()}n_(){this.Yo()}r_(e){this.Xo(e)}i_(e){this.e_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qn="WebChannelConnection";class TC extends EC{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ko(e,t,r,i){const s=Ih();return new Promise((o,a)=>{const l=new Pv;l.setWithCredentials(!0),l.listenOnce(Dv.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Ru.NO_ERROR:const h=l.getResponseJson();We(Qn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case Ru.TIMEOUT:We(Qn,`RPC '${e}' ${s} timed out`),a(new Be(Te.DEADLINE_EXCEEDED,"Request time out"));break;case Ru.HTTP_ERROR:const p=l.getStatus();if(We(Qn,`RPC '${e}' ${s} failed with status:`,p,"response text:",l.getResponseText()),p>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);const g=m==null?void 0:m.error;if(g&&g.status&&g.message){const b=function(S){const O=S.toLowerCase().replace(/_/g,"-");return Object.values(Te).indexOf(O)>=0?O:Te.UNKNOWN}(g.status);a(new Be(b,g.message))}else a(new Be(Te.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new Be(Te.UNAVAILABLE,"Connection failed."));break;default:tt(9055,{s_:e,streamId:s,o_:l.getLastErrorCode(),__:l.getLastError()})}}finally{We(Qn,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);We(Qn,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",c,r,15)})}a_(e,t,r){const i=Ih(),s=[this.Lo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Lv(),a=Nv(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Uo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;const h=s.join("");We(Qn,`Creating RPC '${e}' stream ${i}: ${h}`,l);const p=o.createWebChannel(h,l);let m=!1,g=!1;const b=new kC({Go:S=>{g?We(Qn,`Not sending because RPC '${e}' stream ${i} is closed:`,S):(m||(We(Qn,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),We(Qn,`RPC '${e}' stream ${i} sending:`,S),p.send(S))},zo:()=>p.close()}),E=(S,O,U)=>{S.listen(O,D=>{try{U(D)}catch(V){setTimeout(()=>{throw V},0)}})};return E(p,Qa.EventType.OPEN,()=>{g||(We(Qn,`RPC '${e}' stream ${i} transport opened.`),b.t_())}),E(p,Qa.EventType.CLOSE,()=>{g||(g=!0,We(Qn,`RPC '${e}' stream ${i} transport closed`),b.r_())}),E(p,Qa.EventType.ERROR,S=>{g||(g=!0,va(Qn,`RPC '${e}' stream ${i} transport errored. Name:`,S.name,"Message:",S.message),b.r_(new Be(Te.UNAVAILABLE,"The operation could not be completed")))}),E(p,Qa.EventType.MESSAGE,S=>{var O;if(!g){const U=S.data[0];Mt(!!U,16349);const D=U,V=(D==null?void 0:D.error)||((O=D[0])===null||O===void 0?void 0:O.error);if(V){We(Qn,`RPC '${e}' stream ${i} received error:`,V);const K=V.status;let oe=function(N){const F=Pn[N];if(F!==void 0)return my(F)}(K),L=V.message;oe===void 0&&(oe=Te.INTERNAL,L="Unknown error status: "+K+" with message "+V.message),g=!0,b.r_(new Be(oe,L)),p.close()}else We(Qn,`RPC '${e}' stream ${i} received:`,U),b.i_(U)}}),E(a,Ov.STAT_EVENT,S=>{S.stat===fh.PROXY?We(Qn,`RPC '${e}' stream ${i} detected buffering proxy`):S.stat===fh.NOPROXY&&We(Qn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.n_()},0),b}}function Sd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gc(n){return new Cx(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ry{constructor(e,t,r=1e3,i=1.5,s=6e4){this.bi=e,this.timerId=t,this.u_=r,this.c_=i,this.l_=s,this.h_=0,this.P_=null,this.T_=Date.now(),this.reset()}reset(){this.h_=0}I_(){this.h_=this.l_}E_(e){this.cancel();const t=Math.floor(this.h_+this.d_()),r=Math.max(0,Date.now()-this.T_),i=Math.max(0,t-r);i>0&&We("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.h_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.P_=this.bi.enqueueAfterDelay(this.timerId,i,()=>(this.T_=Date.now(),e())),this.h_*=this.c_,this.h_<this.u_&&(this.h_=this.u_),this.h_>this.l_&&(this.h_=this.l_)}A_(){this.P_!==null&&(this.P_.skipDelay(),this.P_=null)}cancel(){this.P_!==null&&(this.P_.cancel(),this.P_=null)}d_(){return(Math.random()-.5)*this.h_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sg="PersistentStream";class Py{constructor(e,t,r,i,s,o,a,l){this.bi=e,this.R_=r,this.V_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.m_=0,this.f_=null,this.g_=null,this.stream=null,this.p_=0,this.y_=new Ry(e,t)}w_(){return this.state===1||this.state===5||this.b_()}b_(){return this.state===2||this.state===3}start(){this.p_=0,this.state!==4?this.auth():this.S_()}async stop(){this.w_()&&await this.close(0)}D_(){this.state=0,this.y_.reset()}v_(){this.b_()&&this.f_===null&&(this.f_=this.bi.enqueueAfterDelay(this.R_,6e4,()=>this.C_()))}F_(e){this.M_(),this.stream.send(e)}async C_(){if(this.b_())return this.close(0)}M_(){this.f_&&(this.f_.cancel(),this.f_=null)}x_(){this.g_&&(this.g_.cancel(),this.g_=null)}async close(e,t){this.M_(),this.x_(),this.y_.cancel(),this.m_++,e!==4?this.y_.reset():t&&t.code===Te.RESOURCE_EXHAUSTED?(os(t.toString()),os("Using maximum backoff delay to prevent overloading the backend."),this.y_.I_()):t&&t.code===Te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.O_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zo(t)}O_(){}auth(){this.state=1;const e=this.N_(this.m_),t=this.m_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.m_===t&&this.B_(r,i)},r=>{e(()=>{const i=new Be(Te.UNKNOWN,"Fetching auth token failed: "+r.message);return this.L_(i)})})}B_(e,t){const r=this.N_(this.m_);this.stream=this.k_(e,t),this.stream.jo(()=>{r(()=>this.listener.jo())}),this.stream.Jo(()=>{r(()=>(this.state=2,this.g_=this.bi.enqueueAfterDelay(this.V_,1e4,()=>(this.b_()&&(this.state=3),Promise.resolve())),this.listener.Jo()))}),this.stream.Zo(i=>{r(()=>this.L_(i))}),this.stream.onMessage(i=>{r(()=>++this.p_==1?this.q_(i):this.onNext(i))})}S_(){this.state=5,this.y_.E_(async()=>{this.state=0,this.start()})}L_(e){return We(Sg,`close with error: ${e}`),this.stream=null,this.close(4,e)}N_(e){return t=>{this.bi.enqueueAndForget(()=>this.m_===e?t():(We(Sg,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class IC extends Py{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}k_(e,t){return this.connection.a_("Listen",e,t)}q_(e){return this.onNext(e)}onNext(e){this.y_.reset();const t=Px(this.serializer,e),r=function(s){if(!("targetChange"in s))return ut.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ut.min():o.readTime?Vi(o.readTime):ut.min()}(e);return this.listener.Q_(t,r)}U_(e){const t={};t.database=kh(this.serializer),t.addTarget=function(s,o){let a;const l=o.target;if(a=wh(l)?{documents:Nx(s,l)}:{query:Ey(s,l).gt},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=wy(s,o.resumeToken);const c=yh(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ut.min())>0){a.readTime=mc(s,o.snapshotVersion.toTimestamp());const c=yh(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=Vx(this.serializer,e);r&&(t.labels=r),this.F_(t)}K_(e){const t={};t.database=kh(this.serializer),t.removeTarget=e,this.F_(t)}}class AC extends Py{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get W_(){return this.p_>0}start(){this.lastStreamToken=void 0,super.start()}O_(){this.W_&&this.G_([])}k_(e,t){return this.connection.a_("Write",e,t)}q_(e){return Mt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Mt(!e.writeResults||e.writeResults.length===0,55816),this.listener.z_()}onNext(e){Mt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.y_.reset();const t=Ox(e.writeResults,e.commitTime),r=Vi(e.commitTime);return this.listener.j_(r,t)}H_(){const e={};e.database=kh(this.serializer),this.F_(e)}G_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Dx(this.serializer,r))};this.F_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{}class CC extends xC{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.J_=!1}Y_(){if(this.J_)throw new Be(Te.FAILED_PRECONDITION,"The client has already been terminated.")}Qo(e,t,r,i){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Qo(e,bh(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Be(Te.UNKNOWN,s.toString())})}Wo(e,t,r,i,s){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Wo(e,bh(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Be(Te.UNKNOWN,o.toString())})}terminate(){this.J_=!0,this.connection.terminate()}}class SC{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Z_=0,this.X_=null,this.ea=!0}ta(){this.Z_===0&&(this.na("Unknown"),this.X_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.X_=null,this.ra("Backend didn't respond within 10 seconds."),this.na("Offline"),Promise.resolve())))}ia(e){this.state==="Online"?this.na("Unknown"):(this.Z_++,this.Z_>=1&&(this.sa(),this.ra(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.na("Offline")))}set(e){this.sa(),this.Z_=0,e==="Online"&&(this.ea=!1),this.na(e)}na(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ra(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ea?(os(t),this.ea=!1):We("OnlineStateTracker",t)}sa(){this.X_!==null&&(this.X_.cancel(),this.X_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const So="RemoteStore";class RC{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.oa=[],this._a=new Map,this.aa=new Set,this.ua=[],this.ca=s,this.ca.vo(o=>{r.enqueueAndForget(async()=>{Vo(this)&&(We(So,"Restarting streams for network reachability change."),await async function(l){const c=ot(l);c.aa.add(4),await zl(c),c.la.set("Unknown"),c.aa.delete(4),await Kc(c)}(this))})}),this.la=new SC(r,i)}}async function Kc(n){if(Vo(n))for(const e of n.ua)await e(!0)}async function zl(n){for(const e of n.ua)await e(!1)}function Dy(n,e){const t=ot(n);t._a.has(e.targetId)||(t._a.set(e.targetId,e),Of(t)?Df(t):Da(t).b_()&&Pf(t,e))}function Rf(n,e){const t=ot(n),r=Da(t);t._a.delete(e),r.b_()&&Oy(t,e),t._a.size===0&&(r.b_()?r.v_():Vo(t)&&t.la.set("Unknown"))}function Pf(n,e){if(n.ha.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ut.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Da(n).U_(e)}function Oy(n,e){n.ha.Ke(e),Da(n).K_(e)}function Df(n){n.ha=new Tx({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>n._a.get(e)||null,Pt:()=>n.datastore.serializer.databaseId}),Da(n).start(),n.la.ta()}function Of(n){return Vo(n)&&!Da(n).w_()&&n._a.size>0}function Vo(n){return ot(n).aa.size===0}function Ny(n){n.ha=void 0}async function PC(n){n.la.set("Online")}async function DC(n){n._a.forEach((e,t)=>{Pf(n,e)})}async function OC(n,e){Ny(n),Of(n)?(n.la.ia(e),Df(n)):n.la.set("Unknown")}async function NC(n,e,t){if(n.la.set("Online"),e instanceof _y&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i._a.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i._a.delete(a),i.ha.removeTarget(a))}(n,e)}catch(r){We(So,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await _c(n,r)}else if(e instanceof Nu?n.ha.Xe(e):e instanceof gy?n.ha.ot(e):n.ha.nt(e),!t.isEqual(ut.min()))try{const r=await Sy(n.localStore);t.compareTo(r)>=0&&await function(s,o){const a=s.ha.It(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=s._a.get(c);h&&s._a.set(c,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const h=s._a.get(l);if(!h)return;s._a.set(l,h.withResumeToken(Gn.EMPTY_BYTE_STRING,h.snapshotVersion)),Oy(s,l);const p=new Ds(h.target,l,c,h.sequenceNumber);Pf(s,p)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t)}catch(r){We(So,"Failed to raise snapshot:",r),await _c(n,r)}}async function _c(n,e,t){if(!Pa(e))throw e;n.aa.add(1),await zl(n),n.la.set("Offline"),t||(t=()=>Sy(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{We(So,"Retrying IndexedDB access"),await t(),n.aa.delete(1),await Kc(n)})}function Ly(n,e){return e().catch(t=>_c(n,t,e))}async function Qc(n){const e=ot(n),t=qs(e);let r=e.oa.length>0?e.oa[e.oa.length-1].batchId:mf;for(;LC(e);)try{const i=await gC(e.localStore,r);if(i===null){e.oa.length===0&&t.v_();break}r=i.batchId,MC(e,i)}catch(i){await _c(e,i)}My(e)&&Vy(e)}function LC(n){return Vo(n)&&n.oa.length<10}function MC(n,e){n.oa.push(e);const t=qs(n);t.b_()&&t.W_&&t.G_(e.mutations)}function My(n){return Vo(n)&&!qs(n).w_()&&n.oa.length>0}function Vy(n){qs(n).start()}async function VC(n){qs(n).H_()}async function UC(n){const e=qs(n);for(const t of n.oa)e.G_(t.mutations)}async function FC(n,e,t){const r=n.oa.shift(),i=kf.from(r,e,t);await Ly(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await Qc(n)}async function $C(n,e){e&&qs(n).W_&&await async function(r,i){if(function(o){return Ex(o)&&o!==Te.ABORTED}(i.code)){const s=r.oa.shift();qs(r).D_(),await Ly(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Qc(r)}}(n,e),My(n)&&Vy(n)}async function Rg(n,e){const t=ot(n);t.asyncQueue.verifyOperationInProgress(),We(So,"RemoteStore received new credentials");const r=Vo(t);t.aa.add(3),await zl(t),r&&t.la.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.aa.delete(3),await Kc(t)}async function BC(n,e){const t=ot(n);e?(t.aa.delete(2),await Kc(t)):e||(t.aa.add(2),await zl(t),t.la.set("Unknown"))}function Da(n){return n.Pa||(n.Pa=function(t,r,i){const s=ot(t);return s.Y_(),new IC(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{jo:PC.bind(null,n),Jo:DC.bind(null,n),Zo:OC.bind(null,n),Q_:NC.bind(null,n)}),n.ua.push(async e=>{e?(n.Pa.D_(),Of(n)?Df(n):n.la.set("Unknown")):(await n.Pa.stop(),Ny(n))})),n.Pa}function qs(n){return n.Ta||(n.Ta=function(t,r,i){const s=ot(t);return s.Y_(),new AC(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{jo:()=>Promise.resolve(),Jo:VC.bind(null,n),Zo:$C.bind(null,n),z_:UC.bind(null,n),j_:FC.bind(null,n)}),n.ua.push(async e=>{e?(n.Ta.D_(),await Qc(n)):(await n.Ta.stop(),n.oa.length>0&&(We(So,`Stopping write stream with ${n.oa.length} pending writes`),n.oa=[]))})),n.Ta}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Li,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,a=new Nf(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Be(Te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Lf(n,e){if(os("AsyncQueue",`${e}: ${n}`),Pa(n))return new Be(Te.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{static emptySet(e){return new ga(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ye.comparator(t.key,r.key):(t,r)=>Ye.comparator(t.key,r.key),this.keyedMap=Ya(),this.sortedSet=new wn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ga)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new ga;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg{constructor(){this.Ia=new wn(Ye.comparator)}track(e){const t=e.doc.key,r=this.Ia.get(t);r?e.type!==0&&r.type===3?this.Ia=this.Ia.insert(t,e):e.type===3&&r.type!==1?this.Ia=this.Ia.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Ia=this.Ia.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Ia=this.Ia.remove(t):e.type===1&&r.type===2?this.Ia=this.Ia.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):tt(63341,{Vt:e,Ea:r}):this.Ia=this.Ia.insert(t,e)}da(){const e=[];return this.Ia.inorderTraversal((t,r)=>{e.push(r)}),e}}class Ia{constructor(e,t,r,i,s,o,a,l,c){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new Ia(e,t,ga.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(){this.Aa=void 0,this.Ra=[]}Va(){return this.Ra.some(e=>e.ma())}}class jC{constructor(){this.queries=Dg(),this.onlineState="Unknown",this.fa=new Set}terminate(){(function(t,r){const i=ot(t),s=i.queries;i.queries=Dg(),s.forEach((o,a)=>{for(const l of a.Ra)l.onError(r)})})(this,new Be(Te.ABORTED,"Firestore shutting down"))}}function Dg(){return new Mo(n=>ry(n),zc)}async function Uy(n,e){const t=ot(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.Va()&&e.ma()&&(r=2):(s=new zC,r=e.ma()?0:1);try{switch(r){case 0:s.Aa=await t.onListen(i,!0);break;case 1:s.Aa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(o){const a=Lf(o,`Initialization of query '${ia(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.Ra.push(e),e.ga(t.onlineState),s.Aa&&e.pa(s.Aa)&&Mf(t)}async function Fy(n,e){const t=ot(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const o=s.Ra.indexOf(e);o>=0&&(s.Ra.splice(o,1),s.Ra.length===0?i=e.ma()?0:1:!s.Va()&&e.ma()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function qC(n,e){const t=ot(n);let r=!1;for(const i of e){const s=i.query,o=t.queries.get(s);if(o){for(const a of o.Ra)a.pa(i)&&(r=!0);o.Aa=i}}r&&Mf(t)}function HC(n,e,t){const r=ot(n),i=r.queries.get(e);if(i)for(const s of i.Ra)s.onError(t);r.queries.delete(e)}function Mf(n){n.fa.forEach(e=>{e.next()})}var Ah,Og;(Og=Ah||(Ah={})).ya="default",Og.Cache="cache";class $y{constructor(e,t,r){this.query=e,this.wa=t,this.ba=!1,this.Sa=null,this.onlineState="Unknown",this.options=r||{}}pa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Ia(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ba?this.Da(e)&&(this.wa.next(e),t=!0):this.va(e,this.onlineState)&&(this.Ca(e),t=!0),this.Sa=e,t}onError(e){this.wa.error(e)}ga(e){this.onlineState=e;let t=!1;return this.Sa&&!this.ba&&this.va(this.Sa,e)&&(this.Ca(this.Sa),t=!0),t}va(e,t){if(!e.fromCache||!this.ma())return!0;const r=t!=="Offline";return(!this.options.Fa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Da(e){if(e.docChanges.length>0)return!0;const t=this.Sa&&this.Sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Ca(e){e=Ia.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ba=!0,this.wa.next(e)}ma(){return this.options.source!==Ah.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class By{constructor(e){this.key=e}}class zy{constructor(e){this.key=e}}class WC{constructor(e,t){this.query=e,this.qa=t,this.Qa=null,this.hasCachedResults=!1,this.current=!1,this.$a=At(),this.mutatedKeys=At(),this.Ua=iy(e),this.Ka=new ga(this.Ua)}get Wa(){return this.qa}Ga(e,t){const r=t?t.za:new Pg,i=t?t.Ka:this.Ka;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{const m=i.get(h),g=jc(this.query,p)?p:null,b=!!m&&this.mutatedKeys.has(m.key),E=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let S=!1;m&&g?m.data.isEqual(g.data)?b!==E&&(r.track({type:3,doc:g}),S=!0):this.ja(m,g)||(r.track({type:2,doc:g}),S=!0,(l&&this.Ua(g,l)>0||c&&this.Ua(g,c)<0)&&(a=!0)):!m&&g?(r.track({type:0,doc:g}),S=!0):m&&!g&&(r.track({type:1,doc:m}),S=!0,(l||c)&&(a=!0)),S&&(g?(o=o.add(g),s=E?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ka:o,za:r,ys:a,mutatedKeys:s}}ja(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.Ka;this.Ka=e.Ka,this.mutatedKeys=e.mutatedKeys;const o=e.za.da();o.sort((h,p)=>function(g,b){const E=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return tt(20277,{Vt:S})}};return E(g)-E(b)}(h.type,p.type)||this.Ua(h.doc,p.doc)),this.Ha(r),i=i!=null&&i;const a=t&&!i?this.Ja():[],l=this.$a.size===0&&this.current&&!i?1:0,c=l!==this.Qa;return this.Qa=l,o.length!==0||c?{snapshot:new Ia(this.query,e.Ka,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ya:a}:{Ya:a}}ga(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ka:this.Ka,za:new Pg,mutatedKeys:this.mutatedKeys,ys:!1},!1)):{Ya:[]}}Za(e){return!this.qa.has(e)&&!!this.Ka.has(e)&&!this.Ka.get(e).hasLocalMutations}Ha(e){e&&(e.addedDocuments.forEach(t=>this.qa=this.qa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qa=this.qa.delete(t)),this.current=e.current)}Ja(){if(!this.current)return[];const e=this.$a;this.$a=At(),this.Ka.forEach(r=>{this.Za(r.key)&&(this.$a=this.$a.add(r.key))});const t=[];return e.forEach(r=>{this.$a.has(r)||t.push(new zy(r))}),this.$a.forEach(r=>{e.has(r)||t.push(new By(r))}),t}Xa(e){this.qa=e.Ns,this.$a=At();const t=this.Ga(e.documents);return this.applyChanges(t,!0)}eu(){return Ia.fromInitialDocuments(this.query,this.Ka,this.mutatedKeys,this.Qa===0,this.hasCachedResults)}}const Vf="SyncEngine";class GC{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class KC{constructor(e){this.key=e,this.tu=!1}}class QC{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.nu={},this.ru=new Mo(a=>ry(a),zc),this.iu=new Map,this.su=new Set,this.ou=new wn(Ye.comparator),this._u=new Map,this.au=new Af,this.uu={},this.cu=new Map,this.lu=Ta.ir(),this.onlineState="Unknown",this.hu=void 0}get isPrimaryClient(){return this.hu===!0}}async function YC(n,e,t=!0){const r=Ky(n);let i;const s=r.ru.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.eu()):i=await jy(r,e,t,!0),i}async function XC(n,e){const t=Ky(n);await jy(t,e,!0,!1)}async function jy(n,e,t,r){const i=await _C(n.localStore,Mi(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t);let a;return r&&(a=await ZC(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&Dy(n.remoteStore,i),a}async function ZC(n,e,t,r,i){n.Pu=(p,m,g)=>async function(E,S,O,U){let D=S.view.Ga(O);D.ys&&(D=await Ig(E.localStore,S.query,!1).then(({documents:L})=>S.view.Ga(L,D)));const V=U&&U.targetChanges.get(S.targetId),K=U&&U.targetMismatches.get(S.targetId)!=null,oe=S.view.applyChanges(D,E.isPrimaryClient,V,K);return Lg(E,S.targetId,oe.Ya),oe.snapshot}(n,p,m,g);const s=await Ig(n.localStore,e,!0),o=new WC(e,s.Ns),a=o.Ga(s.documents),l=Bl.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),c=o.applyChanges(a,n.isPrimaryClient,l);Lg(n,t,c.Ya);const h=new GC(e,t,o);return n.ru.set(e,h),n.iu.has(t)?n.iu.get(t).push(e):n.iu.set(t,[e]),c.snapshot}async function JC(n,e,t){const r=ot(n),i=r.ru.get(e),s=r.iu.get(i.targetId);if(s.length>1)return r.iu.set(i.targetId,s.filter(o=>!zc(o,e))),void r.ru.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Th(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Rf(r.remoteStore,i.targetId),xh(r,i.targetId)}).catch(Ra)):(xh(r,i.targetId),await Th(r.localStore,i.targetId,!0))}async function eS(n,e){const t=ot(n),r=t.ru.get(e),i=t.iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Rf(t.remoteStore,r.targetId))}async function tS(n,e,t){const r=lS(n);try{const i=await function(o,a){const l=ot(o),c=st.now(),h=a.reduce((g,b)=>g.add(b.key),At());let p,m;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let b=as(),E=At();return l.Cs.getEntries(g,h).next(S=>{b=S,b.forEach((O,U)=>{U.isValidDocument()||(E=E.add(O))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,b)).next(S=>{p=S;const O=[];for(const U of a){const D=gx(U,p.get(U.key).overlayedDocument);D!=null&&O.push(new Xs(U.key,D,Qv(D.value.mapValue),Gr.exists(!0)))}return l.mutationQueue.addMutationBatch(g,c,O,a)}).next(S=>{m=S;const O=S.applyToLocalDocumentSet(p,E);return l.documentOverlayCache.saveOverlays(g,S.batchId,O)})}).then(()=>({batchId:m.batchId,changes:oy(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.uu[o.currentUser.toKey()];c||(c=new wn(mt)),c=c.insert(a,l),o.uu[o.currentUser.toKey()]=c}(r,i.batchId,t),await jl(r,i.changes),await Qc(r.remoteStore)}catch(i){const s=Lf(i,"Failed to persist write");t.reject(s)}}async function qy(n,e){const t=ot(n);try{const r=await pC(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t._u.get(s);o&&(Mt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.tu=!0:i.modifiedDocuments.size>0?Mt(o.tu,14607):i.removedDocuments.size>0&&(Mt(o.tu,42227),o.tu=!1))}),await jl(t,r,e)}catch(r){await Ra(r)}}function Ng(n,e,t){const r=ot(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.ru.forEach((s,o)=>{const a=o.view.ga(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=ot(o);l.onlineState=a;let c=!1;l.queries.forEach((h,p)=>{for(const m of p.Ra)m.ga(a)&&(c=!0)}),c&&Mf(l)}(r.eventManager,e),i.length&&r.nu.Q_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function nS(n,e,t){const r=ot(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r._u.get(e),s=i&&i.key;if(s){let o=new wn(Ye.comparator);o=o.insert(s,Jn.newNoDocument(s,ut.min()));const a=At().add(s),l=new Wc(ut.min(),new Map,new wn(mt),o,a);await qy(r,l),r.ou=r.ou.remove(s),r._u.delete(e),Uf(r)}else await Th(r.localStore,e,!1).then(()=>xh(r,e,t)).catch(Ra)}async function rS(n,e){const t=ot(n),r=e.batch.batchId;try{const i=await fC(t.localStore,e);Wy(t,r,null),Hy(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await jl(t,i)}catch(i){await Ra(i)}}async function iS(n,e,t){const r=ot(n);try{const i=await function(o,a){const l=ot(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(p=>(Mt(p!==null,37113),h=p.keys(),l.mutationQueue.removeMutationBatch(c,p))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(r.localStore,e);Wy(r,e,t),Hy(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await jl(r,i)}catch(i){await Ra(i)}}function Hy(n,e){(n.cu.get(e)||[]).forEach(t=>{t.resolve()}),n.cu.delete(e)}function Wy(n,e,t){const r=ot(n);let i=r.uu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.uu[r.currentUser.toKey()]=i}}function xh(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.iu.get(e))n.ru.delete(r),t&&n.nu.Tu(r,t);n.iu.delete(e),n.isPrimaryClient&&n.au.Ur(e).forEach(r=>{n.au.containsKey(r)||Gy(n,r)})}function Gy(n,e){n.su.delete(e.path.canonicalString());const t=n.ou.get(e);t!==null&&(Rf(n.remoteStore,t),n.ou=n.ou.remove(e),n._u.delete(t),Uf(n))}function Lg(n,e,t){for(const r of t)r instanceof By?(n.au.addReference(r.key,e),sS(n,r)):r instanceof zy?(We(Vf,"Document no longer in limbo: "+r.key),n.au.removeReference(r.key,e),n.au.containsKey(r.key)||Gy(n,r.key)):tt(19791,{Iu:r})}function sS(n,e){const t=e.key,r=t.path.canonicalString();n.ou.get(t)||n.su.has(r)||(We(Vf,"New document in limbo: "+t),n.su.add(r),Uf(n))}function Uf(n){for(;n.su.size>0&&n.ou.size<n.maxConcurrentLimboResolutions;){const e=n.su.values().next().value;n.su.delete(e);const t=new Ye(un.fromString(e)),r=n.lu.next();n._u.set(r,new KC(t)),n.ou=n.ou.insert(t,r),Dy(n.remoteStore,new Ds(Mi(vf(t.path)),r,"TargetPurposeLimboResolution",Uc.le))}}async function jl(n,e,t){const r=ot(n),i=[],s=[],o=[];r.ru.isEmpty()||(r.ru.forEach((a,l)=>{o.push(r.Pu(l,e,t).then(c=>{var h;if((c||t)&&r.isPrimaryClient){const p=c?!c.fromCache:(h=t==null?void 0:t.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,p?"current":"not-current")}if(c){i.push(c);const p=Cf.Ps(l.targetId,c);s.push(p)}}))}),await Promise.all(o),r.nu.Q_(i),await async function(l,c){const h=ot(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>Se.forEach(c,m=>Se.forEach(m.ls,g=>h.persistence.referenceDelegate.addReference(p,m.targetId,g)).next(()=>Se.forEach(m.hs,g=>h.persistence.referenceDelegate.removeReference(p,m.targetId,g)))))}catch(p){if(!Pa(p))throw p;We(Sf,"Failed to update sequence numbers: "+p)}for(const p of c){const m=p.targetId;if(!p.fromCache){const g=h.Ss.get(m),b=g.snapshotVersion,E=g.withLastLimboFreeSnapshotVersion(b);h.Ss=h.Ss.insert(m,E)}}}(r.localStore,s))}async function oS(n,e){const t=ot(n);if(!t.currentUser.isEqual(e)){We(Vf,"User change. New user:",e.toKey());const r=await Cy(t.localStore,e);t.currentUser=e,function(s,o){s.cu.forEach(a=>{a.forEach(l=>{l.reject(new Be(Te.CANCELLED,o))})}),s.cu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await jl(t,r.Ms)}}function aS(n,e){const t=ot(n),r=t._u.get(e);if(r&&r.tu)return At().add(r.key);{let i=At();const s=t.iu.get(e);if(!s)return i;for(const o of s){const a=t.ru.get(o);i=i.unionWith(a.view.Wa)}return i}}function Ky(n){const e=ot(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=qy.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=aS.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=nS.bind(null,e),e.nu.Q_=qC.bind(null,e.eventManager),e.nu.Tu=HC.bind(null,e.eventManager),e}function lS(n){const e=ot(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=rS.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=iS.bind(null,e),e}class wc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Gc(e.databaseInfo.databaseId),this.sharedClientState=this.Au(e),this.persistence=this.Ru(e),await this.persistence.start(),this.localStore=this.Vu(e),this.gcScheduler=this.mu(e,this.localStore),this.indexBackfillerScheduler=this.fu(e,this.localStore)}mu(e,t){return null}fu(e,t){return null}Vu(e){return hC(this.persistence,new uC,e.initialUser,this.serializer)}Ru(e){return new xy(xf.Ei,this.serializer)}Au(e){return new vC}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}wc.provider={build:()=>new wc};class uS extends wc{constructor(e){super(),this.cacheSizeBytes=e}mu(e,t){Mt(this.persistence.referenceDelegate instanceof gc,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Kx(r,e.asyncQueue,t)}Ru(e){const t=this.cacheSizeBytes!==void 0?Er.withCacheSize(this.cacheSizeBytes):Er.DEFAULT;return new xy(r=>gc.Ei(r,t),this.serializer)}}class Ch{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Ng(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=oS.bind(null,this.syncEngine),await BC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new jC}()}createDatastore(e){const t=Gc(e.databaseInfo.databaseId),r=function(s){return new TC(s)}(e.databaseInfo);return function(s,o,a,l){return new CC(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,s,o,a){return new RC(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,t=>Ng(this.syncEngine,t,0),function(){return Cg.C()?new Cg:new yC}())}createSyncEngine(e,t){return function(i,s,o,a,l,c,h){const p=new QC(i,s,o,a,l,c);return h&&(p.hu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const s=ot(i);We(So,"RemoteStore shutting down."),s.aa.add(5),await zl(s),s.ca.shutdown(),s.la.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Ch.provider={build:()=>new Ch};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qy{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.pu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.pu(this.observer.error,e):os("Uncaught Error in snapshot listener:",e.toString()))}yu(){this.muted=!0}pu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hs="FirestoreClient";class cS{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Yn.UNAUTHENTICATED,this.clientId=Fv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{We(Hs,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(We(Hs,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Li;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Lf(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Rd(n,e){n.asyncQueue.verifyOperationInProgress(),We(Hs,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Cy(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function Mg(n,e){n.asyncQueue.verifyOperationInProgress();const t=await dS(n);We(Hs,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>Rg(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>Rg(e.remoteStore,i)),n._onlineComponents=e}async function dS(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){We(Hs,"Using user provided OfflineComponentProvider");try{await Rd(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===Te.FAILED_PRECONDITION||i.code===Te.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;va("Error using user provided cache. Falling back to memory cache: "+t),await Rd(n,new wc)}}else We(Hs,"Using default OfflineComponentProvider"),await Rd(n,new uS(void 0));return n._offlineComponents}async function Ff(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(We(Hs,"Using user provided OnlineComponentProvider"),await Mg(n,n._uninitializedComponentsProvider._online)):(We(Hs,"Using default OnlineComponentProvider"),await Mg(n,new Ch))),n._onlineComponents}function hS(n){return Ff(n).then(e=>e.syncEngine)}function fS(n){return Ff(n).then(e=>e.datastore)}async function Yy(n){const e=await Ff(n),t=e.eventManager;return t.onListen=YC.bind(null,e.syncEngine),t.onUnlisten=JC.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=XC.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=eS.bind(null,e.syncEngine),t}function pS(n,e,t={}){const r=new Li;return n.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const h=new Qy({next:m=>{h.yu(),o.enqueueAndForget(()=>Fy(s,p));const g=m.docs.has(a);!g&&m.fromCache?c.reject(new Be(Te.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&m.fromCache&&l&&l.source==="server"?c.reject(new Be(Te.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(m)},error:m=>c.reject(m)}),p=new $y(vf(a.path),h,{includeMetadataChanges:!0,Fa:!0});return Uy(s,p)}(await Yy(n),n.asyncQueue,e,t,r)),r.promise}function mS(n,e,t={}){const r=new Li;return n.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const h=new Qy({next:m=>{h.yu(),o.enqueueAndForget(()=>Fy(s,p)),m.fromCache&&l.source==="server"?c.reject(new Be(Te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),p=new $y(a,h,{includeMetadataChanges:!0,Fa:!0});return Uy(s,p)}(await Yy(n),n.asyncQueue,e,t,r)),r.promise}function gS(n,e,t){const r=new Li;return n.asyncQueue.enqueueAndForget(async()=>{try{const i=await fS(n);r.resolve(async function(o,a,l){var c;const h=ot(o),{request:p,yt:m,parent:g}=Lx(h.serializer,nx(a),l);h.connection.Bo||delete p.parent;const b=(await h.Wo("RunAggregationQuery",h.serializer.databaseId,g,p,1)).filter(S=>!!S.result);Mt(b.length===1,64727);const E=(c=b[0].result)===null||c===void 0?void 0:c.aggregateFields;return Object.keys(E).reduce((S,O)=>(S[m[O]]=E[O],S),{})}(i,e,t))}catch(i){r.reject(i)}}),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xy(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vg=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zy(n,e,t){if(!t)throw new Be(Te.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function _S(n,e,t,r){if(e===!0&&r===!0)throw new Be(Te.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Ug(n){if(!Ye.isDocumentKey(n))throw new Be(Te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Fg(n){if(Ye.isDocumentKey(n))throw new Be(Te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Yc(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":tt(12329,{type:typeof n})}function Kr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Be(Te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Yc(n);throw new Be(Te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function wS(n,e){if(e<=0)throw new Be(Te.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jy="firestore.googleapis.com",$g=!0;class Bg{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Be(Te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Jy,this.ssl=$g}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:$g;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Ay;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Wx)throw new Be(Te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}_S("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Xy((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Be(Te.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Be(Te.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Be(Te.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Xc{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Bg({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Be(Te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Be(Te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Bg(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new bA;switch(r.type){case"firstParty":return new IA(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Be(Te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=Vg.get(t);r&&(We("ComponentProvider","Removing Datastore"),Vg.delete(t),r.terminate())}(this),Promise.resolve()}}function vS(n,e,t,r={}){var i;const s=(n=Kr(n,Xc))._getSettings(),o=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),a=`${e}:${t}`;s.host!==Jy&&s.host!==a&&va("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l=Object.assign(Object.assign({},s),{host:a,ssl:!1,emulatorOptions:r});if(!ko(l,o)&&(n._setSettings(l),r.mockUserToken)){let c,h;if(typeof r.mockUserToken=="string")c=r.mockUserToken,h=Yn.MOCK_USER;else{c=zw(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new Be(Te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Yn(p)}n._authCredentials=new EA(new Vv(c,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new cs(this.firestore,e,this._query)}}class mr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Vs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new mr(this.firestore,e,this._key)}}class Vs extends cs{constructor(e,t,r){super(e,t,vf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new mr(this.firestore,null,new Ye(e))}withConverter(e){return new Vs(this.firestore,e,this._path)}}function Wt(n,e,...t){if(n=tn(n),Zy("collection","path",e),n instanceof Xc){const r=un.fromString(e,...t);return Fg(r),new Vs(n,null,r)}{if(!(n instanceof mr||n instanceof Vs))throw new Be(Te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(un.fromString(e,...t));return Fg(r),new Vs(n.firestore,null,r)}}function ht(n,e,...t){if(n=tn(n),arguments.length===1&&(e=Fv.newId()),Zy("doc","path",e),n instanceof Xc){const r=un.fromString(e,...t);return Ug(r),new mr(n,null,new Ye(r))}{if(!(n instanceof mr||n instanceof Vs))throw new Be(Te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(un.fromString(e,...t));return Ug(r),new mr(n.firestore,n instanceof Vs?n.converter:null,new Ye(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zg="AsyncQueue";class jg{constructor(e=Promise.resolve()){this.Qu=[],this.$u=!1,this.Uu=[],this.Ku=null,this.Wu=!1,this.Gu=!1,this.zu=[],this.y_=new Ry(this,"async_queue_retry"),this.ju=()=>{const r=Sd();r&&We(zg,"Visibility state changed to "+r.visibilityState),this.y_.A_()},this.Hu=e;const t=Sd();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.ju)}get isShuttingDown(){return this.$u}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ju(),this.Yu(e)}enterRestrictedMode(e){if(!this.$u){this.$u=!0,this.Gu=e||!1;const t=Sd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.ju)}}enqueue(e){if(this.Ju(),this.$u)return new Promise(()=>{});const t=new Li;return this.Yu(()=>this.$u&&this.Gu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qu.push(e),this.Zu()))}async Zu(){if(this.Qu.length!==0){try{await this.Qu[0](),this.Qu.shift(),this.y_.reset()}catch(e){if(!Pa(e))throw e;We(zg,"Operation failed with retryable error: "+e)}this.Qu.length>0&&this.y_.E_(()=>this.Zu())}}Yu(e){const t=this.Hu.then(()=>(this.Wu=!0,e().catch(r=>{throw this.Ku=r,this.Wu=!1,os("INTERNAL UNHANDLED ERROR: ",qg(r)),r}).then(r=>(this.Wu=!1,r))));return this.Hu=t,t}enqueueAfterDelay(e,t,r){this.Ju(),this.zu.indexOf(e)>-1&&(t=0);const i=Nf.createAndSchedule(this,e,t,r,s=>this.Xu(s));return this.Uu.push(i),i}Ju(){this.Ku&&tt(47125,{ec:qg(this.Ku)})}verifyOperationInProgress(){}async tc(){let e;do e=this.Hu,await e;while(e!==this.Hu)}nc(e){for(const t of this.Uu)if(t.timerId===e)return!0;return!1}rc(e){return this.tc().then(()=>{this.Uu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Uu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.tc()})}sc(e){this.zu.push(e)}Xu(e){const t=this.Uu.indexOf(e);this.Uu.splice(t,1)}}function qg(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Zs extends Xc{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new jg,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new jg(e),this._firestoreClient=void 0,await e}}}function yS(n,e){const t=typeof n=="object"?n:rf(),r=typeof n=="string"?n:uc,i=Nc(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=Fw("firestore");s&&vS(i,...s)}return i}function Zc(n){if(n._terminated)throw new Be(Te.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||bS(n),n._firestoreClient}function bS(n){var e,t,r;const i=n._freezeSettings(),s=function(a,l,c,h){return new BA(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,Xy(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new cS(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(e="count",t){this._internalFieldPath=t,this.type="AggregateField",this.aggregateType=e}}class kS{constructor(e,t,r){this._userDataWriter=t,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Aa(Gn.fromBase64String(e))}catch(t){throw new Be(Te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Aa(Gn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Be(Te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Be(Te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Be(Te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return mt(this._lat,e._lat)||mt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TS=/^__.*__$/;class IS{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Xs(e,this.data,this.fieldMask,t,this.fieldTransforms):new $l(e,this.data,t,this.fieldTransforms)}}class e0{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Xs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function t0(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw tt(40011,{oc:n})}}class jf{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this._c(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get oc(){return this.settings.oc}ac(e){return new jf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}uc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ac({path:r,cc:!1});return i.lc(e),i}hc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ac({path:r,cc:!1});return i._c(),i}Pc(e){return this.ac({path:void 0,cc:!0})}Tc(e){return vc(e,this.settings.methodName,this.settings.Ic||!1,this.path,this.settings.Ec)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}_c(){if(this.path)for(let e=0;e<this.path.length;e++)this.lc(this.path.get(e))}lc(e){if(e.length===0)throw this.Tc("Document fields must not be empty");if(t0(this.oc)&&TS.test(e))throw this.Tc('Document fields cannot begin and end with "__"')}}class AS{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Gc(e)}dc(e,t,r,i=!1){return new jf({oc:e,methodName:t,Ec:r,path:Wn.emptyPath(),cc:!1,Ic:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ql(n){const e=n._freezeSettings(),t=Gc(n._databaseId);return new AS(n._databaseId,!!e.ignoreUndefinedProperties,t)}function n0(n,e,t,r,i,s={}){const o=n.dc(s.merge||s.mergeFields?2:0,e,t,i);qf("Data must be an object, but it was:",o,r);const a=i0(r,o);let l,c;if(s.merge)l=new Lr(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const p of s.mergeFields){const m=Sh(e,p,t);if(!o.contains(m))throw new Be(Te.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);o0(h,m)||h.push(m)}l=new Lr(h),c=o.fieldTransforms.filter(p=>l.covers(p.field))}else l=null,c=o.fieldTransforms;return new IS(new Ir(a),l,c)}class ed extends $f{_toFieldTransform(e){if(e.oc!==2)throw e.oc===1?e.Tc(`${this._methodName}() can only appear at the top level of your update data`):e.Tc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ed}}function xS(n,e,t,r){const i=n.dc(1,e,t);qf("Data must be an object, but it was:",i,r);const s=[],o=Ir.empty();Ys(r,(l,c)=>{const h=Hf(e,l,t);c=tn(c);const p=i.hc(h);if(c instanceof ed)s.push(h);else{const m=Hl(c,p);m!=null&&(s.push(h),o.set(h,m))}});const a=new Lr(s);return new e0(o,a,i.fieldTransforms)}function CS(n,e,t,r,i,s){const o=n.dc(1,e,t),a=[Sh(e,r,t)],l=[i];if(s.length%2!=0)throw new Be(Te.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)a.push(Sh(e,s[m])),l.push(s[m+1]);const c=[],h=Ir.empty();for(let m=a.length-1;m>=0;--m)if(!o0(c,a[m])){const g=a[m];let b=l[m];b=tn(b);const E=o.hc(g);if(b instanceof ed)c.push(g);else{const S=Hl(b,E);S!=null&&(c.push(g),h.set(g,S))}}const p=new Lr(c);return new e0(h,p,o.fieldTransforms)}function r0(n,e,t,r=!1){return Hl(t,n.dc(r?4:3,e))}function Hl(n,e){if(s0(n=tn(n)))return qf("Unsupported field value:",e,n),i0(n,e);if(n instanceof $f)return function(r,i){if(!t0(i.oc))throw i.Tc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Tc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.cc&&e.oc!==4)throw e.Tc("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=Hl(a,i.Pc(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=tn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return cx(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=st.fromDate(r);return{timestampValue:mc(i.serializer,s)}}if(r instanceof st){const s=new st(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:mc(i.serializer,s)}}if(r instanceof Bf)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Aa)return{bytesValue:wy(i.serializer,r._byteString)};if(r instanceof mr){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Tc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:If(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof zf)return function(o,a){return{mapValue:{fields:{[Gv]:{stringValue:Kv},[cc]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Tc("VectorValues must only contain numeric values.");return bf(a.serializer,c)})}}}}}}(r,i);throw i.Tc(`Unsupported field value: ${Yc(r)}`)}(n,e)}function i0(n,e){const t={};return Bv(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ys(n,(r,i)=>{const s=Hl(i,e.uc(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function s0(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof st||n instanceof Bf||n instanceof Aa||n instanceof mr||n instanceof $f||n instanceof zf)}function qf(n,e,t){if(!s0(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){const r=Yc(t);throw r==="an object"?e.Tc(n+" a custom object"):e.Tc(n+" "+r)}}function Sh(n,e,t){if((e=tn(e))instanceof Jc)return e._internalPath;if(typeof e=="string")return Hf(n,e);throw vc("Field path arguments must be of type string or ",n,!1,void 0,t)}const SS=new RegExp("[~\\*/\\[\\]]");function Hf(n,e,t){if(e.search(SS)>=0)throw vc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Jc(...e.split("."))._internalPath}catch{throw vc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function vc(n,e,t,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new Be(Te.INVALID_ARGUMENT,a+n+l)}function o0(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new mr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new RS(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(td("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class RS extends Wf{data(){return super.data()}}function td(n,e){return typeof e=="string"?Hf(n,e):e instanceof Jc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PS(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Be(Te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Gf{}class nd extends Gf{}function kr(n,e,...t){let r=[];e instanceof Gf&&r.push(e),r=r.concat(t),function(s){const o=s.filter(l=>l instanceof Kf).length,a=s.filter(l=>l instanceof rd).length;if(o>1||o>0&&a>0)throw new Be(Te.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class rd extends nd{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new rd(e,t,r)}_apply(e){const t=this._parse(e);return a0(e._query,t),new cs(e.firestore,e.converter,vh(e._query,t))}_parse(e){const t=ql(e.firestore);return function(s,o,a,l,c,h,p){let m;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new Be(Te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){Gg(p,h);const b=[];for(const E of p)b.push(Wg(l,s,E));m={arrayValue:{values:b}}}else m=Wg(l,s,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||Gg(p,h),m=r0(a,o,p,h==="in"||h==="not-in");return Dn.create(c,h,m)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function _n(n,e,t){const r=e,i=td("where",n);return rd._create(i,r,t)}class Kf extends Gf{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Kf(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:di.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)a0(o,l),o=vh(o,l)}(e._query,t),new cs(e.firestore,e.converter,vh(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Qf extends nd{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Qf(e,t)}_apply(e){const t=function(i,s,o){if(i.startAt!==null)throw new Be(Te.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Be(Te.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Il(s,o)}(e._query,this._field,this._direction);return new cs(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Lo(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}function po(n,e="asc"){const t=e,r=td("orderBy",n);return Qf._create(r,t)}class Yf extends nd{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Yf(e,t,r)}_apply(e){return new cs(e.firestore,e.converter,hc(e._query,this._limit,this._limitType))}}function Rs(n){return wS("limit",n),Yf._create("limit",n,"F")}class Xf extends nd{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Xf(e,t,r)}_apply(e){const t=DS(e,this.type,this._docOrFields,this._inclusive);return new cs(e.firestore,e.converter,function(i,s){return new Lo(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,t))}}function Hg(...n){return Xf._create("startAfter",n,!1)}function DS(n,e,t,r){if(t[0]=tn(t[0]),t[0]instanceof Wf)return function(s,o,a,l,c){if(!l)throw new Be(Te.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const h=[];for(const p of ma(s))if(p.field.isKeyField())h.push(dc(o,l.key));else{const m=l.data.field(p.field);if($c(m))throw new Be(Te.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+p.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){const g=p.field.canonicalString();throw new Be(Te.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${g}' (used as the orderBy) does not exist.`)}h.push(m)}return new ka(h,c)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=ql(n.firestore);return function(o,a,l,c,h,p){const m=o.explicitOrderBy;if(h.length>m.length)throw new Be(Te.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const g=[];for(let b=0;b<h.length;b++){const E=h[b];if(m[b].field.isKeyField()){if(typeof E!="string")throw new Be(Te.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof E}`);if(!yf(o)&&E.indexOf("/")!==-1)throw new Be(Te.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${E}' contains a slash.`);const S=o.path.child(un.fromString(E));if(!Ye.isDocumentKey(S))throw new Be(Te.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${S}' is not because it contains an odd number of segments.`);const O=new Ye(S);g.push(dc(a,O))}else{const S=r0(l,c,E);g.push(S)}}return new ka(g,p)}(n._query,n.firestore._databaseId,i,e,t,r)}}function Wg(n,e,t){if(typeof(t=tn(t))=="string"){if(t==="")throw new Be(Te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!yf(e)&&t.indexOf("/")!==-1)throw new Be(Te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(un.fromString(t));if(!Ye.isDocumentKey(r))throw new Be(Te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return dc(n,new Ye(r))}if(t instanceof mr)return dc(n,t._key);throw new Be(Te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Yc(t)}.`)}function Gg(n,e){if(!Array.isArray(n)||n.length===0)throw new Be(Te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function a0(n,e){const t=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new Be(Te.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Be(Te.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class OS{convertValue(e,t="none"){switch(js(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Cn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(zs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw tt(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Ys(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;const s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[cc].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Cn(o.doubleValue));return new zf(s)}convertGeoPoint(e){return new Bf(Cn(e.latitude),Cn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Bc(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(El(e));default:return null}}convertTimestamp(e){const t=Bs(e);return new st(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=un.fromString(e);Mt(Iy(r),9688,{name:e});const i=new kl(r.get(1),r.get(3)),s=new Ye(r.popFirst(5));return i.isEqual(t)||os(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l0(n,e,t){let r;return r=n?n.toFirestore(e):e,r}function NS(){return new ES("count")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class u0 extends Wf{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Lu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(td("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Lu extends u0{data(e={}){return super.data(e)}}class LS{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Za(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Lu(this._firestore,this._userDataWriter,r.key,r,new Za(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Be(Te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new Lu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Za(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new Lu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Za(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:MS(a.type),doc:l,oldIndex:c,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function MS(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return tt(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ws(n){n=Kr(n,mr);const e=Kr(n.firestore,Zs);return pS(Zc(e),n._key).then(t=>US(e,n,t))}class Zf extends OS{constructor(e){super(),this.firestore=e}convertBytes(e){return new Aa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new mr(this.firestore,null,t)}}function qr(n){n=Kr(n,cs);const e=Kr(n.firestore,Zs),t=Zc(e),r=new Zf(e);return PS(n._query),mS(t,n._query).then(i=>new LS(e,r,n,i))}function VS(n,e,t){n=Kr(n,mr);const r=Kr(n.firestore,Zs),i=l0(n.converter,e);return id(r,[n0(ql(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Gr.none())])}function Ht(n,e,t,...r){n=Kr(n,mr);const i=Kr(n.firestore,Zs),s=ql(i);let o;return o=typeof(e=tn(e))=="string"||e instanceof Jc?CS(s,"updateDoc",n._key,e,t,r):xS(s,"updateDoc",n._key,e),id(i,[o.toMutation(n._key,Gr.exists(!0))])}function Jf(n){return id(Kr(n.firestore,Zs),[new Ef(n._key,Gr.none())])}function Ui(n,e){const t=Kr(n.firestore,Zs),r=ht(n),i=l0(n.converter,e);return id(t,[n0(ql(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Gr.exists(!1))]).then(()=>r)}function id(n,e){return function(r,i){const s=new Li;return r.asyncQueue.enqueueAndForget(async()=>tS(await hS(r),i,s)),s.promise}(Zc(n),e)}function US(n,e,t){const r=t.docs.get(e._key),i=new Zf(n);return new u0(n,i,e._key,r,new Za(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wo(n){return FS(n,{count:NS()})}function FS(n,e){const t=Kr(n.firestore,Zs),r=Zc(t),i=FA(e,(s,o)=>new yx(o,s.aggregateType,s._internalFieldPath));return gS(r,n._query,i).then(s=>function(a,l,c){const h=new Zf(a);return new kS(l,h,c)}(t,n,s))}(function(e,t=!0){(function(i){Sa=i})(No),To(new Fs("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Zs(new kA(r.getProvider("auth-internal")),new AA(o,r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Be(Te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new kl(c.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Pi(Qm,Ym,e),Pi(Qm,Ym,"esm2017")})();const $S={class:"fixed bottom-0 left-0 right-0 top-0 z-50 bg-gray-600 bg-opacity-50"},BS={class:"fixed left-1/2 top-0 max-h-screen w-[100vw] -translate-x-1/2 overflow-auto rounded-md bg-linear-to-br from-orange-600 to-green-400 px-3 py-10 text-center text-xl shadow-lg shadow-black"},zS={class:"text-sm"},jS={__name:"Guide",props:["appVersion"],emits:["close","showChangelog"],setup(n,{emit:e}){return(t,r)=>(Me(),je("div",$S,[W("div",BS,[W("button",{onClick:r[0]||(r[0]=i=>t.$emit("close")),class:"mb-5 rounded-md bg-gray-500 p-2 shadow-sm shadow-black"}," Close "),r[2]||(r[2]=W("p",{class:"text-3xl"},"GUIDE",-1)),W("p",zS,"App version: "+It(n.appVersion),1),W("button",{onClick:r[1]||(r[1]=i=>t.$emit("showChangelog")),class:"rounded-md bg-green-800 p-2"}," Changelog "),r[3]||(r[3]=Rw('<div class="mt-5"><p class="mb-1 text-2xl">Adding Decks and Cards</p><p> Pressing the &#39;New Deck&#39; button initiates the deck creation menu, where you can specify three parameters: the deck name, the &#39;new cards per day&#39;, and whether the deck utilizes large cards.Opting for &#39;Large Cards&#39; allows for the inclusion of multiline text, HTML components, and Markdown formatting. To use Markdown, simply initiate the field with either &#39;[markdown]&#39; or &#39;[md]&#39; on the first line, with no additional text. When adding regular cards, accelerate the process by pressing &#39;Enter&#39; in the back field to add the card. Selecting for &#39;Create Reversed&#39; generates a mirrored card with swapped front and back values. Selecting &#39;Type Answer&#39; mandates inputting the back value during reviews. If &#39;Type Answer&#39; is chosen, any content within square brackets &#39;[]&#39; is ignored and doesn&#39;t need to be imputed (avoid using this with HTML or Markdown). </p></div><div class="mt-5"><p class="text-2xl">Reviews</p><p> Pressing the &#39;Review&#39; button will start the review. The number of reviews available for the day is shown above the &#39;Review&#39; button. During the review process, attempt to recall the answer on the other side of the card. Click the card or press the &#39;space bar&#39; to reveal the answer. If your answer is correct, click the &#39;correct&#39; button (blue) or press the &#39;space bar&#39;. If your answer is incorrect, click the &#39;wrong&#39; button (red) or press the &#39;c&#39; key. For &#39;type answer&#39; cards, input your response and press &#39;enter&#39; or click the &#39;Check&#39; button to reveal the correct answer. To continue, click the card or press either &#39;enter&#39; or &#39;space bar&#39;. Repeat this process until you&#39;ve reviewed all cards and the panel closes. Remember to return the next day for more reviews. Consistently answering correctly will reduce the frequency of seeing a card, while getting a wrong answer will reset its streak. </p></div><div class="mt-5"><p class="text-2xl">Settings</p><p> To access the settings, simply tap on your username. Card review dates are determined by the formula: &#39;today + ((time_multiplier^success_streak) * time_duration)&#39;. Customize your experience by adjusting the time_multiplier in the settings. Note that modifying the time_duration is currently not supported. Additionally, you can modify your username, update your email, or change your password. The default settings are 1.5 for the time_multiplier and 24 hours for the time_duration. </p></div><div class="mt-5"><p class="text-2xl">Editing and Deleting Cards and Decks</p><p> When you double-click on a deck, a variety of options become accessible, empowering you to make changes to both the overall deck and its individual cards. Additionally, card details such as card streaks and next review dates are easily visible. Furthermore, you can fine-tune settings such as the new cards per day and the use of large cards. </p></div><div class="mt-5"><p class="text-2xl">Searching Cards</p><p> When searching, your query will be matched from the beginning of the card&#39;s field. The search is case-sensitive. Additionally, you can utilize the following options: </p><ul class="ml-5 list-disc"><li> Use &#39;f&#39; or &#39;field&#39; to specify the field to search [f:f, f:front, f:b, f:back]. </li></ul></div><div class="mt-5"><p class="text-2xl">Notes</p><p> This app stores your data in Google&#39;s Firebase. All decks, cards and settings are synced between devices. The app works on both desktop and mobile. </p></div>',6))])]))}};var uu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function sd(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function qS(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var Mu={exports:{}};/*!
* sweetalert2 v11.10.6
* Released under the MIT License.
*/var bs=Mu.exports,Kg;function HS(){return Kg||(Kg=1,function(n,e){(function(t,r){n.exports=r()})(bs,function(){function t(A,f,w){return f=g(f),S(A,i()?Reflect.construct(f,w||[],g(A).constructor):f.apply(A,w))}function r(A,f,w){if(i())return Reflect.construct.apply(null,arguments);var I=[null];I.push.apply(I,f);var ne=new(A.bind.apply(A,I));return ne}function i(){try{var A=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(i=function(){return!!A})()}function s(A,f){var w=A==null?null:typeof Symbol<"u"&&A[Symbol.iterator]||A["@@iterator"];if(w!=null){var I,ne,be,He,vt=[],kt=!0,bn=!1;try{if(be=(w=w.call(A)).next,f!==0)for(;!(kt=(I=be.call(w)).done)&&(vt.push(I.value),vt.length!==f);kt=!0);}catch(Ma){bn=!0,ne=Ma}finally{try{if(!kt&&w.return!=null&&(He=w.return(),Object(He)!==He))return}finally{if(bn)throw ne}}return vt}}function o(A,f){if(typeof A!="object"||!A)return A;var w=A[Symbol.toPrimitive];if(w!==void 0){var I=w.call(A,f);if(typeof I!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(A)}function a(A){var f=o(A,"string");return typeof f=="symbol"?f:String(f)}function l(A){"@babel/helpers - typeof";return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},l(A)}function c(A,f){if(!(A instanceof f))throw new TypeError("Cannot call a class as a function")}function h(A,f){for(var w=0;w<f.length;w++){var I=f[w];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(A,a(I.key),I)}}function p(A,f,w){return f&&h(A.prototype,f),Object.defineProperty(A,"prototype",{writable:!1}),A}function m(A,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function");A.prototype=Object.create(f&&f.prototype,{constructor:{value:A,writable:!0,configurable:!0}}),Object.defineProperty(A,"prototype",{writable:!1}),f&&b(A,f)}function g(A){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(w){return w.__proto__||Object.getPrototypeOf(w)},g(A)}function b(A,f){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(I,ne){return I.__proto__=ne,I},b(A,f)}function E(A){if(A===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A}function S(A,f){if(f&&(typeof f=="object"||typeof f=="function"))return f;if(f!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return E(A)}function O(A,f){for(;!Object.prototype.hasOwnProperty.call(A,f)&&(A=g(A),A!==null););return A}function U(){return typeof Reflect<"u"&&Reflect.get?U=Reflect.get.bind():U=function(f,w,I){var ne=O(f,w);if(ne){var be=Object.getOwnPropertyDescriptor(ne,w);return be.get?be.get.call(arguments.length<3?f:I):be.value}},U.apply(this,arguments)}function D(A,f){return oe(A)||s(A,f)||R(A,f)||z()}function V(A){return K(A)||L(A)||R(A)||F()}function K(A){if(Array.isArray(A))return N(A)}function oe(A){if(Array.isArray(A))return A}function L(A){if(typeof Symbol<"u"&&A[Symbol.iterator]!=null||A["@@iterator"]!=null)return Array.from(A)}function R(A,f){if(A){if(typeof A=="string")return N(A,f);var w=Object.prototype.toString.call(A).slice(8,-1);if(w==="Object"&&A.constructor&&(w=A.constructor.name),w==="Map"||w==="Set")return Array.from(A);if(w==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(w))return N(A,f)}}function N(A,f){(f==null||f>A.length)&&(f=A.length);for(var w=0,I=new Array(f);w<f;w++)I[w]=A[w];return I}function F(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function z(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function C(A,f){var w=x(A,f,"get");return ue(A,w)}function P(A,f,w){var I=x(A,f,"set");return Y(A,I,w),w}function x(A,f,w){if(!f.has(A))throw new TypeError("attempted to "+w+" private field on non-instance");return f.get(A)}function ue(A,f){return f.get?f.get.call(A):f.value}function Y(A,f,w){if(f.set)f.set.call(A,w);else{if(!f.writable)throw new TypeError("attempted to set read only private field");f.value=w}}function X(A,f){if(f.has(A))throw new TypeError("Cannot initialize the same private elements twice on an object")}function xe(A,f,w){X(A,f),f.set(A,w)}var Ee=100,ve={},ce=function(){ve.previousActiveElement instanceof HTMLElement?(ve.previousActiveElement.focus(),ve.previousActiveElement=null):document.body&&document.body.focus()},le=function(f){return new Promise(function(w){if(!f)return w();var I=window.scrollX,ne=window.scrollY;ve.restoreFocusTimeout=setTimeout(function(){ce(),w()},Ee),window.scrollTo(I,ne)})},ye="swal2-",De=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"],Z=De.reduce(function(A,f){return A[f]=ye+f,A},{}),ze=["success","warning","info","question","error"],ke=ze.reduce(function(A,f){return A[f]=ye+f,A},{}),_e="SweetAlert2:",Re=function(f){return f.charAt(0).toUpperCase()+f.slice(1)},$e=function(f){console.warn("".concat(_e," ").concat(l(f)==="object"?f.join(" "):f))},Ne=function(f){console.error("".concat(_e," ").concat(f))},Q=[],H=function(f){Q.includes(f)||(Q.push(f),$e(f))},v=function(f,w){H('"'.concat(f,'" is deprecated and will be removed in the next major release. Please use "').concat(w,'" instead.'))},te=function(f){return typeof f=="function"?f():f},G=function(f){return f&&typeof f.toPromise=="function"},M=function(f){return G(f)?f.toPromise():Promise.resolve(f)},$=function(f){return f&&Promise.resolve(f)===f},q=function(){return document.body.querySelector(".".concat(Z.container))},ae=function(f){var w=q();return w?w.querySelector(f):null},ie=function(f){return ae(".".concat(f))},J=function(){return ie(Z.popup)},de=function(){return ie(Z.icon)},ge=function(){return ie(Z["icon-content"])},pe=function(){return ie(Z.title)},Ce=function(){return ie(Z["html-container"])},Ve=function(){return ie(Z.image)},Ue=function(){return ie(Z["progress-steps"])},ct=function(){return ie(Z["validation-message"])},at=function(){return ae(".".concat(Z.actions," .").concat(Z.confirm))},bt=function(){return ae(".".concat(Z.actions," .").concat(Z.cancel))},gt=function(){return ae(".".concat(Z.actions," .").concat(Z.deny))},pt=function(){return ie(Z["input-label"])},zt=function(){return ae(".".concat(Z.loader))},Et=function(){return ie(Z.actions)},Nt=function(){return ie(Z.footer)},On=function(){return ie(Z["timer-progress-bar"])},Je=function(){return ie(Z.close)},vr=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,Bn=function(){var f=J();if(!f)return[];var w=f.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),I=Array.from(w).sort(function(He,vt){var kt=parseInt(He.getAttribute("tabindex")||"0"),bn=parseInt(vt.getAttribute("tabindex")||"0");return kt>bn?1:kt<bn?-1:0}),ne=f.querySelectorAll(vr),be=Array.from(ne).filter(function(He){return He.getAttribute("tabindex")!=="-1"});return V(new Set(I.concat(be))).filter(function(He){return xt(He)})},zn=function(){return Ct(document.body,Z.shown)&&!Ct(document.body,Z["toast-shown"])&&!Ct(document.body,Z["no-backdrop"])},nn=function(){var f=J();return f?Ct(f,Z.toast):!1},yr=function(){var f=J();return f?f.hasAttribute("data-loading"):!1},Dt=function(f,w){if(f.textContent="",w){var I=new DOMParser,ne=I.parseFromString(w,"text/html"),be=ne.querySelector("head");be&&Array.from(be.childNodes).forEach(function(vt){f.appendChild(vt)});var He=ne.querySelector("body");He&&Array.from(He.childNodes).forEach(function(vt){vt instanceof HTMLVideoElement||vt instanceof HTMLAudioElement?f.appendChild(vt.cloneNode(!0)):f.appendChild(vt)})}},Ct=function(f,w){if(!w)return!1;for(var I=w.split(/\s+/),ne=0;ne<I.length;ne++)if(!f.classList.contains(I[ne]))return!1;return!0},Oe=function(f,w){Array.from(f.classList).forEach(function(I){!Object.values(Z).includes(I)&&!Object.values(ke).includes(I)&&!Object.values(w.showClass||{}).includes(I)&&f.classList.remove(I)})},In=function(f,w,I){if(Oe(f,w),w.customClass&&w.customClass[I]){if(typeof w.customClass[I]!="string"&&!w.customClass[I].forEach){$e("Invalid type of customClass.".concat(I,'! Expected string or iterable object, got "').concat(l(w.customClass[I]),'"'));return}dt(f,w.customClass[I])}},Kt=function(f,w){if(!w)return null;switch(w){case"select":case"textarea":case"file":return f.querySelector(".".concat(Z.popup," > .").concat(Z[w]));case"checkbox":return f.querySelector(".".concat(Z.popup," > .").concat(Z.checkbox," input"));case"radio":return f.querySelector(".".concat(Z.popup," > .").concat(Z.radio," input:checked"))||f.querySelector(".".concat(Z.popup," > .").concat(Z.radio," input:first-child"));case"range":return f.querySelector(".".concat(Z.popup," > .").concat(Z.range," input"));default:return f.querySelector(".".concat(Z.popup," > .").concat(Z.input))}},nr=function(f){if(f.focus(),f.type!=="file"){var w=f.value;f.value="",f.value=w}},cn=function(f,w,I){!f||!w||(typeof w=="string"&&(w=w.split(/\s+/).filter(Boolean)),w.forEach(function(ne){Array.isArray(f)?f.forEach(function(be){I?be.classList.add(ne):be.classList.remove(ne)}):I?f.classList.add(ne):f.classList.remove(ne)}))},dt=function(f,w){cn(f,w,!0)},rn=function(f,w){cn(f,w,!1)},Qt=function(f,w){for(var I=Array.from(f.children),ne=0;ne<I.length;ne++){var be=I[ne];if(be instanceof HTMLElement&&Ct(be,w))return be}},Xt=function(f,w,I){I==="".concat(parseInt(I))&&(I=parseInt(I)),I||parseInt(I)===0?f.style.setProperty(w,typeof I=="number"?"".concat(I,"px"):I):f.style.removeProperty(w)},sn=function(f){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"flex";f&&(f.style.display=w)},Rt=function(f){f&&(f.style.display="none")},Vr=function(f){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"block";f&&new MutationObserver(function(){vn(f,f.innerHTML,w)}).observe(f,{childList:!0,subtree:!0})},fi=function(f,w,I,ne){var be=f.querySelector(w);be&&be.style.setProperty(I,ne)},vn=function(f,w){var I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"flex";w?sn(f,I):Rt(f)},xt=function(f){return!!(f&&(f.offsetWidth||f.offsetHeight||f.getClientRects().length))},Yr=function(){return!xt(at())&&!xt(gt())&&!xt(bt())},Ur=function(f){return f.scrollHeight>f.clientHeight},Vn=function(f){var w=window.getComputedStyle(f),I=parseFloat(w.getPropertyValue("animation-duration")||"0"),ne=parseFloat(w.getPropertyValue("transition-duration")||"0");return I>0||ne>0},Xr=function(f){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,I=On();I&&xt(I)&&(w&&(I.style.transition="none",I.style.width="100%"),setTimeout(function(){I.style.transition="width ".concat(f/1e3,"s linear"),I.style.width="0%"},10))},Ge=function(){var f=On();if(f){var w=parseInt(window.getComputedStyle(f).width);f.style.removeProperty("transition"),f.style.width="100%";var I=parseInt(window.getComputedStyle(f).width),ne=w/I*100;f.style.width="".concat(ne,"%")}},se=function(){return typeof window>"u"||typeof document>"u"},Pe=`
 <div aria-labelledby="`.concat(Z.title,'" aria-describedby="').concat(Z["html-container"],'" class="').concat(Z.popup,`" tabindex="-1">
   <button type="button" class="`).concat(Z.close,`"></button>
   <ul class="`).concat(Z["progress-steps"],`"></ul>
   <div class="`).concat(Z.icon,`"></div>
   <img class="`).concat(Z.image,`" />
   <h2 class="`).concat(Z.title,'" id="').concat(Z.title,`"></h2>
   <div class="`).concat(Z["html-container"],'" id="').concat(Z["html-container"],`"></div>
   <input class="`).concat(Z.input,'" id="').concat(Z.input,`" />
   <input type="file" class="`).concat(Z.file,`" />
   <div class="`).concat(Z.range,`">
     <input type="range" />
     <output></output>
   </div>
   <select class="`).concat(Z.select,'" id="').concat(Z.select,`"></select>
   <div class="`).concat(Z.radio,`"></div>
   <label class="`).concat(Z.checkbox,`">
     <input type="checkbox" id="`).concat(Z.checkbox,`" />
     <span class="`).concat(Z.label,`"></span>
   </label>
   <textarea class="`).concat(Z.textarea,'" id="').concat(Z.textarea,`"></textarea>
   <div class="`).concat(Z["validation-message"],'" id="').concat(Z["validation-message"],`"></div>
   <div class="`).concat(Z.actions,`">
     <div class="`).concat(Z.loader,`"></div>
     <button type="button" class="`).concat(Z.confirm,`"></button>
     <button type="button" class="`).concat(Z.deny,`"></button>
     <button type="button" class="`).concat(Z.cancel,`"></button>
   </div>
   <div class="`).concat(Z.footer,`"></div>
   <div class="`).concat(Z["timer-progress-bar-container"],`">
     <div class="`).concat(Z["timer-progress-bar"],`"></div>
   </div>
 </div>
`).replace(/(^|\n)\s*/g,""),qe=function(){var f=q();return f?(f.remove(),rn([document.documentElement,document.body],[Z["no-backdrop"],Z["toast-shown"],Z["has-column"]]),!0):!1},_t=function(){ve.currentInstance.resetValidationMessage()},gn=function(){var f=J(),w=Qt(f,Z.input),I=Qt(f,Z.file),ne=f.querySelector(".".concat(Z.range," input")),be=f.querySelector(".".concat(Z.range," output")),He=Qt(f,Z.select),vt=f.querySelector(".".concat(Z.checkbox," input")),kt=Qt(f,Z.textarea);w.oninput=_t,I.onchange=_t,He.onchange=_t,vt.onchange=_t,kt.oninput=_t,ne.oninput=function(){_t(),be.value=ne.value},ne.onchange=function(){_t(),be.value=ne.value}},Zt=function(f){return typeof f=="string"?document.querySelector(f):f},dn=function(f){var w=J();w.setAttribute("role",f.toast?"alert":"dialog"),w.setAttribute("aria-live",f.toast?"polite":"assertive"),f.toast||w.setAttribute("aria-modal","true")},Nn=function(f){window.getComputedStyle(f).direction==="rtl"&&dt(q(),Z.rtl)},Un=function(f){var w=qe();if(se()){Ne("SweetAlert2 requires document to initialize");return}var I=document.createElement("div");I.className=Z.container,w&&dt(I,Z["no-transition"]),Dt(I,Pe);var ne=Zt(f.target);ne.appendChild(I),dn(f),Nn(ne),gn()},Vt=function(f,w){f instanceof HTMLElement?w.appendChild(f):l(f)==="object"?rr(f,w):f&&Dt(w,f)},rr=function(f,w){f.jquery?pi(w,f):Dt(w,f.toString())},pi=function(f,w){if(f.textContent="",0 in w)for(var I=0;I in w;I++)f.appendChild(w[I].cloneNode(!0));else f.appendChild(w.cloneNode(!0))},Ar=function(){if(se())return!1;var A=document.createElement("div");return typeof A.style.webkitAnimation<"u"?"webkitAnimationEnd":typeof A.style.animation<"u"?"animationend":!1}(),Js=function(f,w){var I=Et(),ne=zt();!I||!ne||(!w.showConfirmButton&&!w.showDenyButton&&!w.showCancelButton?Rt(I):sn(I),In(I,w,"actions"),eo(I,ne,w),Dt(ne,w.loaderHtml||""),In(ne,w,"loader"))};function eo(A,f,w){var I=at(),ne=gt(),be=bt();!I||!ne||!be||(mi(I,"confirm",w),mi(ne,"deny",w),mi(be,"cancel",w),to(I,ne,be,w),w.reverseButtons&&(w.toast?(A.insertBefore(be,I),A.insertBefore(ne,I)):(A.insertBefore(be,f),A.insertBefore(ne,f),A.insertBefore(I,f))))}function to(A,f,w,I){if(!I.buttonsStyling){rn([A,f,w],Z.styled);return}dt([A,f,w],Z.styled),I.confirmButtonColor&&(A.style.backgroundColor=I.confirmButtonColor,dt(A,Z["default-outline"])),I.denyButtonColor&&(f.style.backgroundColor=I.denyButtonColor,dt(f,Z["default-outline"])),I.cancelButtonColor&&(w.style.backgroundColor=I.cancelButtonColor,dt(w,Z["default-outline"]))}function mi(A,f,w){var I=Re(f);vn(A,w["show".concat(I,"Button")],"inline-block"),Dt(A,w["".concat(f,"ButtonText")]||""),A.setAttribute("aria-label",w["".concat(f,"ButtonAriaLabel")]||""),A.className=Z[f],In(A,w,"".concat(f,"Button"))}var no=function(f,w){var I=Je();I&&(Dt(I,w.closeButtonHtml||""),In(I,w,"closeButton"),vn(I,w.showCloseButton),I.setAttribute("aria-label",w.closeButtonAriaLabel||""))},gi=function(f,w){var I=q();I&&(Fo(I,w.backdrop),jt(I,w.position),_i(I,w.grow),In(I,w,"container"))};function Fo(A,f){typeof f=="string"?A.style.background=f:f||dt([document.documentElement,document.body],Z["no-backdrop"])}function jt(A,f){f&&(f in Z?dt(A,Z[f]):($e('The "position" parameter is not valid, defaulting to "center"'),dt(A,Z.center)))}function _i(A,f){f&&dt(A,Z["grow-".concat(f)])}var Pt={innerParams:new WeakMap,domCache:new WeakMap},Zr=["input","file","range","select","radio","checkbox","textarea"],br=function(f,w){var I=J();if(I){var ne=Pt.innerParams.get(f),be=!ne||w.input!==ne.input;Zr.forEach(function(He){var vt=Qt(I,Z[He]);vt&&(Fr(He,w.inputAttributes),vt.className=Z[He],be&&Rt(vt))}),w.input&&(be&&Kn(w),$o(w))}},Kn=function(f){if(f.input){if(!Jt[f.input]){Ne("Unexpected type of input! Expected ".concat(Object.keys(Jt).join(" | "),', got "').concat(f.input,'"'));return}var w=$r(f.input),I=Jt[f.input](w,f);sn(w),f.inputAutoFocus&&setTimeout(function(){nr(I)})}},Jr=function(f){for(var w=0;w<f.attributes.length;w++){var I=f.attributes[w].name;["id","type","value","style"].includes(I)||f.removeAttribute(I)}},Fr=function(f,w){var I=Kt(J(),f);if(I){Jr(I);for(var ne in w)I.setAttribute(ne,w[ne])}},$o=function(f){var w=$r(f.input);l(f.customClass)==="object"&&dt(w,f.customClass.input)},Lt=function(f,w){(!f.placeholder||w.inputPlaceholder)&&(f.placeholder=w.inputPlaceholder)},xr=function(f,w,I){if(I.inputLabel){var ne=document.createElement("label"),be=Z["input-label"];ne.setAttribute("for",f.id),ne.className=be,l(I.customClass)==="object"&&dt(ne,I.customClass.inputLabel),ne.innerText=I.inputLabel,w.insertAdjacentElement("beforebegin",ne)}},$r=function(f){return Qt(J(),Z[f]||Z.input)},Cr=function(f,w){["string","number"].includes(l(w))?f.value="".concat(w):$(w)||$e('Unexpected type of inputValue! Expected "string", "number" or "Promise", got "'.concat(l(w),'"'))},Jt={};Jt.text=Jt.email=Jt.password=Jt.number=Jt.tel=Jt.url=Jt.search=Jt.date=Jt["datetime-local"]=Jt.time=Jt.week=Jt.month=function(A,f){return Cr(A,f.inputValue),xr(A,A,f),Lt(A,f),A.type=f.input,A},Jt.file=function(A,f){return xr(A,A,f),Lt(A,f),A},Jt.range=function(A,f){var w=A.querySelector("input"),I=A.querySelector("output");return Cr(w,f.inputValue),w.type=f.input,Cr(I,f.inputValue),xr(w,A,f),A},Jt.select=function(A,f){if(A.textContent="",f.inputPlaceholder){var w=document.createElement("option");Dt(w,f.inputPlaceholder),w.value="",w.disabled=!0,w.selected=!0,A.appendChild(w)}return xr(A,A,f),A},Jt.radio=function(A){return A.textContent="",A},Jt.checkbox=function(A,f){var w=Kt(J(),"checkbox");w.value="1",w.checked=!!f.inputValue;var I=A.querySelector("span");return Dt(I,f.inputPlaceholder),w},Jt.textarea=function(A,f){Cr(A,f.inputValue),Lt(A,f),xr(A,A,f);var w=function(ne){return parseInt(window.getComputedStyle(ne).marginLeft)+parseInt(window.getComputedStyle(ne).marginRight)};return setTimeout(function(){if("MutationObserver"in window){var I=parseInt(window.getComputedStyle(J()).width),ne=function(){if(document.body.contains(A)){var He=A.offsetWidth+w(A);He>I?J().style.width="".concat(He,"px"):Xt(J(),"width",f.width)}};new MutationObserver(ne).observe(A,{attributes:!0,attributeFilter:["style"]})}}),A};var ds=function(f,w){var I=Ce();I&&(Vr(I),In(I,w,"htmlContainer"),w.html?(Vt(w.html,I),sn(I,"block")):w.text?(I.textContent=w.text,sn(I,"block")):Rt(I),br(f,w))},Oa=function(f,w){var I=Nt();I&&(Vr(I),vn(I,w.footer,"block"),w.footer&&Vt(w.footer,I),In(I,w,"footer"))},hs=function(f,w){var I=Pt.innerParams.get(f),ne=de();if(ne){if(I&&w.icon===I.icon){Br(ne,w),qi(ne,w);return}if(!w.icon&&!w.iconHtml){Rt(ne);return}if(w.icon&&Object.keys(ke).indexOf(w.icon)===-1){Ne('Unknown icon! Expected "success", "error", "warning", "info" or "question", got "'.concat(w.icon,'"')),Rt(ne);return}sn(ne),Br(ne,w),qi(ne,w),dt(ne,w.showClass&&w.showClass.icon)}},qi=function(f,w){for(var I=0,ne=Object.entries(ke);I<ne.length;I++){var be=D(ne[I],2),He=be[0],vt=be[1];w.icon!==He&&rn(f,vt)}dt(f,w.icon&&ke[w.icon]),Hi(f,w),ei(),In(f,w,"icon")},ei=function(){var f=J();if(f)for(var w=window.getComputedStyle(f).getPropertyValue("background-color"),I=f.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix"),ne=0;ne<I.length;ne++)I[ne].style.backgroundColor=w},ti=`
  <div class="swal2-success-circular-line-left"></div>
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>
  <div class="swal2-success-circular-line-right"></div>
`,Rn=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,Br=function(f,w){if(!(!w.icon&&!w.iconHtml)){var I=f.innerHTML,ne="";if(w.iconHtml)ne=fs(w.iconHtml);else if(w.icon==="success")ne=ti,I=I.replace(/ style=".*?"/g,"");else if(w.icon==="error")ne=Rn;else if(w.icon){var be={question:"?",warning:"!",info:"i"};ne=fs(be[w.icon])}I.trim()!==ne.trim()&&Dt(f,ne)}},Hi=function(f,w){if(w.iconColor){f.style.color=w.iconColor,f.style.borderColor=w.iconColor;for(var I=0,ne=[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"];I<ne.length;I++){var be=ne[I];fi(f,be,"background-color",w.iconColor)}fi(f,".swal2-success-ring","border-color",w.iconColor)}},fs=function(f){return'<div class="'.concat(Z["icon-content"],'">').concat(f,"</div>")},wi=function(f,w){var I=Ve();if(I){if(!w.imageUrl){Rt(I);return}sn(I,""),I.setAttribute("src",w.imageUrl),I.setAttribute("alt",w.imageAlt||""),Xt(I,"width",w.imageWidth),Xt(I,"height",w.imageHeight),I.className=Z.image,In(I,w,"image")}},Ke=function(f,w){var I=q(),ne=J();if(!(!I||!ne)){if(w.toast){Xt(I,"width",w.width),ne.style.width="100%";var be=zt();be&&ne.insertBefore(be,de())}else Xt(ne,"width",w.width);Xt(ne,"padding",w.padding),w.color&&(ne.style.color=w.color),w.background&&(ne.style.background=w.background),Rt(ct()),Bo(ne,w)}},Bo=function(f,w){var I=w.showClass||{};f.className="".concat(Z.popup," ").concat(xt(f)?I.popup:""),w.toast?(dt([document.documentElement,document.body],Z["toast-shown"]),dt(f,Z.toast)):dt(f,Z.modal),In(f,w,"popup"),typeof w.customClass=="string"&&dt(f,w.customClass),w.icon&&dt(f,Z["icon-".concat(w.icon)])},ps=function(f,w){var I=Ue();if(I){var ne=w.progressSteps,be=w.currentProgressStep;if(!ne||ne.length===0||be===void 0){Rt(I);return}sn(I),I.textContent="",be>=ne.length&&$e("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),ne.forEach(function(He,vt){var kt=ir(He);if(I.appendChild(kt),vt===be&&dt(kt,Z["active-progress-step"]),vt!==ne.length-1){var bn=zo(w);I.appendChild(bn)}})}},ir=function(f){var w=document.createElement("li");return dt(w,Z["progress-step"]),Dt(w,f),w},zo=function(f){var w=document.createElement("li");return dt(w,Z["progress-step-line"]),f.progressStepsDistance&&Xt(w,"width",f.progressStepsDistance),w},Wi=function(f,w){var I=pe();I&&(Vr(I),vn(I,w.title||w.titleText,"block"),w.title&&Vt(w.title,I),w.titleText&&(I.innerText=w.titleText),In(I,w,"title"))},Sr=function(f,w){Ke(f,w),gi(f,w),ps(f,w),hs(f,w),wi(f,w),Wi(f,w),no(f,w),ds(f,w),Js(f,w),Oa(f,w);var I=J();typeof w.didRender=="function"&&I&&w.didRender(I)},sr=function(){return xt(J())},vi=function(){var f;return(f=at())===null||f===void 0?void 0:f.click()},yi=function(){var f;return(f=gt())===null||f===void 0?void 0:f.click()},d=function(){var f;return(f=bt())===null||f===void 0?void 0:f.click()},_=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),k=function(f){f.keydownTarget&&f.keydownHandlerAdded&&(f.keydownTarget.removeEventListener("keydown",f.keydownHandler,{capture:f.keydownListenerCapture}),f.keydownHandlerAdded=!1)},B=function(f,w,I){k(f),w.toast||(f.keydownHandler=function(ne){return Xe(w,ne,I)},f.keydownTarget=w.keydownListenerCapture?window:J(),f.keydownListenerCapture=w.keydownListenerCapture,f.keydownTarget.addEventListener("keydown",f.keydownHandler,{capture:f.keydownListenerCapture}),f.keydownHandlerAdded=!0)},re=function(f,w){var I,ne=Bn();if(ne.length){f=f+w,f===ne.length?f=0:f===-1&&(f=ne.length-1),ne[f].focus();return}(I=J())===null||I===void 0||I.focus()},fe=["ArrowRight","ArrowDown"],Ie=["ArrowLeft","ArrowUp"],Xe=function(f,w,I){f&&(w.isComposing||w.keyCode===229||(f.stopKeydownPropagation&&w.stopPropagation(),w.key==="Enter"?wt(w,f):w.key==="Tab"?it(w):[].concat(fe,Ie).includes(w.key)?hn(w.key):w.key==="Escape"&&Ut(w,f,I)))},wt=function(f,w){if(te(w.allowEnterKey)){var I=Kt(J(),w.input);if(f.target&&I&&f.target instanceof HTMLElement&&f.target.outerHTML===I.outerHTML){if(["textarea","file"].includes(w.input))return;vi(),f.preventDefault()}}},it=function(f){for(var w=f.target,I=Bn(),ne=-1,be=0;be<I.length;be++)if(w===I[be]){ne=be;break}f.shiftKey?re(ne,-1):re(ne,1),f.stopPropagation(),f.preventDefault()},hn=function(f){var w=Et(),I=at(),ne=gt(),be=bt();if(!(!w||!I||!ne||!be)){var He=[I,ne,be];if(!(document.activeElement instanceof HTMLElement&&!He.includes(document.activeElement))){var vt=fe.includes(f)?"nextElementSibling":"previousElementSibling",kt=document.activeElement;if(kt){for(var bn=0;bn<w.children.length;bn++){if(kt=kt[vt],!kt)return;if(kt instanceof HTMLButtonElement&&xt(kt))break}kt instanceof HTMLButtonElement&&kt.focus()}}}},Ut=function(f,w,I){te(w.allowEscapeKey)&&(f.preventDefault(),I(_.esc))},zr={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap},Na=function(){var f=Array.from(document.body.children);f.forEach(function(w){w===q()||w.contains(q())||(w.hasAttribute("aria-hidden")&&w.setAttribute("data-previous-aria-hidden",w.getAttribute("aria-hidden")||""),w.setAttribute("aria-hidden","true"))})},ni=function(){var f=Array.from(document.body.children);f.forEach(function(w){w.hasAttribute("data-previous-aria-hidden")?(w.setAttribute("aria-hidden",w.getAttribute("data-previous-aria-hidden")||""),w.removeAttribute("data-previous-aria-hidden")):w.removeAttribute("aria-hidden")})},ro=typeof window<"u"&&!!window.GestureEvent,ms=function(){if(ro&&!Ct(document.body,Z.iosfix)){var f=document.body.scrollTop;document.body.style.top="".concat(f*-1,"px"),dt(document.body,Z.iosfix),gs()}},gs=function(){var f=q();if(f){var w;f.ontouchstart=function(I){w=jo(I)},f.ontouchmove=function(I){w&&(I.preventDefault(),I.stopPropagation())}}},jo=function(f){var w=f.target,I=q(),ne=Ce();return!I||!ne||_s(f)||La(f)?!1:w===I||!Ur(I)&&w instanceof HTMLElement&&w.tagName!=="INPUT"&&w.tagName!=="TEXTAREA"&&!(Ur(ne)&&ne.contains(w))},_s=function(f){return f.touches&&f.touches.length&&f.touches[0].touchType==="stylus"},La=function(f){return f.touches&&f.touches.length>1},qo=function(){if(Ct(document.body,Z.iosfix)){var f=parseInt(document.body.style.top,10);rn(document.body,Z.iosfix),document.body.style.top="",document.body.scrollTop=f*-1}},Gi=function(){var f=document.createElement("div");f.className=Z["scrollbar-measure"],document.body.appendChild(f);var w=f.getBoundingClientRect().width-f.clientWidth;return document.body.removeChild(f),w},ri=null,Ho=function(f){ri===null&&(document.body.scrollHeight>window.innerHeight||f==="scroll")&&(ri=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight="".concat(ri+Gi(),"px"))},ws=function(){ri!==null&&(document.body.style.paddingRight="".concat(ri,"px"),ri=null)};function vs(A,f,w,I){nn()?oo(A,I):(le(w).then(function(){return oo(A,I)}),k(ve)),ro?(f.setAttribute("style","display:none !important"),f.removeAttribute("class"),f.innerHTML=""):f.remove(),zn()&&(ws(),qo(),ni()),Wo()}function Wo(){rn([document.documentElement,document.body],[Z.shown,Z["height-auto"],Z["no-backdrop"],Z["toast-shown"]])}function or(A){A=Ko(A);var f=zr.swalPromiseResolve.get(this),w=Go(this);this.isAwaitingPromise?A.isDismissed||(ar(this),f(A)):w&&f(A)}var Go=function(f){var w=J();if(!w)return!1;var I=Pt.innerParams.get(f);if(!I||Ct(w,I.hideClass.popup))return!1;rn(w,I.showClass.popup),dt(w,I.hideClass.popup);var ne=q();return rn(ne,I.showClass.backdrop),dt(ne,I.hideClass.backdrop),so(f,w,I),!0};function io(A){var f=zr.swalPromiseReject.get(this);ar(this),f&&f(A)}var ar=function(f){f.isAwaitingPromise&&(delete f.isAwaitingPromise,Pt.innerParams.get(f)||f._destroy())},Ko=function(f){return typeof f>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},f)},so=function(f,w,I){var ne=q(),be=Ar&&Vn(w);typeof I.willClose=="function"&&I.willClose(w),be?Qo(f,w,ne,I.returnFocus,I.didClose):vs(f,ne,I.returnFocus,I.didClose)},Qo=function(f,w,I,ne,be){Ar&&(ve.swalCloseEventFinishedCallback=vs.bind(null,f,I,ne,be),w.addEventListener(Ar,function(He){He.target===w&&(ve.swalCloseEventFinishedCallback(),delete ve.swalCloseEventFinishedCallback)}))},oo=function(f,w){setTimeout(function(){typeof w=="function"&&w.bind(f.params)(),f._destroy&&f._destroy()})},Rr=function(f){var w=J();if(w||new Xl,w=J(),!!w){var I=zt();nn()?Rt(de()):jn(w,f),sn(I),w.setAttribute("data-loading","true"),w.setAttribute("aria-busy","true"),w.focus()}},jn=function(f,w){var I=Et(),ne=zt();!I||!ne||(!w&&xt(at())&&(w=at()),sn(I),w&&(Rt(w),ne.setAttribute("data-button-to-replace",w.className),I.insertBefore(ne,w)),dt([f,I],Z.loading))},Yo=function(f,w){w.input==="select"||w.input==="radio"?T(f,w):["text","email","number","tel","textarea"].some(function(I){return I===w.input})&&(G(w.inputValue)||$(w.inputValue))&&(Rr(at()),j(f,w))},Xo=function(f,w){var I=f.getInput();if(!I)return null;switch(w.input){case"checkbox":return ii(I);case"radio":return u(I);case"file":return y(I);default:return w.inputAutoTrim?I.value.trim():I.value}},ii=function(f){return f.checked?1:0},u=function(f){return f.checked?f.value:null},y=function(f){return f.files&&f.files.length?f.getAttribute("multiple")!==null?f.files:f.files[0]:null},T=function(f,w){var I=J();if(I){var ne=function(He){w.input==="select"?he(I,ee(He),w):w.input==="radio"&&me(I,ee(He),w)};G(w.inputOptions)||$(w.inputOptions)?(Rr(at()),M(w.inputOptions).then(function(be){f.hideLoading(),ne(be)})):l(w.inputOptions)==="object"?ne(w.inputOptions):Ne("Unexpected type of inputOptions! Expected object, Map or Promise, got ".concat(l(w.inputOptions)))}},j=function(f,w){var I=f.getInput();I&&(Rt(I),M(w.inputValue).then(function(ne){I.value=w.input==="number"?"".concat(parseFloat(ne)||0):"".concat(ne),sn(I),I.focus(),f.hideLoading()}).catch(function(ne){Ne("Error in inputValue promise: ".concat(ne)),I.value="",sn(I),I.focus(),f.hideLoading()}))};function he(A,f,w){var I=Qt(A,Z.select);if(I){var ne=function(He,vt,kt){var bn=document.createElement("option");bn.value=kt,Dt(bn,vt),bn.selected=we(kt,w.inputValue),He.appendChild(bn)};f.forEach(function(be){var He=be[0],vt=be[1];if(Array.isArray(vt)){var kt=document.createElement("optgroup");kt.label=He,kt.disabled=!1,I.appendChild(kt),vt.forEach(function(bn){return ne(kt,bn[1],bn[0])})}else ne(I,vt,He)}),I.focus()}}function me(A,f,w){var I=Qt(A,Z.radio);if(I){f.forEach(function(be){var He=be[0],vt=be[1],kt=document.createElement("input"),bn=document.createElement("label");kt.type="radio",kt.name=Z.radio,kt.value=He,we(He,w.inputValue)&&(kt.checked=!0);var Ma=document.createElement("span");Dt(Ma,vt),Ma.className=Z.label,bn.appendChild(kt),bn.appendChild(Ma),I.appendChild(bn)});var ne=I.querySelectorAll("input");ne.length&&ne[0].focus()}}var ee=function A(f){var w=[];return f instanceof Map?f.forEach(function(I,ne){var be=I;l(be)==="object"&&(be=A(be)),w.push([ne,be])}):Object.keys(f).forEach(function(I){var ne=f[I];l(ne)==="object"&&(ne=A(ne)),w.push([I,ne])}),w},we=function(f,w){return!!w&&w.toString()===f.toString()},Le=void 0,Fe=function(f){var w=Pt.innerParams.get(f);f.disableButtons(),w.input?An(f,"confirm"):si(f,!0)},Qe=function(f){var w=Pt.innerParams.get(f);f.disableButtons(),w.returnInputValueOnDeny?An(f,"deny"):yn(f,!1)},lt=function(f,w){f.disableButtons(),w(_.cancel)},An=function(f,w){var I=Pt.innerParams.get(f);if(!I.input){Ne('The "input" parameter is needed to be set when using returnInputValueOn'.concat(Re(w)));return}var ne=f.getInput(),be=Xo(f,I);I.inputValidator?on(f,be,w):ne&&!ne.checkValidity()?(f.enableButtons(),f.showValidationMessage(I.validationMessage||ne.validationMessage)):w==="deny"?yn(f,be):si(f,be)},on=function(f,w,I){var ne=Pt.innerParams.get(f);f.disableInput();var be=Promise.resolve().then(function(){return M(ne.inputValidator(w,ne.validationMessage))});be.then(function(He){f.enableButtons(),f.enableInput(),He?f.showValidationMessage(He):I==="deny"?yn(f,w):si(f,w)})},yn=function(f,w){var I=Pt.innerParams.get(f||Le);if(I.showLoaderOnDeny&&Rr(gt()),I.preDeny){f.isAwaitingPromise=!0;var ne=Promise.resolve().then(function(){return M(I.preDeny(w,I.validationMessage))});ne.then(function(be){be===!1?(f.hideLoading(),ar(f)):f.close({isDenied:!0,value:typeof be>"u"?w:be})}).catch(function(be){return Zo(f||Le,be)})}else f.close({isDenied:!0,value:w})},Fn=function(f,w){f.close({isConfirmed:!0,value:w})},Zo=function(f,w){f.rejectPromise(w)},si=function(f,w){var I=Pt.innerParams.get(f||Le);if(I.showLoaderOnConfirm&&Rr(),I.preConfirm){f.resetValidationMessage(),f.isAwaitingPromise=!0;var ne=Promise.resolve().then(function(){return M(I.preConfirm(w,I.validationMessage))});ne.then(function(be){xt(ct())||be===!1?(f.hideLoading(),ar(f)):Fn(f,typeof be>"u"?w:be)}).catch(function(be){return Zo(f||Le,be)})}else Fn(f,w)};function Jo(){var A=Pt.innerParams.get(this);if(A){var f=Pt.domCache.get(this);Rt(f.loader),nn()?A.icon&&sn(de()):Q0(f),rn([f.popup,f.actions],Z.loading),f.popup.removeAttribute("aria-busy"),f.popup.removeAttribute("data-loading"),f.confirmButton.disabled=!1,f.denyButton.disabled=!1,f.cancelButton.disabled=!1}}var Q0=function(f){var w=f.popup.getElementsByClassName(f.loader.getAttribute("data-button-to-replace"));w.length?sn(w[0],"inline-block"):Yr()&&Rt(f.actions)};function fp(){var A=Pt.innerParams.get(this),f=Pt.domCache.get(this);return f?Kt(f.popup,A.input):null}function pp(A,f,w){var I=Pt.domCache.get(A);f.forEach(function(ne){I[ne].disabled=w})}function mp(A,f){var w=J();if(!(!w||!A))if(A.type==="radio")for(var I=w.querySelectorAll('[name="'.concat(Z.radio,'"]')),ne=0;ne<I.length;ne++)I[ne].disabled=f;else A.disabled=f}function gp(){pp(this,["confirmButton","denyButton","cancelButton"],!1)}function _p(){pp(this,["confirmButton","denyButton","cancelButton"],!0)}function wp(){mp(this.getInput(),!1)}function vp(){mp(this.getInput(),!0)}function yp(A){var f=Pt.domCache.get(this),w=Pt.innerParams.get(this);Dt(f.validationMessage,A),f.validationMessage.className=Z["validation-message"],w.customClass&&w.customClass.validationMessage&&dt(f.validationMessage,w.customClass.validationMessage),sn(f.validationMessage);var I=this.getInput();I&&(I.setAttribute("aria-invalid","true"),I.setAttribute("aria-describedby",Z["validation-message"]),nr(I),dt(I,Z.inputerror))}function bp(){var A=Pt.domCache.get(this);A.validationMessage&&Rt(A.validationMessage);var f=this.getInput();f&&(f.removeAttribute("aria-invalid"),f.removeAttribute("aria-describedby"),rn(f,Z.inputerror))}var ea={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,animation:!0,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},Y0=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],X0={},Z0=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],Ep=function(f){return Object.prototype.hasOwnProperty.call(ea,f)},kp=function(f){return Y0.indexOf(f)!==-1},Tp=function(f){return X0[f]},J0=function(f){Ep(f)||$e('Unknown parameter "'.concat(f,'"'))},eb=function(f){Z0.includes(f)&&$e('The parameter "'.concat(f,'" is incompatible with toasts'))},tb=function(f){var w=Tp(f);w&&v(f,w)},nb=function(f){f.backdrop===!1&&f.allowOutsideClick&&$e('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(var w in f)J0(w),f.toast&&eb(w),tb(w)};function Ip(A){var f=J(),w=Pt.innerParams.get(this);if(!f||Ct(f,w.hideClass.popup)){$e("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}var I=rb(A),ne=Object.assign({},w,I);Sr(this,ne),Pt.innerParams.set(this,ne),Object.defineProperties(this,{params:{value:Object.assign({},this.params,A),writable:!1,enumerable:!0}})}var rb=function(f){var w={};return Object.keys(f).forEach(function(I){kp(I)?w[I]=f[I]:$e("Invalid parameter to update: ".concat(I))}),w};function Ap(){var A=Pt.domCache.get(this),f=Pt.innerParams.get(this);if(!f){xp(this);return}A.popup&&ve.swalCloseEventFinishedCallback&&(ve.swalCloseEventFinishedCallback(),delete ve.swalCloseEventFinishedCallback),typeof f.didDestroy=="function"&&f.didDestroy(),ib(this)}var ib=function(f){xp(f),delete f.params,delete ve.keydownHandler,delete ve.keydownTarget,delete ve.currentInstance},xp=function(f){f.isAwaitingPromise?(ad(Pt,f),f.isAwaitingPromise=!0):(ad(zr,f),ad(Pt,f),delete f.isAwaitingPromise,delete f.disableButtons,delete f.enableButtons,delete f.getInput,delete f.disableInput,delete f.enableInput,delete f.hideLoading,delete f.disableLoading,delete f.showValidationMessage,delete f.resetValidationMessage,delete f.close,delete f.closePopup,delete f.closeModal,delete f.closeToast,delete f.rejectPromise,delete f.update,delete f._destroy)},ad=function(f,w){for(var I in f)f[I].delete(w)},sb=Object.freeze({__proto__:null,_destroy:Ap,close:or,closeModal:or,closePopup:or,closeToast:or,disableButtons:_p,disableInput:vp,disableLoading:Jo,enableButtons:gp,enableInput:wp,getInput:fp,handleAwaitingPromise:ar,hideLoading:Jo,rejectPromise:io,resetValidationMessage:bp,showValidationMessage:yp,update:Ip}),ob=function(f,w,I){f.toast?ab(f,w,I):(ub(w),cb(w),db(f,w,I))},ab=function(f,w,I){w.popup.onclick=function(){f&&(lb(f)||f.timer||f.input)||I(_.close)}},lb=function(f){return!!(f.showConfirmButton||f.showDenyButton||f.showCancelButton||f.showCloseButton)},Ql=!1,ub=function(f){f.popup.onmousedown=function(){f.container.onmouseup=function(w){f.container.onmouseup=function(){},w.target===f.container&&(Ql=!0)}}},cb=function(f){f.container.onmousedown=function(){f.popup.onmouseup=function(w){f.popup.onmouseup=function(){},(w.target===f.popup||w.target instanceof HTMLElement&&f.popup.contains(w.target))&&(Ql=!0)}}},db=function(f,w,I){w.container.onclick=function(ne){if(Ql){Ql=!1;return}ne.target===w.container&&te(f.allowOutsideClick)&&I(_.backdrop)}},hb=function(f){return l(f)==="object"&&f.jquery},Cp=function(f){return f instanceof Element||hb(f)},fb=function(f){var w={};return l(f[0])==="object"&&!Cp(f[0])?Object.assign(w,f[0]):["title","html","icon"].forEach(function(I,ne){var be=f[ne];typeof be=="string"||Cp(be)?w[I]=be:be!==void 0&&Ne("Unexpected type of ".concat(I,'! Expected "string" or "Element", got ').concat(l(be)))}),w};function pb(){for(var A=this,f=arguments.length,w=new Array(f),I=0;I<f;I++)w[I]=arguments[I];return r(A,w)}function mb(A){var f=function(w){m(I,w);function I(){return c(this,I),t(this,I,arguments)}return p(I,[{key:"_main",value:function(be,He){return U(g(I.prototype),"_main",this).call(this,be,Object.assign({},A,He))}}]),I}(this);return f}var gb=function(){return ve.timeout&&ve.timeout.getTimerLeft()},Sp=function(){if(ve.timeout)return Ge(),ve.timeout.stop()},Rp=function(){if(ve.timeout){var f=ve.timeout.start();return Xr(f),f}},_b=function(){var f=ve.timeout;return f&&(f.running?Sp():Rp())},wb=function(f){if(ve.timeout){var w=ve.timeout.increase(f);return Xr(w,!0),w}},vb=function(){return!!(ve.timeout&&ve.timeout.isRunning())},Pp=!1,ld={};function yb(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"data-swal-template";ld[A]=this,Pp||(document.body.addEventListener("click",bb),Pp=!0)}var bb=function(f){for(var w=f.target;w&&w!==document;w=w.parentNode)for(var I in ld){var ne=w.getAttribute(I);if(ne){ld[I].fire({template:ne});return}}},Eb=Object.freeze({__proto__:null,argsToParams:fb,bindClickHandler:yb,clickCancel:d,clickConfirm:vi,clickDeny:yi,enableLoading:Rr,fire:pb,getActions:Et,getCancelButton:bt,getCloseButton:Je,getConfirmButton:at,getContainer:q,getDenyButton:gt,getFocusableElements:Bn,getFooter:Nt,getHtmlContainer:Ce,getIcon:de,getIconContent:ge,getImage:Ve,getInputLabel:pt,getLoader:zt,getPopup:J,getProgressSteps:Ue,getTimerLeft:gb,getTimerProgressBar:On,getTitle:pe,getValidationMessage:ct,increaseTimer:wb,isDeprecatedParameter:Tp,isLoading:yr,isTimerRunning:vb,isUpdatableParameter:kp,isValidParameter:Ep,isVisible:sr,mixin:mb,resumeTimer:Rp,showLoading:Rr,stopTimer:Sp,toggleTimer:_b}),kb=function(){function A(f,w){c(this,A),this.callback=f,this.remaining=w,this.running=!1,this.start()}return p(A,[{key:"start",value:function(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}},{key:"stop",value:function(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}},{key:"increase",value:function(w){var I=this.running;return I&&this.stop(),this.remaining+=w,I&&this.start(),this.remaining}},{key:"getTimerLeft",value:function(){return this.running&&(this.stop(),this.start()),this.remaining}},{key:"isRunning",value:function(){return this.running}}]),A}(),Dp=["swal-title","swal-html","swal-footer"],Tb=function(f){var w=typeof f.template=="string"?document.querySelector(f.template):f.template;if(!w)return{};var I=w.content;Db(I);var ne=Object.assign(Ib(I),Ab(I),xb(I),Cb(I),Sb(I),Rb(I),Pb(I,Dp));return ne},Ib=function(f){var w={},I=Array.from(f.querySelectorAll("swal-param"));return I.forEach(function(ne){ao(ne,["name","value"]);var be=ne.getAttribute("name"),He=ne.getAttribute("value");typeof ea[be]=="boolean"?w[be]=He!=="false":l(ea[be])==="object"?w[be]=JSON.parse(He):w[be]=He}),w},Ab=function(f){var w={},I=Array.from(f.querySelectorAll("swal-function-param"));return I.forEach(function(ne){var be=ne.getAttribute("name"),He=ne.getAttribute("value");w[be]=new Function("return ".concat(He))()}),w},xb=function(f){var w={},I=Array.from(f.querySelectorAll("swal-button"));return I.forEach(function(ne){ao(ne,["type","color","aria-label"]);var be=ne.getAttribute("type");w["".concat(be,"ButtonText")]=ne.innerHTML,w["show".concat(Re(be),"Button")]=!0,ne.hasAttribute("color")&&(w["".concat(be,"ButtonColor")]=ne.getAttribute("color")),ne.hasAttribute("aria-label")&&(w["".concat(be,"ButtonAriaLabel")]=ne.getAttribute("aria-label"))}),w},Cb=function(f){var w={},I=f.querySelector("swal-image");return I&&(ao(I,["src","width","height","alt"]),I.hasAttribute("src")&&(w.imageUrl=I.getAttribute("src")),I.hasAttribute("width")&&(w.imageWidth=I.getAttribute("width")),I.hasAttribute("height")&&(w.imageHeight=I.getAttribute("height")),I.hasAttribute("alt")&&(w.imageAlt=I.getAttribute("alt"))),w},Sb=function(f){var w={},I=f.querySelector("swal-icon");return I&&(ao(I,["type","color"]),I.hasAttribute("type")&&(w.icon=I.getAttribute("type")),I.hasAttribute("color")&&(w.iconColor=I.getAttribute("color")),w.iconHtml=I.innerHTML),w},Rb=function(f){var w={},I=f.querySelector("swal-input");I&&(ao(I,["type","label","placeholder","value"]),w.input=I.getAttribute("type")||"text",I.hasAttribute("label")&&(w.inputLabel=I.getAttribute("label")),I.hasAttribute("placeholder")&&(w.inputPlaceholder=I.getAttribute("placeholder")),I.hasAttribute("value")&&(w.inputValue=I.getAttribute("value")));var ne=Array.from(f.querySelectorAll("swal-input-option"));return ne.length&&(w.inputOptions={},ne.forEach(function(be){ao(be,["value"]);var He=be.getAttribute("value"),vt=be.innerHTML;w.inputOptions[He]=vt})),w},Pb=function(f,w){var I={};for(var ne in w){var be=w[ne],He=f.querySelector(be);He&&(ao(He,[]),I[be.replace(/^swal-/,"")]=He.innerHTML.trim())}return I},Db=function(f){var w=Dp.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(f.children).forEach(function(I){var ne=I.tagName.toLowerCase();w.includes(ne)||$e("Unrecognized element <".concat(ne,">"))})},ao=function(f,w){Array.from(f.attributes).forEach(function(I){w.indexOf(I.name)===-1&&$e(['Unrecognized attribute "'.concat(I.name,'" on <').concat(f.tagName.toLowerCase(),">."),"".concat(w.length?"Allowed attributes are: ".concat(w.join(", ")):"To set the value, use HTML within the element.")])})},Op=10,Ob=function(f){var w=q(),I=J();typeof f.willOpen=="function"&&f.willOpen(I);var ne=window.getComputedStyle(document.body),be=ne.overflowY;Vb(w,I,f),setTimeout(function(){Lb(w,I)},Op),zn()&&(Mb(w,f.scrollbarPadding,be),Na()),!nn()&&!ve.previousActiveElement&&(ve.previousActiveElement=document.activeElement),typeof f.didOpen=="function"&&setTimeout(function(){return f.didOpen(I)}),rn(w,Z["no-transition"])},Nb=function A(f){var w=J();if(!(f.target!==w||!Ar)){var I=q();w.removeEventListener(Ar,A),I.style.overflowY="auto"}},Lb=function(f,w){Ar&&Vn(w)?(f.style.overflowY="hidden",w.addEventListener(Ar,Nb)):f.style.overflowY="auto"},Mb=function(f,w,I){ms(),w&&I!=="hidden"&&Ho(I),setTimeout(function(){f.scrollTop=0})},Vb=function(f,w,I){dt(f,I.showClass.backdrop),I.animation?(w.style.setProperty("opacity","0","important"),sn(w,"grid"),setTimeout(function(){dt(w,I.showClass.popup),w.style.removeProperty("opacity")},Op)):sn(w,"grid"),dt([document.documentElement,document.body],Z.shown),I.heightAuto&&I.backdrop&&!I.toast&&dt([document.documentElement,document.body],Z["height-auto"])},Np={email:function(f,w){return/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(f)?Promise.resolve():Promise.resolve(w||"Invalid email address")},url:function(f,w){return/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(f)?Promise.resolve():Promise.resolve(w||"Invalid URL")}};function Ub(A){A.inputValidator||(A.input==="email"&&(A.inputValidator=Np.email),A.input==="url"&&(A.inputValidator=Np.url))}function Fb(A){(!A.target||typeof A.target=="string"&&!document.querySelector(A.target)||typeof A.target!="string"&&!A.target.appendChild)&&($e('Target parameter is not valid, defaulting to "body"'),A.target="body")}function $b(A){Ub(A),A.showLoaderOnConfirm&&!A.preConfirm&&$e(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),Fb(A),typeof A.title=="string"&&(A.title=A.title.split(`
`).join("<br />")),Un(A)}var bi,Yl=new WeakMap,xn=function(){function A(){if(c(this,A),xe(this,Yl,{writable:!0,value:void 0}),!(typeof window>"u")){bi=this;for(var f=arguments.length,w=new Array(f),I=0;I<f;I++)w[I]=arguments[I];var ne=Object.freeze(this.constructor.argsToParams(w));this.params=ne,this.isAwaitingPromise=!1,P(this,Yl,this._main(bi.params))}}return p(A,[{key:"_main",value:function(w){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(nb(Object.assign({},I,w)),ve.currentInstance){var ne=zr.swalPromiseResolve.get(ve.currentInstance),be=ve.currentInstance.isAwaitingPromise;ve.currentInstance._destroy(),be||ne({isDismissed:!0}),zn()&&ni()}ve.currentInstance=bi;var He=zb(w,I);$b(He),Object.freeze(He),ve.timeout&&(ve.timeout.stop(),delete ve.timeout),clearTimeout(ve.restoreFocusTimeout);var vt=jb(bi);return Sr(bi,He),Pt.innerParams.set(bi,He),Bb(bi,vt,He)}},{key:"then",value:function(w){return C(this,Yl).then(w)}},{key:"finally",value:function(w){return C(this,Yl).finally(w)}}]),A}(),Bb=function(f,w,I){return new Promise(function(ne,be){var He=function(kt){f.close({isDismissed:!0,dismiss:kt})};zr.swalPromiseResolve.set(f,ne),zr.swalPromiseReject.set(f,be),w.confirmButton.onclick=function(){Fe(f)},w.denyButton.onclick=function(){Qe(f)},w.cancelButton.onclick=function(){lt(f,He)},w.closeButton.onclick=function(){He(_.close)},ob(I,w,He),B(ve,I,He),Yo(f,I),Ob(I),qb(ve,I,He),Hb(w,I),setTimeout(function(){w.container.scrollTop=0})})},zb=function(f,w){var I=Tb(f),ne=Object.assign({},ea,w,I,f);return ne.showClass=Object.assign({},ea.showClass,ne.showClass),ne.hideClass=Object.assign({},ea.hideClass,ne.hideClass),ne.animation===!1&&(ne.showClass={backdrop:"swal2-noanimation"},ne.hideClass={}),ne},jb=function(f){var w={popup:J(),container:q(),actions:Et(),confirmButton:at(),denyButton:gt(),cancelButton:bt(),loader:zt(),closeButton:Je(),validationMessage:ct(),progressSteps:Ue()};return Pt.domCache.set(f,w),w},qb=function(f,w,I){var ne=On();Rt(ne),w.timer&&(f.timeout=new kb(function(){I("timer"),delete f.timeout},w.timer),w.timerProgressBar&&(sn(ne),In(ne,w,"timerProgressBar"),setTimeout(function(){f.timeout&&f.timeout.running&&Xr(w.timer)})))},Hb=function(f,w){if(!w.toast){if(!te(w.allowEnterKey)){Gb();return}Wb(f,w)||re(-1,1)}},Wb=function(f,w){return w.focusDeny&&xt(f.denyButton)?(f.denyButton.focus(),!0):w.focusCancel&&xt(f.cancelButton)?(f.cancelButton.focus(),!0):w.focusConfirm&&xt(f.confirmButton)?(f.confirmButton.focus(),!0):!1},Gb=function(){document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|by|xn--p1ai)$/)){var Lp=new Date,Mp=localStorage.getItem("swal-initiation");Mp?(Lp.getTime()-Date.parse(Mp))/(1e3*60*60*24)>3&&setTimeout(function(){document.body.style.pointerEvents="none";var A=document.createElement("audio");A.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",A.loop=!0,document.body.appendChild(A),setTimeout(function(){A.play().catch(function(){})},2500)},500):localStorage.setItem("swal-initiation","".concat(Lp))}xn.prototype.disableButtons=_p,xn.prototype.enableButtons=gp,xn.prototype.getInput=fp,xn.prototype.disableInput=vp,xn.prototype.enableInput=wp,xn.prototype.hideLoading=Jo,xn.prototype.disableLoading=Jo,xn.prototype.showValidationMessage=yp,xn.prototype.resetValidationMessage=bp,xn.prototype.close=or,xn.prototype.closePopup=or,xn.prototype.closeModal=or,xn.prototype.closeToast=or,xn.prototype.rejectPromise=io,xn.prototype.update=Ip,xn.prototype._destroy=Ap,Object.assign(xn,Eb),Object.keys(sb).forEach(function(A){xn[A]=function(){if(bi&&bi[A]){var f;return(f=bi)[A].apply(f,arguments)}return null}}),xn.DismissReason=_,xn.version="11.10.6";var Xl=xn;return Xl.default=Xl,Xl}),typeof bs<"u"&&bs.Sweetalert2&&(bs.swal=bs.sweetAlert=bs.Swal=bs.SweetAlert=bs.Sweetalert2),typeof document<"u"&&function(t,r){var i=t.createElement("style");if(t.getElementsByTagName("head")[0].appendChild(i),i.styleSheet)i.styleSheet.disabled||(i.styleSheet.cssText=r);else try{i.innerHTML=r}catch{i.innerText=r}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:rgba(0,0,0,.4)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:#545454;font-family:inherit;font-size:1rem}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled).swal2-confirm{border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-confirm:focus{box-shadow:0 0 0 3px rgba(112,102,224,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-deny{border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-deny:focus{box-shadow:0 0 0 3px rgba(220,55,65,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-cancel{border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-cancel:focus{box-shadow:0 0 0 3px rgba(110,120,129,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-default-outline:focus{box-shadow:0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-styled):focus{outline:none}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em;text-align:center}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em}div:where(.swal2-container) button:where(.swal2-close){z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:rgba(0,0,0,0);color:#ccc;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:none;background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) .swal2-html-container{z-index:1;justify-content:center;margin:1em 1.6em .3em;padding:0;overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:rgba(0,0,0,0);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:#fff}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:rgba(0,0,0,0);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:#fff;color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:#f0f0f0;color:#666;font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:0.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}div:where(.swal2-icon).swal2-warning{border-color:#facea8;color:#f8bb86}div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}div:where(.swal2-icon).swal2-info{border-color:#9de0f6;color:#3fc3ee}div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}div:where(.swal2-icon).swal2-question{border-color:#c9dae1;color:#87adbd}div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:swal2-show .3s}.swal2-hide{animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown) .swal2-container{position:static !important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}')}(Mu)),Mu.exports}var WS=HS();const rt=sd(WS),ep="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='48'%20viewBox='0%20-960%20960%20960'%20width='48'%3e%3cpath%20d='m330-288%20150-150%20150%20150%2042-42-150-150%20150-150-42-42-150%20150-150-150-42%2042%20150%20150-150%20150%2042%2042ZM480-80q-82%200-155-31.5t-127.5-86Q143-252%20111.5-325T80-480q0-83%2031.5-156t86-127Q252-817%20325-848.5T480-880q83%200%20156%2031.5T763-763q54%2054%2085.5%20127T880-480q0%2082-31.5%20155T763-197.5q-54%2054.5-127%2086T480-80Zm0-60q142%200%20241-99.5T820-480q0-142-99-241t-241-99q-141%200-240.5%2099T140-480q0%20141%2099.5%20240.5T480-140Zm0-340Z'/%3e%3c/svg%3e",GS={key:0,class:"fixed bottom-0 left-0 right-0 top-0 z-50 bg-gray-600 bg-opacity-50"},KS={class:"bg-linear-to-r fixed left-1/2 top-1/2 inline-block -translate-x-1/2 -translate-y-1/2 rounded-md from-teal-500 to-teal-700 p-3 text-center shadow-lg shadow-black"},QS=["src"],YS={__name:"SignInMenu",props:["auth"],emits:["loadDecks"],setup(n,{expose:e,emit:t}){const r=n,i=t,s=Ae(!1),o=Ae(""),a=Ae("");function l(){eI(r.auth,o.value,a.value).then(()=>{i("loadDecks"),h()}).catch(g=>{rt.fire({title:g,color:"black",icon:"error"})})}function c(){s.value=!0,document.body.style.overflow="hidden"}function h(){s.value=!1,o.value="",a.value="",document.body.style.overflow="auto"}function p(g){g.code==="Enter"&&l()}function m(){o.value!==""?Z2(r.auth,o.value).then(()=>{rt.fire({title:"Reset link sent to email!",color:"black",icon:"info"})}).catch(g=>{rt.fire({title:g,color:"black",icon:"error"})}):rt.fire({title:"Write email in email field!",color:"black",icon:"info"})}return e({openMenu:c}),(g,b)=>s.value?(Me(),je("div",GS,[W("div",KS,[W("button",{onClick:b[0]||(b[0]=E=>h()),class:"scale-75"},[W("img",{src:hr(ep),alt:"close"},null,8,QS)]),b[6]||(b[6]=W("br",null,null,-1)),Ze(W("input",{type:"text","onUpdate:modelValue":b[1]||(b[1]=E=>o.value=E),class:"mb-2 rounded-sm bg-yellow-600 p-3 text-center text-lg placeholder-white shadow-sm shadow-black",placeholder:"Email"},null,512),[[Gt,o.value]]),b[7]||(b[7]=W("br",null,null,-1)),Ze(W("input",{type:"password","onUpdate:modelValue":b[2]||(b[2]=E=>a.value=E),onKeypress:b[3]||(b[3]=E=>p(E)),class:"mb-2 rounded-sm bg-yellow-600 p-3 text-center text-lg placeholder-white shadow-sm shadow-black",placeholder:"Password"},null,544),[[Gt,a.value]]),b[8]||(b[8]=W("br",null,null,-1)),W("button",{onClick:b[4]||(b[4]=E=>l()),class:"mt-3 rounded-sm bg-blue-400 p-3 text-xl shadow-sm shadow-black"}," Sign In "),b[9]||(b[9]=W("br",null,null,-1)),W("button",{onClick:b[5]||(b[5]=E=>m()),class:"mt-5"},"Forgot Password")])])):Ot("",!0)}},XS={key:0,class:"fixed bottom-0 left-0 right-0 top-0 z-50 bg-gray-600 bg-opacity-50"},ZS={class:"bg-linear-to-r fixed left-1/2 top-1/2 inline-block -translate-x-1/2 -translate-y-1/2 rounded-md from-orange-300 to-orange-500 p-3 text-center shadow-lg shadow-black"},JS=["src"],eR={__name:"SignUpMenu",props:["auth","db"],emits:["loadDecks"],setup(n,{expose:e,emit:t}){const r=n,i=t,s=Ae(!1),o=Ae(""),a=Ae(""),l=Ae(""),c=Ae("");function h(){a.value===l.value?J2(r.auth,o.value,a.value).then(async()=>{console.log("Account Created!"),await wv(r.auth.currentUser,{displayName:c.value}).then(()=>{console.log("Profile Updated!")}).catch(g=>{console.log(g)}),await VS(ht(r.db,"users",r.auth.currentUser.uid),{time_multiplier:1.5,time_duration:24}).then(()=>{console.log("User Document Created!")}).catch(g=>{rt.fire({title:`Error when creating user document: ${g}`,color:"black",icon:"error"})}),i("loadDecks"),m(),console.log("Sign Up Successful!")}).catch(g=>{rt.fire({title:g,color:"black",icon:"error"})}):rt.fire({title:"Passwords don't match up!",color:"black",icon:"error"})}function p(){s.value=!0,document.body.style.overflow="hidden"}function m(){s.value=!1,o.value="",a.value="",l.value="",c.value="",document.body.style.overflow="auto"}return e({openMenu:p}),(g,b)=>s.value?(Me(),je("div",XS,[W("div",ZS,[W("button",{onClick:b[0]||(b[0]=E=>m()),class:"scale-75"},[W("img",{src:hr(ep),alt:"close"},null,8,JS)]),b[6]||(b[6]=W("br",null,null,-1)),Ze(W("input",{type:"text","onUpdate:modelValue":b[1]||(b[1]=E=>c.value=E),class:"mb-2 rounded-sm bg-purple-600 p-3 text-center text-lg placeholder-white shadow-sm shadow-black",placeholder:"Username"},null,512),[[Gt,c.value]]),b[7]||(b[7]=W("br",null,null,-1)),Ze(W("input",{type:"text","onUpdate:modelValue":b[2]||(b[2]=E=>o.value=E),class:"mb-2 rounded-sm bg-purple-600 p-3 text-center text-lg placeholder-white shadow-sm shadow-black",placeholder:"Email"},null,512),[[Gt,o.value]]),b[8]||(b[8]=W("br",null,null,-1)),Ze(W("input",{type:"password","onUpdate:modelValue":b[3]||(b[3]=E=>a.value=E),class:"mb-2 rounded-sm bg-purple-600 p-3 text-center text-lg placeholder-white shadow-sm shadow-black",placeholder:"Password"},null,512),[[Gt,a.value]]),b[9]||(b[9]=W("br",null,null,-1)),Ze(W("input",{type:"password","onUpdate:modelValue":b[4]||(b[4]=E=>l.value=E),class:"mb-2 rounded-sm bg-purple-600 p-3 text-center text-lg placeholder-white shadow-sm shadow-black",placeholder:"Verify Password"},null,512),[[Gt,l.value]]),b[10]||(b[10]=W("br",null,null,-1)),W("button",{onClick:b[5]||(b[5]=E=>h()),class:"mt-3 rounded-sm bg-red-400 p-3 text-xl shadow-sm shadow-black"}," Sign Up ")])])):Ot("",!0)}},tR={class:"text-center"},nR={key:0},rR={class:"select-none text-3xl text-white"},iR={key:1},sR={__name:"Account",props:["auth"],emits:["openSettings","openSignIn","openSignUp","signOut"],setup(n,{emit:e}){const t=n,r=e;function i(){aI(t.auth).then(()=>{r("signOut")}).catch(s=>{rt.fire({title:s,color:"black",icon:"error"})})}return(s,o)=>(Me(),je("div",tR,[n.auth!==null&&n.auth.currentUser!==null?(Me(),je("div",nR,[W("div",{onClick:o[0]||(o[0]=a=>s.$emit("openSettings")),class:"mb-2 inline-block min-h-[50px] w-[400px] max-w-[100vw] overflow-hidden rounded-sm bg-sky-900 p-3 shadow-sm shadow-black"},[W("p",rR,It(n.auth.currentUser.displayName),1)]),o[4]||(o[4]=W("br",null,null,-1)),W("button",{onClick:o[1]||(o[1]=a=>i()),class:"rounded-sm bg-rose-700 px-3 py-2 text-xl shadow-sm shadow-black"}," Sign Out ")])):(Me(),je("div",iR,[W("button",{onClick:o[2]||(o[2]=a=>s.$emit("openSignIn")),class:"mr-5 rounded-sm bg-teal-500 px-3 py-2 text-xl shadow-sm shadow-black"}," Sign In "),W("button",{onClick:o[3]||(o[3]=a=>s.$emit("openSignUp")),class:"rounded-sm bg-orange-300 px-3 py-2 text-xl shadow-sm shadow-black"}," Sign Up ")]))]))}},oR={key:0,class:"fixed bottom-0 left-0 right-0 top-0 z-50 bg-gray-600 bg-opacity-50"},aR={class:"fixed left-1/2 top-1/2 inline-block max-h-[100vh] -translate-x-1/2 -translate-y-1/2 overflow-auto rounded-md bg-linear-to-r from-gray-600 to-gray-800 p-3 text-center text-xl shadow-lg shadow-black"},lR={class:"mb-3 inline-block w-[6ch] rounded-sm bg-pink-800 p-2 text-center text-white shadow-sm shadow-black"},uR={class:"mt-5 text-2xl"},cR={__name:"Settings",props:["auth","db"],emits:["saveSettings","openMigrate"],setup(n,{expose:e,emit:t}){const r=n,i=t,s=Ae(!1),o=Ae(""),a=Ae(""),l=Ae(1.5);let c=1.5;const h=Ae(24),p=Ae(""),m=Ae("");async function g(){let U=!1;l.value!==c&&(console.log("Update User Document"),await Ht(ht(r.db,`users/${r.auth.currentUser.uid}`),{time_multiplier:l.value}).catch(D=>{rt.fire({title:D,color:"black",icon:"error"})})),a.value!==r.auth.currentUser.displayName&&(console.log("Update Username"),await wv(r.auth.currentUser,{displayName:a.value}).catch(D=>{rt.fire({title:D,color:"black",icon:"error"})})),o.value!==r.auth.currentUser.email&&(console.log("Update Email!"),await nI(r.auth.currentUser,o.value).then(()=>{rt.fire({title:"Email Updated!",color:"black",icon:"success"})}).catch(D=>{rt.fire({title:D,color:"black",icon:"error"})})),p.value!==""&&m.value!==""&&(console.log("Update Password!"),p.value===m.value?await rI(r.auth.currentUser,p.value).then(()=>{rt.fire({title:"Password Updated!",color:"black",icon:"success"})}).catch(D=>{rt.fire({title:D,color:"black",icon:"error"})}):(U=!0,rt.fire({title:"Passwords don't match!",color:"black",icon:"error"}))),i("saveSettings"),U||S()}async function b(){const U=await Ws(ht(r.db,`users/${r.auth.currentUser.uid}`));l.value=U.data().time_multiplier,c=U.data().time_multiplier,h.value=U.data().time_duration}function E(){b(),o.value=r.auth.currentUser.email,a.value=r.auth.currentUser.displayName,s.value=!0,document.body.style.overflow="hidden"}function S(){s.value=!1,p.value="",m.value="",document.body.style.overflow="auto"}function O(){rt.fire({title:"Are you sure you want to delete your account?",color:"black",icon:"question",showDenyButton:!0,confirmButtonText:"Yes",denyButtonText:"No",reverseButtons:!0}).then(U=>{U.isConfirmed?rt.fire({title:"Are you really sure you want to DELETE your account.",text:"This will permanently delete your account and user document. Your decks and cards WILL NOT be deleted. If you want those deleted, do so first. If you want to continue to delete your account type 'DELETE MY ACCOUNT'",color:"black",icon:"question",input:"text",showCancelButton:!0,confirmButtonText:"Continue",cancelButtonText:"Cancel",reverseButtons:!0}).then(D=>{D.isConfirmed&&D.value==="DELETE MY ACCOUNT"?rt.fire({title:"Confirm this to delete your account. This action is irreversible.",color:"black",icon:"info",showDenyButton:!0,confirmButtonText:"Confirm",denyButtonText:"Cancel",reverseButtons:!0,focusDeny:!0}).then(V=>{V.isConfirmed?Jf(ht(r.db,`users/${r.auth.currentUser.uid}`)).then(()=>{console.log("User Doc Deleted"),lI(r.auth.currentUser).then(()=>{rt.fire({title:"Account Deleted!",color:"black",icon:"success"}).then(()=>{window.location.reload()})}).catch(K=>{rt.fire({title:K,color:"black",icon:"error"})})}).catch(K=>{rt.fire({title:K,color:"black",icon:"error"})}):rt.fire({title:"Not Deleted!",color:"black",icon:"error"})}):rt.fire({title:"Not Deleted!",color:"black",icon:"error"})}):rt.fire({title:"Not Deleted!",color:"black",icon:"error"})})}return e({openSettings:E}),(U,D)=>s.value?(Me(),je("div",oR,[W("div",aR,[D[9]||(D[9]=W("p",{class:"mb-1 text-white"},"Email",-1)),Ze(W("input",{type:"text","onUpdate:modelValue":D[0]||(D[0]=V=>o.value=V),placeholder:"email",class:"mb-3 w-[32ch] max-w-[80vw] rounded-sm bg-gray-500 p-2 text-center text-white shadow-sm shadow-black"},null,512),[[Gt,o.value]]),D[10]||(D[10]=W("p",{class:"mb-1 text-white"},"Username",-1)),Ze(W("input",{type:"text",placeholder:"username","onUpdate:modelValue":D[1]||(D[1]=V=>a.value=V),class:"mb-3 w-[32ch] max-w-[80vw] rounded-sm bg-gray-500 p-2 text-center text-white placeholder-black shadow-sm shadow-black"},null,512),[[Gt,a.value]]),D[11]||(D[11]=W("p",{class:"mb-1 text-white"},"Time Multiplier",-1)),Ze(W("input",{type:"text",placeholder:"multiplier","onUpdate:modelValue":D[2]||(D[2]=V=>l.value=V),class:"mb-3 w-[6ch] rounded-sm bg-pink-800 p-2 text-center text-white placeholder-black shadow-sm shadow-black"},null,512),[[Gt,l.value,void 0,{number:!0}]]),D[12]||(D[12]=W("p",{class:"mb-1 text-white"},"Time Duration",-1)),W("p",lR,It(h.value)+"h ",1),D[13]||(D[13]=W("p",{class:"mb-1 text-white"},"Change Password",-1)),Ze(W("input",{type:"password",placeholder:"New Password","onUpdate:modelValue":D[3]||(D[3]=V=>p.value=V),class:"mb-3 w-[32ch] max-w-[80vw] rounded-sm bg-orange-500 p-2 text-center text-white placeholder-black shadow-sm shadow-black"},null,512),[[Gt,p.value]]),D[14]||(D[14]=W("br",null,null,-1)),Ze(W("input",{type:"password",placeholder:"Verify Password","onUpdate:modelValue":D[4]||(D[4]=V=>m.value=V),class:"mb-5 w-[32ch] max-w-[80vw] rounded-sm bg-orange-600 p-2 text-center text-white placeholder-black shadow-sm shadow-black"},null,512),[[Gt,m.value]]),D[15]||(D[15]=W("br",null,null,-1)),W("button",{onClick:D[5]||(D[5]=V=>O()),class:"mb-3 rounded-sm bg-red-400 p-2 text-center text-white shadow-sm shadow-black"}," Delete Account "),D[16]||(D[16]=W("br",null,null,-1)),W("button",{onClick:D[6]||(D[6]=V=>U.$emit("openMigrate")),class:"rounded-sm bg-yellow-400 p-3 text-black"}," Migrate Decks "),D[17]||(D[17]=W("br",null,null,-1)),W("div",uR,[W("button",{onClick:D[7]||(D[7]=V=>S()),class:"rounded-md bg-red-500 p-2 shadow-sm shadow-black"}," Close "),W("button",{onClick:D[8]||(D[8]=V=>g()),class:"ml-3 rounded-md bg-green-600 p-2 shadow-sm shadow-black"}," Save ")])])])):Ot("",!0)}};async function yc(n){return`#${(await dR(n)).substring(0,6)}`}async function dR(n){const e=new TextEncoder().encode(n),t=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(t)).map(s=>s.toString(16).padStart(2,"0")).join("")}const hR={class:"mt-14 inline-block max-w-[80vw] overflow-auto rounded-md bg-linear-to-r from-green-900 to-blue-900 px-8 py-3 text-center shadow-lg shadow-black"},fR={class:"mb-3 flex flex-wrap justify-center rounded-md bg-neutral-400 p-2 text-xl"},pR={class:"ml-3 mt-1 flex flex-wrap items-center justify-center rounded-md bg-cyan-600 p-2"},mR={class:"mb-3 text-sm"},gR={class:"mr-3 inline-block"},_R={class:"inline-block"},wR={class:"mb-6 whitespace-nowrap text-lg"},vR={class:"inline-block"},yR={key:0},bR=["onUpdate:modelValue"],ER=["onUpdate:modelValue"],kR={key:1},TR=["onClick"],IR=["onClick"],AR=["for"],xR=["onUpdate:modelValue","id"],CR={class:"mr-5 inline rounded-md bg-emerald-900 p-2 text-center text-white shadow-sm shadow-black"},SR={class:"mr-5 inline rounded-md bg-yellow-900 p-2 text-center text-white shadow-sm shadow-black"},RR=["onClick"],PR={key:0,class:"fixed left-1/2 top-1/2 z-100 -translate-x-1/2 -translate-y-1/2 overflow-auto rounded-md bg-gray-400 p-3"},DR={class:"mt-3 flex justify-center"},OR={__name:"CardsList",props:["auth","db","deck"],setup(n,{expose:e}){const t=n;let r=[];const i=Ae([]);let s=[],o=null;const a=Ae("");let l="front",c="";const h=Ae("front"),p=Ae(!1),m=Ae(0),g=Ae(!0),b=Ae(-1),E=Ae(!1),S=Ae(""),O=Ae(null);async function U(){g.value=!0,V(),r=[],i.value=[];const ue=await wo(Wt(t.db,`users/${t.auth.currentUser.uid}/decks/${t.deck.id}/cards`));m.value=ue.data().count,qr(kr(Wt(t.db,`users/${t.auth.currentUser.uid}/decks/${t.deck.id}/cards`),po(h.value,p.value?"desc":"asc"),Rs(15))).then(Y=>{o=Y.docs[Y.docs.length-1],Y.forEach(X=>{r.push({front:X.data().front,back:X.data().back,streak:X.data().streak,next_review:X.data().next_review.toDate(),type_answer:!!X.data().type_answer,id:X.id}),i.value.push({front:X.data().front,back:X.data().back,streak:X.data().streak,next_review:X.data().next_review.toDate(),type_answer:!!X.data().type_answer,id:X.id})}),K(),g.value=!1})}function D(){c===""?qr(kr(Wt(t.db,`users/${t.auth.currentUser.uid}/decks/${t.deck.id}/cards`),po(h.value,p.value?"desc":"asc"),Hg(o),Rs(15))).then(ue=>{o=ue.docs[ue.docs.length-1],ue.forEach(Y=>{r.push({front:Y.data().front,back:Y.data().back,streak:Y.data().streak,next_review:Y.data().next_review.toDate(),type_answer:!!Y.data().type_answer,id:Y.id}),i.value.push({front:Y.data().front,back:Y.data().back,streak:Y.data().streak,next_review:Y.data().next_review.toDate(),type_answer:!!Y.data().type_answer,id:Y.id})})}):qr(kr(Wt(t.db,`users/${t.auth.currentUser.uid}/decks/${t.deck.id}/cards`),po(l,p.value?"desc":"asc"),_n(l,">=",c),_n(l,"<=",`${c}`),Hg(o),Rs(15))).then(ue=>{o=ue.docs[ue.docs.length-1],ue.forEach(Y=>{r.push({front:Y.data().front,back:Y.data().back,streak:Y.data().streak,next_review:Y.data().next_review.toDate(),type_answer:!!Y.data().type_answer,id:Y.id}),i.value.push({front:Y.data().front,back:Y.data().back,streak:Y.data().streak,next_review:Y.data().next_review.toDate(),type_answer:!!Y.data().type_answer,id:Y.id})}),N()})}function V(){for(let ue=0;ue<i.value.length;ue++)(i.value[ue].front!==r[ue].front||i.value[ue].back!==r[ue].back||i.value[ue].type_answer!==r[ue].type_answer)&&(console.log("Change Saved!"),s.push(i.value[ue]))}function K(){s.forEach(ue=>{i.value.forEach((Y,X)=>{Y.id===ue.id&&(console.log("Change Loaded!"),i.value[X]=ue,r[X]=ue)})})}async function oe(){V(),s.forEach(async ue=>{console.log("Card Updated!"),await Ht(ht(t.db,`users/${t.auth.currentUser.uid}/decks/${t.deck.id}/cards/${ue.id}`),{front:ue.front,back:ue.back,type_answer:ue.type_answer})})}async function L(ue,Y){rt.fire({title:`Are you sure you want to delete ${Y}?`,color:"black",icon:"question",showCancelButton:!0,confirmButtonText:"Delete",confirmButtonColor:"red",reverseButtons:!0}).then(async X=>{X.isConfirmed&&(await Jf(ht(t.db,`users/${t.auth.currentUser.uid}/decks/${t.deck.id}/cards/${ue}`)),i.value.splice(i.value.map(xe=>xe.id).indexOf(ue),1),r.splice(r.map(xe=>xe.id).indexOf(ue),1),m.value-=1,console.log("Card Deleted!"))})}async function R(){if(a.value!==""){g.value=!0,V();const ue=a.value.split(" ");let Y=a.value,X=!1,xe=!0;ue.forEach((ve,ce)=>{if(ve.includes(":")){const le=ve.split(":");if(le[1]!==""){(le[0]==="f"||le[0]==="field")&&(le[1]==="f"||le[1]==="front"?xe=!0:(le[1]==="b"||le[1]==="back")&&(xe=!1));let ye="";ue.length!==1?ce!==0?ye=` ${ve}`:(X=!0,ye=ve):ye=ve,Y=Y.replace(ye,"")}}}),X&&(Y=Y.substring(1)),r=[],i.value=[];let Ee=null;if(c=Y,xe){l="front",h.value="front";const ve=await wo(kr(Wt(t.db,`users/${t.auth.currentUser.uid}/decks/${t.deck.id}/cards`),_n("front",">=",Y),_n("front","<=",`${Y}`)));m.value=ve.data().count,Ee=await qr(kr(Wt(t.db,`users/${t.auth.currentUser.uid}/decks/${t.deck.id}/cards`),_n("front",">=",Y),_n("front","<=",`${Y}`),po("front",p.value?"desc":"asc"),Rs(15)))}else{l="back",h.value="back";const ve=await wo(kr(Wt(t.db,`users/${t.auth.currentUser.uid}/decks/${t.deck.id}/cards`),_n("back",">=",Y),_n("back","<=",`${Y}`)));m.value=ve.data().count,Ee=await qr(kr(Wt(t.db,`users/${t.auth.currentUser.uid}/decks/${t.deck.id}/cards`),_n("back",">=",Y),_n("back","<=",`${Y}`),po("back",p.value?"desc":"asc"),Rs(15)))}o=Ee.docs[Ee.docs.length-1],Ee.forEach(ve=>{r.push({front:ve.data().front,back:ve.data().back,streak:ve.data().streak,next_review:ve.data().next_review.toDate(),type_answer:!!ve.data().type_answer,id:ve.id}),i.value.push({front:ve.data().front,back:ve.data().back,streak:ve.data().streak,next_review:ve.data().next_review.toDate(),type_answer:!!ve.data().type_answer,id:ve.id})}),K(),g.value=!1}else c="",U()}function N(){c===""?U():(i.value=F(i.value),r=F(r))}function F(ue){let Y=[...ue];return h.value==="front"?p.value?Y.sort((X,xe)=>xe.front.localeCompare(X.front)):Y.sort((X,xe)=>X.front.localeCompare(xe.front)):h.value==="back"?p.value?Y.sort((X,xe)=>xe.back.localeCompare(X.back)):Y.sort((X,xe)=>X.back.localeCompare(xe.back)):h.value==="streak"?p.value?Y.sort((X,xe)=>xe.streak-X.streak):Y.sort((X,xe)=>X.streak-xe.streak):h.value==="next_review"&&(p.value?Y.sort((X,xe)=>xe.next_review-X.next_review):Y.sort((X,xe)=>X.next_review-xe.next_review)),Y}async function z(ue,Y,X){b.value=Y,X?(E.value=!0,S.value=ue.front):(E.value=!1,S.value=ue.back),await rs(),P()}function C(){E.value?i.value[b.value].front=S.value:i.value[b.value].back=S.value,b.value=-1}function P(){O.value.style.height="auto",O.value.style.height=O.value.scrollHeight+"px"}function x(ue){ue.code==="Enter"&&R()}return e({loadInitialCards:U,updateDeck:oe}),(ue,Y)=>(Me(),je(mn,null,[W("div",hR,[Y[15]||(Y[15]=W("p",{class:"mb-3 text-xl text-white"},"Cards",-1)),W("div",fR,[Ze(W("input",{type:"text",placeholder:"Search","onUpdate:modelValue":Y[0]||(Y[0]=X=>a.value=X),onKeypress:Y[1]||(Y[1]=X=>x(X)),class:"min-w-[250px] max-w-full flex-1 rounded-md bg-gray-700 p-3 text-white"},null,544),[[Gt,a.value]]),W("button",{onClick:Y[2]||(Y[2]=X=>R()),class:"ml-3 mt-1 rounded-md bg-lime-400 p-3"}," Search "),W("div",pR,[Y[13]||(Y[13]=W("p",{class:"mr-1"},"Sort",-1)),Ze(W("select",{"onUpdate:modelValue":Y[3]||(Y[3]=X=>h.value=X),onChange:Y[4]||(Y[4]=X=>N()),class:"rounded-md bg-cyan-700 p-1"},Y[12]||(Y[12]=[W("option",{value:"front"},"Front Alphabetical",-1),W("option",{value:"back"},"Back Alphabetical",-1),W("option",{value:"streak"},"Streak",-1),W("option",{value:"next_review"},"Next Review",-1)]),544),[[Xi,h.value]]),Y[14]||(Y[14]=W("label",{for:"reversed_sort_elem",class:"ml-1 mr-1 select-none"},"reverse:",-1)),Ze(W("input",{type:"checkbox",id:"reversed_sort_elem","onUpdate:modelValue":Y[5]||(Y[5]=X=>p.value=X),onChange:Y[6]||(Y[6]=X=>N())},null,544),[[Nr,p.value]])])]),W("div",mR,[W("p",gR,"Total: "+It(m.value),1),W("p",_R,"Shown: "+It(i.value.length),1)]),(Me(!0),je(mn,null,ai(i.value,(X,xe)=>(Me(),je("div",wR,[W("div",vR,[n.deck.large_cards?(Me(),je("div",kR,[W("div",{onClick:Ee=>z(X,xe,!0),class:"mr-5 inline-block min-w-[12rem] max-w-[12rem] select-none overflow-hidden rounded-md bg-rose-900 p-2 text-center text-white shadow-sm shadow-black"},[W("p",null,It(X.front),1)],8,TR),W("div",{onClick:Ee=>z(X,xe,!1),class:"mr-5 inline-block min-w-[12rem] max-w-[12rem] select-none overflow-hidden rounded-md bg-purple-900 p-2 text-center text-white shadow-sm shadow-black"},[W("p",null,It(X.back),1)],8,IR)])):(Me(),je("div",yR,[Ze(W("input",{type:"text",placeholder:"Card Front","onUpdate:modelValue":Ee=>X.front=Ee,class:"mr-5 inline-block w-48 rounded-md bg-rose-900 p-2 text-center text-white placeholder-black shadow-sm shadow-black"},null,8,bR),[[Gt,X.front]]),Ze(W("input",{type:"text",placeholder:"Card Back","onUpdate:modelValue":Ee=>X.back=Ee,class:"mr-5 inline-block w-48 rounded-md bg-purple-900 p-2 text-center text-white placeholder-black shadow-sm shadow-black"},null,8,ER),[[Gt,X.back]])]))]),W("label",{for:`typeAnsSetting${xe}`,class:"mr-2 select-none text-center text-white"},"Type Answer",8,AR),Ze(W("input",{"onUpdate:modelValue":Ee=>X.type_answer=Ee,type:"checkbox",id:`typeAnsSetting${xe}`,class:"mr-5 h-7 w-7 translate-y-1"},null,8,xR),[[Nr,X.type_answer]]),W("p",CR,It(X.streak),1),W("p",SR,It(X.next_review.toLocaleDateString("en-GB")),1),W("button",{onClick:Ee=>L(X.id,X.front),class:"rounded-md bg-red-900 p-2 text-green-500 shadow-sm shadow-black"}," Delete ",8,RR)]))),256)),i.value.length!==m.value&&!g.value?(Me(),je("button",{key:0,onClick:Y[7]||(Y[7]=X=>D()),class:"rounded-md bg-sky-300 p-3 text-xl"}," Load More ")):Ot("",!0)]),(Me(),Ai(q1,{to:"body"},[b.value!==-1?(Me(),je("div",PR,[Ze(W("textarea",{"onUpdate:modelValue":Y[8]||(Y[8]=X=>S.value=X),onInput:Y[9]||(Y[9]=X=>P()),ref_key:"edit_field_ref",ref:O,class:"max-h-[90vh] min-h-[125px] w-[90vw] resize-none rounded-xl bg-amber-700 p-3 text-center"},null,544),[[Gt,S.value]]),W("div",DR,[W("button",{onClick:Y[10]||(Y[10]=X=>b.value=-1),class:"mr-10 rounded-sm bg-red-400 px-3 py-2 text-lg text-white"}," Cancel "),W("button",{onClick:Y[11]||(Y[11]=X=>C()),class:"rounded-sm bg-green-600 px-3 py-2 text-lg text-white"}," Save ")])])):Ot("",!0)]))],64))}},NR={class:"fixed bottom-0 left-0 right-0 top-0 z-50 overflow-auto bg-gray-600 bg-opacity-50"},LR={class:"absolute left-1/2 top-[20%] -translate-x-1/2 text-center"},MR={class:"inline-block rounded-md bg-linear-to-r from-green-900 to-blue-900 p-3 text-center shadow-lg shadow-black"},VR={class:"mt-3 flex items-center justify-center rounded-sm bg-purple-600 p-1"},UR={class:"mt-3 flex items-center justify-center rounded-sm bg-cyan-400 p-3 text-lg shadow-sm shadow-black"},FR={class:"mt-3 rounded-sm bg-emerald-400 p-3 text-lg shadow-sm shadow-black"},$R={class:"flex items-center justify-center"},BR={key:0,class:"mt-1 flex items-center justify-center rounded-sm bg-emerald-500"},zR={__name:"EditDeckMenu",props:["auth","db","deck"],emits:["close","delete"],setup(n,{expose:e,emit:t}){const r=n,i=t,s=Ae(null),o=Ae(r.deck.name),a=Ae(r.deck.color),l=Ae(""),c=Ae(r.deck.index),h=Ae(r.deck.new_cards_per_day),p=Ae(!!r.deck.large_cards),m=Ae(!!r.deck.autoplay_media);async function g(){o.value!==r.deck.name&&(console.log("Name Updated!"),await Ht(ht(r.db,`users/${r.auth.currentUser.uid}/decks/${r.deck.id}`),{name:o.value})),c.value!==r.deck.index&&(console.log("Index Updated!"),await Ht(ht(r.db,`users/${r.auth.currentUser.uid}/decks/${r.deck.id}`),{index:c.value})),h.value!==r.deck.new_cards_per_day&&(console.log("New Cards Per Day Updated!"),await Ht(ht(r.db,`users/${r.auth.currentUser.uid}/decks/${r.deck.id}`),{new_cards_per_day:h.value})),p.value!==r.deck.large_cards&&(console.log("Large Cards Updated!"),await Ht(ht(r.db,`users/${r.auth.currentUser.uid}/decks/${r.deck.id}`),{large_cards:p.value})),m.value!==r.deck.autoplay_media&&(console.log("Autoplay Media Updated!"),await Ht(ht(r.db,`users/${r.auth.currentUser.uid}/decks/${r.deck.id}`),{autoplay_media:m.value})),await s.value.updateDeck(),i("close",!0)}function b(){rt.fire({title:`Are you sure you want to delete ${r.deck.name}?`,text:`If you are type '${r.deck.name}' to delete this deck. This action in irreversible.`,icon:"warning",input:"text",showCancelButton:!0,confirmButtonText:"Delete",confirmButtonColor:"red",reverseButtons:!0,focusConfirm:!1}).then(U=>{console.log(U),U.isConfirmed?U.value===r.deck.name?Jf(ht(r.db,`users/${r.auth.currentUser.uid}/decks/${r.deck.id}`)).then(()=>{rt.fire({title:"Deck Deleted!",icon:"success"}),i("delete"),i("close",!0)}):rt.fire({title:"Not Deleted!",icon:"error"}):U.isDismissed&&rt.fire({title:"Not Deleted!",icon:"error"})})}function E(){s.value.loadInitialCards(),O()}async function S(){a.value=await yc(o.value)}async function O(){l.value=await yc(r.deck.id)}return e({loadInitialCards:E}),(U,D)=>(Me(),je("div",NR,[W("div",LR,[W("div",MR,[Ze(W("input",{type:"text","onUpdate:modelValue":D[0]||(D[0]=V=>o.value=V),onInput:D[1]||(D[1]=V=>S()),style:yo({backgroundColor:a.value}),class:"rounded-sm bg-indigo-400 p-3 text-center text-lg placeholder-white shadow-sm shadow-black",placeholder:"Name"},null,36),[[Gt,o.value]]),W("p",{style:yo({backgroundColor:l.value}),class:"mt-3 rounded-sm p-1 text-black"}," Deck ID: "+It(n.deck.id),5),W("div",VR,[D[9]||(D[9]=W("p",{class:""},"Index:",-1)),Ze(W("input",{type:"number","onUpdate:modelValue":D[2]||(D[2]=V=>c.value=V),placeholder:"?",class:"w-[4ch] rounded-sm bg-inherit p-1 text-center text-white placeholder-black"},null,512),[[Gt,c.value,void 0,{number:!0}]])]),W("div",null,[W("div",UR,[D[10]||(D[10]=W("p",{class:"mr-1"},"New Cards Per Day:",-1)),Ze(W("input",{type:"text","onUpdate:modelValue":D[3]||(D[3]=V=>h.value=V),class:"w-[5ch] rounded-sm bg-cyan-500 p-1 text-center placeholder-white",placeholder:"?"},null,512),[[Gt,h.value,void 0,{number:!0}]])]),W("div",FR,[W("div",$R,[D[11]||(D[11]=W("label",{for:"large_cards_elem",class:"mr-1 select-none"},"Large Cards: ",-1)),Ze(W("input",{type:"checkbox",id:"large_cards_elem","onUpdate:modelValue":D[4]||(D[4]=V=>p.value=V),class:"h-6 w-6"},null,512),[[Nr,p.value]])]),p.value?(Me(),je("div",BR,[D[12]||(D[12]=W("br",null,null,-1)),D[13]||(D[13]=W("label",{for:"autoplay_media_elem",class:"mr-1 select-none"},"Autoplay Media: ",-1)),Ze(W("input",{type:"checkbox",id:"autoplay_media_elem","onUpdate:modelValue":D[5]||(D[5]=V=>m.value=V),class:"h-6 w-6"},null,512),[[Nr,m.value]])])):Ot("",!0)])]),D[14]||(D[14]=W("br",null,null,-1)),W("button",{onClick:D[6]||(D[6]=V=>b()),class:"mt-3 rounded-sm bg-red-700 p-3 text-xl shadow-sm shadow-black"}," DELETE "),D[15]||(D[15]=W("br",null,null,-1)),W("button",{onClick:D[7]||(D[7]=V=>U.$emit("close",!1)),class:"mr-4 mt-3 rounded-sm bg-orange-300 p-3 text-xl shadow-sm shadow-black"}," Cancel "),W("button",{onClick:D[8]||(D[8]=V=>g()),class:"mt-3 rounded-sm bg-rose-300 p-3 text-xl shadow-sm shadow-black"}," Update ")]),D[16]||(D[16]=W("br",null,null,-1)),Ln(OR,{ref_key:"cards_list_ref",ref:s,auth:n.auth,db:n.db,deck:n.deck},null,8,["auth","db","deck"])])]))}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c0="firebasestorage.googleapis.com",d0="storageBucket",jR=2*60*1e3,qR=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn extends ji{constructor(e,t,r=0){super(Pd(e),`Firebase Storage: ${t} (${Pd(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Tn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Pd(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var kn;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(kn||(kn={}));function Pd(n){return"storage/"+n}function tp(){const n="An unknown error occurred, please check the error payload for server response.";return new Tn(kn.UNKNOWN,n)}function HR(n){return new Tn(kn.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function WR(n){return new Tn(kn.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function GR(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Tn(kn.UNAUTHENTICATED,n)}function KR(){return new Tn(kn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function QR(n){return new Tn(kn.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function YR(){return new Tn(kn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function XR(){return new Tn(kn.CANCELED,"User canceled the upload/download.")}function ZR(n){return new Tn(kn.INVALID_URL,"Invalid URL '"+n+"'.")}function JR(n){return new Tn(kn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function eP(){return new Tn(kn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+d0+"' property when initializing the app?")}function tP(){return new Tn(kn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function nP(){return new Tn(kn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function rP(n){return new Tn(kn.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Rh(n){return new Tn(kn.INVALID_ARGUMENT,n)}function h0(){return new Tn(kn.APP_DELETED,"The Firebase app was deleted.")}function iP(n){return new Tn(kn.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function cl(n,e){return new Tn(kn.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Fa(n){throw new Tn(kn.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Mr.makeFromUrl(e,t)}catch{return new Mr(e,"")}if(r.path==="")return r;throw JR(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(V){V.path.charAt(V.path.length-1)==="/"&&(V.path_=V.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function c(V){V.path_=decodeURIComponent(V.path)}const h="v[A-Za-z0-9_]+",p=t.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",g=new RegExp(`^https?://${p}/${h}/b/${i}/o${m}`,"i"),b={bucket:1,path:3},E=t===c0?"(?:storage.googleapis.com|storage.cloud.google.com)":t,S="([^?#]*)",O=new RegExp(`^https?://${E}/${i}/${S}`,"i"),D=[{regex:a,indices:l,postModify:s},{regex:g,indices:b,postModify:c},{regex:O,indices:{bucket:1,path:2},postModify:c}];for(let V=0;V<D.length;V++){const K=D[V],oe=K.regex.exec(e);if(oe){const L=oe[K.indices.bucket];let R=oe[K.indices.path];R||(R=""),r=new Mr(L,R),K.postModify(r);break}}if(r==null)throw ZR(e);return r}}class sP{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oP(n,e,t){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let c=!1;function h(...S){c||(c=!0,e.apply(null,S))}function p(S){i=setTimeout(()=>{i=null,n(g,l())},S)}function m(){s&&clearTimeout(s)}function g(S,...O){if(c){m();return}if(S){m(),h.call(null,S,...O);return}if(l()||o){m(),h.call(null,S,...O);return}r<64&&(r*=2);let D;a===1?(a=2,D=0):D=(r+Math.random())*1e3,p(D)}let b=!1;function E(S){b||(b=!0,m(),!c&&(i!==null?(S||(a=2),clearTimeout(i),p(0)):S||(a=1)))}return p(0),s=setTimeout(()=>{o=!0,E(!0)},t),E}function aP(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lP(n){return n!==void 0}function uP(n){return typeof n=="object"&&!Array.isArray(n)}function np(n){return typeof n=="string"||n instanceof String}function Qg(n){return rp()&&n instanceof Blob}function rp(){return typeof Blob<"u"}function Yg(n,e,t,r){if(r<e)throw Rh(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Rh(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ip(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function f0(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var vo;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(vo||(vo={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cP(n,e){const t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,s=e.indexOf(n)!==-1;return t||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dP{constructor(e,t,r,i,s,o,a,l,c,h,p,m=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=h,this.connectionFactory_=p,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((g,b)=>{this.resolve_=g,this.reject_=b,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new cu(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===vo.NO_ERROR,l=s.getStatus();if(!a||cP(l,this.additionalRetryCodes_)&&this.retry){const h=s.getErrorCode()===vo.ABORT;r(!1,new cu(!1,null,h));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new cu(c,s))})},t=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());lP(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=tp();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?h0():XR();o(l)}else{const l=YR();o(l)}};this.canceled_?t(!1,new cu(!1,null,!0)):this.backoffId_=oP(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&aP(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class cu{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function hP(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function fP(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function pP(n,e){e&&(n["X-Firebase-GMPID"]=e)}function mP(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function gP(n,e,t,r,i,s,o=!0){const a=f0(n.urlParams),l=n.url+a,c=Object.assign({},n.headers);return pP(c,e),hP(c,t),fP(c,s),mP(c,r),new dP(l,n.method,c,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _P(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function wP(...n){const e=_P();if(e!==void 0){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(rp())return new Blob(n);throw new Tn(kn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function vP(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yP(n){if(typeof atob>"u")throw rP("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Dd{constructor(e,t){this.data=e,this.contentType=t||null}}function bP(n,e){switch(n){case xi.RAW:return new Dd(p0(e));case xi.BASE64:case xi.BASE64URL:return new Dd(m0(n,e));case xi.DATA_URL:return new Dd(kP(e),TP(e))}throw tp()}function p0(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=n.charCodeAt(++t);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function EP(n){let e;try{e=decodeURIComponent(n)}catch{throw cl(xi.DATA_URL,"Malformed data URL.")}return p0(e)}function m0(n,e){switch(n){case xi.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw cl(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case xi.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw cl(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=yP(e)}catch(i){throw i.message.includes("polyfill")?i:cl(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class g0{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw cl(xi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;r!=null&&(this.base64=IP(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function kP(n){const e=new g0(n);return e.base64?m0(xi.BASE64,e.rest):EP(e.rest)}function TP(n){return new g0(n).contentType}function IP(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(e,t){let r=0,i="";Qg(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(Qg(this.data_)){const r=this.data_,i=vP(r,e,t);return i===null?null:new Ps(i)}else{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Ps(r,!0)}}static getBlob(...e){if(rp()){const t=e.map(r=>r instanceof Ps?r.data_:r);return new Ps(wP.apply(null,t))}else{const t=e.map(o=>np(o)?bP(xi.RAW,o).data:o.data_);let r=0;t.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return t.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new Ps(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _0(n){let e;try{e=JSON.parse(n)}catch{return null}return uP(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AP(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function xP(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function w0(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CP(n,e){return e}class lr{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||CP}}let du=null;function SP(n){return!np(n)||n.length<2?n:w0(n)}function v0(){if(du)return du;const n=[];n.push(new lr("bucket")),n.push(new lr("generation")),n.push(new lr("metageneration")),n.push(new lr("name","fullPath",!0));function e(s,o){return SP(o)}const t=new lr("name");t.xform=e,n.push(t);function r(s,o){return o!==void 0?Number(o):o}const i=new lr("size");return i.xform=r,n.push(i),n.push(new lr("timeCreated")),n.push(new lr("updated")),n.push(new lr("md5Hash",null,!0)),n.push(new lr("cacheControl",null,!0)),n.push(new lr("contentDisposition",null,!0)),n.push(new lr("contentEncoding",null,!0)),n.push(new lr("contentLanguage",null,!0)),n.push(new lr("contentType",null,!0)),n.push(new lr("metadata","customMetadata",!0)),du=n,du}function RP(n,e){function t(){const r=n.bucket,i=n.fullPath,s=new Mr(r,i);return e._makeStorageReference(s)}Object.defineProperty(n,"ref",{get:t})}function PP(n,e,t){const r={};r.type="file";const i=t.length;for(let s=0;s<i;s++){const o=t[s];r[o.local]=o.xform(r,e[o.server])}return RP(r,n),r}function y0(n,e,t){const r=_0(e);return r===null?null:PP(n,r,t)}function DP(n,e,t,r){const i=_0(e);if(i===null||!np(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(c=>{const h=n.bucket,p=n.fullPath,m="/b/"+o(h)+"/o/"+o(p),g=ip(m,t,r),b=f0({alt:"media",token:c});return g+b})[0]}function OP(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}class b0{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E0(n){if(!n)throw tp()}function NP(n,e){function t(r,i){const s=y0(n,i,e);return E0(s!==null),s}return t}function LP(n,e){function t(r,i){const s=y0(n,i,e);return E0(s!==null),DP(s,i,n.host,n._protocol)}return t}function k0(n){function e(t,r){let i;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?i=KR():i=GR():t.getStatus()===402?i=WR(n.bucket):t.getStatus()===403?i=QR(n.path):i=r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}return e}function MP(n){const e=k0(n);function t(r,i){let s=e(r,i);return r.getStatus()===404&&(s=HR(n.path)),s.serverResponse=i.serverResponse,s}return t}function VP(n,e,t){const r=e.fullServerUrl(),i=ip(r,n.host,n._protocol),s="GET",o=n.maxOperationRetryTime,a=new b0(i,s,LP(n,t),o);return a.errorHandler=MP(e),a}function UP(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function FP(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=UP(null,e)),r}function $P(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let D="";for(let V=0;V<2;V++)D=D+Math.random().toString().slice(2);return D}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=FP(e,r,i),h=OP(c,t),p="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,m=`\r
--`+l+"--",g=Ps.getBlob(p,r,m);if(g===null)throw tP();const b={name:c.fullPath},E=ip(s,n.host,n._protocol),S="POST",O=n.maxUploadRetryTime,U=new b0(E,S,NP(n,t),O);return U.urlParams=b,U.headers=o,U.body=g.uploadData(),U.errorHandler=k0(e),U}class BP{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=vo.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=vo.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=vo.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw Fa("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Fa("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Fa("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Fa("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Fa("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class zP extends BP{initXhr(){this.xhr_.responseType="text"}}function T0(){return new zP}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(e,t){this._service=e,t instanceof Mr?this._location=t:this._location=Mr.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Ro(e,t)}get root(){const e=new Mr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return w0(this._location.path)}get storage(){return this._service}get parent(){const e=AP(this._location.path);if(e===null)return null;const t=new Mr(this._location.bucket,e);return new Ro(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw iP(e)}}function jP(n,e,t){n._throwIfRoot("uploadBytes");const r=$P(n.storage,n._location,v0(),new Ps(e,!0),t);return n.storage.makeRequestWithTokens(r,T0).then(i=>({metadata:i,ref:n}))}function qP(n){n._throwIfRoot("getDownloadURL");const e=VP(n.storage,n._location,v0());return n.storage.makeRequestWithTokens(e,T0).then(t=>{if(t===null)throw nP();return t})}function HP(n,e){const t=xP(n._location.path,e),r=new Mr(n._location.bucket,t);return new Ro(n.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WP(n){return/^[A-Za-z]+:\/\//.test(n)}function GP(n,e){return new Ro(n,e)}function I0(n,e){if(n instanceof sp){const t=n;if(t._bucket==null)throw eP();const r=new Ro(t,t._bucket);return e!=null?I0(r,e):r}else return e!==void 0?HP(n,e):n}function KP(n,e){if(e&&WP(e)){if(n instanceof sp)return GP(n,e);throw Rh("To use ref(service, url), the first argument must be a Storage instance.")}else return I0(n,e)}function Xg(n,e){const t=e==null?void 0:e[d0];return t==null?null:Mr.makeFromBucketSpec(t,n)}function QP(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken=typeof i=="string"?i:zw(i,n.app.options.projectId))}class sp{constructor(e,t,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=c0,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=jR,this._maxUploadRetryTime=qR,this._requests=new Set,i!=null?this._bucket=Mr.makeFromBucketSpec(i,this._host):this._bucket=Xg(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Mr.makeFromBucketSpec(this._url,e):this._bucket=Xg(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Yg("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Yg("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Tr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ro(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new sP(h0());{const o=gP(e,this._appId,r,i,t,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,t){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()}}const Zg="@firebase/storage",Jg="0.13.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A0="storage";function hu(n,e,t){return n=tn(n),jP(n,e,t)}function fu(n){return n=tn(n),qP(n)}function jr(n,e){return n=tn(n),KP(n,e)}function YP(n=rf(),e){n=tn(n);const r=Nc(n,A0).getImmediate({identifier:e}),i=Fw("storage");return i&&XP(r,...i),r}function XP(n,e,t,r={}){QP(n,e,t,r)}function ZP(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new sp(t,r,i,e,No)}function JP(){To(new Fs(A0,ZP,"PUBLIC").setMultipleInstances(!0)),Pi(Zg,Jg,""),Pi(Zg,Jg,"esm2017")}JP();function pu(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Od={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/var e_;function eD(){return e_||(e_=1,function(n,e){(function(t){n.exports=t()})(function(){return function t(r,i,s){function o(c,h){if(!i[c]){if(!r[c]){var p=typeof pu=="function"&&pu;if(!h&&p)return p(c,!0);if(a)return a(c,!0);var m=new Error("Cannot find module '"+c+"'");throw m.code="MODULE_NOT_FOUND",m}var g=i[c]={exports:{}};r[c][0].call(g.exports,function(b){var E=r[c][1][b];return o(E||b)},g,g.exports,t,r,i,s)}return i[c].exports}for(var a=typeof pu=="function"&&pu,l=0;l<s.length;l++)o(s[l]);return o}({1:[function(t,r,i){var s=t("./utils"),o=t("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(l){for(var c,h,p,m,g,b,E,S=[],O=0,U=l.length,D=U,V=s.getTypeOf(l)!=="string";O<l.length;)D=U-O,p=V?(c=l[O++],h=O<U?l[O++]:0,O<U?l[O++]:0):(c=l.charCodeAt(O++),h=O<U?l.charCodeAt(O++):0,O<U?l.charCodeAt(O++):0),m=c>>2,g=(3&c)<<4|h>>4,b=1<D?(15&h)<<2|p>>6:64,E=2<D?63&p:64,S.push(a.charAt(m)+a.charAt(g)+a.charAt(b)+a.charAt(E));return S.join("")},i.decode=function(l){var c,h,p,m,g,b,E=0,S=0,O="data:";if(l.substr(0,O.length)===O)throw new Error("Invalid base64 input, it looks like a data url.");var U,D=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===a.charAt(64)&&D--,l.charAt(l.length-2)===a.charAt(64)&&D--,D%1!=0)throw new Error("Invalid base64 input, bad content length.");for(U=o.uint8array?new Uint8Array(0|D):new Array(0|D);E<l.length;)c=a.indexOf(l.charAt(E++))<<2|(m=a.indexOf(l.charAt(E++)))>>4,h=(15&m)<<4|(g=a.indexOf(l.charAt(E++)))>>2,p=(3&g)<<6|(b=a.indexOf(l.charAt(E++))),U[S++]=c,g!==64&&(U[S++]=h),b!==64&&(U[S++]=p);return U}},{"./support":30,"./utils":32}],2:[function(t,r,i){var s=t("./external"),o=t("./stream/DataWorker"),a=t("./stream/Crc32Probe"),l=t("./stream/DataLengthProbe");function c(h,p,m,g,b){this.compressedSize=h,this.uncompressedSize=p,this.crc32=m,this.compression=g,this.compressedContent=b}c.prototype={getContentWorker:function(){var h=new o(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),p=this;return h.on("end",function(){if(this.streamInfo.data_length!==p.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),h},getCompressedWorker:function(){return new o(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},c.createWorkerFrom=function(h,p,m){return h.pipe(new a).pipe(new l("uncompressedSize")).pipe(p.compressWorker(m)).pipe(new l("compressedSize")).withStreamInfo("compression",p)},r.exports=c},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,r,i){var s=t("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},i.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,r,i){var s=t("./utils"),o=function(){for(var a,l=[],c=0;c<256;c++){a=c;for(var h=0;h<8;h++)a=1&a?3988292384^a>>>1:a>>>1;l[c]=a}return l}();r.exports=function(a,l){return a!==void 0&&a.length?s.getTypeOf(a)!=="string"?function(c,h,p,m){var g=o,b=m+p;c^=-1;for(var E=m;E<b;E++)c=c>>>8^g[255&(c^h[E])];return-1^c}(0|l,a,a.length,0):function(c,h,p,m){var g=o,b=m+p;c^=-1;for(var E=m;E<b;E++)c=c>>>8^g[255&(c^h.charCodeAt(E))];return-1^c}(0|l,a,a.length,0):0}},{"./utils":32}],5:[function(t,r,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(t,r,i){var s=null;s=typeof Promise<"u"?Promise:t("lie"),r.exports={Promise:s}},{lie:37}],7:[function(t,r,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=t("pako"),a=t("./utils"),l=t("./stream/GenericWorker"),c=s?"uint8array":"array";function h(p,m){l.call(this,"FlateWorker/"+p),this._pako=null,this._pakoAction=p,this._pakoOptions=m,this.meta={}}i.magic="\b\0",a.inherits(h,l),h.prototype.processChunk=function(p){this.meta=p.meta,this._pako===null&&this._createPako(),this._pako.push(a.transformTo(c,p.data),!1)},h.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},h.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},h.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var p=this;this._pako.onData=function(m){p.push({data:m,meta:p.meta})}},i.compressWorker=function(p){return new h("Deflate",p)},i.uncompressWorker=function(){return new h("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,r,i){function s(g,b){var E,S="";for(E=0;E<b;E++)S+=String.fromCharCode(255&g),g>>>=8;return S}function o(g,b,E,S,O,U){var D,V,K=g.file,oe=g.compression,L=U!==c.utf8encode,R=a.transformTo("string",U(K.name)),N=a.transformTo("string",c.utf8encode(K.name)),F=K.comment,z=a.transformTo("string",U(F)),C=a.transformTo("string",c.utf8encode(F)),P=N.length!==K.name.length,x=C.length!==F.length,ue="",Y="",X="",xe=K.dir,Ee=K.date,ve={crc32:0,compressedSize:0,uncompressedSize:0};b&&!E||(ve.crc32=g.crc32,ve.compressedSize=g.compressedSize,ve.uncompressedSize=g.uncompressedSize);var ce=0;b&&(ce|=8),L||!P&&!x||(ce|=2048);var le=0,ye=0;xe&&(le|=16),O==="UNIX"?(ye=798,le|=function(Z,ze){var ke=Z;return Z||(ke=ze?16893:33204),(65535&ke)<<16}(K.unixPermissions,xe)):(ye=20,le|=function(Z){return 63&(Z||0)}(K.dosPermissions)),D=Ee.getUTCHours(),D<<=6,D|=Ee.getUTCMinutes(),D<<=5,D|=Ee.getUTCSeconds()/2,V=Ee.getUTCFullYear()-1980,V<<=4,V|=Ee.getUTCMonth()+1,V<<=5,V|=Ee.getUTCDate(),P&&(Y=s(1,1)+s(h(R),4)+N,ue+="up"+s(Y.length,2)+Y),x&&(X=s(1,1)+s(h(z),4)+C,ue+="uc"+s(X.length,2)+X);var De="";return De+=`
\0`,De+=s(ce,2),De+=oe.magic,De+=s(D,2),De+=s(V,2),De+=s(ve.crc32,4),De+=s(ve.compressedSize,4),De+=s(ve.uncompressedSize,4),De+=s(R.length,2),De+=s(ue.length,2),{fileRecord:p.LOCAL_FILE_HEADER+De+R+ue,dirRecord:p.CENTRAL_FILE_HEADER+s(ye,2)+De+s(z.length,2)+"\0\0\0\0"+s(le,4)+s(S,4)+R+ue+z}}var a=t("../utils"),l=t("../stream/GenericWorker"),c=t("../utf8"),h=t("../crc32"),p=t("../signature");function m(g,b,E,S){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=b,this.zipPlatform=E,this.encodeFileName=S,this.streamFiles=g,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(m,l),m.prototype.push=function(g){var b=g.meta.percent||0,E=this.entriesCount,S=this._sources.length;this.accumulate?this.contentBuffer.push(g):(this.bytesWritten+=g.data.length,l.prototype.push.call(this,{data:g.data,meta:{currentFile:this.currentFile,percent:E?(b+100*(E-S-1))/E:100}}))},m.prototype.openedSource=function(g){this.currentSourceOffset=this.bytesWritten,this.currentFile=g.file.name;var b=this.streamFiles&&!g.file.dir;if(b){var E=o(g,b,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:E.fileRecord,meta:{percent:0}})}else this.accumulate=!0},m.prototype.closedSource=function(g){this.accumulate=!1;var b=this.streamFiles&&!g.file.dir,E=o(g,b,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(E.dirRecord),b)this.push({data:function(S){return p.DATA_DESCRIPTOR+s(S.crc32,4)+s(S.compressedSize,4)+s(S.uncompressedSize,4)}(g),meta:{percent:100}});else for(this.push({data:E.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},m.prototype.flush=function(){for(var g=this.bytesWritten,b=0;b<this.dirRecords.length;b++)this.push({data:this.dirRecords[b],meta:{percent:100}});var E=this.bytesWritten-g,S=function(O,U,D,V,K){var oe=a.transformTo("string",K(V));return p.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(O,2)+s(O,2)+s(U,4)+s(D,4)+s(oe.length,2)+oe}(this.dirRecords.length,E,g,this.zipComment,this.encodeFileName);this.push({data:S,meta:{percent:100}})},m.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},m.prototype.registerPrevious=function(g){this._sources.push(g);var b=this;return g.on("data",function(E){b.processChunk(E)}),g.on("end",function(){b.closedSource(b.previous.streamInfo),b._sources.length?b.prepareNextSource():b.end()}),g.on("error",function(E){b.error(E)}),this},m.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},m.prototype.error=function(g){var b=this._sources;if(!l.prototype.error.call(this,g))return!1;for(var E=0;E<b.length;E++)try{b[E].error(g)}catch{}return!0},m.prototype.lock=function(){l.prototype.lock.call(this);for(var g=this._sources,b=0;b<g.length;b++)g[b].lock()},r.exports=m},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,r,i){var s=t("../compressions"),o=t("./ZipFileWorker");i.generateWorker=function(a,l,c){var h=new o(l.streamFiles,c,l.platform,l.encodeFileName),p=0;try{a.forEach(function(m,g){p++;var b=function(U,D){var V=U||D,K=s[V];if(!K)throw new Error(V+" is not a valid compression method !");return K}(g.options.compression,l.compression),E=g.options.compressionOptions||l.compressionOptions||{},S=g.dir,O=g.date;g._compressWorker(b,E).withStreamInfo("file",{name:m,dir:S,date:O,comment:g.comment||"",unixPermissions:g.unixPermissions,dosPermissions:g.dosPermissions}).pipe(h)}),h.entriesCount=p}catch(m){h.error(m)}return h}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,r,i){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new s;for(var a in this)typeof this[a]!="function"&&(o[a]=this[a]);return o}}(s.prototype=t("./object")).loadAsync=t("./load"),s.support=t("./support"),s.defaults=t("./defaults"),s.version="3.10.1",s.loadAsync=function(o,a){return new s().loadAsync(o,a)},s.external=t("./external"),r.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,r,i){var s=t("./utils"),o=t("./external"),a=t("./utf8"),l=t("./zipEntries"),c=t("./stream/Crc32Probe"),h=t("./nodejsUtils");function p(m){return new o.Promise(function(g,b){var E=m.decompressed.getContentWorker().pipe(new c);E.on("error",function(S){b(S)}).on("end",function(){E.streamInfo.crc32!==m.decompressed.crc32?b(new Error("Corrupted zip : CRC32 mismatch")):g()}).resume()})}r.exports=function(m,g){var b=this;return g=s.extend(g||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),h.isNode&&h.isStream(m)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",m,!0,g.optimizedBinaryString,g.base64).then(function(E){var S=new l(g);return S.load(E),S}).then(function(E){var S=[o.Promise.resolve(E)],O=E.files;if(g.checkCRC32)for(var U=0;U<O.length;U++)S.push(p(O[U]));return o.Promise.all(S)}).then(function(E){for(var S=E.shift(),O=S.files,U=0;U<O.length;U++){var D=O[U],V=D.fileNameStr,K=s.resolve(D.fileNameStr);b.file(K,D.decompressed,{binary:!0,optimizedBinaryString:!0,date:D.date,dir:D.dir,comment:D.fileCommentStr.length?D.fileCommentStr:null,unixPermissions:D.unixPermissions,dosPermissions:D.dosPermissions,createFolders:g.createFolders}),D.dir||(b.file(K).unsafeOriginalName=V)}return S.zipComment.length&&(b.comment=S.zipComment),b})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,r,i){var s=t("../utils"),o=t("../stream/GenericWorker");function a(l,c){o.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(c)}s.inherits(a,o),a.prototype._bindStream=function(l){var c=this;(this._stream=l).pause(),l.on("data",function(h){c.push({data:h,meta:{percent:0}})}).on("error",function(h){c.isPaused?this.generatedError=h:c.error(h)}).on("end",function(){c.isPaused?c._upstreamEnded=!0:c.end()})},a.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,r,i){var s=t("readable-stream").Readable;function o(a,l,c){s.call(this,l),this._helper=a;var h=this;a.on("data",function(p,m){h.push(p)||h._helper.pause(),c&&c(m)}).on("error",function(p){h.emit("error",p)}).on("end",function(){h.push(null)})}t("../utils").inherits(o,s),o.prototype._read=function(){this._helper.resume()},r.exports=o},{"../utils":32,"readable-stream":16}],14:[function(t,r,i){r.exports={isNode:typeof Buffer<"u",newBufferFrom:function(s,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(s,o);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new Buffer(s,o)},allocBuffer:function(s){if(Buffer.alloc)return Buffer.alloc(s);var o=new Buffer(s);return o.fill(0),o},isBuffer:function(s){return Buffer.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(t,r,i){function s(K,oe,L){var R,N=a.getTypeOf(oe),F=a.extend(L||{},h);F.date=F.date||new Date,F.compression!==null&&(F.compression=F.compression.toUpperCase()),typeof F.unixPermissions=="string"&&(F.unixPermissions=parseInt(F.unixPermissions,8)),F.unixPermissions&&16384&F.unixPermissions&&(F.dir=!0),F.dosPermissions&&16&F.dosPermissions&&(F.dir=!0),F.dir&&(K=O(K)),F.createFolders&&(R=S(K))&&U.call(this,R,!0);var z=N==="string"&&F.binary===!1&&F.base64===!1;L&&L.binary!==void 0||(F.binary=!z),(oe instanceof p&&oe.uncompressedSize===0||F.dir||!oe||oe.length===0)&&(F.base64=!1,F.binary=!0,oe="",F.compression="STORE",N="string");var C=null;C=oe instanceof p||oe instanceof l?oe:b.isNode&&b.isStream(oe)?new E(K,oe):a.prepareContent(K,oe,F.binary,F.optimizedBinaryString,F.base64);var P=new m(K,C,F);this.files[K]=P}var o=t("./utf8"),a=t("./utils"),l=t("./stream/GenericWorker"),c=t("./stream/StreamHelper"),h=t("./defaults"),p=t("./compressedObject"),m=t("./zipObject"),g=t("./generate"),b=t("./nodejsUtils"),E=t("./nodejs/NodejsStreamInputAdapter"),S=function(K){K.slice(-1)==="/"&&(K=K.substring(0,K.length-1));var oe=K.lastIndexOf("/");return 0<oe?K.substring(0,oe):""},O=function(K){return K.slice(-1)!=="/"&&(K+="/"),K},U=function(K,oe){return oe=oe!==void 0?oe:h.createFolders,K=O(K),this.files[K]||s.call(this,K,null,{dir:!0,createFolders:oe}),this.files[K]};function D(K){return Object.prototype.toString.call(K)==="[object RegExp]"}var V={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(K){var oe,L,R;for(oe in this.files)R=this.files[oe],(L=oe.slice(this.root.length,oe.length))&&oe.slice(0,this.root.length)===this.root&&K(L,R)},filter:function(K){var oe=[];return this.forEach(function(L,R){K(L,R)&&oe.push(R)}),oe},file:function(K,oe,L){if(arguments.length!==1)return K=this.root+K,s.call(this,K,oe,L),this;if(D(K)){var R=K;return this.filter(function(F,z){return!z.dir&&R.test(F)})}var N=this.files[this.root+K];return N&&!N.dir?N:null},folder:function(K){if(!K)return this;if(D(K))return this.filter(function(N,F){return F.dir&&K.test(N)});var oe=this.root+K,L=U.call(this,oe),R=this.clone();return R.root=L.name,R},remove:function(K){K=this.root+K;var oe=this.files[K];if(oe||(K.slice(-1)!=="/"&&(K+="/"),oe=this.files[K]),oe&&!oe.dir)delete this.files[K];else for(var L=this.filter(function(N,F){return F.name.slice(0,K.length)===K}),R=0;R<L.length;R++)delete this.files[L[R].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(K){var oe,L={};try{if((L=a.extend(K||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=L.type.toLowerCase(),L.compression=L.compression.toUpperCase(),L.type==="binarystring"&&(L.type="string"),!L.type)throw new Error("No output type specified.");a.checkSupport(L.type),L.platform!=="darwin"&&L.platform!=="freebsd"&&L.platform!=="linux"&&L.platform!=="sunos"||(L.platform="UNIX"),L.platform==="win32"&&(L.platform="DOS");var R=L.comment||this.comment||"";oe=g.generateWorker(this,L,R)}catch(N){(oe=new l("error")).error(N)}return new c(oe,L.type||"string",L.mimeType)},generateAsync:function(K,oe){return this.generateInternalStream(K).accumulate(oe)},generateNodeStream:function(K,oe){return(K=K||{}).type||(K.type="nodebuffer"),this.generateInternalStream(K).toNodejsStream(oe)}};r.exports=V},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,r,i){r.exports=t("stream")},{stream:void 0}],17:[function(t,r,i){var s=t("./DataReader");function o(a){s.call(this,a);for(var l=0;l<this.data.length;l++)a[l]=255&a[l]}t("../utils").inherits(o,s),o.prototype.byteAt=function(a){return this.data[this.zero+a]},o.prototype.lastIndexOfSignature=function(a){for(var l=a.charCodeAt(0),c=a.charCodeAt(1),h=a.charCodeAt(2),p=a.charCodeAt(3),m=this.length-4;0<=m;--m)if(this.data[m]===l&&this.data[m+1]===c&&this.data[m+2]===h&&this.data[m+3]===p)return m-this.zero;return-1},o.prototype.readAndCheckSignature=function(a){var l=a.charCodeAt(0),c=a.charCodeAt(1),h=a.charCodeAt(2),p=a.charCodeAt(3),m=this.readData(4);return l===m[0]&&c===m[1]&&h===m[2]&&p===m[3]},o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./DataReader":18}],18:[function(t,r,i){var s=t("../utils");function o(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var l,c=0;for(this.checkOffset(a),l=this.index+a-1;l>=this.index;l--)c=(c<<8)+this.byteAt(l);return this.index+=a,c},readString:function(a){return s.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC(1980+(a>>25&127),(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1))}},r.exports=o},{"../utils":32}],19:[function(t,r,i){var s=t("./Uint8ArrayReader");function o(a){s.call(this,a)}t("../utils").inherits(o,s),o.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,r,i){var s=t("./DataReader");function o(a){s.call(this,a)}t("../utils").inherits(o,s),o.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)},o.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero},o.prototype.readAndCheckSignature=function(a){return a===this.readData(4)},o.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./DataReader":18}],21:[function(t,r,i){var s=t("./ArrayReader");function o(a){s.call(this,a)}t("../utils").inherits(o,s),o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(t,r,i){var s=t("../utils"),o=t("../support"),a=t("./ArrayReader"),l=t("./StringReader"),c=t("./NodeBufferReader"),h=t("./Uint8ArrayReader");r.exports=function(p){var m=s.getTypeOf(p);return s.checkSupport(m),m!=="string"||o.uint8array?m==="nodebuffer"?new c(p):o.uint8array?new h(s.transformTo("uint8array",p)):new a(s.transformTo("array",p)):new l(p)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,r,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,r,i){var s=t("./GenericWorker"),o=t("../utils");function a(l){s.call(this,"ConvertWorker to "+l),this.destType=l}o.inherits(a,s),a.prototype.processChunk=function(l){this.push({data:o.transformTo(this.destType,l.data),meta:l.meta})},r.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(t,r,i){var s=t("./GenericWorker"),o=t("../crc32");function a(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(a,s),a.prototype.processChunk=function(l){this.streamInfo.crc32=o(l.data,this.streamInfo.crc32||0),this.push(l)},r.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,r,i){var s=t("../utils"),o=t("./GenericWorker");function a(l){o.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}s.inherits(a,o),a.prototype.processChunk=function(l){if(l){var c=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=c+l.data.length}o.prototype.processChunk.call(this,l)},r.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(t,r,i){var s=t("../utils"),o=t("./GenericWorker");function a(l){o.call(this,"DataWorker");var c=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(h){c.dataIsReady=!0,c.data=h,c.max=h&&h.length||0,c.type=s.getTypeOf(h),c.isPaused||c._tickAndRepeat()},function(h){c.error(h)})}s.inherits(a,o),a.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,c=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,c);break;case"uint8array":l=this.data.subarray(this.index,c);break;case"array":case"nodebuffer":l=this.data.slice(this.index,c)}return this.index=c,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(t,r,i){function s(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,a){return this._listeners[o].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,a){if(this._listeners[o])for(var l=0;l<this._listeners[o].length;l++)this._listeners[o][l].call(this,a)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var a=this;return o.on("data",function(l){a.processChunk(l)}),o.on("end",function(){a.end()}),o.on("error",function(l){a.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,a){return this.extraStreamInfo[o]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},r.exports=s},{}],29:[function(t,r,i){var s=t("../utils"),o=t("./ConvertWorker"),a=t("./GenericWorker"),l=t("../base64"),c=t("../support"),h=t("../external"),p=null;if(c.nodestream)try{p=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function m(b,E){return new h.Promise(function(S,O){var U=[],D=b._internalType,V=b._outputType,K=b._mimeType;b.on("data",function(oe,L){U.push(oe),E&&E(L)}).on("error",function(oe){U=[],O(oe)}).on("end",function(){try{var oe=function(L,R,N){switch(L){case"blob":return s.newBlob(s.transformTo("arraybuffer",R),N);case"base64":return l.encode(R);default:return s.transformTo(L,R)}}(V,function(L,R){var N,F=0,z=null,C=0;for(N=0;N<R.length;N++)C+=R[N].length;switch(L){case"string":return R.join("");case"array":return Array.prototype.concat.apply([],R);case"uint8array":for(z=new Uint8Array(C),N=0;N<R.length;N++)z.set(R[N],F),F+=R[N].length;return z;case"nodebuffer":return Buffer.concat(R);default:throw new Error("concat : unsupported type '"+L+"'")}}(D,U),K);S(oe)}catch(L){O(L)}U=[]}).resume()})}function g(b,E,S){var O=E;switch(E){case"blob":case"arraybuffer":O="uint8array";break;case"base64":O="string"}try{this._internalType=O,this._outputType=E,this._mimeType=S,s.checkSupport(O),this._worker=b.pipe(new o(O)),b.lock()}catch(U){this._worker=new a("error"),this._worker.error(U)}}g.prototype={accumulate:function(b){return m(this,b)},on:function(b,E){var S=this;return b==="data"?this._worker.on(b,function(O){E.call(S,O.data,O.meta)}):this._worker.on(b,function(){s.delay(E,arguments,S)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(b){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new p(this,{objectMode:this._outputType!=="nodebuffer"},b)}},r.exports=g},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,r,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof Buffer<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var s=new ArrayBuffer(0);try{i.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(s),i.blob=o.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!t("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(t,r,i){for(var s=t("./utils"),o=t("./support"),a=t("./nodejsUtils"),l=t("./stream/GenericWorker"),c=new Array(256),h=0;h<256;h++)c[h]=252<=h?6:248<=h?5:240<=h?4:224<=h?3:192<=h?2:1;c[254]=c[254]=1;function p(){l.call(this,"utf-8 decode"),this.leftOver=null}function m(){l.call(this,"utf-8 encode")}i.utf8encode=function(g){return o.nodebuffer?a.newBufferFrom(g,"utf-8"):function(b){var E,S,O,U,D,V=b.length,K=0;for(U=0;U<V;U++)(64512&(S=b.charCodeAt(U)))==55296&&U+1<V&&(64512&(O=b.charCodeAt(U+1)))==56320&&(S=65536+(S-55296<<10)+(O-56320),U++),K+=S<128?1:S<2048?2:S<65536?3:4;for(E=o.uint8array?new Uint8Array(K):new Array(K),U=D=0;D<K;U++)(64512&(S=b.charCodeAt(U)))==55296&&U+1<V&&(64512&(O=b.charCodeAt(U+1)))==56320&&(S=65536+(S-55296<<10)+(O-56320),U++),S<128?E[D++]=S:(S<2048?E[D++]=192|S>>>6:(S<65536?E[D++]=224|S>>>12:(E[D++]=240|S>>>18,E[D++]=128|S>>>12&63),E[D++]=128|S>>>6&63),E[D++]=128|63&S);return E}(g)},i.utf8decode=function(g){return o.nodebuffer?s.transformTo("nodebuffer",g).toString("utf-8"):function(b){var E,S,O,U,D=b.length,V=new Array(2*D);for(E=S=0;E<D;)if((O=b[E++])<128)V[S++]=O;else if(4<(U=c[O]))V[S++]=65533,E+=U-1;else{for(O&=U===2?31:U===3?15:7;1<U&&E<D;)O=O<<6|63&b[E++],U--;1<U?V[S++]=65533:O<65536?V[S++]=O:(O-=65536,V[S++]=55296|O>>10&1023,V[S++]=56320|1023&O)}return V.length!==S&&(V.subarray?V=V.subarray(0,S):V.length=S),s.applyFromCharCode(V)}(g=s.transformTo(o.uint8array?"uint8array":"array",g))},s.inherits(p,l),p.prototype.processChunk=function(g){var b=s.transformTo(o.uint8array?"uint8array":"array",g.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var E=b;(b=new Uint8Array(E.length+this.leftOver.length)).set(this.leftOver,0),b.set(E,this.leftOver.length)}else b=this.leftOver.concat(b);this.leftOver=null}var S=function(U,D){var V;for((D=D||U.length)>U.length&&(D=U.length),V=D-1;0<=V&&(192&U[V])==128;)V--;return V<0||V===0?D:V+c[U[V]]>D?V:D}(b),O=b;S!==b.length&&(o.uint8array?(O=b.subarray(0,S),this.leftOver=b.subarray(S,b.length)):(O=b.slice(0,S),this.leftOver=b.slice(S,b.length))),this.push({data:i.utf8decode(O),meta:g.meta})},p.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=p,s.inherits(m,l),m.prototype.processChunk=function(g){this.push({data:i.utf8encode(g.data),meta:g.meta})},i.Utf8EncodeWorker=m},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,r,i){var s=t("./support"),o=t("./base64"),a=t("./nodejsUtils"),l=t("./external");function c(E){return E}function h(E,S){for(var O=0;O<E.length;++O)S[O]=255&E.charCodeAt(O);return S}t("setimmediate"),i.newBlob=function(E,S){i.checkSupport("blob");try{return new Blob([E],{type:S})}catch{try{var O=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return O.append(E),O.getBlob(S)}catch{throw new Error("Bug : can't construct the Blob.")}}};var p={stringifyByChunk:function(E,S,O){var U=[],D=0,V=E.length;if(V<=O)return String.fromCharCode.apply(null,E);for(;D<V;)S==="array"||S==="nodebuffer"?U.push(String.fromCharCode.apply(null,E.slice(D,Math.min(D+O,V)))):U.push(String.fromCharCode.apply(null,E.subarray(D,Math.min(D+O,V)))),D+=O;return U.join("")},stringifyByChar:function(E){for(var S="",O=0;O<E.length;O++)S+=String.fromCharCode(E[O]);return S},applyCanBeUsed:{uint8array:function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,a.allocBuffer(1)).length===1}catch{return!1}}()}};function m(E){var S=65536,O=i.getTypeOf(E),U=!0;if(O==="uint8array"?U=p.applyCanBeUsed.uint8array:O==="nodebuffer"&&(U=p.applyCanBeUsed.nodebuffer),U)for(;1<S;)try{return p.stringifyByChunk(E,O,S)}catch{S=Math.floor(S/2)}return p.stringifyByChar(E)}function g(E,S){for(var O=0;O<E.length;O++)S[O]=E[O];return S}i.applyFromCharCode=m;var b={};b.string={string:c,array:function(E){return h(E,new Array(E.length))},arraybuffer:function(E){return b.string.uint8array(E).buffer},uint8array:function(E){return h(E,new Uint8Array(E.length))},nodebuffer:function(E){return h(E,a.allocBuffer(E.length))}},b.array={string:m,array:c,arraybuffer:function(E){return new Uint8Array(E).buffer},uint8array:function(E){return new Uint8Array(E)},nodebuffer:function(E){return a.newBufferFrom(E)}},b.arraybuffer={string:function(E){return m(new Uint8Array(E))},array:function(E){return g(new Uint8Array(E),new Array(E.byteLength))},arraybuffer:c,uint8array:function(E){return new Uint8Array(E)},nodebuffer:function(E){return a.newBufferFrom(new Uint8Array(E))}},b.uint8array={string:m,array:function(E){return g(E,new Array(E.length))},arraybuffer:function(E){return E.buffer},uint8array:c,nodebuffer:function(E){return a.newBufferFrom(E)}},b.nodebuffer={string:m,array:function(E){return g(E,new Array(E.length))},arraybuffer:function(E){return b.nodebuffer.uint8array(E).buffer},uint8array:function(E){return g(E,new Uint8Array(E.length))},nodebuffer:c},i.transformTo=function(E,S){if(S=S||"",!E)return S;i.checkSupport(E);var O=i.getTypeOf(S);return b[O][E](S)},i.resolve=function(E){for(var S=E.split("/"),O=[],U=0;U<S.length;U++){var D=S[U];D==="."||D===""&&U!==0&&U!==S.length-1||(D===".."?O.pop():O.push(D))}return O.join("/")},i.getTypeOf=function(E){return typeof E=="string"?"string":Object.prototype.toString.call(E)==="[object Array]"?"array":s.nodebuffer&&a.isBuffer(E)?"nodebuffer":s.uint8array&&E instanceof Uint8Array?"uint8array":s.arraybuffer&&E instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(E){if(!s[E.toLowerCase()])throw new Error(E+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(E){var S,O,U="";for(O=0;O<(E||"").length;O++)U+="\\x"+((S=E.charCodeAt(O))<16?"0":"")+S.toString(16).toUpperCase();return U},i.delay=function(E,S,O){setImmediate(function(){E.apply(O||null,S||[])})},i.inherits=function(E,S){function O(){}O.prototype=S.prototype,E.prototype=new O},i.extend=function(){var E,S,O={};for(E=0;E<arguments.length;E++)for(S in arguments[E])Object.prototype.hasOwnProperty.call(arguments[E],S)&&O[S]===void 0&&(O[S]=arguments[E][S]);return O},i.prepareContent=function(E,S,O,U,D){return l.Promise.resolve(S).then(function(V){return s.blob&&(V instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(V))!==-1)&&typeof FileReader<"u"?new l.Promise(function(K,oe){var L=new FileReader;L.onload=function(R){K(R.target.result)},L.onerror=function(R){oe(R.target.error)},L.readAsArrayBuffer(V)}):V}).then(function(V){var K=i.getTypeOf(V);return K?(K==="arraybuffer"?V=i.transformTo("uint8array",V):K==="string"&&(D?V=o.decode(V):O&&U!==!0&&(V=function(oe){return h(oe,s.uint8array?new Uint8Array(oe.length):new Array(oe.length))}(V))),V):l.Promise.reject(new Error("Can't read the data of '"+E+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,r,i){var s=t("./reader/readerFor"),o=t("./utils"),a=t("./signature"),l=t("./zipEntry"),c=t("./support");function h(p){this.files=[],this.loadOptions=p}h.prototype={checkSignature:function(p){if(!this.reader.readAndCheckSignature(p)){this.reader.index-=4;var m=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(m)+", expected "+o.pretty(p)+")")}},isSignature:function(p,m){var g=this.reader.index;this.reader.setIndex(p);var b=this.reader.readString(4)===m;return this.reader.setIndex(g),b},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var p=this.reader.readData(this.zipCommentLength),m=c.uint8array?"uint8array":"array",g=o.transformTo(m,p);this.zipComment=this.loadOptions.decodeFileName(g)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var p,m,g,b=this.zip64EndOfCentralSize-44;0<b;)p=this.reader.readInt(2),m=this.reader.readInt(4),g=this.reader.readData(m),this.zip64ExtensibleData[p]={id:p,length:m,value:g}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var p,m;for(p=0;p<this.files.length;p++)m=this.files[p],this.reader.setIndex(m.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),m.readLocalPart(this.reader),m.handleUTF8(),m.processAttributes()},readCentralDir:function(){var p;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(p=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(p);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var p=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(p<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(p);var m=p;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(p=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(p),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var g=this.centralDirOffset+this.centralDirSize;this.zip64&&(g+=20,g+=12+this.zip64EndOfCentralSize);var b=m-g;if(0<b)this.isSignature(m,a.CENTRAL_FILE_HEADER)||(this.reader.zero=b);else if(b<0)throw new Error("Corrupted zip: missing "+Math.abs(b)+" bytes.")},prepareReader:function(p){this.reader=s(p)},load:function(p){this.prepareReader(p),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=h},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,r,i){var s=t("./reader/readerFor"),o=t("./utils"),a=t("./compressedObject"),l=t("./crc32"),c=t("./utf8"),h=t("./compressions"),p=t("./support");function m(g,b){this.options=g,this.loadOptions=b}m.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(g){var b,E;if(g.skip(22),this.fileNameLength=g.readInt(2),E=g.readInt(2),this.fileName=g.readData(this.fileNameLength),g.skip(E),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((b=function(S){for(var O in h)if(Object.prototype.hasOwnProperty.call(h,O)&&h[O].magic===S)return h[O];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,b,g.readData(this.compressedSize))},readCentralPart:function(g){this.versionMadeBy=g.readInt(2),g.skip(2),this.bitFlag=g.readInt(2),this.compressionMethod=g.readString(2),this.date=g.readDate(),this.crc32=g.readInt(4),this.compressedSize=g.readInt(4),this.uncompressedSize=g.readInt(4);var b=g.readInt(2);if(this.extraFieldsLength=g.readInt(2),this.fileCommentLength=g.readInt(2),this.diskNumberStart=g.readInt(2),this.internalFileAttributes=g.readInt(2),this.externalFileAttributes=g.readInt(4),this.localHeaderOffset=g.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");g.skip(b),this.readExtraFields(g),this.parseZIP64ExtraField(g),this.fileComment=g.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var g=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),g==0&&(this.dosPermissions=63&this.externalFileAttributes),g==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var g=s(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=g.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=g.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=g.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=g.readInt(4))}},readExtraFields:function(g){var b,E,S,O=g.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});g.index+4<O;)b=g.readInt(2),E=g.readInt(2),S=g.readData(E),this.extraFields[b]={id:b,length:E,value:S};g.setIndex(O)},handleUTF8:function(){var g=p.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=c.utf8decode(this.fileName),this.fileCommentStr=c.utf8decode(this.fileComment);else{var b=this.findExtraFieldUnicodePath();if(b!==null)this.fileNameStr=b;else{var E=o.transformTo(g,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(E)}var S=this.findExtraFieldUnicodeComment();if(S!==null)this.fileCommentStr=S;else{var O=o.transformTo(g,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(O)}}},findExtraFieldUnicodePath:function(){var g=this.extraFields[28789];if(g){var b=s(g.value);return b.readInt(1)!==1||l(this.fileName)!==b.readInt(4)?null:c.utf8decode(b.readData(g.length-5))}return null},findExtraFieldUnicodeComment:function(){var g=this.extraFields[25461];if(g){var b=s(g.value);return b.readInt(1)!==1||l(this.fileComment)!==b.readInt(4)?null:c.utf8decode(b.readData(g.length-5))}return null}},r.exports=m},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,r,i){function s(b,E,S){this.name=b,this.dir=S.dir,this.date=S.date,this.comment=S.comment,this.unixPermissions=S.unixPermissions,this.dosPermissions=S.dosPermissions,this._data=E,this._dataBinary=S.binary,this.options={compression:S.compression,compressionOptions:S.compressionOptions}}var o=t("./stream/StreamHelper"),a=t("./stream/DataWorker"),l=t("./utf8"),c=t("./compressedObject"),h=t("./stream/GenericWorker");s.prototype={internalStream:function(b){var E=null,S="string";try{if(!b)throw new Error("No output type specified.");var O=(S=b.toLowerCase())==="string"||S==="text";S!=="binarystring"&&S!=="text"||(S="string"),E=this._decompressWorker();var U=!this._dataBinary;U&&!O&&(E=E.pipe(new l.Utf8EncodeWorker)),!U&&O&&(E=E.pipe(new l.Utf8DecodeWorker))}catch(D){(E=new h("error")).error(D)}return new o(E,S,"")},async:function(b,E){return this.internalStream(b).accumulate(E)},nodeStream:function(b,E){return this.internalStream(b||"nodebuffer").toNodejsStream(E)},_compressWorker:function(b,E){if(this._data instanceof c&&this._data.compression.magic===b.magic)return this._data.getCompressedWorker();var S=this._decompressWorker();return this._dataBinary||(S=S.pipe(new l.Utf8EncodeWorker)),c.createWorkerFrom(S,b,E)},_decompressWorker:function(){return this._data instanceof c?this._data.getContentWorker():this._data instanceof h?this._data:new a(this._data)}};for(var p=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],m=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},g=0;g<p.length;g++)s.prototype[p[g]]=m;r.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,r,i){(function(s){var o,a,l=s.MutationObserver||s.WebKitMutationObserver;if(l){var c=0,h=new l(b),p=s.document.createTextNode("");h.observe(p,{characterData:!0}),o=function(){p.data=c=++c%2}}else if(s.setImmediate||s.MessageChannel===void 0)o="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var E=s.document.createElement("script");E.onreadystatechange=function(){b(),E.onreadystatechange=null,E.parentNode.removeChild(E),E=null},s.document.documentElement.appendChild(E)}:function(){setTimeout(b,0)};else{var m=new s.MessageChannel;m.port1.onmessage=b,o=function(){m.port2.postMessage(0)}}var g=[];function b(){var E,S;a=!0;for(var O=g.length;O;){for(S=g,g=[],E=-1;++E<O;)S[E]();O=g.length}a=!1}r.exports=function(E){g.push(E)!==1||a||o()}}).call(this,typeof uu<"u"?uu:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,r,i){var s=t("immediate");function o(){}var a={},l=["REJECTED"],c=["FULFILLED"],h=["PENDING"];function p(O){if(typeof O!="function")throw new TypeError("resolver must be a function");this.state=h,this.queue=[],this.outcome=void 0,O!==o&&E(this,O)}function m(O,U,D){this.promise=O,typeof U=="function"&&(this.onFulfilled=U,this.callFulfilled=this.otherCallFulfilled),typeof D=="function"&&(this.onRejected=D,this.callRejected=this.otherCallRejected)}function g(O,U,D){s(function(){var V;try{V=U(D)}catch(K){return a.reject(O,K)}V===O?a.reject(O,new TypeError("Cannot resolve promise with itself")):a.resolve(O,V)})}function b(O){var U=O&&O.then;if(O&&(typeof O=="object"||typeof O=="function")&&typeof U=="function")return function(){U.apply(O,arguments)}}function E(O,U){var D=!1;function V(L){D||(D=!0,a.reject(O,L))}function K(L){D||(D=!0,a.resolve(O,L))}var oe=S(function(){U(K,V)});oe.status==="error"&&V(oe.value)}function S(O,U){var D={};try{D.value=O(U),D.status="success"}catch(V){D.status="error",D.value=V}return D}(r.exports=p).prototype.finally=function(O){if(typeof O!="function")return this;var U=this.constructor;return this.then(function(D){return U.resolve(O()).then(function(){return D})},function(D){return U.resolve(O()).then(function(){throw D})})},p.prototype.catch=function(O){return this.then(null,O)},p.prototype.then=function(O,U){if(typeof O!="function"&&this.state===c||typeof U!="function"&&this.state===l)return this;var D=new this.constructor(o);return this.state!==h?g(D,this.state===c?O:U,this.outcome):this.queue.push(new m(D,O,U)),D},m.prototype.callFulfilled=function(O){a.resolve(this.promise,O)},m.prototype.otherCallFulfilled=function(O){g(this.promise,this.onFulfilled,O)},m.prototype.callRejected=function(O){a.reject(this.promise,O)},m.prototype.otherCallRejected=function(O){g(this.promise,this.onRejected,O)},a.resolve=function(O,U){var D=S(b,U);if(D.status==="error")return a.reject(O,D.value);var V=D.value;if(V)E(O,V);else{O.state=c,O.outcome=U;for(var K=-1,oe=O.queue.length;++K<oe;)O.queue[K].callFulfilled(U)}return O},a.reject=function(O,U){O.state=l,O.outcome=U;for(var D=-1,V=O.queue.length;++D<V;)O.queue[D].callRejected(U);return O},p.resolve=function(O){return O instanceof this?O:a.resolve(new this(o),O)},p.reject=function(O){var U=new this(o);return a.reject(U,O)},p.all=function(O){var U=this;if(Object.prototype.toString.call(O)!=="[object Array]")return this.reject(new TypeError("must be an array"));var D=O.length,V=!1;if(!D)return this.resolve([]);for(var K=new Array(D),oe=0,L=-1,R=new this(o);++L<D;)N(O[L],L);return R;function N(F,z){U.resolve(F).then(function(C){K[z]=C,++oe!==D||V||(V=!0,a.resolve(R,K))},function(C){V||(V=!0,a.reject(R,C))})}},p.race=function(O){var U=this;if(Object.prototype.toString.call(O)!=="[object Array]")return this.reject(new TypeError("must be an array"));var D=O.length,V=!1;if(!D)return this.resolve([]);for(var K=-1,oe=new this(o);++K<D;)L=O[K],U.resolve(L).then(function(R){V||(V=!0,a.resolve(oe,R))},function(R){V||(V=!0,a.reject(oe,R))});var L;return oe}},{immediate:36}],38:[function(t,r,i){var s={};(0,t("./lib/utils/common").assign)(s,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),r.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,r,i){var s=t("./zlib/deflate"),o=t("./utils/common"),a=t("./utils/strings"),l=t("./zlib/messages"),c=t("./zlib/zstream"),h=Object.prototype.toString,p=0,m=-1,g=0,b=8;function E(O){if(!(this instanceof E))return new E(O);this.options=o.assign({level:m,method:b,chunkSize:16384,windowBits:15,memLevel:8,strategy:g,to:""},O||{});var U=this.options;U.raw&&0<U.windowBits?U.windowBits=-U.windowBits:U.gzip&&0<U.windowBits&&U.windowBits<16&&(U.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var D=s.deflateInit2(this.strm,U.level,U.method,U.windowBits,U.memLevel,U.strategy);if(D!==p)throw new Error(l[D]);if(U.header&&s.deflateSetHeader(this.strm,U.header),U.dictionary){var V;if(V=typeof U.dictionary=="string"?a.string2buf(U.dictionary):h.call(U.dictionary)==="[object ArrayBuffer]"?new Uint8Array(U.dictionary):U.dictionary,(D=s.deflateSetDictionary(this.strm,V))!==p)throw new Error(l[D]);this._dict_set=!0}}function S(O,U){var D=new E(U);if(D.push(O,!0),D.err)throw D.msg||l[D.err];return D.result}E.prototype.push=function(O,U){var D,V,K=this.strm,oe=this.options.chunkSize;if(this.ended)return!1;V=U===~~U?U:U===!0?4:0,typeof O=="string"?K.input=a.string2buf(O):h.call(O)==="[object ArrayBuffer]"?K.input=new Uint8Array(O):K.input=O,K.next_in=0,K.avail_in=K.input.length;do{if(K.avail_out===0&&(K.output=new o.Buf8(oe),K.next_out=0,K.avail_out=oe),(D=s.deflate(K,V))!==1&&D!==p)return this.onEnd(D),!(this.ended=!0);K.avail_out!==0&&(K.avail_in!==0||V!==4&&V!==2)||(this.options.to==="string"?this.onData(a.buf2binstring(o.shrinkBuf(K.output,K.next_out))):this.onData(o.shrinkBuf(K.output,K.next_out)))}while((0<K.avail_in||K.avail_out===0)&&D!==1);return V===4?(D=s.deflateEnd(this.strm),this.onEnd(D),this.ended=!0,D===p):V!==2||(this.onEnd(p),!(K.avail_out=0))},E.prototype.onData=function(O){this.chunks.push(O)},E.prototype.onEnd=function(O){O===p&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=O,this.msg=this.strm.msg},i.Deflate=E,i.deflate=S,i.deflateRaw=function(O,U){return(U=U||{}).raw=!0,S(O,U)},i.gzip=function(O,U){return(U=U||{}).gzip=!0,S(O,U)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,r,i){var s=t("./zlib/inflate"),o=t("./utils/common"),a=t("./utils/strings"),l=t("./zlib/constants"),c=t("./zlib/messages"),h=t("./zlib/zstream"),p=t("./zlib/gzheader"),m=Object.prototype.toString;function g(E){if(!(this instanceof g))return new g(E);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},E||{});var S=this.options;S.raw&&0<=S.windowBits&&S.windowBits<16&&(S.windowBits=-S.windowBits,S.windowBits===0&&(S.windowBits=-15)),!(0<=S.windowBits&&S.windowBits<16)||E&&E.windowBits||(S.windowBits+=32),15<S.windowBits&&S.windowBits<48&&(15&S.windowBits)==0&&(S.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var O=s.inflateInit2(this.strm,S.windowBits);if(O!==l.Z_OK)throw new Error(c[O]);this.header=new p,s.inflateGetHeader(this.strm,this.header)}function b(E,S){var O=new g(S);if(O.push(E,!0),O.err)throw O.msg||c[O.err];return O.result}g.prototype.push=function(E,S){var O,U,D,V,K,oe,L=this.strm,R=this.options.chunkSize,N=this.options.dictionary,F=!1;if(this.ended)return!1;U=S===~~S?S:S===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof E=="string"?L.input=a.binstring2buf(E):m.call(E)==="[object ArrayBuffer]"?L.input=new Uint8Array(E):L.input=E,L.next_in=0,L.avail_in=L.input.length;do{if(L.avail_out===0&&(L.output=new o.Buf8(R),L.next_out=0,L.avail_out=R),(O=s.inflate(L,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&N&&(oe=typeof N=="string"?a.string2buf(N):m.call(N)==="[object ArrayBuffer]"?new Uint8Array(N):N,O=s.inflateSetDictionary(this.strm,oe)),O===l.Z_BUF_ERROR&&F===!0&&(O=l.Z_OK,F=!1),O!==l.Z_STREAM_END&&O!==l.Z_OK)return this.onEnd(O),!(this.ended=!0);L.next_out&&(L.avail_out!==0&&O!==l.Z_STREAM_END&&(L.avail_in!==0||U!==l.Z_FINISH&&U!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(D=a.utf8border(L.output,L.next_out),V=L.next_out-D,K=a.buf2string(L.output,D),L.next_out=V,L.avail_out=R-V,V&&o.arraySet(L.output,L.output,D,V,0),this.onData(K)):this.onData(o.shrinkBuf(L.output,L.next_out)))),L.avail_in===0&&L.avail_out===0&&(F=!0)}while((0<L.avail_in||L.avail_out===0)&&O!==l.Z_STREAM_END);return O===l.Z_STREAM_END&&(U=l.Z_FINISH),U===l.Z_FINISH?(O=s.inflateEnd(this.strm),this.onEnd(O),this.ended=!0,O===l.Z_OK):U!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(L.avail_out=0))},g.prototype.onData=function(E){this.chunks.push(E)},g.prototype.onEnd=function(E){E===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=E,this.msg=this.strm.msg},i.Inflate=g,i.inflate=b,i.inflateRaw=function(E,S){return(S=S||{}).raw=!0,b(E,S)},i.ungzip=b},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,r,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(l){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var h=c.shift();if(h){if(typeof h!="object")throw new TypeError(h+"must be non-object");for(var p in h)h.hasOwnProperty(p)&&(l[p]=h[p])}}return l},i.shrinkBuf=function(l,c){return l.length===c?l:l.subarray?l.subarray(0,c):(l.length=c,l)};var o={arraySet:function(l,c,h,p,m){if(c.subarray&&l.subarray)l.set(c.subarray(h,h+p),m);else for(var g=0;g<p;g++)l[m+g]=c[h+g]},flattenChunks:function(l){var c,h,p,m,g,b;for(c=p=0,h=l.length;c<h;c++)p+=l[c].length;for(b=new Uint8Array(p),c=m=0,h=l.length;c<h;c++)g=l[c],b.set(g,m),m+=g.length;return b}},a={arraySet:function(l,c,h,p,m){for(var g=0;g<p;g++)l[m+g]=c[h+g]},flattenChunks:function(l){return[].concat.apply([],l)}};i.setTyped=function(l){l?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,o)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,a))},i.setTyped(s)},{}],42:[function(t,r,i){var s=t("./common"),o=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}for(var l=new s.Buf8(256),c=0;c<256;c++)l[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;function h(p,m){if(m<65537&&(p.subarray&&a||!p.subarray&&o))return String.fromCharCode.apply(null,s.shrinkBuf(p,m));for(var g="",b=0;b<m;b++)g+=String.fromCharCode(p[b]);return g}l[254]=l[254]=1,i.string2buf=function(p){var m,g,b,E,S,O=p.length,U=0;for(E=0;E<O;E++)(64512&(g=p.charCodeAt(E)))==55296&&E+1<O&&(64512&(b=p.charCodeAt(E+1)))==56320&&(g=65536+(g-55296<<10)+(b-56320),E++),U+=g<128?1:g<2048?2:g<65536?3:4;for(m=new s.Buf8(U),E=S=0;S<U;E++)(64512&(g=p.charCodeAt(E)))==55296&&E+1<O&&(64512&(b=p.charCodeAt(E+1)))==56320&&(g=65536+(g-55296<<10)+(b-56320),E++),g<128?m[S++]=g:(g<2048?m[S++]=192|g>>>6:(g<65536?m[S++]=224|g>>>12:(m[S++]=240|g>>>18,m[S++]=128|g>>>12&63),m[S++]=128|g>>>6&63),m[S++]=128|63&g);return m},i.buf2binstring=function(p){return h(p,p.length)},i.binstring2buf=function(p){for(var m=new s.Buf8(p.length),g=0,b=m.length;g<b;g++)m[g]=p.charCodeAt(g);return m},i.buf2string=function(p,m){var g,b,E,S,O=m||p.length,U=new Array(2*O);for(g=b=0;g<O;)if((E=p[g++])<128)U[b++]=E;else if(4<(S=l[E]))U[b++]=65533,g+=S-1;else{for(E&=S===2?31:S===3?15:7;1<S&&g<O;)E=E<<6|63&p[g++],S--;1<S?U[b++]=65533:E<65536?U[b++]=E:(E-=65536,U[b++]=55296|E>>10&1023,U[b++]=56320|1023&E)}return h(U,b)},i.utf8border=function(p,m){var g;for((m=m||p.length)>p.length&&(m=p.length),g=m-1;0<=g&&(192&p[g])==128;)g--;return g<0||g===0?m:g+l[p[g]]>m?g:m}},{"./common":41}],43:[function(t,r,i){r.exports=function(s,o,a,l){for(var c=65535&s|0,h=s>>>16&65535|0,p=0;a!==0;){for(a-=p=2e3<a?2e3:a;h=h+(c=c+o[l++]|0)|0,--p;);c%=65521,h%=65521}return c|h<<16|0}},{}],44:[function(t,r,i){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,r,i){var s=function(){for(var o,a=[],l=0;l<256;l++){o=l;for(var c=0;c<8;c++)o=1&o?3988292384^o>>>1:o>>>1;a[l]=o}return a}();r.exports=function(o,a,l,c){var h=s,p=c+l;o^=-1;for(var m=c;m<p;m++)o=o>>>8^h[255&(o^a[m])];return-1^o}},{}],46:[function(t,r,i){var s,o=t("../utils/common"),a=t("./trees"),l=t("./adler32"),c=t("./crc32"),h=t("./messages"),p=0,m=4,g=0,b=-2,E=-1,S=4,O=2,U=8,D=9,V=286,K=30,oe=19,L=2*V+1,R=15,N=3,F=258,z=F+N+1,C=42,P=113,x=1,ue=2,Y=3,X=4;function xe(v,te){return v.msg=h[te],te}function Ee(v){return(v<<1)-(4<v?9:0)}function ve(v){for(var te=v.length;0<=--te;)v[te]=0}function ce(v){var te=v.state,G=te.pending;G>v.avail_out&&(G=v.avail_out),G!==0&&(o.arraySet(v.output,te.pending_buf,te.pending_out,G,v.next_out),v.next_out+=G,te.pending_out+=G,v.total_out+=G,v.avail_out-=G,te.pending-=G,te.pending===0&&(te.pending_out=0))}function le(v,te){a._tr_flush_block(v,0<=v.block_start?v.block_start:-1,v.strstart-v.block_start,te),v.block_start=v.strstart,ce(v.strm)}function ye(v,te){v.pending_buf[v.pending++]=te}function De(v,te){v.pending_buf[v.pending++]=te>>>8&255,v.pending_buf[v.pending++]=255&te}function Z(v,te){var G,M,$=v.max_chain_length,q=v.strstart,ae=v.prev_length,ie=v.nice_match,J=v.strstart>v.w_size-z?v.strstart-(v.w_size-z):0,de=v.window,ge=v.w_mask,pe=v.prev,Ce=v.strstart+F,Ve=de[q+ae-1],Ue=de[q+ae];v.prev_length>=v.good_match&&($>>=2),ie>v.lookahead&&(ie=v.lookahead);do if(de[(G=te)+ae]===Ue&&de[G+ae-1]===Ve&&de[G]===de[q]&&de[++G]===de[q+1]){q+=2,G++;do;while(de[++q]===de[++G]&&de[++q]===de[++G]&&de[++q]===de[++G]&&de[++q]===de[++G]&&de[++q]===de[++G]&&de[++q]===de[++G]&&de[++q]===de[++G]&&de[++q]===de[++G]&&q<Ce);if(M=F-(Ce-q),q=Ce-F,ae<M){if(v.match_start=te,ie<=(ae=M))break;Ve=de[q+ae-1],Ue=de[q+ae]}}while((te=pe[te&ge])>J&&--$!=0);return ae<=v.lookahead?ae:v.lookahead}function ze(v){var te,G,M,$,q,ae,ie,J,de,ge,pe=v.w_size;do{if($=v.window_size-v.lookahead-v.strstart,v.strstart>=pe+(pe-z)){for(o.arraySet(v.window,v.window,pe,pe,0),v.match_start-=pe,v.strstart-=pe,v.block_start-=pe,te=G=v.hash_size;M=v.head[--te],v.head[te]=pe<=M?M-pe:0,--G;);for(te=G=pe;M=v.prev[--te],v.prev[te]=pe<=M?M-pe:0,--G;);$+=pe}if(v.strm.avail_in===0)break;if(ae=v.strm,ie=v.window,J=v.strstart+v.lookahead,de=$,ge=void 0,ge=ae.avail_in,de<ge&&(ge=de),G=ge===0?0:(ae.avail_in-=ge,o.arraySet(ie,ae.input,ae.next_in,ge,J),ae.state.wrap===1?ae.adler=l(ae.adler,ie,ge,J):ae.state.wrap===2&&(ae.adler=c(ae.adler,ie,ge,J)),ae.next_in+=ge,ae.total_in+=ge,ge),v.lookahead+=G,v.lookahead+v.insert>=N)for(q=v.strstart-v.insert,v.ins_h=v.window[q],v.ins_h=(v.ins_h<<v.hash_shift^v.window[q+1])&v.hash_mask;v.insert&&(v.ins_h=(v.ins_h<<v.hash_shift^v.window[q+N-1])&v.hash_mask,v.prev[q&v.w_mask]=v.head[v.ins_h],v.head[v.ins_h]=q,q++,v.insert--,!(v.lookahead+v.insert<N)););}while(v.lookahead<z&&v.strm.avail_in!==0)}function ke(v,te){for(var G,M;;){if(v.lookahead<z){if(ze(v),v.lookahead<z&&te===p)return x;if(v.lookahead===0)break}if(G=0,v.lookahead>=N&&(v.ins_h=(v.ins_h<<v.hash_shift^v.window[v.strstart+N-1])&v.hash_mask,G=v.prev[v.strstart&v.w_mask]=v.head[v.ins_h],v.head[v.ins_h]=v.strstart),G!==0&&v.strstart-G<=v.w_size-z&&(v.match_length=Z(v,G)),v.match_length>=N)if(M=a._tr_tally(v,v.strstart-v.match_start,v.match_length-N),v.lookahead-=v.match_length,v.match_length<=v.max_lazy_match&&v.lookahead>=N){for(v.match_length--;v.strstart++,v.ins_h=(v.ins_h<<v.hash_shift^v.window[v.strstart+N-1])&v.hash_mask,G=v.prev[v.strstart&v.w_mask]=v.head[v.ins_h],v.head[v.ins_h]=v.strstart,--v.match_length!=0;);v.strstart++}else v.strstart+=v.match_length,v.match_length=0,v.ins_h=v.window[v.strstart],v.ins_h=(v.ins_h<<v.hash_shift^v.window[v.strstart+1])&v.hash_mask;else M=a._tr_tally(v,0,v.window[v.strstart]),v.lookahead--,v.strstart++;if(M&&(le(v,!1),v.strm.avail_out===0))return x}return v.insert=v.strstart<N-1?v.strstart:N-1,te===m?(le(v,!0),v.strm.avail_out===0?Y:X):v.last_lit&&(le(v,!1),v.strm.avail_out===0)?x:ue}function _e(v,te){for(var G,M,$;;){if(v.lookahead<z){if(ze(v),v.lookahead<z&&te===p)return x;if(v.lookahead===0)break}if(G=0,v.lookahead>=N&&(v.ins_h=(v.ins_h<<v.hash_shift^v.window[v.strstart+N-1])&v.hash_mask,G=v.prev[v.strstart&v.w_mask]=v.head[v.ins_h],v.head[v.ins_h]=v.strstart),v.prev_length=v.match_length,v.prev_match=v.match_start,v.match_length=N-1,G!==0&&v.prev_length<v.max_lazy_match&&v.strstart-G<=v.w_size-z&&(v.match_length=Z(v,G),v.match_length<=5&&(v.strategy===1||v.match_length===N&&4096<v.strstart-v.match_start)&&(v.match_length=N-1)),v.prev_length>=N&&v.match_length<=v.prev_length){for($=v.strstart+v.lookahead-N,M=a._tr_tally(v,v.strstart-1-v.prev_match,v.prev_length-N),v.lookahead-=v.prev_length-1,v.prev_length-=2;++v.strstart<=$&&(v.ins_h=(v.ins_h<<v.hash_shift^v.window[v.strstart+N-1])&v.hash_mask,G=v.prev[v.strstart&v.w_mask]=v.head[v.ins_h],v.head[v.ins_h]=v.strstart),--v.prev_length!=0;);if(v.match_available=0,v.match_length=N-1,v.strstart++,M&&(le(v,!1),v.strm.avail_out===0))return x}else if(v.match_available){if((M=a._tr_tally(v,0,v.window[v.strstart-1]))&&le(v,!1),v.strstart++,v.lookahead--,v.strm.avail_out===0)return x}else v.match_available=1,v.strstart++,v.lookahead--}return v.match_available&&(M=a._tr_tally(v,0,v.window[v.strstart-1]),v.match_available=0),v.insert=v.strstart<N-1?v.strstart:N-1,te===m?(le(v,!0),v.strm.avail_out===0?Y:X):v.last_lit&&(le(v,!1),v.strm.avail_out===0)?x:ue}function Re(v,te,G,M,$){this.good_length=v,this.max_lazy=te,this.nice_length=G,this.max_chain=M,this.func=$}function $e(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=U,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*L),this.dyn_dtree=new o.Buf16(2*(2*K+1)),this.bl_tree=new o.Buf16(2*(2*oe+1)),ve(this.dyn_ltree),ve(this.dyn_dtree),ve(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(R+1),this.heap=new o.Buf16(2*V+1),ve(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*V+1),ve(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Ne(v){var te;return v&&v.state?(v.total_in=v.total_out=0,v.data_type=O,(te=v.state).pending=0,te.pending_out=0,te.wrap<0&&(te.wrap=-te.wrap),te.status=te.wrap?C:P,v.adler=te.wrap===2?0:1,te.last_flush=p,a._tr_init(te),g):xe(v,b)}function Q(v){var te=Ne(v);return te===g&&function(G){G.window_size=2*G.w_size,ve(G.head),G.max_lazy_match=s[G.level].max_lazy,G.good_match=s[G.level].good_length,G.nice_match=s[G.level].nice_length,G.max_chain_length=s[G.level].max_chain,G.strstart=0,G.block_start=0,G.lookahead=0,G.insert=0,G.match_length=G.prev_length=N-1,G.match_available=0,G.ins_h=0}(v.state),te}function H(v,te,G,M,$,q){if(!v)return b;var ae=1;if(te===E&&(te=6),M<0?(ae=0,M=-M):15<M&&(ae=2,M-=16),$<1||D<$||G!==U||M<8||15<M||te<0||9<te||q<0||S<q)return xe(v,b);M===8&&(M=9);var ie=new $e;return(v.state=ie).strm=v,ie.wrap=ae,ie.gzhead=null,ie.w_bits=M,ie.w_size=1<<ie.w_bits,ie.w_mask=ie.w_size-1,ie.hash_bits=$+7,ie.hash_size=1<<ie.hash_bits,ie.hash_mask=ie.hash_size-1,ie.hash_shift=~~((ie.hash_bits+N-1)/N),ie.window=new o.Buf8(2*ie.w_size),ie.head=new o.Buf16(ie.hash_size),ie.prev=new o.Buf16(ie.w_size),ie.lit_bufsize=1<<$+6,ie.pending_buf_size=4*ie.lit_bufsize,ie.pending_buf=new o.Buf8(ie.pending_buf_size),ie.d_buf=1*ie.lit_bufsize,ie.l_buf=3*ie.lit_bufsize,ie.level=te,ie.strategy=q,ie.method=G,Q(v)}s=[new Re(0,0,0,0,function(v,te){var G=65535;for(G>v.pending_buf_size-5&&(G=v.pending_buf_size-5);;){if(v.lookahead<=1){if(ze(v),v.lookahead===0&&te===p)return x;if(v.lookahead===0)break}v.strstart+=v.lookahead,v.lookahead=0;var M=v.block_start+G;if((v.strstart===0||v.strstart>=M)&&(v.lookahead=v.strstart-M,v.strstart=M,le(v,!1),v.strm.avail_out===0)||v.strstart-v.block_start>=v.w_size-z&&(le(v,!1),v.strm.avail_out===0))return x}return v.insert=0,te===m?(le(v,!0),v.strm.avail_out===0?Y:X):(v.strstart>v.block_start&&(le(v,!1),v.strm.avail_out),x)}),new Re(4,4,8,4,ke),new Re(4,5,16,8,ke),new Re(4,6,32,32,ke),new Re(4,4,16,16,_e),new Re(8,16,32,32,_e),new Re(8,16,128,128,_e),new Re(8,32,128,256,_e),new Re(32,128,258,1024,_e),new Re(32,258,258,4096,_e)],i.deflateInit=function(v,te){return H(v,te,U,15,8,0)},i.deflateInit2=H,i.deflateReset=Q,i.deflateResetKeep=Ne,i.deflateSetHeader=function(v,te){return v&&v.state?v.state.wrap!==2?b:(v.state.gzhead=te,g):b},i.deflate=function(v,te){var G,M,$,q;if(!v||!v.state||5<te||te<0)return v?xe(v,b):b;if(M=v.state,!v.output||!v.input&&v.avail_in!==0||M.status===666&&te!==m)return xe(v,v.avail_out===0?-5:b);if(M.strm=v,G=M.last_flush,M.last_flush=te,M.status===C)if(M.wrap===2)v.adler=0,ye(M,31),ye(M,139),ye(M,8),M.gzhead?(ye(M,(M.gzhead.text?1:0)+(M.gzhead.hcrc?2:0)+(M.gzhead.extra?4:0)+(M.gzhead.name?8:0)+(M.gzhead.comment?16:0)),ye(M,255&M.gzhead.time),ye(M,M.gzhead.time>>8&255),ye(M,M.gzhead.time>>16&255),ye(M,M.gzhead.time>>24&255),ye(M,M.level===9?2:2<=M.strategy||M.level<2?4:0),ye(M,255&M.gzhead.os),M.gzhead.extra&&M.gzhead.extra.length&&(ye(M,255&M.gzhead.extra.length),ye(M,M.gzhead.extra.length>>8&255)),M.gzhead.hcrc&&(v.adler=c(v.adler,M.pending_buf,M.pending,0)),M.gzindex=0,M.status=69):(ye(M,0),ye(M,0),ye(M,0),ye(M,0),ye(M,0),ye(M,M.level===9?2:2<=M.strategy||M.level<2?4:0),ye(M,3),M.status=P);else{var ae=U+(M.w_bits-8<<4)<<8;ae|=(2<=M.strategy||M.level<2?0:M.level<6?1:M.level===6?2:3)<<6,M.strstart!==0&&(ae|=32),ae+=31-ae%31,M.status=P,De(M,ae),M.strstart!==0&&(De(M,v.adler>>>16),De(M,65535&v.adler)),v.adler=1}if(M.status===69)if(M.gzhead.extra){for($=M.pending;M.gzindex<(65535&M.gzhead.extra.length)&&(M.pending!==M.pending_buf_size||(M.gzhead.hcrc&&M.pending>$&&(v.adler=c(v.adler,M.pending_buf,M.pending-$,$)),ce(v),$=M.pending,M.pending!==M.pending_buf_size));)ye(M,255&M.gzhead.extra[M.gzindex]),M.gzindex++;M.gzhead.hcrc&&M.pending>$&&(v.adler=c(v.adler,M.pending_buf,M.pending-$,$)),M.gzindex===M.gzhead.extra.length&&(M.gzindex=0,M.status=73)}else M.status=73;if(M.status===73)if(M.gzhead.name){$=M.pending;do{if(M.pending===M.pending_buf_size&&(M.gzhead.hcrc&&M.pending>$&&(v.adler=c(v.adler,M.pending_buf,M.pending-$,$)),ce(v),$=M.pending,M.pending===M.pending_buf_size)){q=1;break}q=M.gzindex<M.gzhead.name.length?255&M.gzhead.name.charCodeAt(M.gzindex++):0,ye(M,q)}while(q!==0);M.gzhead.hcrc&&M.pending>$&&(v.adler=c(v.adler,M.pending_buf,M.pending-$,$)),q===0&&(M.gzindex=0,M.status=91)}else M.status=91;if(M.status===91)if(M.gzhead.comment){$=M.pending;do{if(M.pending===M.pending_buf_size&&(M.gzhead.hcrc&&M.pending>$&&(v.adler=c(v.adler,M.pending_buf,M.pending-$,$)),ce(v),$=M.pending,M.pending===M.pending_buf_size)){q=1;break}q=M.gzindex<M.gzhead.comment.length?255&M.gzhead.comment.charCodeAt(M.gzindex++):0,ye(M,q)}while(q!==0);M.gzhead.hcrc&&M.pending>$&&(v.adler=c(v.adler,M.pending_buf,M.pending-$,$)),q===0&&(M.status=103)}else M.status=103;if(M.status===103&&(M.gzhead.hcrc?(M.pending+2>M.pending_buf_size&&ce(v),M.pending+2<=M.pending_buf_size&&(ye(M,255&v.adler),ye(M,v.adler>>8&255),v.adler=0,M.status=P)):M.status=P),M.pending!==0){if(ce(v),v.avail_out===0)return M.last_flush=-1,g}else if(v.avail_in===0&&Ee(te)<=Ee(G)&&te!==m)return xe(v,-5);if(M.status===666&&v.avail_in!==0)return xe(v,-5);if(v.avail_in!==0||M.lookahead!==0||te!==p&&M.status!==666){var ie=M.strategy===2?function(J,de){for(var ge;;){if(J.lookahead===0&&(ze(J),J.lookahead===0)){if(de===p)return x;break}if(J.match_length=0,ge=a._tr_tally(J,0,J.window[J.strstart]),J.lookahead--,J.strstart++,ge&&(le(J,!1),J.strm.avail_out===0))return x}return J.insert=0,de===m?(le(J,!0),J.strm.avail_out===0?Y:X):J.last_lit&&(le(J,!1),J.strm.avail_out===0)?x:ue}(M,te):M.strategy===3?function(J,de){for(var ge,pe,Ce,Ve,Ue=J.window;;){if(J.lookahead<=F){if(ze(J),J.lookahead<=F&&de===p)return x;if(J.lookahead===0)break}if(J.match_length=0,J.lookahead>=N&&0<J.strstart&&(pe=Ue[Ce=J.strstart-1])===Ue[++Ce]&&pe===Ue[++Ce]&&pe===Ue[++Ce]){Ve=J.strstart+F;do;while(pe===Ue[++Ce]&&pe===Ue[++Ce]&&pe===Ue[++Ce]&&pe===Ue[++Ce]&&pe===Ue[++Ce]&&pe===Ue[++Ce]&&pe===Ue[++Ce]&&pe===Ue[++Ce]&&Ce<Ve);J.match_length=F-(Ve-Ce),J.match_length>J.lookahead&&(J.match_length=J.lookahead)}if(J.match_length>=N?(ge=a._tr_tally(J,1,J.match_length-N),J.lookahead-=J.match_length,J.strstart+=J.match_length,J.match_length=0):(ge=a._tr_tally(J,0,J.window[J.strstart]),J.lookahead--,J.strstart++),ge&&(le(J,!1),J.strm.avail_out===0))return x}return J.insert=0,de===m?(le(J,!0),J.strm.avail_out===0?Y:X):J.last_lit&&(le(J,!1),J.strm.avail_out===0)?x:ue}(M,te):s[M.level].func(M,te);if(ie!==Y&&ie!==X||(M.status=666),ie===x||ie===Y)return v.avail_out===0&&(M.last_flush=-1),g;if(ie===ue&&(te===1?a._tr_align(M):te!==5&&(a._tr_stored_block(M,0,0,!1),te===3&&(ve(M.head),M.lookahead===0&&(M.strstart=0,M.block_start=0,M.insert=0))),ce(v),v.avail_out===0))return M.last_flush=-1,g}return te!==m?g:M.wrap<=0?1:(M.wrap===2?(ye(M,255&v.adler),ye(M,v.adler>>8&255),ye(M,v.adler>>16&255),ye(M,v.adler>>24&255),ye(M,255&v.total_in),ye(M,v.total_in>>8&255),ye(M,v.total_in>>16&255),ye(M,v.total_in>>24&255)):(De(M,v.adler>>>16),De(M,65535&v.adler)),ce(v),0<M.wrap&&(M.wrap=-M.wrap),M.pending!==0?g:1)},i.deflateEnd=function(v){var te;return v&&v.state?(te=v.state.status)!==C&&te!==69&&te!==73&&te!==91&&te!==103&&te!==P&&te!==666?xe(v,b):(v.state=null,te===P?xe(v,-3):g):b},i.deflateSetDictionary=function(v,te){var G,M,$,q,ae,ie,J,de,ge=te.length;if(!v||!v.state||(q=(G=v.state).wrap)===2||q===1&&G.status!==C||G.lookahead)return b;for(q===1&&(v.adler=l(v.adler,te,ge,0)),G.wrap=0,ge>=G.w_size&&(q===0&&(ve(G.head),G.strstart=0,G.block_start=0,G.insert=0),de=new o.Buf8(G.w_size),o.arraySet(de,te,ge-G.w_size,G.w_size,0),te=de,ge=G.w_size),ae=v.avail_in,ie=v.next_in,J=v.input,v.avail_in=ge,v.next_in=0,v.input=te,ze(G);G.lookahead>=N;){for(M=G.strstart,$=G.lookahead-(N-1);G.ins_h=(G.ins_h<<G.hash_shift^G.window[M+N-1])&G.hash_mask,G.prev[M&G.w_mask]=G.head[G.ins_h],G.head[G.ins_h]=M,M++,--$;);G.strstart=M,G.lookahead=N-1,ze(G)}return G.strstart+=G.lookahead,G.block_start=G.strstart,G.insert=G.lookahead,G.lookahead=0,G.match_length=G.prev_length=N-1,G.match_available=0,v.next_in=ie,v.input=J,v.avail_in=ae,G.wrap=q,g},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,r,i){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,r,i){r.exports=function(s,o){var a,l,c,h,p,m,g,b,E,S,O,U,D,V,K,oe,L,R,N,F,z,C,P,x,ue;a=s.state,l=s.next_in,x=s.input,c=l+(s.avail_in-5),h=s.next_out,ue=s.output,p=h-(o-s.avail_out),m=h+(s.avail_out-257),g=a.dmax,b=a.wsize,E=a.whave,S=a.wnext,O=a.window,U=a.hold,D=a.bits,V=a.lencode,K=a.distcode,oe=(1<<a.lenbits)-1,L=(1<<a.distbits)-1;e:do{D<15&&(U+=x[l++]<<D,D+=8,U+=x[l++]<<D,D+=8),R=V[U&oe];t:for(;;){if(U>>>=N=R>>>24,D-=N,(N=R>>>16&255)===0)ue[h++]=65535&R;else{if(!(16&N)){if((64&N)==0){R=V[(65535&R)+(U&(1<<N)-1)];continue t}if(32&N){a.mode=12;break e}s.msg="invalid literal/length code",a.mode=30;break e}F=65535&R,(N&=15)&&(D<N&&(U+=x[l++]<<D,D+=8),F+=U&(1<<N)-1,U>>>=N,D-=N),D<15&&(U+=x[l++]<<D,D+=8,U+=x[l++]<<D,D+=8),R=K[U&L];n:for(;;){if(U>>>=N=R>>>24,D-=N,!(16&(N=R>>>16&255))){if((64&N)==0){R=K[(65535&R)+(U&(1<<N)-1)];continue n}s.msg="invalid distance code",a.mode=30;break e}if(z=65535&R,D<(N&=15)&&(U+=x[l++]<<D,(D+=8)<N&&(U+=x[l++]<<D,D+=8)),g<(z+=U&(1<<N)-1)){s.msg="invalid distance too far back",a.mode=30;break e}if(U>>>=N,D-=N,(N=h-p)<z){if(E<(N=z-N)&&a.sane){s.msg="invalid distance too far back",a.mode=30;break e}if(P=O,(C=0)===S){if(C+=b-N,N<F){for(F-=N;ue[h++]=O[C++],--N;);C=h-z,P=ue}}else if(S<N){if(C+=b+S-N,(N-=S)<F){for(F-=N;ue[h++]=O[C++],--N;);if(C=0,S<F){for(F-=N=S;ue[h++]=O[C++],--N;);C=h-z,P=ue}}}else if(C+=S-N,N<F){for(F-=N;ue[h++]=O[C++],--N;);C=h-z,P=ue}for(;2<F;)ue[h++]=P[C++],ue[h++]=P[C++],ue[h++]=P[C++],F-=3;F&&(ue[h++]=P[C++],1<F&&(ue[h++]=P[C++]))}else{for(C=h-z;ue[h++]=ue[C++],ue[h++]=ue[C++],ue[h++]=ue[C++],2<(F-=3););F&&(ue[h++]=ue[C++],1<F&&(ue[h++]=ue[C++]))}break}}break}}while(l<c&&h<m);l-=F=D>>3,U&=(1<<(D-=F<<3))-1,s.next_in=l,s.next_out=h,s.avail_in=l<c?c-l+5:5-(l-c),s.avail_out=h<m?m-h+257:257-(h-m),a.hold=U,a.bits=D}},{}],49:[function(t,r,i){var s=t("../utils/common"),o=t("./adler32"),a=t("./crc32"),l=t("./inffast"),c=t("./inftrees"),h=1,p=2,m=0,g=-2,b=1,E=852,S=592;function O(C){return(C>>>24&255)+(C>>>8&65280)+((65280&C)<<8)+((255&C)<<24)}function U(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function D(C){var P;return C&&C.state?(P=C.state,C.total_in=C.total_out=P.total=0,C.msg="",P.wrap&&(C.adler=1&P.wrap),P.mode=b,P.last=0,P.havedict=0,P.dmax=32768,P.head=null,P.hold=0,P.bits=0,P.lencode=P.lendyn=new s.Buf32(E),P.distcode=P.distdyn=new s.Buf32(S),P.sane=1,P.back=-1,m):g}function V(C){var P;return C&&C.state?((P=C.state).wsize=0,P.whave=0,P.wnext=0,D(C)):g}function K(C,P){var x,ue;return C&&C.state?(ue=C.state,P<0?(x=0,P=-P):(x=1+(P>>4),P<48&&(P&=15)),P&&(P<8||15<P)?g:(ue.window!==null&&ue.wbits!==P&&(ue.window=null),ue.wrap=x,ue.wbits=P,V(C))):g}function oe(C,P){var x,ue;return C?(ue=new U,(C.state=ue).window=null,(x=K(C,P))!==m&&(C.state=null),x):g}var L,R,N=!0;function F(C){if(N){var P;for(L=new s.Buf32(512),R=new s.Buf32(32),P=0;P<144;)C.lens[P++]=8;for(;P<256;)C.lens[P++]=9;for(;P<280;)C.lens[P++]=7;for(;P<288;)C.lens[P++]=8;for(c(h,C.lens,0,288,L,0,C.work,{bits:9}),P=0;P<32;)C.lens[P++]=5;c(p,C.lens,0,32,R,0,C.work,{bits:5}),N=!1}C.lencode=L,C.lenbits=9,C.distcode=R,C.distbits=5}function z(C,P,x,ue){var Y,X=C.state;return X.window===null&&(X.wsize=1<<X.wbits,X.wnext=0,X.whave=0,X.window=new s.Buf8(X.wsize)),ue>=X.wsize?(s.arraySet(X.window,P,x-X.wsize,X.wsize,0),X.wnext=0,X.whave=X.wsize):(ue<(Y=X.wsize-X.wnext)&&(Y=ue),s.arraySet(X.window,P,x-ue,Y,X.wnext),(ue-=Y)?(s.arraySet(X.window,P,x-ue,ue,0),X.wnext=ue,X.whave=X.wsize):(X.wnext+=Y,X.wnext===X.wsize&&(X.wnext=0),X.whave<X.wsize&&(X.whave+=Y))),0}i.inflateReset=V,i.inflateReset2=K,i.inflateResetKeep=D,i.inflateInit=function(C){return oe(C,15)},i.inflateInit2=oe,i.inflate=function(C,P){var x,ue,Y,X,xe,Ee,ve,ce,le,ye,De,Z,ze,ke,_e,Re,$e,Ne,Q,H,v,te,G,M,$=0,q=new s.Buf8(4),ae=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!C||!C.state||!C.output||!C.input&&C.avail_in!==0)return g;(x=C.state).mode===12&&(x.mode=13),xe=C.next_out,Y=C.output,ve=C.avail_out,X=C.next_in,ue=C.input,Ee=C.avail_in,ce=x.hold,le=x.bits,ye=Ee,De=ve,te=m;e:for(;;)switch(x.mode){case b:if(x.wrap===0){x.mode=13;break}for(;le<16;){if(Ee===0)break e;Ee--,ce+=ue[X++]<<le,le+=8}if(2&x.wrap&&ce===35615){q[x.check=0]=255&ce,q[1]=ce>>>8&255,x.check=a(x.check,q,2,0),le=ce=0,x.mode=2;break}if(x.flags=0,x.head&&(x.head.done=!1),!(1&x.wrap)||(((255&ce)<<8)+(ce>>8))%31){C.msg="incorrect header check",x.mode=30;break}if((15&ce)!=8){C.msg="unknown compression method",x.mode=30;break}if(le-=4,v=8+(15&(ce>>>=4)),x.wbits===0)x.wbits=v;else if(v>x.wbits){C.msg="invalid window size",x.mode=30;break}x.dmax=1<<v,C.adler=x.check=1,x.mode=512&ce?10:12,le=ce=0;break;case 2:for(;le<16;){if(Ee===0)break e;Ee--,ce+=ue[X++]<<le,le+=8}if(x.flags=ce,(255&x.flags)!=8){C.msg="unknown compression method",x.mode=30;break}if(57344&x.flags){C.msg="unknown header flags set",x.mode=30;break}x.head&&(x.head.text=ce>>8&1),512&x.flags&&(q[0]=255&ce,q[1]=ce>>>8&255,x.check=a(x.check,q,2,0)),le=ce=0,x.mode=3;case 3:for(;le<32;){if(Ee===0)break e;Ee--,ce+=ue[X++]<<le,le+=8}x.head&&(x.head.time=ce),512&x.flags&&(q[0]=255&ce,q[1]=ce>>>8&255,q[2]=ce>>>16&255,q[3]=ce>>>24&255,x.check=a(x.check,q,4,0)),le=ce=0,x.mode=4;case 4:for(;le<16;){if(Ee===0)break e;Ee--,ce+=ue[X++]<<le,le+=8}x.head&&(x.head.xflags=255&ce,x.head.os=ce>>8),512&x.flags&&(q[0]=255&ce,q[1]=ce>>>8&255,x.check=a(x.check,q,2,0)),le=ce=0,x.mode=5;case 5:if(1024&x.flags){for(;le<16;){if(Ee===0)break e;Ee--,ce+=ue[X++]<<le,le+=8}x.length=ce,x.head&&(x.head.extra_len=ce),512&x.flags&&(q[0]=255&ce,q[1]=ce>>>8&255,x.check=a(x.check,q,2,0)),le=ce=0}else x.head&&(x.head.extra=null);x.mode=6;case 6:if(1024&x.flags&&(Ee<(Z=x.length)&&(Z=Ee),Z&&(x.head&&(v=x.head.extra_len-x.length,x.head.extra||(x.head.extra=new Array(x.head.extra_len)),s.arraySet(x.head.extra,ue,X,Z,v)),512&x.flags&&(x.check=a(x.check,ue,Z,X)),Ee-=Z,X+=Z,x.length-=Z),x.length))break e;x.length=0,x.mode=7;case 7:if(2048&x.flags){if(Ee===0)break e;for(Z=0;v=ue[X+Z++],x.head&&v&&x.length<65536&&(x.head.name+=String.fromCharCode(v)),v&&Z<Ee;);if(512&x.flags&&(x.check=a(x.check,ue,Z,X)),Ee-=Z,X+=Z,v)break e}else x.head&&(x.head.name=null);x.length=0,x.mode=8;case 8:if(4096&x.flags){if(Ee===0)break e;for(Z=0;v=ue[X+Z++],x.head&&v&&x.length<65536&&(x.head.comment+=String.fromCharCode(v)),v&&Z<Ee;);if(512&x.flags&&(x.check=a(x.check,ue,Z,X)),Ee-=Z,X+=Z,v)break e}else x.head&&(x.head.comment=null);x.mode=9;case 9:if(512&x.flags){for(;le<16;){if(Ee===0)break e;Ee--,ce+=ue[X++]<<le,le+=8}if(ce!==(65535&x.check)){C.msg="header crc mismatch",x.mode=30;break}le=ce=0}x.head&&(x.head.hcrc=x.flags>>9&1,x.head.done=!0),C.adler=x.check=0,x.mode=12;break;case 10:for(;le<32;){if(Ee===0)break e;Ee--,ce+=ue[X++]<<le,le+=8}C.adler=x.check=O(ce),le=ce=0,x.mode=11;case 11:if(x.havedict===0)return C.next_out=xe,C.avail_out=ve,C.next_in=X,C.avail_in=Ee,x.hold=ce,x.bits=le,2;C.adler=x.check=1,x.mode=12;case 12:if(P===5||P===6)break e;case 13:if(x.last){ce>>>=7&le,le-=7&le,x.mode=27;break}for(;le<3;){if(Ee===0)break e;Ee--,ce+=ue[X++]<<le,le+=8}switch(x.last=1&ce,le-=1,3&(ce>>>=1)){case 0:x.mode=14;break;case 1:if(F(x),x.mode=20,P!==6)break;ce>>>=2,le-=2;break e;case 2:x.mode=17;break;case 3:C.msg="invalid block type",x.mode=30}ce>>>=2,le-=2;break;case 14:for(ce>>>=7&le,le-=7&le;le<32;){if(Ee===0)break e;Ee--,ce+=ue[X++]<<le,le+=8}if((65535&ce)!=(ce>>>16^65535)){C.msg="invalid stored block lengths",x.mode=30;break}if(x.length=65535&ce,le=ce=0,x.mode=15,P===6)break e;case 15:x.mode=16;case 16:if(Z=x.length){if(Ee<Z&&(Z=Ee),ve<Z&&(Z=ve),Z===0)break e;s.arraySet(Y,ue,X,Z,xe),Ee-=Z,X+=Z,ve-=Z,xe+=Z,x.length-=Z;break}x.mode=12;break;case 17:for(;le<14;){if(Ee===0)break e;Ee--,ce+=ue[X++]<<le,le+=8}if(x.nlen=257+(31&ce),ce>>>=5,le-=5,x.ndist=1+(31&ce),ce>>>=5,le-=5,x.ncode=4+(15&ce),ce>>>=4,le-=4,286<x.nlen||30<x.ndist){C.msg="too many length or distance symbols",x.mode=30;break}x.have=0,x.mode=18;case 18:for(;x.have<x.ncode;){for(;le<3;){if(Ee===0)break e;Ee--,ce+=ue[X++]<<le,le+=8}x.lens[ae[x.have++]]=7&ce,ce>>>=3,le-=3}for(;x.have<19;)x.lens[ae[x.have++]]=0;if(x.lencode=x.lendyn,x.lenbits=7,G={bits:x.lenbits},te=c(0,x.lens,0,19,x.lencode,0,x.work,G),x.lenbits=G.bits,te){C.msg="invalid code lengths set",x.mode=30;break}x.have=0,x.mode=19;case 19:for(;x.have<x.nlen+x.ndist;){for(;Re=($=x.lencode[ce&(1<<x.lenbits)-1])>>>16&255,$e=65535&$,!((_e=$>>>24)<=le);){if(Ee===0)break e;Ee--,ce+=ue[X++]<<le,le+=8}if($e<16)ce>>>=_e,le-=_e,x.lens[x.have++]=$e;else{if($e===16){for(M=_e+2;le<M;){if(Ee===0)break e;Ee--,ce+=ue[X++]<<le,le+=8}if(ce>>>=_e,le-=_e,x.have===0){C.msg="invalid bit length repeat",x.mode=30;break}v=x.lens[x.have-1],Z=3+(3&ce),ce>>>=2,le-=2}else if($e===17){for(M=_e+3;le<M;){if(Ee===0)break e;Ee--,ce+=ue[X++]<<le,le+=8}le-=_e,v=0,Z=3+(7&(ce>>>=_e)),ce>>>=3,le-=3}else{for(M=_e+7;le<M;){if(Ee===0)break e;Ee--,ce+=ue[X++]<<le,le+=8}le-=_e,v=0,Z=11+(127&(ce>>>=_e)),ce>>>=7,le-=7}if(x.have+Z>x.nlen+x.ndist){C.msg="invalid bit length repeat",x.mode=30;break}for(;Z--;)x.lens[x.have++]=v}}if(x.mode===30)break;if(x.lens[256]===0){C.msg="invalid code -- missing end-of-block",x.mode=30;break}if(x.lenbits=9,G={bits:x.lenbits},te=c(h,x.lens,0,x.nlen,x.lencode,0,x.work,G),x.lenbits=G.bits,te){C.msg="invalid literal/lengths set",x.mode=30;break}if(x.distbits=6,x.distcode=x.distdyn,G={bits:x.distbits},te=c(p,x.lens,x.nlen,x.ndist,x.distcode,0,x.work,G),x.distbits=G.bits,te){C.msg="invalid distances set",x.mode=30;break}if(x.mode=20,P===6)break e;case 20:x.mode=21;case 21:if(6<=Ee&&258<=ve){C.next_out=xe,C.avail_out=ve,C.next_in=X,C.avail_in=Ee,x.hold=ce,x.bits=le,l(C,De),xe=C.next_out,Y=C.output,ve=C.avail_out,X=C.next_in,ue=C.input,Ee=C.avail_in,ce=x.hold,le=x.bits,x.mode===12&&(x.back=-1);break}for(x.back=0;Re=($=x.lencode[ce&(1<<x.lenbits)-1])>>>16&255,$e=65535&$,!((_e=$>>>24)<=le);){if(Ee===0)break e;Ee--,ce+=ue[X++]<<le,le+=8}if(Re&&(240&Re)==0){for(Ne=_e,Q=Re,H=$e;Re=($=x.lencode[H+((ce&(1<<Ne+Q)-1)>>Ne)])>>>16&255,$e=65535&$,!(Ne+(_e=$>>>24)<=le);){if(Ee===0)break e;Ee--,ce+=ue[X++]<<le,le+=8}ce>>>=Ne,le-=Ne,x.back+=Ne}if(ce>>>=_e,le-=_e,x.back+=_e,x.length=$e,Re===0){x.mode=26;break}if(32&Re){x.back=-1,x.mode=12;break}if(64&Re){C.msg="invalid literal/length code",x.mode=30;break}x.extra=15&Re,x.mode=22;case 22:if(x.extra){for(M=x.extra;le<M;){if(Ee===0)break e;Ee--,ce+=ue[X++]<<le,le+=8}x.length+=ce&(1<<x.extra)-1,ce>>>=x.extra,le-=x.extra,x.back+=x.extra}x.was=x.length,x.mode=23;case 23:for(;Re=($=x.distcode[ce&(1<<x.distbits)-1])>>>16&255,$e=65535&$,!((_e=$>>>24)<=le);){if(Ee===0)break e;Ee--,ce+=ue[X++]<<le,le+=8}if((240&Re)==0){for(Ne=_e,Q=Re,H=$e;Re=($=x.distcode[H+((ce&(1<<Ne+Q)-1)>>Ne)])>>>16&255,$e=65535&$,!(Ne+(_e=$>>>24)<=le);){if(Ee===0)break e;Ee--,ce+=ue[X++]<<le,le+=8}ce>>>=Ne,le-=Ne,x.back+=Ne}if(ce>>>=_e,le-=_e,x.back+=_e,64&Re){C.msg="invalid distance code",x.mode=30;break}x.offset=$e,x.extra=15&Re,x.mode=24;case 24:if(x.extra){for(M=x.extra;le<M;){if(Ee===0)break e;Ee--,ce+=ue[X++]<<le,le+=8}x.offset+=ce&(1<<x.extra)-1,ce>>>=x.extra,le-=x.extra,x.back+=x.extra}if(x.offset>x.dmax){C.msg="invalid distance too far back",x.mode=30;break}x.mode=25;case 25:if(ve===0)break e;if(Z=De-ve,x.offset>Z){if((Z=x.offset-Z)>x.whave&&x.sane){C.msg="invalid distance too far back",x.mode=30;break}ze=Z>x.wnext?(Z-=x.wnext,x.wsize-Z):x.wnext-Z,Z>x.length&&(Z=x.length),ke=x.window}else ke=Y,ze=xe-x.offset,Z=x.length;for(ve<Z&&(Z=ve),ve-=Z,x.length-=Z;Y[xe++]=ke[ze++],--Z;);x.length===0&&(x.mode=21);break;case 26:if(ve===0)break e;Y[xe++]=x.length,ve--,x.mode=21;break;case 27:if(x.wrap){for(;le<32;){if(Ee===0)break e;Ee--,ce|=ue[X++]<<le,le+=8}if(De-=ve,C.total_out+=De,x.total+=De,De&&(C.adler=x.check=x.flags?a(x.check,Y,De,xe-De):o(x.check,Y,De,xe-De)),De=ve,(x.flags?ce:O(ce))!==x.check){C.msg="incorrect data check",x.mode=30;break}le=ce=0}x.mode=28;case 28:if(x.wrap&&x.flags){for(;le<32;){if(Ee===0)break e;Ee--,ce+=ue[X++]<<le,le+=8}if(ce!==(4294967295&x.total)){C.msg="incorrect length check",x.mode=30;break}le=ce=0}x.mode=29;case 29:te=1;break e;case 30:te=-3;break e;case 31:return-4;case 32:default:return g}return C.next_out=xe,C.avail_out=ve,C.next_in=X,C.avail_in=Ee,x.hold=ce,x.bits=le,(x.wsize||De!==C.avail_out&&x.mode<30&&(x.mode<27||P!==4))&&z(C,C.output,C.next_out,De-C.avail_out)?(x.mode=31,-4):(ye-=C.avail_in,De-=C.avail_out,C.total_in+=ye,C.total_out+=De,x.total+=De,x.wrap&&De&&(C.adler=x.check=x.flags?a(x.check,Y,De,C.next_out-De):o(x.check,Y,De,C.next_out-De)),C.data_type=x.bits+(x.last?64:0)+(x.mode===12?128:0)+(x.mode===20||x.mode===15?256:0),(ye==0&&De===0||P===4)&&te===m&&(te=-5),te)},i.inflateEnd=function(C){if(!C||!C.state)return g;var P=C.state;return P.window&&(P.window=null),C.state=null,m},i.inflateGetHeader=function(C,P){var x;return C&&C.state?(2&(x=C.state).wrap)==0?g:((x.head=P).done=!1,m):g},i.inflateSetDictionary=function(C,P){var x,ue=P.length;return C&&C.state?(x=C.state).wrap!==0&&x.mode!==11?g:x.mode===11&&o(1,P,ue,0)!==x.check?-3:z(C,P,ue,ue)?(x.mode=31,-4):(x.havedict=1,m):g},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,r,i){var s=t("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],c=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(h,p,m,g,b,E,S,O){var U,D,V,K,oe,L,R,N,F,z=O.bits,C=0,P=0,x=0,ue=0,Y=0,X=0,xe=0,Ee=0,ve=0,ce=0,le=null,ye=0,De=new s.Buf16(16),Z=new s.Buf16(16),ze=null,ke=0;for(C=0;C<=15;C++)De[C]=0;for(P=0;P<g;P++)De[p[m+P]]++;for(Y=z,ue=15;1<=ue&&De[ue]===0;ue--);if(ue<Y&&(Y=ue),ue===0)return b[E++]=20971520,b[E++]=20971520,O.bits=1,0;for(x=1;x<ue&&De[x]===0;x++);for(Y<x&&(Y=x),C=Ee=1;C<=15;C++)if(Ee<<=1,(Ee-=De[C])<0)return-1;if(0<Ee&&(h===0||ue!==1))return-1;for(Z[1]=0,C=1;C<15;C++)Z[C+1]=Z[C]+De[C];for(P=0;P<g;P++)p[m+P]!==0&&(S[Z[p[m+P]]++]=P);if(L=h===0?(le=ze=S,19):h===1?(le=o,ye-=257,ze=a,ke-=257,256):(le=l,ze=c,-1),C=x,oe=E,xe=P=ce=0,V=-1,K=(ve=1<<(X=Y))-1,h===1&&852<ve||h===2&&592<ve)return 1;for(;;){for(R=C-xe,F=S[P]<L?(N=0,S[P]):S[P]>L?(N=ze[ke+S[P]],le[ye+S[P]]):(N=96,0),U=1<<C-xe,x=D=1<<X;b[oe+(ce>>xe)+(D-=U)]=R<<24|N<<16|F|0,D!==0;);for(U=1<<C-1;ce&U;)U>>=1;if(U!==0?(ce&=U-1,ce+=U):ce=0,P++,--De[C]==0){if(C===ue)break;C=p[m+S[P]]}if(Y<C&&(ce&K)!==V){for(xe===0&&(xe=Y),oe+=x,Ee=1<<(X=C-xe);X+xe<ue&&!((Ee-=De[X+xe])<=0);)X++,Ee<<=1;if(ve+=1<<X,h===1&&852<ve||h===2&&592<ve)return 1;b[V=ce&K]=Y<<24|X<<16|oe-E|0}}return ce!==0&&(b[oe+ce]=C-xe<<24|64<<16|0),O.bits=Y,0}},{"../utils/common":41}],51:[function(t,r,i){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,r,i){var s=t("../utils/common"),o=0,a=1;function l($){for(var q=$.length;0<=--q;)$[q]=0}var c=0,h=29,p=256,m=p+1+h,g=30,b=19,E=2*m+1,S=15,O=16,U=7,D=256,V=16,K=17,oe=18,L=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],R=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],N=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],F=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],z=new Array(2*(m+2));l(z);var C=new Array(2*g);l(C);var P=new Array(512);l(P);var x=new Array(256);l(x);var ue=new Array(h);l(ue);var Y,X,xe,Ee=new Array(g);function ve($,q,ae,ie,J){this.static_tree=$,this.extra_bits=q,this.extra_base=ae,this.elems=ie,this.max_length=J,this.has_stree=$&&$.length}function ce($,q){this.dyn_tree=$,this.max_code=0,this.stat_desc=q}function le($){return $<256?P[$]:P[256+($>>>7)]}function ye($,q){$.pending_buf[$.pending++]=255&q,$.pending_buf[$.pending++]=q>>>8&255}function De($,q,ae){$.bi_valid>O-ae?($.bi_buf|=q<<$.bi_valid&65535,ye($,$.bi_buf),$.bi_buf=q>>O-$.bi_valid,$.bi_valid+=ae-O):($.bi_buf|=q<<$.bi_valid&65535,$.bi_valid+=ae)}function Z($,q,ae){De($,ae[2*q],ae[2*q+1])}function ze($,q){for(var ae=0;ae|=1&$,$>>>=1,ae<<=1,0<--q;);return ae>>>1}function ke($,q,ae){var ie,J,de=new Array(S+1),ge=0;for(ie=1;ie<=S;ie++)de[ie]=ge=ge+ae[ie-1]<<1;for(J=0;J<=q;J++){var pe=$[2*J+1];pe!==0&&($[2*J]=ze(de[pe]++,pe))}}function _e($){var q;for(q=0;q<m;q++)$.dyn_ltree[2*q]=0;for(q=0;q<g;q++)$.dyn_dtree[2*q]=0;for(q=0;q<b;q++)$.bl_tree[2*q]=0;$.dyn_ltree[2*D]=1,$.opt_len=$.static_len=0,$.last_lit=$.matches=0}function Re($){8<$.bi_valid?ye($,$.bi_buf):0<$.bi_valid&&($.pending_buf[$.pending++]=$.bi_buf),$.bi_buf=0,$.bi_valid=0}function $e($,q,ae,ie){var J=2*q,de=2*ae;return $[J]<$[de]||$[J]===$[de]&&ie[q]<=ie[ae]}function Ne($,q,ae){for(var ie=$.heap[ae],J=ae<<1;J<=$.heap_len&&(J<$.heap_len&&$e(q,$.heap[J+1],$.heap[J],$.depth)&&J++,!$e(q,ie,$.heap[J],$.depth));)$.heap[ae]=$.heap[J],ae=J,J<<=1;$.heap[ae]=ie}function Q($,q,ae){var ie,J,de,ge,pe=0;if($.last_lit!==0)for(;ie=$.pending_buf[$.d_buf+2*pe]<<8|$.pending_buf[$.d_buf+2*pe+1],J=$.pending_buf[$.l_buf+pe],pe++,ie===0?Z($,J,q):(Z($,(de=x[J])+p+1,q),(ge=L[de])!==0&&De($,J-=ue[de],ge),Z($,de=le(--ie),ae),(ge=R[de])!==0&&De($,ie-=Ee[de],ge)),pe<$.last_lit;);Z($,D,q)}function H($,q){var ae,ie,J,de=q.dyn_tree,ge=q.stat_desc.static_tree,pe=q.stat_desc.has_stree,Ce=q.stat_desc.elems,Ve=-1;for($.heap_len=0,$.heap_max=E,ae=0;ae<Ce;ae++)de[2*ae]!==0?($.heap[++$.heap_len]=Ve=ae,$.depth[ae]=0):de[2*ae+1]=0;for(;$.heap_len<2;)de[2*(J=$.heap[++$.heap_len]=Ve<2?++Ve:0)]=1,$.depth[J]=0,$.opt_len--,pe&&($.static_len-=ge[2*J+1]);for(q.max_code=Ve,ae=$.heap_len>>1;1<=ae;ae--)Ne($,de,ae);for(J=Ce;ae=$.heap[1],$.heap[1]=$.heap[$.heap_len--],Ne($,de,1),ie=$.heap[1],$.heap[--$.heap_max]=ae,$.heap[--$.heap_max]=ie,de[2*J]=de[2*ae]+de[2*ie],$.depth[J]=($.depth[ae]>=$.depth[ie]?$.depth[ae]:$.depth[ie])+1,de[2*ae+1]=de[2*ie+1]=J,$.heap[1]=J++,Ne($,de,1),2<=$.heap_len;);$.heap[--$.heap_max]=$.heap[1],function(Ue,ct){var at,bt,gt,pt,zt,Et,Nt=ct.dyn_tree,On=ct.max_code,Je=ct.stat_desc.static_tree,vr=ct.stat_desc.has_stree,Bn=ct.stat_desc.extra_bits,zn=ct.stat_desc.extra_base,nn=ct.stat_desc.max_length,yr=0;for(pt=0;pt<=S;pt++)Ue.bl_count[pt]=0;for(Nt[2*Ue.heap[Ue.heap_max]+1]=0,at=Ue.heap_max+1;at<E;at++)nn<(pt=Nt[2*Nt[2*(bt=Ue.heap[at])+1]+1]+1)&&(pt=nn,yr++),Nt[2*bt+1]=pt,On<bt||(Ue.bl_count[pt]++,zt=0,zn<=bt&&(zt=Bn[bt-zn]),Et=Nt[2*bt],Ue.opt_len+=Et*(pt+zt),vr&&(Ue.static_len+=Et*(Je[2*bt+1]+zt)));if(yr!==0){do{for(pt=nn-1;Ue.bl_count[pt]===0;)pt--;Ue.bl_count[pt]--,Ue.bl_count[pt+1]+=2,Ue.bl_count[nn]--,yr-=2}while(0<yr);for(pt=nn;pt!==0;pt--)for(bt=Ue.bl_count[pt];bt!==0;)On<(gt=Ue.heap[--at])||(Nt[2*gt+1]!==pt&&(Ue.opt_len+=(pt-Nt[2*gt+1])*Nt[2*gt],Nt[2*gt+1]=pt),bt--)}}($,q),ke(de,Ve,$.bl_count)}function v($,q,ae){var ie,J,de=-1,ge=q[1],pe=0,Ce=7,Ve=4;for(ge===0&&(Ce=138,Ve=3),q[2*(ae+1)+1]=65535,ie=0;ie<=ae;ie++)J=ge,ge=q[2*(ie+1)+1],++pe<Ce&&J===ge||(pe<Ve?$.bl_tree[2*J]+=pe:J!==0?(J!==de&&$.bl_tree[2*J]++,$.bl_tree[2*V]++):pe<=10?$.bl_tree[2*K]++:$.bl_tree[2*oe]++,de=J,Ve=(pe=0)===ge?(Ce=138,3):J===ge?(Ce=6,3):(Ce=7,4))}function te($,q,ae){var ie,J,de=-1,ge=q[1],pe=0,Ce=7,Ve=4;for(ge===0&&(Ce=138,Ve=3),ie=0;ie<=ae;ie++)if(J=ge,ge=q[2*(ie+1)+1],!(++pe<Ce&&J===ge)){if(pe<Ve)for(;Z($,J,$.bl_tree),--pe!=0;);else J!==0?(J!==de&&(Z($,J,$.bl_tree),pe--),Z($,V,$.bl_tree),De($,pe-3,2)):pe<=10?(Z($,K,$.bl_tree),De($,pe-3,3)):(Z($,oe,$.bl_tree),De($,pe-11,7));de=J,Ve=(pe=0)===ge?(Ce=138,3):J===ge?(Ce=6,3):(Ce=7,4)}}l(Ee);var G=!1;function M($,q,ae,ie){De($,(c<<1)+(ie?1:0),3),function(J,de,ge,pe){Re(J),ye(J,ge),ye(J,~ge),s.arraySet(J.pending_buf,J.window,de,ge,J.pending),J.pending+=ge}($,q,ae)}i._tr_init=function($){G||(function(){var q,ae,ie,J,de,ge=new Array(S+1);for(J=ie=0;J<h-1;J++)for(ue[J]=ie,q=0;q<1<<L[J];q++)x[ie++]=J;for(x[ie-1]=J,J=de=0;J<16;J++)for(Ee[J]=de,q=0;q<1<<R[J];q++)P[de++]=J;for(de>>=7;J<g;J++)for(Ee[J]=de<<7,q=0;q<1<<R[J]-7;q++)P[256+de++]=J;for(ae=0;ae<=S;ae++)ge[ae]=0;for(q=0;q<=143;)z[2*q+1]=8,q++,ge[8]++;for(;q<=255;)z[2*q+1]=9,q++,ge[9]++;for(;q<=279;)z[2*q+1]=7,q++,ge[7]++;for(;q<=287;)z[2*q+1]=8,q++,ge[8]++;for(ke(z,m+1,ge),q=0;q<g;q++)C[2*q+1]=5,C[2*q]=ze(q,5);Y=new ve(z,L,p+1,m,S),X=new ve(C,R,0,g,S),xe=new ve(new Array(0),N,0,b,U)}(),G=!0),$.l_desc=new ce($.dyn_ltree,Y),$.d_desc=new ce($.dyn_dtree,X),$.bl_desc=new ce($.bl_tree,xe),$.bi_buf=0,$.bi_valid=0,_e($)},i._tr_stored_block=M,i._tr_flush_block=function($,q,ae,ie){var J,de,ge=0;0<$.level?($.strm.data_type===2&&($.strm.data_type=function(pe){var Ce,Ve=4093624447;for(Ce=0;Ce<=31;Ce++,Ve>>>=1)if(1&Ve&&pe.dyn_ltree[2*Ce]!==0)return o;if(pe.dyn_ltree[18]!==0||pe.dyn_ltree[20]!==0||pe.dyn_ltree[26]!==0)return a;for(Ce=32;Ce<p;Ce++)if(pe.dyn_ltree[2*Ce]!==0)return a;return o}($)),H($,$.l_desc),H($,$.d_desc),ge=function(pe){var Ce;for(v(pe,pe.dyn_ltree,pe.l_desc.max_code),v(pe,pe.dyn_dtree,pe.d_desc.max_code),H(pe,pe.bl_desc),Ce=b-1;3<=Ce&&pe.bl_tree[2*F[Ce]+1]===0;Ce--);return pe.opt_len+=3*(Ce+1)+5+5+4,Ce}($),J=$.opt_len+3+7>>>3,(de=$.static_len+3+7>>>3)<=J&&(J=de)):J=de=ae+5,ae+4<=J&&q!==-1?M($,q,ae,ie):$.strategy===4||de===J?(De($,2+(ie?1:0),3),Q($,z,C)):(De($,4+(ie?1:0),3),function(pe,Ce,Ve,Ue){var ct;for(De(pe,Ce-257,5),De(pe,Ve-1,5),De(pe,Ue-4,4),ct=0;ct<Ue;ct++)De(pe,pe.bl_tree[2*F[ct]+1],3);te(pe,pe.dyn_ltree,Ce-1),te(pe,pe.dyn_dtree,Ve-1)}($,$.l_desc.max_code+1,$.d_desc.max_code+1,ge+1),Q($,$.dyn_ltree,$.dyn_dtree)),_e($),ie&&Re($)},i._tr_tally=function($,q,ae){return $.pending_buf[$.d_buf+2*$.last_lit]=q>>>8&255,$.pending_buf[$.d_buf+2*$.last_lit+1]=255&q,$.pending_buf[$.l_buf+$.last_lit]=255&ae,$.last_lit++,q===0?$.dyn_ltree[2*ae]++:($.matches++,q--,$.dyn_ltree[2*(x[ae]+p+1)]++,$.dyn_dtree[2*le(q)]++),$.last_lit===$.lit_bufsize-1},i._tr_align=function($){De($,2,3),Z($,D,z),function(q){q.bi_valid===16?(ye(q,q.bi_buf),q.bi_buf=0,q.bi_valid=0):8<=q.bi_valid&&(q.pending_buf[q.pending++]=255&q.bi_buf,q.bi_buf>>=8,q.bi_valid-=8)}($)}},{"../utils/common":41}],53:[function(t,r,i){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,r,i){(function(s){(function(o,a){if(!o.setImmediate){var l,c,h,p,m=1,g={},b=!1,E=o.document,S=Object.getPrototypeOf&&Object.getPrototypeOf(o);S=S&&S.setTimeout?S:o,l={}.toString.call(o.process)==="[object process]"?function(V){process.nextTick(function(){U(V)})}:function(){if(o.postMessage&&!o.importScripts){var V=!0,K=o.onmessage;return o.onmessage=function(){V=!1},o.postMessage("","*"),o.onmessage=K,V}}()?(p="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",D,!1):o.attachEvent("onmessage",D),function(V){o.postMessage(p+V,"*")}):o.MessageChannel?((h=new MessageChannel).port1.onmessage=function(V){U(V.data)},function(V){h.port2.postMessage(V)}):E&&"onreadystatechange"in E.createElement("script")?(c=E.documentElement,function(V){var K=E.createElement("script");K.onreadystatechange=function(){U(V),K.onreadystatechange=null,c.removeChild(K),K=null},c.appendChild(K)}):function(V){setTimeout(U,0,V)},S.setImmediate=function(V){typeof V!="function"&&(V=new Function(""+V));for(var K=new Array(arguments.length-1),oe=0;oe<K.length;oe++)K[oe]=arguments[oe+1];var L={callback:V,args:K};return g[m]=L,l(m),m++},S.clearImmediate=O}function O(V){delete g[V]}function U(V){if(b)setTimeout(U,0,V);else{var K=g[V];if(K){b=!0;try{(function(oe){var L=oe.callback,R=oe.args;switch(R.length){case 0:L();break;case 1:L(R[0]);break;case 2:L(R[0],R[1]);break;case 3:L(R[0],R[1],R[2]);break;default:L.apply(a,R)}})(K)}finally{O(V),b=!1}}}}function D(V){V.source===o&&typeof V.data=="string"&&V.data.indexOf(p)===0&&U(+V.data.slice(p.length))}})(typeof self>"u"?s===void 0?this:s:self)}).call(this,typeof uu<"u"?uu:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})}(Od)),Od.exports}var tD=eD();const nD=sd(tD);var Nd={exports:{}};const rD={},iD=Object.freeze(Object.defineProperty({__proto__:null,default:rD},Symbol.toStringTag,{value:"Module"})),Vu=qS(iD);var t_;function sD(){return t_||(t_=1,function(n,e){var t=void 0,r=function(i){return t||(t=new Promise(function(s,o){var a=typeof i<"u"?i:{},l=a.onAbort;a.onAbort=function(d){o(new Error(d)),l&&l(d)},a.postRun=a.postRun||[],a.postRun.push(function(){s(a)}),n=void 0;var c;c||(c=typeof a<"u"?a:{}),c.onRuntimeInitialized=function(){function d(ee,we){switch(typeof we){case"boolean":T(ee,we?1:0);break;case"number":Xo(ee,we);break;case"string":u(ee,we,-1,-1);break;case"object":if(we===null)ii(ee);else if(we.length!=null){var Le=qi(we,hs);y(ee,Le,we.length,-1),ir(Le)}else j(ee,"Wrong API use : tried to return a value of an unknown type ("+we+").",-1);break;default:ii(ee)}}function _(ee,we){for(var Le=[],Fe=0;Fe<ee;Fe+=1){var Qe=G(we+4*Fe,"i32"),lt=Qo(Qe);if(lt===1||lt===2)Qe=Yo(Qe);else if(lt===3)Qe=Rr(Qe);else if(lt===4){lt=Qe,Qe=oo(lt),lt=jn(lt);for(var An=new Uint8Array(Qe),on=0;on<Qe;on+=1)An[on]=F[lt+on];Qe=An}else Qe=null;Le.push(Qe)}return Le}function k(ee,we){this.La=ee,this.db=we,this.Ja=1,this.fb=[]}function B(ee,we){if(this.db=we,we=ct(ee)+1,this.Ya=ps(we),this.Ya===null)throw Error("Unable to allocate memory for the SQL string");at(ee,z,this.Ya,we),this.eb=this.Ya,this.Ua=this.ib=null}function re(ee){if(this.filename="dbfile_"+(4294967295*Math.random()>>>0),ee!=null){var we=this.filename,Le="/",Fe=we;if(Le&&(Le=typeof Le=="string"?Le:nr(Le),Fe=we?J(Le+"/"+we):Le),we=vr(!0,!0),Fe=Ge(Fe,(we!==void 0?we:438)&4095|32768,0),ee){if(typeof ee=="string"){Le=Array(ee.length);for(var Qe=0,lt=ee.length;Qe<lt;++Qe)Le[Qe]=ee.charCodeAt(Qe);ee=Le}Un(Fe,we|146),Le=rr(Fe,577),eo(Le,ee,0,ee.length,0),pi(Le),Un(Fe,we)}}this.handleError(Xe(this.filename,fe)),this.db=G(fe,"i32"),me(this.db),this.Za={},this.Na={}}var fe=sr(4),Ie=c.cwrap,Xe=Ie("sqlite3_open","number",["string","number"]),wt=Ie("sqlite3_close_v2","number",["number"]),it=Ie("sqlite3_exec","number",["number","string","number","number","number"]),hn=Ie("sqlite3_changes","number",["number"]),Ut=Ie("sqlite3_prepare_v2","number",["number","string","number","number","number"]),zr=Ie("sqlite3_sql","string",["number"]),Na=Ie("sqlite3_normalized_sql","string",["number"]),ni=Ie("sqlite3_prepare_v2","number",["number","number","number","number","number"]),ro=Ie("sqlite3_bind_text","number",["number","number","number","number","number"]),ms=Ie("sqlite3_bind_blob","number",["number","number","number","number","number"]),gs=Ie("sqlite3_bind_double","number",["number","number","number"]),jo=Ie("sqlite3_bind_int","number",["number","number","number"]),_s=Ie("sqlite3_bind_parameter_index","number",["number","string"]),La=Ie("sqlite3_step","number",["number"]),qo=Ie("sqlite3_errmsg","string",["number"]),Gi=Ie("sqlite3_column_count","number",["number"]),ri=Ie("sqlite3_data_count","number",["number"]),Ho=Ie("sqlite3_column_double","number",["number","number"]),ws=Ie("sqlite3_column_text","string",["number","number"]),vs=Ie("sqlite3_column_blob","number",["number","number"]),Wo=Ie("sqlite3_column_bytes","number",["number","number"]),or=Ie("sqlite3_column_type","number",["number","number"]),Go=Ie("sqlite3_column_name","string",["number","number"]),io=Ie("sqlite3_reset","number",["number"]),ar=Ie("sqlite3_clear_bindings","number",["number"]),Ko=Ie("sqlite3_finalize","number",["number"]),so=Ie("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),Qo=Ie("sqlite3_value_type","number",["number"]),oo=Ie("sqlite3_value_bytes","number",["number"]),Rr=Ie("sqlite3_value_text","string",["number"]),jn=Ie("sqlite3_value_blob","number",["number"]),Yo=Ie("sqlite3_value_double","number",["number"]),Xo=Ie("sqlite3_result_double","",["number","number"]),ii=Ie("sqlite3_result_null","",["number"]),u=Ie("sqlite3_result_text","",["number","string","number","number"]),y=Ie("sqlite3_result_blob","",["number","number","number","number"]),T=Ie("sqlite3_result_int","",["number","number"]),j=Ie("sqlite3_result_error","",["number","string","number"]),he=Ie("sqlite3_aggregate_context","number",["number","number"]),me=Ie("RegisterExtensionFunctions","number",["number"]);k.prototype.bind=function(ee){if(!this.La)throw"Statement closed";return this.reset(),Array.isArray(ee)?this.wb(ee):ee!=null&&typeof ee=="object"?this.xb(ee):!0},k.prototype.step=function(){if(!this.La)throw"Statement closed";this.Ja=1;var ee=La(this.La);switch(ee){case 100:return!0;case 101:return!1;default:throw this.db.handleError(ee)}},k.prototype.rb=function(ee){return ee==null&&(ee=this.Ja,this.Ja+=1),Ho(this.La,ee)},k.prototype.Ab=function(ee){if(ee==null&&(ee=this.Ja,this.Ja+=1),ee=ws(this.La,ee),typeof BigInt!="function")throw Error("BigInt is not supported");return BigInt(ee)},k.prototype.Bb=function(ee){return ee==null&&(ee=this.Ja,this.Ja+=1),ws(this.La,ee)},k.prototype.getBlob=function(ee){ee==null&&(ee=this.Ja,this.Ja+=1);var we=Wo(this.La,ee);ee=vs(this.La,ee);for(var Le=new Uint8Array(we),Fe=0;Fe<we;Fe+=1)Le[Fe]=F[ee+Fe];return Le},k.prototype.get=function(ee,we){we=we||{},ee!=null&&this.bind(ee)&&this.step(),ee=[];for(var Le=ri(this.La),Fe=0;Fe<Le;Fe+=1)switch(or(this.La,Fe)){case 1:var Qe=we.useBigInt?this.Ab(Fe):this.rb(Fe);ee.push(Qe);break;case 2:ee.push(this.rb(Fe));break;case 3:ee.push(this.Bb(Fe));break;case 4:ee.push(this.getBlob(Fe));break;default:ee.push(null)}return ee},k.prototype.getColumnNames=function(){for(var ee=[],we=Gi(this.La),Le=0;Le<we;Le+=1)ee.push(Go(this.La,Le));return ee},k.prototype.getAsObject=function(ee,we){ee=this.get(ee,we),we=this.getColumnNames();for(var Le={},Fe=0;Fe<we.length;Fe+=1)Le[we[Fe]]=ee[Fe];return Le},k.prototype.getSQL=function(){return zr(this.La)},k.prototype.getNormalizedSQL=function(){return Na(this.La)},k.prototype.run=function(ee){return ee!=null&&this.bind(ee),this.step(),this.reset()},k.prototype.nb=function(ee,we){we==null&&(we=this.Ja,this.Ja+=1),ee=bt(ee);var Le=qi(ee,hs);this.fb.push(Le),this.db.handleError(ro(this.La,we,Le,ee.length-1,0))},k.prototype.vb=function(ee,we){we==null&&(we=this.Ja,this.Ja+=1);var Le=qi(ee,hs);this.fb.push(Le),this.db.handleError(ms(this.La,we,Le,ee.length,0))},k.prototype.mb=function(ee,we){we==null&&(we=this.Ja,this.Ja+=1),this.db.handleError((ee===(ee|0)?jo:gs)(this.La,we,ee))},k.prototype.yb=function(ee){ee==null&&(ee=this.Ja,this.Ja+=1),ms(this.La,ee,0,0,0)},k.prototype.ob=function(ee,we){switch(we==null&&(we=this.Ja,this.Ja+=1),typeof ee){case"string":this.nb(ee,we);return;case"number":this.mb(ee,we);return;case"bigint":this.nb(ee.toString(),we);return;case"boolean":this.mb(ee+0,we);return;case"object":if(ee===null){this.yb(we);return}if(ee.length!=null){this.vb(ee,we);return}}throw"Wrong API use : tried to bind a value of an unknown type ("+ee+")."},k.prototype.xb=function(ee){var we=this;return Object.keys(ee).forEach(function(Le){var Fe=_s(we.La,Le);Fe!==0&&we.ob(ee[Le],Fe)}),!0},k.prototype.wb=function(ee){for(var we=0;we<ee.length;we+=1)this.ob(ee[we],we+1);return!0},k.prototype.reset=function(){return this.freemem(),ar(this.La)===0&&io(this.La)===0},k.prototype.freemem=function(){for(var ee;(ee=this.fb.pop())!==void 0;)ir(ee)},k.prototype.free=function(){this.freemem();var ee=Ko(this.La)===0;return delete this.db.Za[this.La],this.La=0,ee},B.prototype.next=function(){if(this.Ya===null)return{done:!0};if(this.Ua!==null&&(this.Ua.free(),this.Ua=null),!this.db.db)throw this.gb(),Error("Database closed");var ee=Wi(),we=sr(4);M(fe),M(we);try{this.db.handleError(ni(this.db.db,this.eb,-1,fe,we)),this.eb=G(we,"i32");var Le=G(fe,"i32");return Le===0?(this.gb(),{done:!0}):(this.Ua=new k(Le,this.db),this.db.Za[Le]=this.Ua,{value:this.Ua,done:!1})}catch(Fe){throw this.ib=ae(this.eb),this.gb(),Fe}finally{Sr(ee)}},B.prototype.gb=function(){ir(this.Ya),this.Ya=null},B.prototype.getRemainingSQL=function(){return this.ib!==null?this.ib:ae(this.eb)},typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(B.prototype[Symbol.iterator]=function(){return this}),re.prototype.run=function(ee,we){if(!this.db)throw"Database closed";if(we){ee=this.prepare(ee,we);try{ee.step()}finally{ee.free()}}else this.handleError(it(this.db,ee,0,0,fe));return this},re.prototype.exec=function(ee,we,Le){if(!this.db)throw"Database closed";var Fe=Wi(),Qe=null;try{var lt=ds(ee),An=sr(4);for(ee=[];G(lt,"i8")!==0;){M(fe),M(An),this.handleError(ni(this.db,lt,-1,fe,An));var on=G(fe,"i32");if(lt=G(An,"i32"),on!==0){var yn=null;for(Qe=new k(on,this),we!=null&&Qe.bind(we);Qe.step();)yn===null&&(yn={columns:Qe.getColumnNames(),values:[]},ee.push(yn)),yn.values.push(Qe.get(null,Le));Qe.free()}}return ee}catch(Fn){throw Qe&&Qe.free(),Fn}finally{Sr(Fe)}},re.prototype.each=function(ee,we,Le,Fe,Qe){typeof we=="function"&&(Fe=Le,Le=we,we=void 0),ee=this.prepare(ee,we);try{for(;ee.step();)Le(ee.getAsObject(null,Qe))}finally{ee.free()}if(typeof Fe=="function")return Fe()},re.prototype.prepare=function(ee,we){if(M(fe),this.handleError(Ut(this.db,ee,-1,fe,0)),ee=G(fe,"i32"),ee===0)throw"Nothing to prepare";var Le=new k(ee,this);return we!=null&&Le.bind(we),this.Za[ee]=Le},re.prototype.iterateStatements=function(ee){return new B(ee,this)},re.prototype.export=function(){Object.values(this.Za).forEach(function(we){we.free()}),Object.values(this.Na).forEach(Br),this.Na={},this.handleError(wt(this.db));var ee=to(this.filename);return this.handleError(Xe(this.filename,fe)),this.db=G(fe,"i32"),me(this.db),ee},re.prototype.close=function(){this.db!==null&&(Object.values(this.Za).forEach(function(ee){ee.free()}),Object.values(this.Na).forEach(Br),this.Na={},this.handleError(wt(this.db)),gn("/"+this.filename),this.db=null)},re.prototype.handleError=function(ee){if(ee===0)return null;throw ee=qo(this.db),Error(ee)},re.prototype.getRowsModified=function(){return hn(this.db)},re.prototype.create_function=function(ee,we){Object.prototype.hasOwnProperty.call(this.Na,ee)&&(Br(this.Na[ee]),delete this.Na[ee]);var Le=Hi(function(Fe,Qe,lt){Qe=_(Qe,lt);try{var An=we.apply(null,Qe)}catch(on){j(Fe,on,-1);return}d(Fe,An)},"viii");return this.Na[ee]=Le,this.handleError(so(this.db,ee,we.length,1,0,Le,0,0,0)),this},re.prototype.create_aggregate=function(ee,we){var Le=we.init||function(){return null},Fe=we.finalize||function(yn){return yn},Qe=we.step;if(!Qe)throw"An aggregate function must have a step function in "+ee;var lt={};Object.hasOwnProperty.call(this.Na,ee)&&(Br(this.Na[ee]),delete this.Na[ee]),we=ee+"__finalize",Object.hasOwnProperty.call(this.Na,we)&&(Br(this.Na[we]),delete this.Na[we]);var An=Hi(function(yn,Fn,Zo){var si=he(yn,1);Object.hasOwnProperty.call(lt,si)||(lt[si]=Le()),Fn=_(Fn,Zo),Fn=[lt[si]].concat(Fn);try{lt[si]=Qe.apply(null,Fn)}catch(Jo){delete lt[si],j(yn,Jo,-1)}},"viii"),on=Hi(function(yn){var Fn=he(yn,1);try{var Zo=Fe(lt[Fn])}catch(si){delete lt[Fn],j(yn,si,-1);return}d(yn,Zo),delete lt[Fn]},"vi");return this.Na[ee]=An,this.Na[we]=on,this.handleError(so(this.db,ee,Qe.length-1,1,0,0,An,on,0)),this},c.Database=re};var h=Object.assign({},c),p="./this.program",m=typeof window=="object",g=typeof importScripts=="function",b=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",E="",S,O,U;if(b){var D=Vu,V=Vu;E=g?V.dirname(E)+"/":__dirname+"/",S=(d,_)=>(d=ze(d)?new URL(d):V.normalize(d),D.readFileSync(d,_?void 0:"utf8")),U=d=>(d=S(d,!0),d.buffer||(d=new Uint8Array(d)),d),O=(d,_,k,B=!0)=>{d=ze(d)?new URL(d):V.normalize(d),D.readFile(d,B?void 0:"utf8",(re,fe)=>{re?k(re):_(B?fe.buffer:fe)})},!c.thisProgram&&1<process.argv.length&&(p=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),n.exports=c,c.inspect=()=>"[Emscripten Module object]"}else(m||g)&&(g?E=self.location.href:typeof document<"u"&&document.currentScript&&(E=document.currentScript.src),E=E.indexOf("blob:")!==0?E.substr(0,E.replace(/[?#].*/,"").lastIndexOf("/")+1):"",S=d=>{var _=new XMLHttpRequest;return _.open("GET",d,!1),_.send(null),_.responseText},g&&(U=d=>{var _=new XMLHttpRequest;return _.open("GET",d,!1),_.responseType="arraybuffer",_.send(null),new Uint8Array(_.response)}),O=(d,_,k)=>{var B=new XMLHttpRequest;B.open("GET",d,!0),B.responseType="arraybuffer",B.onload=()=>{B.status==200||B.status==0&&B.response?_(B.response):k()},B.onerror=k,B.send(null)});var K=c.print||console.log.bind(console),oe=c.printErr||console.error.bind(console);Object.assign(c,h),h=null,c.thisProgram&&(p=c.thisProgram);var L;c.wasmBinary&&(L=c.wasmBinary),typeof WebAssembly!="object"&&De("no native wasm support detected");var R,N=!1,F,z,C,P,x,ue,Y;function X(){var d=R.buffer;c.HEAP8=F=new Int8Array(d),c.HEAP16=C=new Int16Array(d),c.HEAPU8=z=new Uint8Array(d),c.HEAPU16=new Uint16Array(d),c.HEAP32=P=new Int32Array(d),c.HEAPU32=x=new Uint32Array(d),c.HEAPF32=ue=new Float32Array(d),c.HEAPF64=Y=new Float64Array(d)}var xe=[],Ee=[],ve=[];function ce(){var d=c.preRun.shift();xe.unshift(d)}var le=0,ye=null;function De(d){var _;throw(_=c.onAbort)==null||_.call(c,d),d="Aborted("+d+")",oe(d),N=!0,new WebAssembly.RuntimeError(d+". Build with -sASSERTIONS for more info.")}var Z=d=>d.startsWith("data:application/octet-stream;base64,"),ze=d=>d.startsWith("file://"),ke;if(ke="sql-wasm.wasm",!Z(ke)){var _e=ke;ke=c.locateFile?c.locateFile(_e,E):E+_e}function Re(d){if(d==ke&&L)return new Uint8Array(L);if(U)return U(d);throw"both async and sync fetching of the wasm failed"}function $e(d){if(!L&&(m||g)){if(typeof fetch=="function"&&!ze(d))return fetch(d,{credentials:"same-origin"}).then(_=>{if(!_.ok)throw"failed to load wasm binary file at '"+d+"'";return _.arrayBuffer()}).catch(()=>Re(d));if(O)return new Promise((_,k)=>{O(d,B=>_(new Uint8Array(B)),k)})}return Promise.resolve().then(()=>Re(d))}function Ne(d,_,k){return $e(d).then(B=>WebAssembly.instantiate(B,_)).then(B=>B).then(k,B=>{oe(`failed to asynchronously prepare wasm: ${B}`),De(B)})}function Q(d,_){var k=ke;L||typeof WebAssembly.instantiateStreaming!="function"||Z(k)||ze(k)||b||typeof fetch!="function"?Ne(k,d,_):fetch(k,{credentials:"same-origin"}).then(B=>WebAssembly.instantiateStreaming(B,d).then(_,function(re){return oe(`wasm streaming compile failed: ${re}`),oe("falling back to ArrayBuffer instantiation"),Ne(k,d,_)}))}var H,v,te=d=>{for(;0<d.length;)d.shift()(c)};function G(d,_="i8"){switch(_.endsWith("*")&&(_="*"),_){case"i1":return F[d>>0];case"i8":return F[d>>0];case"i16":return C[d>>1];case"i32":return P[d>>2];case"i64":De("to do getValue(i64) use WASM_BIGINT");case"float":return ue[d>>2];case"double":return Y[d>>3];case"*":return x[d>>2];default:De(`invalid type for getValue: ${_}`)}}function M(d){var _="i32";switch(_.endsWith("*")&&(_="*"),_){case"i1":F[d>>0]=0;break;case"i8":F[d>>0]=0;break;case"i16":C[d>>1]=0;break;case"i32":P[d>>2]=0;break;case"i64":De("to do setValue(i64) use WASM_BIGINT");case"float":ue[d>>2]=0;break;case"double":Y[d>>3]=0;break;case"*":x[d>>2]=0;break;default:De(`invalid type for setValue: ${_}`)}}var $=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,q=(d,_,k)=>{var B=_+k;for(k=_;d[k]&&!(k>=B);)++k;if(16<k-_&&d.buffer&&$)return $.decode(d.subarray(_,k));for(B="";_<k;){var re=d[_++];if(re&128){var fe=d[_++]&63;if((re&224)==192)B+=String.fromCharCode((re&31)<<6|fe);else{var Ie=d[_++]&63;re=(re&240)==224?(re&15)<<12|fe<<6|Ie:(re&7)<<18|fe<<12|Ie<<6|d[_++]&63,65536>re?B+=String.fromCharCode(re):(re-=65536,B+=String.fromCharCode(55296|re>>10,56320|re&1023))}}else B+=String.fromCharCode(re)}return B},ae=(d,_)=>d?q(z,d,_):"",ie=(d,_)=>{for(var k=0,B=d.length-1;0<=B;B--){var re=d[B];re==="."?d.splice(B,1):re===".."?(d.splice(B,1),k++):k&&(d.splice(B,1),k--)}if(_)for(;k;k--)d.unshift("..");return d},J=d=>{var _=d.charAt(0)==="/",k=d.substr(-1)==="/";return(d=ie(d.split("/").filter(B=>!!B),!_).join("/"))||_||(d="."),d&&k&&(d+="/"),(_?"/":"")+d},de=d=>{var _=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(d).slice(1);return d=_[0],_=_[1],!d&&!_?".":(_&&(_=_.substr(0,_.length-1)),d+_)},ge=d=>{if(d==="/")return"/";d=J(d),d=d.replace(/\/$/,"");var _=d.lastIndexOf("/");return _===-1?d:d.substr(_+1)},pe=()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return k=>crypto.getRandomValues(k);if(b)try{var d=Vu;if(d.randomFillSync)return k=>d.randomFillSync(k);var _=d.randomBytes;return k=>(k.set(_(k.byteLength)),k)}catch{}De("initRandomDevice")},Ce=d=>(Ce=pe())(d);function Ve(){for(var d="",_=!1,k=arguments.length-1;-1<=k&&!_;k--){if(_=0<=k?arguments[k]:"/",typeof _!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!_)return"";d=_+"/"+d,_=_.charAt(0)==="/"}return d=ie(d.split("/").filter(B=>!!B),!_).join("/"),(_?"/":"")+d||"."}var Ue=[],ct=d=>{for(var _=0,k=0;k<d.length;++k){var B=d.charCodeAt(k);127>=B?_++:2047>=B?_+=2:55296<=B&&57343>=B?(_+=4,++k):_+=3}return _},at=(d,_,k,B)=>{if(!(0<B))return 0;var re=k;B=k+B-1;for(var fe=0;fe<d.length;++fe){var Ie=d.charCodeAt(fe);if(55296<=Ie&&57343>=Ie){var Xe=d.charCodeAt(++fe);Ie=65536+((Ie&1023)<<10)|Xe&1023}if(127>=Ie){if(k>=B)break;_[k++]=Ie}else{if(2047>=Ie){if(k+1>=B)break;_[k++]=192|Ie>>6}else{if(65535>=Ie){if(k+2>=B)break;_[k++]=224|Ie>>12}else{if(k+3>=B)break;_[k++]=240|Ie>>18,_[k++]=128|Ie>>12&63}_[k++]=128|Ie>>6&63}_[k++]=128|Ie&63}}return _[k]=0,k-re};function bt(d,_){var k=Array(ct(d)+1);return d=at(d,k,0,k.length),_&&(k.length=d),k}var gt=[];function pt(d,_){gt[d]={input:[],output:[],Xa:_},Vn(d,zt)}var zt={open(d){var _=gt[d.node.rdev];if(!_)throw new Oe(43);d.tty=_,d.seekable=!1},close(d){d.tty.Xa.fsync(d.tty)},fsync(d){d.tty.Xa.fsync(d.tty)},read(d,_,k,B){if(!d.tty||!d.tty.Xa.sb)throw new Oe(60);for(var re=0,fe=0;fe<B;fe++){try{var Ie=d.tty.Xa.sb(d.tty)}catch{throw new Oe(29)}if(Ie===void 0&&re===0)throw new Oe(6);if(Ie==null)break;re++,_[k+fe]=Ie}return re&&(d.node.timestamp=Date.now()),re},write(d,_,k,B){if(!d.tty||!d.tty.Xa.jb)throw new Oe(60);try{for(var re=0;re<B;re++)d.tty.Xa.jb(d.tty,_[k+re])}catch{throw new Oe(29)}return B&&(d.node.timestamp=Date.now()),re}},Et={sb(){e:{if(!Ue.length){var d=null;if(b){var _=Buffer.alloc(256),k=0,B=process.stdin.fd;try{k=D.readSync(B,_)}catch(re){if(re.toString().includes("EOF"))k=0;else throw re}0<k?d=_.slice(0,k).toString("utf-8"):d=null}else typeof window<"u"&&typeof window.prompt=="function"?(d=window.prompt("Input: "),d!==null&&(d+=`
`)):typeof readline=="function"&&(d=readline(),d!==null&&(d+=`
`));if(!d){d=null;break e}Ue=bt(d,!0)}d=Ue.shift()}return d},jb(d,_){_===null||_===10?(K(q(d.output,0)),d.output=[]):_!=0&&d.output.push(_)},fsync(d){d.output&&0<d.output.length&&(K(q(d.output,0)),d.output=[])},Mb(){return{Ib:25856,Kb:5,Hb:191,Jb:35387,Gb:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},Nb(){return 0},Ob(){return[24,80]}},Nt={jb(d,_){_===null||_===10?(oe(q(d.output,0)),d.output=[]):_!=0&&d.output.push(_)},fsync(d){d.output&&0<d.output.length&&(oe(q(d.output,0)),d.output=[])}};function On(d,_){var k=d.Ia?d.Ia.length:0;k>=_||(_=Math.max(_,k*(1048576>k?2:1.125)>>>0),k!=0&&(_=Math.max(_,256)),k=d.Ia,d.Ia=new Uint8Array(_),0<d.Ma&&d.Ia.set(k.subarray(0,d.Ma),0))}var Je={Qa:null,Ra(){return Je.createNode(null,"/",16895,0)},createNode(d,_,k,B){if((k&61440)===24576||(k&61440)===4096)throw new Oe(63);return Je.Qa||(Je.Qa={dir:{node:{Pa:Je.Ga.Pa,Oa:Je.Ga.Oa,lookup:Je.Ga.lookup,ab:Je.Ga.ab,rename:Je.Ga.rename,unlink:Je.Ga.unlink,rmdir:Je.Ga.rmdir,readdir:Je.Ga.readdir,symlink:Je.Ga.symlink},stream:{Ta:Je.Ha.Ta}},file:{node:{Pa:Je.Ga.Pa,Oa:Je.Ga.Oa},stream:{Ta:Je.Ha.Ta,read:Je.Ha.read,write:Je.Ha.write,lb:Je.Ha.lb,bb:Je.Ha.bb,cb:Je.Ha.cb}},link:{node:{Pa:Je.Ga.Pa,Oa:Je.Ga.Oa,readlink:Je.Ga.readlink},stream:{}},pb:{node:{Pa:Je.Ga.Pa,Oa:Je.Ga.Oa},stream:Ur}}),k=Qt(d,_,k,B),Xt(k.mode)?(k.Ga=Je.Qa.dir.node,k.Ha=Je.Qa.dir.stream,k.Ia={}):(k.mode&61440)===32768?(k.Ga=Je.Qa.file.node,k.Ha=Je.Qa.file.stream,k.Ma=0,k.Ia=null):(k.mode&61440)===40960?(k.Ga=Je.Qa.link.node,k.Ha=Je.Qa.link.stream):(k.mode&61440)===8192&&(k.Ga=Je.Qa.pb.node,k.Ha=Je.Qa.pb.stream),k.timestamp=Date.now(),d&&(d.Ia[_]=k,d.timestamp=k.timestamp),k},Lb(d){return d.Ia?d.Ia.subarray?d.Ia.subarray(0,d.Ma):new Uint8Array(d.Ia):new Uint8Array(0)},Ga:{Pa(d){var _={};return _.dev=(d.mode&61440)===8192?d.id:1,_.ino=d.id,_.mode=d.mode,_.nlink=1,_.uid=0,_.gid=0,_.rdev=d.rdev,Xt(d.mode)?_.size=4096:(d.mode&61440)===32768?_.size=d.Ma:(d.mode&61440)===40960?_.size=d.link.length:_.size=0,_.atime=new Date(d.timestamp),_.mtime=new Date(d.timestamp),_.ctime=new Date(d.timestamp),_.zb=4096,_.blocks=Math.ceil(_.size/_.zb),_},Oa(d,_){if(_.mode!==void 0&&(d.mode=_.mode),_.timestamp!==void 0&&(d.timestamp=_.timestamp),_.size!==void 0&&(_=_.size,d.Ma!=_))if(_==0)d.Ia=null,d.Ma=0;else{var k=d.Ia;d.Ia=new Uint8Array(_),k&&d.Ia.set(k.subarray(0,Math.min(_,d.Ma))),d.Ma=_}},lookup(){throw In[44]},ab(d,_,k,B){return Je.createNode(d,_,k,B)},rename(d,_,k){if(Xt(d.mode)){try{var B=rn(_,k)}catch{}if(B)for(var re in B.Ia)throw new Oe(55)}delete d.parent.Ia[d.name],d.parent.timestamp=Date.now(),d.name=k,_.Ia[k]=d,_.timestamp=d.parent.timestamp,d.parent=_},unlink(d,_){delete d.Ia[_],d.timestamp=Date.now()},rmdir(d,_){var k=rn(d,_),B;for(B in k.Ia)throw new Oe(55);delete d.Ia[_],d.timestamp=Date.now()},readdir(d){var _=[".",".."],k;for(k of Object.keys(d.Ia))_.push(k);return _},symlink(d,_,k){return d=Je.createNode(d,_,41471,0),d.link=k,d},readlink(d){if((d.mode&61440)!==40960)throw new Oe(28);return d.link}},Ha:{read(d,_,k,B,re){var fe=d.node.Ia;if(re>=d.node.Ma)return 0;if(d=Math.min(d.node.Ma-re,B),8<d&&fe.subarray)_.set(fe.subarray(re,re+d),k);else for(B=0;B<d;B++)_[k+B]=fe[re+B];return d},write(d,_,k,B,re,fe){if(_.buffer===F.buffer&&(fe=!1),!B)return 0;if(d=d.node,d.timestamp=Date.now(),_.subarray&&(!d.Ia||d.Ia.subarray)){if(fe)return d.Ia=_.subarray(k,k+B),d.Ma=B;if(d.Ma===0&&re===0)return d.Ia=_.slice(k,k+B),d.Ma=B;if(re+B<=d.Ma)return d.Ia.set(_.subarray(k,k+B),re),B}if(On(d,re+B),d.Ia.subarray&&_.subarray)d.Ia.set(_.subarray(k,k+B),re);else for(fe=0;fe<B;fe++)d.Ia[re+fe]=_[k+fe];return d.Ma=Math.max(d.Ma,re+B),B},Ta(d,_,k){if(k===1?_+=d.position:k===2&&(d.node.mode&61440)===32768&&(_+=d.node.Ma),0>_)throw new Oe(28);return _},lb(d,_,k){On(d.node,_+k),d.node.Ma=Math.max(d.node.Ma,_+k)},bb(d,_,k,B,re){if((d.node.mode&61440)!==32768)throw new Oe(43);if(d=d.node.Ia,re&2||d.buffer!==F.buffer){if((0<k||k+_<d.length)&&(d.subarray?d=d.subarray(k,k+_):d=Array.prototype.slice.call(d,k,k+_)),k=!0,_=65536*Math.ceil(_/65536),(re=zo(65536,_))?(z.fill(0,re,re+_),_=re):_=0,!_)throw new Oe(48);F.set(d,_)}else k=!1,_=d.byteOffset;return{Db:_,ub:k}},cb(d,_,k,B){return Je.Ha.write(d,_,0,B,k,!1),0}}},vr=(d,_)=>{var k=0;return d&&(k|=365),_&&(k|=146),k},Bn=null,zn={},nn=[],yr=1,Dt=null,Ct=!0,Oe=null,In={};function Kt(d,_={}){if(d=Ve(d),!d)return{path:"",node:null};if(_=Object.assign({qb:!0,kb:0},_),8<_.kb)throw new Oe(32);d=d.split("/").filter(Ie=>!!Ie);for(var k=Bn,B="/",re=0;re<d.length;re++){var fe=re===d.length-1;if(fe&&_.parent)break;if(k=rn(k,d[re]),B=J(B+"/"+d[re]),k.Va&&(!fe||fe&&_.qb)&&(k=k.Va.root),!fe||_.Sa){for(fe=0;(k.mode&61440)===40960;)if(k=Zt(B),B=Ve(de(B),k),k=Kt(B,{kb:_.kb+1}).node,40<fe++)throw new Oe(32)}}return{path:B,node:k}}function nr(d){for(var _;;){if(d===d.parent)return d=d.Ra.tb,_?d[d.length-1]!=="/"?`${d}/${_}`:d+_:d;_=_?`${d.name}/${_}`:d.name,d=d.parent}}function cn(d,_){for(var k=0,B=0;B<_.length;B++)k=(k<<5)-k+_.charCodeAt(B)|0;return(d+k>>>0)%Dt.length}function dt(d){var _=cn(d.parent.id,d.name);if(Dt[_]===d)Dt[_]=d.Wa;else for(_=Dt[_];_;){if(_.Wa===d){_.Wa=d.Wa;break}_=_.Wa}}function rn(d,_){var k;if(k=(k=Rt(d,"x"))?k:d.Ga.lookup?0:2)throw new Oe(k,d);for(k=Dt[cn(d.id,_)];k;k=k.Wa){var B=k.name;if(k.parent.id===d.id&&B===_)return k}return d.Ga.lookup(d,_)}function Qt(d,_,k,B){return d=new fs(d,_,k,B),_=cn(d.parent.id,d.name),d.Wa=Dt[_],Dt[_]=d}function Xt(d){return(d&61440)===16384}function sn(d){var _=["r","w","rw"][d&3];return d&512&&(_+="w"),_}function Rt(d,_){if(Ct)return 0;if(!_.includes("r")||d.mode&292){if(_.includes("w")&&!(d.mode&146)||_.includes("x")&&!(d.mode&73))return 2}else return 2;return 0}function Vr(d,_){try{return rn(d,_),20}catch{}return Rt(d,"wx")}function fi(d,_,k){try{var B=rn(d,_)}catch(re){return re.Ka}if(d=Rt(d,"wx"))return d;if(k){if(!Xt(B.mode))return 54;if(B===B.parent||nr(B)==="/")return 10}else if(Xt(B.mode))return 31;return 0}function vn(){for(var d=0;4096>=d;d++)if(!nn[d])return d;throw new Oe(33)}function xt(d){if(d=nn[d],!d)throw new Oe(8);return d}function Yr(d,_=-1){return _i||(_i=function(){this.$a={}},_i.prototype={},Object.defineProperties(_i.prototype,{object:{get(){return this.node},set(k){this.node=k}},flags:{get(){return this.$a.flags},set(k){this.$a.flags=k}},position:{get(){return this.$a.position},set(k){this.$a.position=k}}})),d=Object.assign(new _i,d),_==-1&&(_=vn()),d.fd=_,nn[_]=d}var Ur={open(d){var _,k;d.Ha=zn[d.node.rdev].Ha,(k=(_=d.Ha).open)==null||k.call(_,d)},Ta(){throw new Oe(70)}};function Vn(d,_){zn[d]={Ha:_}}function Xr(d,_){var k=_==="/",B=!_;if(k&&Bn)throw new Oe(10);if(!k&&!B){var re=Kt(_,{qb:!1});if(_=re.path,re=re.node,re.Va)throw new Oe(10);if(!Xt(re.mode))throw new Oe(54)}_={type:d,Pb:{},tb:_,Cb:[]},d=d.Ra(_),d.Ra=_,_.root=d,k?Bn=d:re&&(re.Va=_,re.Ra&&re.Ra.Cb.push(_))}function Ge(d,_,k){var B=Kt(d,{parent:!0}).node;if(d=ge(d),!d||d==="."||d==="..")throw new Oe(28);var re=Vr(B,d);if(re)throw new Oe(re);if(!B.Ga.ab)throw new Oe(63);return B.Ga.ab(B,d,_,k)}function se(d,_){return Ge(d,(_!==void 0?_:511)&1023|16384,0)}function Pe(d,_,k){typeof k>"u"&&(k=_,_=438),Ge(d,_|8192,k)}function qe(d,_){if(!Ve(d))throw new Oe(44);var k=Kt(_,{parent:!0}).node;if(!k)throw new Oe(44);_=ge(_);var B=Vr(k,_);if(B)throw new Oe(B);if(!k.Ga.symlink)throw new Oe(63);k.Ga.symlink(k,_,d)}function _t(d){var _=Kt(d,{parent:!0}).node;d=ge(d);var k=rn(_,d),B=fi(_,d,!0);if(B)throw new Oe(B);if(!_.Ga.rmdir)throw new Oe(63);if(k.Va)throw new Oe(10);_.Ga.rmdir(_,d),dt(k)}function gn(d){var _=Kt(d,{parent:!0}).node;if(!_)throw new Oe(44);d=ge(d);var k=rn(_,d),B=fi(_,d,!1);if(B)throw new Oe(B);if(!_.Ga.unlink)throw new Oe(63);if(k.Va)throw new Oe(10);_.Ga.unlink(_,d),dt(k)}function Zt(d){if(d=Kt(d).node,!d)throw new Oe(44);if(!d.Ga.readlink)throw new Oe(28);return Ve(nr(d.parent),d.Ga.readlink(d))}function dn(d,_){if(d=Kt(d,{Sa:!_}).node,!d)throw new Oe(44);if(!d.Ga.Pa)throw new Oe(63);return d.Ga.Pa(d)}function Nn(d){return dn(d,!0)}function Un(d,_){if(d=typeof d=="string"?Kt(d,{Sa:!0}).node:d,!d.Ga.Oa)throw new Oe(63);d.Ga.Oa(d,{mode:_&4095|d.mode&-4096,timestamp:Date.now()})}function Vt(d,_){if(0>_)throw new Oe(28);if(d=typeof d=="string"?Kt(d,{Sa:!0}).node:d,!d.Ga.Oa)throw new Oe(63);if(Xt(d.mode))throw new Oe(31);if((d.mode&61440)!==32768)throw new Oe(28);var k=Rt(d,"w");if(k)throw new Oe(k);d.Ga.Oa(d,{size:_,timestamp:Date.now()})}function rr(d,_,k){if(d==="")throw new Oe(44);if(typeof _=="string"){var B={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[_];if(typeof B>"u")throw Error(`Unknown file open mode: ${_}`);_=B}if(k=_&64?(typeof k>"u"?438:k)&4095|32768:0,typeof d=="object")var re=d;else{d=J(d);try{re=Kt(d,{Sa:!(_&131072)}).node}catch{}}if(B=!1,_&64)if(re){if(_&128)throw new Oe(20)}else re=Ge(d,k,0),B=!0;if(!re)throw new Oe(44);if((re.mode&61440)===8192&&(_&=-513),_&65536&&!Xt(re.mode))throw new Oe(54);if(!B&&(k=re?(re.mode&61440)===40960?32:Xt(re.mode)&&(sn(_)!=="r"||_&512)?31:Rt(re,sn(_)):44))throw new Oe(k);return _&512&&!B&&Vt(re,0),_&=-131713,re=Yr({node:re,path:nr(re),flags:_,seekable:!0,position:0,Ha:re.Ha,Fb:[],error:!1}),re.Ha.open&&re.Ha.open(re),!c.logReadFiles||_&1||(Pt||(Pt={}),d in Pt||(Pt[d]=1)),re}function pi(d){if(d.fd===null)throw new Oe(8);d.hb&&(d.hb=null);try{d.Ha.close&&d.Ha.close(d)}catch(_){throw _}finally{nn[d.fd]=null}d.fd=null}function Ar(d,_,k){if(d.fd===null)throw new Oe(8);if(!d.seekable||!d.Ha.Ta)throw new Oe(70);if(k!=0&&k!=1&&k!=2)throw new Oe(28);d.position=d.Ha.Ta(d,_,k),d.Fb=[]}function Js(d,_,k,B,re){if(0>B||0>re)throw new Oe(28);if(d.fd===null)throw new Oe(8);if((d.flags&2097155)===1)throw new Oe(8);if(Xt(d.node.mode))throw new Oe(31);if(!d.Ha.read)throw new Oe(28);var fe=typeof re<"u";if(!fe)re=d.position;else if(!d.seekable)throw new Oe(70);return _=d.Ha.read(d,_,k,B,re),fe||(d.position+=_),_}function eo(d,_,k,B,re){if(0>B||0>re)throw new Oe(28);if(d.fd===null)throw new Oe(8);if((d.flags&2097155)===0)throw new Oe(8);if(Xt(d.node.mode))throw new Oe(31);if(!d.Ha.write)throw new Oe(28);d.seekable&&d.flags&1024&&Ar(d,0,2);var fe=typeof re<"u";if(!fe)re=d.position;else if(!d.seekable)throw new Oe(70);return _=d.Ha.write(d,_,k,B,re,void 0),fe||(d.position+=_),_}function to(d){var _,k=rr(d,k||0);d=dn(d).size;var B=new Uint8Array(d);return Js(k,B,0,d,0),_=B,pi(k),_}function mi(){Oe||(Oe=function(d,_){this.name="ErrnoError",this.node=_,this.Eb=function(k){this.Ka=k},this.Eb(d),this.message="FS error"},Oe.prototype=Error(),Oe.prototype.constructor=Oe,[44].forEach(d=>{In[d]=new Oe(d),In[d].stack="<generic error, no stack>"}))}var no;function gi(d,_,k){d=J("/dev/"+d);var B=vr(!!_,!!k);Fo||(Fo=64);var re=Fo++<<8|0;Vn(re,{open(fe){fe.seekable=!1},close(){var fe;(fe=k==null?void 0:k.buffer)!=null&&fe.length&&k(10)},read(fe,Ie,Xe,wt){for(var it=0,hn=0;hn<wt;hn++){try{var Ut=_()}catch{throw new Oe(29)}if(Ut===void 0&&it===0)throw new Oe(6);if(Ut==null)break;it++,Ie[Xe+hn]=Ut}return it&&(fe.node.timestamp=Date.now()),it},write(fe,Ie,Xe,wt){for(var it=0;it<wt;it++)try{k(Ie[Xe+it])}catch{throw new Oe(29)}return wt&&(fe.node.timestamp=Date.now()),it}}),Pe(d,B,re)}var Fo,jt={},_i,Pt;function Zr(d,_,k){if(_.charAt(0)==="/")return _;if(d=d===-100?"/":xt(d).path,_.length==0){if(!k)throw new Oe(44);return d}return J(d+"/"+_)}function br(d,_,k){try{var B=d(_)}catch(fe){if(fe&&fe.node&&J(_)!==J(nr(fe.node)))return-54;throw fe}P[k>>2]=B.dev,P[k+4>>2]=B.mode,x[k+8>>2]=B.nlink,P[k+12>>2]=B.uid,P[k+16>>2]=B.gid,P[k+20>>2]=B.rdev,v=[B.size>>>0,(H=B.size,1<=+Math.abs(H)?0<H?+Math.floor(H/4294967296)>>>0:~~+Math.ceil((H-+(~~H>>>0))/4294967296)>>>0:0)],P[k+24>>2]=v[0],P[k+28>>2]=v[1],P[k+32>>2]=4096,P[k+36>>2]=B.blocks,d=B.atime.getTime(),_=B.mtime.getTime();var re=B.ctime.getTime();return v=[Math.floor(d/1e3)>>>0,(H=Math.floor(d/1e3),1<=+Math.abs(H)?0<H?+Math.floor(H/4294967296)>>>0:~~+Math.ceil((H-+(~~H>>>0))/4294967296)>>>0:0)],P[k+40>>2]=v[0],P[k+44>>2]=v[1],x[k+48>>2]=d%1e3*1e3,v=[Math.floor(_/1e3)>>>0,(H=Math.floor(_/1e3),1<=+Math.abs(H)?0<H?+Math.floor(H/4294967296)>>>0:~~+Math.ceil((H-+(~~H>>>0))/4294967296)>>>0:0)],P[k+56>>2]=v[0],P[k+60>>2]=v[1],x[k+64>>2]=_%1e3*1e3,v=[Math.floor(re/1e3)>>>0,(H=Math.floor(re/1e3),1<=+Math.abs(H)?0<H?+Math.floor(H/4294967296)>>>0:~~+Math.ceil((H-+(~~H>>>0))/4294967296)>>>0:0)],P[k+72>>2]=v[0],P[k+76>>2]=v[1],x[k+80>>2]=re%1e3*1e3,v=[B.ino>>>0,(H=B.ino,1<=+Math.abs(H)?0<H?+Math.floor(H/4294967296)>>>0:~~+Math.ceil((H-+(~~H>>>0))/4294967296)>>>0:0)],P[k+88>>2]=v[0],P[k+92>>2]=v[1],0}var Kn=void 0;function Jr(){var d=P[+Kn>>2];return Kn+=4,d}var Fr=(d,_)=>_+2097152>>>0<4194305-!!d?(d>>>0)+4294967296*_:NaN,$o=[0,31,60,91,121,152,182,213,244,274,305,335],Lt=[0,31,59,90,120,151,181,212,243,273,304,334],xr=d=>{var _=ct(d)+1,k=ps(_);return k&&at(d,z,k,_),k},$r={},Cr=()=>{if(!Jt){var d={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:p||"./this.program"},_;for(_ in $r)$r[_]===void 0?delete d[_]:d[_]=$r[_];var k=[];for(_ in d)k.push(`${_}=${d[_]}`);Jt=k}return Jt},Jt,ds=d=>{var _=ct(d)+1,k=sr(_);return at(d,z,k,_),k},Oa=(d,_,k,B)=>{var re={string:it=>{var hn=0;return it!=null&&it!==0&&(hn=ds(it)),hn},array:it=>{var hn=sr(it.length);return F.set(it,hn),hn}};d=c["_"+d];var fe=[],Ie=0;if(B)for(var Xe=0;Xe<B.length;Xe++){var wt=re[k[Xe]];wt?(Ie===0&&(Ie=Wi()),fe[Xe]=wt(B[Xe])):fe[Xe]=B[Xe]}return k=d.apply(null,fe),k=function(it){return Ie!==0&&Sr(Ie),_==="string"?it?q(z,it):"":_==="boolean"?!!it:it}(k)},hs=0,qi=(d,_)=>(_=_==1?sr(d.length):ps(d.length),d.subarray||d.slice||(d=new Uint8Array(d)),z.set(d,_),_),ei,ti=[],Rn,Br=d=>{ei.delete(Rn.get(d)),Rn.set(d,null),ti.push(d)},Hi=(d,_)=>{if(!ei){ei=new WeakMap;var k=Rn.length;if(ei)for(var B=0;B<0+k;B++){var re=Rn.get(B);re&&ei.set(re,B)}}if(k=ei.get(d)||0)return k;if(ti.length)k=ti.pop();else{try{Rn.grow(1)}catch(Xe){throw Xe instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":Xe}k=Rn.length-1}try{Rn.set(k,d)}catch(Xe){if(!(Xe instanceof TypeError))throw Xe;if(typeof WebAssembly.Function=="function"){B=WebAssembly.Function,re={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"};for(var fe={parameters:[],results:_[0]=="v"?[]:[re[_[0]]]},Ie=1;Ie<_.length;++Ie)fe.parameters.push(re[_[Ie]]);_=new B(fe,d)}else{for(B=[1],re=_.slice(0,1),_=_.slice(1),fe={i:127,p:127,j:126,f:125,d:124,e:111},B.push(96),Ie=_.length,128>Ie?B.push(Ie):B.push(Ie%128|128,Ie>>7),Ie=0;Ie<_.length;++Ie)B.push(fe[_[Ie]]);re=="v"?B.push(0):B.push(1,fe[re]),_=[0,97,115,109,1,0,0,0,1],re=B.length,128>re?_.push(re):_.push(re%128|128,re>>7),_.push.apply(_,B),_.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),_=new WebAssembly.Module(new Uint8Array(_)),_=new WebAssembly.Instance(_,{e:{f:d}}).exports.f}Rn.set(k,_)}return ei.set(d,k),k};function fs(d,_,k,B){d||(d=this),this.parent=d,this.Ra=d.Ra,this.Va=null,this.id=yr++,this.name=_,this.mode=k,this.Ga={},this.Ha={},this.rdev=B}Object.defineProperties(fs.prototype,{read:{get:function(){return(this.mode&365)===365},set:function(d){d?this.mode|=365:this.mode&=-366}},write:{get:function(){return(this.mode&146)===146},set:function(d){d?this.mode|=146:this.mode&=-147}}}),mi(),Dt=Array(4096),Xr(Je,"/"),se("/tmp"),se("/home"),se("/home/web_user"),function(){se("/dev"),Vn(259,{read:()=>0,write:(B,re,fe,Ie)=>Ie}),Pe("/dev/null",259),pt(1280,Et),pt(1536,Nt),Pe("/dev/tty",1280),Pe("/dev/tty1",1536);var d=new Uint8Array(1024),_=0,k=()=>(_===0&&(_=Ce(d).byteLength),d[--_]);gi("random",k),gi("urandom",k),se("/dev/shm"),se("/dev/shm/tmp")}(),function(){se("/proc");var d=se("/proc/self");se("/proc/self/fd"),Xr({Ra(){var _=Qt(d,"fd",16895,73);return _.Ga={lookup(k,B){var re=xt(+B);return k={parent:null,Ra:{tb:"fake"},Ga:{readlink:()=>re.path}},k.parent=k}},_}},"/proc/self/fd")}();var wi={a:(d,_,k,B)=>{De(`Assertion failed: ${d?q(z,d):""}, at: `+[_?_?q(z,_):"":"unknown filename",k,B?B?q(z,B):"":"unknown function"])},h:function(d,_){try{return d=d?q(z,d):"",Un(d,_),0}catch(k){if(typeof jt>"u"||k.name!=="ErrnoError")throw k;return-k.Ka}},H:function(d,_,k){try{if(_=_?q(z,_):"",_=Zr(d,_),k&-8)return-28;var B=Kt(_,{Sa:!0}).node;return B?(d="",k&4&&(d+="r"),k&2&&(d+="w"),k&1&&(d+="x"),d&&Rt(B,d)?-2:0):-44}catch(re){if(typeof jt>"u"||re.name!=="ErrnoError")throw re;return-re.Ka}},i:function(d,_){try{var k=xt(d);return Un(k.node,_),0}catch(B){if(typeof jt>"u"||B.name!=="ErrnoError")throw B;return-B.Ka}},g:function(d){try{var _=xt(d).node,k=typeof _=="string"?Kt(_,{Sa:!0}).node:_;if(!k.Ga.Oa)throw new Oe(63);return k.Ga.Oa(k,{timestamp:Date.now()}),0}catch(B){if(typeof jt>"u"||B.name!=="ErrnoError")throw B;return-B.Ka}},b:function(d,_,k){Kn=k;try{var B=xt(d);switch(_){case 0:var re=Jr();if(0>re)return-28;for(;nn[re];)re++;return Yr(B,re).fd;case 1:case 2:return 0;case 3:return B.flags;case 4:return re=Jr(),B.flags|=re,0;case 5:return re=Jr(),C[re+0>>1]=2,0;case 6:case 7:return 0;case 16:case 8:return-28;case 9:return P[Bo()>>2]=28,-1;default:return-28}}catch(fe){if(typeof jt>"u"||fe.name!=="ErrnoError")throw fe;return-fe.Ka}},f:function(d,_){try{var k=xt(d);return br(dn,k.path,_)}catch(B){if(typeof jt>"u"||B.name!=="ErrnoError")throw B;return-B.Ka}},n:function(d,_,k){_=Fr(_,k);try{if(isNaN(_))return 61;var B=xt(d);if((B.flags&2097155)===0)throw new Oe(28);return Vt(B.node,_),0}catch(re){if(typeof jt>"u"||re.name!=="ErrnoError")throw re;return-re.Ka}},C:function(d,_){try{if(_===0)return-28;var k=ct("/")+1;return _<k?-68:(at("/",z,d,_),k)}catch(B){if(typeof jt>"u"||B.name!=="ErrnoError")throw B;return-B.Ka}},F:function(d,_){try{return d=d?q(z,d):"",br(Nn,d,_)}catch(k){if(typeof jt>"u"||k.name!=="ErrnoError")throw k;return-k.Ka}},z:function(d,_,k){try{return _=_?q(z,_):"",_=Zr(d,_),_=J(_),_[_.length-1]==="/"&&(_=_.substr(0,_.length-1)),se(_,k),0}catch(B){if(typeof jt>"u"||B.name!=="ErrnoError")throw B;return-B.Ka}},E:function(d,_,k,B){try{_=_?q(z,_):"";var re=B&256;return _=Zr(d,_,B&4096),br(re?Nn:dn,_,k)}catch(fe){if(typeof jt>"u"||fe.name!=="ErrnoError")throw fe;return-fe.Ka}},y:function(d,_,k,B){Kn=B;try{_=_?q(z,_):"",_=Zr(d,_);var re=B?Jr():0;return rr(_,k,re).fd}catch(fe){if(typeof jt>"u"||fe.name!=="ErrnoError")throw fe;return-fe.Ka}},w:function(d,_,k,B){try{if(_=_?q(z,_):"",_=Zr(d,_),0>=B)return-28;var re=Zt(_),fe=Math.min(B,ct(re)),Ie=F[k+fe];return at(re,z,k,B+1),F[k+fe]=Ie,fe}catch(Xe){if(typeof jt>"u"||Xe.name!=="ErrnoError")throw Xe;return-Xe.Ka}},v:function(d){try{return d=d?q(z,d):"",_t(d),0}catch(_){if(typeof jt>"u"||_.name!=="ErrnoError")throw _;return-_.Ka}},G:function(d,_){try{return d=d?q(z,d):"",br(dn,d,_)}catch(k){if(typeof jt>"u"||k.name!=="ErrnoError")throw k;return-k.Ka}},r:function(d,_,k){try{return _=_?q(z,_):"",_=Zr(d,_),k===0?gn(_):k===512?_t(_):De("Invalid flags passed to unlinkat"),0}catch(B){if(typeof jt>"u"||B.name!=="ErrnoError")throw B;return-B.Ka}},q:function(d,_,k){try{if(_=_?q(z,_):"",_=Zr(d,_,!0),k){var B=x[k>>2]+4294967296*P[k+4>>2],re=P[k+8>>2];fe=1e3*B+re/1e6,k+=16,B=x[k>>2]+4294967296*P[k+4>>2],re=P[k+8>>2],Ie=1e3*B+re/1e6}else var fe=Date.now(),Ie=fe;d=fe;var Xe=Kt(_,{Sa:!0}).node;return Xe.Ga.Oa(Xe,{timestamp:Math.max(d,Ie)}),0}catch(wt){if(typeof jt>"u"||wt.name!=="ErrnoError")throw wt;return-wt.Ka}},l:function(d,_,k){d=new Date(1e3*Fr(d,_)),P[k>>2]=d.getSeconds(),P[k+4>>2]=d.getMinutes(),P[k+8>>2]=d.getHours(),P[k+12>>2]=d.getDate(),P[k+16>>2]=d.getMonth(),P[k+20>>2]=d.getFullYear()-1900,P[k+24>>2]=d.getDay(),_=d.getFullYear(),P[k+28>>2]=(_%4!==0||_%100===0&&_%400!==0?Lt:$o)[d.getMonth()]+d.getDate()-1|0,P[k+36>>2]=-(60*d.getTimezoneOffset()),_=new Date(d.getFullYear(),6,1).getTimezoneOffset();var B=new Date(d.getFullYear(),0,1).getTimezoneOffset();P[k+32>>2]=(_!=B&&d.getTimezoneOffset()==Math.min(B,_))|0},j:function(d,_,k,B,re,fe,Ie,Xe){re=Fr(re,fe);try{if(isNaN(re))return 61;var wt=xt(B);if((_&2)!==0&&(k&2)===0&&(wt.flags&2097155)!==2)throw new Oe(2);if((wt.flags&2097155)===1)throw new Oe(2);if(!wt.Ha.bb)throw new Oe(43);var it=wt.Ha.bb(wt,d,re,_,k),hn=it.Db;return P[Ie>>2]=it.ub,x[Xe>>2]=hn,0}catch(Ut){if(typeof jt>"u"||Ut.name!=="ErrnoError")throw Ut;return-Ut.Ka}},k:function(d,_,k,B,re,fe,Ie){fe=Fr(fe,Ie);try{if(isNaN(fe))return 61;var Xe=xt(re);if(k&2){if((Xe.node.mode&61440)!==32768)throw new Oe(43);if(!(B&2)){var wt=z.slice(d,d+_);Xe.Ha.cb&&Xe.Ha.cb(Xe,wt,fe,_,B)}}}catch(it){if(typeof jt>"u"||it.name!=="ErrnoError")throw it;return-it.Ka}},s:(d,_,k)=>{function B(wt){return(wt=wt.toTimeString().match(/\(([A-Za-z ]+)\)$/))?wt[1]:"GMT"}var re=new Date().getFullYear(),fe=new Date(re,0,1),Ie=new Date(re,6,1);re=fe.getTimezoneOffset();var Xe=Ie.getTimezoneOffset();x[d>>2]=60*Math.max(re,Xe),P[_>>2]=+(re!=Xe),d=B(fe),_=B(Ie),d=xr(d),_=xr(_),Xe<re?(x[k>>2]=d,x[k+4>>2]=_):(x[k>>2]=_,x[k+4>>2]=d)},d:()=>Date.now(),t:()=>2147483648,c:()=>performance.now(),o:d=>{var _=z.length;if(d>>>=0,2147483648<d)return!1;for(var k=1;4>=k;k*=2){var B=_*(1+.2/k);B=Math.min(B,d+100663296);var re=Math;B=Math.max(d,B);e:{re=(re.min.call(re,2147483648,B+(65536-B%65536)%65536)-R.buffer.byteLength+65535)/65536;try{R.grow(re),X();var fe=1;break e}catch{}fe=void 0}if(fe)return!0}return!1},A:(d,_)=>{var k=0;return Cr().forEach((B,re)=>{var fe=_+k;for(re=x[d+4*re>>2]=fe,fe=0;fe<B.length;++fe)F[re++>>0]=B.charCodeAt(fe);F[re>>0]=0,k+=B.length+1}),0},B:(d,_)=>{var k=Cr();x[d>>2]=k.length;var B=0;return k.forEach(re=>B+=re.length+1),x[_>>2]=B,0},e:function(d){try{var _=xt(d);return pi(_),0}catch(k){if(typeof jt>"u"||k.name!=="ErrnoError")throw k;return k.Ka}},p:function(d,_){try{var k=xt(d);return F[_>>0]=k.tty?2:Xt(k.mode)?3:(k.mode&61440)===40960?7:4,C[_+2>>1]=0,v=[0,(H=0,1<=+Math.abs(H)?0<H?+Math.floor(H/4294967296)>>>0:~~+Math.ceil((H-+(~~H>>>0))/4294967296)>>>0:0)],P[_+8>>2]=v[0],P[_+12>>2]=v[1],v=[0,(H=0,1<=+Math.abs(H)?0<H?+Math.floor(H/4294967296)>>>0:~~+Math.ceil((H-+(~~H>>>0))/4294967296)>>>0:0)],P[_+16>>2]=v[0],P[_+20>>2]=v[1],0}catch(B){if(typeof jt>"u"||B.name!=="ErrnoError")throw B;return B.Ka}},x:function(d,_,k,B){try{e:{var re=xt(d);d=_;for(var fe,Ie=_=0;Ie<k;Ie++){var Xe=x[d>>2],wt=x[d+4>>2];d+=8;var it=Js(re,F,Xe,wt,fe);if(0>it){var hn=-1;break e}if(_+=it,it<wt)break;typeof fe<"u"&&(fe+=it)}hn=_}return x[B>>2]=hn,0}catch(Ut){if(typeof jt>"u"||Ut.name!=="ErrnoError")throw Ut;return Ut.Ka}},m:function(d,_,k,B,re){_=Fr(_,k);try{if(isNaN(_))return 61;var fe=xt(d);return Ar(fe,_,B),v=[fe.position>>>0,(H=fe.position,1<=+Math.abs(H)?0<H?+Math.floor(H/4294967296)>>>0:~~+Math.ceil((H-+(~~H>>>0))/4294967296)>>>0:0)],P[re>>2]=v[0],P[re+4>>2]=v[1],fe.hb&&_===0&&B===0&&(fe.hb=null),0}catch(Ie){if(typeof jt>"u"||Ie.name!=="ErrnoError")throw Ie;return Ie.Ka}},D:function(d){var k;try{var _=xt(d);return(k=_.Ha)!=null&&k.fsync?_.Ha.fsync(_):0}catch(B){if(typeof jt>"u"||B.name!=="ErrnoError")throw B;return B.Ka}},u:function(d,_,k,B){try{e:{var re=xt(d);d=_;for(var fe,Ie=_=0;Ie<k;Ie++){var Xe=x[d>>2],wt=x[d+4>>2];d+=8;var it=eo(re,F,Xe,wt,fe);if(0>it){var hn=-1;break e}_+=it,typeof fe<"u"&&(fe+=it)}hn=_}return x[B>>2]=hn,0}catch(Ut){if(typeof jt>"u"||Ut.name!=="ErrnoError")throw Ut;return Ut.Ka}}},Ke=function(){var k;function d(B){var re;return Ke=B.exports,R=Ke.I,X(),Rn=Ke.Aa,Ee.unshift(Ke.J),le--,(re=c.monitorRunDependencies)==null||re.call(c,le),le==0&&ye&&(B=ye,ye=null,B()),Ke}var _={a:wi};if(le++,(k=c.monitorRunDependencies)==null||k.call(c,le),c.instantiateWasm)try{return c.instantiateWasm(_,d)}catch(B){return oe(`Module.instantiateWasm callback failed with error: ${B}`),!1}return Q(_,function(B){d(B.instance)}),{}}();c._sqlite3_free=d=>(c._sqlite3_free=Ke.K)(d),c._sqlite3_value_text=d=>(c._sqlite3_value_text=Ke.L)(d);var Bo=()=>(Bo=Ke.M)();c._sqlite3_prepare_v2=(d,_,k,B,re)=>(c._sqlite3_prepare_v2=Ke.N)(d,_,k,B,re),c._sqlite3_step=d=>(c._sqlite3_step=Ke.O)(d),c._sqlite3_finalize=d=>(c._sqlite3_finalize=Ke.P)(d),c._sqlite3_reset=d=>(c._sqlite3_reset=Ke.Q)(d),c._sqlite3_clear_bindings=d=>(c._sqlite3_clear_bindings=Ke.R)(d),c._sqlite3_value_blob=d=>(c._sqlite3_value_blob=Ke.S)(d),c._sqlite3_value_bytes=d=>(c._sqlite3_value_bytes=Ke.T)(d),c._sqlite3_value_double=d=>(c._sqlite3_value_double=Ke.U)(d),c._sqlite3_value_int=d=>(c._sqlite3_value_int=Ke.V)(d),c._sqlite3_value_type=d=>(c._sqlite3_value_type=Ke.W)(d),c._sqlite3_result_blob=(d,_,k,B)=>(c._sqlite3_result_blob=Ke.X)(d,_,k,B),c._sqlite3_result_double=(d,_)=>(c._sqlite3_result_double=Ke.Y)(d,_),c._sqlite3_result_error=(d,_,k)=>(c._sqlite3_result_error=Ke.Z)(d,_,k),c._sqlite3_result_int=(d,_)=>(c._sqlite3_result_int=Ke._)(d,_),c._sqlite3_result_int64=(d,_,k)=>(c._sqlite3_result_int64=Ke.$)(d,_,k),c._sqlite3_result_null=d=>(c._sqlite3_result_null=Ke.aa)(d),c._sqlite3_result_text=(d,_,k,B)=>(c._sqlite3_result_text=Ke.ba)(d,_,k,B),c._sqlite3_aggregate_context=(d,_)=>(c._sqlite3_aggregate_context=Ke.ca)(d,_),c._sqlite3_column_count=d=>(c._sqlite3_column_count=Ke.da)(d),c._sqlite3_data_count=d=>(c._sqlite3_data_count=Ke.ea)(d),c._sqlite3_column_blob=(d,_)=>(c._sqlite3_column_blob=Ke.fa)(d,_),c._sqlite3_column_bytes=(d,_)=>(c._sqlite3_column_bytes=Ke.ga)(d,_),c._sqlite3_column_double=(d,_)=>(c._sqlite3_column_double=Ke.ha)(d,_),c._sqlite3_column_text=(d,_)=>(c._sqlite3_column_text=Ke.ia)(d,_),c._sqlite3_column_type=(d,_)=>(c._sqlite3_column_type=Ke.ja)(d,_),c._sqlite3_column_name=(d,_)=>(c._sqlite3_column_name=Ke.ka)(d,_),c._sqlite3_bind_blob=(d,_,k,B,re)=>(c._sqlite3_bind_blob=Ke.la)(d,_,k,B,re),c._sqlite3_bind_double=(d,_,k)=>(c._sqlite3_bind_double=Ke.ma)(d,_,k),c._sqlite3_bind_int=(d,_,k)=>(c._sqlite3_bind_int=Ke.na)(d,_,k),c._sqlite3_bind_text=(d,_,k,B,re)=>(c._sqlite3_bind_text=Ke.oa)(d,_,k,B,re),c._sqlite3_bind_parameter_index=(d,_)=>(c._sqlite3_bind_parameter_index=Ke.pa)(d,_),c._sqlite3_sql=d=>(c._sqlite3_sql=Ke.qa)(d),c._sqlite3_normalized_sql=d=>(c._sqlite3_normalized_sql=Ke.ra)(d),c._sqlite3_errmsg=d=>(c._sqlite3_errmsg=Ke.sa)(d),c._sqlite3_exec=(d,_,k,B,re)=>(c._sqlite3_exec=Ke.ta)(d,_,k,B,re),c._sqlite3_changes=d=>(c._sqlite3_changes=Ke.ua)(d),c._sqlite3_close_v2=d=>(c._sqlite3_close_v2=Ke.va)(d),c._sqlite3_create_function_v2=(d,_,k,B,re,fe,Ie,Xe,wt)=>(c._sqlite3_create_function_v2=Ke.wa)(d,_,k,B,re,fe,Ie,Xe,wt),c._sqlite3_open=(d,_)=>(c._sqlite3_open=Ke.xa)(d,_);var ps=c._malloc=d=>(ps=c._malloc=Ke.ya)(d),ir=c._free=d=>(ir=c._free=Ke.za)(d);c._RegisterExtensionFunctions=d=>(c._RegisterExtensionFunctions=Ke.Ba)(d);var zo=(d,_)=>(zo=Ke.Ca)(d,_),Wi=()=>(Wi=Ke.Da)(),Sr=d=>(Sr=Ke.Ea)(d),sr=d=>(sr=Ke.Fa)(d);c.stackAlloc=sr,c.stackSave=Wi,c.stackRestore=Sr,c.cwrap=(d,_,k,B)=>{var re=!k||k.every(fe=>fe==="number"||fe==="boolean");return _!=="string"&&re&&!B?c["_"+d]:function(){return Oa(d,_,k,arguments)}},c.addFunction=Hi,c.removeFunction=Br,c.UTF8ToString=ae,c.ALLOC_NORMAL=hs,c.allocate=qi,c.allocateUTF8OnStack=ds;var vi;ye=function d(){vi||yi(),vi||(ye=d)};function yi(){function d(){if(!vi&&(vi=!0,c.calledRun=!0,!N)){if(c.noFSInit||no||(no=!0,mi(),c.stdin=c.stdin,c.stdout=c.stdout,c.stderr=c.stderr,c.stdin?gi("stdin",c.stdin):qe("/dev/tty","/dev/stdin"),c.stdout?gi("stdout",null,c.stdout):qe("/dev/tty","/dev/stdout"),c.stderr?gi("stderr",null,c.stderr):qe("/dev/tty1","/dev/stderr"),rr("/dev/stdin",0),rr("/dev/stdout",1),rr("/dev/stderr",1)),Ct=!1,te(Ee),c.onRuntimeInitialized&&c.onRuntimeInitialized(),c.postRun)for(typeof c.postRun=="function"&&(c.postRun=[c.postRun]);c.postRun.length;){var _=c.postRun.shift();ve.unshift(_)}te(ve)}}if(!(0<le)){if(c.preRun)for(typeof c.preRun=="function"&&(c.preRun=[c.preRun]);c.preRun.length;)ce();te(xe),0<le||(c.setStatus?(c.setStatus("Running..."),setTimeout(function(){setTimeout(function(){c.setStatus("")},1),d()},1)):d())}}if(c.preInit)for(typeof c.preInit=="function"&&(c.preInit=[c.preInit]);0<c.preInit.length;)c.preInit.pop()();return yi(),a}),t)};n.exports=r,n.exports.default=r}(Nd)),Nd.exports}var oD=sD();const aD=sd(oD);var Uu={exports:{}},lD=Uu.exports,n_;function uD(){return n_||(n_=1,function(n){(function(e,t,r){function i(l){var c=this,h=a();c.next=function(){var p=2091639*c.s0+c.c*23283064365386963e-26;return c.s0=c.s1,c.s1=c.s2,c.s2=p-(c.c=p|0)},c.c=1,c.s0=h(" "),c.s1=h(" "),c.s2=h(" "),c.s0-=h(l),c.s0<0&&(c.s0+=1),c.s1-=h(l),c.s1<0&&(c.s1+=1),c.s2-=h(l),c.s2<0&&(c.s2+=1),h=null}function s(l,c){return c.c=l.c,c.s0=l.s0,c.s1=l.s1,c.s2=l.s2,c}function o(l,c){var h=new i(l),p=c&&c.state,m=h.next;return m.int32=function(){return h.next()*4294967296|0},m.double=function(){return m()+(m()*2097152|0)*11102230246251565e-32},m.quick=m,p&&(typeof p=="object"&&s(p,h),m.state=function(){return s(h,{})}),m}function a(){var l=4022871197,c=function(h){h=String(h);for(var p=0;p<h.length;p++){l+=h.charCodeAt(p);var m=.02519603282416938*l;l=m>>>0,m-=l,m*=l,l=m>>>0,m-=l,l+=m*4294967296}return(l>>>0)*23283064365386963e-26};return c}t&&t.exports?t.exports=o:this.alea=o})(lD,n)}(Uu)),Uu.exports}var Fu={exports:{}},cD=Fu.exports,r_;function dD(){return r_||(r_=1,function(n){(function(e,t,r){function i(a){var l=this,c="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var p=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^p^p>>>8},a===(a|0)?l.x=a:c+=a;for(var h=0;h<c.length+64;h++)l.x^=c.charCodeAt(h)|0,l.next()}function s(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l}function o(a,l){var c=new i(a),h=l&&l.state,p=function(){return(c.next()>>>0)/4294967296};return p.double=function(){do var m=c.next()>>>11,g=(c.next()>>>0)/4294967296,b=(m+g)/(1<<21);while(b===0);return b},p.int32=c.next,p.quick=p,h&&(typeof h=="object"&&s(h,c),p.state=function(){return s(c,{})}),p}t&&t.exports?t.exports=o:this.xor128=o})(cD,n)}(Fu)),Fu.exports}var $u={exports:{}},hD=$u.exports,i_;function fD(){return i_||(i_=1,function(n){(function(e,t,r){function i(a){var l=this,c="";l.next=function(){var p=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(p^p<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,a===(a|0)?l.x=a:c+=a;for(var h=0;h<c.length+64;h++)l.x^=c.charCodeAt(h)|0,h==c.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function s(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l.v=a.v,l.d=a.d,l}function o(a,l){var c=new i(a),h=l&&l.state,p=function(){return(c.next()>>>0)/4294967296};return p.double=function(){do var m=c.next()>>>11,g=(c.next()>>>0)/4294967296,b=(m+g)/(1<<21);while(b===0);return b},p.int32=c.next,p.quick=p,h&&(typeof h=="object"&&s(h,c),p.state=function(){return s(c,{})}),p}t&&t.exports?t.exports=o:this.xorwow=o})(hD,n)}($u)),$u.exports}var Bu={exports:{}},pD=Bu.exports,s_;function mD(){return s_||(s_=1,function(n){(function(e,t,r){function i(a){var l=this;l.next=function(){var h=l.x,p=l.i,m,g;return m=h[p],m^=m>>>7,g=m^m<<24,m=h[p+1&7],g^=m^m>>>10,m=h[p+3&7],g^=m^m>>>3,m=h[p+4&7],g^=m^m<<7,m=h[p+7&7],m=m^m<<13,g^=m^m<<9,h[p]=g,l.i=p+1&7,g};function c(h,p){var m,g=[];if(p===(p|0))g[0]=p;else for(p=""+p,m=0;m<p.length;++m)g[m&7]=g[m&7]<<15^p.charCodeAt(m)+g[m+1&7]<<13;for(;g.length<8;)g.push(0);for(m=0;m<8&&g[m]===0;++m);for(m==8?g[7]=-1:g[m],h.x=g,h.i=0,m=256;m>0;--m)h.next()}c(l,a)}function s(a,l){return l.x=a.x.slice(),l.i=a.i,l}function o(a,l){a==null&&(a=+new Date);var c=new i(a),h=l&&l.state,p=function(){return(c.next()>>>0)/4294967296};return p.double=function(){do var m=c.next()>>>11,g=(c.next()>>>0)/4294967296,b=(m+g)/(1<<21);while(b===0);return b},p.int32=c.next,p.quick=p,h&&(h.x&&s(h,c),p.state=function(){return s(c,{})}),p}t&&t.exports?t.exports=o:this.xorshift7=o})(pD,n)}(Bu)),Bu.exports}var zu={exports:{}},gD=zu.exports,o_;function _D(){return o_||(o_=1,function(n){(function(e,t,r){function i(a){var l=this;l.next=function(){var h=l.w,p=l.X,m=l.i,g,b;return l.w=h=h+1640531527|0,b=p[m+34&127],g=p[m=m+1&127],b^=b<<13,g^=g<<17,b^=b>>>15,g^=g>>>12,b=p[m]=b^g,l.i=m,b+(h^h>>>16)|0};function c(h,p){var m,g,b,E,S,O=[],U=128;for(p===(p|0)?(g=p,p=null):(p=p+"\0",g=0,U=Math.max(U,p.length)),b=0,E=-32;E<U;++E)p&&(g^=p.charCodeAt((E+32)%p.length)),E===0&&(S=g),g^=g<<10,g^=g>>>15,g^=g<<4,g^=g>>>13,E>=0&&(S=S+1640531527|0,m=O[E&127]^=g+S,b=m==0?b+1:0);for(b>=128&&(O[(p&&p.length||0)&127]=-1),b=127,E=4*128;E>0;--E)g=O[b+34&127],m=O[b=b+1&127],g^=g<<13,m^=m<<17,g^=g>>>15,m^=m>>>12,O[b]=g^m;h.w=S,h.X=O,h.i=b}c(l,a)}function s(a,l){return l.i=a.i,l.w=a.w,l.X=a.X.slice(),l}function o(a,l){a==null&&(a=+new Date);var c=new i(a),h=l&&l.state,p=function(){return(c.next()>>>0)/4294967296};return p.double=function(){do var m=c.next()>>>11,g=(c.next()>>>0)/4294967296,b=(m+g)/(1<<21);while(b===0);return b},p.int32=c.next,p.quick=p,h&&(h.X&&s(h,c),p.state=function(){return s(c,{})}),p}t&&t.exports?t.exports=o:this.xor4096=o})(gD,n)}(zu)),zu.exports}var ju={exports:{}},wD=ju.exports,a_;function vD(){return a_||(a_=1,function(n){(function(e,t,r){function i(a){var l=this,c="";l.next=function(){var p=l.b,m=l.c,g=l.d,b=l.a;return p=p<<25^p>>>7^m,m=m-g|0,g=g<<24^g>>>8^b,b=b-p|0,l.b=p=p<<20^p>>>12^m,l.c=m=m-g|0,l.d=g<<16^m>>>16^b,l.a=b-p|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,a===Math.floor(a)?(l.a=a/4294967296|0,l.b=a|0):c+=a;for(var h=0;h<c.length+20;h++)l.b^=c.charCodeAt(h)|0,l.next()}function s(a,l){return l.a=a.a,l.b=a.b,l.c=a.c,l.d=a.d,l}function o(a,l){var c=new i(a),h=l&&l.state,p=function(){return(c.next()>>>0)/4294967296};return p.double=function(){do var m=c.next()>>>11,g=(c.next()>>>0)/4294967296,b=(m+g)/(1<<21);while(b===0);return b},p.int32=c.next,p.quick=p,h&&(typeof h=="object"&&s(h,c),p.state=function(){return s(c,{})}),p}t&&t.exports?t.exports=o:this.tychei=o})(wD,n)}(ju)),ju.exports}var qu={exports:{}},yD=qu.exports,l_;function bD(){return l_||(l_=1,function(n){(function(e,t,r){var i=256,s=6,o=52,a="random",l=r.pow(i,s),c=r.pow(2,o),h=c*2,p=i-1,m;function g(V,K,oe){var L=[];K=K==!0?{entropy:!0}:K||{};var R=O(S(K.entropy?[V,D(t)]:V??U(),3),L),N=new b(L),F=function(){for(var z=N.g(s),C=l,P=0;z<c;)z=(z+P)*i,C*=i,P=N.g(1);for(;z>=h;)z/=2,C/=2,P>>>=1;return(z+P)/C};return F.int32=function(){return N.g(4)|0},F.quick=function(){return N.g(4)/4294967296},F.double=F,O(D(N.S),t),(K.pass||oe||function(z,C,P,x){return x&&(x.S&&E(x,N),z.state=function(){return E(N,{})}),P?(r[a]=z,C):z})(F,R,"global"in K?K.global:this==r,K.state)}function b(V){var K,oe=V.length,L=this,R=0,N=L.i=L.j=0,F=L.S=[];for(oe||(V=[oe++]);R<i;)F[R]=R++;for(R=0;R<i;R++)F[R]=F[N=p&N+V[R%oe]+(K=F[R])],F[N]=K;(L.g=function(z){for(var C,P=0,x=L.i,ue=L.j,Y=L.S;z--;)C=Y[x=p&x+1],P=P*i+Y[p&(Y[x]=Y[ue=p&ue+C])+(Y[ue]=C)];return L.i=x,L.j=ue,P})(i)}function E(V,K){return K.i=V.i,K.j=V.j,K.S=V.S.slice(),K}function S(V,K){var oe=[],L=typeof V,R;if(K&&L=="object")for(R in V)try{oe.push(S(V[R],K-1))}catch{}return oe.length?oe:L=="string"?V:V+"\0"}function O(V,K){for(var oe=V+"",L,R=0;R<oe.length;)K[p&R]=p&(L^=K[p&R]*19)+oe.charCodeAt(R++);return D(K)}function U(){try{var V;return m&&(V=m.randomBytes)?V=V(i):(V=new Uint8Array(i),(e.crypto||e.msCrypto).getRandomValues(V)),D(V)}catch{var K=e.navigator,oe=K&&K.plugins;return[+new Date,e,oe,e.screen,D(t)]}}function D(V){return String.fromCharCode.apply(0,V)}if(O(r.random(),t),n.exports){n.exports=g;try{m=Vu}catch{}}else r["seed"+a]=g})(typeof self<"u"?self:yD,[],Math)}(qu)),qu.exports}var Ld,u_;function ED(){if(u_)return Ld;u_=1;var n=uD(),e=dD(),t=fD(),r=mD(),i=_D(),s=vD(),o=bD();return o.alea=n,o.xor128=e,o.xorwow=t,o.xorshift7=r,o.xor4096=i,o.tychei=s,Ld=o,Ld}var kD=ED();const TD=sd(kD),ID={class:"fixed left-1/2 top-1/2 inline-block max-h-[100vh] max-w-[100vw] -translate-x-1/2 -translate-y-1/2 overflow-auto rounded-md bg-cyan-500 p-3 text-center shadow-lg shadow-black"},AD={class:"mt-1"},xD={class:"mt-3 rounded-sm bg-lime-400 p-3 text-xl"},CD={key:0,class:"mt-5 rounded-sm bg-teal-700 p-3 text-xl"},SD=["value"],RD={key:1},PD={class:"mt-5 text-xl"},DD={class:"rounded-sm bg-teal-500 p-3"},OD=["value"],ND={class:"mt-3 rounded-sm bg-teal-500 p-3"},LD=["value"],MD={class:"mt-3 rounded-sm bg-yellow-500 p-3"},VD=["value"],UD={class:"mt-3 rounded-sm bg-violet-600 p-3"},FD=["value"],$D={class:"mt-1 flex items-center justify-center"},BD={class:"mt-3 rounded-sm bg-pink-500 p-3"},zD=["value"],jD={class:"mt-1 flex items-center justify-center"},qD={class:"mt-3 rounded-sm bg-blue-500 p-3"},HD=["max"],WD={class:"mt-5 rounded-sm bg-emerald-400 p-3 text-xl"},GD={class:"flex items-center justify-center"},KD={key:0,class:"mt-3"},QD=["value"],YD={class:"mt-5 rounded-sm bg-gray-400 p-3 text-xl"},XD={class:"flex items-center justify-center"},ZD={class:"mt-5"},JD={key:0,class:"flex justify-center"},eO={key:0},tO={key:1},nO={class:"mt-3 rounded-sm bg-cyan-600 p-3"},rO={__name:"ImportDeck",props:["auth","db","storage","decks"],emits:["close"],setup(n,{emit:e}){const t=n,r=300;let i=null,s=null,o=null,a=null;const l=Ae(!1);let c=null;const h=Ae([]),p=Ae(0),m=Ae([]),g=Ae(0),b=Ae(0),E=Ae(0),S=Ae(r),O=Ae(0),U=Ae(!1),D=Ae(0),V=Ae(!1),K=Ae(!1),oe=Ae(""),L=Ae(!1),R=Ae(!1);let N="";const F=Ae("");async function z(ue){if(m.value=[],h.value=[],p.value=0,g.value=0,b.value=0,E.value=0,S.value=r,O.value=0,U.value=!1,D.value=0,V.value=!1,K.value=!1,oe.value="",L.value=!1,F.value="",l.value=!0,ue.target.files.length!==0){const Y=ue.target.files[0];N=Y.name.split(".")[0],F.value="Loading Zip",i=await nD.loadAsync(Y),F.value="Getting Collection File";const X=await i.file("collection.anki2").async("uint8array");F.value="Getting Media File";const xe=await i.file("media").async("string");F.value="Parsing Media File";const Ee=await JSON.parse(xe);a=Object.fromEntries(Object.entries(Ee).map(([ce,le])=>[le,ce])),F.value="Initializing SQL",s=await aD({locateFile:ce=>`./${ce}`}),F.value="Initializing Database",o=new s.Database(X),F.value="Reading Field List Names";const ve=o.exec("SELECT models FROM col LIMIT 1;");if(ve.length>0&&ve[0].values.length>0){c=JSON.parse(ve[0].values[0][0]);for(const ce in c)if(Object.hasOwnProperty.call(c,ce)){const le=c[ce];h.value.push(le)}}}}function C(){F.value="Reading Field Names",m.value=c[Object.keys(c)[p.value-1]].flds,F.value="Awaiting User Selection"}async function P(){if(S.value<=r&&S.value>0){F.value="Checking Last Import and Amount Imported";let ue=null,Y=null;const X=await Ws(ht(t.db,`users/${t.auth.currentUser.uid}`));X.data().last_import==null?(F.value="Creating Last Import Field",await Ht(ht(t.db,`users/${t.auth.currentUser.uid}`),{last_import:st.fromDate(new Date(0))}).then(()=>{ue=new Date(0)})):ue=X.data().last_import.toDate();const xe=new Date,Ee=new Date(xe.getFullYear(),xe.getMonth(),xe.getDate());if(new Date(ue.getFullYear(),ue.getMonth(),ue.getDate())<Ee?(F.value="Updating Imports Remaining",await Ht(ht(t.db,`users/${t.auth.currentUser.uid}`),{imports_remaining:r,last_import:st.fromDate(new Date)}).then(()=>{Y=r})):X.data().imports_remaining==null?(F.value="Creating Import Remaining Field",await Ht(ht(t.db,`users/${t.auth.currentUser.uid}`),{imports_remaining:r,last_import:st.fromDate(new Date)}).then(()=>{Y=r})):Y=X.data().imports_remaining,Y>0)if(Y>=S.value){F.value="Getting Cards";const ce=o.exec("SELECT flds FROM notes;");if(ce.length>0&&ce[0].values.length>0){const le=ce[0].values;let ye="";K.value?ye=oe.value:(F.value="Creating Deck",ye=(await Ui(Wt(t.db,`users/${t.auth.currentUser.uid}/decks`),{name:N,new_cards_per_day:10,new_cards_today:10,last_update:st.fromDate(new Date(0)),index:t.decks.length,large_cards:!0,autoplay_media:!0,import_progress:0}).catch(_e=>{rt.fire({title:_e,color:"black",icon:"error"})})).id);let De=[];const Z=TD(ye);for(let ke=0;ke<le.length;ke++){const Re=le[ke][0].split(""),$e=Re[g.value-1],Ne=Re[b.value-1];let Q=null;if(O.value!==0){const te=Re[O.value-1].match(/<img[^>]+src=["']([^"']+)["']/i);te!==null&&(Q=te[1])}let H=null;D.value!==0&&(H=Re[D.value-1],H=H.substring(7,H.length-1));let v=null;E.value!==1?v=Re[E.value-2]:v=Z(),De.push({front:$e,back:Ne,index:v,image:Q,audio:H})}De.sort((ke,_e)=>ke.index-_e.index),F.value="Updating Last Import";let ze=null;De.length>S.value?ze=Y-S.value:ze=Y-De.length,Ht(ht(t.db,`users/${t.auth.currentUser.uid}`),{imports_remaining:ze}).then(async()=>{if(K.value)F.value="Getting Deck Import Progress",Ws(ht(t.db,`users/${t.auth.currentUser.uid}/decks/${oe.value}`)).then(async ke=>{let _e=null;ke.data().import_progress==null?(F.value="Creating Import Progress Field",await Ht(ht(t.db,`users/${t.auth.currentUser.uid}/decks/${oe.value}`),{import_progress:0}),_e=0):_e=ke.data().import_progress,F.value="Adding Cards";let Re=!1;for(let $e=_e;$e<De.length;$e++){const Ne=De[$e];if($e<_e+S.value){F.value=`Adding Cards ${$e}/${De.length}`;let Q=Ne.front,H=Ne.back;if(Ne.image!==null&&Ne.image.includes("<img")||Ne.front.includes("<img")||Ne.back.includes("<img")){let v=null,te=null,G=null;if(Ne.image!==null)v=jr(t.storage,`users/${t.auth.currentUser.uid}/decks/${ye}/images/${Ne.image}`),te=a[Ne.image].toString();else if(Ne.front.includes("<img")){G=Ne.front.match(/<img.*src=(.|\n)*?>/)[0];const q=G.match(/<img[^>]+src=["']([^"']+)["']/i)[1];v=jr(t.storage,`users/${t.auth.currentUser.uid}/decks/${ye}/images/${q}`),te=a[q].toString()}else if(Ne.back.includes("<img")){G=Ne.back.match(/<img.*src=(.|\n)*?>/)[0];const q=G.match(/<img[^>]+src=["']([^"']+)["']/i)[1];v=jr(t.storage,`users/${t.auth.currentUser.uid}/decks/${ye}/images/${q}`),te=a[q].toString()}const M=await i.file(te).async("uint8array");await hu(v,M);const $=await fu(v);Ne.image!==null?U.value?Q+=`
<img src="${$}">`:H+=`
<img src="${$}">`:Ne.front.includes("<img")?Q=Q.replace(G,`<img src="${$}">`):Ne.back.includes("<img")&&(H=H.replace(G,`<img src="${$}">`))}if(Ne.audio!==null&&Ne.audio!==""||Ne.front.includes("[sound:")||Ne.back.includes("[sound:")){let v=null,te=null,G=null;if(Ne.audio!==null&&Ne.audio!=="")v=jr(t.storage,`users/${t.auth.currentUser.uid}/decks/${ye}/audio/${Ne.audio}`),te=a[Ne.audio].toString();else if(Ne.front.includes("[sound:")){G=Ne.front.match(/\[sound:.*?\]/)[0];const q=G.substring(7,G.length-1);v=jr(t.storage,`users/${t.auth.currentUser.uid}/decks/${ye}/audio/${q}`),te=a[q].toString()}else if(Ne.back.includes("[sound:")){G=Ne.back.match(/\[sound:.*?\]/)[0];const q=G.substring(7,G.length-1);v=jr(t.storage,`users/${t.auth.currentUser.uid}/decks/${ye}/audio/${q}`),te=a[q].toString()}const M=await i.file(te).async("uint8array");await hu(v,M);const $=await fu(v);Ne.audio!==null&&Ne.audio!==""?V.value?Q+=`
<audio src="${$}" controls></audio>`:H+=`
<audio src="${$}" controls></audio>`:Ne.front.includes("[sound:")?Q=Q.replace(G,`<audio src="${$}" controls></audio>`):Ne.back.includes("[sound:")&&(H=H.replace(G,`<audio src="${$}" controls></audio>`))}await Ui(Wt(t.db,`users/${t.auth.currentUser.uid}/decks/${oe.value}/cards/`),{front:Q,back:H,streak:-1,new_card:!0,next_review:st.fromDate(new Date(new Date().getTime()+$e)),type_answer:L.value}).catch(v=>{rt.fire({title:v,color:"black",icon:"error"})})}else{Re=!0,F.value="Updating Import Progress",await Ht(ht(t.db,`users/${t.auth.currentUser.uid}/decks/${oe.value}`),{import_progress:$e});break}}Re?F.value="Selected Amount Reached":(F.value="Resetting Import Progress",await Ht(ht(t.db,`users/${t.auth.currentUser.uid}/decks/${oe.value}`),{import_progress:0}),F.value="Fully Imported"),R.value=!0});else{F.value="Adding Cards";let ke=!1;for(let _e=0;_e<De.length;_e++){const Re=De[_e];if(_e<S.value){F.value=`Adding Cards ${_e}/${De.length}`;let $e=Re.front,Ne=Re.back;if(Re.image!==null&&Re.image.includes("<img")||Re.front.includes("<img")||Re.back.includes("<img")){let Q=null,H=null,v=null;if(Re.image!==null)Q=jr(t.storage,`users/${t.auth.currentUser.uid}/decks/${ye}/images/${Re.image}`),H=a[Re.image].toString();else if(Re.front.includes("<img")){v=Re.front.match(/<img.*src=(.|\n)*?>/)[0];const M=v.match(/<img[^>]+src=["']([^"']+)["']/i)[1];Q=jr(t.storage,`users/${t.auth.currentUser.uid}/decks/${ye}/images/${M}`),H=a[M].toString()}else if(Re.back.includes("<img")){v=Re.back.match(/<img.*src=(.|\n)*?>/)[0];const M=v.match(/<img[^>]+src=["']([^"']+)["']/i)[1];Q=jr(t.storage,`users/${t.auth.currentUser.uid}/decks/${ye}/images/${M}`),H=a[M].toString()}const te=await i.file(H).async("uint8array");await hu(Q,te);const G=await fu(Q);Re.image!==null?U.value?$e+=`
<img src="${G}">`:Ne+=`
<img src="${G}">`:Re.front.includes("<img")?$e=$e.replace(v,`<img src="${G}">`):Re.back.includes("<img")&&(Ne=Ne.replace(v,`<img src="${G}">`))}if(Re.audio!==null&&Re.audio!==""||Re.front.includes("[sound:")||Re.back.includes("[sound:")){let Q=null,H=null,v=null;if(Re.audio!==null&&Re.audio!=="")Q=jr(t.storage,`users/${t.auth.currentUser.uid}/decks/${ye}/audio/${Re.audio}`),H=a[Re.audio].toString();else if(Re.front.includes("[sound:")){v=Re.front.match(/\[sound:.*?\]/)[0];const M=v.substring(7,v.length-1);Q=jr(t.storage,`users/${t.auth.currentUser.uid}/decks/${ye}/audio/${M}`),H=a[M].toString()}else if(Re.back.includes("[sound:")){v=Re.back.match(/\[sound:.*?\]/)[0];const M=v.substring(7,v.length-1);Q=jr(t.storage,`users/${t.auth.currentUser.uid}/decks/${ye}/audio/${M}`),H=a[M].toString()}const te=await i.file(H).async("uint8array");await hu(Q,te);const G=await fu(Q);Re.audio!==null&&Re.audio!==""?V.value?$e+=`
<audio src="${G}" controls></audio>`:Ne+=`
<audio src="${G}" controls></audio>`:Re.front.includes("[sound:")?$e=$e.replace(v,`<audio src="${G}" controls></audio>`):Re.back.includes("[sound:")&&(Ne=Ne.replace(v,`<audio src="${G}" controls></audio>`))}await Ui(Wt(t.db,`users/${t.auth.currentUser.uid}/decks/${ye}/cards/`),{front:$e,back:Ne,streak:-1,new_card:!0,next_review:st.fromDate(new Date(new Date().getTime()+_e)),type_answer:L.value}).catch(Q=>{rt.fire({title:Q,color:"black",icon:"error"})})}else{ke=!0,F.value="Updating Import Progress",await Ht(ht(t.db,`users/${t.auth.currentUser.uid}/decks/${ye}`),{import_progress:_e});break}}ke?F.value="Selected Amount Reached":(F.value="Resetting Import Progress",await Ht(ht(t.db,`users/${t.auth.currentUser.uid}/decks/${ye}`),{import_progress:0}),F.value="Fully Imported"),R.value=!0}}).catch(ke=>{rt.fire({title:ke,color:"black",icon:"error"})})}}else rt.fire({title:`You have ${Y} imports remaining today cards, which is lower than the selected amount. Please lower the selected amount.`,color:"black",icon:"error"});else rt.fire({title:`You have already imported ${r} cards today!`,color:"black",icon:"error"})}else rt.fire({title:`Amount can't be larger than ${r} or smaller than 1`,color:"black",icon:"error"})}function x(){window.location.reload()}return(ue,Y)=>(Me(),je("div",ID,[Y[38]||(Y[38]=W("p",{class:"text-4xl"},"Deck Importer",-1)),W("p",AD," You can only import max "+It(hr(r))+" cards total per day. Larger decks have to be imported over multiple days. Use the same settings and only select 'Add To Existing Deck' when importing over multiple days. ",1),W("div",xD,[Y[17]||(Y[17]=W("label",{for:"import_file_selector"},"Anki Deck: ",-1)),W("input",{onChange:Y[0]||(Y[0]=X=>z(X)),type:"file",accept:".apkg",id:"import_file_selector"},null,32)]),l.value?(Me(),je("div",CD,[Y[19]||(Y[19]=W("p",null,"Fields From:",-1)),Ze(W("select",{"onUpdate:modelValue":Y[1]||(Y[1]=X=>p.value=X),onChange:Y[2]||(Y[2]=X=>C()),class:"rounded-sm bg-teal-800 p-1"},[Y[18]||(Y[18]=W("option",{value:"0",disabled:""},"Select",-1)),(Me(!0),je(mn,null,ai(h.value,(X,xe)=>(Me(),je("option",{value:xe+1},It(X.name),9,SD))),256))],544),[[Xi,p.value]])])):Ot("",!0),m.value.length>0?(Me(),je("div",RD,[W("div",PD,[W("div",DD,[Y[21]||(Y[21]=W("p",null,"Front:",-1)),Ze(W("select",{"onUpdate:modelValue":Y[3]||(Y[3]=X=>g.value=X),class:"rounded-sm bg-teal-600 p-1"},[Y[20]||(Y[20]=W("option",{value:"0",disabled:""},"Select",-1)),(Me(!0),je(mn,null,ai(m.value,X=>(Me(),je("option",{value:X.ord+1},It(X.name),9,OD))),256))],512),[[Xi,g.value]])]),W("div",ND,[Y[23]||(Y[23]=W("p",null,"Back:",-1)),Ze(W("select",{"onUpdate:modelValue":Y[4]||(Y[4]=X=>b.value=X),class:"rounded-sm bg-teal-600 p-1"},[Y[22]||(Y[22]=W("option",{value:"0",disabled:""},"Select",-1)),(Me(!0),je(mn,null,ai(m.value,X=>(Me(),je("option",{value:X.ord+1},It(X.name),9,LD))),256))],512),[[Xi,b.value]])]),W("div",MD,[Y[26]||(Y[26]=W("p",null,"Sort By:",-1)),Ze(W("select",{"onUpdate:modelValue":Y[5]||(Y[5]=X=>E.value=X),class:"rounded-sm bg-yellow-600 p-1"},[Y[24]||(Y[24]=W("option",{value:0,disabled:""},"Select",-1)),Y[25]||(Y[25]=W("option",{value:1},"Random",-1)),(Me(!0),je(mn,null,ai(m.value,X=>(Me(),je("option",{value:X.ord+2},It(X.name),9,VD))),256))],512),[[Xi,E.value]])]),W("div",UD,[Y[29]||(Y[29]=W("p",null,"Image:",-1)),Ze(W("select",{"onUpdate:modelValue":Y[6]||(Y[6]=X=>O.value=X),class:"rounded-sm bg-violet-700 p-1"},[Y[27]||(Y[27]=W("option",{value:0},"None",-1)),(Me(!0),je(mn,null,ai(m.value,X=>(Me(),je("option",{value:X.ord+1},It(X.name),9,FD))),256))],512),[[Xi,O.value]]),Y[30]||(Y[30]=W("br",null,null,-1)),W("div",$D,[Y[28]||(Y[28]=W("label",{for:"select_image_front_elem"},"On front: ",-1)),Ze(W("input",{type:"checkbox",id:"select_image_front_elem","onUpdate:modelValue":Y[7]||(Y[7]=X=>U.value=X),class:"h-7 w-7"},null,512),[[Nr,U.value]])])]),W("div",BD,[Y[33]||(Y[33]=W("p",null,"Sound:",-1)),Ze(W("select",{"onUpdate:modelValue":Y[8]||(Y[8]=X=>D.value=X),class:"rounded-sm bg-pink-600 p-1"},[Y[31]||(Y[31]=W("option",{value:0},"None",-1)),(Me(!0),je(mn,null,ai(m.value,X=>(Me(),je("option",{value:X.ord+1},It(X.name),9,zD))),256))],512),[[Xi,D.value]]),Y[34]||(Y[34]=W("br",null,null,-1)),W("div",jD,[Y[32]||(Y[32]=W("label",{for:"select_sound_front_elem"},"On front: ",-1)),Ze(W("input",{type:"checkbox",id:"select_sound_front_elem","onUpdate:modelValue":Y[9]||(Y[9]=X=>V.value=X),class:"h-7 w-7"},null,512),[[Nr,V.value]])])]),W("div",qD,[Y[35]||(Y[35]=W("p",null,"Amount:",-1)),Ze(W("input",{"onUpdate:modelValue":Y[10]||(Y[10]=X=>S.value=X),type:"number",min:"1",max:hr(r),class:"w-[10ch] rounded-sm bg-blue-600 p-3 text-center"},null,8,HD),[[Gt,S.value]])])]),W("div",WD,[W("div",GD,[Y[36]||(Y[36]=W("label",{for:"exist_deck_checkbox"},"Add To Existing Deck: ",-1)),Ze(W("input",{type:"checkbox","onUpdate:modelValue":Y[11]||(Y[11]=X=>K.value=X),id:"exist_deck_checkbox",class:"h-7 w-7"},null,512),[[Nr,K.value]])]),K.value?(Me(),je("div",KD,[Ze(W("select",{"onUpdate:modelValue":Y[12]||(Y[12]=X=>oe.value=X),class:"rounded-sm bg-emerald-600 p-1"},[(Me(!0),je(mn,null,ai(n.decks,X=>(Me(),je("option",{value:X.id},It(X.name),9,QD))),256))],512),[[Xi,oe.value]])])):Ot("",!0)]),W("div",YD,[W("div",XD,[Y[37]||(Y[37]=W("label",{for:"type_ans_checkbox"},"Import As Type Answer: ",-1)),Ze(W("input",{type:"checkbox","onUpdate:modelValue":Y[13]||(Y[13]=X=>L.value=X),id:"type_ans_checkbox",class:"h-7 w-7"},null,512),[[Nr,L.value]])])])])):Ot("",!0),W("div",ZD,[R.value?(Me(),je("div",tO,[W("button",{onClick:Y[16]||(Y[16]=X=>x()),class:"rounded-sm bg-green-600 p-3 text-xl shadow-sm shadow-black"}," Refresh ")])):(Me(),je("div",JD,[W("button",{onClick:Y[14]||(Y[14]=X=>ue.$emit("close")),class:"rounded-sm bg-red-600 p-3 text-xl shadow-sm shadow-black"}," Cancel "),g.value!==0&&b.value!==0&&E.value!==0&&(!K.value||oe.value!=="")&&S.value<=hr(r)&&S.value>0?(Me(),je("div",eO,[W("button",{onClick:Y[15]||(Y[15]=X=>P()),class:"ml-3 rounded-sm bg-orange-600 p-3 text-xl shadow-sm shadow-black"}," Import ")])):Ot("",!0)]))]),W("div",nO,[W("p",null,"Status : "+It(F.value),1)])]))}},iO={class:"fixed bottom-0 left-0 right-0 top-0 z-50 bg-gray-600 bg-opacity-50"},sO={class:"fixed left-1/2 top-1/2 inline-block -translate-x-1/2 -translate-y-1/2 rounded-md bg-linear-to-r from-green-900 to-blue-900 p-3 text-center shadow-lg shadow-black"},oO={class:"mt-3 flex items-center justify-center rounded-sm bg-cyan-400 p-3 text-lg shadow-sm shadow-black"},aO={class:"mt-3 flex items-center justify-center rounded-sm bg-emerald-400 p-3 text-lg shadow-sm shadow-black"},lO={__name:"NewDeckMenu",props:["auth","db","storage","decks"],emits:["close","save"],setup(n,{emit:e}){const t=n,r=e,i=Ae(""),s=Ae(""),o=Ae(10),a=Ae(!1),l=Ae(!1);function c(){i.value!==""?o.value!==""?Ui(Wt(t.db,`users/${t.auth.currentUser.uid}/decks`),{name:i.value,new_cards_per_day:o.value,new_cards_today:o.value,last_update:st.fromDate(new Date(0)),index:t.decks.length,large_cards:a.value,autoplay_media:!0}).then(()=>{r("save"),r("close")}):rt.fire({title:"New cards per day cannot be empty!",color:"black",icon:"error"}):rt.fire({title:"Name cannot be empty!",color:"black",icon:"error"})}async function h(){s.value=await yc(i.value)}function p(){l.value=!0}function m(){l.value=!1}return(g,b)=>(Me(),je("div",iO,[W("div",sO,[Ze(W("input",{type:"text","onUpdate:modelValue":b[0]||(b[0]=E=>i.value=E),onInput:b[1]||(b[1]=E=>h()),style:yo({backgroundColor:s.value}),class:"rounded-sm bg-indigo-400 p-3 text-center text-lg placeholder-white shadow-sm shadow-black",placeholder:"Name"},null,36),[[Gt,i.value]]),W("div",oO,[b[7]||(b[7]=W("p",{class:"mr-1"},"New Cards Per Day:",-1)),Ze(W("input",{type:"number","onUpdate:modelValue":b[2]||(b[2]=E=>o.value=E),class:"w-[5ch] rounded-sm bg-cyan-500 p-1 text-center placeholder-white",placeholder:"?"},null,512),[[Gt,o.value,void 0,{number:!0}]])]),W("div",aO,[b[8]||(b[8]=W("label",{for:"large_cards_elem",class:"mr-1 select-none"},"Large Cards: ",-1)),Ze(W("input",{type:"checkbox",id:"large_cards_elem","onUpdate:modelValue":b[3]||(b[3]=E=>a.value=E),class:"h-6 w-6"},null,512),[[Nr,a.value]])]),W("div",null,[W("button",{onClick:b[4]||(b[4]=E=>g.$emit("close")),class:"mr-4 mt-3 rounded-sm bg-orange-300 p-3 text-xl shadow-sm shadow-black"}," Cancel "),W("button",{onClick:c,class:"mt-3 rounded-sm bg-rose-300 p-3 text-xl shadow-sm shadow-black"}," Create ")]),W("div",null,[W("button",{onClick:b[5]||(b[5]=E=>p()),class:"mt-7 rounded-sm bg-cyan-300 p-3 text-sm shadow-sm shadow-black"}," Import ")])]),l.value?(Me(),Ai(rO,{key:0,auth:n.auth,db:n.db,storage:n.storage,decks:n.decks,onClose:b[6]||(b[6]=E=>m())},null,8,["auth","db","storage","decks"])):Ot("",!0)]))}},uO={class:"fixed bottom-0 left-0 right-0 top-0 z-50 bg-gray-600 bg-opacity-50"},cO={class:"fixed left-1/2 top-1/2 inline-block -translate-x-1/2 -translate-y-1/2 rounded-md bg-linear-to-tr from-cyan-700 to-zinc-400 p-3 text-center shadow-lg shadow-black"},dO={class:"rounded-md bg-gray-500 p-3 shadow-sm shadow-black"},hO={__name:"NewCardMenu",props:["auth","db","deckId"],emits:["close"],setup(n,{emit:e}){const t=n,r=Ae(""),i=Ae(""),s=Ae(!1),o=Ae(!1),a=Ae(null);function l(){Ui(Wt(t.db,`users/${t.auth.currentUser.uid}/decks/${t.deckId}/cards/`),{front:r.value,back:i.value,streak:-1,new_card:!0,next_review:st.fromDate(new Date),type_answer:o.value}).catch(h=>{rt.fire({title:h,color:"black",icon:"error"})}),s.value&&Ui(Wt(t.db,`users/${t.auth.currentUser.uid}/decks/${t.deckId}/cards/`),{front:i.value,back:r.value,streak:-1,new_card:!0,next_review:st.fromDate(new Date),type_answer:o.value}).catch(h=>{rt.fire({title:h,color:"black",icon:"error"})}),r.value="",i.value="",a.value.focus()}function c(h){h.code=="Enter"&&l()}return(h,p)=>(Me(),je("div",uO,[W("div",cO,[p[10]||(p[10]=W("p",null,"Front",-1)),Ze(W("input",{type:"text",ref_key:"front_field_ref",ref:a,"onUpdate:modelValue":p[0]||(p[0]=m=>r.value=m),class:"rounded-sm bg-gray-600 p-3 text-center text-lg text-white shadow-sm shadow-black"},null,512),[[Gt,r.value]]),p[11]||(p[11]=W("hr",{class:"mb-4 mt-4 rounded-sm border-2 border-gray-400"},null,-1)),p[12]||(p[12]=W("p",null,"Back",-1)),Ze(W("input",{type:"text","onUpdate:modelValue":p[1]||(p[1]=m=>i.value=m),onKeypress:p[2]||(p[2]=m=>c(m)),class:"rounded-sm bg-gray-600 p-3 text-center text-lg text-white shadow-sm shadow-black"},null,544),[[Gt,i.value]]),p[13]||(p[13]=W("hr",{class:"mb-4 mt-4 rounded-sm border-2 border-gray-400"},null,-1)),W("div",dO,[p[7]||(p[7]=W("label",{for:"reversedCheck",class:"mr-3 text-center text-lg text-white"},"Create Reversed",-1)),Ze(W("input",{"onUpdate:modelValue":p[3]||(p[3]=m=>s.value=m),type:"checkbox",id:"reversedCheck",class:"h-7 w-7 translate-y-1"},null,512),[[Nr,s.value]]),p[8]||(p[8]=W("br",null,null,-1)),p[9]||(p[9]=W("label",{for:"typeAnsCheck",class:"mr-3 text-center text-lg text-white"},"Type Answer",-1)),Ze(W("input",{"onUpdate:modelValue":p[4]||(p[4]=m=>o.value=m),type:"checkbox",id:"typeAnsCheck",class:"h-7 w-7 translate-y-1"},null,512),[[Nr,o.value]])]),p[14]||(p[14]=W("hr",{class:"mb-4 mt-4 rounded-sm border-2 border-gray-400"},null,-1)),W("button",{onClick:p[5]||(p[5]=m=>h.$emit("close")),class:"mr-10 rounded-sm bg-red-400 px-3 py-2 text-lg text-white shadow-md shadow-gray-800"}," Cancel "),W("button",{onClick:p[6]||(p[6]=m=>l()),class:"rounded-sm bg-green-600 px-3 py-2 text-lg text-white shadow-md shadow-gray-800"}," Create ")])]))}},fO={class:"fixed bottom-0 left-0 right-0 top-0 z-50 bg-gray-600 bg-opacity-50"},pO={class:"fixed left-1/2 top-1/2 inline-block h-[600px] max-h-[100vh] w-[800px] max-w-[100vw] -translate-x-1/2 -translate-y-1/2 overflow-auto rounded-md bg-linear-to-tr from-slate-700 to-fuchsia-800 p-3 text-center shadow-lg shadow-black"},mO={class:"rounded-md bg-gray-500 p-3 shadow-sm shadow-black"},gO={__name:"NewLargeCard",props:["auth","db","deckId"],emits:["close"],setup(n,{emit:e}){const t=n,r=Ae(""),i=Ae(""),s=Ae(!1),o=Ae(!1),a=Ae(null),l=Ae(null);function c(){Ui(Wt(t.db,`users/${t.auth.currentUser.uid}/decks/${t.deckId}/cards/`),{front:r.value,back:i.value,streak:-1,new_card:!0,next_review:st.fromDate(new Date),type_answer:o.value}).catch(p=>{rt.fire({title:p,color:"black",icon:"error"})}),s.value&&Ui(Wt(t.db,`users/${t.auth.currentUser.uid}/decks/${t.deckId}/cards/`),{front:i.value,back:r.value,streak:-1,new_card:!0,next_review:st.fromDate(new Date),type_answer:o.value}).catch(p=>{rt.fire({title:p,color:"black",icon:"error"})}),r.value="",i.value="",a.value.style.height="auto",l.value.style.height="auto",a.value.focus()}function h(p){p?(a.value.style.height="auto",a.value.style.height=a.value.scrollHeight+"px"):(l.value.style.height="auto",l.value.style.height=l.value.scrollHeight+"px")}return(p,m)=>(Me(),je("div",fO,[W("div",pO,[m[11]||(m[11]=W("p",{class:"text-lg text-white"},"Front",-1)),Ze(W("textarea",{ref_key:"front_field_ref",ref:a,"onUpdate:modelValue":m[0]||(m[0]=g=>r.value=g),onInput:m[1]||(m[1]=g=>h(!0)),class:"min-h-[150px] w-full resize-none rounded-sm bg-gray-300 p-3 text-center text-lg text-black shadow-sm shadow-black"},null,544),[[Gt,r.value]]),m[12]||(m[12]=W("hr",{class:"mb-4 mt-4 rounded-sm border-2 border-gray-400"},null,-1)),m[13]||(m[13]=W("p",{class:"text-lg text-white"},"Back",-1)),Ze(W("textarea",{ref_key:"back_field_ref",ref:l,"onUpdate:modelValue":m[2]||(m[2]=g=>i.value=g),onInput:m[3]||(m[3]=g=>h(!1)),class:"min-h-[150px] w-full resize-none rounded-sm bg-gray-300 p-3 text-center text-lg text-black shadow-sm shadow-black"},null,544),[[Gt,i.value]]),m[14]||(m[14]=W("hr",{class:"mb-4 mt-4 rounded-sm border-2 border-gray-400"},null,-1)),W("div",mO,[m[8]||(m[8]=W("label",{for:"reversedCheck",class:"mr-3 text-center text-lg text-white"},"Create Reversed",-1)),Ze(W("input",{"onUpdate:modelValue":m[4]||(m[4]=g=>s.value=g),type:"checkbox",id:"reversedCheck",class:"h-7 w-7 translate-y-1"},null,512),[[Nr,s.value]]),m[9]||(m[9]=W("br",null,null,-1)),m[10]||(m[10]=W("label",{for:"typeAnsCheck",class:"mr-3 text-center text-lg text-white"},"Type Answer",-1)),Ze(W("input",{"onUpdate:modelValue":m[5]||(m[5]=g=>o.value=g),type:"checkbox",id:"typeAnsCheck",class:"h-7 w-7 translate-y-1"},null,512),[[Nr,o.value]])]),m[15]||(m[15]=W("hr",{class:"mb-4 mt-4 rounded-sm border-2 border-gray-400"},null,-1)),W("button",{onClick:m[6]||(m[6]=g=>p.$emit("close")),class:"mr-10 rounded-sm bg-red-400 px-3 py-2 text-lg text-white shadow-md shadow-gray-800"}," Cancel "),W("button",{onClick:m[7]||(m[7]=g=>c()),class:"rounded-sm bg-green-600 px-3 py-2 text-lg text-white shadow-md shadow-gray-800"}," Create ")])]))}},_O={class:"flex justify-center"},wO={class:"mt-8 inline-block rounded-xl bg-sky-600 p-3 text-center"},vO={class:"mt-1 rounded-xl bg-blue-200 p-1 text-xl"},yO={class:"mt-3"},bO={class:"rounded-xl bg-green-200 p-1"},EO={class:"text-lg"},kO={class:"mt-3"},TO={class:"rounded-xl bg-orange-200 p-1 text-xl"},IO={__name:"Timeline",props:["auth","db","deckId","showDays","newCards","reviewsDue","totalCards"],setup(n,{expose:e}){const t=n,r=Ae([]);async function i(){r.value=[];let s=[];const o=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],a=new Date,l=new Date(a.getFullYear(),a.getMonth(),a.getDate()),c=l.getDay();for(let h=0;h<t.showDays;h++){let p=c+h;p>=o.length&&(p-=o.length),r.value.push({name:o[p],reviews:0}),s.push({name:o[p],reviews:0})}for(let h=0;h<t.showDays;h++){let p=new Date(l);p.setDate(p.getDate()+h);let m=new Date(p);if(m.setDate(m.getDate()+1),h===0)s[0].reviews=t.reviewsDue;else{const g=await wo(kr(Wt(t.db,`users/${t.auth.currentUser.uid}/decks/${t.deckId}/cards`),_n("next_review",">=",st.fromDate(p)),_n("next_review","<",st.fromDate(m))));s[h].reviews=g.data().count}}r.value=s}return e({loadDays:i}),(s,o)=>(Me(),je("div",_O,[W("div",wO,[W("div",null,[o[0]||(o[0]=W("p",{class:"text-lg text-white"},"Timeline",-1)),(Me(!0),je(mn,null,ai(r.value,(a,l)=>(Me(),je("p",vO,[mo(" Reviews "+It(l===0?"Now":l===1?"Tomorrow":`on ${a.name}`)+": ",1),W("b",null,It(a.reviews),1)]))),256))]),W("div",yO,[o[4]||(o[4]=W("p",{class:"text-lg text-white"},"New Card Forecast",-1)),W("div",bO,[W("p",null," At the rate of "+It(n.newCards)+" new cards per day, you will accumulate... ",1),W("div",EO,[W("p",null,[W("b",null,It(n.newCards*7),1),o[1]||(o[1]=mo(" per Week "))]),W("p",null,[W("b",null,It(n.newCards*30),1),o[2]||(o[2]=mo(" per Month "))]),W("p",null,[W("b",null,It(n.newCards*365),1),o[3]||(o[3]=mo(" per Year "))])])])]),W("div",kO,[o[5]||(o[5]=W("p",{class:"text-lg text-white"},"Deck Data",-1)),W("div",TO,[W("p",null,"Total Cards: "+It(n.totalCards),1)])])])]))}},AO={key:0,class:"mt-5 overflow-auto whitespace-nowrap pb-3 text-center"},xO=["onClick","onDblclick"],CO={key:3,class:"mt-10"},SO={class:"flex justify-center text-center"},RO={class:"mr-10 text-lg"},PO={class:"text-lg"},DO={class:"flex justify-center"},OO={class:"mt-2"},NO={class:"mt-5 flex justify-center"},LO={key:4,class:"fixed bottom-0 left-0 right-0 top-0 z-50 bg-gray-600 bg-opacity-50"},MO={class:"bg-linear-to-tr fixed left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 rounded-md from-pink-700 to-pink-400 p-3 text-center shadow-lg shadow-black"},VO=["max"],UO={class:"mt-3 inline-block rounded-md bg-pink-400 p-3 text-white"},FO=["max"],$O={class:"mt-3 inline-block rounded-md bg-violet-400 p-3 text-white"},BO={__name:"Decks",props:["auth","db","storage"],emits:["loadSettings","review","largeReview"],setup(n,{expose:e,emit:t}){const r=n,i=t,s=Ae([]),o=Ae(""),a=Ae(0),l=Ae(0),c=Ae(0),h=Ae(-1),p=Ae(!1),m=Ae(!1),g=Ae(!1),b=Ae(null),E=Ae(null),S=Ae(null),O=Ae(0),U=Ae(!1),D=Ae(!1),V=Ae(100),K=Ae(0),oe=Ae(100),L=Ae(0);async function R(ze){o.value=ze;const ke=await wo(Wt(r.db,`users/${r.auth.currentUser.uid}/decks/${o.value}/cards`));c.value=ke.data().count;const _e=new Date,Re=await wo(kr(Wt(r.db,`users/${r.auth.currentUser.uid}/decks/${o.value}/cards`),_n("next_review","<=",st.fromDate(_e)))),$e=await wo(kr(Wt(r.db,`users/${r.auth.currentUser.uid}/decks/${o.value}/cards`),_n("next_review","<=",st.fromDate(_e)),_n("streak","==",-1)));a.value=Re.data().count-$e.data().count,l.value=$e.data().count,await rs(),S.value.loadDays();const Ne=s.value.find(Q=>Q.id===ze);O.value=Ne.new_cards_per_day,U.value=Ne.large_cards}async function N(){let ze=[];qr(Wt(r.db,`users/${r.auth.currentUser.uid}/decks`)).then(async ke=>{await Promise.all(ke.docs.map(async _e=>{ze.push({name:_e.data().name,color:await yc(_e.data().name),new_cards_per_day:_e.data().new_cards_per_day,id:_e.id,index:_e.data().index,large_cards:_e.data().large_cards,autoplay_media:_e.data().autoplay_media})})),ze.sort((_e,Re)=>_e.index-Re.index),s.value=ze}),F(),i("loadSettings")}function F(){o.value!==""&&R(o.value)}async function z(){const ze=await Ws(ht(r.db,`users/${r.auth.currentUser.uid}/decks/${o.value}`));let ke=[],_e=ze.data().new_cards_today;const Re=new Date,$e=new Date(Re.getFullYear(),Re.getMonth(),Re.getDate());$e>ze.data().last_update.toDate()&&(Ht(ht(r.db,`users/${r.auth.currentUser.uid}/decks/${o.value}`),{new_cards_today:ze.data().new_cards_per_day,last_update:st.fromDate($e)}),_e=ze.data().new_cards_per_day);const Ne=await qr(kr(Wt(r.db,`users/${r.auth.currentUser.uid}/decks/${o.value}/cards`),_n("next_review","<=",st.fromDate(Re)),_n("new_card","==",!1)));let Q=null;_e>0&&(Q=await qr(kr(Wt(r.db,`users/${r.auth.currentUser.uid}/decks/${o.value}/cards`),_n("next_review","<=",st.fromDate(Re)),_n("new_card","==",!0),po("next_review"),Rs(_e)))),Ne.forEach(H=>{ke.push({id:H.id,front:H.data().front,back:H.data().back,streak:H.data().streak,type_answer:!!H.data().type_answer})}),Q!==null&&Q.forEach(H=>{ke.push({id:H.id,front:H.data().front,back:H.data().back,streak:0,type_answer:!!H.data().type_answer}),Ht(ht(r.db,`users/${r.auth.currentUser.uid}/decks/${o.value}/cards/${H.id}`),{streak:0,new_card:!1}),_e-=1}),Ht(ht(r.db,`users/${r.auth.currentUser.uid}/decks/${o.value}`),{new_cards_today:_e}),ke.length!==0?ze.data().large_cards?i("largeReview",o.value,ke,ze.data().autoplay_media):i("review",o.value,ke):rt.fire({title:"No reviews on this deck at this time.",color:"black",icon:"info"})}async function C(){const ze=await Ws(ht(r.db,`users/${r.auth.currentUser.uid}/decks/${o.value}`));let ke=[],_e=ze.data().new_cards_today;const Re=new Date,$e=new Date(Re.getFullYear(),Re.getMonth(),Re.getDate());$e>ze.data().last_update.toDate()&&(Ht(ht(r.db,`users/${r.auth.currentUser.uid}/decks/${o.value}`),{new_cards_today:ze.data().new_cards_per_day,last_update:st.fromDate($e)}),_e=ze.data().new_cards_per_day);let Ne=null;K.value>0&&(Ne=await qr(kr(Wt(r.db,`users/${r.auth.currentUser.uid}/decks/${o.value}/cards`),_n("next_review","<=",st.fromDate(Re)),_n("new_card","==",!1),Rs(K.value))));let Q=null;L.value>0&&(Q=await qr(kr(Wt(r.db,`users/${r.auth.currentUser.uid}/decks/${o.value}/cards`),_n("next_review","<=",st.fromDate(Re)),_n("new_card","==",!0),po("next_review"),Rs(L.value)))),Ne!==null&&Ne.forEach(H=>{ke.push({id:H.id,front:H.data().front,back:H.data().back,streak:H.data().streak,type_answer:!!H.data().type_answer})}),Q!==null&&Q.forEach(H=>{ke.push({id:H.id,front:H.data().front,back:H.data().back,streak:0,type_answer:!!H.data().type_answer}),Ht(ht(r.db,`users/${r.auth.currentUser.uid}/decks/${o.value}/cards/${H.id}`),{streak:0,new_card:!1}),_e-=1}),Ht(ht(r.db,`users/${r.auth.currentUser.uid}/decks/${o.value}`),{new_cards_today:_e}),ke.length!==0?(D.value=!1,ze.data().large_cards?i("largeReview",o.value,ke,ze.data().autoplay_media):i("review",o.value,ke)):rt.fire({title:"No reviews selected.",color:"black",icon:"info"})}function P(){D.value=!0,V.value=a.value,K.value=Math.round(V.value/2),oe.value=l.value,L.value=Math.round(oe.value/2)}function x(){D.value=!1}async function ue(ze){h.value=ze,ye(!1),await rs(),b.value.loadInitialCards()}function Y(ze){h.value=-1,ye(!0),ze&&N()}function X(){p.value=!0,ye(!1)}function xe(){p.value=!1,ye(!0)}function Ee(){N()}function ve(){U.value?g.value=!0:m.value=!0,ye(!1)}function ce(){m.value=!1,ye(!0)}function le(){g.value=!1,ye(!0)}function ye(ze){ze?document.body.style.overflow="auto":document.body.style.overflow="hidden"}function De(){o.value=""}function Z(){De(),s.value=[]}return e({loadDecks:N,reselectDeck:F,logout:Z}),(ze,ke)=>(Me(),je(mn,null,[n.auth!==null&&n.auth.currentUser!==null?(Me(),je("div",AO,[(Me(!0),je(mn,null,ai(s.value,(_e,Re)=>(Me(),je("div",{key:_e.id,class:"mb-3 inline-block"},[W("button",{onClick:$e=>R(_e.id),onDblclick:$e=>ue(Re),style:yo({backgroundColor:_e.color,borderWidth:o.value==_e.id?"4px":"0px"}),class:"mr-5 rounded-sm border-white bg-white p-5 text-lg shadow-md shadow-black"},It(_e.name),45,xO)]))),128)),W("button",{onClick:ke[0]||(ke[0]=_e=>X()),class:"bg-linear-to-r rounded-sm from-emerald-700 to-lime-600 p-5 text-lg text-white shadow-md shadow-black"}," New Deck ")])):Ot("",!0),h.value!==-1?(Me(),Ai(zR,{key:1,auth:n.auth,db:n.db,deck:s.value[h.value],onClose:ke[1]||(ke[1]=_e=>Y(_e)),onDelete:ke[2]||(ke[2]=_e=>De()),ref_key:"edit_deck_menu_ref",ref:b},null,8,["auth","db","deck"])):Ot("",!0),p.value?(Me(),Ai(lO,{key:2,auth:n.auth,db:n.db,storage:n.storage,decks:s.value,onClose:ke[3]||(ke[3]=_e=>xe()),onSave:ke[4]||(ke[4]=_e=>Ee()),ref_key:"new_deck_menu_ref",ref:E},null,8,["auth","db","storage","decks"])):Ot("",!0),o.value!==""?(Me(),je("div",CO,[W("div",SO,[W("p",RO,[ke[16]||(ke[16]=mo(" New Cards: ")),W("b",null,It(l.value),1)]),W("p",PO,[ke[17]||(ke[17]=mo(" Reviews: ")),W("b",null,It(a.value),1)])]),W("div",DO,[W("div",OO,[W("button",{onClick:ke[5]||(ke[5]=_e=>ve()),class:"bg-linear-to-tr mr-5 rounded-lg from-orange-600 to-blue-500 p-3 text-2xl text-white shadow-lg shadow-black"}," New Card "),W("button",{onClick:ke[6]||(ke[6]=_e=>z()),class:"bg-linear-to-r rounded-lg from-green-500 to-amber-800 p-3 text-2xl text-white shadow-lg shadow-black"}," Review ")])]),W("div",NO,[W("button",{onClick:ke[7]||(ke[7]=_e=>P()),class:"bg-linear-to-br rounded-lg from-pink-500 to-pink-800 p-3 text-2xl text-white shadow-lg shadow-black"}," Selective Review ")])])):Ot("",!0),D.value?(Me(),je("div",LO,[W("div",MO,[W("button",{onClick:ke[8]||(ke[8]=_e=>x()),class:"rounded-lg bg-red-300 p-3 text-2xl text-white shadow-lg shadow-black"}," Close "),ke[18]||(ke[18]=W("br",null,null,-1)),ke[19]||(ke[19]=W("p",{class:"mt-5 text-white"},"Reviews",-1)),Ze(W("input",{type:"range","onUpdate:modelValue":ke[9]||(ke[9]=_e=>K.value=_e),min:"0",max:V.value,class:"mt-1 h-4 w-full cursor-pointer appearance-none rounded-md bg-gray-200 accent-[#4caf50] transition-all hover:h-6",onInput:ke[10]||(ke[10]=_e=>_e.target.style.background=`linear-gradient(to right, #4CAF50 0%, #4CAF50 ${(_e.target.value-_e.target.min)/(_e.target.max-_e.target.min)*100}%, #ddd ${(_e.target.value-_e.target.min)/(_e.target.max-_e.target.min)*100}%, #ddd 100%)`)},null,40,VO),[[Gt,K.value]]),ke[20]||(ke[20]=W("br",null,null,-1)),W("p",UO,It(K.value),1),ke[21]||(ke[21]=W("br",null,null,-1)),ke[22]||(ke[22]=W("p",{class:"mt-3 text-white"},"New Cards",-1)),Ze(W("input",{type:"range","onUpdate:modelValue":ke[11]||(ke[11]=_e=>L.value=_e),min:"0",max:oe.value,class:"mt-1 h-4 w-full cursor-pointer appearance-none rounded-md bg-gray-200 accent-[#4caf50] transition-all hover:h-6",onInput:ke[12]||(ke[12]=_e=>_e.target.style.background=`linear-gradient(to right, #4CAF50 0%, #4CAF50 ${(_e.target.value-_e.target.min)/(_e.target.max-_e.target.min)*100}%, #ddd ${(_e.target.value-_e.target.min)/(_e.target.max-_e.target.min)*100}%, #ddd 100%)`)},null,40,FO),[[Gt,L.value]]),ke[23]||(ke[23]=W("br",null,null,-1)),W("p",$O,It(L.value),1),ke[24]||(ke[24]=W("br",null,null,-1)),W("button",{onClick:ke[13]||(ke[13]=_e=>C()),class:"bg-linear-to-r mt-3 rounded-lg from-green-500 to-amber-800 p-3 text-2xl text-white shadow-lg shadow-black"}," Review ")])])):Ot("",!0),m.value?(Me(),Ai(hO,{key:5,auth:n.auth,db:n.db,"deck-id":o.value,onClose:ke[14]||(ke[14]=_e=>ce())},null,8,["auth","db","deck-id"])):Ot("",!0),g.value?(Me(),Ai(gO,{key:6,auth:n.auth,db:n.db,"deck-id":o.value,onClose:ke[15]||(ke[15]=_e=>le())},null,8,["auth","db","deck-id"])):Ot("",!0),o.value!==""?(Me(),Ai(IO,{key:7,auth:n.auth,db:n.db,"deck-id":o.value,"show-days":7,"new-cards":O.value,"reviews-due":a.value,"total-cards":c.value,ref_key:"timeline_ref",ref:S},null,8,["auth","db","deck-id","new-cards","reviews-due","total-cards"])):Ot("",!0)],64))}};var Md=typeof navigator<"u"?navigator.userAgent.toLowerCase().indexOf("firefox")>0:!1;function Vd(n,e,t,r){n.addEventListener?n.addEventListener(e,t,r):n.attachEvent&&n.attachEvent("on".concat(e),function(){t(window.event)})}function x0(n,e){for(var t=e.slice(0,e.length-1),r=0;r<t.length;r++)t[r]=n[t[r].toLowerCase()];return t}function C0(n){typeof n!="string"&&(n=""),n=n.replace(/\s/g,"");for(var e=n.split(","),t=e.lastIndexOf("");t>=0;)e[t-1]+=",",e.splice(t,1),t=e.lastIndexOf("");return e}function zO(n,e){for(var t=n.length>=e.length?n:e,r=n.length>=e.length?e:n,i=!0,s=0;s<t.length;s++)r.indexOf(t[s])===-1&&(i=!1);return i}var Cl={backspace:8,"":8,tab:9,clear:12,enter:13,"":13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"":20,",":188,".":190,"/":191,"`":192,"-":Md?173:189,"=":Md?61:187,";":Md?59:186,"'":222,"[":219,"]":221,"\\":220},zi={"":16,shift:16,"":18,alt:18,option:18,"":17,ctrl:17,control:17,"":91,cmd:91,command:91},Ph={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},Hn={16:!1,18:!1,17:!1,91:!1},En={};for(var mu=1;mu<20;mu++)Cl["f".concat(mu)]=111+mu;var an=[],c_=!1,S0="all",R0=[],Wl=function(e){return Cl[e.toLowerCase()]||zi[e.toLowerCase()]||e.toUpperCase().charCodeAt(0)},jO=function(e){return Object.keys(Cl).find(function(t){return Cl[t]===e})},qO=function(e){return Object.keys(zi).find(function(t){return zi[t]===e})};function P0(n){S0=n||"all"}function Sl(){return S0||"all"}function HO(){return an.slice(0)}function WO(){return an.map(function(n){return jO(n)||qO(n)||String.fromCharCode(n)})}function GO(){var n=[];return Object.keys(En).forEach(function(e){En[e].forEach(function(t){var r=t.key,i=t.scope,s=t.mods,o=t.shortcut;n.push({scope:i,shortcut:o,mods:s,keys:r.split("+").map(function(a){return Wl(a)})})})}),n}function KO(n){var e=n.target||n.srcElement,t=e.tagName,r=!0;return(e.isContentEditable||(t==="INPUT"||t==="TEXTAREA"||t==="SELECT")&&!e.readOnly)&&(r=!1),r}function QO(n){return typeof n=="string"&&(n=Wl(n)),an.indexOf(n)!==-1}function YO(n,e){var t,r;n||(n=Sl());for(var i in En)if(Object.prototype.hasOwnProperty.call(En,i))for(t=En[i],r=0;r<t.length;)t[r].scope===n?t.splice(r,1):r++;Sl()===n&&P0(e||"all")}function XO(n){var e=n.keyCode||n.which||n.charCode,t=an.indexOf(e);if(t>=0&&an.splice(t,1),n.key&&n.key.toLowerCase()==="meta"&&an.splice(0,an.length),(e===93||e===224)&&(e=91),e in Hn){Hn[e]=!1;for(var r in zi)zi[r]===e&&(qt[r]=!1)}}function ZO(n){if(typeof n>"u")Object.keys(En).forEach(function(o){return delete En[o]});else if(Array.isArray(n))n.forEach(function(o){o.key&&Ud(o)});else if(typeof n=="object")n.key&&Ud(n);else if(typeof n=="string"){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];var i=t[0],s=t[1];typeof i=="function"&&(s=i,i=""),Ud({key:n,scope:i,method:s,splitKey:"+"})}}var Ud=function(e){var t=e.key,r=e.scope,i=e.method,s=e.splitKey,o=s===void 0?"+":s,a=C0(t);a.forEach(function(l){var c=l.split(o),h=c.length,p=c[h-1],m=p==="*"?"*":Wl(p);if(En[m]){r||(r=Sl());var g=h>1?x0(zi,c):[];En[m]=En[m].filter(function(b){var E=i?b.method===i:!0;return!(E&&b.scope===r&&zO(b.mods,g))})}})};function d_(n,e,t,r){if(e.element===r){var i;if(e.scope===t||e.scope==="all"){i=e.mods.length>0;for(var s in Hn)Object.prototype.hasOwnProperty.call(Hn,s)&&(!Hn[s]&&e.mods.indexOf(+s)>-1||Hn[s]&&e.mods.indexOf(+s)===-1)&&(i=!1);(e.mods.length===0&&!Hn[16]&&!Hn[18]&&!Hn[17]&&!Hn[91]||i||e.shortcut==="*")&&(e.keys=[],e.keys=e.keys.concat(an),e.method(n,e)===!1&&(n.preventDefault?n.preventDefault():n.returnValue=!1,n.stopPropagation&&n.stopPropagation(),n.cancelBubble&&(n.cancelBubble=!0)))}}}function h_(n,e){var t=En["*"],r=n.keyCode||n.which||n.charCode;if(qt.filter.call(this,n)){if((r===93||r===224)&&(r=91),an.indexOf(r)===-1&&r!==229&&an.push(r),["ctrlKey","altKey","shiftKey","metaKey"].forEach(function(b){var E=Ph[b];n[b]&&an.indexOf(E)===-1?an.push(E):!n[b]&&an.indexOf(E)>-1?an.splice(an.indexOf(E),1):b==="metaKey"&&n[b]&&an.length===3&&(n.ctrlKey||n.shiftKey||n.altKey||(an=an.slice(an.indexOf(E))))}),r in Hn){Hn[r]=!0;for(var i in zi)zi[i]===r&&(qt[i]=!0);if(!t)return}for(var s in Hn)Object.prototype.hasOwnProperty.call(Hn,s)&&(Hn[s]=n[Ph[s]]);n.getModifierState&&!(n.altKey&&!n.ctrlKey)&&n.getModifierState("AltGraph")&&(an.indexOf(17)===-1&&an.push(17),an.indexOf(18)===-1&&an.push(18),Hn[17]=!0,Hn[18]=!0);var o=Sl();if(t)for(var a=0;a<t.length;a++)t[a].scope===o&&(n.type==="keydown"&&t[a].keydown||n.type==="keyup"&&t[a].keyup)&&d_(n,t[a],o,e);if(r in En){for(var l=0;l<En[r].length;l++)if((n.type==="keydown"&&En[r][l].keydown||n.type==="keyup"&&En[r][l].keyup)&&En[r][l].key){for(var c=En[r][l],h=c.splitKey,p=c.key.split(h),m=[],g=0;g<p.length;g++)m.push(Wl(p[g]));m.sort().join("")===an.sort().join("")&&d_(n,c,o,e)}}}}function JO(n){return R0.indexOf(n)>-1}function qt(n,e,t){an=[];var r=C0(n),i=[],s="all",o=document,a=0,l=!1,c=!0,h="+",p=!1;for(t===void 0&&typeof e=="function"&&(t=e),Object.prototype.toString.call(e)==="[object Object]"&&(e.scope&&(s=e.scope),e.element&&(o=e.element),e.keyup&&(l=e.keyup),e.keydown!==void 0&&(c=e.keydown),e.capture!==void 0&&(p=e.capture),typeof e.splitKey=="string"&&(h=e.splitKey)),typeof e=="string"&&(s=e);a<r.length;a++)n=r[a].split(h),i=[],n.length>1&&(i=x0(zi,n)),n=n[n.length-1],n=n==="*"?"*":Wl(n),n in En||(En[n]=[]),En[n].push({keyup:l,keydown:c,scope:s,mods:i,shortcut:r[a],method:t,key:r[a],splitKey:h,element:o});typeof o<"u"&&!JO(o)&&window&&(R0.push(o),Vd(o,"keydown",function(m){h_(m,o)},p),c_||(c_=!0,Vd(window,"focus",function(){an=[]},p)),Vd(o,"keyup",function(m){h_(m,o),XO(m)},p))}function e3(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"all";Object.keys(En).forEach(function(t){var r=En[t].filter(function(i){return i.scope===e&&i.shortcut===n});r.forEach(function(i){i&&i.method&&i.method()})})}var Fd={getPressedKeyString:WO,setScope:P0,getScope:Sl,deleteScope:YO,getPressedKeyCodes:HO,getAllKeyCodes:GO,isPressed:QO,filter:KO,trigger:e3,unbind:ZO,keyMap:Cl,modifier:zi,modifierMap:Ph};for(var $d in Fd)Object.prototype.hasOwnProperty.call(Fd,$d)&&(qt[$d]=Fd[$d]);if(typeof window<"u"){var t3=window.hotkeys;qt.noConflict=function(n){return n&&window.hotkeys===qt&&(window.hotkeys=t3),qt},window.hotkeys=qt}const n3="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='48'%20viewBox='0%20-960%20960%20960'%20width='48'%3e%3cpath%20d='m421-298%20283-283-46-45-237%20237-120-120-45%2045%20165%20166Zm59%20218q-82%200-155-31.5t-127.5-86Q143-252%20111.5-325T80-480q0-83%2031.5-156t86-127Q252-817%20325-848.5T480-880q83%200%20156%2031.5T763-763q54%2054%2085.5%20127T880-480q0%2082-31.5%20155T763-197.5q-54%2054.5-127%2086T480-80Zm0-60q142%200%20241-99.5T820-480q0-142-99-241t-241-99q-141%200-240.5%2099T140-480q0%20141%2099.5%20240.5T480-140Zm0-340Z'/%3e%3c/svg%3e",r3={key:0,class:"fixed bottom-0 left-0 right-0 top-0 z-50 bg-gray-600 bg-opacity-50"},i3={class:"mx-8 my-4 max-h-[10vh] overflow-auto break-all text-2xl text-white"},s3={key:0},o3={class:"mx-8 my-4 max-h-[10vh] overflow-auto break-all text-2xl text-white"},a3={key:0,class:"mt-8"},l3=["src"],u3=["src"],c3={key:1},d3={__name:"Review",props:["auth","db","timeDuration","timeMultiplier"],emits:["reselectDeck"],setup(n,{expose:e,emit:t}){const r=n,i=t;qt("space","review",function(L,R){L.preventDefault(),g()}),qt("space","yes_no",function(L,R){L.preventDefault(),E(!0)}),qt("c","yes_no",function(L,R){L.preventDefault(),E(!1)}),qt("space","check_type_ans",function(L,R){L.preventDefault(),b()}),qt("enter","check_type_ans",function(L,R){L.preventDefault(),b()});const s=Ae(!1),o=Ae(""),a=Ae([]),l=Ae(0),c=Ae(!1),h=Ae(""),p=Ae(null);function m(L,R){o.value=L,a.value=R,l.value=U(0,a.value.length),s.value=!0,qt.setScope("review"),document.body.style.overflow="hidden",a.value[l.value].type_answer&&O()}function g(){a.value[l.value].type_answer?qt.getScope()==="check_type_ans"&&b():(c.value=!0,qt.setScope("yes_no"))}function b(){const L=a.value[l.value].back.replace(/\[.*?\]/g,"");h.value===L?(E(!0),h.value=""):(E(!1),h.value="")}function E(L){const R=new Date,N=new Date(R.getFullYear(),R.getMonth(),R.getDate());if(L===!0)if(a.value[l.value].streak===0)a.value[l.value].streak=.5,K(!0);else if(a.value[l.value].streak===.5){let F=new Date(N);F.setDate(F.getDate()+1),Ht(ht(r.db,`users/${r.auth.currentUser.uid}/decks/${o.value}/cards/${a.value[l.value].id}`),{next_review:st.fromDate(F),streak:1}),V()}else{const F=Math.pow(r.timeMultiplier,a.value[l.value].streak)*r.timeDuration,z=Math.floor(F/24);let C=new Date(N);C.setDate(C.getDate()+z),Ht(ht(r.db,`users/${r.auth.currentUser.uid}/decks/${o.value}/cards/${a.value[l.value].id}`),{next_review:st.fromDate(C),streak:a.value[l.value].streak+1}),V()}else a.value[l.value].streak!==0&&a.value[l.value].streak!==.5&&Ht(ht(r.db,`users/${r.auth.currentUser.uid}/decks/${o.value}/cards/${a.value[l.value].id}`),{next_review:st.fromDate(new Date),streak:0}),a.value[l.value].streak=0,K(!0);a.value.length>0&&a.value[l.value].type_answer&&O()}function S(){c.value=!0,qt.setScope("check_type_ans")}async function O(){await rs(),p.value.focus()}function U(L,R){return Math.floor(Math.random()*(R-L))+L}function D(){s.value=!1,c.value=!1,qt.setScope("all"),document.body.style.overflow="auto",i("reselectDeck")}function V(){a.value.splice(l.value,1),a.value.length!==0?K(!1):(D(),rt.fire({title:"You've finished all reviews for today.",text:"Come back tomorrow for more.",color:"black",icon:"success"}))}function K(L){if(L)if(a.value.length!==1){let R=U(0,a.value.length);for(;R===l.value;)R=U(0,a.value.length);l.value=R}else l.value=0;else l.value=U(0,a.value.length);c.value=!1,qt.setScope("review")}function oe(L){L.code=="Enter"&&S()}return e({reviewCards:m}),(L,R)=>s.value?(Me(),je("div",r3,[W("button",{onClick:R[0]||(R[0]=N=>D()),class:"fixed left-1/2 top-[20%] -translate-x-1/2 rounded-sm bg-gray-700 p-3 text-white"}," Cancel "),W("div",{onClick:R[6]||(R[6]=N=>g()),class:"bg-linear-to-t fixed left-1/2 top-1/3 min-w-[300px] -translate-x-1/2 rounded-lg from-pink-700 to-purple-800 p-10 text-center shadow-xl shadow-black"},[W("p",i3,It(a.value[l.value].front),1),c.value===!0?(Me(),je("div",s3,[R[7]||(R[7]=W("hr",{class:"mx-3 rounded-full border-2 border-white"},null,-1)),W("p",o3,It(a.value[l.value].back),1),R[8]||(R[8]=W("br",null,null,-1)),a.value[l.value].type_answer?Ot("",!0):(Me(),je("div",a3,[W("button",{onClick:R[1]||(R[1]=vd(N=>E(!1),["stop"])),class:"bg-linear-to-br mr-10 rounded-full from-pink-500 to-red-900 p-1 shadow-md shadow-black"},[W("img",{height:"65",width:"65",src:hr(ep),alt:"No",draggable:"false"},null,8,l3)]),W("button",{onClick:R[2]||(R[2]=vd(N=>E(!0),["stop"])),class:"bg-linear-to-br rounded-full from-purple-500 to-blue-900 p-1 shadow-md shadow-black"},[W("img",{height:"65",width:"65",src:hr(n3),alt:"Yes",draggable:"false"},null,8,u3)])]))])):Ot("",!0),a.value[l.value].type_answer===!0&&c.value===!1?(Me(),je("div",c3,[R[9]||(R[9]=W("hr",{class:"mx-3 rounded-full border-2 border-white"},null,-1)),Ze(W("input",{ref_key:"answer_field_ref",ref:p,"onUpdate:modelValue":R[3]||(R[3]=N=>h.value=N),type:"text",placeholder:"Type Answer",onKeypress:R[4]||(R[4]=N=>oe(N)),class:"bg-linear-to-r my-4 w-[250px] rounded-md from-purple-500 to-pink-500 p-3 text-center text-2xl text-white placeholder-black shadow-sm shadow-black"},null,544),[[Gt,h.value]]),R[10]||(R[10]=W("br",null,null,-1)),W("button",{onClick:R[5]||(R[5]=vd(N=>S(),["stop"])),class:"bg-linear-to-br mt-2 rounded-md from-purple-500 to-blue-900 p-3 text-xl text-white shadow-md shadow-black"}," Check ")])):Ot("",!0)])])):Ot("",!0)}};/*! @license DOMPurify 3.2.4 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.4/LICENSE */const{entries:D0,setPrototypeOf:f_,isFrozen:h3,getPrototypeOf:f3,getOwnPropertyDescriptor:p3}=Object;let{freeze:_r,seal:Qr,create:O0}=Object,{apply:Dh,construct:Oh}=typeof Reflect<"u"&&Reflect;_r||(_r=function(e){return e});Qr||(Qr=function(e){return e});Dh||(Dh=function(e,t,r){return e.apply(t,r)});Oh||(Oh=function(e,t){return new e(...t)});const gu=wr(Array.prototype.forEach),m3=wr(Array.prototype.lastIndexOf),p_=wr(Array.prototype.pop),$a=wr(Array.prototype.push),g3=wr(Array.prototype.splice),Hu=wr(String.prototype.toLowerCase),Bd=wr(String.prototype.toString),m_=wr(String.prototype.match),Ba=wr(String.prototype.replace),_3=wr(String.prototype.indexOf),w3=wr(String.prototype.trim),oi=wr(Object.prototype.hasOwnProperty),ur=wr(RegExp.prototype.test),za=v3(TypeError);function wr(n){return function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return Dh(n,e,r)}}function v3(n){return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Oh(n,t)}}function yt(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Hu;f_&&f_(n,null);let r=e.length;for(;r--;){let i=e[r];if(typeof i=="string"){const s=t(i);s!==i&&(h3(e)||(e[r]=s),i=s)}n[i]=!0}return n}function y3(n){for(let e=0;e<n.length;e++)oi(n,e)||(n[e]=null);return n}function fo(n){const e=O0(null);for(const[t,r]of D0(n))oi(n,t)&&(Array.isArray(r)?e[t]=y3(r):r&&typeof r=="object"&&r.constructor===Object?e[t]=fo(r):e[t]=r);return e}function ja(n,e){for(;n!==null;){const r=p3(n,e);if(r){if(r.get)return wr(r.get);if(typeof r.value=="function")return wr(r.value)}n=f3(n)}function t(){return null}return t}const g_=_r(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),zd=_r(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),jd=_r(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),b3=_r(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),qd=_r(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),E3=_r(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),__=_r(["#text"]),w_=_r(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Hd=_r(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),v_=_r(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),_u=_r(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),k3=Qr(/\{\{[\w\W]*|[\w\W]*\}\}/gm),T3=Qr(/<%[\w\W]*|[\w\W]*%>/gm),I3=Qr(/\$\{[\w\W]*/gm),A3=Qr(/^data-[\-\w.\u00B7-\uFFFF]+$/),x3=Qr(/^aria-[\-\w]+$/),N0=Qr(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),C3=Qr(/^(?:\w+script|data):/i),S3=Qr(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),L0=Qr(/^html$/i),R3=Qr(/^[a-z][.\w]*(-[.\w]+)+$/i);var y_=Object.freeze({__proto__:null,ARIA_ATTR:x3,ATTR_WHITESPACE:S3,CUSTOM_ELEMENT:R3,DATA_ATTR:A3,DOCTYPE_NAME:L0,ERB_EXPR:T3,IS_ALLOWED_URI:N0,IS_SCRIPT_OR_DATA:C3,MUSTACHE_EXPR:k3,TMPLIT_EXPR:I3});const qa={element:1,text:3,progressingInstruction:7,comment:8,document:9},P3=function(){return typeof window>"u"?null:window},D3=function(e,t){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let r=null;const i="data-tt-policy-suffix";t&&t.hasAttribute(i)&&(r=t.getAttribute(i));const s="dompurify"+(r?"#"+r:"");try{return e.createPolicy(s,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+s+" could not be created."),null}},b_=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function M0(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:P3();const e=Ge=>M0(Ge);if(e.version="3.2.4",e.removed=[],!n||!n.document||n.document.nodeType!==qa.document||!n.Element)return e.isSupported=!1,e;let{document:t}=n;const r=t,i=r.currentScript,{DocumentFragment:s,HTMLTemplateElement:o,Node:a,Element:l,NodeFilter:c,NamedNodeMap:h=n.NamedNodeMap||n.MozNamedAttrMap,HTMLFormElement:p,DOMParser:m,trustedTypes:g}=n,b=l.prototype,E=ja(b,"cloneNode"),S=ja(b,"remove"),O=ja(b,"nextSibling"),U=ja(b,"childNodes"),D=ja(b,"parentNode");if(typeof o=="function"){const Ge=t.createElement("template");Ge.content&&Ge.content.ownerDocument&&(t=Ge.content.ownerDocument)}let V,K="";const{implementation:oe,createNodeIterator:L,createDocumentFragment:R,getElementsByTagName:N}=t,{importNode:F}=r;let z=b_();e.isSupported=typeof D0=="function"&&typeof D=="function"&&oe&&oe.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:C,ERB_EXPR:P,TMPLIT_EXPR:x,DATA_ATTR:ue,ARIA_ATTR:Y,IS_SCRIPT_OR_DATA:X,ATTR_WHITESPACE:xe,CUSTOM_ELEMENT:Ee}=y_;let{IS_ALLOWED_URI:ve}=y_,ce=null;const le=yt({},[...g_,...zd,...jd,...qd,...__]);let ye=null;const De=yt({},[...w_,...Hd,...v_,..._u]);let Z=Object.seal(O0(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ze=null,ke=null,_e=!0,Re=!0,$e=!1,Ne=!0,Q=!1,H=!0,v=!1,te=!1,G=!1,M=!1,$=!1,q=!1,ae=!0,ie=!1;const J="user-content-";let de=!0,ge=!1,pe={},Ce=null;const Ve=yt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Ue=null;const ct=yt({},["audio","video","img","source","image","track"]);let at=null;const bt=yt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),gt="http://www.w3.org/1998/Math/MathML",pt="http://www.w3.org/2000/svg",zt="http://www.w3.org/1999/xhtml";let Et=zt,Nt=!1,On=null;const Je=yt({},[gt,pt,zt],Bd);let vr=yt({},["mi","mo","mn","ms","mtext"]),Bn=yt({},["annotation-xml"]);const zn=yt({},["title","style","font","a","script"]);let nn=null;const yr=["application/xhtml+xml","text/html"],Dt="text/html";let Ct=null,Oe=null;const In=t.createElement("form"),Kt=function(se){return se instanceof RegExp||se instanceof Function},nr=function(){let se=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Oe&&Oe===se)){if((!se||typeof se!="object")&&(se={}),se=fo(se),nn=yr.indexOf(se.PARSER_MEDIA_TYPE)===-1?Dt:se.PARSER_MEDIA_TYPE,Ct=nn==="application/xhtml+xml"?Bd:Hu,ce=oi(se,"ALLOWED_TAGS")?yt({},se.ALLOWED_TAGS,Ct):le,ye=oi(se,"ALLOWED_ATTR")?yt({},se.ALLOWED_ATTR,Ct):De,On=oi(se,"ALLOWED_NAMESPACES")?yt({},se.ALLOWED_NAMESPACES,Bd):Je,at=oi(se,"ADD_URI_SAFE_ATTR")?yt(fo(bt),se.ADD_URI_SAFE_ATTR,Ct):bt,Ue=oi(se,"ADD_DATA_URI_TAGS")?yt(fo(ct),se.ADD_DATA_URI_TAGS,Ct):ct,Ce=oi(se,"FORBID_CONTENTS")?yt({},se.FORBID_CONTENTS,Ct):Ve,ze=oi(se,"FORBID_TAGS")?yt({},se.FORBID_TAGS,Ct):{},ke=oi(se,"FORBID_ATTR")?yt({},se.FORBID_ATTR,Ct):{},pe=oi(se,"USE_PROFILES")?se.USE_PROFILES:!1,_e=se.ALLOW_ARIA_ATTR!==!1,Re=se.ALLOW_DATA_ATTR!==!1,$e=se.ALLOW_UNKNOWN_PROTOCOLS||!1,Ne=se.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Q=se.SAFE_FOR_TEMPLATES||!1,H=se.SAFE_FOR_XML!==!1,v=se.WHOLE_DOCUMENT||!1,M=se.RETURN_DOM||!1,$=se.RETURN_DOM_FRAGMENT||!1,q=se.RETURN_TRUSTED_TYPE||!1,G=se.FORCE_BODY||!1,ae=se.SANITIZE_DOM!==!1,ie=se.SANITIZE_NAMED_PROPS||!1,de=se.KEEP_CONTENT!==!1,ge=se.IN_PLACE||!1,ve=se.ALLOWED_URI_REGEXP||N0,Et=se.NAMESPACE||zt,vr=se.MATHML_TEXT_INTEGRATION_POINTS||vr,Bn=se.HTML_INTEGRATION_POINTS||Bn,Z=se.CUSTOM_ELEMENT_HANDLING||{},se.CUSTOM_ELEMENT_HANDLING&&Kt(se.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Z.tagNameCheck=se.CUSTOM_ELEMENT_HANDLING.tagNameCheck),se.CUSTOM_ELEMENT_HANDLING&&Kt(se.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Z.attributeNameCheck=se.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),se.CUSTOM_ELEMENT_HANDLING&&typeof se.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Z.allowCustomizedBuiltInElements=se.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Q&&(Re=!1),$&&(M=!0),pe&&(ce=yt({},__),ye=[],pe.html===!0&&(yt(ce,g_),yt(ye,w_)),pe.svg===!0&&(yt(ce,zd),yt(ye,Hd),yt(ye,_u)),pe.svgFilters===!0&&(yt(ce,jd),yt(ye,Hd),yt(ye,_u)),pe.mathMl===!0&&(yt(ce,qd),yt(ye,v_),yt(ye,_u))),se.ADD_TAGS&&(ce===le&&(ce=fo(ce)),yt(ce,se.ADD_TAGS,Ct)),se.ADD_ATTR&&(ye===De&&(ye=fo(ye)),yt(ye,se.ADD_ATTR,Ct)),se.ADD_URI_SAFE_ATTR&&yt(at,se.ADD_URI_SAFE_ATTR,Ct),se.FORBID_CONTENTS&&(Ce===Ve&&(Ce=fo(Ce)),yt(Ce,se.FORBID_CONTENTS,Ct)),de&&(ce["#text"]=!0),v&&yt(ce,["html","head","body"]),ce.table&&(yt(ce,["tbody"]),delete ze.tbody),se.TRUSTED_TYPES_POLICY){if(typeof se.TRUSTED_TYPES_POLICY.createHTML!="function")throw za('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof se.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw za('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');V=se.TRUSTED_TYPES_POLICY,K=V.createHTML("")}else V===void 0&&(V=D3(g,i)),V!==null&&typeof K=="string"&&(K=V.createHTML(""));_r&&_r(se),Oe=se}},cn=yt({},[...zd,...jd,...b3]),dt=yt({},[...qd,...E3]),rn=function(se){let Pe=D(se);(!Pe||!Pe.tagName)&&(Pe={namespaceURI:Et,tagName:"template"});const qe=Hu(se.tagName),_t=Hu(Pe.tagName);return On[se.namespaceURI]?se.namespaceURI===pt?Pe.namespaceURI===zt?qe==="svg":Pe.namespaceURI===gt?qe==="svg"&&(_t==="annotation-xml"||vr[_t]):!!cn[qe]:se.namespaceURI===gt?Pe.namespaceURI===zt?qe==="math":Pe.namespaceURI===pt?qe==="math"&&Bn[_t]:!!dt[qe]:se.namespaceURI===zt?Pe.namespaceURI===pt&&!Bn[_t]||Pe.namespaceURI===gt&&!vr[_t]?!1:!dt[qe]&&(zn[qe]||!cn[qe]):!!(nn==="application/xhtml+xml"&&On[se.namespaceURI]):!1},Qt=function(se){$a(e.removed,{element:se});try{D(se).removeChild(se)}catch{S(se)}},Xt=function(se,Pe){try{$a(e.removed,{attribute:Pe.getAttributeNode(se),from:Pe})}catch{$a(e.removed,{attribute:null,from:Pe})}if(Pe.removeAttribute(se),se==="is")if(M||$)try{Qt(Pe)}catch{}else try{Pe.setAttribute(se,"")}catch{}},sn=function(se){let Pe=null,qe=null;if(G)se="<remove></remove>"+se;else{const Zt=m_(se,/^[\r\n\t ]+/);qe=Zt&&Zt[0]}nn==="application/xhtml+xml"&&Et===zt&&(se='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+se+"</body></html>");const _t=V?V.createHTML(se):se;if(Et===zt)try{Pe=new m().parseFromString(_t,nn)}catch{}if(!Pe||!Pe.documentElement){Pe=oe.createDocument(Et,"template",null);try{Pe.documentElement.innerHTML=Nt?K:_t}catch{}}const gn=Pe.body||Pe.documentElement;return se&&qe&&gn.insertBefore(t.createTextNode(qe),gn.childNodes[0]||null),Et===zt?N.call(Pe,v?"html":"body")[0]:v?Pe.documentElement:gn},Rt=function(se){return L.call(se.ownerDocument||se,se,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},Vr=function(se){return se instanceof p&&(typeof se.nodeName!="string"||typeof se.textContent!="string"||typeof se.removeChild!="function"||!(se.attributes instanceof h)||typeof se.removeAttribute!="function"||typeof se.setAttribute!="function"||typeof se.namespaceURI!="string"||typeof se.insertBefore!="function"||typeof se.hasChildNodes!="function")},fi=function(se){return typeof a=="function"&&se instanceof a};function vn(Ge,se,Pe){gu(Ge,qe=>{qe.call(e,se,Pe,Oe)})}const xt=function(se){let Pe=null;if(vn(z.beforeSanitizeElements,se,null),Vr(se))return Qt(se),!0;const qe=Ct(se.nodeName);if(vn(z.uponSanitizeElement,se,{tagName:qe,allowedTags:ce}),se.hasChildNodes()&&!fi(se.firstElementChild)&&ur(/<[/\w]/g,se.innerHTML)&&ur(/<[/\w]/g,se.textContent)||se.nodeType===qa.progressingInstruction||H&&se.nodeType===qa.comment&&ur(/<[/\w]/g,se.data))return Qt(se),!0;if(!ce[qe]||ze[qe]){if(!ze[qe]&&Ur(qe)&&(Z.tagNameCheck instanceof RegExp&&ur(Z.tagNameCheck,qe)||Z.tagNameCheck instanceof Function&&Z.tagNameCheck(qe)))return!1;if(de&&!Ce[qe]){const _t=D(se)||se.parentNode,gn=U(se)||se.childNodes;if(gn&&_t){const Zt=gn.length;for(let dn=Zt-1;dn>=0;--dn){const Nn=E(gn[dn],!0);Nn.__removalCount=(se.__removalCount||0)+1,_t.insertBefore(Nn,O(se))}}}return Qt(se),!0}return se instanceof l&&!rn(se)||(qe==="noscript"||qe==="noembed"||qe==="noframes")&&ur(/<\/no(script|embed|frames)/i,se.innerHTML)?(Qt(se),!0):(Q&&se.nodeType===qa.text&&(Pe=se.textContent,gu([C,P,x],_t=>{Pe=Ba(Pe,_t," ")}),se.textContent!==Pe&&($a(e.removed,{element:se.cloneNode()}),se.textContent=Pe)),vn(z.afterSanitizeElements,se,null),!1)},Yr=function(se,Pe,qe){if(ae&&(Pe==="id"||Pe==="name")&&(qe in t||qe in In))return!1;if(!(Re&&!ke[Pe]&&ur(ue,Pe))){if(!(_e&&ur(Y,Pe))){if(!ye[Pe]||ke[Pe]){if(!(Ur(se)&&(Z.tagNameCheck instanceof RegExp&&ur(Z.tagNameCheck,se)||Z.tagNameCheck instanceof Function&&Z.tagNameCheck(se))&&(Z.attributeNameCheck instanceof RegExp&&ur(Z.attributeNameCheck,Pe)||Z.attributeNameCheck instanceof Function&&Z.attributeNameCheck(Pe))||Pe==="is"&&Z.allowCustomizedBuiltInElements&&(Z.tagNameCheck instanceof RegExp&&ur(Z.tagNameCheck,qe)||Z.tagNameCheck instanceof Function&&Z.tagNameCheck(qe))))return!1}else if(!at[Pe]){if(!ur(ve,Ba(qe,xe,""))){if(!((Pe==="src"||Pe==="xlink:href"||Pe==="href")&&se!=="script"&&_3(qe,"data:")===0&&Ue[se])){if(!($e&&!ur(X,Ba(qe,xe,"")))){if(qe)return!1}}}}}}return!0},Ur=function(se){return se!=="annotation-xml"&&m_(se,Ee)},Vn=function(se){vn(z.beforeSanitizeAttributes,se,null);const{attributes:Pe}=se;if(!Pe||Vr(se))return;const qe={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ye,forceKeepAttr:void 0};let _t=Pe.length;for(;_t--;){const gn=Pe[_t],{name:Zt,namespaceURI:dn,value:Nn}=gn,Un=Ct(Zt);let Vt=Zt==="value"?Nn:w3(Nn);if(qe.attrName=Un,qe.attrValue=Vt,qe.keepAttr=!0,qe.forceKeepAttr=void 0,vn(z.uponSanitizeAttribute,se,qe),Vt=qe.attrValue,ie&&(Un==="id"||Un==="name")&&(Xt(Zt,se),Vt=J+Vt),H&&ur(/((--!?|])>)|<\/(style|title)/i,Vt)){Xt(Zt,se);continue}if(qe.forceKeepAttr||(Xt(Zt,se),!qe.keepAttr))continue;if(!Ne&&ur(/\/>/i,Vt)){Xt(Zt,se);continue}Q&&gu([C,P,x],pi=>{Vt=Ba(Vt,pi," ")});const rr=Ct(se.nodeName);if(Yr(rr,Un,Vt)){if(V&&typeof g=="object"&&typeof g.getAttributeType=="function"&&!dn)switch(g.getAttributeType(rr,Un)){case"TrustedHTML":{Vt=V.createHTML(Vt);break}case"TrustedScriptURL":{Vt=V.createScriptURL(Vt);break}}try{dn?se.setAttributeNS(dn,Zt,Vt):se.setAttribute(Zt,Vt),Vr(se)?Qt(se):p_(e.removed)}catch{}}}vn(z.afterSanitizeAttributes,se,null)},Xr=function Ge(se){let Pe=null;const qe=Rt(se);for(vn(z.beforeSanitizeShadowDOM,se,null);Pe=qe.nextNode();)vn(z.uponSanitizeShadowNode,Pe,null),xt(Pe),Vn(Pe),Pe.content instanceof s&&Ge(Pe.content);vn(z.afterSanitizeShadowDOM,se,null)};return e.sanitize=function(Ge){let se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Pe=null,qe=null,_t=null,gn=null;if(Nt=!Ge,Nt&&(Ge="<!-->"),typeof Ge!="string"&&!fi(Ge))if(typeof Ge.toString=="function"){if(Ge=Ge.toString(),typeof Ge!="string")throw za("dirty is not a string, aborting")}else throw za("toString is not a function");if(!e.isSupported)return Ge;if(te||nr(se),e.removed=[],typeof Ge=="string"&&(ge=!1),ge){if(Ge.nodeName){const Nn=Ct(Ge.nodeName);if(!ce[Nn]||ze[Nn])throw za("root node is forbidden and cannot be sanitized in-place")}}else if(Ge instanceof a)Pe=sn("<!---->"),qe=Pe.ownerDocument.importNode(Ge,!0),qe.nodeType===qa.element&&qe.nodeName==="BODY"||qe.nodeName==="HTML"?Pe=qe:Pe.appendChild(qe);else{if(!M&&!Q&&!v&&Ge.indexOf("<")===-1)return V&&q?V.createHTML(Ge):Ge;if(Pe=sn(Ge),!Pe)return M?null:q?K:""}Pe&&G&&Qt(Pe.firstChild);const Zt=Rt(ge?Ge:Pe);for(;_t=Zt.nextNode();)xt(_t),Vn(_t),_t.content instanceof s&&Xr(_t.content);if(ge)return Ge;if(M){if($)for(gn=R.call(Pe.ownerDocument);Pe.firstChild;)gn.appendChild(Pe.firstChild);else gn=Pe;return(ye.shadowroot||ye.shadowrootmode)&&(gn=F.call(r,gn,!0)),gn}let dn=v?Pe.outerHTML:Pe.innerHTML;return v&&ce["!doctype"]&&Pe.ownerDocument&&Pe.ownerDocument.doctype&&Pe.ownerDocument.doctype.name&&ur(L0,Pe.ownerDocument.doctype.name)&&(dn="<!DOCTYPE "+Pe.ownerDocument.doctype.name+`>
`+dn),Q&&gu([C,P,x],Nn=>{dn=Ba(dn,Nn," ")}),V&&q?V.createHTML(dn):dn},e.setConfig=function(){let Ge=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};nr(Ge),te=!0},e.clearConfig=function(){Oe=null,te=!1},e.isValidAttribute=function(Ge,se,Pe){Oe||nr({});const qe=Ct(Ge),_t=Ct(se);return Yr(qe,_t,Pe)},e.addHook=function(Ge,se){typeof se=="function"&&$a(z[Ge],se)},e.removeHook=function(Ge,se){if(se!==void 0){const Pe=m3(z[Ge],se);return Pe===-1?void 0:g3(z[Ge],Pe,1)[0]}return p_(z[Ge])},e.removeHooks=function(Ge){z[Ge]=[]},e.removeAllHooks=function(){z=b_()},e}var Wd=M0();function op(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let Uo=op();function V0(n){Uo=n}const U0=/[&<>"']/,O3=new RegExp(U0.source,"g"),F0=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,N3=new RegExp(F0.source,"g"),L3={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},E_=n=>L3[n];function Dr(n,e){if(e){if(U0.test(n))return n.replace(O3,E_)}else if(F0.test(n))return n.replace(N3,E_);return n}const M3=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function V3(n){return n.replace(M3,(e,t)=>(t=t.toLowerCase(),t==="colon"?":":t.charAt(0)==="#"?t.charAt(1)==="x"?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""))}const U3=/(^|[^\[])\^/g;function Yt(n,e){let t=typeof n=="string"?n:n.source;e=e||"";const r={replace:(i,s)=>{let o=typeof s=="string"?s:s.source;return o=o.replace(U3,"$1"),t=t.replace(i,o),r},getRegex:()=>new RegExp(t,e)};return r}function k_(n){try{n=encodeURI(n).replace(/%25/g,"%")}catch{return null}return n}const dl={exec:()=>null};function T_(n,e){const t=n.replace(/\|/g,(s,o,a)=>{let l=!1,c=o;for(;--c>=0&&a[c]==="\\";)l=!l;return l?"|":" |"}),r=t.split(/ \|/);let i=0;if(r[0].trim()||r.shift(),r.length>0&&!r[r.length-1].trim()&&r.pop(),e)if(r.length>e)r.splice(e);else for(;r.length<e;)r.push("");for(;i<r.length;i++)r[i]=r[i].trim().replace(/\\\|/g,"|");return r}function wu(n,e,t){const r=n.length;if(r===0)return"";let i=0;for(;i<r&&n.charAt(r-i-1)===e;)i++;return n.slice(0,r-i)}function F3(n,e){if(n.indexOf(e[1])===-1)return-1;let t=0;for(let r=0;r<n.length;r++)if(n[r]==="\\")r++;else if(n[r]===e[0])t++;else if(n[r]===e[1]&&(t--,t<0))return r;return-1}function I_(n,e,t,r){const i=e.href,s=e.title?Dr(e.title):null,o=n[1].replace(/\\([\[\]])/g,"$1");if(n[0].charAt(0)!=="!"){r.state.inLink=!0;const a={type:"link",raw:t,href:i,title:s,text:o,tokens:r.inlineTokens(o)};return r.state.inLink=!1,a}return{type:"image",raw:t,href:i,title:s,text:Dr(o)}}function $3(n,e){const t=n.match(/^(\s+)(?:```)/);if(t===null)return e;const r=t[1];return e.split(`
`).map(i=>{const s=i.match(/^\s+/);if(s===null)return i;const[o]=s;return o.length>=r.length?i.slice(r.length):i}).join(`
`)}class bc{constructor(e){fn(this,"options");fn(this,"rules");fn(this,"lexer");this.options=e||Uo}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const r=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?r:wu(r,`
`)}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const r=t[0],i=$3(r,t[3]||"");return{type:"code",raw:r,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:i}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let r=t[2].trim();if(/#$/.test(r)){const i=wu(r,"#");(this.options.pedantic||!i||/ $/.test(i))&&(r=i.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){const r=wu(t[0].replace(/^ *>[ \t]?/gm,""),`
`),i=this.lexer.state.top;this.lexer.state.top=!0;const s=this.lexer.blockTokens(r);return this.lexer.state.top=i,{type:"blockquote",raw:t[0],tokens:s,text:r}}}list(e){let t=this.rules.block.list.exec(e);if(t){let r=t[1].trim();const i=r.length>1,s={type:"list",raw:"",ordered:i,start:i?+r.slice(0,-1):"",loose:!1,items:[]};r=i?`\\d{1,9}\\${r.slice(-1)}`:`\\${r}`,this.options.pedantic&&(r=i?r:"[*+-]");const o=new RegExp(`^( {0,3}${r})((?:[	 ][^\\n]*)?(?:\\n|$))`);let a="",l="",c=!1;for(;e;){let h=!1;if(!(t=o.exec(e))||this.rules.block.hr.test(e))break;a=t[0],e=e.substring(a.length);let p=t[2].split(`
`,1)[0].replace(/^\t+/,O=>" ".repeat(3*O.length)),m=e.split(`
`,1)[0],g=0;this.options.pedantic?(g=2,l=p.trimStart()):(g=t[2].search(/[^ ]/),g=g>4?1:g,l=p.slice(g),g+=t[1].length);let b=!1;if(!p&&/^ *$/.test(m)&&(a+=m+`
`,e=e.substring(m.length+1),h=!0),!h){const O=new RegExp(`^ {0,${Math.min(3,g-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),U=new RegExp(`^ {0,${Math.min(3,g-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),D=new RegExp(`^ {0,${Math.min(3,g-1)}}(?:\`\`\`|~~~)`),V=new RegExp(`^ {0,${Math.min(3,g-1)}}#`);for(;e;){const K=e.split(`
`,1)[0];if(m=K,this.options.pedantic&&(m=m.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),D.test(m)||V.test(m)||O.test(m)||U.test(e))break;if(m.search(/[^ ]/)>=g||!m.trim())l+=`
`+m.slice(g);else{if(b||p.search(/[^ ]/)>=4||D.test(p)||V.test(p)||U.test(p))break;l+=`
`+m}!b&&!m.trim()&&(b=!0),a+=K+`
`,e=e.substring(K.length+1),p=m.slice(g)}}s.loose||(c?s.loose=!0:/\n *\n *$/.test(a)&&(c=!0));let E=null,S;this.options.gfm&&(E=/^\[[ xX]\] /.exec(l),E&&(S=E[0]!=="[ ] ",l=l.replace(/^\[[ xX]\] +/,""))),s.items.push({type:"list_item",raw:a,task:!!E,checked:S,loose:!1,text:l,tokens:[]}),s.raw+=a}s.items[s.items.length-1].raw=a.trimEnd(),s.items[s.items.length-1].text=l.trimEnd(),s.raw=s.raw.trimEnd();for(let h=0;h<s.items.length;h++)if(this.lexer.state.top=!1,s.items[h].tokens=this.lexer.blockTokens(s.items[h].text,[]),!s.loose){const p=s.items[h].tokens.filter(g=>g.type==="space"),m=p.length>0&&p.some(g=>/\n.*\n/.test(g.raw));s.loose=m}if(s.loose)for(let h=0;h<s.items.length;h++)s.items[h].loose=!0;return s}}html(e){const t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){const t=this.rules.block.def.exec(e);if(t){const r=t[1].toLowerCase().replace(/\s+/g," "),i=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",s=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:r,raw:t[0],href:i,title:s}}}table(e){const t=this.rules.block.table.exec(e);if(!t||!/[:|]/.test(t[2]))return;const r=T_(t[1]),i=t[2].replace(/^\||\| *$/g,"").split("|"),s=t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split(`
`):[],o={type:"table",raw:t[0],header:[],align:[],rows:[]};if(r.length===i.length){for(const a of i)/^ *-+: *$/.test(a)?o.align.push("right"):/^ *:-+: *$/.test(a)?o.align.push("center"):/^ *:-+ *$/.test(a)?o.align.push("left"):o.align.push(null);for(const a of r)o.header.push({text:a,tokens:this.lexer.inline(a)});for(const a of s)o.rows.push(T_(a,o.header.length).map(l=>({text:l,tokens:this.lexer.inline(l)})));return o}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const r=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:r,tokens:this.lexer.inline(r)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:Dr(t[1])}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const r=t[2].trim();if(!this.options.pedantic&&/^</.test(r)){if(!/>$/.test(r))return;const o=wu(r.slice(0,-1),"\\");if((r.length-o.length)%2===0)return}else{const o=F3(t[2],"()");if(o>-1){const l=(t[0].indexOf("!")===0?5:4)+t[1].length+o;t[2]=t[2].substring(0,o),t[0]=t[0].substring(0,l).trim(),t[3]=""}}let i=t[2],s="";if(this.options.pedantic){const o=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(i);o&&(i=o[1],s=o[3])}else s=t[3]?t[3].slice(1,-1):"";return i=i.trim(),/^</.test(i)&&(this.options.pedantic&&!/>$/.test(r)?i=i.slice(1):i=i.slice(1,-1)),I_(t,{href:i&&i.replace(this.rules.inline.anyPunctuation,"$1"),title:s&&s.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer)}}reflink(e,t){let r;if((r=this.rules.inline.reflink.exec(e))||(r=this.rules.inline.nolink.exec(e))){const i=(r[2]||r[1]).replace(/\s+/g," "),s=t[i.toLowerCase()];if(!s){const o=r[0].charAt(0);return{type:"text",raw:o,text:o}}return I_(r,s,r[0],this.lexer)}}emStrong(e,t,r=""){let i=this.rules.inline.emStrongLDelim.exec(e);if(!i||i[3]&&r.match(/[\p{L}\p{N}]/u))return;if(!(i[1]||i[2]||"")||!r||this.rules.inline.punctuation.exec(r)){const o=[...i[0]].length-1;let a,l,c=o,h=0;const p=i[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(p.lastIndex=0,t=t.slice(-1*e.length+o);(i=p.exec(t))!=null;){if(a=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!a)continue;if(l=[...a].length,i[3]||i[4]){c+=l;continue}else if((i[5]||i[6])&&o%3&&!((o+l)%3)){h+=l;continue}if(c-=l,c>0)continue;l=Math.min(l,l+c+h);const m=[...i[0]][0].length,g=e.slice(0,o+i.index+m+l);if(Math.min(o,l)%2){const E=g.slice(1,-1);return{type:"em",raw:g,text:E,tokens:this.lexer.inlineTokens(E)}}const b=g.slice(2,-2);return{type:"strong",raw:g,text:b,tokens:this.lexer.inlineTokens(b)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let r=t[2].replace(/\n/g," ");const i=/[^ ]/.test(r),s=/^ /.test(r)&&/ $/.test(r);return i&&s&&(r=r.substring(1,r.length-1)),r=Dr(r,!0),{type:"codespan",raw:t[0],text:r}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){const t=this.rules.inline.autolink.exec(e);if(t){let r,i;return t[2]==="@"?(r=Dr(t[1]),i="mailto:"+r):(r=Dr(t[1]),i=r),{type:"link",raw:t[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}url(e){var r;let t;if(t=this.rules.inline.url.exec(e)){let i,s;if(t[2]==="@")i=Dr(t[0]),s="mailto:"+i;else{let o;do o=t[0],t[0]=((r=this.rules.inline._backpedal.exec(t[0]))==null?void 0:r[0])??"";while(o!==t[0]);i=Dr(t[0]),t[1]==="www."?s="http://"+t[0]:s=t[0]}return{type:"link",raw:t[0],text:i,href:s,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(e){const t=this.rules.inline.text.exec(e);if(t){let r;return this.lexer.state.inRawBlock?r=t[0]:r=Dr(t[0]),{type:"text",raw:t[0],text:r}}}}const B3=/^(?: *(?:\n|$))+/,z3=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,j3=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Gl=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,q3=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,$0=/(?:[*+-]|\d{1,9}[.)])/,B0=Yt(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,$0).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),ap=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,H3=/^[^\n]+/,lp=/(?!\s*\])(?:\\.|[^\[\]\\])+/,W3=Yt(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",lp).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),G3=Yt(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,$0).getRegex(),od="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",up=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,K3=Yt("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",up).replace("tag",od).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),z0=Yt(ap).replace("hr",Gl).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",od).getRegex(),Q3=Yt(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",z0).getRegex(),cp={blockquote:Q3,code:z3,def:W3,fences:j3,heading:q3,hr:Gl,html:K3,lheading:B0,list:G3,newline:B3,paragraph:z0,table:dl,text:H3},A_=Yt("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Gl).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",od).getRegex(),Y3={...cp,table:A_,paragraph:Yt(ap).replace("hr",Gl).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",A_).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",od).getRegex()},X3={...cp,html:Yt(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",up).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:dl,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Yt(ap).replace("hr",Gl).replace("heading",` *#{1,6} *[^
]`).replace("lheading",B0).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},j0=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Z3=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,q0=/^( {2,}|\\)\n(?!\s*$)/,J3=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Kl="\\p{P}\\p{S}",eN=Yt(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,Kl).getRegex(),tN=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,nN=Yt(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,Kl).getRegex(),rN=Yt("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,Kl).getRegex(),iN=Yt("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,Kl).getRegex(),sN=Yt(/\\([punct])/,"gu").replace(/punct/g,Kl).getRegex(),oN=Yt(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),aN=Yt(up).replace("(?:-->|$)","-->").getRegex(),lN=Yt("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",aN).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Ec=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,uN=Yt(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",Ec).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),H0=Yt(/^!?\[(label)\]\[(ref)\]/).replace("label",Ec).replace("ref",lp).getRegex(),W0=Yt(/^!?\[(ref)\](?:\[\])?/).replace("ref",lp).getRegex(),cN=Yt("reflink|nolink(?!\\()","g").replace("reflink",H0).replace("nolink",W0).getRegex(),dp={_backpedal:dl,anyPunctuation:sN,autolink:oN,blockSkip:tN,br:q0,code:Z3,del:dl,emStrongLDelim:nN,emStrongRDelimAst:rN,emStrongRDelimUnd:iN,escape:j0,link:uN,nolink:W0,punctuation:eN,reflink:H0,reflinkSearch:cN,tag:lN,text:J3,url:dl},dN={...dp,link:Yt(/^!?\[(label)\]\((.*?)\)/).replace("label",Ec).getRegex(),reflink:Yt(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Ec).getRegex()},Nh={...dp,escape:Yt(j0).replace("])","~|])").getRegex(),url:Yt(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},hN={...Nh,br:Yt(q0).replace("{2,}","*").getRegex(),text:Yt(Nh.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},vu={normal:cp,gfm:Y3,pedantic:X3},Ha={normal:dp,gfm:Nh,breaks:hN,pedantic:dN};class Ci{constructor(e){fn(this,"tokens");fn(this,"options");fn(this,"state");fn(this,"tokenizer");fn(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Uo,this.options.tokenizer=this.options.tokenizer||new bc,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={block:vu.normal,inline:Ha.normal};this.options.pedantic?(t.block=vu.pedantic,t.inline=Ha.pedantic):this.options.gfm&&(t.block=vu.gfm,this.options.breaks?t.inline=Ha.breaks:t.inline=Ha.gfm),this.tokenizer.rules=t}static get rules(){return{block:vu,inline:Ha}}static lex(e,t){return new Ci(t).lex(e)}static lexInline(e,t){return new Ci(t).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,`
`),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){const r=this.inlineQueue[t];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[]){this.options.pedantic?e=e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e=e.replace(/^( *)(\t+)/gm,(a,l,c)=>l+"    ".repeat(c.length));let r,i,s,o;for(;e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>(r=a.call({lexer:this},e,t))?(e=e.substring(r.raw.length),t.push(r),!0):!1))){if(r=this.tokenizer.space(e)){e=e.substring(r.raw.length),r.raw.length===1&&t.length>0?t[t.length-1].raw+=`
`:t.push(r);continue}if(r=this.tokenizer.code(e)){e=e.substring(r.raw.length),i=t[t.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+r.raw,i.text+=`
`+r.text,this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(r);continue}if(r=this.tokenizer.fences(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.heading(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.hr(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.blockquote(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.list(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.html(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.def(e)){e=e.substring(r.raw.length),i=t[t.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+r.raw,i.text+=`
`+r.raw,this.inlineQueue[this.inlineQueue.length-1].src=i.text):this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title});continue}if(r=this.tokenizer.table(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.lheading(e)){e=e.substring(r.raw.length),t.push(r);continue}if(s=e,this.options.extensions&&this.options.extensions.startBlock){let a=1/0;const l=e.slice(1);let c;this.options.extensions.startBlock.forEach(h=>{c=h.call({lexer:this},l),typeof c=="number"&&c>=0&&(a=Math.min(a,c))}),a<1/0&&a>=0&&(s=e.substring(0,a+1))}if(this.state.top&&(r=this.tokenizer.paragraph(s))){i=t[t.length-1],o&&i.type==="paragraph"?(i.raw+=`
`+r.raw,i.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(r),o=s.length!==e.length,e=e.substring(r.raw.length);continue}if(r=this.tokenizer.text(e)){e=e.substring(r.raw.length),i=t[t.length-1],i&&i.type==="text"?(i.raw+=`
`+r.raw,i.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(r);continue}if(e){const a="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(a);break}else throw new Error(a)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let r,i,s,o=e,a,l,c;if(this.tokens.links){const h=Object.keys(this.tokens.links);if(h.length>0)for(;(a=this.tokenizer.rules.inline.reflinkSearch.exec(o))!=null;)h.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(a=this.tokenizer.rules.inline.blockSkip.exec(o))!=null;)o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(a=this.tokenizer.rules.inline.anyPunctuation.exec(o))!=null;)o=o.slice(0,a.index)+"++"+o.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;e;)if(l||(c=""),l=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(h=>(r=h.call({lexer:this},e,t))?(e=e.substring(r.raw.length),t.push(r),!0):!1))){if(r=this.tokenizer.escape(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.tag(e)){e=e.substring(r.raw.length),i=t[t.length-1],i&&r.type==="text"&&i.type==="text"?(i.raw+=r.raw,i.text+=r.text):t.push(r);continue}if(r=this.tokenizer.link(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(r.raw.length),i=t[t.length-1],i&&r.type==="text"&&i.type==="text"?(i.raw+=r.raw,i.text+=r.text):t.push(r);continue}if(r=this.tokenizer.emStrong(e,o,c)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.codespan(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.br(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.del(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.autolink(e)){e=e.substring(r.raw.length),t.push(r);continue}if(!this.state.inLink&&(r=this.tokenizer.url(e))){e=e.substring(r.raw.length),t.push(r);continue}if(s=e,this.options.extensions&&this.options.extensions.startInline){let h=1/0;const p=e.slice(1);let m;this.options.extensions.startInline.forEach(g=>{m=g.call({lexer:this},p),typeof m=="number"&&m>=0&&(h=Math.min(h,m))}),h<1/0&&h>=0&&(s=e.substring(0,h+1))}if(r=this.tokenizer.inlineText(s)){e=e.substring(r.raw.length),r.raw.slice(-1)!=="_"&&(c=r.raw.slice(-1)),l=!0,i=t[t.length-1],i&&i.type==="text"?(i.raw+=r.raw,i.text+=r.text):t.push(r);continue}if(e){const h="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(h);break}else throw new Error(h)}}return t}}class kc{constructor(e){fn(this,"options");this.options=e||Uo}code(e,t,r){var s;const i=(s=(t||"").match(/^\S*/))==null?void 0:s[0];return e=e.replace(/\n$/,"")+`
`,i?'<pre><code class="language-'+Dr(i)+'">'+(r?e:Dr(e,!0))+`</code></pre>
`:"<pre><code>"+(r?e:Dr(e,!0))+`</code></pre>
`}blockquote(e){return`<blockquote>
${e}</blockquote>
`}html(e,t){return e}heading(e,t,r){return`<h${t}>${e}</h${t}>
`}hr(){return`<hr>
`}list(e,t,r){const i=t?"ol":"ul",s=t&&r!==1?' start="'+r+'"':"";return"<"+i+s+`>
`+e+"</"+i+`>
`}listitem(e,t,r){return`<li>${e}</li>
`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph(e){return`<p>${e}</p>
`}table(e,t){return t&&(t=`<tbody>${t}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+t+`</table>
`}tablerow(e){return`<tr>
${e}</tr>
`}tablecell(e,t){const r=t.header?"th":"td";return(t.align?`<${r} align="${t.align}">`:`<${r}>`)+e+`</${r}>
`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return"<br>"}del(e){return`<del>${e}</del>`}link(e,t,r){const i=k_(e);if(i===null)return r;e=i;let s='<a href="'+e+'"';return t&&(s+=' title="'+t+'"'),s+=">"+r+"</a>",s}image(e,t,r){const i=k_(e);if(i===null)return r;e=i;let s=`<img src="${e}" alt="${r}"`;return t&&(s+=` title="${t}"`),s+=">",s}text(e){return e}}class hp{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,r){return""+r}image(e,t,r){return""+r}br(){return""}}class Si{constructor(e){fn(this,"options");fn(this,"renderer");fn(this,"textRenderer");this.options=e||Uo,this.options.renderer=this.options.renderer||new kc,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new hp}static parse(e,t){return new Si(t).parse(e)}static parseInline(e,t){return new Si(t).parseInline(e)}parse(e,t=!0){let r="";for(let i=0;i<e.length;i++){const s=e[i];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]){const o=s,a=this.options.extensions.renderers[o.type].call({parser:this},o);if(a!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(o.type)){r+=a||"";continue}}switch(s.type){case"space":continue;case"hr":{r+=this.renderer.hr();continue}case"heading":{const o=s;r+=this.renderer.heading(this.parseInline(o.tokens),o.depth,V3(this.parseInline(o.tokens,this.textRenderer)));continue}case"code":{const o=s;r+=this.renderer.code(o.text,o.lang,!!o.escaped);continue}case"table":{const o=s;let a="",l="";for(let h=0;h<o.header.length;h++)l+=this.renderer.tablecell(this.parseInline(o.header[h].tokens),{header:!0,align:o.align[h]});a+=this.renderer.tablerow(l);let c="";for(let h=0;h<o.rows.length;h++){const p=o.rows[h];l="";for(let m=0;m<p.length;m++)l+=this.renderer.tablecell(this.parseInline(p[m].tokens),{header:!1,align:o.align[m]});c+=this.renderer.tablerow(l)}r+=this.renderer.table(a,c);continue}case"blockquote":{const o=s,a=this.parse(o.tokens);r+=this.renderer.blockquote(a);continue}case"list":{const o=s,a=o.ordered,l=o.start,c=o.loose;let h="";for(let p=0;p<o.items.length;p++){const m=o.items[p],g=m.checked,b=m.task;let E="";if(m.task){const S=this.renderer.checkbox(!!g);c?m.tokens.length>0&&m.tokens[0].type==="paragraph"?(m.tokens[0].text=S+" "+m.tokens[0].text,m.tokens[0].tokens&&m.tokens[0].tokens.length>0&&m.tokens[0].tokens[0].type==="text"&&(m.tokens[0].tokens[0].text=S+" "+m.tokens[0].tokens[0].text)):m.tokens.unshift({type:"text",text:S+" "}):E+=S+" "}E+=this.parse(m.tokens,c),h+=this.renderer.listitem(E,b,!!g)}r+=this.renderer.list(h,a,l);continue}case"html":{const o=s;r+=this.renderer.html(o.text,o.block);continue}case"paragraph":{const o=s;r+=this.renderer.paragraph(this.parseInline(o.tokens));continue}case"text":{let o=s,a=o.tokens?this.parseInline(o.tokens):o.text;for(;i+1<e.length&&e[i+1].type==="text";)o=e[++i],a+=`
`+(o.tokens?this.parseInline(o.tokens):o.text);r+=t?this.renderer.paragraph(a):a;continue}default:{const o='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return r}parseInline(e,t){t=t||this.renderer;let r="";for(let i=0;i<e.length;i++){const s=e[i];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]){const o=this.options.extensions.renderers[s.type].call({parser:this},s);if(o!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type)){r+=o||"";continue}}switch(s.type){case"escape":{const o=s;r+=t.text(o.text);break}case"html":{const o=s;r+=t.html(o.text);break}case"link":{const o=s;r+=t.link(o.href,o.title,this.parseInline(o.tokens,t));break}case"image":{const o=s;r+=t.image(o.href,o.title,o.text);break}case"strong":{const o=s;r+=t.strong(this.parseInline(o.tokens,t));break}case"em":{const o=s;r+=t.em(this.parseInline(o.tokens,t));break}case"codespan":{const o=s;r+=t.codespan(o.text);break}case"br":{r+=t.br();break}case"del":{const o=s;r+=t.del(this.parseInline(o.tokens,t));break}case"text":{const o=s;r+=t.text(o.text);break}default:{const o='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return r}}class hl{constructor(e){fn(this,"options");this.options=e||Uo}preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}}fn(hl,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));var Do,Lh,G0;class fN{constructor(...e){Up(this,Do);fn(this,"defaults",op());fn(this,"options",this.setOptions);fn(this,"parse",Zl(this,Do,Lh).call(this,Ci.lex,Si.parse));fn(this,"parseInline",Zl(this,Do,Lh).call(this,Ci.lexInline,Si.parseInline));fn(this,"Parser",Si);fn(this,"Renderer",kc);fn(this,"TextRenderer",hp);fn(this,"Lexer",Ci);fn(this,"Tokenizer",bc);fn(this,"Hooks",hl);this.use(...e)}walkTokens(e,t){var i,s;let r=[];for(const o of e)switch(r=r.concat(t.call(this,o)),o.type){case"table":{const a=o;for(const l of a.header)r=r.concat(this.walkTokens(l.tokens,t));for(const l of a.rows)for(const c of l)r=r.concat(this.walkTokens(c.tokens,t));break}case"list":{const a=o;r=r.concat(this.walkTokens(a.items,t));break}default:{const a=o;(s=(i=this.defaults.extensions)==null?void 0:i.childTokens)!=null&&s[a.type]?this.defaults.extensions.childTokens[a.type].forEach(l=>{const c=a[l].flat(1/0);r=r.concat(this.walkTokens(c,t))}):a.tokens&&(r=r.concat(this.walkTokens(a.tokens,t)))}}return r}use(...e){const t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(r=>{const i={...r};if(i.async=this.defaults.async||i.async||!1,r.extensions&&(r.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if("renderer"in s){const o=t.renderers[s.name];o?t.renderers[s.name]=function(...a){let l=s.renderer.apply(this,a);return l===!1&&(l=o.apply(this,a)),l}:t.renderers[s.name]=s.renderer}if("tokenizer"in s){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const o=t[s.level];o?o.unshift(s.tokenizer):t[s.level]=[s.tokenizer],s.start&&(s.level==="block"?t.startBlock?t.startBlock.push(s.start):t.startBlock=[s.start]:s.level==="inline"&&(t.startInline?t.startInline.push(s.start):t.startInline=[s.start]))}"childTokens"in s&&s.childTokens&&(t.childTokens[s.name]=s.childTokens)}),i.extensions=t),r.renderer){const s=this.defaults.renderer||new kc(this.defaults);for(const o in r.renderer){if(!(o in s))throw new Error(`renderer '${o}' does not exist`);if(o==="options")continue;const a=o,l=r.renderer[a],c=s[a];s[a]=(...h)=>{let p=l.apply(s,h);return p===!1&&(p=c.apply(s,h)),p||""}}i.renderer=s}if(r.tokenizer){const s=this.defaults.tokenizer||new bc(this.defaults);for(const o in r.tokenizer){if(!(o in s))throw new Error(`tokenizer '${o}' does not exist`);if(["options","rules","lexer"].includes(o))continue;const a=o,l=r.tokenizer[a],c=s[a];s[a]=(...h)=>{let p=l.apply(s,h);return p===!1&&(p=c.apply(s,h)),p}}i.tokenizer=s}if(r.hooks){const s=this.defaults.hooks||new hl;for(const o in r.hooks){if(!(o in s))throw new Error(`hook '${o}' does not exist`);if(o==="options")continue;const a=o,l=r.hooks[a],c=s[a];hl.passThroughHooks.has(o)?s[a]=h=>{if(this.defaults.async)return Promise.resolve(l.call(s,h)).then(m=>c.call(s,m));const p=l.call(s,h);return c.call(s,p)}:s[a]=(...h)=>{let p=l.apply(s,h);return p===!1&&(p=c.apply(s,h)),p}}i.hooks=s}if(r.walkTokens){const s=this.defaults.walkTokens,o=r.walkTokens;i.walkTokens=function(a){let l=[];return l.push(o.call(this,a)),s&&(l=l.concat(s.call(this,a))),l}}this.defaults={...this.defaults,...i}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return Ci.lex(e,t??this.defaults)}parser(e,t){return Si.parse(e,t??this.defaults)}}Do=new WeakSet,Lh=function(e,t){return(r,i)=>{const s={...i},o={...this.defaults,...s};this.defaults.async===!0&&s.async===!1&&(o.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),o.async=!0);const a=Zl(this,Do,G0).call(this,!!o.silent,!!o.async);if(typeof r>"u"||r===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof r!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(r)+", string expected"));if(o.hooks&&(o.hooks.options=o),o.async)return Promise.resolve(o.hooks?o.hooks.preprocess(r):r).then(l=>e(l,o)).then(l=>o.hooks?o.hooks.processAllTokens(l):l).then(l=>o.walkTokens?Promise.all(this.walkTokens(l,o.walkTokens)).then(()=>l):l).then(l=>t(l,o)).then(l=>o.hooks?o.hooks.postprocess(l):l).catch(a);try{o.hooks&&(r=o.hooks.preprocess(r));let l=e(r,o);o.hooks&&(l=o.hooks.processAllTokens(l)),o.walkTokens&&this.walkTokens(l,o.walkTokens);let c=t(l,o);return o.hooks&&(c=o.hooks.postprocess(c)),c}catch(l){return a(l)}}},G0=function(e,t){return r=>{if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,e){const i="<p>An error occurred:</p><pre>"+Dr(r.message+"",!0)+"</pre>";return t?Promise.resolve(i):i}if(t)return Promise.reject(r);throw r}};const Po=new fN;function Bt(n,e){return Po.parse(n,e)}Bt.options=Bt.setOptions=function(n){return Po.setOptions(n),Bt.defaults=Po.defaults,V0(Bt.defaults),Bt};Bt.getDefaults=op;Bt.defaults=Uo;Bt.use=function(...n){return Po.use(...n),Bt.defaults=Po.defaults,V0(Bt.defaults),Bt};Bt.walkTokens=function(n,e){return Po.walkTokens(n,e)};Bt.parseInline=Po.parseInline;Bt.Parser=Si;Bt.parser=Si.parse;Bt.Renderer=kc;Bt.TextRenderer=hp;Bt.Lexer=Ci;Bt.lexer=Ci.lex;Bt.Tokenizer=bc;Bt.Hooks=hl;Bt.parse=Bt;Bt.options;Bt.setOptions;Bt.use;Bt.walkTokens;Bt.parseInline;Si.parse;Ci.lex;const pN={key:0,class:"fixed bottom-0 left-0 right-0 top-0 z-50 bg-linear-to-t from-pink-700 to-purple-800 p-10 text-center shadow-xl shadow-black"},mN={class:"max-h-[80vh] overflow-auto"},gN=["innerHTML"],_N={key:0},wN=["innerHTML"],vN={key:1},yN={class:"absolute bottom-0 left-1/2 w-full -translate-x-1/2 text-5xl"},bN={key:0},EN={key:1},kN={key:0,class:"flex"},TN={key:1},IN={__name:"LargeReview",props:["auth","db","timeDuration","timeMultiplier"],emits:["reselectDeck"],setup(n,{expose:e,emit:t}){const r=n,i=t;qt("space","large_review",function(z,C){z.preventDefault(),S()}),qt("space","large_yes_no",function(z,C){z.preventDefault(),U(!0)}),qt("c","large_yes_no",function(z,C){z.preventDefault(),U(!1)}),qt("space","large_check_type_ans",function(z,C){z.preventDefault(),O()}),qt("enter","large_check_type_ans",function(z,C){z.preventDefault(),O()});const s=Ae(!1),o=Ae(""),a=Ae([]),l=Ae(0),c=Ae(!1),h=Ae(""),p=Ae(null),m=Ae(null),g=Ae(null);let b=!1;function E(z,C,P){C.forEach(x=>{(x.front.split(`
`)[0]==="[markdown]"||x.front.split(`
`)[0]==="[md]")&&(x.front=x.front.split(`
`).slice(1).join(`
`),x.front=Wd.sanitize(Bt.parse(x.front))),(x.back.split(`
`)[0]==="[markdown]"||x.back.split(`
`)[0]==="[md]")&&(x.back=x.back.split(`
`).slice(1).join(`
`),x.back=Bt.parse(x.back)),x.front=Wd.sanitize(x.front),x.back=Wd.sanitize(x.back)}),o.value=z,a.value=C,l.value=oe(0,a.value.length),b=P,s.value=!0,qt.setScope("large_review"),document.body.style.overflow="hidden",a.value[l.value].type_answer&&V(),b&&K(!0)}function S(){c.value=!0,qt.setScope("large_yes_no"),b&&K(!1)}function O(){const z=a.value[l.value].back.replace(/\[.*?\]/gs,"");h.value===z?(U(!0),h.value=""):(U(!1),h.value="")}function U(z){const C=new Date,P=new Date(C.getFullYear(),C.getMonth(),C.getDate());if(z===!0)if(a.value[l.value].streak===0)a.value[l.value].streak=.5,N(!0);else if(a.value[l.value].streak===.5){let x=new Date(P);x.setDate(x.getDate()+1),Ht(ht(r.db,`users/${r.auth.currentUser.uid}/decks/${o.value}/cards/${a.value[l.value].id}`),{next_review:st.fromDate(x),streak:1}),R()}else{const x=Math.pow(r.timeMultiplier,a.value[l.value].streak)*r.timeDuration,ue=Math.floor(x/24);let Y=new Date(P);Y.setDate(Y.getDate()+ue),Ht(ht(r.db,`users/${r.auth.currentUser.uid}/decks/${o.value}/cards/${a.value[l.value].id}`),{next_review:st.fromDate(Y),streak:a.value[l.value].streak+1}),R()}else a.value[l.value].streak!==0&&a.value[l.value].streak!==.5&&Ht(ht(r.db,`users/${r.auth.currentUser.uid}/decks/${o.value}/cards/${a.value[l.value].id}`),{next_review:st.fromDate(new Date),streak:0}),a.value[l.value].streak=0,N(!0)}function D(){c.value=!0,qt.setScope("large_check_type_ans")}async function V(){await rs(),p.value.focus()}async function K(z){await rs();let C=[];z?C=[...m.value.querySelectorAll("audio"),...m.value.querySelectorAll("video")]:C=[...g.value.querySelectorAll("audio"),...g.value.querySelectorAll("video")];for(let P=0;P<C.length;P++)await new Promise(x=>{C[P].play(),C[P].addEventListener("ended",x,{once:!0})})}function oe(z,C){return Math.floor(Math.random()*(C-z))+z}function L(){s.value=!1,c.value=!1,document.body.style.overflow="auto",qt.setScope("all"),i("reselectDeck")}function R(){a.value.splice(l.value,1),a.value.length!==0?N(!1):(L(),rt.fire({title:"You've finished all reviews for today.",text:"Come back tomorrow for more.",color:"black",icon:"success"}))}function N(z){if(z)if(a.value.length!==1){let C=oe(0,a.value.length);for(;C===l.value;)C=oe(0,a.value.length);l.value=C}else l.value=0;else l.value=oe(0,a.value.length);c.value=!1,qt.setScope("large_review"),a.value.length>0&&(a.value[l.value].type_answer&&V(),b&&K(!0))}function F(){p.value.style.height="auto",p.value.style.height=p.value.scrollHeight+"px"}return e({reviewCards:E}),(z,C)=>s.value?(Me(),je("div",pN,[W("button",{onClick:C[0]||(C[0]=P=>L()),class:"fixed left-5 top-5 rounded-sm bg-gray-700 p-3 text-white"}," Cancel "),W("div",mN,[W("div",{innerHTML:a.value[l.value].front,ref_key:"front_ref",ref:m,class:"prose mx-8 my-4 inline-block whitespace-pre-wrap text-2xl text-white prose-headings:text-inherit prose-a:text-blue-500 prose-blockquote:text-inherit prose-strong:text-inherit prose-code:text-inherit prose-li:marker:text-inherit prose-img:m-auto prose-img:block prose-video:m-auto prose-video:block"},null,8,gN),c.value===!0?(Me(),je("div",_N,[C[8]||(C[8]=W("hr",{class:"mx-3 rounded-full border-2 border-white"},null,-1)),W("div",{innerHTML:a.value[l.value].back,ref_key:"back_ref",ref:g,class:"prose mx-8 my-4 inline-block whitespace-pre-wrap text-2xl text-white prose-headings:text-inherit prose-a:text-blue-500 prose-blockquote:text-inherit prose-strong:text-inherit prose-code:text-inherit prose-li:marker:text-inherit prose-img:m-auto prose-img:block prose-video:m-auto prose-video:block"},null,8,wN),C[9]||(C[9]=W("br",null,null,-1))])):Ot("",!0),a.value[l.value].type_answer===!0&&c.value===!1?(Me(),je("div",vN,[C[10]||(C[10]=W("hr",{class:"mx-3 rounded-full border-2 border-white"},null,-1)),Ze(W("textarea",{ref_key:"answer_field_ref",ref:p,"onUpdate:modelValue":C[1]||(C[1]=P=>h.value=P),onInput:C[2]||(C[2]=P=>F()),placeholder:"Type Answer",class:"my-4 min-h-[125px] w-full resize-none rounded-md bg-linear-to-r from-purple-500 to-pink-500 p-3 text-center text-2xl text-white placeholder-black shadow-sm shadow-black"},null,544),[[Gt,h.value]])])):Ot("",!0)]),W("div",yN,[c.value?(Me(),je("div",EN,[a.value[l.value].type_answer?(Me(),je("div",TN,[W("button",{onClick:C[7]||(C[7]=P=>O()),class:"w-full bg-gray-300 p-3"}," Next ")])):(Me(),je("div",kN,[W("button",{onClick:C[5]||(C[5]=P=>U(!1)),class:"w-full flex-1 bg-red-400 p-3"}," Wrong "),W("button",{onClick:C[6]||(C[6]=P=>U(!0)),class:"w-full flex-1 bg-green-400 p-3"}," Correct ")]))])):(Me(),je("div",bN,[a.value[l.value].type_answer?(Me(),je("button",{key:1,onClick:C[4]||(C[4]=P=>D()),class:"w-full bg-gray-400 p-3"}," Check ")):(Me(),je("button",{key:0,onClick:C[3]||(C[3]=P=>S()),class:"w-full bg-gray-400 p-3"}," Show Back "))]))])])):Ot("",!0)}},AN={class:"fixed bottom-0 left-0 right-0 top-0 z-50 bg-gray-600 bg-opacity-50"},xN={class:"fixed left-1/2 top-1/2 max-h-screen w-[500px] max-w-[80vw] -translate-x-1/2 -translate-y-1/2 overflow-auto rounded-md bg-orange-300 px-3 py-10 text-center text-xl shadow-lg shadow-black"},CN={__name:"Changelog",emits:["close"],setup(n,{emit:e}){return(t,r)=>(Me(),je("div",AN,[W("div",xN,[W("button",{onClick:r[0]||(r[0]=i=>t.$emit("close")),class:"mb-5 rounded-md bg-gray-500 p-2 shadow-sm shadow-black"}," Close "),r[1]||(r[1]=Rw('<div><p class="text-3xl">Update 0.7.3</p><p> This update introduces selective review, allowing users to choose the number of cards they wish to review and the number of new cards they want to introduce into their sessions. In addition, several minor bugs related to importing have been resolved. Improvements have also been made to the autoplay functionality: if multiple media elements are present in a card, they will now automatically play one after another, ensuring a smoother and more complete review experience. </p></div><div class="mt-5"><p class="text-3xl">Update 0.7.2</p><p> This update introduces the capability to import media like images and audio files, while also offering the option to enable autoplay for both audio and video content during review sessions. Additionally, various minor issues have been addressed and resolved. To ensure smooth functionality, we kindly ask users to navigate to the settings of each deck and click the &#39;Update&#39; button. This step is crucial for seamlessly integrating the new autoplay_media feature. </p></div><div class="mt-5"><p class="text-3xl">Update 0.7.1</p><p> This update addresses several issues related to deck importing, including resolving scaling problems on smaller screens and enabling smooth importing of decks with multiple field lists. Additionally, it introduces a new feature: random sort order. Unlike traditional random sorting methods, this feature ensures an enhanced user experience by providing a unique random order for each deck. It guarantees that no cards are duplicated within a deck, as it generates random numbers based on the deck ID. </p></div><div class="mt-5"><p class="text-3xl">Update 0.7.0</p><div class="mt-5"><p class="text-2xl">Summary</p><p> This update introduces two significant features: Large Cards and Anki Import. Large Cards offer users increased customization options with support for HTML and Markdown formats, enabling seamless integration of multimedia elements. With the addition of Anki Import functionality, users can effortlessly incorporate premade decks into their study routines, enhancing versatility and accessibility. </p></div><div class="mt-5"><p class="text-2xl">Changelog</p><ul class="ml-5 list-disc"><li><strong>Anki Import Added:</strong> Implemented Anki Import feature for seamless deck integration. Find premade decks at <a href="https://ankiweb.net/shared/decks" class="text-blue-900">AnkiWeb</a>. </li><li><strong>Large Cards Added:</strong> Introduced Large Cards supporting HTML and Markdown formats for enhanced customization and multimedia integration. </li><li><strong>Deck Card Editor Update:</strong> Enhanced search functionality by querying firestore instead of local storage and introduced pagination. </li><li><strong>Alerts Switched:</strong> Replaced regular alerts with sweetalert2 library. </li><li><strong>Improved Settings:</strong> Refined the settings interface and relocated the DeckMigration button. </li><li><strong>Fixed Background Scrolling:</strong> Prevented background scrolling when a menu is open. </li><li><strong>Review Issues Fix:</strong> Addressed various review-related issues. </li><li><strong>Total Cards Display:</strong> Added total cards text feature. </li></ul></div></div>',4))])]))}},SN={key:0,class:"absolute left-5 top-5"},RN={key:1,class:"fixed bottom-0 left-0 right-0 top-0 z-50 bg-gray-600 bg-opacity-50"},PN={class:"fixed left-1/2 top-1/2 inline-block -translate-x-1/2 -translate-y-1/2 rounded-md bg-yellow-300 p-3 text-center shadow-lg shadow-black"},DN=["value"],ON={key:0,class:"mt-3 rounded-sm bg-amber-400 p-3"},NN={__name:"DeckMigration",props:["auth","db"],emits:["loadDecks"],setup(n,{expose:e,emit:t}){const r=n,i=t,s=Ae(!1),o=Ae([]),a=Ae(null),l=Ae("");async function c(){o.value=[],(await qr(Wt(r.db,`users/${r.auth.currentUser.uid}/decks`))).forEach(g=>{o.value.push({name:g.data().name,id:g.id})}),s.value=!0,document.body.style.overflow="hidden"}function h(){s.value=!1,document.body.style.overflow="auto"}async function p(){console.log(a.value),l.value="Getting Old Deck";const m=await Ws(ht(r.db,`users/${r.auth.currentUser.uid}/decks/${a.value}`));l.value="Creating New Deck";const g=await Ui(Wt(r.db,`users/${r.auth.currentUser.uid}/decks`),{name:m.data().name+"(new)",new_cards_today:m.data().new_cards_today,last_update:m.data().last_update,index:m.data().index,new_cards_per_day:m.data().new_cards_per_day,large_cards:m.data().large_cards}).catch(S=>{rt.fire({title:S,color:"black",icon:"error"})});l.value="Getting Old Cards";const b=await qr(Wt(r.db,`users/${r.auth.currentUser.uid}/decks/${a.value}/cards`)),E=b.size;b.forEach(async(S,O)=>{l.value="Creating New Cards"+O+"/"+E,await Ui(Wt(r.db,`users/${r.auth.currentUser.uid}/decks/${g.id}/cards/`),{front:S.data().front,back:S.data().back,streak:S.data().streak,next_review:S.data().next_review,type_answer:!!S.data().type_answer,new_card:S.data().streak===-1}).catch(U=>{rt.fire({title:U,color:"black",icon:"error"})})}),l.value="Done",i("loadDecks")}return e({openMigrate:c}),(m,g)=>(Me(),je(mn,null,[n.auth!==null&&n.auth.currentUser!==null?(Me(),je("div",SN)):Ot("",!0),s.value?(Me(),je("div",RN,[W("div",PN,[W("button",{onClick:g[0]||(g[0]=b=>h()),class:"rounded-sm bg-red-400 p-3"}," Close "),g[4]||(g[4]=W("p",{class:"text-lg"},"Deck Migration Tool",-1)),g[5]||(g[5]=W("p",null," This tool adds a required new_card field to all new cards in your deck. ",-1)),Ze(W("select",{"onUpdate:modelValue":g[1]||(g[1]=b=>a.value=b),class:"mt-3 rounded-sm bg-orange-300 p-3"},[g[3]||(g[3]=W("option",{selected:"",disabled:"",value:""},"Select Deck",-1)),(Me(!0),je(mn,null,ai(o.value,b=>(Me(),je("option",{value:b.id},It(b.name),9,DN))),256))],512),[[Xi,a.value]]),g[6]||(g[6]=W("br",null,null,-1)),W("div",null,[a.value?(Me(),je("button",{key:0,onClick:g[2]||(g[2]=b=>p()),class:"mt-3 rounded-sm bg-blue-500 p-3"}," Migrate ")):Ot("",!0)]),l.value!==""?(Me(),je("div",ON,[W("p",null,It(l.value),1)])):Ot("",!0)])])):Ot("",!0)],64))}},LN={class:"mb-5 mt-8"},MN={__name:"App",setup(n){const e=Ae(null);let t=!1;const r=Ae(null),i=Ae(null),s=Ae(null),o=Ae(null),a=Ae(null),l=Ae(null),c=Ae(null),h=Ae(!1),p=Ae(!1),m=Ae(1.5),g=Ae(24),b=Ae("0.7.3");lw(()=>{const U=vA();oI(U,async()=>{t||(t=!0,e.value=U,await rs(),e.value.currentUser!==null&&(o.value.loadDecks(),O()))})});async function E(){const U=await Ws(ht(Qi,`users/${e.value.currentUser.uid}`));m.value=U.data().time_multiplier,g.value=U.data().time_duration}function S(){p.value=!1,e.value.currentUser!==null&&Ht(ht(Qi,`users/${e.value.currentUser.uid}`),{seen_changelog_version:b.value})}function O(){e.value.currentUser!==null&&Ws(ht(Qi,`users/${e.value.currentUser.uid}`)).then(U=>{U.data().seen_changelog_version!==b.value&&(p.value=!0)})}return(U,D)=>(Me(),je(mn,null,[W("div",LN,[Ln(sR,{auth:e.value,onOpenSettings:D[0]||(D[0]=V=>s.value.openSettings()),onOpenSignIn:D[1]||(D[1]=V=>r.value.openMenu()),onOpenSignUp:D[2]||(D[2]=V=>i.value.openMenu()),onSignOut:D[3]||(D[3]=V=>o.value.logout())},null,8,["auth"]),D[18]||(D[18]=W("br",null,null,-1)),Ln(BO,{auth:e.value,db:hr(Qi),storage:hr($N),onLoadSettings:D[4]||(D[4]=V=>E()),onReview:D[5]||(D[5]=(V,K)=>a.value.reviewCards(V,K)),onLargeReview:D[6]||(D[6]=(V,K,oe)=>l.value.reviewCards(V,K,oe)),ref_key:"decks_ref",ref:o},null,8,["auth","db","storage"])]),Ln(YS,{auth:e.value,onLoadDecks:D[7]||(D[7]=V=>{o.value.loadDecks(),O()}),ref_key:"sign_in_menu_ref",ref:r},null,8,["auth"]),Ln(eR,{auth:e.value,db:hr(Qi),onLoadDecks:D[8]||(D[8]=V=>{o.value.loadDecks(),O()}),ref_key:"sign_up_menu_ref",ref:i},null,8,["auth","db"]),Ln(d3,{auth:e.value,db:hr(Qi),"time-duration":g.value,"time-multiplier":m.value,onReselectDeck:D[9]||(D[9]=V=>o.value.reselectDeck()),ref_key:"review_ref",ref:a},null,8,["auth","db","time-duration","time-multiplier"]),Ln(IN,{auth:e.value,db:hr(Qi),"time-duration":g.value,"time-multiplier":m.value,onReselectDeck:D[10]||(D[10]=V=>o.value.reselectDeck()),ref_key:"large_review_ref",ref:l},null,8,["auth","db","time-duration","time-multiplier"]),Ln(cR,{auth:e.value,db:hr(Qi),onSaveSettings:D[11]||(D[11]=V=>E()),onOpenMigrate:D[12]||(D[12]=V=>c.value.openMigrate()),ref_key:"settings_ref",ref:s},null,8,["auth","db"]),W("div",null,[W("button",{onClick:D[13]||(D[13]=V=>h.value=!0),class:"absolute right-5 top-5 rounded-md bg-gray-500 p-2 shadow-sm shadow-black"}," Guide "),h.value?(Me(),Ai(jS,{key:0,"app-version":b.value,onClose:D[14]||(D[14]=V=>h.value=!1),onShowChangelog:D[15]||(D[15]=V=>p.value=!0)},null,8,["app-version"])):Ot("",!0)]),p.value?(Me(),Ai(CN,{key:0,onClose:D[16]||(D[16]=V=>S())})):Ot("",!0),Ln(NN,{auth:e.value,db:hr(Qi),onLoadDecks:D[17]||(D[17]=V=>o.value.loadDecks()),ref_key:"deck_migrate_ref",ref:c},null,8,["auth","db"])],64))}};var VN="firebase",UN="11.6.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pi(VN,UN,"app");const FN={apiKey:"AIzaSyAGYqERiL1fj0l2m1ZmlkHFd5Vq8OiMubw",authDomain:"spare-a6401.firebaseapp.com",projectId:"spare-a6401",storageBucket:"spare-a6401.appspot.com",messagingSenderId:"277807224978",appId:"1:277807224978:web:6420ae19b4ca94e41c6e4b"},K0=Hw(FN),Qi=yS(K0),$N=YP(K0);gk(MN).mount("#app");
