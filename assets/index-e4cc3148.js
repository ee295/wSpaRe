var Lk=Object.defineProperty;var Mk=(t,e,n)=>e in t?Lk(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Kt=(t,e,n)=>(Mk(t,typeof e!="symbol"?e+"":e,n),n),Vk=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)};var od=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)};var pu=(t,e,n)=>(Vk(t,e,"access private method"),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Kf(t,e){const n=Object.create(null),r=t.split(",");for(let i=0;i<r.length;i++)n[r[i]]=!0;return e?i=>!!n[i.toLowerCase()]:i=>!!n[i]}const Gt={},Ro=[],Dr=()=>{},Uk=()=>!1,Fk=/^on[^a-z]/,Uc=t=>Fk.test(t),Gf=t=>t.startsWith("onUpdate:"),On=Object.assign,Qf=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},$k=Object.prototype.hasOwnProperty,yt=(t,e)=>$k.call(t,e),je=Array.isArray,So=t=>bl(t)==="[object Map]",ta=t=>bl(t)==="[object Set]",yg=t=>bl(t)==="[object Date]",lt=t=>typeof t=="function",vn=t=>typeof t=="string",Ka=t=>typeof t=="symbol",Yt=t=>t!==null&&typeof t=="object",Bw=t=>Yt(t)&&lt(t.then)&&lt(t.catch),zw=Object.prototype.toString,bl=t=>zw.call(t),Bk=t=>bl(t).slice(8,-1),jw=t=>bl(t)==="[object Object]",Yf=t=>vn(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,zu=Kf(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Fc=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},zk=/-(\w)/g,$o=Fc(t=>t.replace(zk,(e,n)=>n?n.toUpperCase():"")),jk=/\B([A-Z])/g,na=Fc(t=>t.replace(jk,"-$1").toLowerCase()),qw=Fc(t=>t.charAt(0).toUpperCase()+t.slice(1)),ad=Fc(t=>t?`on${qw(t)}`:""),Ga=(t,e)=>!Object.is(t,e),ju=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},ic=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},sc=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let bg;const Yd=()=>bg||(bg=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Fs(t){if(je(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],i=vn(r)?Kk(r):Fs(r);if(i)for(const s in i)e[s]=i[s]}return e}else{if(vn(t))return t;if(Yt(t))return t}}const qk=/;(?![^(]*\))/g,Hk=/:([^]+)/,Wk=/\/\*[^]*?\*\//g;function Kk(t){const e={};return t.replace(Wk,"").split(qk).forEach(n=>{if(n){const r=n.split(Hk);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Xf(t){let e="";if(vn(t))e=t;else if(je(t))for(let n=0;n<t.length;n++){const r=Xf(t[n]);r&&(e+=r+" ")}else if(Yt(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const Gk="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Qk=Kf(Gk);function Hw(t){return!!t||t===""}function Yk(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=kl(t[r],e[r]);return n}function kl(t,e){if(t===e)return!0;let n=yg(t),r=yg(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=Ka(t),r=Ka(e),n||r)return t===e;if(n=je(t),r=je(e),n||r)return n&&r?Yk(t,e):!1;if(n=Yt(t),r=Yt(e),n||r){if(!n||!r)return!1;const i=Object.keys(t).length,s=Object.keys(e).length;if(i!==s)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!kl(t[o],e[o]))return!1}}return String(t)===String(e)}function Zf(t,e){return t.findIndex(n=>kl(n,e))}const bt=t=>vn(t)?t:t==null?"":je(t)||Yt(t)&&(t.toString===zw||!lt(t.toString))?JSON.stringify(t,Ww,2):String(t),Ww=(t,e)=>e&&e.__v_isRef?Ww(t,e.value):So(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,i])=>(n[`${r} =>`]=i,n),{})}:ta(e)?{[`Set(${e.size})`]:[...e.values()]}:Yt(e)&&!je(e)&&!jw(e)?String(e):e;let Ir;class Xk{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Ir,!e&&Ir&&(this.index=(Ir.scopes||(Ir.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const n=Ir;try{return Ir=this,e()}finally{Ir=n}}}on(){Ir=this}off(){Ir=this.parent}stop(e){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this._active=!1}}}function Zk(t,e=Ir){e&&e.active&&e.effects.push(t)}function Jk(){return Ir}const Jf=t=>{const e=new Set(t);return e.w=0,e.n=0,e},Kw=t=>(t.w&es)>0,Gw=t=>(t.n&es)>0,eE=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=es},tE=t=>{const{deps:e}=t;if(e.length){let n=0;for(let r=0;r<e.length;r++){const i=e[r];Kw(i)&&!Gw(i)?i.delete(t):e[n++]=i,i.w&=~es,i.n&=~es}e.length=n}},Xd=new WeakMap;let xa=0,es=1;const Zd=30;let Rr;const Os=Symbol(""),Jd=Symbol("");class ep{constructor(e,n=null,r){this.fn=e,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,Zk(this,r)}run(){if(!this.active)return this.fn();let e=Rr,n=Qi;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=Rr,Rr=this,Qi=!0,es=1<<++xa,xa<=Zd?eE(this):kg(this),this.fn()}finally{xa<=Zd&&tE(this),es=1<<--xa,Rr=this.parent,Qi=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Rr===this?this.deferStop=!0:this.active&&(kg(this),this.onStop&&this.onStop(),this.active=!1)}}function kg(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let Qi=!0;const Qw=[];function ra(){Qw.push(Qi),Qi=!1}function ia(){const t=Qw.pop();Qi=t===void 0?!0:t}function ar(t,e,n){if(Qi&&Rr){let r=Xd.get(t);r||Xd.set(t,r=new Map);let i=r.get(n);i||r.set(n,i=Jf()),Yw(i)}}function Yw(t,e){let n=!1;xa<=Zd?Gw(t)||(t.n|=es,n=!Kw(t)):n=!t.has(Rr),n&&(t.add(Rr),Rr.deps.push(t))}function Ti(t,e,n,r,i,s){const o=Xd.get(t);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(n==="length"&&je(t)){const l=Number(r);o.forEach((u,d)=>{(d==="length"||d>=l)&&a.push(u)})}else switch(n!==void 0&&a.push(o.get(n)),e){case"add":je(t)?Yf(n)&&a.push(o.get("length")):(a.push(o.get(Os)),So(t)&&a.push(o.get(Jd)));break;case"delete":je(t)||(a.push(o.get(Os)),So(t)&&a.push(o.get(Jd)));break;case"set":So(t)&&a.push(o.get(Os));break}if(a.length===1)a[0]&&ef(a[0]);else{const l=[];for(const u of a)u&&l.push(...u);ef(Jf(l))}}function ef(t,e){const n=je(t)?t:[...t];for(const r of n)r.computed&&Eg(r);for(const r of n)r.computed||Eg(r)}function Eg(t,e){(t!==Rr||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const nE=Kf("__proto__,__v_isRef,__isVue"),Xw=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Ka)),rE=tp(),iE=tp(!1,!0),sE=tp(!0),Tg=oE();function oE(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const r=At(this);for(let s=0,o=this.length;s<o;s++)ar(r,"get",s+"");const i=r[e](...n);return i===-1||i===!1?r[e](...n.map(At)):i}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){ra();const r=At(this)[e].apply(this,n);return ia(),r}}),t}function aE(t){const e=At(this);return ar(e,"has",t),e.hasOwnProperty(t)}function tp(t=!1,e=!1){return function(r,i,s){if(i==="__v_isReactive")return!t;if(i==="__v_isReadonly")return t;if(i==="__v_isShallow")return e;if(i==="__v_raw"&&s===(t?e?EE:nv:e?tv:ev).get(r))return r;const o=je(r);if(!t){if(o&&yt(Tg,i))return Reflect.get(Tg,i,s);if(i==="hasOwnProperty")return aE}const a=Reflect.get(r,i,s);return(Ka(i)?Xw.has(i):nE(i))||(t||ar(r,"get",i),e)?a:Bn(a)?o&&Yf(i)?a:a.value:Yt(a)?t?rv(a):ip(a):a}}const lE=Zw(),uE=Zw(!0);function Zw(t=!1){return function(n,r,i,s){let o=n[r];if(Bo(o)&&Bn(o)&&!Bn(i))return!1;if(!t&&(!oc(i)&&!Bo(i)&&(o=At(o),i=At(i)),!je(n)&&Bn(o)&&!Bn(i)))return o.value=i,!0;const a=je(n)&&Yf(r)?Number(r)<n.length:yt(n,r),l=Reflect.set(n,r,i,s);return n===At(s)&&(a?Ga(i,o)&&Ti(n,"set",r,i):Ti(n,"add",r,i)),l}}function cE(t,e){const n=yt(t,e);t[e];const r=Reflect.deleteProperty(t,e);return r&&n&&Ti(t,"delete",e,void 0),r}function hE(t,e){const n=Reflect.has(t,e);return(!Ka(e)||!Xw.has(e))&&ar(t,"has",e),n}function dE(t){return ar(t,"iterate",je(t)?"length":Os),Reflect.ownKeys(t)}const Jw={get:rE,set:lE,deleteProperty:cE,has:hE,ownKeys:dE},fE={get:sE,set(t,e){return!0},deleteProperty(t,e){return!0}},pE=On({},Jw,{get:iE,set:uE}),np=t=>t,$c=t=>Reflect.getPrototypeOf(t);function mu(t,e,n=!1,r=!1){t=t.__v_raw;const i=At(t),s=At(e);n||(e!==s&&ar(i,"get",e),ar(i,"get",s));const{has:o}=$c(i),a=r?np:n?op:Qa;if(o.call(i,e))return a(t.get(e));if(o.call(i,s))return a(t.get(s));t!==i&&t.get(e)}function gu(t,e=!1){const n=this.__v_raw,r=At(n),i=At(t);return e||(t!==i&&ar(r,"has",t),ar(r,"has",i)),t===i?n.has(t):n.has(t)||n.has(i)}function _u(t,e=!1){return t=t.__v_raw,!e&&ar(At(t),"iterate",Os),Reflect.get(t,"size",t)}function Ig(t){t=At(t);const e=At(this);return $c(e).has.call(e,t)||(e.add(t),Ti(e,"add",t,t)),this}function Ag(t,e){e=At(e);const n=At(this),{has:r,get:i}=$c(n);let s=r.call(n,t);s||(t=At(t),s=r.call(n,t));const o=i.call(n,t);return n.set(t,e),s?Ga(e,o)&&Ti(n,"set",t,e):Ti(n,"add",t,e),this}function xg(t){const e=At(this),{has:n,get:r}=$c(e);let i=n.call(e,t);i||(t=At(t),i=n.call(e,t)),r&&r.call(e,t);const s=e.delete(t);return i&&Ti(e,"delete",t,void 0),s}function Cg(){const t=At(this),e=t.size!==0,n=t.clear();return e&&Ti(t,"clear",void 0,void 0),n}function wu(t,e){return function(r,i){const s=this,o=s.__v_raw,a=At(o),l=e?np:t?op:Qa;return!t&&ar(a,"iterate",Os),o.forEach((u,d)=>r.call(i,l(u),l(d),s))}}function vu(t,e,n){return function(...r){const i=this.__v_raw,s=At(i),o=So(s),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,u=i[t](...r),d=n?np:e?op:Qa;return!e&&ar(s,"iterate",l?Jd:Os),{next(){const{value:f,done:p}=u.next();return p?{value:f,done:p}:{value:a?[d(f[0]),d(f[1])]:d(f),done:p}},[Symbol.iterator](){return this}}}}function Ui(t){return function(...e){return t==="delete"?!1:this}}function mE(){const t={get(s){return mu(this,s)},get size(){return _u(this)},has:gu,add:Ig,set:Ag,delete:xg,clear:Cg,forEach:wu(!1,!1)},e={get(s){return mu(this,s,!1,!0)},get size(){return _u(this)},has:gu,add:Ig,set:Ag,delete:xg,clear:Cg,forEach:wu(!1,!0)},n={get(s){return mu(this,s,!0)},get size(){return _u(this,!0)},has(s){return gu.call(this,s,!0)},add:Ui("add"),set:Ui("set"),delete:Ui("delete"),clear:Ui("clear"),forEach:wu(!0,!1)},r={get(s){return mu(this,s,!0,!0)},get size(){return _u(this,!0)},has(s){return gu.call(this,s,!0)},add:Ui("add"),set:Ui("set"),delete:Ui("delete"),clear:Ui("clear"),forEach:wu(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{t[s]=vu(s,!1,!1),n[s]=vu(s,!0,!1),e[s]=vu(s,!1,!0),r[s]=vu(s,!0,!0)}),[t,n,e,r]}const[gE,_E,wE,vE]=mE();function rp(t,e){const n=e?t?vE:wE:t?_E:gE;return(r,i,s)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?r:Reflect.get(yt(n,i)&&i in r?n:r,i,s)}const yE={get:rp(!1,!1)},bE={get:rp(!1,!0)},kE={get:rp(!0,!1)},ev=new WeakMap,tv=new WeakMap,nv=new WeakMap,EE=new WeakMap;function TE(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function IE(t){return t.__v_skip||!Object.isExtensible(t)?0:TE(Bk(t))}function ip(t){return Bo(t)?t:sp(t,!1,Jw,yE,ev)}function AE(t){return sp(t,!1,pE,bE,tv)}function rv(t){return sp(t,!0,fE,kE,nv)}function sp(t,e,n,r,i){if(!Yt(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const s=i.get(t);if(s)return s;const o=IE(t);if(o===0)return t;const a=new Proxy(t,o===2?r:n);return i.set(t,a),a}function Po(t){return Bo(t)?Po(t.__v_raw):!!(t&&t.__v_isReactive)}function Bo(t){return!!(t&&t.__v_isReadonly)}function oc(t){return!!(t&&t.__v_isShallow)}function iv(t){return Po(t)||Bo(t)}function At(t){const e=t&&t.__v_raw;return e?At(e):t}function sv(t){return ic(t,"__v_skip",!0),t}const Qa=t=>Yt(t)?ip(t):t,op=t=>Yt(t)?rv(t):t;function ov(t){Qi&&Rr&&(t=At(t),Yw(t.dep||(t.dep=Jf())))}function av(t,e){t=At(t);const n=t.dep;n&&ef(n)}function Bn(t){return!!(t&&t.__v_isRef===!0)}function we(t){return xE(t,!1)}function xE(t,e){return Bn(t)?t:new CE(t,e)}class CE{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:At(e),this._value=n?e:Qa(e)}get value(){return ov(this),this._value}set value(e){const n=this.__v_isShallow||oc(e)||Bo(e);e=n?e:At(e),Ga(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:Qa(e),av(this))}}function xr(t){return Bn(t)?t.value:t}const RE={get:(t,e,n)=>xr(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return Bn(i)&&!Bn(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function lv(t){return Po(t)?t:new Proxy(t,RE)}class SE{constructor(e,n,r,i){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new ep(e,()=>{this._dirty||(this._dirty=!0,av(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=r}get value(){const e=At(this);return ov(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function PE(t,e,n=!1){let r,i;const s=lt(t);return s?(r=t,i=Dr):(r=t.get,i=t.set),new SE(r,i,s||!i,n)}function Yi(t,e,n,r){let i;try{i=r?t(...r):t()}catch(s){Bc(s,e,n)}return i}function Or(t,e,n,r){if(lt(t)){const s=Yi(t,e,n,r);return s&&Bw(s)&&s.catch(o=>{Bc(o,e,n)}),s}const i=[];for(let s=0;s<t.length;s++)i.push(Or(t[s],e,n,r));return i}function Bc(t,e,n,r=!0){const i=e?e.vnode:null;if(e){let s=e.parent;const o=e.proxy,a=n;for(;s;){const u=s.ec;if(u){for(let d=0;d<u.length;d++)if(u[d](t,o,a)===!1)return}s=s.parent}const l=e.appContext.config.errorHandler;if(l){Yi(l,null,10,[t,o,a]);return}}DE(t,n,i,r)}function DE(t,e,n,r=!0){console.error(t)}let Ya=!1,tf=!1;const Un=[];let Kr=0;const Do=[];let vi=null,As=0;const uv=Promise.resolve();let ap=null;function ts(t){const e=ap||uv;return t?e.then(this?t.bind(this):t):e}function OE(t){let e=Kr+1,n=Un.length;for(;e<n;){const r=e+n>>>1;Xa(Un[r])<t?e=r+1:n=r}return e}function lp(t){(!Un.length||!Un.includes(t,Ya&&t.allowRecurse?Kr+1:Kr))&&(t.id==null?Un.push(t):Un.splice(OE(t.id),0,t),cv())}function cv(){!Ya&&!tf&&(tf=!0,ap=uv.then(dv))}function NE(t){const e=Un.indexOf(t);e>Kr&&Un.splice(e,1)}function LE(t){je(t)?Do.push(...t):(!vi||!vi.includes(t,t.allowRecurse?As+1:As))&&Do.push(t),cv()}function Rg(t,e=Ya?Kr+1:0){for(;e<Un.length;e++){const n=Un[e];n&&n.pre&&(Un.splice(e,1),e--,n())}}function hv(t){if(Do.length){const e=[...new Set(Do)];if(Do.length=0,vi){vi.push(...e);return}for(vi=e,vi.sort((n,r)=>Xa(n)-Xa(r)),As=0;As<vi.length;As++)vi[As]();vi=null,As=0}}const Xa=t=>t.id==null?1/0:t.id,ME=(t,e)=>{const n=Xa(t)-Xa(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function dv(t){tf=!1,Ya=!0,Un.sort(ME);const e=Dr;try{for(Kr=0;Kr<Un.length;Kr++){const n=Un[Kr];n&&n.active!==!1&&Yi(n,null,14)}}finally{Kr=0,Un.length=0,hv(),Ya=!1,ap=null,(Un.length||Do.length)&&dv()}}function VE(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||Gt;let i=n;const s=e.startsWith("update:"),o=s&&e.slice(7);if(o&&o in r){const d=`${o==="modelValue"?"model":o}Modifiers`,{number:f,trim:p}=r[d]||Gt;p&&(i=n.map(m=>vn(m)?m.trim():m)),f&&(i=n.map(sc))}let a,l=r[a=ad(e)]||r[a=ad($o(e))];!l&&s&&(l=r[a=ad(na(e))]),l&&Or(l,t,6,i);const u=r[a+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,Or(u,t,6,i)}}function fv(t,e,n=!1){const r=e.emitsCache,i=r.get(t);if(i!==void 0)return i;const s=t.emits;let o={},a=!1;if(!lt(t)){const l=u=>{const d=fv(u,e,!0);d&&(a=!0,On(o,d))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!s&&!a?(Yt(t)&&r.set(t,null),null):(je(s)?s.forEach(l=>o[l]=null):On(o,s),Yt(t)&&r.set(t,o),o)}function zc(t,e){return!t||!Uc(e)?!1:(e=e.slice(2).replace(/Once$/,""),yt(t,e[0].toLowerCase()+e.slice(1))||yt(t,na(e))||yt(t,e))}let Sr=null,pv=null;function ac(t){const e=Sr;return Sr=t,pv=t&&t.type.__scopeId||null,e}function UE(t,e=Sr,n){if(!e||t._n)return t;const r=(...i)=>{r._d&&$g(-1);const s=ac(e);let o;try{o=t(...i)}finally{ac(s),r._d&&$g(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function ld(t){const{type:e,vnode:n,proxy:r,withProxy:i,props:s,propsOptions:[o],slots:a,attrs:l,emit:u,render:d,renderCache:f,data:p,setupState:m,ctx:b,inheritAttrs:v}=t;let I,A;const x=ac(t);try{if(n.shapeFlag&4){const D=i||r;I=Wr(d.call(D,D,f,s,m,p,b)),A=l}else{const D=e;I=Wr(D.length>1?D(s,{attrs:l,slots:a,emit:u}):D(s,null)),A=e.props?l:FE(l)}}catch(D){Ua.length=0,Bc(D,t,1),I=En($s)}let S=I;if(A&&v!==!1){const D=Object.keys(A),{shapeFlag:B}=S;D.length&&B&7&&(o&&D.some(Gf)&&(A=$E(A,o)),S=zo(S,A))}return n.dirs&&(S=zo(S),S.dirs=S.dirs?S.dirs.concat(n.dirs):n.dirs),n.transition&&(S.transition=n.transition),I=S,ac(x),I}const FE=t=>{let e;for(const n in t)(n==="class"||n==="style"||Uc(n))&&((e||(e={}))[n]=t[n]);return e},$E=(t,e)=>{const n={};for(const r in t)(!Gf(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function BE(t,e,n){const{props:r,children:i,component:s}=t,{props:o,children:a,patchFlag:l}=e,u=s.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?Sg(r,o,u):!!o;if(l&8){const d=e.dynamicProps;for(let f=0;f<d.length;f++){const p=d[f];if(o[p]!==r[p]&&!zc(u,p))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?Sg(r,o,u):!0:!!o;return!1}function Sg(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(e[s]!==t[s]&&!zc(n,s))return!0}return!1}function zE({vnode:t,parent:e},n){for(;e&&e.subTree===t;)(t=e.vnode).el=n,e=e.parent}const jE=t=>t.__isSuspense;function qE(t,e){e&&e.pendingBranch?je(t)?e.effects.push(...t):e.effects.push(t):LE(t)}const yu={};function ud(t,e,n){return mv(t,e,n)}function mv(t,e,{immediate:n,deep:r,flush:i,onTrack:s,onTrigger:o}=Gt){var a;const l=Jk()===((a=Fn)==null?void 0:a.scope)?Fn:null;let u,d=!1,f=!1;if(Bn(t)?(u=()=>t.value,d=oc(t)):Po(t)?(u=()=>t,r=!0):je(t)?(f=!0,d=t.some(D=>Po(D)||oc(D)),u=()=>t.map(D=>{if(Bn(D))return D.value;if(Po(D))return Cs(D);if(lt(D))return Yi(D,l,2)})):lt(t)?e?u=()=>Yi(t,l,2):u=()=>{if(!(l&&l.isUnmounted))return p&&p(),Or(t,l,3,[m])}:u=Dr,e&&r){const D=u;u=()=>Cs(D())}let p,m=D=>{p=x.onStop=()=>{Yi(D,l,4)}},b;if(Ja)if(m=Dr,e?n&&Or(e,l,3,[u(),f?[]:void 0,m]):u(),i==="sync"){const D=$T();b=D.__watcherHandles||(D.__watcherHandles=[])}else return Dr;let v=f?new Array(t.length).fill(yu):yu;const I=()=>{if(x.active)if(e){const D=x.run();(r||d||(f?D.some((B,X)=>Ga(B,v[X])):Ga(D,v)))&&(p&&p(),Or(e,l,3,[D,v===yu?void 0:f&&v[0]===yu?[]:v,m]),v=D)}else x.run()};I.allowRecurse=!!e;let A;i==="sync"?A=I:i==="post"?A=()=>sr(I,l&&l.suspense):(I.pre=!0,l&&(I.id=l.uid),A=()=>lp(I));const x=new ep(u,A);e?n?I():v=x.run():i==="post"?sr(x.run.bind(x),l&&l.suspense):x.run();const S=()=>{x.stop(),l&&l.scope&&Qf(l.scope.effects,x)};return b&&b.push(S),S}function HE(t,e,n){const r=this.proxy,i=vn(t)?t.includes(".")?gv(r,t):()=>r[t]:t.bind(r,r);let s;lt(e)?s=e:(s=e.handler,n=e);const o=Fn;jo(this);const a=mv(i,s.bind(r),n);return o?jo(o):Ns(),a}function gv(t,e){const n=e.split(".");return()=>{let r=t;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}function Cs(t,e){if(!Yt(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),Bn(t))Cs(t.value,e);else if(je(t))for(let n=0;n<t.length;n++)Cs(t[n],e);else if(ta(t)||So(t))t.forEach(n=>{Cs(n,e)});else if(jw(t))for(const n in t)Cs(t[n],e);return t}function Ke(t,e){const n=Sr;if(n===null)return t;const r=Wc(n)||n.proxy,i=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[o,a,l,u=Gt]=e[s];o&&(lt(o)&&(o={mounted:o,updated:o}),o.deep&&Cs(a),i.push({dir:o,instance:r,value:a,oldValue:void 0,arg:l,modifiers:u}))}return t}function ks(t,e,n,r){const i=t.dirs,s=e&&e.dirs;for(let o=0;o<i.length;o++){const a=i[o];s&&(a.oldValue=s[o].value);let l=a.dir[r];l&&(ra(),Or(l,n,8,[t.el,a,t,e]),ia())}}const qu=t=>!!t.type.__asyncLoader,_v=t=>t.type.__isKeepAlive;function WE(t,e){wv(t,"a",e)}function KE(t,e){wv(t,"da",e)}function wv(t,e,n=Fn){const r=t.__wdc||(t.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(jc(e,r,n),n){let i=n.parent;for(;i&&i.parent;)_v(i.parent.vnode)&&GE(r,e,n,i),i=i.parent}}function GE(t,e,n,r){const i=jc(e,t,r,!0);yv(()=>{Qf(r[e],i)},n)}function jc(t,e,n=Fn,r=!1){if(n){const i=n[t]||(n[t]=[]),s=e.__weh||(e.__weh=(...o)=>{if(n.isUnmounted)return;ra(),jo(n);const a=Or(e,n,t,o);return Ns(),ia(),a});return r?i.unshift(s):i.push(s),s}}const Ri=t=>(e,n=Fn)=>(!Ja||t==="sp")&&jc(t,(...r)=>e(...r),n),QE=Ri("bm"),vv=Ri("m"),YE=Ri("bu"),XE=Ri("u"),ZE=Ri("bum"),yv=Ri("um"),JE=Ri("sp"),eT=Ri("rtg"),tT=Ri("rtc");function nT(t,e=Fn){jc("ec",t,e)}const rT=Symbol.for("v-ndc");function Cr(t,e,n,r){let i;const s=n&&n[r];if(je(t)||vn(t)){i=new Array(t.length);for(let o=0,a=t.length;o<a;o++)i[o]=e(t[o],o,void 0,s&&s[o])}else if(typeof t=="number"){i=new Array(t);for(let o=0;o<t;o++)i[o]=e(o+1,o,void 0,s&&s[o])}else if(Yt(t))if(t[Symbol.iterator])i=Array.from(t,(o,a)=>e(o,a,void 0,s&&s[a]));else{const o=Object.keys(t);i=new Array(o.length);for(let a=0,l=o.length;a<l;a++){const u=o[a];i[a]=e(t[u],u,a,s&&s[a])}}else i=[];return n&&(n[r]=i),i}const nf=t=>t?Dv(t)?Wc(t)||t.proxy:nf(t.parent):null,Ma=On(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>nf(t.parent),$root:t=>nf(t.root),$emit:t=>t.emit,$options:t=>up(t),$forceUpdate:t=>t.f||(t.f=()=>lp(t.update)),$nextTick:t=>t.n||(t.n=ts.bind(t.proxy)),$watch:t=>HE.bind(t)}),cd=(t,e)=>t!==Gt&&!t.__isScriptSetup&&yt(t,e),iT={get({_:t},e){const{ctx:n,setupState:r,data:i,props:s,accessCache:o,type:a,appContext:l}=t;let u;if(e[0]!=="$"){const m=o[e];if(m!==void 0)switch(m){case 1:return r[e];case 2:return i[e];case 4:return n[e];case 3:return s[e]}else{if(cd(r,e))return o[e]=1,r[e];if(i!==Gt&&yt(i,e))return o[e]=2,i[e];if((u=t.propsOptions[0])&&yt(u,e))return o[e]=3,s[e];if(n!==Gt&&yt(n,e))return o[e]=4,n[e];rf&&(o[e]=0)}}const d=Ma[e];let f,p;if(d)return e==="$attrs"&&ar(t,"get",e),d(t);if((f=a.__cssModules)&&(f=f[e]))return f;if(n!==Gt&&yt(n,e))return o[e]=4,n[e];if(p=l.config.globalProperties,yt(p,e))return p[e]},set({_:t},e,n){const{data:r,setupState:i,ctx:s}=t;return cd(i,e)?(i[e]=n,!0):r!==Gt&&yt(r,e)?(r[e]=n,!0):yt(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(s[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:i,propsOptions:s}},o){let a;return!!n[o]||t!==Gt&&yt(t,o)||cd(e,o)||(a=s[0])&&yt(a,o)||yt(r,o)||yt(Ma,o)||yt(i.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:yt(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Pg(t){return je(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let rf=!0;function sT(t){const e=up(t),n=t.proxy,r=t.ctx;rf=!1,e.beforeCreate&&Dg(e.beforeCreate,t,"bc");const{data:i,computed:s,methods:o,watch:a,provide:l,inject:u,created:d,beforeMount:f,mounted:p,beforeUpdate:m,updated:b,activated:v,deactivated:I,beforeDestroy:A,beforeUnmount:x,destroyed:S,unmounted:D,render:B,renderTracked:X,renderTriggered:G,errorCaptured:se,serverPrefetch:re,expose:Q,inheritAttrs:le,components:F,directives:K,filters:T}=e;if(u&&oT(u,r,null),o)for(const M in o){const ce=o[M];lt(ce)&&(r[M]=ce.bind(n))}if(i){const M=i.call(n,n);Yt(M)&&(t.data=ip(M))}if(rf=!0,s)for(const M in s){const ce=s[M],ie=lt(ce)?ce.bind(n,n):lt(ce.get)?ce.get.bind(n,n):Dr,he=!lt(ce)&&lt(ce.set)?ce.set.bind(n):Dr,te=UT({get:ie,set:he});Object.defineProperty(r,M,{enumerable:!0,configurable:!0,get:()=>te.value,set:J=>te.value=J})}if(a)for(const M in a)bv(a[M],r,n,M);if(l){const M=lt(l)?l.call(n):l;Reflect.ownKeys(M).forEach(ce=>{dT(ce,M[ce])})}d&&Dg(d,t,"c");function Y(M,ce){je(ce)?ce.forEach(ie=>M(ie.bind(n))):ce&&M(ce.bind(n))}if(Y(QE,f),Y(vv,p),Y(YE,m),Y(XE,b),Y(WE,v),Y(KE,I),Y(nT,se),Y(tT,X),Y(eT,G),Y(ZE,x),Y(yv,D),Y(JE,re),je(Q))if(Q.length){const M=t.exposed||(t.exposed={});Q.forEach(ce=>{Object.defineProperty(M,ce,{get:()=>n[ce],set:ie=>n[ce]=ie})})}else t.exposed||(t.exposed={});B&&t.render===Dr&&(t.render=B),le!=null&&(t.inheritAttrs=le),F&&(t.components=F),K&&(t.directives=K)}function oT(t,e,n=Dr){je(t)&&(t=sf(t));for(const r in t){const i=t[r];let s;Yt(i)?"default"in i?s=Hu(i.from||r,i.default,!0):s=Hu(i.from||r):s=Hu(i),Bn(s)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):e[r]=s}}function Dg(t,e,n){Or(je(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function bv(t,e,n,r){const i=r.includes(".")?gv(n,r):()=>n[r];if(vn(t)){const s=e[t];lt(s)&&ud(i,s)}else if(lt(t))ud(i,t.bind(n));else if(Yt(t))if(je(t))t.forEach(s=>bv(s,e,n,r));else{const s=lt(t.handler)?t.handler.bind(n):e[t.handler];lt(s)&&ud(i,s,t)}}function up(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=t.appContext,a=s.get(e);let l;return a?l=a:!i.length&&!n&&!r?l=e:(l={},i.length&&i.forEach(u=>lc(l,u,o,!0)),lc(l,e,o)),Yt(e)&&s.set(e,l),l}function lc(t,e,n,r=!1){const{mixins:i,extends:s}=e;s&&lc(t,s,n,!0),i&&i.forEach(o=>lc(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=aT[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const aT={data:Og,props:Ng,emits:Ng,methods:Ca,computed:Ca,beforeCreate:Yn,created:Yn,beforeMount:Yn,mounted:Yn,beforeUpdate:Yn,updated:Yn,beforeDestroy:Yn,beforeUnmount:Yn,destroyed:Yn,unmounted:Yn,activated:Yn,deactivated:Yn,errorCaptured:Yn,serverPrefetch:Yn,components:Ca,directives:Ca,watch:uT,provide:Og,inject:lT};function Og(t,e){return e?t?function(){return On(lt(t)?t.call(this,this):t,lt(e)?e.call(this,this):e)}:e:t}function lT(t,e){return Ca(sf(t),sf(e))}function sf(t){if(je(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Yn(t,e){return t?[...new Set([].concat(t,e))]:e}function Ca(t,e){return t?On(Object.create(null),t,e):e}function Ng(t,e){return t?je(t)&&je(e)?[...new Set([...t,...e])]:On(Object.create(null),Pg(t),Pg(e??{})):e}function uT(t,e){if(!t)return e;if(!e)return t;const n=On(Object.create(null),t);for(const r in e)n[r]=Yn(t[r],e[r]);return n}function kv(){return{app:null,config:{isNativeTag:Uk,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let cT=0;function hT(t,e){return function(r,i=null){lt(r)||(r=On({},r)),i!=null&&!Yt(i)&&(i=null);const s=kv(),o=new Set;let a=!1;const l=s.app={_uid:cT++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:BT,get config(){return s.config},set config(u){},use(u,...d){return o.has(u)||(u&&lt(u.install)?(o.add(u),u.install(l,...d)):lt(u)&&(o.add(u),u(l,...d))),l},mixin(u){return s.mixins.includes(u)||s.mixins.push(u),l},component(u,d){return d?(s.components[u]=d,l):s.components[u]},directive(u,d){return d?(s.directives[u]=d,l):s.directives[u]},mount(u,d,f){if(!a){const p=En(r,i);return p.appContext=s,d&&e?e(p,u):t(p,u,f),a=!0,l._container=u,u.__vue_app__=l,Wc(p.component)||p.component.proxy}},unmount(){a&&(t(null,l._container),delete l._container.__vue_app__)},provide(u,d){return s.provides[u]=d,l},runWithContext(u){uc=l;try{return u()}finally{uc=null}}};return l}}let uc=null;function dT(t,e){if(Fn){let n=Fn.provides;const r=Fn.parent&&Fn.parent.provides;r===n&&(n=Fn.provides=Object.create(r)),n[t]=e}}function Hu(t,e,n=!1){const r=Fn||Sr;if(r||uc){const i=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:uc._context.provides;if(i&&t in i)return i[t];if(arguments.length>1)return n&&lt(e)?e.call(r&&r.proxy):e}}function fT(t,e,n,r=!1){const i={},s={};ic(s,Hc,1),t.propsDefaults=Object.create(null),Ev(t,e,i,s);for(const o in t.propsOptions[0])o in i||(i[o]=void 0);n?t.props=r?i:AE(i):t.type.props?t.props=i:t.props=s,t.attrs=s}function pT(t,e,n,r){const{props:i,attrs:s,vnode:{patchFlag:o}}=t,a=At(i),[l]=t.propsOptions;let u=!1;if((r||o>0)&&!(o&16)){if(o&8){const d=t.vnode.dynamicProps;for(let f=0;f<d.length;f++){let p=d[f];if(zc(t.emitsOptions,p))continue;const m=e[p];if(l)if(yt(s,p))m!==s[p]&&(s[p]=m,u=!0);else{const b=$o(p);i[b]=of(l,a,b,m,t,!1)}else m!==s[p]&&(s[p]=m,u=!0)}}}else{Ev(t,e,i,s)&&(u=!0);let d;for(const f in a)(!e||!yt(e,f)&&((d=na(f))===f||!yt(e,d)))&&(l?n&&(n[f]!==void 0||n[d]!==void 0)&&(i[f]=of(l,a,f,void 0,t,!0)):delete i[f]);if(s!==a)for(const f in s)(!e||!yt(e,f))&&(delete s[f],u=!0)}u&&Ti(t,"set","$attrs")}function Ev(t,e,n,r){const[i,s]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(zu(l))continue;const u=e[l];let d;i&&yt(i,d=$o(l))?!s||!s.includes(d)?n[d]=u:(a||(a={}))[d]=u:zc(t.emitsOptions,l)||(!(l in r)||u!==r[l])&&(r[l]=u,o=!0)}if(s){const l=At(n),u=a||Gt;for(let d=0;d<s.length;d++){const f=s[d];n[f]=of(i,l,f,u[f],t,!yt(u,f))}}return o}function of(t,e,n,r,i,s){const o=t[n];if(o!=null){const a=yt(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&lt(l)){const{propsDefaults:u}=i;n in u?r=u[n]:(jo(i),r=u[n]=l.call(null,e),Ns())}else r=l}o[0]&&(s&&!a?r=!1:o[1]&&(r===""||r===na(n))&&(r=!0))}return r}function Tv(t,e,n=!1){const r=e.propsCache,i=r.get(t);if(i)return i;const s=t.props,o={},a=[];let l=!1;if(!lt(t)){const d=f=>{l=!0;const[p,m]=Tv(f,e,!0);On(o,p),m&&a.push(...m)};!n&&e.mixins.length&&e.mixins.forEach(d),t.extends&&d(t.extends),t.mixins&&t.mixins.forEach(d)}if(!s&&!l)return Yt(t)&&r.set(t,Ro),Ro;if(je(s))for(let d=0;d<s.length;d++){const f=$o(s[d]);Lg(f)&&(o[f]=Gt)}else if(s)for(const d in s){const f=$o(d);if(Lg(f)){const p=s[d],m=o[f]=je(p)||lt(p)?{type:p}:On({},p);if(m){const b=Ug(Boolean,m.type),v=Ug(String,m.type);m[0]=b>-1,m[1]=v<0||b<v,(b>-1||yt(m,"default"))&&a.push(f)}}}const u=[o,a];return Yt(t)&&r.set(t,u),u}function Lg(t){return t[0]!=="$"}function Mg(t){const e=t&&t.toString().match(/^\s*(function|class) (\w+)/);return e?e[2]:t===null?"null":""}function Vg(t,e){return Mg(t)===Mg(e)}function Ug(t,e){return je(e)?e.findIndex(n=>Vg(n,t)):lt(e)&&Vg(e,t)?0:-1}const Iv=t=>t[0]==="_"||t==="$stable",cp=t=>je(t)?t.map(Wr):[Wr(t)],mT=(t,e,n)=>{if(e._n)return e;const r=UE((...i)=>cp(e(...i)),n);return r._c=!1,r},Av=(t,e,n)=>{const r=t._ctx;for(const i in t){if(Iv(i))continue;const s=t[i];if(lt(s))e[i]=mT(i,s,r);else if(s!=null){const o=cp(s);e[i]=()=>o}}},xv=(t,e)=>{const n=cp(e);t.slots.default=()=>n},gT=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=At(e),ic(e,"_",n)):Av(e,t.slots={})}else t.slots={},e&&xv(t,e);ic(t.slots,Hc,1)},_T=(t,e,n)=>{const{vnode:r,slots:i}=t;let s=!0,o=Gt;if(r.shapeFlag&32){const a=e._;a?n&&a===1?s=!1:(On(i,e),!n&&a===1&&delete i._):(s=!e.$stable,Av(e,i)),o=e}else e&&(xv(t,e),o={default:1});if(s)for(const a in i)!Iv(a)&&!(a in o)&&delete i[a]};function af(t,e,n,r,i=!1){if(je(t)){t.forEach((p,m)=>af(p,e&&(je(e)?e[m]:e),n,r,i));return}if(qu(r)&&!i)return;const s=r.shapeFlag&4?Wc(r.component)||r.component.proxy:r.el,o=i?null:s,{i:a,r:l}=t,u=e&&e.r,d=a.refs===Gt?a.refs={}:a.refs,f=a.setupState;if(u!=null&&u!==l&&(vn(u)?(d[u]=null,yt(f,u)&&(f[u]=null)):Bn(u)&&(u.value=null)),lt(l))Yi(l,a,12,[o,d]);else{const p=vn(l),m=Bn(l);if(p||m){const b=()=>{if(t.f){const v=p?yt(f,l)?f[l]:d[l]:l.value;i?je(v)&&Qf(v,s):je(v)?v.includes(s)||v.push(s):p?(d[l]=[s],yt(f,l)&&(f[l]=d[l])):(l.value=[s],t.k&&(d[t.k]=l.value))}else p?(d[l]=o,yt(f,l)&&(f[l]=o)):m&&(l.value=o,t.k&&(d[t.k]=o))};o?(b.id=-1,sr(b,n)):b()}}}const sr=qE;function wT(t){return vT(t)}function vT(t,e){const n=Yd();n.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:o,createText:a,createComment:l,setText:u,setElementText:d,parentNode:f,nextSibling:p,setScopeId:m=Dr,insertStaticContent:b}=t,v=(U,V,w,z=null,L=null,C=null,R=!1,O=null,Z=!!V.dynamicChildren)=>{if(U===V)return;U&&!wa(U,V)&&(z=ze(U),J(U,L,C,!0),U=null),V.patchFlag===-2&&(Z=!1,V.dynamicChildren=null);const{type:W,ref:$,shapeFlag:ae}=V;switch(W){case qc:I(U,V,w,z);break;case $s:A(U,V,w,z);break;case Wu:U==null&&x(V,w,z,R);break;case Zt:F(U,V,w,z,L,C,R,O,Z);break;default:ae&1?B(U,V,w,z,L,C,R,O,Z):ae&6?K(U,V,w,z,L,C,R,O,Z):(ae&64||ae&128)&&W.process(U,V,w,z,L,C,R,O,Z,Te)}$!=null&&L&&af($,U&&U.ref,C,V||U,!V)},I=(U,V,w,z)=>{if(U==null)r(V.el=a(V.children),w,z);else{const L=V.el=U.el;V.children!==U.children&&u(L,V.children)}},A=(U,V,w,z)=>{U==null?r(V.el=l(V.children||""),w,z):V.el=U.el},x=(U,V,w,z)=>{[U.el,U.anchor]=b(U.children,V,w,z,U.el,U.anchor)},S=({el:U,anchor:V},w,z)=>{let L;for(;U&&U!==V;)L=p(U),r(U,w,z),U=L;r(V,w,z)},D=({el:U,anchor:V})=>{let w;for(;U&&U!==V;)w=p(U),i(U),U=w;i(V)},B=(U,V,w,z,L,C,R,O,Z)=>{R=R||V.type==="svg",U==null?X(V,w,z,L,C,R,O,Z):re(U,V,L,C,R,O,Z)},X=(U,V,w,z,L,C,R,O)=>{let Z,W;const{type:$,props:ae,shapeFlag:fe,transition:de,dirs:be}=U;if(Z=U.el=o(U.type,C,ae&&ae.is,ae),fe&8?d(Z,U.children):fe&16&&se(U.children,Z,null,z,L,C&&$!=="foreignObject",R,O),be&&ks(U,null,z,"created"),G(Z,U,U.scopeId,R,z),ae){for(const Se in ae)Se!=="value"&&!zu(Se)&&s(Z,Se,null,ae[Se],C,U.children,z,L,Ze);"value"in ae&&s(Z,"value",null,ae.value),(W=ae.onVnodeBeforeMount)&&Hr(W,z,U)}be&&ks(U,null,z,"beforeMount");const Ne=(!L||L&&!L.pendingBranch)&&de&&!de.persisted;Ne&&de.beforeEnter(Z),r(Z,V,w),((W=ae&&ae.onVnodeMounted)||Ne||be)&&sr(()=>{W&&Hr(W,z,U),Ne&&de.enter(Z),be&&ks(U,null,z,"mounted")},L)},G=(U,V,w,z,L)=>{if(w&&m(U,w),z)for(let C=0;C<z.length;C++)m(U,z[C]);if(L){let C=L.subTree;if(V===C){const R=L.vnode;G(U,R,R.scopeId,R.slotScopeIds,L.parent)}}},se=(U,V,w,z,L,C,R,O,Z=0)=>{for(let W=Z;W<U.length;W++){const $=U[W]=O?$i(U[W]):Wr(U[W]);v(null,$,V,w,z,L,C,R,O)}},re=(U,V,w,z,L,C,R)=>{const O=V.el=U.el;let{patchFlag:Z,dynamicChildren:W,dirs:$}=V;Z|=U.patchFlag&16;const ae=U.props||Gt,fe=V.props||Gt;let de;w&&Es(w,!1),(de=fe.onVnodeBeforeUpdate)&&Hr(de,w,V,U),$&&ks(V,U,w,"beforeUpdate"),w&&Es(w,!0);const be=L&&V.type!=="foreignObject";if(W?Q(U.dynamicChildren,W,O,w,z,be,C):R||ce(U,V,O,null,w,z,be,C,!1),Z>0){if(Z&16)le(O,V,ae,fe,w,z,L);else if(Z&2&&ae.class!==fe.class&&s(O,"class",null,fe.class,L),Z&4&&s(O,"style",ae.style,fe.style,L),Z&8){const Ne=V.dynamicProps;for(let Se=0;Se<Ne.length;Se++){const qe=Ne[Se],it=ae[qe],ht=fe[qe];(ht!==it||qe==="value")&&s(O,qe,it,ht,L,U.children,w,z,Ze)}}Z&1&&U.children!==V.children&&d(O,V.children)}else!R&&W==null&&le(O,V,ae,fe,w,z,L);((de=fe.onVnodeUpdated)||$)&&sr(()=>{de&&Hr(de,w,V,U),$&&ks(V,U,w,"updated")},z)},Q=(U,V,w,z,L,C,R)=>{for(let O=0;O<V.length;O++){const Z=U[O],W=V[O],$=Z.el&&(Z.type===Zt||!wa(Z,W)||Z.shapeFlag&70)?f(Z.el):w;v(Z,W,$,null,z,L,C,R,!0)}},le=(U,V,w,z,L,C,R)=>{if(w!==z){if(w!==Gt)for(const O in w)!zu(O)&&!(O in z)&&s(U,O,w[O],null,R,V.children,L,C,Ze);for(const O in z){if(zu(O))continue;const Z=z[O],W=w[O];Z!==W&&O!=="value"&&s(U,O,W,Z,R,V.children,L,C,Ze)}"value"in z&&s(U,"value",w.value,z.value)}},F=(U,V,w,z,L,C,R,O,Z)=>{const W=V.el=U?U.el:a(""),$=V.anchor=U?U.anchor:a("");let{patchFlag:ae,dynamicChildren:fe,slotScopeIds:de}=V;de&&(O=O?O.concat(de):de),U==null?(r(W,w,z),r($,w,z),se(V.children,w,$,L,C,R,O,Z)):ae>0&&ae&64&&fe&&U.dynamicChildren?(Q(U.dynamicChildren,fe,w,L,C,R,O),(V.key!=null||L&&V===L.subTree)&&hp(U,V,!0)):ce(U,V,w,$,L,C,R,O,Z)},K=(U,V,w,z,L,C,R,O,Z)=>{V.slotScopeIds=O,U==null?V.shapeFlag&512?L.ctx.activate(V,w,z,R,Z):T(V,w,z,L,C,R,Z):ee(U,V,Z)},T=(U,V,w,z,L,C,R)=>{const O=U.component=DT(U,z,L);if(_v(U)&&(O.ctx.renderer=Te),OT(O),O.asyncDep){if(L&&L.registerDep(O,Y),!U.el){const Z=O.subTree=En($s);A(null,Z,V,w)}return}Y(O,U,V,w,L,C,R)},ee=(U,V,w)=>{const z=V.component=U.component;if(BE(U,V,w))if(z.asyncDep&&!z.asyncResolved){M(z,V,w);return}else z.next=V,NE(z.update),z.update();else V.el=U.el,z.vnode=V},Y=(U,V,w,z,L,C,R)=>{const O=()=>{if(U.isMounted){let{next:$,bu:ae,u:fe,parent:de,vnode:be}=U,Ne=$,Se;Es(U,!1),$?($.el=be.el,M(U,$,R)):$=be,ae&&ju(ae),(Se=$.props&&$.props.onVnodeBeforeUpdate)&&Hr(Se,de,$,be),Es(U,!0);const qe=ld(U),it=U.subTree;U.subTree=qe,v(it,qe,f(it.el),ze(it),U,L,C),$.el=qe.el,Ne===null&&zE(U,qe.el),fe&&sr(fe,L),(Se=$.props&&$.props.onVnodeUpdated)&&sr(()=>Hr(Se,de,$,be),L)}else{let $;const{el:ae,props:fe}=V,{bm:de,m:be,parent:Ne}=U,Se=qu(V);if(Es(U,!1),de&&ju(de),!Se&&($=fe&&fe.onVnodeBeforeMount)&&Hr($,Ne,V),Es(U,!0),ae&&Ie){const qe=()=>{U.subTree=ld(U),Ie(ae,U.subTree,U,L,null)};Se?V.type.__asyncLoader().then(()=>!U.isUnmounted&&qe()):qe()}else{const qe=U.subTree=ld(U);v(null,qe,w,z,U,L,C),V.el=qe.el}if(be&&sr(be,L),!Se&&($=fe&&fe.onVnodeMounted)){const qe=V;sr(()=>Hr($,Ne,qe),L)}(V.shapeFlag&256||Ne&&qu(Ne.vnode)&&Ne.vnode.shapeFlag&256)&&U.a&&sr(U.a,L),U.isMounted=!0,V=w=z=null}},Z=U.effect=new ep(O,()=>lp(W),U.scope),W=U.update=()=>Z.run();W.id=U.uid,Es(U,!0),W()},M=(U,V,w)=>{V.component=U;const z=U.vnode.props;U.vnode=V,U.next=null,pT(U,V.props,z,w),_T(U,V.children,w),ra(),Rg(),ia()},ce=(U,V,w,z,L,C,R,O,Z=!1)=>{const W=U&&U.children,$=U?U.shapeFlag:0,ae=V.children,{patchFlag:fe,shapeFlag:de}=V;if(fe>0){if(fe&128){he(W,ae,w,z,L,C,R,O,Z);return}else if(fe&256){ie(W,ae,w,z,L,C,R,O,Z);return}}de&8?($&16&&Ze(W,L,C),ae!==W&&d(w,ae)):$&16?de&16?he(W,ae,w,z,L,C,R,O,Z):Ze(W,L,C,!0):($&8&&d(w,""),de&16&&se(ae,w,z,L,C,R,O,Z))},ie=(U,V,w,z,L,C,R,O,Z)=>{U=U||Ro,V=V||Ro;const W=U.length,$=V.length,ae=Math.min(W,$);let fe;for(fe=0;fe<ae;fe++){const de=V[fe]=Z?$i(V[fe]):Wr(V[fe]);v(U[fe],de,w,null,L,C,R,O,Z)}W>$?Ze(U,L,C,!0,!1,ae):se(V,w,z,L,C,R,O,Z,ae)},he=(U,V,w,z,L,C,R,O,Z)=>{let W=0;const $=V.length;let ae=U.length-1,fe=$-1;for(;W<=ae&&W<=fe;){const de=U[W],be=V[W]=Z?$i(V[W]):Wr(V[W]);if(wa(de,be))v(de,be,w,null,L,C,R,O,Z);else break;W++}for(;W<=ae&&W<=fe;){const de=U[ae],be=V[fe]=Z?$i(V[fe]):Wr(V[fe]);if(wa(de,be))v(de,be,w,null,L,C,R,O,Z);else break;ae--,fe--}if(W>ae){if(W<=fe){const de=fe+1,be=de<$?V[de].el:z;for(;W<=fe;)v(null,V[W]=Z?$i(V[W]):Wr(V[W]),w,be,L,C,R,O,Z),W++}}else if(W>fe)for(;W<=ae;)J(U[W],L,C,!0),W++;else{const de=W,be=W,Ne=new Map;for(W=be;W<=fe;W++){const Ot=V[W]=Z?$i(V[W]):Wr(V[W]);Ot.key!=null&&Ne.set(Ot.key,W)}let Se,qe=0;const it=fe-be+1;let ht=!1,Ut=0;const pt=new Array(it);for(W=0;W<it;W++)pt[W]=0;for(W=de;W<=ae;W++){const Ot=U[W];if(qe>=it){J(Ot,L,C,!0);continue}let Et;if(Ot.key!=null)Et=Ne.get(Ot.key);else for(Se=be;Se<=fe;Se++)if(pt[Se-be]===0&&wa(Ot,V[Se])){Et=Se;break}Et===void 0?J(Ot,L,C,!0):(pt[Et-be]=W+1,Et>=Ut?Ut=Et:ht=!0,v(Ot,V[Et],w,null,L,C,R,O,Z),qe++)}const pn=ht?yT(pt):Ro;for(Se=pn.length-1,W=it-1;W>=0;W--){const Ot=be+W,Et=V[Ot],Kn=Ot+1<$?V[Ot+1].el:z;pt[W]===0?v(null,Et,w,Kn,L,C,R,O,Z):ht&&(Se<0||W!==pn[Se]?te(Et,w,Kn,2):Se--)}}},te=(U,V,w,z,L=null)=>{const{el:C,type:R,transition:O,children:Z,shapeFlag:W}=U;if(W&6){te(U.component.subTree,V,w,z);return}if(W&128){U.suspense.move(V,w,z);return}if(W&64){R.move(U,V,w,Te);return}if(R===Zt){r(C,V,w);for(let ae=0;ae<Z.length;ae++)te(Z[ae],V,w,z);r(U.anchor,V,w);return}if(R===Wu){S(U,V,w);return}if(z!==2&&W&1&&O)if(z===0)O.beforeEnter(C),r(C,V,w),sr(()=>O.enter(C),L);else{const{leave:ae,delayLeave:fe,afterLeave:de}=O,be=()=>r(C,V,w),Ne=()=>{ae(C,()=>{be(),de&&de()})};fe?fe(C,be,Ne):Ne()}else r(C,V,w)},J=(U,V,w,z=!1,L=!1)=>{const{type:C,props:R,ref:O,children:Z,dynamicChildren:W,shapeFlag:$,patchFlag:ae,dirs:fe}=U;if(O!=null&&af(O,null,w,U,!0),$&256){V.ctx.deactivate(U);return}const de=$&1&&fe,be=!qu(U);let Ne;if(be&&(Ne=R&&R.onVnodeBeforeUnmount)&&Hr(Ne,V,U),$&6)H(U.component,w,z);else{if($&128){U.suspense.unmount(w,z);return}de&&ks(U,null,V,"beforeUnmount"),$&64?U.type.remove(U,V,w,L,Te,z):W&&(C!==Zt||ae>0&&ae&64)?Ze(W,V,w,!1,!0):(C===Zt&&ae&384||!L&&$&16)&&Ze(Z,V,w),z&&_e(U)}(be&&(Ne=R&&R.onVnodeUnmounted)||de)&&sr(()=>{Ne&&Hr(Ne,V,U),de&&ks(U,null,V,"unmounted")},w)},_e=U=>{const{type:V,el:w,anchor:z,transition:L}=U;if(V===Zt){ve(w,z);return}if(V===Wu){D(U);return}const C=()=>{i(w),L&&!L.persisted&&L.afterLeave&&L.afterLeave()};if(U.shapeFlag&1&&L&&!L.persisted){const{leave:R,delayLeave:O}=L,Z=()=>R(w,C);O?O(U.el,C,Z):Z()}else C()},ve=(U,V)=>{let w;for(;U!==V;)w=p(U),i(U),U=w;i(V)},H=(U,V,w)=>{const{bum:z,scope:L,update:C,subTree:R,um:O}=U;z&&ju(z),L.stop(),C&&(C.active=!1,J(R,U,V,w)),O&&sr(O,V),sr(()=>{U.isUnmounted=!0},V),V&&V.pendingBranch&&!V.isUnmounted&&U.asyncDep&&!U.asyncResolved&&U.suspenseId===V.pendingId&&(V.deps--,V.deps===0&&V.resolve())},Ze=(U,V,w,z=!1,L=!1,C=0)=>{for(let R=C;R<U.length;R++)J(U[R],V,w,z,L)},ze=U=>U.shapeFlag&6?ze(U.component.subTree):U.shapeFlag&128?U.suspense.next():p(U.anchor||U.el),Le=(U,V,w)=>{U==null?V._vnode&&J(V._vnode,null,null,!0):v(V._vnode||null,U,V,null,null,null,w),Rg(),hv(),V._vnode=U},Te={p:v,um:J,m:te,r:_e,mt:T,mc:se,pc:ce,pbc:Q,n:ze,o:t};let Me,Ie;return e&&([Me,Ie]=e(Te)),{render:Le,hydrate:Me,createApp:hT(Le,Me)}}function Es({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function hp(t,e,n=!1){const r=t.children,i=e.children;if(je(r)&&je(i))for(let s=0;s<r.length;s++){const o=r[s];let a=i[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[s]=$i(i[s]),a.el=o.el),n||hp(o,a)),a.type===qc&&(a.el=o.el)}}function yT(t){const e=t.slice(),n=[0];let r,i,s,o,a;const l=t.length;for(r=0;r<l;r++){const u=t[r];if(u!==0){if(i=n[n.length-1],t[i]<u){e[r]=i,n.push(r);continue}for(s=0,o=n.length-1;s<o;)a=s+o>>1,t[n[a]]<u?s=a+1:o=a;u<t[n[s]]&&(s>0&&(e[r]=n[s-1]),n[s]=r)}}for(s=n.length,o=n[s-1];s-- >0;)n[s]=o,o=e[o];return n}const bT=t=>t.__isTeleport,Va=t=>t&&(t.disabled||t.disabled===""),Fg=t=>typeof SVGElement<"u"&&t instanceof SVGElement,lf=(t,e)=>{const n=t&&t.to;return vn(n)?e?e(n):null:n},kT={__isTeleport:!0,process(t,e,n,r,i,s,o,a,l,u){const{mc:d,pc:f,pbc:p,o:{insert:m,querySelector:b,createText:v,createComment:I}}=u,A=Va(e.props);let{shapeFlag:x,children:S,dynamicChildren:D}=e;if(t==null){const B=e.el=v(""),X=e.anchor=v("");m(B,n,r),m(X,n,r);const G=e.target=lf(e.props,b),se=e.targetAnchor=v("");G&&(m(se,G),o=o||Fg(G));const re=(Q,le)=>{x&16&&d(S,Q,le,i,s,o,a,l)};A?re(n,X):G&&re(G,se)}else{e.el=t.el;const B=e.anchor=t.anchor,X=e.target=t.target,G=e.targetAnchor=t.targetAnchor,se=Va(t.props),re=se?n:X,Q=se?B:G;if(o=o||Fg(X),D?(p(t.dynamicChildren,D,re,i,s,o,a),hp(t,e,!0)):l||f(t,e,re,Q,i,s,o,a,!1),A)se||bu(e,n,B,u,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const le=e.target=lf(e.props,b);le&&bu(e,le,null,u,0)}else se&&bu(e,X,G,u,1)}Cv(e)},remove(t,e,n,r,{um:i,o:{remove:s}},o){const{shapeFlag:a,children:l,anchor:u,targetAnchor:d,target:f,props:p}=t;if(f&&s(d),(o||!Va(p))&&(s(u),a&16))for(let m=0;m<l.length;m++){const b=l[m];i(b,e,n,!0,!!b.dynamicChildren)}},move:bu,hydrate:ET};function bu(t,e,n,{o:{insert:r},m:i},s=2){s===0&&r(t.targetAnchor,e,n);const{el:o,anchor:a,shapeFlag:l,children:u,props:d}=t,f=s===2;if(f&&r(o,e,n),(!f||Va(d))&&l&16)for(let p=0;p<u.length;p++)i(u[p],e,n,2);f&&r(a,e,n)}function ET(t,e,n,r,i,s,{o:{nextSibling:o,parentNode:a,querySelector:l}},u){const d=e.target=lf(e.props,l);if(d){const f=d._lpa||d.firstChild;if(e.shapeFlag&16)if(Va(e.props))e.anchor=u(o(t),e,a(t),n,r,i,s),e.targetAnchor=f;else{e.anchor=o(t);let p=f;for(;p;)if(p=o(p),p&&p.nodeType===8&&p.data==="teleport anchor"){e.targetAnchor=p,d._lpa=e.targetAnchor&&o(e.targetAnchor);break}u(f,e,d,n,r,i,s)}Cv(e)}return e.anchor&&o(e.anchor)}const TT=kT;function Cv(t){const e=t.ctx;if(e&&e.ut){let n=t.children[0].el;for(;n!==t.targetAnchor;)n.nodeType===1&&n.setAttribute("data-v-owner",e.uid),n=n.nextSibling;e.ut()}}const Zt=Symbol.for("v-fgt"),qc=Symbol.for("v-txt"),$s=Symbol.for("v-cmt"),Wu=Symbol.for("v-stc"),Ua=[];let Pr=null;function xe(t=!1){Ua.push(Pr=t?null:[])}function IT(){Ua.pop(),Pr=Ua[Ua.length-1]||null}let Za=1;function $g(t){Za+=t}function Rv(t){return t.dynamicChildren=Za>0?Pr||Ro:null,IT(),Za>0&&Pr&&Pr.push(t),t}function Pe(t,e,n,r,i,s){return Rv(N(t,e,n,r,i,s,!0))}function Gr(t,e,n,r,i){return Rv(En(t,e,n,r,i,!0))}function AT(t){return t?t.__v_isVNode===!0:!1}function wa(t,e){return t.type===e.type&&t.key===e.key}const Hc="__vInternal",Sv=({key:t})=>t??null,Ku=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?vn(t)||Bn(t)||lt(t)?{i:Sr,r:t,k:e,f:!!n}:t:null);function N(t,e=null,n=null,r=0,i=null,s=t===Zt?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Sv(e),ref:e&&Ku(e),scopeId:pv,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Sr};return a?(dp(l,n),s&128&&t.normalize(l)):n&&(l.shapeFlag|=vn(n)?8:16),Za>0&&!o&&Pr&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&Pr.push(l),l}const En=xT;function xT(t,e=null,n=null,r=0,i=null,s=!1){if((!t||t===rT)&&(t=$s),AT(t)){const a=zo(t,e,!0);return n&&dp(a,n),Za>0&&!s&&Pr&&(a.shapeFlag&6?Pr[Pr.indexOf(t)]=a:Pr.push(a)),a.patchFlag|=-2,a}if(VT(t)&&(t=t.__vccOpts),e){e=CT(e);let{class:a,style:l}=e;a&&!vn(a)&&(e.class=Xf(a)),Yt(l)&&(iv(l)&&!je(l)&&(l=On({},l)),e.style=Fs(l))}const o=vn(t)?1:jE(t)?128:bT(t)?64:Yt(t)?4:lt(t)?2:0;return N(t,e,n,r,i,o,s,!0)}function CT(t){return t?iv(t)||Hc in t?On({},t):t:null}function zo(t,e,n=!1){const{props:r,ref:i,patchFlag:s,children:o}=t,a=e?RT(r||{},e):r;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:a,key:a&&Sv(a),ref:e&&e.ref?n&&i?je(i)?i.concat(Ku(e)):[i,Ku(e)]:Ku(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Zt?s===-1?16:s|16:s,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&zo(t.ssContent),ssFallback:t.ssFallback&&zo(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function Rs(t=" ",e=0){return En(qc,null,t,e)}function Pv(t,e){const n=En(Wu,null,t);return n.staticCount=e,n}function It(t="",e=!1){return e?(xe(),Gr($s,null,t)):En($s,null,t)}function Wr(t){return t==null||typeof t=="boolean"?En($s):je(t)?En(Zt,null,t.slice()):typeof t=="object"?$i(t):En(qc,null,String(t))}function $i(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:zo(t)}function dp(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(je(e))n=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),dp(t,i()),i._c&&(i._d=!0));return}else{n=32;const i=e._;!i&&!(Hc in e)?e._ctx=Sr:i===3&&Sr&&(Sr.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else lt(e)?(e={default:e,_ctx:Sr},n=32):(e=String(e),r&64?(n=16,e=[Rs(e)]):n=8);t.children=e,t.shapeFlag|=n}function RT(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=Xf([e.class,r.class]));else if(i==="style")e.style=Fs([e.style,r.style]);else if(Uc(i)){const s=e[i],o=r[i];o&&s!==o&&!(je(s)&&s.includes(o))&&(e[i]=s?[].concat(s,o):o)}else i!==""&&(e[i]=r[i])}return e}function Hr(t,e,n,r=null){Or(t,e,7,[n,r])}const ST=kv();let PT=0;function DT(t,e,n){const r=t.type,i=(e?e.appContext:t.appContext)||ST,s={uid:PT++,vnode:t,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new Xk(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Tv(r,i),emitsOptions:fv(r,i),emit:null,emitted:null,propsDefaults:Gt,inheritAttrs:r.inheritAttrs,ctx:Gt,data:Gt,props:Gt,attrs:Gt,slots:Gt,refs:Gt,setupState:Gt,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=VE.bind(null,s),t.ce&&t.ce(s),s}let Fn=null,fp,bo,Bg="__VUE_INSTANCE_SETTERS__";(bo=Yd()[Bg])||(bo=Yd()[Bg]=[]),bo.push(t=>Fn=t),fp=t=>{bo.length>1?bo.forEach(e=>e(t)):bo[0](t)};const jo=t=>{fp(t),t.scope.on()},Ns=()=>{Fn&&Fn.scope.off(),fp(null)};function Dv(t){return t.vnode.shapeFlag&4}let Ja=!1;function OT(t,e=!1){Ja=e;const{props:n,children:r}=t.vnode,i=Dv(t);fT(t,n,i,e),gT(t,r);const s=i?NT(t,e):void 0;return Ja=!1,s}function NT(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=sv(new Proxy(t.ctx,iT));const{setup:r}=n;if(r){const i=t.setupContext=r.length>1?MT(t):null;jo(t),ra();const s=Yi(r,t,0,[t.props,i]);if(ia(),Ns(),Bw(s)){if(s.then(Ns,Ns),e)return s.then(o=>{zg(t,o,e)}).catch(o=>{Bc(o,t,0)});t.asyncDep=s}else zg(t,s,e)}else Ov(t,e)}function zg(t,e,n){lt(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Yt(e)&&(t.setupState=lv(e)),Ov(t,n)}let jg;function Ov(t,e,n){const r=t.type;if(!t.render){if(!e&&jg&&!r.render){const i=r.template||up(t).template;if(i){const{isCustomElement:s,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:l}=r,u=On(On({isCustomElement:s,delimiters:a},o),l);r.render=jg(i,u)}}t.render=r.render||Dr}jo(t),ra(),sT(t),ia(),Ns()}function LT(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(e,n){return ar(t,"get","$attrs"),e[n]}}))}function MT(t){const e=n=>{t.exposed=n||{}};return{get attrs(){return LT(t)},slots:t.slots,emit:t.emit,expose:e}}function Wc(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(lv(sv(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Ma)return Ma[n](t)},has(e,n){return n in e||n in Ma}}))}function VT(t){return lt(t)&&"__vccOpts"in t}const UT=(t,e)=>PE(t,e,Ja),FT=Symbol.for("v-scx"),$T=()=>Hu(FT),BT="3.3.4",zT="http://www.w3.org/2000/svg",xs=typeof document<"u"?document:null,qg=xs&&xs.createElement("template"),jT={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const i=e?xs.createElementNS(zT,t):xs.createElement(t,n?{is:n}:void 0);return t==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:t=>xs.createTextNode(t),createComment:t=>xs.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>xs.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,i,s){const o=n?n.previousSibling:e.lastChild;if(i&&(i===s||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),n),!(i===s||!(i=i.nextSibling)););else{qg.innerHTML=r?`<svg>${t}</svg>`:t;const a=qg.content;if(r){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}};function qT(t,e,n){const r=t._vtc;r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}function HT(t,e,n){const r=t.style,i=vn(n);if(n&&!i){if(e&&!vn(e))for(const s in e)n[s]==null&&uf(r,s,"");for(const s in n)uf(r,s,n[s])}else{const s=r.display;i?e!==n&&(r.cssText=n):e&&t.removeAttribute("style"),"_vod"in t&&(r.display=s)}}const Hg=/\s*!important$/;function uf(t,e,n){if(je(n))n.forEach(r=>uf(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=WT(t,e);Hg.test(n)?t.setProperty(na(r),n.replace(Hg,""),"important"):t[r]=n}}const Wg=["Webkit","Moz","ms"],hd={};function WT(t,e){const n=hd[e];if(n)return n;let r=$o(e);if(r!=="filter"&&r in t)return hd[e]=r;r=qw(r);for(let i=0;i<Wg.length;i++){const s=Wg[i]+r;if(s in t)return hd[e]=s}return e}const Kg="http://www.w3.org/1999/xlink";function KT(t,e,n,r,i){if(r&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(Kg,e.slice(6,e.length)):t.setAttributeNS(Kg,e,n);else{const s=Qk(e);n==null||s&&!Hw(n)?t.removeAttribute(e):t.setAttribute(e,s?"":n)}}function GT(t,e,n,r,i,s,o){if(e==="innerHTML"||e==="textContent"){r&&o(r,i,s),t[e]=n??"";return}const a=t.tagName;if(e==="value"&&a!=="PROGRESS"&&!a.includes("-")){t._value=n;const u=a==="OPTION"?t.getAttribute("value"):t.value,d=n??"";u!==d&&(t.value=d),n==null&&t.removeAttribute(e);return}let l=!1;if(n===""||n==null){const u=typeof t[e];u==="boolean"?n=Hw(n):n==null&&u==="string"?(n="",l=!0):u==="number"&&(n=0,l=!0)}try{t[e]=n}catch{}l&&t.removeAttribute(e)}function Bi(t,e,n,r){t.addEventListener(e,n,r)}function QT(t,e,n,r){t.removeEventListener(e,n,r)}function YT(t,e,n,r,i=null){const s=t._vei||(t._vei={}),o=s[e];if(r&&o)o.value=r;else{const[a,l]=XT(e);if(r){const u=s[e]=eI(r,i);Bi(t,a,u,l)}else o&&(QT(t,a,o,l),s[e]=void 0)}}const Gg=/(?:Once|Passive|Capture)$/;function XT(t){let e;if(Gg.test(t)){e={};let r;for(;r=t.match(Gg);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):na(t.slice(2)),e]}let dd=0;const ZT=Promise.resolve(),JT=()=>dd||(ZT.then(()=>dd=0),dd=Date.now());function eI(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Or(tI(r,n.value),e,5,[r])};return n.value=t,n.attached=JT(),n}function tI(t,e){if(je(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>i=>!i._stopped&&r&&r(i))}else return e}const Qg=/^on[a-z]/,nI=(t,e,n,r,i=!1,s,o,a,l)=>{e==="class"?qT(t,r,i):e==="style"?HT(t,n,r):Uc(e)?Gf(e)||YT(t,e,n,r,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):rI(t,e,r,i))?GT(t,e,r,s,o,a,l):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),KT(t,e,r,i))};function rI(t,e,n,r){return r?!!(e==="innerHTML"||e==="textContent"||e in t&&Qg.test(e)&&lt(n)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||Qg.test(e)&&vn(n)?!1:e in t}const qo=t=>{const e=t.props["onUpdate:modelValue"]||!1;return je(e)?n=>ju(e,n):e};function iI(t){t.target.composing=!0}function Yg(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Mt={created(t,{modifiers:{lazy:e,trim:n,number:r}},i){t._assign=qo(i);const s=r||i.props&&i.props.type==="number";Bi(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;n&&(a=a.trim()),s&&(a=sc(a)),t._assign(a)}),n&&Bi(t,"change",()=>{t.value=t.value.trim()}),e||(Bi(t,"compositionstart",iI),Bi(t,"compositionend",Yg),Bi(t,"change",Yg))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,modifiers:{lazy:n,trim:r,number:i}},s){if(t._assign=qo(s),t.composing||document.activeElement===t&&t.type!=="range"&&(n||r&&t.value.trim()===e||(i||t.type==="number")&&sc(t.value)===e))return;const o=e??"";t.value!==o&&(t.value=o)}},cr={deep:!0,created(t,e,n){t._assign=qo(n),Bi(t,"change",()=>{const r=t._modelValue,i=el(t),s=t.checked,o=t._assign;if(je(r)){const a=Zf(r,i),l=a!==-1;if(s&&!l)o(r.concat(i));else if(!s&&l){const u=[...r];u.splice(a,1),o(u)}}else if(ta(r)){const a=new Set(r);s?a.add(i):a.delete(i),o(a)}else o(Nv(t,s))})},mounted:Xg,beforeUpdate(t,e,n){t._assign=qo(n),Xg(t,e,n)}};function Xg(t,{value:e,oldValue:n},r){t._modelValue=e,je(e)?t.checked=Zf(e,r.props.value)>-1:ta(e)?t.checked=e.has(r.props.value):e!==n&&(t.checked=kl(e,Nv(t,!0)))}const yi={deep:!0,created(t,{value:e,modifiers:{number:n}},r){const i=ta(e);Bi(t,"change",()=>{const s=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?sc(el(o)):el(o));t._assign(t.multiple?i?new Set(s):s:s[0])}),t._assign=qo(r)},mounted(t,{value:e}){Zg(t,e)},beforeUpdate(t,e,n){t._assign=qo(n)},updated(t,{value:e}){Zg(t,e)}};function Zg(t,e){const n=t.multiple;if(!(n&&!je(e)&&!ta(e))){for(let r=0,i=t.options.length;r<i;r++){const s=t.options[r],o=el(s);if(n)je(e)?s.selected=Zf(e,o)>-1:s.selected=e.has(o);else if(kl(el(s),e)){t.selectedIndex!==r&&(t.selectedIndex=r);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function el(t){return"_value"in t?t._value:t.value}function Nv(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const sI=["ctrl","shift","alt","meta"],oI={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>sI.some(n=>t[`${n}Key`]&&!e.includes(n))},fd=(t,e)=>(n,...r)=>{for(let i=0;i<e.length;i++){const s=oI[e[i]];if(s&&s(n,e))return}return t(n,...r)},aI=On({patchProp:nI},jT);let Jg;function lI(){return Jg||(Jg=wT(aI))}const uI=(...t)=>{const e=lI().createApp(...t),{mount:n}=e;return e.mount=r=>{const i=cI(r);if(!i)return;const s=e._component;!lt(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.innerHTML="";const o=n(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e};function cI(t){return vn(t)?document.querySelector(t):t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lv=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},hI=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Mv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,d=s>>2,f=(s&3)<<4|a>>4;let p=(a&15)<<2|u>>6,m=u&63;l||(m=64,o||(p=64)),r.push(n[d],n[f],n[p],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Lv(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):hI(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const f=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||f==null)throw new dI;const p=s<<2|a>>4;if(r.push(p),u!==64){const m=a<<4&240|u>>2;if(r.push(m),f!==64){const b=u<<6&192|f;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class dI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const fI=function(t){const e=Lv(t);return Mv.encodeByteArray(e,!0)},cc=function(t){return fI(t).replace(/\./g,"")},Vv=function(t){try{return Mv.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mI=()=>pI().__FIREBASE_DEFAULTS__,gI=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},_I=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Vv(t[1]);return e&&JSON.parse(e)},Kc=()=>{try{return mI()||gI()||_I()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Uv=t=>{var e,n;return(n=(e=Kc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Fv=t=>{const e=Uv(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},$v=()=>{var t;return(t=Kc())===null||t===void 0?void 0:t.config},Bv=t=>{var e;return(e=Kc())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zv(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[cc(JSON.stringify(n)),cc(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function vI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Hn())}function yI(){var t;const e=(t=Kc())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function bI(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function kI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function EI(){const t=Hn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function TI(){try{return typeof indexedDB=="object"}catch{return!1}}function II(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AI="FirebaseError";class hi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=AI,Object.setPrototypeOf(this,hi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,El.prototype.create)}}class El{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?xI(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new hi(i,a,r)}}function xI(t,e){return t.replace(CI,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const CI=/\{\$([^}]+)}/g;function RI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function hc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(e_(s)&&e_(o)){if(!hc(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function e_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tl(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ra(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Sa(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function SI(t,e){const n=new PI(t,e);return n.subscribe.bind(n)}class PI{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");DI(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=pd),i.error===void 0&&(i.error=pd),i.complete===void 0&&(i.complete=pd);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function DI(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function pd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vt(t){return t&&t._delegate?t._delegate:t}class ns{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ts="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new wI;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(LI(e))try{this.getOrInitializeService({instanceIdentifier:Ts})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Ts){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ts){return this.instances.has(e)}getOptions(e=Ts){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:NI(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ts){return this.component?this.component.multipleInstances?e:Ts:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function NI(t){return t===Ts?void 0:t}function LI(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new OI(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _t;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(_t||(_t={}));const VI={debug:_t.DEBUG,verbose:_t.VERBOSE,info:_t.INFO,warn:_t.WARN,error:_t.ERROR,silent:_t.SILENT},UI=_t.INFO,FI={[_t.DEBUG]:"log",[_t.VERBOSE]:"log",[_t.INFO]:"info",[_t.WARN]:"warn",[_t.ERROR]:"error"},$I=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=FI[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class pp{constructor(e){this.name=e,this._logLevel=UI,this._logHandler=$I,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in _t))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?VI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,_t.DEBUG,...e),this._logHandler(this,_t.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,_t.VERBOSE,...e),this._logHandler(this,_t.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,_t.INFO,...e),this._logHandler(this,_t.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,_t.WARN,...e),this._logHandler(this,_t.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,_t.ERROR,...e),this._logHandler(this,_t.ERROR,...e)}}const BI=(t,e)=>e.some(n=>t instanceof n);let t_,n_;function zI(){return t_||(t_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function jI(){return n_||(n_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const jv=new WeakMap,cf=new WeakMap,qv=new WeakMap,md=new WeakMap,mp=new WeakMap;function qI(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Xi(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&jv.set(n,t)}).catch(()=>{}),mp.set(e,t),e}function HI(t){if(cf.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});cf.set(t,e)}let hf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return cf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||qv.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Xi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function WI(t){hf=t(hf)}function KI(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(gd(this),e,...n);return qv.set(r,e.sort?e.sort():[e]),Xi(r)}:jI().includes(t)?function(...e){return t.apply(gd(this),e),Xi(jv.get(this))}:function(...e){return Xi(t.apply(gd(this),e))}}function GI(t){return typeof t=="function"?KI(t):(t instanceof IDBTransaction&&HI(t),BI(t,zI())?new Proxy(t,hf):t)}function Xi(t){if(t instanceof IDBRequest)return qI(t);if(md.has(t))return md.get(t);const e=GI(t);return e!==t&&(md.set(t,e),mp.set(e,t)),e}const gd=t=>mp.get(t);function QI(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Xi(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Xi(o.result),l.oldVersion,l.newVersion,Xi(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const YI=["get","getKey","getAll","getAllKeys","count"],XI=["put","add","delete","clear"],_d=new Map;function r_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(_d.get(e))return _d.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=XI.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||YI.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return _d.set(e,s),s}WI(t=>({...t,get:(e,n,r)=>r_(e,n)||t.get(e,n,r),has:(e,n)=>!!r_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(JI(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function JI(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const df="@firebase/app",i_="0.9.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bs=new pp("@firebase/app"),e2="@firebase/app-compat",t2="@firebase/analytics-compat",n2="@firebase/analytics",r2="@firebase/app-check-compat",i2="@firebase/app-check",s2="@firebase/auth",o2="@firebase/auth-compat",a2="@firebase/database",l2="@firebase/database-compat",u2="@firebase/functions",c2="@firebase/functions-compat",h2="@firebase/installations",d2="@firebase/installations-compat",f2="@firebase/messaging",p2="@firebase/messaging-compat",m2="@firebase/performance",g2="@firebase/performance-compat",_2="@firebase/remote-config",w2="@firebase/remote-config-compat",v2="@firebase/storage",y2="@firebase/storage-compat",b2="@firebase/firestore",k2="@firebase/firestore-compat",E2="firebase",T2="10.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ff="[DEFAULT]",I2={[df]:"fire-core",[e2]:"fire-core-compat",[n2]:"fire-analytics",[t2]:"fire-analytics-compat",[i2]:"fire-app-check",[r2]:"fire-app-check-compat",[s2]:"fire-auth",[o2]:"fire-auth-compat",[a2]:"fire-rtdb",[l2]:"fire-rtdb-compat",[u2]:"fire-fn",[c2]:"fire-fn-compat",[h2]:"fire-iid",[d2]:"fire-iid-compat",[f2]:"fire-fcm",[p2]:"fire-fcm-compat",[m2]:"fire-perf",[g2]:"fire-perf-compat",[_2]:"fire-rc",[w2]:"fire-rc-compat",[v2]:"fire-gcs",[y2]:"fire-gcs-compat",[b2]:"fire-fst",[k2]:"fire-fst-compat","fire-js":"fire-js",[E2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dc=new Map,pf=new Map;function A2(t,e){try{t.container.addComponent(e)}catch(n){Bs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function zs(t){const e=t.name;if(pf.has(e))return Bs.debug(`There were multiple attempts to register component ${e}.`),!1;pf.set(e,t);for(const n of dc.values())A2(n,t);return!0}function Gc(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Zi=new El("app","Firebase",x2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ns("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Zi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zs=T2;function Hv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:ff,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Zi.create("bad-app-name",{appName:String(i)});if(n||(n=$v()),!n)throw Zi.create("no-options");const s=dc.get(i);if(s){if(hc(n,s.options)&&hc(r,s.config))return s;throw Zi.create("duplicate-app",{appName:i})}const o=new MI(i);for(const l of pf.values())o.addComponent(l);const a=new C2(n,r,o);return dc.set(i,a),a}function gp(t=ff){const e=dc.get(t);if(!e&&t===ff&&$v())return Hv();if(!e)throw Zi.create("no-app",{appName:t});return e}function ni(t,e,n){var r;let i=(r=I2[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Bs.warn(a.join(" "));return}zs(new ns(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R2="firebase-heartbeat-database",S2=1,tl="firebase-heartbeat-store";let wd=null;function Wv(){return wd||(wd=QI(R2,S2,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(tl)}}}).catch(t=>{throw Zi.create("idb-open",{originalErrorMessage:t.message})})),wd}async function P2(t){try{return await(await Wv()).transaction(tl).objectStore(tl).get(Kv(t))}catch(e){if(e instanceof hi)Bs.warn(e.message);else{const n=Zi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Bs.warn(n.message)}}}async function s_(t,e){try{const r=(await Wv()).transaction(tl,"readwrite");await r.objectStore(tl).put(e,Kv(t)),await r.done}catch(n){if(n instanceof hi)Bs.warn(n.message);else{const r=Zi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Bs.warn(r.message)}}}function Kv(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D2=1024,O2=30*24*60*60*1e3;class N2{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new M2(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=o_();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const s=new Date(i.date).valueOf();return Date.now()-s<=O2}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=o_(),{heartbeatsToSend:n,unsentEntries:r}=L2(this._heartbeatsCache.heartbeats),i=cc(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function o_(){return new Date().toISOString().substring(0,10)}function L2(t,e=D2){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),a_(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),a_(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class M2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return TI()?II().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await P2(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return s_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return s_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function a_(t){return cc(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V2(t){zs(new ns("platform-logger",e=>new ZI(e),"PRIVATE")),zs(new ns("heartbeat",e=>new N2(e),"PRIVATE")),ni(df,i_,t),ni(df,i_,"esm2017"),ni("fire-js","")}V2("");function _p(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function l_(t){return t!==void 0&&t.enterprise!==void 0}class U2{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(n=>n.provider==="EMAIL_PASSWORD_PROVIDER"&&n.enforcementState!=="OFF")}}function Gv(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const F2=Gv,Qv=new El("auth","Firebase",Gv());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fc=new pp("@firebase/auth");function $2(t,...e){fc.logLevel<=_t.WARN&&fc.warn(`Auth (${Zs}): ${t}`,...e)}function Gu(t,...e){fc.logLevel<=_t.ERROR&&fc.error(`Auth (${Zs}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nr(t,...e){throw wp(t,...e)}function ri(t,...e){return wp(t,...e)}function B2(t,e,n){const r=Object.assign(Object.assign({},F2()),{[e]:n});return new El("auth","Firebase",r).create(e,{appName:t.name})}function wp(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Qv.create(t,...e)}function He(t,e,...n){if(!t)throw wp(e,...n)}function bi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Gu(e),new Error(e)}function Ii(t,e){t||bi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mf(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function z2(){return u_()==="http:"||u_()==="https:"}function u_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(z2()||bI()||"connection"in navigator)?navigator.onLine:!0}function q2(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ii(n>e,"Short delay should be less than long delay!"),this.isMobile=vI()||kI()}get(){return j2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vp(t,e){Ii(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;bi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;bi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;bi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W2=new Il(3e4,6e4);function os(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Si(t,e,n,r,i={}){return Xv(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Tl(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),Yv.fetch()(Zv(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},s))})}async function Xv(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},H2),e);try{const i=new K2(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw ku(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw ku(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw ku(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw ku(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw B2(t,d,u);Nr(t,d)}}catch(i){if(i instanceof hi)throw i;Nr(t,"network-request-failed",{message:String(i)})}}async function Al(t,e,n,r,i={}){const s=await Si(t,e,n,r,i);return"mfaPendingCredential"in s&&Nr(t,"multi-factor-auth-required",{_serverResponse:s}),s}function Zv(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?vp(t.config,i):`${t.config.apiScheme}://${i}`}class K2{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ri(this.auth,"network-request-failed")),W2.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ku(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=ri(t,e,r);return i.customData._tokenResponse=n,i}async function G2(t,e){return Si(t,"GET","/v2/recaptchaConfig",os(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q2(t,e){return Si(t,"POST","/v1/accounts:delete",e)}async function Y2(t,e){return Si(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fa(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function X2(t,e=!1){const n=Vt(t),r=await n.getIdToken(e),i=yp(r);He(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Fa(vd(i.auth_time)),issuedAtTime:Fa(vd(i.iat)),expirationTime:Fa(vd(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function vd(t){return Number(t)*1e3}function yp(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Gu("JWT malformed, contained fewer than 3 sections"),null;try{const i=Vv(n);return i?JSON.parse(i):(Gu("Failed to decode base64 JWT payload"),null)}catch(i){return Gu("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Z2(t){const e=yp(t);return He(e,"internal-error"),He(typeof e.exp<"u","internal-error"),He(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function js(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof hi&&J2(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function J2({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jv{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Fa(this.lastLoginAt),this.creationTime=Fa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pc(t){var e;const n=t.auth,r=await t.getIdToken(),i=await js(t,Y2(n,{idToken:r}));He(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?rA(s.providerUserInfo):[],a=nA(t.providerData,o),l=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),d=l?u:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Jv(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,f)}async function tA(t){const e=Vt(t);await pc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function nA(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function rA(t){return t.map(e=>{var{providerId:n}=e,r=_p(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iA(t,e){const n=await Xv(t,{},async()=>{const r=Tl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=Zv(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Yv.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){He(e.idToken,"internal-error"),He(typeof e.idToken<"u","internal-error"),He(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Z2(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return He(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await iA(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new nl;return r&&(He(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(He(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(He(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new nl,this.toJSON())}_performRefresh(){return bi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fi(t,e){He(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ls{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=_p(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new eA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Jv(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await js(this,this.stsTokenManager.getToken(this.auth,e));return He(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return X2(this,e)}reload(){return tA(this)}_assign(e){this!==e&&(He(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ls(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){He(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await pc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await js(this,Q2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,u,d;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(i=n.email)!==null&&i!==void 0?i:void 0,m=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,b=(o=n.photoURL)!==null&&o!==void 0?o:void 0,v=(a=n.tenantId)!==null&&a!==void 0?a:void 0,I=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,A=(u=n.createdAt)!==null&&u!==void 0?u:void 0,x=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:S,emailVerified:D,isAnonymous:B,providerData:X,stsTokenManager:G}=n;He(S&&G,e,"internal-error");const se=nl.fromJSON(this.name,G);He(typeof S=="string",e,"internal-error"),Fi(f,e.name),Fi(p,e.name),He(typeof D=="boolean",e,"internal-error"),He(typeof B=="boolean",e,"internal-error"),Fi(m,e.name),Fi(b,e.name),Fi(v,e.name),Fi(I,e.name),Fi(A,e.name),Fi(x,e.name);const re=new Ls({uid:S,auth:e,email:p,emailVerified:D,displayName:f,isAnonymous:B,photoURL:b,phoneNumber:m,tenantId:v,stsTokenManager:se,createdAt:A,lastLoginAt:x});return X&&Array.isArray(X)&&(re.providerData=X.map(Q=>Object.assign({},Q))),I&&(re._redirectEventId=I),re}static async _fromIdTokenResponse(e,n,r=!1){const i=new nl;i.updateFromServerResponse(n);const s=new Ls({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await pc(s),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c_=new Map;function ki(t){Ii(t instanceof Function,"Expected a class definition");let e=c_.get(t);return e?(Ii(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,c_.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}ey.type="NONE";const h_=ey;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qu(t,e,n){return`firebase:${t}:${e}:${n}`}class Oo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Qu(this.userKey,i.apiKey,s),this.fullPersistenceKey=Qu("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ls._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Oo(ki(h_),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||ki(h_);const o=Qu(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const d=await u._get(o);if(d){const f=Ls._fromJSON(e,d);u!==s&&(a=f),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Oo(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new Oo(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ry(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ty(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(sy(e))return"Blackberry";if(oy(e))return"Webos";if(bp(e))return"Safari";if((e.includes("chrome/")||ny(e))&&!e.includes("edge/"))return"Chrome";if(iy(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function ty(t=Hn()){return/firefox\//i.test(t)}function bp(t=Hn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ny(t=Hn()){return/crios\//i.test(t)}function ry(t=Hn()){return/iemobile/i.test(t)}function iy(t=Hn()){return/android/i.test(t)}function sy(t=Hn()){return/blackberry/i.test(t)}function oy(t=Hn()){return/webos/i.test(t)}function Qc(t=Hn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function sA(t=Hn()){var e;return Qc(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function oA(){return EI()&&document.documentMode===10}function ay(t=Hn()){return Qc(t)||iy(t)||oy(t)||sy(t)||/windows phone/i.test(t)||ry(t)}function aA(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ly(t,e=[]){let n;switch(t){case"Browser":n=d_(Hn());break;case"Worker":n=`${d_(Hn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Zs}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uA(t,e={}){return Si(t,"GET","/v2/passwordPolicy",os(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cA=6;class hA{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:cA,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new f_(this),this.idTokenSubscription=new f_(this),this.beforeStateQueue=new lA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Qv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ki(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Oo.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return He(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await pc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=q2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?Vt(e):null;return n&&He(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&He(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(ki(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await uA(this),n=new hA(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new El("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ki(e)||this._popupRedirectResolver;He(n,this,"argument-error"),this.redirectPersistenceManager=await Oo.create(this,[ki(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(He(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return He(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ly(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&$2(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function as(t){return Vt(t)}class f_{constructor(e){this.auth=e,this.observer=null,this.addObserver=SI(n=>this.observer=n)}get next(){return He(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fA(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function uy(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=ri("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",fA().appendChild(r)})}function pA(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const mA="https://www.google.com/recaptcha/enterprise.js?render=",gA="recaptcha-enterprise",_A="NO_RECAPTCHA";class wA{constructor(e){this.type=gA,this.auth=as(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{G2(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new U2(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;l_(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o(_A)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&l_(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}uy(mA+a).then(()=>{i(a,s,o)}).catch(l=>{o(l)})}}).catch(a=>{o(a)})})}}async function Ho(t,e,n,r=!1){const i=new wA(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vA(t,e){const n=Gc(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(hc(s,e??{}))return i;Nr(i,"already-initialized")}return n.initialize({options:e})}function yA(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ki);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function bA(t,e,n){const r=as(t);He(r._canInitEmulator,r,"emulator-config-failed"),He(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=cy(e),{host:o,port:a}=kA(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||EA()}function cy(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function kA(t){const e=cy(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:p_(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:p_(o)}}}function p_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function EA(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return bi("not implemented")}_getIdTokenResponse(e){return bi("not implemented")}_linkToIdToken(e,n){return bi("not implemented")}_getReauthenticationResolver(e){return bi("not implemented")}}async function hy(t,e){return Si(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yd(t,e){return Al(t,"POST","/v1/accounts:signInWithPassword",os(t,e))}async function TA(t,e){return Si(t,"POST","/v1/accounts:sendOobCode",os(t,e))}async function bd(t,e){return TA(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IA(t,e){return Al(t,"POST","/v1/accounts:signInWithEmailLink",os(t,e))}async function AA(t,e){return Al(t,"POST","/v1/accounts:signInWithEmailLink",os(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl extends kp{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new rl(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new rl(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){var n;switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(!((n=e._getRecaptchaConfig())===null||n===void 0)&&n.emailPasswordEnabled){const i=await Ho(e,r,"signInWithPassword");return yd(e,i)}else return yd(e,r).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const s=await Ho(e,r,"signInWithPassword");return yd(e,s)}else return Promise.reject(i)});case"emailLink":return IA(e,{email:this._email,oobCode:this._password});default:Nr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":return hy(e,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return AA(e,{idToken:n,email:this._email,oobCode:this._password});default:Nr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function No(t,e){return Al(t,"POST","/v1/accounts:signInWithIdp",os(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xA="http://localhost";class qs extends kp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new qs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Nr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=_p(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new qs(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return No(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,No(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,No(e,n)}buildRequest(){const e={requestUri:xA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Tl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CA(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function RA(t){const e=Ra(Sa(t)).link,n=e?Ra(Sa(e)).deep_link_id:null,r=Ra(Sa(t)).deep_link_id;return(r?Ra(Sa(r)).link:null)||r||n||e||t}class Ep{constructor(e){var n,r,i,s,o,a;const l=Ra(Sa(e)),u=(n=l.apiKey)!==null&&n!==void 0?n:null,d=(r=l.oobCode)!==null&&r!==void 0?r:null,f=CA((i=l.mode)!==null&&i!==void 0?i:null);He(u&&d&&f,"argument-error"),this.apiKey=u,this.operation=f,this.code=d,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=RA(e);try{return new Ep(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(){this.providerId=sa.PROVIDER_ID}static credential(e,n){return rl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Ep.parseLink(n);return He(r,"argument-error"),rl._fromEmailAndCode(e,r.code,r.tenantId)}}sa.PROVIDER_ID="password";sa.EMAIL_PASSWORD_SIGN_IN_METHOD="password";sa.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl extends dy{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi extends xl{constructor(){super("facebook.com")}static credential(e){return qs._fromParams({providerId:zi.PROVIDER_ID,signInMethod:zi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return zi.credentialFromTaggedObject(e)}static credentialFromError(e){return zi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return zi.credential(e.oauthAccessToken)}catch{return null}}}zi.FACEBOOK_SIGN_IN_METHOD="facebook.com";zi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji extends xl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return qs._fromParams({providerId:ji.PROVIDER_ID,signInMethod:ji.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ji.credentialFromTaggedObject(e)}static credentialFromError(e){return ji.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ji.credential(n,r)}catch{return null}}}ji.GOOGLE_SIGN_IN_METHOD="google.com";ji.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi extends xl{constructor(){super("github.com")}static credential(e){return qs._fromParams({providerId:qi.PROVIDER_ID,signInMethod:qi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qi.credentialFromTaggedObject(e)}static credentialFromError(e){return qi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return qi.credential(e.oauthAccessToken)}catch{return null}}}qi.GITHUB_SIGN_IN_METHOD="github.com";qi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi extends xl{constructor(){super("twitter.com")}static credential(e,n){return qs._fromParams({providerId:Hi.PROVIDER_ID,signInMethod:Hi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Hi.credentialFromTaggedObject(e)}static credentialFromError(e){return Hi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Hi.credential(n,r)}catch{return null}}}Hi.TWITTER_SIGN_IN_METHOD="twitter.com";Hi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kd(t,e){return Al(t,"POST","/v1/accounts:signUp",os(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Ls._fromIdTokenResponse(e,r,i),o=m_(r);return new Hs({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=m_(r);return new Hs({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function m_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc extends hi{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,mc.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new mc(e,n,r,i)}}function fy(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?mc._fromErrorAndOperation(t,s,e,r):s})}async function SA(t,e,n=!1){const r=await js(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Hs._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PA(t,e,n=!1){const{auth:r}=t,i="reauthenticate";try{const s=await js(t,fy(r,i,e,t),n);He(s.idToken,r,"internal-error");const o=yp(s.idToken);He(o,r,"internal-error");const{sub:a}=o;return He(t.uid===a,r,"user-mismatch"),Hs._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Nr(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function py(t,e,n=!1){const r="signIn",i=await fy(t,r,e),s=await Hs._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function DA(t,e){return py(as(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ed(t,e,n){var r;He(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),He(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(He(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(He(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function my(t){const e=as(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function OA(t,e,n){var r;const i=as(t),s={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};if(!((r=i._getRecaptchaConfig())===null||r===void 0)&&r.emailPasswordEnabled){const o=await Ho(i,s,"getOobCode",!0);n&&Ed(i,o,n),await bd(i,o)}else n&&Ed(i,s,n),await bd(i,s).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const a=await Ho(i,s,"getOobCode",!0);n&&Ed(i,a,n),await bd(i,a)}else return Promise.reject(o)})}async function NA(t,e,n){var r;const i=as(t),s={returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"};let o;if(!((r=i._getRecaptchaConfig())===null||r===void 0)&&r.emailPasswordEnabled){const u=await Ho(i,s,"signUpPassword");o=kd(i,u)}else o=kd(i,s).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const d=await Ho(i,s,"signUpPassword");return kd(i,d)}throw u});const a=await o.catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&my(t),u}),l=await Hs._fromIdTokenResponse(i,"signIn",a);return await i._updateCurrentUser(l.user),l}function LA(t,e,n){return DA(Vt(t),sa.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&my(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MA(t,e){return Si(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gy(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Vt(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await js(r,MA(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function VA(t,e){return _y(Vt(t),e,null)}function UA(t,e){return _y(Vt(t),null,e)}async function _y(t,e,n){const{auth:r}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(s.email=e),n&&(s.password=n);const o=await js(t,hy(r,s));await t._updateTokensIfNecessary(o,!0)}function FA(t,e,n,r){return Vt(t).onIdTokenChanged(e,n,r)}function $A(t,e,n){return Vt(t).beforeAuthStateChanged(e,n)}function BA(t,e,n,r){return Vt(t).onAuthStateChanged(e,n,r)}function zA(t){return Vt(t).signOut()}async function jA(t){return Vt(t).delete()}const gc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wy{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(gc,"1"),this.storage.removeItem(gc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qA(){const t=Hn();return bp(t)||Qc(t)}const HA=1e3,WA=10;class vy extends wy{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=qA()&&aA(),this.fallbackToPolling=ay(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);oA()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,WA):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},HA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}vy.type="LOCAL";const KA=vy;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yy extends wy{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}yy.type="SESSION";const by=yy;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GA(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Yc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(n.origin,s)),l=await GA(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Yc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tp(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=Tp("",20);i.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const p=f;if(p.data.eventId===u)switch(p.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(p.data.response);break;default:clearTimeout(d),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ii(){return window}function YA(t){ii().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ky(){return typeof ii().WorkerGlobalScope<"u"&&typeof ii().importScripts=="function"}async function XA(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ZA(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function JA(){return ky()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ey="firebaseLocalStorageDb",ex=1,_c="firebaseLocalStorage",Ty="fbase_key";class Cl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Xc(t,e){return t.transaction([_c],e?"readwrite":"readonly").objectStore(_c)}function tx(){const t=indexedDB.deleteDatabase(Ey);return new Cl(t).toPromise()}function gf(){const t=indexedDB.open(Ey,ex);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(_c,{keyPath:Ty})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(_c)?e(r):(r.close(),await tx(),e(await gf()))})})}async function g_(t,e,n){const r=Xc(t,!0).put({[Ty]:e,value:n});return new Cl(r).toPromise()}async function nx(t,e){const n=Xc(t,!1).get(e),r=await new Cl(n).toPromise();return r===void 0?null:r.value}function __(t,e){const n=Xc(t,!0).delete(e);return new Cl(n).toPromise()}const rx=800,ix=3;class Iy{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await gf(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>ix)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ky()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Yc._getInstance(JA()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await XA(),!this.activeServiceWorker)return;this.sender=new QA(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||ZA()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await gf();return await g_(e,gc,"1"),await __(e,gc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>g_(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>nx(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>__(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Xc(i,!1).getAll();return new Cl(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),rx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Iy.type="LOCAL";const sx=Iy;new Il(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ox(t,e){return e?ki(e):(He(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip extends kp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return No(e,this._buildIdpRequest())}_linkToIdToken(e,n){return No(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return No(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function ax(t){return py(t.auth,new Ip(t),t.bypassAuthState)}function lx(t){const{auth:e,user:n}=t;return He(n,e,"internal-error"),PA(n,new Ip(t),t.bypassAuthState)}async function ux(t){const{auth:e,user:n}=t;return He(n,e,"internal-error"),SA(n,new Ip(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ay{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ax;case"linkViaPopup":case"linkViaRedirect":return ux;case"reauthViaPopup":case"reauthViaRedirect":return lx;default:Nr(this.auth,"internal-error")}}resolve(e){Ii(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ii(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cx=new Il(2e3,1e4);class xo extends Ay{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,xo.currentPopupAction&&xo.currentPopupAction.cancel(),xo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return He(e,this.auth,"internal-error"),e}async onExecution(){Ii(this.filter.length===1,"Popup operations only handle one event");const e=Tp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ri(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ri(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,xo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ri(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,cx.get())};e()}}xo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hx="pendingRedirect",Yu=new Map;class dx extends Ay{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Yu.get(this.auth._key());if(!e){try{const r=await fx(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Yu.set(this.auth._key(),e)}return this.bypassAuthState||Yu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function fx(t,e){const n=gx(e),r=mx(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function px(t,e){Yu.set(t._key(),e)}function mx(t){return ki(t._redirectPersistence)}function gx(t){return Qu(hx,t.config.apiKey,t.name)}async function _x(t,e,n=!1){const r=as(t),i=ox(r,e),o=await new dx(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wx=10*60*1e3;class vx{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!yx(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!xy(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(ri(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=wx&&this.cachedEventUids.clear(),this.cachedEventUids.has(w_(e))}saveEventToCache(e){this.cachedEventUids.add(w_(e)),this.lastProcessedEventTime=Date.now()}}function w_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function xy({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function yx(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return xy(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bx(t,e={}){return Si(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kx=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ex=/^https?/;async function Tx(t){if(t.config.emulator)return;const{authorizedDomains:e}=await bx(t);for(const n of e)try{if(Ix(n))return}catch{}Nr(t,"unauthorized-domain")}function Ix(t){const e=mf(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!Ex.test(n))return!1;if(kx.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ax=new Il(3e4,6e4);function v_(){const t=ii().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function xx(t){return new Promise((e,n)=>{var r,i,s;function o(){v_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{v_(),n(ri(t,"network-request-failed"))},timeout:Ax.get()})}if(!((i=(r=ii().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=ii().gapi)===null||s===void 0)&&s.load)o();else{const a=pA("iframefcb");return ii()[a]=()=>{gapi.load?o():n(ri(t,"network-request-failed"))},uy(`https://apis.google.com/js/api.js?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Xu=null,e})}let Xu=null;function Cx(t){return Xu=Xu||xx(t),Xu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rx=new Il(5e3,15e3),Sx="__/auth/iframe",Px="emulator/auth/iframe",Dx={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ox=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Nx(t){const e=t.config;He(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?vp(e,Px):`https://${t.config.authDomain}/${Sx}`,r={apiKey:e.apiKey,appName:t.name,v:Zs},i=Ox.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Tl(r).slice(1)}`}async function Lx(t){const e=await Cx(t),n=ii().gapi;return He(n,t,"internal-error"),e.open({where:document.body,url:Nx(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Dx,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=ri(t,"network-request-failed"),a=ii().setTimeout(()=>{s(o)},Rx.get());function l(){ii().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mx={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Vx=500,Ux=600,Fx="_blank",$x="http://localhost";class y_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Bx(t,e,n,r=Vx,i=Ux){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},Mx),{width:r.toString(),height:i.toString(),top:s,left:o}),u=Hn().toLowerCase();n&&(a=ny(u)?Fx:n),ty(u)&&(e=e||$x,l.scrollbars="yes");const d=Object.entries(l).reduce((p,[m,b])=>`${p}${m}=${b},`,"");if(sA(u)&&a!=="_self")return zx(e||"",a),new y_(null);const f=window.open(e||"",a,d);He(f,t,"popup-blocked");try{f.focus()}catch{}return new y_(f)}function zx(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jx="__/auth/handler",qx="emulator/auth/handler",Hx=encodeURIComponent("fac");async function b_(t,e,n,r,i,s){He(t.config.authDomain,t,"auth-domain-config-required"),He(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Zs,eventId:i};if(e instanceof dy){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",RI(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,f]of Object.entries(s||{}))o[d]=f}if(e instanceof xl){const d=e.getScopes().filter(f=>f!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),u=l?`#${Hx}=${encodeURIComponent(l)}`:"";return`${Wx(t)}?${Tl(a).slice(1)}${u}`}function Wx({config:t}){return t.emulator?vp(t,qx):`https://${t.authDomain}/${jx}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Td="webStorageSupport";class Kx{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=by,this._completeRedirectFn=_x,this._overrideRedirectResult=px}async _openPopup(e,n,r,i){var s;Ii((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await b_(e,n,r,mf(),i);return Bx(e,o,Tp())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await b_(e,n,r,mf(),i);return YA(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Ii(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Lx(e),r=new vx(e);return n.register("authEvent",i=>(He(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Td,{type:Td},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Td];o!==void 0&&n(!!o),Nr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Tx(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return ay()||bp()||Qc()}}const Gx=Kx;var k_="@firebase/auth",E_="1.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){He(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yx(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function Xx(t){zs(new ns("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;He(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ly(t)},u=new dA(r,i,s,l);return yA(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),zs(new ns("auth-internal",e=>{const n=as(e.getProvider("auth").getImmediate());return(r=>new Qx(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ni(k_,E_,Yx(t)),ni(k_,E_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zx=5*60,Jx=Bv("authIdTokenMaxAge")||Zx;let T_=null;const eC=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Jx)return;const i=n==null?void 0:n.token;T_!==i&&(T_=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function tC(t=gp()){const e=Gc(t,"auth");if(e.isInitialized())return e.getImmediate();const n=vA(t,{popupRedirectResolver:Gx,persistence:[sx,KA,by]}),r=Bv("authTokenSyncURL");if(r){const s=eC(r);$A(n,s,()=>s(n.currentUser)),FA(n,o=>s(o))}const i=Uv("auth");return i&&bA(n,`http://${i}`),n}Xx("Browser");var nC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Re,Ap=Ap||{},Je=nC||self;function Zc(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Rl(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function rC(t){return Object.prototype.hasOwnProperty.call(t,Id)&&t[Id]||(t[Id]=++iC)}var Id="closure_uid_"+(1e9*Math.random()>>>0),iC=0;function sC(t,e,n){return t.call.apply(t.bind,arguments)}function oC(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function zn(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?zn=sC:zn=oC,zn.apply(null,arguments)}function Eu(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function xn(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function ls(){this.s=this.s,this.o=this.o}var aC=0;ls.prototype.s=!1;ls.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),aC!=0)&&rC(this)};ls.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Cy=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function xp(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function I_(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(Zc(r)){const i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function jn(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}jn.prototype.h=function(){this.defaultPrevented=!0};var lC=function(){if(!Je.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Je.addEventListener("test",()=>{},e),Je.removeEventListener("test",()=>{},e)}catch{}return t}();function il(t){return/^[\s\xa0]*$/.test(t)}function Jc(){var t=Je.navigator;return t&&(t=t.userAgent)?t:""}function Qr(t){return Jc().indexOf(t)!=-1}function Cp(t){return Cp[" "](t),t}Cp[" "]=function(){};function uC(t,e){var n=tR;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var cC=Qr("Opera"),Wo=Qr("Trident")||Qr("MSIE"),Ry=Qr("Edge"),_f=Ry||Wo,Sy=Qr("Gecko")&&!(Jc().toLowerCase().indexOf("webkit")!=-1&&!Qr("Edge"))&&!(Qr("Trident")||Qr("MSIE"))&&!Qr("Edge"),hC=Jc().toLowerCase().indexOf("webkit")!=-1&&!Qr("Edge");function Py(){var t=Je.document;return t?t.documentMode:void 0}var wf;e:{var Ad="",xd=function(){var t=Jc();if(Sy)return/rv:([^\);]+)(\)|;)/.exec(t);if(Ry)return/Edge\/([\d\.]+)/.exec(t);if(Wo)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(hC)return/WebKit\/(\S+)/.exec(t);if(cC)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(xd&&(Ad=xd?xd[1]:""),Wo){var Cd=Py();if(Cd!=null&&Cd>parseFloat(Ad)){wf=String(Cd);break e}}wf=Ad}var vf;if(Je.document&&Wo){var A_=Py();vf=A_||parseInt(wf,10)||void 0}else vf=void 0;var dC=vf;function sl(t,e){if(jn.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Sy){e:{try{Cp(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:fC[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&sl.$.h.call(this)}}xn(sl,jn);var fC={2:"touch",3:"pen",4:"mouse"};sl.prototype.h=function(){sl.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Sl="closure_listenable_"+(1e6*Math.random()|0),pC=0;function mC(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++pC,this.fa=this.ia=!1}function eh(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function Rp(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function gC(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function Dy(t){const e={};for(const n in t)e[n]=t[n];return e}const x_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Oy(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let s=0;s<x_.length;s++)n=x_[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function th(t){this.src=t,this.g={},this.h=0}th.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=bf(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new mC(e,this.src,s,!!r,i),e.ia=n,t.push(e)),e};function yf(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=Cy(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(eh(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function bf(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}var Sp="closure_lm_"+(1e6*Math.random()|0),Rd={};function Ny(t,e,n,r,i){if(r&&r.once)return My(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)Ny(t,e[s],n,r,i);return null}return n=Op(n),t&&t[Sl]?t.O(e,n,Rl(r)?!!r.capture:!!r,i):Ly(t,e,n,!1,r,i)}function Ly(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=Rl(i)?!!i.capture:!!i,a=Dp(t);if(a||(t[Sp]=a=new th(t)),n=a.add(e,n,r,o,s),n.proxy)return n;if(r=_C(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)lC||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Uy(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function _C(){function t(n){return e.call(t.src,t.listener,n)}const e=wC;return t}function My(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)My(t,e[s],n,r,i);return null}return n=Op(n),t&&t[Sl]?t.P(e,n,Rl(r)?!!r.capture:!!r,i):Ly(t,e,n,!0,r,i)}function Vy(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)Vy(t,e[s],n,r,i);else r=Rl(r)?!!r.capture:!!r,n=Op(n),t&&t[Sl]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=bf(s,n,r,i),-1<n&&(eh(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=Dp(t))&&(e=t.g[e.toString()],t=-1,e&&(t=bf(e,n,r,i)),(n=-1<t?e[t]:null)&&Pp(n))}function Pp(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[Sl])yf(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Uy(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Dp(e))?(yf(n,t),n.h==0&&(n.src=null,e[Sp]=null)):eh(t)}}}function Uy(t){return t in Rd?Rd[t]:Rd[t]="on"+t}function wC(t,e){if(t.fa)t=!0;else{e=new sl(e,this);var n=t.listener,r=t.la||t.src;t.ia&&Pp(t),t=n.call(r,e)}return t}function Dp(t){return t=t[Sp],t instanceof th?t:null}var Sd="__closure_events_fn_"+(1e9*Math.random()>>>0);function Op(t){return typeof t=="function"?t:(t[Sd]||(t[Sd]=function(e){return t.handleEvent(e)}),t[Sd])}function An(){ls.call(this),this.i=new th(this),this.S=this,this.J=null}xn(An,ls);An.prototype[Sl]=!0;An.prototype.removeEventListener=function(t,e,n,r){Vy(this,t,e,n,r)};function Dn(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new jn(e,t);else if(e instanceof jn)e.target=e.target||t;else{var i=e;e=new jn(r,t),Oy(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=Tu(o,r,!0,e)&&i}if(o=e.g=t,i=Tu(o,r,!0,e)&&i,i=Tu(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.g=n[s],i=Tu(o,r,!1,e)&&i}An.prototype.N=function(){if(An.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)eh(n[r]);delete t.g[e],t.h--}}this.J=null};An.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};An.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function Tu(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&yf(t.i,o),i=a.call(l,r)!==!1&&i}}return i&&!r.defaultPrevented}var Np=Je.JSON.stringify;class vC{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function yC(){var t=Lp;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class bC{constructor(){this.h=this.g=null}add(e,n){const r=Fy.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var Fy=new vC(()=>new kC,t=>t.reset());class kC{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function EC(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function TC(t){Je.setTimeout(()=>{throw t},0)}let ol,al=!1,Lp=new bC,$y=()=>{const t=Je.Promise.resolve(void 0);ol=()=>{t.then(IC)}};var IC=()=>{for(var t;t=yC();){try{t.h.call(t.g)}catch(n){TC(n)}var e=Fy;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}al=!1};function nh(t,e){An.call(this),this.h=t||1,this.g=e||Je,this.j=zn(this.qb,this),this.l=Date.now()}xn(nh,An);Re=nh.prototype;Re.ga=!1;Re.T=null;Re.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Dn(this,"tick"),this.ga&&(Mp(this),this.start()))}};Re.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Mp(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}Re.N=function(){nh.$.N.call(this),Mp(this),delete this.g};function Vp(t,e,n){if(typeof t=="function")n&&(t=zn(t,n));else if(t&&typeof t.handleEvent=="function")t=zn(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:Je.setTimeout(t,e||0)}function By(t){t.g=Vp(()=>{t.g=null,t.i&&(t.i=!1,By(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class AC extends ls{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:By(this)}N(){super.N(),this.g&&(Je.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ll(t){ls.call(this),this.h=t,this.g={}}xn(ll,ls);var C_=[];function zy(t,e,n,r){Array.isArray(n)||(n&&(C_[0]=n.toString()),n=C_);for(var i=0;i<n.length;i++){var s=Ny(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function jy(t){Rp(t.g,function(e,n){this.g.hasOwnProperty(n)&&Pp(e)},t),t.g={}}ll.prototype.N=function(){ll.$.N.call(this),jy(this)};ll.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function rh(){this.g=!0}rh.prototype.Ea=function(){this.g=!1};function xC(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var u=a[l].split("=");if(1<u.length){var d=u[0];u=u[1];var f=d.split("_");o=2<=f.length&&f[1]=="type"?o+(d+"="+u+"&"):o+(d+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function CC(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function Co(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+SC(t,n)+(r?" "+r:"")})}function RC(t,e){t.info(function(){return"TIMEOUT: "+e})}rh.prototype.info=function(){};function SC(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return Np(n)}catch{return e}}var Js={},R_=null;function ih(){return R_=R_||new An}Js.Ta="serverreachability";function qy(t){jn.call(this,Js.Ta,t)}xn(qy,jn);function ul(t){const e=ih();Dn(e,new qy(e))}Js.STAT_EVENT="statevent";function Hy(t,e){jn.call(this,Js.STAT_EVENT,t),this.stat=e}xn(Hy,jn);function Xn(t){const e=ih();Dn(e,new Hy(e,t))}Js.Ua="timingevent";function Wy(t,e){jn.call(this,Js.Ua,t),this.size=e}xn(Wy,jn);function Pl(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return Je.setTimeout(function(){t()},e)}var sh={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Ky={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Up(){}Up.prototype.h=null;function S_(t){return t.h||(t.h=t.i())}function Gy(){}var Dl={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Fp(){jn.call(this,"d")}xn(Fp,jn);function $p(){jn.call(this,"c")}xn($p,jn);var kf;function oh(){}xn(oh,Up);oh.prototype.g=function(){return new XMLHttpRequest};oh.prototype.i=function(){return{}};kf=new oh;function Ol(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new ll(this),this.P=PC,t=_f?125:void 0,this.V=new nh(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Qy}function Qy(){this.i=null,this.g="",this.h=!1}var PC=45e3,Ef={},wc={};Re=Ol.prototype;Re.setTimeout=function(t){this.P=t};function Tf(t,e,n){t.L=1,t.v=lh(Ai(e)),t.s=n,t.S=!0,Yy(t,null)}function Yy(t,e){t.G=Date.now(),Nl(t),t.A=Ai(t.v);var n=t.A,r=t.W;Array.isArray(r)||(r=[String(r)]),i0(n.i,"t",r),t.C=0,n=t.l.J,t.h=new Qy,t.g=I0(t.l,n?e:null,!t.s),0<t.O&&(t.M=new AC(zn(t.Pa,t,t.g),t.O)),zy(t.U,t.g,"readystatechange",t.nb),e=t.I?Dy(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),ul(),xC(t.j,t.u,t.A,t.m,t.W,t.s)}Re.nb=function(t){t=t.target;const e=this.M;e&&Xr(t)==3?e.l():this.Pa(t)};Re.Pa=function(t){try{if(t==this.g)e:{const d=Xr(this.g);var e=this.g.Ia();const f=this.g.da();if(!(3>d)&&(d!=3||_f||this.g&&(this.h.h||this.g.ja()||N_(this.g)))){this.J||d!=4||e==7||(e==8||0>=f?ul(3):ul(2)),ah(this);var n=this.g.da();this.ca=n;t:if(Xy(this)){var r=N_(this.g);t="";var i=r.length,s=Xr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ss(this),$a(this);var o="";break t}this.h.i=new Je.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,CC(this.j,this.u,this.A,this.m,this.W,d,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!il(a)){var u=a;break t}}u=null}if(n=u)Co(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,If(this,n);else{this.i=!1,this.o=3,Xn(12),Ss(this),$a(this);break e}}this.S?(Zy(this,d,o),_f&&this.i&&d==3&&(zy(this.U,this.V,"tick",this.mb),this.V.start())):(Co(this.j,this.m,o,null),If(this,o)),d==4&&Ss(this),this.i&&!this.J&&(d==4?b0(this.l,this):(this.i=!1,Nl(this)))}else ZC(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.o=3,Xn(12)):(this.o=0,Xn(13)),Ss(this),$a(this)}}}catch{}finally{}};function Xy(t){return t.g?t.u=="GET"&&t.L!=2&&t.l.Ha:!1}function Zy(t,e,n){let r=!0,i;for(;!t.J&&t.C<n.length;)if(i=DC(t,n),i==wc){e==4&&(t.o=4,Xn(14),r=!1),Co(t.j,t.m,null,"[Incomplete Response]");break}else if(i==Ef){t.o=4,Xn(15),Co(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else Co(t.j,t.m,i,null),If(t,i);Xy(t)&&i!=wc&&i!=Ef&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,Xn(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Wp(e),e.M=!0,Xn(11))):(Co(t.j,t.m,n,"[Invalid Chunked Response]"),Ss(t),$a(t))}Re.mb=function(){if(this.g){var t=Xr(this.g),e=this.g.ja();this.C<e.length&&(ah(this),Zy(this,t,e),this.i&&t!=4&&Nl(this))}};function DC(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?wc:(n=Number(e.substring(n,r)),isNaN(n)?Ef:(r+=1,r+n>e.length?wc:(e=e.slice(r,r+n),t.C=r+n,e)))}Re.cancel=function(){this.J=!0,Ss(this)};function Nl(t){t.Y=Date.now()+t.P,Jy(t,t.P)}function Jy(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=Pl(zn(t.lb,t),e)}function ah(t){t.B&&(Je.clearTimeout(t.B),t.B=null)}Re.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(RC(this.j,this.A),this.L!=2&&(ul(),Xn(17)),Ss(this),this.o=2,$a(this)):Jy(this,this.Y-t)};function $a(t){t.l.H==0||t.J||b0(t.l,t)}function Ss(t){ah(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,Mp(t.V),jy(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function If(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||Af(n.i,t))){if(!t.K&&Af(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)bc(n),dh(n);else break e;Hp(n),Xn(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=Pl(zn(n.ib,n),6e3));if(1>=a0(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Ps(n,11)}else if((t.K||n.g==t)&&bc(n),!il(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let u=i[e];if(n.V=u[0],u=u[1],n.H==2)if(u[0]=="c"){n.K=u[1],n.pa=u[2];const d=u[3];d!=null&&(n.ra=d,n.l.info("VER="+n.ra));const f=u[4];f!=null&&(n.Ga=f,n.l.info("SVER="+n.Ga));const p=u[5];p!=null&&typeof p=="number"&&0<p&&(r=1.5*p,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const m=t.g;if(m){const b=m.g?m.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(b){var s=r.i;s.g||b.indexOf("spdy")==-1&&b.indexOf("quic")==-1&&b.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(Bp(s,s.h),s.h=null))}if(r.F){const v=m.g?m.g.getResponseHeader("X-HTTP-Session-Id"):null;v&&(r.Da=v,Qt(r.I,r.F,v))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=T0(r,r.J?r.pa:null,r.Y),o.K){l0(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.B&&(ah(a),Nl(a)),r.g=o}else v0(r);0<n.j.length&&fh(n)}else u[0]!="stop"&&u[0]!="close"||Ps(n,7);else n.H==3&&(u[0]=="stop"||u[0]=="close"?u[0]=="stop"?Ps(n,7):qp(n):u[0]!="noop"&&n.h&&n.h.Aa(u),n.A=0)}}ul(4)}catch{}}function OC(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Zc(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function NC(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Zc(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function e0(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Zc(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=NC(t),r=OC(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}var t0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function LC(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Ms(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Ms){this.h=t.h,vc(this,t.j),this.s=t.s,this.g=t.g,yc(this,t.m),this.l=t.l;var e=t.i,n=new cl;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),P_(this,n),this.o=t.o}else t&&(e=String(t).match(t0))?(this.h=!1,vc(this,e[1]||"",!0),this.s=Pa(e[2]||""),this.g=Pa(e[3]||"",!0),yc(this,e[4]),this.l=Pa(e[5]||"",!0),P_(this,e[6]||"",!0),this.o=Pa(e[7]||"")):(this.h=!1,this.i=new cl(null,this.h))}Ms.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Da(e,D_,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Da(e,D_,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Da(n,n.charAt(0)=="/"?UC:VC,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Da(n,$C)),t.join("")};function Ai(t){return new Ms(t)}function vc(t,e,n){t.j=n?Pa(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function yc(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function P_(t,e,n){e instanceof cl?(t.i=e,BC(t.i,t.h)):(n||(e=Da(e,FC)),t.i=new cl(e,t.h))}function Qt(t,e,n){t.i.set(e,n)}function lh(t){return Qt(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Pa(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Da(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,MC),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function MC(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var D_=/[#\/\?@]/g,VC=/[#\?:]/g,UC=/[#\?]/g,FC=/[#\?@]/g,$C=/#/g;function cl(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function us(t){t.g||(t.g=new Map,t.h=0,t.i&&LC(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}Re=cl.prototype;Re.add=function(t,e){us(this),this.i=null,t=oa(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function n0(t,e){us(t),e=oa(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function r0(t,e){return us(t),e=oa(t,e),t.g.has(e)}Re.forEach=function(t,e){us(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};Re.ta=function(){us(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n};Re.Z=function(t){us(this);let e=[];if(typeof t=="string")r0(this,t)&&(e=e.concat(this.g.get(oa(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};Re.set=function(t,e){return us(this),this.i=null,t=oa(this,t),r0(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};Re.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function i0(t,e,n){n0(t,e),0<n.length&&(t.i=null,t.g.set(oa(t,e),xp(n)),t.h+=n.length)}Re.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};function oa(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function BC(t,e){e&&!t.j&&(us(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(n0(this,r),i0(this,i,n))},t)),t.j=e}var zC=class{constructor(t,e){this.g=t,this.map=e}};function s0(t){this.l=t||jC,Je.PerformanceNavigationTiming?(t=Je.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(Je.g&&Je.g.Ka&&Je.g.Ka()&&Je.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var jC=10;function o0(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function a0(t){return t.h?1:t.g?t.g.size:0}function Af(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Bp(t,e){t.g?t.g.add(e):t.h=e}function l0(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}s0.prototype.cancel=function(){if(this.i=u0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function u0(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return xp(t.i)}var qC=class{stringify(t){return Je.JSON.stringify(t,void 0)}parse(t){return Je.JSON.parse(t,void 0)}};function HC(){this.g=new qC}function WC(t,e,n){const r=n||"";try{e0(t,function(i,s){let o=i;Rl(i)&&(o=Np(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function KC(t,e){const n=new rh;if(Je.Image){const r=new Image;r.onload=Eu(Iu,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Eu(Iu,n,r,"TestLoadImage: error",!1,e),r.onabort=Eu(Iu,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Eu(Iu,n,r,"TestLoadImage: timeout",!1,e),Je.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function Iu(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function uh(t){this.l=t.ec||null,this.j=t.ob||!1}xn(uh,Up);uh.prototype.g=function(){return new ch(this.l,this.j)};uh.prototype.i=function(t){return function(){return t}}({});function ch(t,e){An.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=zp,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}xn(ch,An);var zp=0;Re=ch.prototype;Re.open=function(t,e){if(this.readyState!=zp)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,hl(this)};Re.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||Je).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};Re.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ll(this)),this.readyState=zp};Re.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,hl(this)),this.g&&(this.readyState=3,hl(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Je.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;c0(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function c0(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}Re.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Ll(this):hl(this),this.readyState==3&&c0(this)}};Re.Za=function(t){this.g&&(this.response=this.responseText=t,Ll(this))};Re.Ya=function(t){this.g&&(this.response=t,Ll(this))};Re.ka=function(){this.g&&Ll(this)};function Ll(t){t.readyState=4,t.l=null,t.j=null,t.A=null,hl(t)}Re.setRequestHeader=function(t,e){this.v.append(t,e)};Re.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};Re.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function hl(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(ch.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var GC=Je.JSON.parse;function un(t){An.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=h0,this.L=this.M=!1}xn(un,An);var h0="",QC=/^https?$/i,YC=["POST","PUT"];Re=un.prototype;Re.Oa=function(t){this.M=t};Re.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():kf.g(),this.C=this.u?S_(this.u):S_(kf),this.g.onreadystatechange=zn(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){O_(this,s);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=Je.FormData&&t instanceof Je.FormData,!(0<=Cy(YC,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{p0(this),0<this.B&&((this.L=XC(this.g))?(this.g.timeout=this.B,this.g.ontimeout=zn(this.ua,this)):this.A=Vp(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){O_(this,s)}};function XC(t){return Wo&&typeof t.timeout=="number"&&t.ontimeout!==void 0}Re.ua=function(){typeof Ap<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Dn(this,"timeout"),this.abort(8))};function O_(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,d0(t),hh(t)}function d0(t){t.F||(t.F=!0,Dn(t,"complete"),Dn(t,"error"))}Re.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Dn(this,"complete"),Dn(this,"abort"),hh(this))};Re.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),hh(this,!0)),un.$.N.call(this)};Re.La=function(){this.s||(this.G||this.v||this.l?f0(this):this.kb())};Re.kb=function(){f0(this)};function f0(t){if(t.h&&typeof Ap<"u"&&(!t.C[1]||Xr(t)!=4||t.da()!=2)){if(t.v&&Xr(t)==4)Vp(t.La,0,t);else if(Dn(t,"readystatechange"),Xr(t)==4){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var i=String(t.I).match(t0)[1]||null;!i&&Je.self&&Je.self.location&&(i=Je.self.location.protocol.slice(0,-1)),r=!QC.test(i?i.toLowerCase():"")}n=r}if(n)Dn(t,"complete"),Dn(t,"success");else{t.m=6;try{var s=2<Xr(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",d0(t)}}finally{hh(t)}}}}function hh(t,e){if(t.g){p0(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Dn(t,"ready");try{n.onreadystatechange=r}catch{}}}function p0(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(Je.clearTimeout(t.A),t.A=null)}Re.isActive=function(){return!!this.g};function Xr(t){return t.g?t.g.readyState:0}Re.da=function(){try{return 2<Xr(this)?this.g.status:-1}catch{return-1}};Re.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};Re.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),GC(e)}};function N_(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case h0:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function ZC(t){const e={};t=(t.g&&2<=Xr(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(il(t[r]))continue;var n=EC(t[r]);const i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const s=e[i]||[];e[i]=s,s.push(n)}gC(e,function(r){return r.join(", ")})}Re.Ia=function(){return this.m};Re.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function m0(t){let e="";return Rp(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function jp(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=m0(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):Qt(t,e,n))}function va(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function g0(t){this.Ga=0,this.j=[],this.l=new rh,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=va("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=va("baseRetryDelayMs",5e3,t),this.hb=va("retryDelaySeedMs",1e4,t),this.eb=va("forwardChannelMaxRetries",2,t),this.xa=va("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new s0(t&&t.concurrentRequestLimit),this.Ja=new HC,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}Re=g0.prototype;Re.ra=8;Re.H=1;function qp(t){if(_0(t),t.H==3){var e=t.W++,n=Ai(t.I);if(Qt(n,"SID",t.K),Qt(n,"RID",e),Qt(n,"TYPE","terminate"),Ml(t,n),e=new Ol(t,t.l,e),e.L=2,e.v=lh(Ai(n)),n=!1,Je.navigator&&Je.navigator.sendBeacon)try{n=Je.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&Je.Image&&(new Image().src=e.v,n=!0),n||(e.g=I0(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Nl(e)}E0(t)}function dh(t){t.g&&(Wp(t),t.g.cancel(),t.g=null)}function _0(t){dh(t),t.u&&(Je.clearTimeout(t.u),t.u=null),bc(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&Je.clearTimeout(t.m),t.m=null)}function fh(t){if(!o0(t.i)&&!t.m){t.m=!0;var e=t.Na;ol||$y(),al||(ol(),al=!0),Lp.add(e,t),t.C=0}}function JC(t,e){return a0(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=Pl(zn(t.Na,t,e),k0(t,t.C)),t.C++,!0)}Re.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new Ol(this,this.l,t);let s=this.s;if(this.U&&(s?(s=Dy(s),Oy(s,this.U)):s=this.U),this.o!==null||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=w0(this,i,e),n=Ai(this.I),Qt(n,"RID",t),Qt(n,"CVER",22),this.F&&Qt(n,"X-HTTP-Session-Id",this.F),Ml(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(m0(s)))+"&"+e:this.o&&jp(n,this.o,s)),Bp(this.i,i),this.bb&&Qt(n,"TYPE","init"),this.P?(Qt(n,"$req",e),Qt(n,"SID","null"),i.aa=!0,Tf(i,n,null)):Tf(i,n,e),this.H=2}}else this.H==3&&(t?L_(this,t):this.j.length==0||o0(this.i)||L_(this))};function L_(t,e){var n;e?n=e.m:n=t.W++;const r=Ai(t.I);Qt(r,"SID",t.K),Qt(r,"RID",n),Qt(r,"AID",t.V),Ml(t,r),t.o&&t.s&&jp(r,t.o,t.s),n=new Ol(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=w0(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Bp(t.i,n),Tf(n,r,e)}function Ml(t,e){t.na&&Rp(t.na,function(n,r){Qt(e,r,n)}),t.h&&e0({},function(n,r){Qt(e,r,n)})}function w0(t,e,n){n=Math.min(t.j.length,n);var r=t.h?zn(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){const o=["count="+n];s==-1?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let l=0;l<n;l++){let u=i[l].g;const d=i[l].map;if(u-=s,0>u)s=Math.max(0,i[l].g-100),a=!1;else try{WC(d,o,"req"+u+"_")}catch{r&&r(d)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function v0(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;ol||$y(),al||(ol(),al=!0),Lp.add(e,t),t.A=0}}function Hp(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=Pl(zn(t.Ma,t),k0(t,t.A)),t.A++,!0)}Re.Ma=function(){if(this.u=null,y0(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Pl(zn(this.jb,this),t)}};Re.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Xn(10),dh(this),y0(this))};function Wp(t){t.B!=null&&(Je.clearTimeout(t.B),t.B=null)}function y0(t){t.g=new Ol(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Ai(t.wa);Qt(e,"RID","rpc"),Qt(e,"SID",t.K),Qt(e,"AID",t.V),Qt(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Qt(e,"TO",t.qa),Qt(e,"TYPE","xmlhttp"),Ml(t,e),t.o&&t.s&&jp(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=lh(Ai(e)),n.s=null,n.S=!0,Yy(n,t)}Re.ib=function(){this.v!=null&&(this.v=null,dh(this),Hp(this),Xn(19))};function bc(t){t.v!=null&&(Je.clearTimeout(t.v),t.v=null)}function b0(t,e){var n=null;if(t.g==e){bc(t),Wp(t),t.g=null;var r=2}else if(Af(t.i,e))n=e.F,l0(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.G;var i=t.C;r=ih(),Dn(r,new Wy(r,n)),fh(t)}else v0(t);else if(i=e.o,i==3||i==0&&0<e.ca||!(r==1&&JC(t,e)||r==2&&Hp(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Ps(t,5);break;case 4:Ps(t,10);break;case 3:Ps(t,6);break;default:Ps(t,2)}}}function k0(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Ps(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=zn(t.pb,t);n||(n=new Ms("//www.google.com/images/cleardot.gif"),Je.location&&Je.location.protocol=="http"||vc(n,"https"),lh(n)),KC(n.toString(),r)}else Xn(2);t.H=0,t.h&&t.h.za(e),E0(t),_0(t)}Re.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Xn(2)):(this.l.info("Failed to ping google.com"),Xn(1))};function E0(t){if(t.H=0,t.ma=[],t.h){const e=u0(t.i);(e.length!=0||t.j.length!=0)&&(I_(t.ma,e),I_(t.ma,t.j),t.i.i.length=0,xp(t.j),t.j.length=0),t.h.ya()}}function T0(t,e,n){var r=n instanceof Ms?Ai(n):new Ms(n);if(r.g!="")e&&(r.g=e+"."+r.g),yc(r,r.m);else{var i=Je.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new Ms(null);r&&vc(s,r),e&&(s.g=e),i&&yc(s,i),n&&(s.l=n),r=s}return n=t.F,e=t.Da,n&&e&&Qt(r,n,e),Qt(r,"VER",t.ra),Ml(t,r),r}function I0(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ha&&!t.va?new un(new uh({ob:!0})):new un(t.va),e.Oa(t.J),e}Re.isActive=function(){return!!this.h&&this.h.isActive(this)};function A0(){}Re=A0.prototype;Re.Ba=function(){};Re.Aa=function(){};Re.za=function(){};Re.ya=function(){};Re.isActive=function(){return!0};Re.Va=function(){};function kc(){if(Wo&&!(10<=Number(dC)))throw Error("Environmental error: no available transport.")}kc.prototype.g=function(t,e){return new fr(t,e)};function fr(t,e){An.call(this),this.g=new g0(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!il(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!il(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new aa(this)}xn(fr,An);fr.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Xn(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=T0(t,null,t.Y),fh(t)};fr.prototype.close=function(){qp(this.g)};fr.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=Np(t),t=n);e.j.push(new zC(e.fb++,t)),e.H==3&&fh(e)};fr.prototype.N=function(){this.g.h=null,delete this.j,qp(this.g),delete this.g,fr.$.N.call(this)};function x0(t){Fp.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}xn(x0,Fp);function C0(){$p.call(this),this.status=1}xn(C0,$p);function aa(t){this.g=t}xn(aa,A0);aa.prototype.Ba=function(){Dn(this.g,"a")};aa.prototype.Aa=function(t){Dn(this.g,new x0(t))};aa.prototype.za=function(t){Dn(this.g,new C0)};aa.prototype.ya=function(){Dn(this.g,"b")};function eR(){this.blockSize=-1}function Lr(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}xn(Lr,eR);Lr.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Pd(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var s=t.g[3],o=e+(s^n&(i^s))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[2]+606105819&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[6]+2821735955&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[10]+4294925233&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[14]+2792965006&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(i^s&(n^i))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[11]+643717713&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[15]+3634488961&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[3]+4107603335&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[7]+1735328473&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(n^i^s)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[11]+1839030562&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[7]+4139469664&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[3]+3572445317&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[15]+530742520&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(i^(n|~s))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[14]+2878612391&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[10]+4293915773&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[6]+2734768916&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[2]+718787259&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}Lr.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(i==0)for(;s<=n;)Pd(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){Pd(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){Pd(this,r),i=0;break}}this.h=i,this.i+=e};Lr.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function St(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=t[i]|0;r&&s==e||(n[i]=s,r=!1)}this.g=n}var tR={};function Kp(t){return-128<=t&&128>t?uC(t,function(e){return new St([e|0],0>e?-1:0)}):new St([t|0],0>t?-1:0)}function Zr(t){if(isNaN(t)||!isFinite(t))return Lo;if(0>t)return Pn(Zr(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=xf;return new St(e,0)}function R0(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return Pn(R0(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Zr(Math.pow(e,8)),r=Lo,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=Zr(Math.pow(e,s)),r=r.R(s).add(Zr(o))):(r=r.R(n),r=r.add(Zr(o)))}return r}var xf=4294967296,Lo=Kp(0),Cf=Kp(1),M_=Kp(16777216);Re=St.prototype;Re.ea=function(){if(vr(this))return-Pn(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:xf+r)*e,e*=xf}return t};Re.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(Ei(this))return"0";if(vr(this))return"-"+Pn(this).toString(t);for(var e=Zr(Math.pow(t,6)),n=this,r="";;){var i=Tc(n,e).g;n=Ec(n,i.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,Ei(n))return s+r;for(;6>s.length;)s="0"+s;r=s+r}};Re.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function Ei(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function vr(t){return t.h==-1}Re.X=function(t){return t=Ec(this,t),vr(t)?-1:Ei(t)?0:1};function Pn(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new St(n,~t.h).add(Cf)}Re.abs=function(){return vr(this)?Pn(this):this};Re.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(this.D(i)&65535)+(t.D(i)&65535),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new St(n,n[n.length-1]&-2147483648?-1:0)};function Ec(t,e){return t.add(Pn(e))}Re.R=function(t){if(Ei(this)||Ei(t))return Lo;if(vr(this))return vr(t)?Pn(this).R(Pn(t)):Pn(Pn(this).R(t));if(vr(t))return Pn(this.R(Pn(t)));if(0>this.X(M_)&&0>t.X(M_))return Zr(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(i)>>>16,l=t.D(i)&65535;n[2*r+2*i]+=o*l,Au(n,2*r+2*i),n[2*r+2*i+1]+=s*l,Au(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,Au(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,Au(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new St(n,0)};function Au(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function ya(t,e){this.g=t,this.h=e}function Tc(t,e){if(Ei(e))throw Error("division by zero");if(Ei(t))return new ya(Lo,Lo);if(vr(t))return e=Tc(Pn(t),e),new ya(Pn(e.g),Pn(e.h));if(vr(e))return e=Tc(t,Pn(e)),new ya(Pn(e.g),e.h);if(30<t.g.length){if(vr(t)||vr(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Cf,r=e;0>=r.X(t);)n=V_(n),r=V_(r);var i=ko(n,1),s=ko(r,1);for(r=ko(r,2),n=ko(n,2);!Ei(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=ko(r,1),n=ko(n,1)}return e=Ec(t,i.R(e)),new ya(i,e)}for(i=Lo;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),s=Zr(n),o=s.R(e);vr(o)||0<o.X(t);)n-=r,s=Zr(n),o=s.R(e);Ei(s)&&(s=Cf),i=i.add(s),t=Ec(t,o)}return new ya(i,t)}Re.gb=function(t){return Tc(this,t).h};Re.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new St(n,this.h&t.h)};Re.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new St(n,this.h|t.h)};Re.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new St(n,this.h^t.h)};function V_(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new St(n,t.h)}function ko(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new St(i,t.h)}kc.prototype.createWebChannel=kc.prototype.g;fr.prototype.send=fr.prototype.u;fr.prototype.open=fr.prototype.m;fr.prototype.close=fr.prototype.close;sh.NO_ERROR=0;sh.TIMEOUT=8;sh.HTTP_ERROR=6;Ky.COMPLETE="complete";Gy.EventType=Dl;Dl.OPEN="a";Dl.CLOSE="b";Dl.ERROR="c";Dl.MESSAGE="d";An.prototype.listen=An.prototype.O;un.prototype.listenOnce=un.prototype.P;un.prototype.getLastError=un.prototype.Sa;un.prototype.getLastErrorCode=un.prototype.Ia;un.prototype.getStatus=un.prototype.da;un.prototype.getResponseJson=un.prototype.Wa;un.prototype.getResponseText=un.prototype.ja;un.prototype.send=un.prototype.ha;un.prototype.setWithCredentials=un.prototype.Oa;Lr.prototype.digest=Lr.prototype.l;Lr.prototype.reset=Lr.prototype.reset;Lr.prototype.update=Lr.prototype.j;St.prototype.add=St.prototype.add;St.prototype.multiply=St.prototype.R;St.prototype.modulo=St.prototype.gb;St.prototype.compare=St.prototype.X;St.prototype.toNumber=St.prototype.ea;St.prototype.toString=St.prototype.toString;St.prototype.getBits=St.prototype.D;St.fromNumber=Zr;St.fromString=R0;var nR=function(){return new kc},rR=function(){return ih()},Dd=sh,iR=Ky,sR=Js,U_={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},xu=Gy,oR=un,aR=Lr,Mo=St;const F_="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Mn.UNAUTHENTICATED=new Mn(null),Mn.GOOGLE_CREDENTIALS=new Mn("google-credentials-uid"),Mn.FIRST_PARTY=new Mn("first-party-uid"),Mn.MOCK_USER=new Mn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let la="10.4.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ws=new pp("@firebase/firestore");function ba(){return Ws.logLevel}function Ue(t,...e){if(Ws.logLevel<=_t.DEBUG){const n=e.map(Gp);Ws.debug(`Firestore (${la}): ${t}`,...n)}}function xi(t,...e){if(Ws.logLevel<=_t.ERROR){const n=e.map(Gp);Ws.error(`Firestore (${la}): ${t}`,...n)}}function Ko(t,...e){if(Ws.logLevel<=_t.WARN){const n=e.map(Gp);Ws.warn(`Firestore (${la}): ${t}`,...n)}}function Gp(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xe(t="Unexpected state"){const e=`FIRESTORE (${la}) INTERNAL ASSERTION FAILED: `+t;throw xi(e),new Error(e)}function zt(t,e){t||Xe()}function tt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const me={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ce extends hi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class lR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Mn.UNAUTHENTICATED))}shutdown(){}}class uR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class cR{constructor(e){this.t=e,this.currentUser=Mn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new si;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new si,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{Ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new si)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(zt(typeof r.accessToken=="string"),new S0(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return zt(e===null||typeof e=="string"),new Mn(e)}}class hR{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Mn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class dR{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new hR(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Mn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class fR{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class pR{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=s=>{s.error!=null&&Ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Ue("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(zt(typeof n.token=="string"),this.R=n.token,new fR(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mR(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{static V(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=mR(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function Tt(t,e){return t<e?-1:t>e?1:0}function Go(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ce(me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ce(me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Ce(me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ce(me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return nt.fromMillis(Date.now())}static fromDate(e){return nt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new nt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Tt(this.nanoseconds,e.nanoseconds):Tt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e){this.timestamp=e}static fromTimestamp(e){return new et(e)}static min(){return new et(new nt(0,0))}static max(){return new et(new nt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(e,n,r){n===void 0?n=0:n>e.length&&Xe(),r===void 0?r=e.length-n:r>e.length-n&&Xe(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return dl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof dl?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Bt extends dl{construct(e,n,r){return new Bt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ce(me.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Bt(n)}static emptyPath(){return new Bt([])}}const gR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class $n extends dl{construct(e,n,r){return new $n(e,n,r)}static isValidIdentifier(e){return gR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),$n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new $n(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Ce(me.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new Ce(me.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Ce(me.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Ce(me.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new $n(n)}static emptyPath(){return new $n([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(e){this.path=e}static fromPath(e){return new Be(Bt.fromString(e))}static fromName(e){return new Be(Bt.fromString(e).popFirst(5))}static empty(){return new Be(Bt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Bt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Bt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Be(new Bt(e.slice()))}}function _R(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=et.fromTimestamp(r===1e9?new nt(n+1,0):new nt(n,r));return new rs(i,Be.empty(),e)}function wR(t){return new rs(t.readTime,t.key,-1)}class rs{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new rs(et.min(),Be.empty(),-1)}static max(){return new rs(et.max(),Be.empty(),-1)}}function vR(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Be.comparator(t.documentKey,e.documentKey),n!==0?n:Tt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class bR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vl(t){if(t.code!==me.FAILED_PRECONDITION||t.message!==yR)throw t;Ue("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Xe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ke((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof ke?n:ke.resolve(n)}catch(n){return ke.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):ke.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):ke.reject(n)}static resolve(e){return new ke((n,r)=>{n(e)})}static reject(e){return new ke((n,r)=>{r(e)})}static waitFor(e){return new ke((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=ke.resolve(!1);for(const r of e)n=n.next(i=>i?ke.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new ke((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;n(e[u]).next(d=>{o[u]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,n){return new ke((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function Ul(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.oe(r),this._e=r=>n.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Qp.ae=-1;function ph(t){return t==null}function Ic(t){return t===0&&1/t==-1/0}function kR(t){return typeof t=="number"&&Number.isInteger(t)&&!Ic(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $_(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function eo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function D0(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e,n){this.comparator=e,this.root=n||Rn.EMPTY}insert(e,n){return new en(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Rn.BLACK,null,null))}remove(e){return new en(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Rn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Cu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Cu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Cu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Cu(this.root,e,this.comparator,!0)}}class Cu{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Rn{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Rn.RED,this.left=i??Rn.EMPTY,this.right=s??Rn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Rn(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Rn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Rn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Rn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Rn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Xe();const e=this.left.check();if(e!==this.right.check())throw Xe();return e+(this.isRed()?0:1)}}Rn.EMPTY=null,Rn.RED=!0,Rn.BLACK=!1;Rn.EMPTY=new class{constructor(){this.size=0}get key(){throw Xe()}get value(){throw Xe()}get color(){throw Xe()}get left(){throw Xe()}get right(){throw Xe()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Rn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e){this.comparator=e,this.data=new en(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new B_(this.data.getIterator())}getIteratorFrom(e){return new B_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof qn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new qn(this.comparator);return n.data=e,n}}class B_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(e){this.fields=e,e.sort($n.comparator)}static empty(){return new hr([])}unionWith(e){let n=new qn($n.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new hr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Go(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new O0("Invalid base64 string: "+s):s}}(e);return new Wn(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Wn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Tt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Wn.EMPTY_BYTE_STRING=new Wn("");const ER=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function is(t){if(zt(!!t),typeof t=="string"){let e=0;const n=ER.exec(t);if(zt(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:_n(t.seconds),nanos:_n(t.nanos)}}function _n(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ks(t){return typeof t=="string"?Wn.fromBase64String(t):Wn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mh(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Yp(t){const e=t.mapValue.fields.__previous_value__;return mh(e)?Yp(e):e}function fl(t){const e=is(t.mapValue.fields.__local_write_time__.timestampValue);return new nt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(e,n,r,i,s,o,a,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}class pl{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new pl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof pl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ru={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Gs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?mh(t)?4:IR(t)?9007199254740991:10:Xe()}function ui(t,e){if(t===e)return!0;const n=Gs(t);if(n!==Gs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return fl(t).isEqual(fl(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=is(i.timestampValue),a=is(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Ks(i.bytesValue).isEqual(Ks(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return _n(i.geoPointValue.latitude)===_n(s.geoPointValue.latitude)&&_n(i.geoPointValue.longitude)===_n(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return _n(i.integerValue)===_n(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=_n(i.doubleValue),a=_n(s.doubleValue);return o===a?Ic(o)===Ic(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Go(t.arrayValue.values||[],e.arrayValue.values||[],ui);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if($_(o)!==$_(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!ui(o[l],a[l])))return!1;return!0}(t,e);default:return Xe()}}function ml(t,e){return(t.values||[]).find(n=>ui(n,e))!==void 0}function Qo(t,e){if(t===e)return 0;const n=Gs(t),r=Gs(e);if(n!==r)return Tt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Tt(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=_n(s.integerValue||s.doubleValue),l=_n(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return z_(t.timestampValue,e.timestampValue);case 4:return z_(fl(t),fl(e));case 5:return Tt(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Ks(s),l=Ks(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const d=Tt(a[u],l[u]);if(d!==0)return d}return Tt(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Tt(_n(s.latitude),_n(o.latitude));return a!==0?a:Tt(_n(s.longitude),_n(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],l=o.values||[];for(let u=0;u<a.length&&u<l.length;++u){const d=Qo(a[u],l[u]);if(d)return d}return Tt(a.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===Ru.mapValue&&o===Ru.mapValue)return 0;if(s===Ru.mapValue)return 1;if(o===Ru.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},d=Object.keys(u);l.sort(),d.sort();for(let f=0;f<l.length&&f<d.length;++f){const p=Tt(l[f],d[f]);if(p!==0)return p;const m=Qo(a[l[f]],u[d[f]]);if(m!==0)return m}return Tt(l.length,d.length)}(t.mapValue,e.mapValue);default:throw Xe()}}function z_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Tt(t,e);const n=is(t),r=is(e),i=Tt(n.seconds,r.seconds);return i!==0?i:Tt(n.nanos,r.nanos)}function Yo(t){return Rf(t)}function Rf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=is(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ks(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Be.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Rf(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Rf(n.fields[o])}`;return i+"}"}(t.mapValue):Xe()}function Ac(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Sf(t){return!!t&&"integerValue"in t}function Xp(t){return!!t&&"arrayValue"in t}function j_(t){return!!t&&"nullValue"in t}function q_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Zu(t){return!!t&&"mapValue"in t}function Ba(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return eo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ba(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ba(t.arrayValue.values[n]);return e}return Object.assign({},t)}function IR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e){this.value=e}static empty(){return new or({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Zu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ba(n)}setAll(e){let n=$n.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Ba(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Zu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ui(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Zu(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){eo(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new or(Ba(this.value))}}function N0(t){const e=[];return eo(t.fields,(n,r)=>{const i=new $n([n]);if(Zu(r)){const s=N0(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new hr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Vn(e,0,et.min(),et.min(),et.min(),or.empty(),0)}static newFoundDocument(e,n,r,i){return new Vn(e,1,n,et.min(),r,i,0)}static newNoDocument(e,n){return new Vn(e,2,n,et.min(),et.min(),or.empty(),0)}static newUnknownDocument(e,n){return new Vn(e,3,n,et.min(),et.min(),or.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(et.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=or.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=or.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=et.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Vn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Vn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e,n){this.position=e,this.inclusive=n}}function H_(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=Be.comparator(Be.fromName(o.referenceValue),n.key):r=Qo(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function W_(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ui(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e,n="asc"){this.field=e,this.dir=n}}function AR(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{}class wn extends L0{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new CR(e,n,r):n==="array-contains"?new PR(e,r):n==="in"?new DR(e,r):n==="not-in"?new OR(e,r):n==="array-contains-any"?new NR(e,r):new wn(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new RR(e,r):new SR(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Qo(n,this.value)):n!==null&&Gs(this.value)===Gs(n)&&this.matchesComparison(Qo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Xe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Mr extends L0{constructor(e,n){super(),this.filters=e,this.op=n,this.ce=null}static create(e,n){return new Mr(e,n)}matches(e){return M0(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.le(n=>n.isInequality());return e!==null?e.field:null}le(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function M0(t){return t.op==="and"}function V0(t){return xR(t)&&M0(t)}function xR(t){for(const e of t.filters)if(e instanceof Mr)return!1;return!0}function Pf(t){if(t instanceof wn)return t.field.canonicalString()+t.op.toString()+Yo(t.value);if(V0(t))return t.filters.map(e=>Pf(e)).join(",");{const e=t.filters.map(n=>Pf(n)).join(",");return`${t.op}(${e})`}}function U0(t,e){return t instanceof wn?function(r,i){return i instanceof wn&&r.op===i.op&&r.field.isEqual(i.field)&&ui(r.value,i.value)}(t,e):t instanceof Mr?function(r,i){return i instanceof Mr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&U0(o,i.filters[a]),!0):!1}(t,e):void Xe()}function F0(t){return t instanceof wn?function(n){return`${n.field.canonicalString()} ${n.op} ${Yo(n.value)}`}(t):t instanceof Mr?function(n){return n.op.toString()+" {"+n.getFilters().map(F0).join(" ,")+"}"}(t):"Filter"}class CR extends wn{constructor(e,n,r){super(e,n,r),this.key=Be.fromName(r.referenceValue)}matches(e){const n=Be.comparator(e.key,this.key);return this.matchesComparison(n)}}class RR extends wn{constructor(e,n){super(e,"in",n),this.keys=$0("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class SR extends wn{constructor(e,n){super(e,"not-in",n),this.keys=$0("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function $0(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Be.fromName(r.referenceValue))}class PR extends wn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Xp(n)&&ml(n.arrayValue,this.value)}}class DR extends wn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ml(this.value.arrayValue,n)}}class OR extends wn{constructor(e,n){super(e,"not-in",n)}matches(e){if(ml(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!ml(this.value.arrayValue,n)}}class NR extends wn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Xp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ml(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.he=null}}function K_(t,e=null,n=[],r=[],i=null,s=null,o=null){return new LR(t,e,n,r,i,s,o)}function Zp(t){const e=tt(t);if(e.he===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Pf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),ph(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Yo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Yo(r)).join(",")),e.he=n}return e.he}function Jp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!AR(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!U0(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!W_(t.startAt,e.startAt)&&W_(t.endAt,e.endAt)}function Df(t){return Be.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.Pe=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function MR(t,e,n,r,i,s,o,a){return new to(t,e,n,r,i,s,o,a)}function em(t){return new to(t)}function G_(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function tm(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function gh(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(n!==null)return n}return null}function nm(t){return t.collectionGroup!==null}function Uo(t){const e=tt(t);if(e.Pe===null){e.Pe=[];const n=gh(e),r=tm(e);if(n!==null&&r===null)n.isKeyField()||e.Pe.push(new Vo(n)),e.Pe.push(new Vo($n.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.Pe.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.Pe.push(new Vo($n.keyField(),s))}}}return e.Pe}function oi(t){const e=tt(t);return e.Ie||(e.Ie=B0(e,Uo(t))),e.Ie}function B0(t,e){if(t.limitType==="F")return K_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Vo(i.field,s)});const n=t.endAt?new Xo(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Xo(t.startAt.position,t.startAt.inclusive):null;return K_(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Of(t,e){e.getFirstInequalityField(),gh(t);const n=t.filters.concat([e]);return new to(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function xc(t,e,n){return new to(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function _h(t,e){return Jp(oi(t),oi(e))&&t.limitType===e.limitType}function z0(t){return`${Zp(oi(t))}|lt:${t.limitType}`}function Eo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>F0(i)).join(", ")}]`),ph(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Yo(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Yo(i)).join(",")),`Target(${r})`}(oi(t))}; limitType=${t.limitType})`}function wh(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Be.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Uo(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const u=H_(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,Uo(r),i)||r.endAt&&!function(o,a,l){const u=H_(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,Uo(r),i))}(t,e)}function VR(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function j0(t){return(e,n)=>{let r=!1;for(const i of Uo(t)){const s=UR(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function UR(t,e,n){const r=t.field.isKeyField()?Be.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?Qo(l,u):Xe()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Xe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){eo(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return D0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FR=new en(Be.comparator);function Ci(){return FR}const q0=new en(Be.comparator);function Oa(...t){let e=q0;for(const n of t)e=e.insert(n.key,n);return e}function H0(t){let e=q0;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ds(){return za()}function W0(){return za()}function za(){return new ua(t=>t.toString(),(t,e)=>t.isEqual(e))}const $R=new en(Be.comparator),BR=new qn(Be.comparator);function mt(...t){let e=BR;for(const n of t)e=e.add(n);return e}const zR=new qn(Tt);function jR(){return zR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K0(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ic(e)?"-0":e}}function G0(t){return{integerValue:""+t}}function qR(t,e){return kR(e)?G0(e):K0(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(){this._=void 0}}function HR(t,e,n){return t instanceof Cc?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&mh(s)&&(s=Yp(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof gl?Y0(t,e):t instanceof _l?X0(t,e):function(i,s){const o=Q0(i,s),a=Q_(o)+Q_(i.Te);return Sf(o)&&Sf(i.Te)?G0(a):K0(i.serializer,a)}(t,e)}function WR(t,e,n){return t instanceof gl?Y0(t,e):t instanceof _l?X0(t,e):n}function Q0(t,e){return t instanceof Rc?function(r){return Sf(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Cc extends vh{}class gl extends vh{constructor(e){super(),this.elements=e}}function Y0(t,e){const n=Z0(e);for(const r of t.elements)n.some(i=>ui(i,r))||n.push(r);return{arrayValue:{values:n}}}class _l extends vh{constructor(e){super(),this.elements=e}}function X0(t,e){let n=Z0(e);for(const r of t.elements)n=n.filter(i=>!ui(i,r));return{arrayValue:{values:n}}}class Rc extends vh{constructor(e,n){super(),this.serializer=e,this.Te=n}}function Q_(t){return _n(t.integerValue||t.doubleValue)}function Z0(t){return Xp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function KR(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof gl&&i instanceof gl||r instanceof _l&&i instanceof _l?Go(r.elements,i.elements,ui):r instanceof Rc&&i instanceof Rc?ui(r.Te,i.Te):r instanceof Cc&&i instanceof Cc}(t.transform,e.transform)}class GR{constructor(e,n){this.version=e,this.transformResults=n}}class yr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new yr}static exists(e){return new yr(void 0,e)}static updateTime(e){return new yr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ju(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class yh{}function J0(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new rm(t.key,yr.none()):new Fl(t.key,t.data,yr.none());{const n=t.data,r=or.empty();let i=new qn($n.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new cs(t.key,r,new hr(i.toArray()),yr.none())}}function QR(t,e,n){t instanceof Fl?function(i,s,o){const a=i.value.clone(),l=X_(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof cs?function(i,s,o){if(!Ju(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=X_(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(eb(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ja(t,e,n,r){return t instanceof Fl?function(s,o,a,l){if(!Ju(s.precondition,o))return a;const u=s.value.clone(),d=Z_(s.fieldTransforms,l,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof cs?function(s,o,a,l){if(!Ju(s.precondition,o))return a;const u=Z_(s.fieldTransforms,l,o),d=o.data;return d.setAll(eb(s)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(s,o,a){return Ju(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function YR(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=Q0(r.transform,i||null);s!=null&&(n===null&&(n=or.empty()),n.set(r.field,s))}return n||null}function Y_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Go(r,i,(s,o)=>KR(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Fl extends yh{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class cs extends yh{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function eb(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function X_(t,e,n){const r=new Map;zt(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,WR(o,a,n[i]))}return r}function Z_(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,HR(s,o,e))}return r}class rm extends yh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class XR extends yh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&QR(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ja(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ja(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=W0();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=J0(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(et.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),mt())}isEqual(e){return this.batchId===e.batchId&&Go(this.mutations,e.mutations,(n,r)=>Y_(n,r))&&Go(this.baseMutations,e.baseMutations,(n,r)=>Y_(n,r))}}class im{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){zt(e.mutations.length===r.length);let i=function(){return $R}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new im(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(e,n,r){this.alias=e,this.Ee=n,this.fieldPath=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gn,wt;function nS(t){switch(t){default:return Xe();case me.CANCELLED:case me.UNKNOWN:case me.DEADLINE_EXCEEDED:case me.RESOURCE_EXHAUSTED:case me.INTERNAL:case me.UNAVAILABLE:case me.UNAUTHENTICATED:return!1;case me.INVALID_ARGUMENT:case me.NOT_FOUND:case me.ALREADY_EXISTS:case me.PERMISSION_DENIED:case me.FAILED_PRECONDITION:case me.ABORTED:case me.OUT_OF_RANGE:case me.UNIMPLEMENTED:case me.DATA_LOSS:return!0}}function tb(t){if(t===void 0)return xi("GRPC error has no .code"),me.UNKNOWN;switch(t){case gn.OK:return me.OK;case gn.CANCELLED:return me.CANCELLED;case gn.UNKNOWN:return me.UNKNOWN;case gn.DEADLINE_EXCEEDED:return me.DEADLINE_EXCEEDED;case gn.RESOURCE_EXHAUSTED:return me.RESOURCE_EXHAUSTED;case gn.INTERNAL:return me.INTERNAL;case gn.UNAVAILABLE:return me.UNAVAILABLE;case gn.UNAUTHENTICATED:return me.UNAUTHENTICATED;case gn.INVALID_ARGUMENT:return me.INVALID_ARGUMENT;case gn.NOT_FOUND:return me.NOT_FOUND;case gn.ALREADY_EXISTS:return me.ALREADY_EXISTS;case gn.PERMISSION_DENIED:return me.PERMISSION_DENIED;case gn.FAILED_PRECONDITION:return me.FAILED_PRECONDITION;case gn.ABORTED:return me.ABORTED;case gn.OUT_OF_RANGE:return me.OUT_OF_RANGE;case gn.UNIMPLEMENTED:return me.UNIMPLEMENTED;case gn.DATA_LOSS:return me.DATA_LOSS;default:return Xe()}}(wt=gn||(gn={}))[wt.OK=0]="OK",wt[wt.CANCELLED=1]="CANCELLED",wt[wt.UNKNOWN=2]="UNKNOWN",wt[wt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",wt[wt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",wt[wt.NOT_FOUND=5]="NOT_FOUND",wt[wt.ALREADY_EXISTS=6]="ALREADY_EXISTS",wt[wt.PERMISSION_DENIED=7]="PERMISSION_DENIED",wt[wt.UNAUTHENTICATED=16]="UNAUTHENTICATED",wt[wt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",wt[wt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",wt[wt.ABORTED=10]="ABORTED",wt[wt.OUT_OF_RANGE=11]="OUT_OF_RANGE",wt[wt.UNIMPLEMENTED=12]="UNIMPLEMENTED",wt[wt.INTERNAL=13]="INTERNAL",wt[wt.UNAVAILABLE=14]="UNAVAILABLE",wt[wt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rS(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iS=new Mo([4294967295,4294967295],0);function J_(t){const e=rS().encode(t),n=new aR;return n.update(e),new Uint8Array(n.digest())}function ew(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Mo([n,r],0),new Mo([i,s],0)]}class sm{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Na(`Invalid padding: ${n}`);if(r<0)throw new Na(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Na(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Na(`Invalid padding when bitmap length is 0: ${n}`);this.Ae=8*e.length-n,this.Re=Mo.fromNumber(this.Ae)}Ve(e,n,r){let i=e.add(n.multiply(Mo.fromNumber(r)));return i.compare(iS)===1&&(i=new Mo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Re).toNumber()}me(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ae===0)return!1;const n=J_(e),[r,i]=ew(n);for(let s=0;s<this.hashCount;s++){const o=this.Ve(r,i,s);if(!this.me(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new sm(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ae===0)return;const n=J_(e),[r,i]=ew(n);for(let s=0;s<this.hashCount;s++){const o=this.Ve(r,i,s);this.fe(o)}}fe(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Na extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,$l.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new bh(et.min(),i,new en(Tt),Ci(),mt())}}class $l{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new $l(r,n,mt(),mt(),mt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(e,n,r,i){this.ge=e,this.removedTargetIds=n,this.key=r,this.pe=i}}class nb{constructor(e,n){this.targetId=e,this.ye=n}}class rb{constructor(e,n,r=Wn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class tw{constructor(){this.we=0,this.Se=rw(),this.be=Wn.EMPTY_BYTE_STRING,this.De=!1,this.Ce=!0}get current(){return this.De}get resumeToken(){return this.be}get ve(){return this.we!==0}get Fe(){return this.Ce}Me(e){e.approximateByteSize()>0&&(this.Ce=!0,this.be=e)}xe(){let e=mt(),n=mt(),r=mt();return this.Se.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Xe()}}),new $l(this.be,this.De,e,n,r)}Oe(){this.Ce=!1,this.Se=rw()}Ne(e,n){this.Ce=!0,this.Se=this.Se.insert(e,n)}Be(e){this.Ce=!0,this.Se=this.Se.remove(e)}Le(){this.we+=1}ke(){this.we-=1}qe(){this.Ce=!0,this.De=!0}}class sS{constructor(e){this.Qe=e,this.Ke=new Map,this.$e=Ci(),this.Ue=nw(),this.We=new en(Tt)}Ge(e){for(const n of e.ge)e.pe&&e.pe.isFoundDocument()?this.ze(n,e.pe):this.je(n,e.key,e.pe);for(const n of e.removedTargetIds)this.je(n,e.key,e.pe)}He(e){this.forEachTarget(e,n=>{const r=this.Je(n);switch(e.state){case 0:this.Ye(n)&&r.Me(e.resumeToken);break;case 1:r.ke(),r.ve||r.Oe(),r.Me(e.resumeToken);break;case 2:r.ke(),r.ve||this.removeTarget(n);break;case 3:this.Ye(n)&&(r.qe(),r.Me(e.resumeToken));break;case 4:this.Ye(n)&&(this.Ze(n),r.Me(e.resumeToken));break;default:Xe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ke.forEach((r,i)=>{this.Ye(i)&&n(i)})}Xe(e){const n=e.targetId,r=e.ye.count,i=this.et(n);if(i){const s=i.target;if(Df(s))if(r===0){const o=new Be(s.path);this.je(n,o,Vn.newNoDocument(o,et.min()))}else zt(r===1);else{const o=this.tt(n);if(o!==r){const a=this.nt(e),l=a?this.rt(a,e,o):1;if(l!==0){this.Ze(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.We=this.We.insert(n,u)}}}}}nt(e){const n=e.ye.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Ks(r).toUint8Array()}catch(l){if(l instanceof O0)return Ko("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new sm(o,i,s)}catch(l){return Ko(l instanceof Na?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ae===0?null:a}rt(e,n,r){return n.ye.count===r-this.ot(e,n.targetId)?0:2}ot(e,n){const r=this.Qe.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Qe.st(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.je(n,s,null),i++)}),i}_t(e){const n=new Map;this.Ke.forEach((s,o)=>{const a=this.et(o);if(a){if(s.current&&Df(a.target)){const l=new Be(a.target.path);this.$e.get(l)!==null||this.ut(o,l)||this.je(o,l,Vn.newNoDocument(l,e))}s.Fe&&(n.set(o,s.xe()),s.Oe())}});let r=mt();this.Ue.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.et(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.$e.forEach((s,o)=>o.setReadTime(e));const i=new bh(e,n,this.We,this.$e,r);return this.$e=Ci(),this.Ue=nw(),this.We=new en(Tt),i}ze(e,n){if(!this.Ye(e))return;const r=this.ut(e,n.key)?2:0;this.Je(e).Ne(n.key,r),this.$e=this.$e.insert(n.key,n),this.Ue=this.Ue.insert(n.key,this.ct(n.key).add(e))}je(e,n,r){if(!this.Ye(e))return;const i=this.Je(e);this.ut(e,n)?i.Ne(n,1):i.Be(n),this.Ue=this.Ue.insert(n,this.ct(n).delete(e)),r&&(this.$e=this.$e.insert(n,r))}removeTarget(e){this.Ke.delete(e)}tt(e){const n=this.Je(e).xe();return this.Qe.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Le(e){this.Je(e).Le()}Je(e){let n=this.Ke.get(e);return n||(n=new tw,this.Ke.set(e,n)),n}ct(e){let n=this.Ue.get(e);return n||(n=new qn(Tt),this.Ue=this.Ue.insert(e,n)),n}Ye(e){const n=this.et(e)!==null;return n||Ue("WatchChangeAggregator","Detected inactive target",e),n}et(e){const n=this.Ke.get(e);return n&&n.ve?null:this.Qe.lt(e)}Ze(e){this.Ke.set(e,new tw),this.Qe.getRemoteKeysForTarget(e).forEach(n=>{this.je(e,n,null)})}ut(e,n){return this.Qe.getRemoteKeysForTarget(e).has(n)}}function nw(){return new en(Be.comparator)}function rw(){return new en(Be.comparator)}const oS=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),aS=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),lS=(()=>({and:"AND",or:"OR"}))();class uS{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Nf(t,e){return t.useProto3Json||ph(e)?e:{value:e}}function Sc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ib(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function cS(t,e){return Sc(t,e.toTimestamp())}function ai(t){return zt(!!t),et.fromTimestamp(function(n){const r=is(n);return new nt(r.seconds,r.nanos)}(t))}function om(t,e){return function(r){return new Bt(["projects",r.projectId,"databases",r.database])}(t).child("documents").child(e).canonicalString()}function sb(t){const e=Bt.fromString(t);return zt(cb(e)),e}function Lf(t,e){return om(t.databaseId,e.path)}function Od(t,e){const n=sb(e);if(n.get(1)!==t.databaseId.projectId)throw new Ce(me.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ce(me.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Be(ob(n))}function Mf(t,e){return om(t.databaseId,e)}function hS(t){const e=sb(t);return e.length===4?Bt.emptyPath():ob(e)}function Vf(t){return new Bt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function ob(t){return zt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function iw(t,e,n){return{name:Lf(t,e),fields:n.value.mapValue.fields}}function dS(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Xe()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,d){return u.useProto3Json?(zt(d===void 0||typeof d=="string"),Wn.fromBase64String(d||"")):(zt(d===void 0||d instanceof Uint8Array),Wn.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const d=u.code===void 0?me.UNKNOWN:tb(u.code);return new Ce(d,u.message||"")}(o);n=new rb(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Od(t,r.document.name),s=ai(r.document.updateTime),o=r.document.createTime?ai(r.document.createTime):et.min(),a=new or({mapValue:{fields:r.document.fields}}),l=Vn.newFoundDocument(i,s,o,a),u=r.targetIds||[],d=r.removedTargetIds||[];n=new ec(u,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Od(t,r.document),s=r.readTime?ai(r.readTime):et.min(),o=Vn.newNoDocument(i,s),a=r.removedTargetIds||[];n=new ec([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Od(t,r.document),s=r.removedTargetIds||[];n=new ec([],s,i,null)}else{if(!("filter"in e))return Xe();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new tS(i,s),a=r.targetId;n=new nb(a,o)}}return n}function fS(t,e){let n;if(e instanceof Fl)n={update:iw(t,e.key,e.value)};else if(e instanceof rm)n={delete:Lf(t,e.key)};else if(e instanceof cs)n={update:iw(t,e.key,e.data),updateMask:bS(e.fieldMask)};else{if(!(e instanceof XR))return Xe();n={verify:Lf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Cc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof gl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof _l)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Rc)return{fieldPath:o.field.canonicalString(),increment:a.Te};throw Xe()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:cS(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Xe()}(t,e.precondition)),n}function pS(t,e){return t&&t.length>0?(zt(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?ai(i.updateTime):ai(s);return o.isEqual(et.min())&&(o=ai(s)),new GR(o,i.transformResults||[])}(n,e))):[]}function mS(t,e){return{documents:[Mf(t,e.path)]}}function ab(t,e){const n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=Mf(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Mf(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(l){if(l.length!==0)return ub(Mr.create(l,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const s=function(l){if(l.length!==0)return l.map(u=>function(f){return{field:Wi(f.field),direction:wS(f.dir)}}(u))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=Nf(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),n}function gS(t){let e=hS(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){zt(r===1);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(f){const p=lb(f);return p instanceof Mr&&V0(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(p=>function(b){return new Vo(To(b.field),function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(f){let p;return p=typeof f=="object"?f.value:f,ph(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(f){const p=!!f.before,m=f.values||[];return new Xo(m,p)}(n.startAt));let u=null;return n.endAt&&(u=function(f){const p=!f.before,m=f.values||[];return new Xo(m,p)}(n.endAt)),MR(e,i,o,s,a,"F",l,u)}function _S(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Xe()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function lb(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=To(n.unaryFilter.field);return wn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=To(n.unaryFilter.field);return wn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=To(n.unaryFilter.field);return wn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=To(n.unaryFilter.field);return wn.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Xe()}}(t):t.fieldFilter!==void 0?function(n){return wn.create(To(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Xe()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Mr.create(n.compositeFilter.filters.map(r=>lb(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Xe()}}(n.compositeFilter.op))}(t):Xe()}function wS(t){return oS[t]}function vS(t){return aS[t]}function yS(t){return lS[t]}function Wi(t){return{fieldPath:t.canonicalString()}}function To(t){return $n.fromServerFormat(t.fieldPath)}function ub(t){return t instanceof wn?function(n){if(n.op==="=="){if(q_(n.value))return{unaryFilter:{field:Wi(n.field),op:"IS_NAN"}};if(j_(n.value))return{unaryFilter:{field:Wi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(q_(n.value))return{unaryFilter:{field:Wi(n.field),op:"IS_NOT_NAN"}};if(j_(n.value))return{unaryFilter:{field:Wi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Wi(n.field),op:vS(n.op),value:n.value}}}(t):t instanceof Mr?function(n){const r=n.getFilters().map(i=>ub(i));return r.length===1?r[0]:{compositeFilter:{op:yS(n.op),filters:r}}}(t):Xe()}function bS(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function cb(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(e,n,r,i,s=et.min(),o=et.min(),a=Wn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Gi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Gi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Gi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Gi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{constructor(e){this.ht=e}}function ES(t){const e=gS({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?xc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{constructor(){this.an=new IS}addToCollectionParentIndex(e,n){return this.an.add(n),ke.resolve()}getCollectionParents(e,n){return ke.resolve(this.an.getEntries(n))}addFieldIndex(e,n){return ke.resolve()}deleteFieldIndex(e,n){return ke.resolve()}deleteAllFieldIndexes(e){return ke.resolve()}createTargetIndexes(e,n){return ke.resolve()}getDocumentsMatchingTarget(e,n){return ke.resolve(null)}getIndexType(e,n){return ke.resolve(0)}getFieldIndexes(e,n){return ke.resolve([])}getNextCollectionGroupToUpdate(e){return ke.resolve(null)}getMinOffset(e,n){return ke.resolve(rs.min())}getMinOffsetFromCollectionGroup(e,n){return ke.resolve(rs.min())}updateCollectionGroup(e,n,r){return ke.resolve()}updateIndexEntries(e,n){return ke.resolve()}}class IS{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new qn(Bt.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new qn(Bt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static Bn(){return new Zo(0)}static Ln(){return new Zo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{constructor(){this.changes=new ua(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Vn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?ke.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&ja(r.mutation,i,hr.empty(),nt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,mt()).next(()=>r))}getLocalViewOfDocuments(e,n,r=mt()){const i=Ds();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Oa();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Ds();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,mt()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Ci();const o=za(),a=function(){return za()}();return n.forEach((l,u)=>{const d=r.get(u.key);i.has(u.key)&&(d===void 0||d.mutation instanceof cs)?s=s.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),ja(d.mutation,u,d.mutation.getFieldMask(),nt.now())):o.set(u.key,hr.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,d)=>o.set(u,d)),n.forEach((u,d)=>{var f;return a.set(u,new xS(d,(f=o.get(u))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){const r=za();let i=new en((o,a)=>o-a),s=mt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let d=r.get(l)||hr.empty();d=a.applyToLocalView(u,d),r.set(l,d);const f=(i.get(a.batchId)||mt()).add(l);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,d=l.value,f=W0();d.forEach(p=>{if(!s.has(p)){const m=J0(n.get(p),r.get(p));m!==null&&f.set(p,m),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return ke.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return Be.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):nm(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):ke.resolve(Ds());let a=-1,l=s;return o.next(u=>ke.forEach(u,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(d)?ke.resolve():this.remoteDocumentCache.getEntry(e,d).next(p=>{l=l.insert(d,p)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,mt())).next(d=>({batchId:a,changes:H0(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Be(n)).next(r=>{let i=Oa();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Oa();return this.indexManager.getCollectionParents(e,s).next(a=>ke.forEach(a,l=>{const u=function(f,p){return new to(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(d=>{d.forEach((f,p)=>{o=o.insert(f,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,u)=>{const d=u.getKey();o.get(d)===null&&(o=o.insert(d,Vn.newInvalidDocument(d)))});let a=Oa();return o.forEach((l,u)=>{const d=s.get(l);d!==void 0&&ja(d.mutation,u,hr.empty(),nt.now()),wh(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(e){this.serializer=e,this.lr=new Map,this.hr=new Map}getBundleMetadata(e,n){return ke.resolve(this.lr.get(n))}saveBundleMetadata(e,n){return this.lr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:ai(i.createTime)}}(n)),ke.resolve()}getNamedQuery(e,n){return ke.resolve(this.hr.get(n))}saveNamedQuery(e,n){return this.hr.set(n.name,function(i){return{name:i.name,query:ES(i.bundledQuery),readTime:ai(i.readTime)}}(n)),ke.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{constructor(){this.overlays=new en(Be.comparator),this.Pr=new Map}getOverlay(e,n){return ke.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ds();return ke.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.It(e,n,s)}),ke.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Pr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Pr.delete(r)),ke.resolve()}getOverlaysForCollection(e,n,r){const i=Ds(),s=n.length+1,o=new Be(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return ke.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new en((u,d)=>u-d);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let d=s.get(u.largestBatchId);d===null&&(d=Ds(),s=s.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const a=Ds(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,d)=>a.set(u,d)),!(a.size()>=i)););return ke.resolve(a)}It(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Pr.get(i.largestBatchId).delete(r.key);this.Pr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new JR(n,r));let s=this.Pr.get(n);s===void 0&&(s=mt(),this.Pr.set(n,s)),this.Pr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am{constructor(){this.Ir=new qn(In.dr),this.Tr=new qn(In.Er)}isEmpty(){return this.Ir.isEmpty()}addReference(e,n){const r=new In(e,n);this.Ir=this.Ir.add(r),this.Tr=this.Tr.add(r)}Ar(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Rr(new In(e,n))}Vr(e,n){e.forEach(r=>this.removeReference(r,n))}mr(e){const n=new Be(new Bt([])),r=new In(n,e),i=new In(n,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Rr(o),s.push(o.key)}),s}gr(){this.Ir.forEach(e=>this.Rr(e))}Rr(e){this.Ir=this.Ir.delete(e),this.Tr=this.Tr.delete(e)}pr(e){const n=new Be(new Bt([])),r=new In(n,e),i=new In(n,e+1);let s=mt();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new In(e,0),r=this.Ir.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class In{constructor(e,n){this.key=e,this.yr=n}static dr(e,n){return Be.comparator(e.key,n.key)||Tt(e.yr,n.yr)}static Er(e,n){return Tt(e.yr,n.yr)||Be.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.wr=1,this.Sr=new qn(In.dr)}checkEmpty(e){return ke.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.wr;this.wr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new ZR(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.Sr=this.Sr.add(new In(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return ke.resolve(o)}lookupMutationBatch(e,n){return ke.resolve(this.br(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Dr(r),s=i<0?0:i;return ke.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return ke.resolve(this.mutationQueue.length===0?-1:this.wr-1)}getAllMutationBatches(e){return ke.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new In(n,0),i=new In(n,Number.POSITIVE_INFINITY),s=[];return this.Sr.forEachInRange([r,i],o=>{const a=this.br(o.yr);s.push(a)}),ke.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new qn(Tt);return n.forEach(i=>{const s=new In(i,0),o=new In(i,Number.POSITIVE_INFINITY);this.Sr.forEachInRange([s,o],a=>{r=r.add(a.yr)})}),ke.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;Be.isDocumentKey(s)||(s=s.child(""));const o=new In(new Be(s),0);let a=new qn(Tt);return this.Sr.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.yr)),!0)},o),ke.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.br(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){zt(this.vr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Sr;return ke.forEach(n.mutations,i=>{const s=new In(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Sr=r})}xn(e){}containsKey(e,n){const r=new In(n,0),i=this.Sr.firstAfterOrEqual(r);return ke.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,ke.resolve()}vr(e,n){return this.Dr(e)}Dr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}br(e){const n=this.Dr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{constructor(e){this.Fr=e,this.docs=function(){return new en(Be.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Fr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return ke.resolve(r?r.document.mutableCopy():Vn.newInvalidDocument(n))}getEntries(e,n){let r=Ci();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Vn.newInvalidDocument(i))}),ke.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Ci();const o=n.path,a=new Be(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:d}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||vR(wR(d),r)<=0||(i.has(d.key)||wh(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return ke.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Xe()}Mr(e,n){return ke.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new OS(this)}getSize(e){return ke.resolve(this.size)}}class OS extends AS{constructor(e){super(),this.ur=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ur.addEntry(e,i)):this.ur.removeEntry(r)}),ke.waitFor(n)}getFromCache(e,n){return this.ur.getEntry(e,n)}getAllFromCache(e,n){return this.ur.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{constructor(e){this.persistence=e,this.Or=new ua(n=>Zp(n),Jp),this.lastRemoteSnapshotVersion=et.min(),this.highestTargetId=0,this.Nr=0,this.Br=new am,this.targetCount=0,this.Lr=Zo.Bn()}forEachTarget(e,n){return this.Or.forEach((r,i)=>n(i)),ke.resolve()}getLastRemoteSnapshotVersion(e){return ke.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ke.resolve(this.Nr)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),ke.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Nr&&(this.Nr=n),ke.resolve()}Qn(e){this.Or.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Lr=new Zo(n),this.highestTargetId=n),e.sequenceNumber>this.Nr&&(this.Nr=e.sequenceNumber)}addTargetData(e,n){return this.Qn(n),this.targetCount+=1,ke.resolve()}updateTargetData(e,n){return this.Qn(n),ke.resolve()}removeTargetData(e,n){return this.Or.delete(n.target),this.Br.mr(n.targetId),this.targetCount-=1,ke.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Or.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Or.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),ke.waitFor(s).next(()=>i)}getTargetCount(e){return ke.resolve(this.targetCount)}getTargetData(e,n){const r=this.Or.get(n)||null;return ke.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Ar(n,r),ke.resolve()}removeMatchingKeys(e,n,r){this.Br.Vr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),ke.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.mr(n),ke.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.pr(n);return ke.resolve(r)}containsKey(e,n){return ke.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{constructor(e,n){this.kr={},this.overlays={},this.qr=new Qp(0),this.Qr=!1,this.Qr=!0,this.referenceDelegate=e(this),this.Kr=new NS(this),this.indexManager=new TS,this.remoteDocumentCache=function(i){return new DS(i)}(r=>this.referenceDelegate.$r(r)),this.serializer=new kS(n),this.Ur=new RS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Qr=!1,Promise.resolve()}get started(){return this.Qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new SS,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.kr[e.toKey()];return r||(r=new PS(n,this.referenceDelegate),this.kr[e.toKey()]=r),r}getTargetCache(){return this.Kr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ur}runTransaction(e,n,r){Ue("MemoryPersistence","Starting transaction:",e);const i=new MS(this.qr.next());return this.referenceDelegate.Wr(),r(i).next(s=>this.referenceDelegate.Gr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}zr(e,n){return ke.or(Object.values(this.kr).map(r=>()=>r.containsKey(e,n)))}}class MS extends bR{constructor(e){super(),this.currentSequenceNumber=e}}class lm{constructor(e){this.persistence=e,this.jr=new am,this.Hr=null}static Jr(e){return new lm(e)}get Yr(){if(this.Hr)return this.Hr;throw Xe()}addReference(e,n,r){return this.jr.addReference(r,n),this.Yr.delete(r.toString()),ke.resolve()}removeReference(e,n,r){return this.jr.removeReference(r,n),this.Yr.add(r.toString()),ke.resolve()}markPotentiallyOrphaned(e,n){return this.Yr.add(n.toString()),ke.resolve()}removeTarget(e,n){this.jr.mr(n.targetId).forEach(i=>this.Yr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Yr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Wr(){this.Hr=new Set}Gr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ke.forEach(this.Yr,r=>{const i=Be.fromPath(r);return this.Zr(e,i).next(s=>{s||n.removeEntry(i,et.min())})}).next(()=>(this.Hr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Zr(e,n).next(r=>{r?this.Yr.delete(n.toString()):this.Yr.add(n.toString())})}$r(e){return 0}Zr(e,n){return ke.or([()=>ke.resolve(this.jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.zr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Qi=r,this.Ki=i}static $i(e,n){let r=mt(),i=mt();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new um(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{constructor(){this.Ui=!1,this.Wi=!1,this.Gi=100,this.zi=8}initialize(e,n){this.ji=e,this.indexManager=n,this.Ui=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Hi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Ji(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new VS;return this.Yi(e,n,o).next(a=>{if(s.result=a,this.Wi)return this.Zi(e,n,o,a.size)})}).next(()=>s.result)}Zi(e,n,r,i){return r.documentReadCount<this.Gi?(ba()<=_t.DEBUG&&Ue("QueryEngine","SDK will not create cache indexes for query:",Eo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Gi,"documents"),ke.resolve()):(ba()<=_t.DEBUG&&Ue("QueryEngine","Query:",Eo(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.zi*i?(ba()<=_t.DEBUG&&Ue("QueryEngine","The SDK decides to create cache indexes for query:",Eo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,oi(n))):ke.resolve())}Hi(e,n){if(G_(n))return ke.resolve(null);let r=oi(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=xc(n,null,"F"),r=oi(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=mt(...s);return this.ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.Xi(n,a);return this.es(n,u,o,l.readTime)?this.Hi(e,xc(n,null,"F")):this.ts(e,u,n,l)}))})))}Ji(e,n,r,i){return G_(n)||i.isEqual(et.min())?ke.resolve(null):this.ji.getDocuments(e,r).next(s=>{const o=this.Xi(n,s);return this.es(n,o,r,i)?ke.resolve(null):(ba()<=_t.DEBUG&&Ue("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Eo(n)),this.ts(e,o,n,_R(i,-1)).next(a=>a))})}Xi(e,n){let r=new qn(j0(e));return n.forEach((i,s)=>{wh(e,s)&&(r=r.add(s))}),r}es(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Yi(e,n,r){return ba()<=_t.DEBUG&&Ue("QueryEngine","Using full collection scan to execute query:",Eo(n)),this.ji.getDocumentsMatchingQuery(e,n,rs.min(),r)}ts(e,n,r,i){return this.ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{constructor(e,n,r,i){this.persistence=e,this.ns=n,this.serializer=i,this.rs=new en(Tt),this.ss=new ua(s=>Zp(s),Jp),this.os=new Map,this._s=e.getRemoteDocumentCache(),this.Kr=e.getTargetCache(),this.Ur=e.getBundleCache(),this.us(r)}us(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new CS(this._s,this.mutationQueue,this.documentOverlayCache,this.indexManager),this._s.setIndexManager(this.indexManager),this.ns.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.rs))}}function $S(t,e,n,r){return new FS(t,e,n,r)}async function hb(t,e){const n=tt(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.us(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=mt();for(const u of i){o.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}for(const u of s){a.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(u=>({cs:u,removedBatchIds:o,addedBatchIds:a}))})})}function BS(t,e){const n=tt(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n._s.newChangeBuffer({trackRemovals:!0});return function(a,l,u,d){const f=u.batch,p=f.keys();let m=ke.resolve();return p.forEach(b=>{m=m.next(()=>d.getEntry(l,b)).next(v=>{const I=u.docVersions.get(b);zt(I!==null),v.version.compareTo(I)<0&&(f.applyToRemoteDocument(v,u),v.isValidDocument()&&(v.setReadTime(u.commitVersion),d.addEntry(v)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=mt();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function db(t){const e=tt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Kr.getLastRemoteSnapshotVersion(n))}function zS(t,e){const n=tt(t),r=e.snapshotVersion;let i=n.rs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n._s.newChangeBuffer({trackRemovals:!0});i=n.rs;const a=[];e.targetChanges.forEach((d,f)=>{const p=i.get(f);if(!p)return;a.push(n.Kr.removeMatchingKeys(s,d.removedDocuments,f).next(()=>n.Kr.addMatchingKeys(s,d.addedDocuments,f)));let m=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?m=m.withResumeToken(Wn.EMPTY_BYTE_STRING,et.min()).withLastLimboFreeSnapshotVersion(et.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,r)),i=i.insert(f,m),function(v,I,A){return v.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8?!0:A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0}(p,m,d)&&a.push(n.Kr.updateTargetData(s,m))});let l=Ci(),u=mt();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(jS(s,o,e.documentUpdates).next(d=>{l=d.ls,u=d.hs})),!r.isEqual(et.min())){const d=n.Kr.getLastRemoteSnapshotVersion(s).next(f=>n.Kr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return ke.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.rs=i,s))}function jS(t,e,n){let r=mt(),i=mt();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Ci();return n.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(et.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):Ue("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{ls:o,hs:i}})}function qS(t,e){const n=tt(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function HS(t,e){const n=tt(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Kr.getTargetData(r,e).next(s=>s?(i=s,ke.resolve(i)):n.Kr.allocateTargetId(r).next(o=>(i=new Gi(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Kr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.rs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.rs=n.rs.insert(r.targetId,r),n.ss.set(e,r.targetId)),r})}async function Uf(t,e,n){const r=tt(t),i=r.rs.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Ul(o))throw o;Ue("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.rs=r.rs.remove(e),r.ss.delete(i.target)}function sw(t,e,n){const r=tt(t);let i=et.min(),s=mt();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,d){const f=tt(l),p=f.ss.get(d);return p!==void 0?ke.resolve(f.rs.get(p)):f.Kr.getTargetData(u,d)}(r,o,oi(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Kr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ns.getDocumentsMatchingQuery(o,e,n?i:et.min(),n?s:mt())).next(a=>(WS(r,VR(e),a),{documents:a,Ps:s})))}function WS(t,e,n){let r=t.os.get(e)||et.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.os.set(e,r)}class ow{constructor(){this.activeTargetIds=jR()}Rs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}As(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class KS{constructor(){this.ro=new ow,this.io={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.ro.Rs(e),this.io[e]||"not-current"}updateQueryState(e,n,r){this.io[e]=n}removeLocalQueryTarget(e){this.ro.Vs(e)}isLocalQueryTarget(e){return this.ro.activeTargetIds.has(e)}clearQueryState(e){delete this.io[e]}getAllActiveQueryTargets(){return this.ro.activeTargetIds}isActiveQueryTarget(e){return this.ro.activeTargetIds.has(e)}start(){return this.ro=new ow,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GS{so(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(){this.oo=()=>this._o(),this.ao=()=>this.uo(),this.co=[],this.lo()}so(e){this.co.push(e)}shutdown(){window.removeEventListener("online",this.oo),window.removeEventListener("offline",this.ao)}lo(){window.addEventListener("online",this.oo),window.addEventListener("offline",this.ao)}_o(){Ue("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.co)e(0)}uo(){Ue("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.co)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Su=null;function Nd(){return Su===null?Su=function(){return 268435456+Math.round(2147483648*Math.random())}():Su++,"0x"+Su.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{constructor(e){this.ho=e.ho,this.Po=e.Po}Io(e){this.To=e}Eo(e){this.Ao=e}onMessage(e){this.Ro=e}close(){this.Po()}send(e){this.ho(e)}Vo(){this.To()}mo(e){this.Ao(e)}fo(e){this.Ro(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ln="WebChannelConnection";class XS extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.po=r+"://"+n.host,this.yo=`projects/${i}/databases/${s}`,this.wo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get So(){return!1}bo(n,r,i,s,o){const a=Nd(),l=this.Do(n,r);Ue("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Co(u,s,o),this.vo(n,l,u,i).then(d=>(Ue("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw Ko("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",l,"request:",i),d})}Fo(n,r,i,s,o,a){return this.bo(n,r,i,s,o)}Co(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+la}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}Do(n,r){const i=QS[n];return`${this.po}/v1/${r}:${i}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,n,r,i){const s=Nd();return new Promise((o,a)=>{const l=new oR;l.setWithCredentials(!0),l.listenOnce(iR.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Dd.NO_ERROR:const d=l.getResponseJson();Ue(Ln,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case Dd.TIMEOUT:Ue(Ln,`RPC '${e}' ${s} timed out`),a(new Ce(me.DEADLINE_EXCEEDED,"Request time out"));break;case Dd.HTTP_ERROR:const f=l.getStatus();if(Ue(Ln,`RPC '${e}' ${s} failed with status:`,f,"response text:",l.getResponseText()),f>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const m=p==null?void 0:p.error;if(m&&m.status&&m.message){const b=function(I){const A=I.toLowerCase().replace(/_/g,"-");return Object.values(me).indexOf(A)>=0?A:me.UNKNOWN}(m.status);a(new Ce(b,m.message))}else a(new Ce(me.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new Ce(me.UNAVAILABLE,"Connection failed."));break;default:Xe()}}finally{Ue(Ln,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(i);Ue(Ln,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",u,r,15)})}Mo(e,n,r){const i=Nd(),s=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=nR(),a=rR(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Co(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=s.join("");Ue(Ln,`Creating RPC '${e}' stream ${i}: ${d}`,l);const f=o.createWebChannel(d,l);let p=!1,m=!1;const b=new YS({ho:I=>{m?Ue(Ln,`Not sending because RPC '${e}' stream ${i} is closed:`,I):(p||(Ue(Ln,`Opening RPC '${e}' stream ${i} transport.`),f.open(),p=!0),Ue(Ln,`RPC '${e}' stream ${i} sending:`,I),f.send(I))},Po:()=>f.close()}),v=(I,A,x)=>{I.listen(A,S=>{try{x(S)}catch(D){setTimeout(()=>{throw D},0)}})};return v(f,xu.EventType.OPEN,()=>{m||Ue(Ln,`RPC '${e}' stream ${i} transport opened.`)}),v(f,xu.EventType.CLOSE,()=>{m||(m=!0,Ue(Ln,`RPC '${e}' stream ${i} transport closed`),b.mo())}),v(f,xu.EventType.ERROR,I=>{m||(m=!0,Ko(Ln,`RPC '${e}' stream ${i} transport errored:`,I),b.mo(new Ce(me.UNAVAILABLE,"The operation could not be completed")))}),v(f,xu.EventType.MESSAGE,I=>{var A;if(!m){const x=I.data[0];zt(!!x);const S=x,D=S.error||((A=S[0])===null||A===void 0?void 0:A.error);if(D){Ue(Ln,`RPC '${e}' stream ${i} received error:`,D);const B=D.status;let X=function(re){const Q=gn[re];if(Q!==void 0)return tb(Q)}(B),G=D.message;X===void 0&&(X=me.INTERNAL,G="Unknown error status: "+B+" with message "+D.message),m=!0,b.mo(new Ce(X,G)),f.close()}else Ue(Ln,`RPC '${e}' stream ${i} received:`,x),b.fo(x)}}),v(a,sR.STAT_EVENT,I=>{I.stat===U_.PROXY?Ue(Ln,`RPC '${e}' stream ${i} detected buffering proxy`):I.stat===U_.NOPROXY&&Ue(Ln,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.Vo()},0),b}}function Ld(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kh(t){return new uS(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb{constructor(e,n,r=1e3,i=1.5,s=6e4){this._i=e,this.timerId=n,this.xo=r,this.Oo=i,this.No=s,this.Bo=0,this.Lo=null,this.ko=Date.now(),this.reset()}reset(){this.Bo=0}qo(){this.Bo=this.No}Qo(e){this.cancel();const n=Math.floor(this.Bo+this.Ko()),r=Math.max(0,Date.now()-this.ko),i=Math.max(0,n-r);i>0&&Ue("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Bo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Lo=this._i.enqueueAfterDelay(this.timerId,i,()=>(this.ko=Date.now(),e())),this.Bo*=this.Oo,this.Bo<this.xo&&(this.Bo=this.xo),this.Bo>this.No&&(this.Bo=this.No)}$o(){this.Lo!==null&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){this.Lo!==null&&(this.Lo.cancel(),this.Lo=null)}Ko(){return(Math.random()-.5)*this.Bo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pb{constructor(e,n,r,i,s,o,a,l){this._i=e,this.Uo=r,this.Wo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Go=0,this.zo=null,this.jo=null,this.stream=null,this.Ho=new fb(e,n)}Jo(){return this.state===1||this.state===5||this.Yo()}Yo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Zo()}async stop(){this.Jo()&&await this.close(0)}Xo(){this.state=0,this.Ho.reset()}e_(){this.Yo()&&this.zo===null&&(this.zo=this._i.enqueueAfterDelay(this.Uo,6e4,()=>this.t_()))}n_(e){this.r_(),this.stream.send(e)}async t_(){if(this.Yo())return this.close(0)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}i_(){this.jo&&(this.jo.cancel(),this.jo=null)}async close(e,n){this.r_(),this.i_(),this.Ho.cancel(),this.Go++,e!==4?this.Ho.reset():n&&n.code===me.RESOURCE_EXHAUSTED?(xi(n.toString()),xi("Using maximum backoff delay to prevent overloading the backend."),this.Ho.qo()):n&&n.code===me.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.s_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Eo(n)}s_(){}auth(){this.state=1;const e=this.o_(this.Go),n=this.Go;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Go===n&&this.__(r,i)},r=>{e(()=>{const i=new Ce(me.UNKNOWN,"Fetching auth token failed: "+r.message);return this.a_(i)})})}__(e,n){const r=this.o_(this.Go);this.stream=this.u_(e,n),this.stream.Io(()=>{r(()=>(this.state=2,this.jo=this._i.enqueueAfterDelay(this.Wo,1e4,()=>(this.Yo()&&(this.state=3),Promise.resolve())),this.listener.Io()))}),this.stream.Eo(i=>{r(()=>this.a_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Zo(){this.state=5,this.Ho.Qo(async()=>{this.state=0,this.start()})}a_(e){return Ue("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}o_(e){return n=>{this._i.enqueueAndForget(()=>this.Go===e?n():(Ue("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ZS extends pb{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}u_(e,n){return this.connection.Mo("Listen",e,n)}onMessage(e){this.Ho.reset();const n=dS(this.serializer,e),r=function(s){if(!("targetChange"in s))return et.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?et.min():o.readTime?ai(o.readTime):et.min()}(e);return this.listener.c_(n,r)}l_(e){const n={};n.database=Vf(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=Df(l)?{documents:mS(s,l)}:{query:ab(s,l)},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=ib(s,o.resumeToken);const u=Nf(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(et.min())>0){a.readTime=Sc(s,o.snapshotVersion.toTimestamp());const u=Nf(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=_S(this.serializer,e);r&&(n.labels=r),this.n_(n)}h_(e){const n={};n.database=Vf(this.serializer),n.removeTarget=e,this.n_(n)}}class JS extends pb{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.P_=!1}get I_(){return this.P_}start(){this.P_=!1,this.lastStreamToken=void 0,super.start()}s_(){this.P_&&this.d_([])}u_(e,n){return this.connection.Mo("Write",e,n)}onMessage(e){if(zt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.P_){this.Ho.reset();const n=pS(e.writeResults,e.commitTime),r=ai(e.commitTime);return this.listener.T_(r,n)}return zt(!e.writeResults||e.writeResults.length===0),this.P_=!0,this.listener.E_()}A_(){const e={};e.database=Vf(this.serializer),this.n_(e)}d_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>fS(this.serializer,r))};this.n_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.R_=!1}V_(){if(this.R_)throw new Ce(me.FAILED_PRECONDITION,"The client has already been terminated.")}bo(e,n,r){return this.V_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.bo(e,n,r,i,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===me.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ce(me.UNKNOWN,i.toString())})}Fo(e,n,r,i){return this.V_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Fo(e,n,r,s,o,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===me.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ce(me.UNKNOWN,s.toString())})}terminate(){this.R_=!0}}async function tP(t,e,n){var r;const i=tt(t),{request:s,m_:o}=function(f,p,m){const b=ab(f,p),v={},I=[];let A=0;return m.forEach(x=>{const S="aggregate_"+A++;v[S]=x.alias,x.Ee==="count"?I.push({alias:S,count:{}}):x.Ee==="avg"?I.push({alias:S,avg:{field:Wi(x.fieldPath)}}):x.Ee==="sum"&&I.push({alias:S,sum:{field:Wi(x.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:I,structuredQuery:b.structuredQuery},parent:b.parent},m_:v}}(i.serializer,function(f){const p=tt(f);return p.de||(p.de=B0(p,f.explicitOrderBy)),p.de}(e),n),a=s.parent;i.connection.So||delete s.parent;const l=(await i.Fo("RunAggregationQuery",a,s,1)).filter(d=>!!d.result);zt(l.length===1);const u=(r=l[0].result)===null||r===void 0?void 0:r.aggregateFields;return Object.keys(u).reduce((d,f)=>(d[o[f]]=u[f],d),{})}class nP{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.f_=0,this.g_=null,this.p_=!0}y_(){this.f_===0&&(this.w_("Unknown"),this.g_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.g_=null,this.S_("Backend didn't respond within 10 seconds."),this.w_("Offline"),Promise.resolve())))}b_(e){this.state==="Online"?this.w_("Unknown"):(this.f_++,this.f_>=1&&(this.D_(),this.S_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.w_("Offline")))}set(e){this.D_(),this.f_=0,e==="Online"&&(this.p_=!1),this.w_(e)}w_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}S_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.p_?(xi(n),this.p_=!1):Ue("OnlineStateTracker",n)}D_(){this.g_!==null&&(this.g_.cancel(),this.g_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.C_=[],this.v_=new Map,this.F_=new Set,this.M_=[],this.x_=s,this.x_.so(o=>{r.enqueueAndForget(async()=>{no(this)&&(Ue("RemoteStore","Restarting streams for network reachability change."),await async function(l){const u=tt(l);u.F_.add(4),await Bl(u),u.O_.set("Unknown"),u.F_.delete(4),await Eh(u)}(this))})}),this.O_=new nP(r,i)}}async function Eh(t){if(no(t))for(const e of t.M_)await e(!0)}async function Bl(t){for(const e of t.M_)await e(!1)}function mb(t,e){const n=tt(t);n.v_.has(e.targetId)||(n.v_.set(e.targetId,e),dm(n)?hm(n):ca(n).Yo()&&cm(n,e))}function gb(t,e){const n=tt(t),r=ca(n);n.v_.delete(e),r.Yo()&&_b(n,e),n.v_.size===0&&(r.Yo()?r.e_():no(n)&&n.O_.set("Unknown"))}function cm(t,e){if(t.N_.Le(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(et.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ca(t).l_(e)}function _b(t,e){t.N_.Le(e),ca(t).h_(e)}function hm(t){t.N_=new sS({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>t.v_.get(e)||null,st:()=>t.datastore.serializer.databaseId}),ca(t).start(),t.O_.y_()}function dm(t){return no(t)&&!ca(t).Jo()&&t.v_.size>0}function no(t){return tt(t).F_.size===0}function wb(t){t.N_=void 0}async function iP(t){t.v_.forEach((e,n)=>{cm(t,e)})}async function sP(t,e){wb(t),dm(t)?(t.O_.b_(e),hm(t)):t.O_.set("Unknown")}async function oP(t,e,n){if(t.O_.set("Online"),e instanceof rb&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.v_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.v_.delete(a),i.N_.removeTarget(a))}(t,e)}catch(r){Ue("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Pc(t,r)}else if(e instanceof ec?t.N_.Ge(e):e instanceof nb?t.N_.Xe(e):t.N_.He(e),!n.isEqual(et.min()))try{const r=await db(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.N_._t(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const d=s.v_.get(u);d&&s.v_.set(u,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const d=s.v_.get(l);if(!d)return;s.v_.set(l,d.withResumeToken(Wn.EMPTY_BYTE_STRING,d.snapshotVersion)),_b(s,l);const f=new Gi(d.target,l,u,d.sequenceNumber);cm(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){Ue("RemoteStore","Failed to raise snapshot:",r),await Pc(t,r)}}async function Pc(t,e,n){if(!Ul(e))throw e;t.F_.add(1),await Bl(t),t.O_.set("Offline"),n||(n=()=>db(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Ue("RemoteStore","Retrying IndexedDB access"),await n(),t.F_.delete(1),await Eh(t)})}function vb(t,e){return e().catch(n=>Pc(t,n,e))}async function Th(t){const e=tt(t),n=ss(e);let r=e.C_.length>0?e.C_[e.C_.length-1].batchId:-1;for(;aP(e);)try{const i=await qS(e.localStore,r);if(i===null){e.C_.length===0&&n.e_();break}r=i.batchId,lP(e,i)}catch(i){await Pc(e,i)}yb(e)&&bb(e)}function aP(t){return no(t)&&t.C_.length<10}function lP(t,e){t.C_.push(e);const n=ss(t);n.Yo()&&n.I_&&n.d_(e.mutations)}function yb(t){return no(t)&&!ss(t).Jo()&&t.C_.length>0}function bb(t){ss(t).start()}async function uP(t){ss(t).A_()}async function cP(t){const e=ss(t);for(const n of t.C_)e.d_(n.mutations)}async function hP(t,e,n){const r=t.C_.shift(),i=im.from(r,e,n);await vb(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Th(t)}async function dP(t,e){e&&ss(t).I_&&await async function(r,i){if(function(o){return nS(o)&&o!==me.ABORTED}(i.code)){const s=r.C_.shift();ss(r).Xo(),await vb(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Th(r)}}(t,e),yb(t)&&bb(t)}async function lw(t,e){const n=tt(t);n.asyncQueue.verifyOperationInProgress(),Ue("RemoteStore","RemoteStore received new credentials");const r=no(n);n.F_.add(3),await Bl(n),r&&n.O_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.F_.delete(3),await Eh(n)}async function fP(t,e){const n=tt(t);e?(n.F_.delete(2),await Eh(n)):e||(n.F_.add(2),await Bl(n),n.O_.set("Unknown"))}function ca(t){return t.B_||(t.B_=function(n,r,i){const s=tt(n);return s.V_(),new ZS(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Io:iP.bind(null,t),Eo:sP.bind(null,t),c_:oP.bind(null,t)}),t.M_.push(async e=>{e?(t.B_.Xo(),dm(t)?hm(t):t.O_.set("Unknown")):(await t.B_.stop(),wb(t))})),t.B_}function ss(t){return t.L_||(t.L_=function(n,r,i){const s=tt(n);return s.V_(),new JS(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Io:uP.bind(null,t),Eo:dP.bind(null,t),E_:cP.bind(null,t),T_:hP.bind(null,t)}),t.M_.push(async e=>{e?(t.L_.Xo(),await Th(t)):(await t.L_.stop(),t.C_.length>0&&(Ue("RemoteStore",`Stopping write stream with ${t.C_.length} pending writes`),t.C_=[]))})),t.L_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new si,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new fm(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ce(me.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function pm(t,e){if(xi("AsyncQueue",`${e}: ${t}`),Ul(t))return new Ce(me.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Be.comparator(n.key,r.key):(n,r)=>Be.comparator(n.key,r.key),this.keyedMap=Oa(),this.sortedSet=new en(this.comparator)}static emptySet(e){return new Fo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Fo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Fo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw{constructor(){this.k_=new en(Be.comparator)}track(e){const n=e.doc.key,r=this.k_.get(n);r?e.type!==0&&r.type===3?this.k_=this.k_.insert(n,e):e.type===3&&r.type!==1?this.k_=this.k_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.k_=this.k_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.k_=this.k_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.k_=this.k_.remove(n):e.type===1&&r.type===2?this.k_=this.k_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.k_=this.k_.insert(n,{type:2,doc:e.doc}):Xe():this.k_=this.k_.insert(n,e)}q_(){const e=[];return this.k_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Jo{constructor(e,n,r,i,s,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Jo(e,n,Fo.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&_h(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pP{constructor(){this.Q_=void 0,this.listeners=[]}}class mP{constructor(){this.queries=new ua(e=>z0(e),_h),this.onlineState="Unknown",this.K_=new Set}}async function kb(t,e){const n=tt(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new pP),i)try{s.Q_=await n.onListen(r)}catch(o){const a=pm(o,`Initialization of query '${Eo(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.listeners.push(e),e.U_(n.onlineState),s.Q_&&e.W_(s.Q_)&&mm(n)}async function Eb(t,e){const n=tt(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=s.listeners.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function gP(t,e){const n=tt(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.listeners)a.W_(i)&&(r=!0);o.Q_=i}}r&&mm(n)}function _P(t,e,n){const r=tt(t),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(e)}function mm(t){t.K_.forEach(e=>{e.next()})}class Tb{constructor(e,n,r){this.query=e,this.G_=n,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=r||{}}W_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Jo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.z_?this.H_(e)&&(this.G_.next(e),n=!0):this.J_(e,this.onlineState)&&(this.Y_(e),n=!0),this.j_=e,n}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let n=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),n=!0),n}J_(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.Z_||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}H_(e){if(e.docChanges.length>0)return!0;const n=this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Y_(e){e=Jo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib{constructor(e){this.key=e}}class Ab{constructor(e){this.key=e}}class wP{constructor(e,n){this.query=e,this.oa=n,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=mt(),this.mutatedKeys=mt(),this.ua=j0(e),this.ca=new Fo(this.ua)}get la(){return this.oa}ha(e,n){const r=n?n.Pa:new uw,i=n?n.ca:this.ca;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{const p=i.get(d),m=wh(this.query,f)?f:null,b=!!p&&this.mutatedKeys.has(p.key),v=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let I=!1;p&&m?p.data.isEqual(m.data)?b!==v&&(r.track({type:3,doc:m}),I=!0):this.Ia(p,m)||(r.track({type:2,doc:m}),I=!0,(l&&this.ua(m,l)>0||u&&this.ua(m,u)<0)&&(a=!0)):!p&&m?(r.track({type:0,doc:m}),I=!0):p&&!m&&(r.track({type:1,doc:p}),I=!0,(l||u)&&(a=!0)),I&&(m?(o=o.add(m),s=v?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{ca:o,Pa:r,es:a,mutatedKeys:s}}Ia(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const i=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;const s=e.Pa.q_();s.sort((u,d)=>function(p,m){const b=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Xe()}};return b(p)-b(m)}(u.type,d.type)||this.ua(u.doc,d.doc)),this.da(r);const o=n?this.Ta():[],a=this.aa.size===0&&this.current?1:0,l=a!==this._a;return this._a=a,s.length!==0||l?{snapshot:new Jo(this.query,e.ca,i,s,e.mutatedKeys,a===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ea:o}:{Ea:o}}U_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new uw,mutatedKeys:this.mutatedKeys,es:!1},!1)):{Ea:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}da(e){e&&(e.addedDocuments.forEach(n=>this.oa=this.oa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.oa=this.oa.delete(n)),this.current=e.current)}Ta(){if(!this.current)return[];const e=this.aa;this.aa=mt(),this.ca.forEach(r=>{this.Aa(r.key)&&(this.aa=this.aa.add(r.key))});const n=[];return e.forEach(r=>{this.aa.has(r)||n.push(new Ab(r))}),this.aa.forEach(r=>{e.has(r)||n.push(new Ib(r))}),n}Ra(e){this.oa=e.Ps,this.aa=mt();const n=this.ha(e.documents);return this.applyChanges(n,!0)}Va(){return Jo.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,this._a===0,this.hasCachedResults)}}class vP{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class yP{constructor(e){this.key=e,this.ma=!1}}class bP{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.fa={},this.ga=new ua(a=>z0(a),_h),this.pa=new Map,this.ya=new Set,this.wa=new en(Be.comparator),this.Sa=new Map,this.ba=new am,this.Da={},this.Ca=new Map,this.va=Zo.Ln(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return this.Fa===!0}}async function kP(t,e){const n=DP(t);let r,i;const s=n.ga.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Va();else{const o=await HS(n.localStore,oi(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=await EP(n,e,r,a==="current",o.resumeToken),n.isPrimaryClient&&mb(n.remoteStore,o)}return i}async function EP(t,e,n,r,i){t.Ma=(f,p,m)=>async function(v,I,A,x){let S=I.view.ha(A);S.es&&(S=await sw(v.localStore,I.query,!1).then(({documents:X})=>I.view.ha(X,S)));const D=x&&x.targetChanges.get(I.targetId),B=I.view.applyChanges(S,v.isPrimaryClient,D);return hw(v,I.targetId,B.Ea),B.snapshot}(t,f,p,m);const s=await sw(t.localStore,e,!0),o=new wP(e,s.Ps),a=o.ha(s.documents),l=$l.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,l);hw(t,n,u.Ea);const d=new vP(e,n,o);return t.ga.set(e,d),t.pa.has(n)?t.pa.get(n).push(e):t.pa.set(n,[e]),u.snapshot}async function TP(t,e){const n=tt(t),r=n.ga.get(e),i=n.pa.get(r.targetId);if(i.length>1)return n.pa.set(r.targetId,i.filter(s=>!_h(s,e))),void n.ga.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Uf(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),gb(n.remoteStore,r.targetId),Ff(n,r.targetId)}).catch(Vl)):(Ff(n,r.targetId),await Uf(n.localStore,r.targetId,!0))}async function IP(t,e,n){const r=OP(t);try{const i=await function(o,a){const l=tt(o),u=nt.now(),d=a.reduce((m,b)=>m.add(b.key),mt());let f,p;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let b=Ci(),v=mt();return l._s.getEntries(m,d).next(I=>{b=I,b.forEach((A,x)=>{x.isValidDocument()||(v=v.add(A))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,b)).next(I=>{f=I;const A=[];for(const x of a){const S=YR(x,f.get(x.key).overlayedDocument);S!=null&&A.push(new cs(x.key,S,N0(S.value.mapValue),yr.exists(!0)))}return l.mutationQueue.addMutationBatch(m,u,A,a)}).next(I=>{p=I;const A=I.applyToLocalDocumentSet(f,v);return l.documentOverlayCache.saveOverlays(m,I.batchId,A)})}).then(()=>({batchId:p.batchId,changes:H0(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let u=o.Da[o.currentUser.toKey()];u||(u=new en(Tt)),u=u.insert(a,l),o.Da[o.currentUser.toKey()]=u}(r,i.batchId,n),await zl(r,i.changes),await Th(r.remoteStore)}catch(i){const s=pm(i,"Failed to persist write");n.reject(s)}}async function xb(t,e){const n=tt(t);try{const r=await zS(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Sa.get(s);o&&(zt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.ma=!0:i.modifiedDocuments.size>0?zt(o.ma):i.removedDocuments.size>0&&(zt(o.ma),o.ma=!1))}),await zl(n,r,e)}catch(r){await Vl(r)}}function cw(t,e,n){const r=tt(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.ga.forEach((s,o)=>{const a=o.view.U_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=tt(o);l.onlineState=a;let u=!1;l.queries.forEach((d,f)=>{for(const p of f.listeners)p.U_(a)&&(u=!0)}),u&&mm(l)}(r.eventManager,e),i.length&&r.fa.c_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function AP(t,e,n){const r=tt(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Sa.get(e),s=i&&i.key;if(s){let o=new en(Be.comparator);o=o.insert(s,Vn.newNoDocument(s,et.min()));const a=mt().add(s),l=new bh(et.min(),new Map,new en(Tt),o,a);await xb(r,l),r.wa=r.wa.remove(s),r.Sa.delete(e),gm(r)}else await Uf(r.localStore,e,!1).then(()=>Ff(r,e,n)).catch(Vl)}async function xP(t,e){const n=tt(t),r=e.batch.batchId;try{const i=await BS(n.localStore,e);Rb(n,r,null),Cb(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await zl(n,i)}catch(i){await Vl(i)}}async function CP(t,e,n){const r=tt(t);try{const i=await function(o,a){const l=tt(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return l.mutationQueue.lookupMutationBatch(u,a).next(f=>(zt(f!==null),d=f.keys(),l.mutationQueue.removeMutationBatch(u,f))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>l.localDocuments.getDocuments(u,d))})}(r.localStore,e);Rb(r,e,n),Cb(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await zl(r,i)}catch(i){await Vl(i)}}function Cb(t,e){(t.Ca.get(e)||[]).forEach(n=>{n.resolve()}),t.Ca.delete(e)}function Rb(t,e,n){const r=tt(t);let i=r.Da[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Da[r.currentUser.toKey()]=i}}function Ff(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.pa.get(e))t.ga.delete(r),n&&t.fa.xa(r,n);t.pa.delete(e),t.isPrimaryClient&&t.ba.mr(e).forEach(r=>{t.ba.containsKey(r)||Sb(t,r)})}function Sb(t,e){t.ya.delete(e.path.canonicalString());const n=t.wa.get(e);n!==null&&(gb(t.remoteStore,n),t.wa=t.wa.remove(e),t.Sa.delete(n),gm(t))}function hw(t,e,n){for(const r of n)r instanceof Ib?(t.ba.addReference(r.key,e),RP(t,r)):r instanceof Ab?(Ue("SyncEngine","Document no longer in limbo: "+r.key),t.ba.removeReference(r.key,e),t.ba.containsKey(r.key)||Sb(t,r.key)):Xe()}function RP(t,e){const n=e.key,r=n.path.canonicalString();t.wa.get(n)||t.ya.has(r)||(Ue("SyncEngine","New document in limbo: "+n),t.ya.add(r),gm(t))}function gm(t){for(;t.ya.size>0&&t.wa.size<t.maxConcurrentLimboResolutions;){const e=t.ya.values().next().value;t.ya.delete(e);const n=new Be(Bt.fromString(e)),r=t.va.next();t.Sa.set(r,new yP(n)),t.wa=t.wa.insert(n,r),mb(t.remoteStore,new Gi(oi(em(n.path)),r,"TargetPurposeLimboResolution",Qp.ae))}}async function zl(t,e,n){const r=tt(t),i=[],s=[],o=[];r.ga.isEmpty()||(r.ga.forEach((a,l)=>{o.push(r.Ma(l,e,n).then(u=>{if((u||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,u!=null&&u.fromCache?"not-current":"current"),u){i.push(u);const d=um.$i(l.targetId,u);s.push(d)}}))}),await Promise.all(o),r.fa.c_(i),await async function(l,u){const d=tt(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>ke.forEach(u,p=>ke.forEach(p.Qi,m=>d.persistence.referenceDelegate.addReference(f,p.targetId,m)).next(()=>ke.forEach(p.Ki,m=>d.persistence.referenceDelegate.removeReference(f,p.targetId,m)))))}catch(f){if(!Ul(f))throw f;Ue("LocalStore","Failed to update sequence numbers: "+f)}for(const f of u){const p=f.targetId;if(!f.fromCache){const m=d.rs.get(p),b=m.snapshotVersion,v=m.withLastLimboFreeSnapshotVersion(b);d.rs=d.rs.insert(p,v)}}}(r.localStore,s))}async function SP(t,e){const n=tt(t);if(!n.currentUser.isEqual(e)){Ue("SyncEngine","User change. New user:",e.toKey());const r=await hb(n.localStore,e);n.currentUser=e,function(s,o){s.Ca.forEach(a=>{a.forEach(l=>{l.reject(new Ce(me.CANCELLED,o))})}),s.Ca.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await zl(n,r.cs)}}function PP(t,e){const n=tt(t),r=n.Sa.get(e);if(r&&r.ma)return mt().add(r.key);{let i=mt();const s=n.pa.get(e);if(!s)return i;for(const o of s){const a=n.ga.get(o);i=i.unionWith(a.view.la)}return i}}function DP(t){const e=tt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=xb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=PP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=AP.bind(null,e),e.fa.c_=gP.bind(null,e.eventManager),e.fa.xa=_P.bind(null,e.eventManager),e}function OP(t){const e=tt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=xP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=CP.bind(null,e),e}class dw{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=kh(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return $S(this.persistence,new US,e.initialUser,this.serializer)}createPersistence(e){return new LS(lm.Jr,this.serializer)}createSharedClientState(e){return new KS}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class NP{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>cw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=SP.bind(null,this.syncEngine),await fP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new mP}()}createDatastore(e){const n=kh(e.databaseInfo.databaseId),r=function(s){return new XS(s)}(e.databaseInfo);return function(s,o,a,l){return new eP(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new rP(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>cw(this.syncEngine,n,0),function(){return aw.C()?new aw:new GS}())}createSyncEngine(e,n){return function(i,s,o,a,l,u,d){const f=new bP(i,s,o,a,l,u);return d&&(f.Fa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(n){const r=tt(n);Ue("RemoteStore","RemoteStore shutting down."),r.F_.add(5),await Bl(r),r.x_.shutdown(),r.O_.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):xi("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LP{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Mn.UNAUTHENTICATED,this.clientId=P0.V(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{Ue("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(Ue("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ce(me.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new si;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=pm(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Md(t,e){t.asyncQueue.verifyOperationInProgress(),Ue("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await hb(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function fw(t,e){t.asyncQueue.verifyOperationInProgress();const n=await VP(t);Ue("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(i=>lw(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>lw(e.remoteStore,s)),t._onlineComponents=e}function MP(t){return t.name==="FirebaseError"?t.code===me.FAILED_PRECONDITION||t.code===me.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function VP(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ue("FirestoreClient","Using user provided OfflineComponentProvider");try{await Md(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!MP(n))throw n;Ko("Error using user provided cache. Falling back to memory cache: "+n),await Md(t,new dw)}}else Ue("FirestoreClient","Using default OfflineComponentProvider"),await Md(t,new dw);return t._offlineComponents}async function _m(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ue("FirestoreClient","Using user provided OnlineComponentProvider"),await fw(t,t._uninitializedComponentsProvider._online)):(Ue("FirestoreClient","Using default OnlineComponentProvider"),await fw(t,new NP))),t._onlineComponents}function UP(t){return _m(t).then(e=>e.syncEngine)}function FP(t){return _m(t).then(e=>e.datastore)}async function Db(t){const e=await _m(t),n=e.eventManager;return n.onListen=kP.bind(null,e.syncEngine),n.onUnlisten=TP.bind(null,e.syncEngine),n}function $P(t,e,n={}){const r=new si;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const d=new Pb({next:p=>{o.enqueueAndForget(()=>Eb(s,f));const m=p.docs.has(a);!m&&p.fromCache?u.reject(new Ce(me.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&p.fromCache&&l&&l.source==="server"?u.reject(new Ce(me.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(p)},error:p=>u.reject(p)}),f=new Tb(em(a.path),d,{includeMetadataChanges:!0,Z_:!0});return kb(s,f)}(await Db(t),t.asyncQueue,e,n,r)),r.promise}function BP(t,e,n={}){const r=new si;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const d=new Pb({next:p=>{o.enqueueAndForget(()=>Eb(s,f)),p.fromCache&&l.source==="server"?u.reject(new Ce(me.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(p)},error:p=>u.reject(p)}),f=new Tb(a,d,{includeMetadataChanges:!0,Z_:!0});return kb(s,f)}(await Db(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ob(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nb(t,e,n){if(!n)throw new Ce(me.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function zP(t,e,n,r){if(e===!0&&r===!0)throw new Ce(me.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function mw(t){if(!Be.isDocumentKey(t))throw new Ce(me.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function gw(t){if(Be.isDocumentKey(t))throw new Ce(me.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Ih(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Xe()}function br(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ce(me.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ih(t);throw new Ce(me.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function jP(t,e){if(e<=0)throw new Ce(me.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Ce(me.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Ce(me.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}zP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ob((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Ce(me.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Ce(me.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Ce(me.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ah{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _w({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ce(me.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new Ce(me.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _w(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new lR;switch(r.type){case"firstParty":return new dR(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ce(me.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=pw.get(n);r&&(Ue("ComponentProvider","Removing Datastore"),pw.delete(n),r.terminate())}(this),Promise.resolve()}}function qP(t,e,n,r={}){var i;const s=(t=br(t,Ah))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Ko("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=Mn.MOCK_USER;else{a=zv(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new Ce(me.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Mn(u)}t._authCredentials=new uR(new S0(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Pi(this.firestore,e,this._query)}}class Zn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ji(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Zn(this.firestore,e,this._key)}}class Ji extends Pi{constructor(e,n,r){super(e,n,em(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Zn(this.firestore,null,new Be(e))}withConverter(e){return new Ji(this.firestore,e,this._path)}}function Lt(t,e,...n){if(t=Vt(t),Nb("collection","path",e),t instanceof Ah){const r=Bt.fromString(e,...n);return gw(r),new Ji(t,null,r)}{if(!(t instanceof Zn||t instanceof Ji))throw new Ce(me.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Bt.fromString(e,...n));return gw(r),new Ji(t.firestore,null,r)}}function ct(t,e,...n){if(t=Vt(t),arguments.length===1&&(e=P0.V()),Nb("doc","path",e),t instanceof Ah){const r=Bt.fromString(e,...n);return mw(r),new Zn(t,null,new Be(r))}{if(!(t instanceof Zn||t instanceof Ji))throw new Ce(me.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Bt.fromString(e,...n));return mw(r),new Zn(t.firestore,t instanceof Ji?t.converter:null,new Be(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HP{constructor(){this.Za=Promise.resolve(),this.Xa=[],this.eu=!1,this.tu=[],this.nu=null,this.ru=!1,this.iu=!1,this.su=[],this.Ho=new fb(this,"async_queue_retry"),this.ou=()=>{const n=Ld();n&&Ue("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Ho.$o()};const e=Ld();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.ou)}get isShuttingDown(){return this.eu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this._u(),this.au(e)}enterRestrictedMode(e){if(!this.eu){this.eu=!0,this.iu=e||!1;const n=Ld();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.ou)}}enqueue(e){if(this._u(),this.eu)return new Promise(()=>{});const n=new si;return this.au(()=>this.eu&&this.iu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xa.push(e),this.uu()))}async uu(){if(this.Xa.length!==0){try{await this.Xa[0](),this.Xa.shift(),this.Ho.reset()}catch(e){if(!Ul(e))throw e;Ue("AsyncQueue","Operation failed with retryable error: "+e)}this.Xa.length>0&&this.Ho.Qo(()=>this.uu())}}au(e){const n=this.Za.then(()=>(this.ru=!0,e().catch(r=>{this.nu=r,this.ru=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw xi("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.ru=!1,r))));return this.Za=n,n}enqueueAfterDelay(e,n,r){this._u(),this.su.indexOf(e)>-1&&(n=0);const i=fm.createAndSchedule(this,e,n,r,s=>this.cu(s));return this.tu.push(i),i}_u(){this.nu&&Xe()}verifyOperationInProgress(){}async lu(){let e;do e=this.Za,await e;while(e!==this.Za)}hu(e){for(const n of this.tu)if(n.timerId===e)return!0;return!1}Pu(e){return this.lu().then(()=>{this.tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.lu()})}Iu(e){this.su.push(e)}cu(e){const n=this.tu.indexOf(e);this.tu.splice(n,1)}}class hs extends Ah{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new HP}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Lb(this),this._firestoreClient.terminate()}}function WP(t,e){const n=typeof t=="object"?t:gp(),r=typeof t=="string"?t:e||"(default)",i=Gc(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=Fv("firestore");s&&qP(i,...s)}return i}function xh(t){return t._firestoreClient||Lb(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Lb(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,u,d){return new TR(a,l,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,Ob(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new LP(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(e="count",n){this._aggregateType=e,this._internalFieldPath=n,this.type="AggregateField"}}class GP{constructor(e,n,r){this._userDataWriter=n,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ea(Wn.fromBase64String(e))}catch(n){throw new Ce(me.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ea(Wn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ce(me.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $n(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ce(me.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ce(me.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Tt(this._lat,e._lat)||Tt(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QP=/^__.*__$/;class YP{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new cs(e,this.data,this.fieldMask,n,this.fieldTransforms):new Fl(e,this.data,n,this.fieldTransforms)}}class Mb{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new cs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Vb(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Xe()}}class ym{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.du(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Tu(){return this.settings.Tu}Eu(e){return new ym(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Au(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Eu({path:r,Ru:!1});return i.Vu(e),i}mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Eu({path:r,Ru:!1});return i.du(),i}fu(e){return this.Eu({path:void 0,Ru:!0})}gu(e){return Dc(e,this.settings.methodName,this.settings.pu||!1,this.path,this.settings.yu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}du(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vu(this.path.get(e))}Vu(e){if(e.length===0)throw this.gu("Document fields must not be empty");if(Vb(this.Tu)&&QP.test(e))throw this.gu('Document fields cannot begin and end with "__"')}}class XP{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||kh(e)}wu(e,n,r,i=!1){return new ym({Tu:e,methodName:n,yu:r,path:$n.emptyPath(),Ru:!1,pu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function jl(t){const e=t._freezeSettings(),n=kh(t._databaseId);return new XP(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Ub(t,e,n,r,i,s={}){const o=t.wu(s.merge||s.mergeFields?2:0,e,n,i);bm("Data must be an object, but it was:",o,r);const a=$b(r,o);let l,u;if(s.merge)l=new hr(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const d=[];for(const f of s.mergeFields){const p=$f(e,f,n);if(!o.contains(p))throw new Ce(me.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);zb(d,p)||d.push(p)}l=new hr(d),u=o.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,u=o.fieldTransforms;return new YP(new or(a),l,u)}class Rh extends wm{_toFieldTransform(e){if(e.Tu!==2)throw e.Tu===1?e.gu(`${this._methodName}() can only appear at the top level of your update data`):e.gu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Rh}}function ZP(t,e,n,r){const i=t.wu(1,e,n);bm("Data must be an object, but it was:",i,r);const s=[],o=or.empty();eo(r,(l,u)=>{const d=km(e,l,n);u=Vt(u);const f=i.mu(d);if(u instanceof Rh)s.push(d);else{const p=ql(u,f);p!=null&&(s.push(d),o.set(d,p))}});const a=new hr(s);return new Mb(o,a,i.fieldTransforms)}function JP(t,e,n,r,i,s){const o=t.wu(1,e,n),a=[$f(e,r,n)],l=[i];if(s.length%2!=0)throw new Ce(me.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)a.push($f(e,s[p])),l.push(s[p+1]);const u=[],d=or.empty();for(let p=a.length-1;p>=0;--p)if(!zb(u,a[p])){const m=a[p];let b=l[p];b=Vt(b);const v=o.mu(m);if(b instanceof Rh)u.push(m);else{const I=ql(b,v);I!=null&&(u.push(m),d.set(m,I))}}const f=new hr(u);return new Mb(d,f,o.fieldTransforms)}function Fb(t,e,n,r=!1){return ql(n,t.wu(r?4:3,e))}function ql(t,e){if(Bb(t=Vt(t)))return bm("Unsupported field value:",e,t),$b(t,e);if(t instanceof wm)return function(r,i){if(!Vb(i.Tu))throw i.gu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.gu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Ru&&e.Tu!==4)throw e.gu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=ql(a,i.fu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Vt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return qR(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=nt.fromDate(r);return{timestampValue:Sc(i.serializer,s)}}if(r instanceof nt){const s=new nt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Sc(i.serializer,s)}}if(r instanceof vm)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ea)return{bytesValue:ib(i.serializer,r._byteString)};if(r instanceof Zn){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.gu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:om(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.gu(`Unsupported field value: ${Ih(r)}`)}(t,e)}function $b(t,e){const n={};return D0(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):eo(t,(r,i)=>{const s=ql(i,e.Au(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function Bb(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof nt||t instanceof vm||t instanceof ea||t instanceof Zn||t instanceof wm)}function bm(t,e,n){if(!Bb(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Ih(n);throw r==="an object"?e.gu(t+" a custom object"):e.gu(t+" "+r)}}function $f(t,e,n){if((e=Vt(e))instanceof Ch)return e._internalPath;if(typeof e=="string")return km(t,e);throw Dc("Field path arguments must be of type string or ",t,!1,void 0,n)}const eD=new RegExp("[~\\*/\\[\\]]");function km(t,e,n){if(e.search(eD)>=0)throw Dc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ch(...e.split("."))._internalPath}catch{throw Dc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Dc(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new Ce(me.INVALID_ARGUMENT,a+t+l)}function zb(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Zn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new tD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Sh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class tD extends Em{data(){return super.data()}}function Sh(t,e){return typeof e=="string"?km(t,e):e instanceof Ch?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nD(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Ce(me.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Tm{}class Ph extends Tm{}function wr(t,e,...n){let r=[];e instanceof Tm&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof Im).length,a=s.filter(l=>l instanceof Dh).length;if(o>1||o>0&&a>0)throw new Ce(me.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Dh extends Ph{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Dh(e,n,r)}_apply(e){const n=this._parse(e);return jb(e._query,n),new Pi(e.firestore,e.converter,Of(e._query,n))}_parse(e){const n=jl(e.firestore);return function(s,o,a,l,u,d,f){let p;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Ce(me.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){yw(f,d);const m=[];for(const b of f)m.push(vw(l,s,b));p={arrayValue:{values:m}}}else p=vw(l,s,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||yw(f,d),p=Fb(a,o,f,d==="in"||d==="not-in");return wn.create(u,d,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function kn(t,e,n){const r=e,i=Sh("where",t);return Dh._create(i,r,n)}class Im extends Tm{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Im(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Mr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)jb(o,l),o=Of(o,l)}(e._query,n),new Pi(e.firestore,e.converter,Of(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Am extends Ph{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Am(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new Ce(me.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Ce(me.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const a=new Vo(s,o);return function(u,d){if(tm(u)===null){const f=gh(u);f!==null&&qb(u,f,d.field)}}(i,a),a}(e._query,this._field,this._direction);return new Pi(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new to(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function Io(t,e="asc"){const n=e,r=Sh("orderBy",t);return Am._create(r,n)}class xm extends Ph{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new xm(e,n,r)}_apply(e){return new Pi(e.firestore,e.converter,xc(e._query,this._limit,this._limitType))}}function Ao(t){return jP("limit",t),xm._create("limit",t,"F")}class Cm extends Ph{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Cm(e,n,r)}_apply(e){const n=rD(e,this.type,this._docOrFields,this._inclusive);return new Pi(e.firestore,e.converter,function(i,s){return new to(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,n))}}function ww(...t){return Cm._create("startAfter",t,!1)}function rD(t,e,n,r){if(n[0]=Vt(n[0]),n[0]instanceof Em)return function(s,o,a,l,u){if(!l)throw new Ce(me.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const d=[];for(const f of Uo(s))if(f.field.isKeyField())d.push(Ac(o,l.key));else{const p=l.data.field(f.field);if(mh(p))throw new Ce(me.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(p===null){const m=f.field.canonicalString();throw new Ce(me.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${m}' (used as the orderBy) does not exist.`)}d.push(p)}return new Xo(d,u)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=jl(t.firestore);return function(o,a,l,u,d,f){const p=o.explicitOrderBy;if(d.length>p.length)throw new Ce(me.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const m=[];for(let b=0;b<d.length;b++){const v=d[b];if(p[b].field.isKeyField()){if(typeof v!="string")throw new Ce(me.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof v}`);if(!nm(o)&&v.indexOf("/")!==-1)throw new Ce(me.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${v}' contains a slash.`);const I=o.path.child(Bt.fromString(v));if(!Be.isDocumentKey(I))throw new Ce(me.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${I}' is not because it contains an odd number of segments.`);const A=new Be(I);m.push(Ac(a,A))}else{const I=Fb(l,u,v);m.push(I)}}return new Xo(m,f)}(t._query,t.firestore._databaseId,i,e,n,r)}}function vw(t,e,n){if(typeof(n=Vt(n))=="string"){if(n==="")throw new Ce(me.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!nm(e)&&n.indexOf("/")!==-1)throw new Ce(me.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Bt.fromString(n));if(!Be.isDocumentKey(r))throw new Ce(me.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ac(t,new Be(r))}if(n instanceof Zn)return Ac(t,n._key);throw new Ce(me.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ih(n)}.`)}function yw(t,e){if(!Array.isArray(t)||t.length===0)throw new Ce(me.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function jb(t,e){if(e.isInequality()){const r=gh(t),i=e.field;if(r!==null&&!r.isEqual(i))throw new Ce(me.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const s=tm(t);s!==null&&qb(t,i,s)}const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Ce(me.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ce(me.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function qb(t,e,n){if(!n.isEqual(e))throw new Ce(me.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class iD{convertValue(e,n="none"){switch(Gs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _n(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ks(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw Xe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return eo(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new vm(_n(e.latitude),_n(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Yp(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(fl(e));default:return null}}convertTimestamp(e){const n=is(e);return new nt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Bt.fromString(e);zt(cb(r));const i=new pl(r.get(1),r.get(3)),s=new Be(r.popFirst(5));return i.isEqual(n)||xi(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hb(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}function sD(){return new KP("count")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Wb extends Em{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new tc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Sh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class tc extends Wb{data(e={}){return super.data(e)}}class oD{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new La(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new tc(this._firestore,this._userDataWriter,r.key,r,new La(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ce(me.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new tc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new La(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new tc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new La(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,d=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:aD(a.type),doc:l,oldIndex:u,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function aD(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Xe()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qs(t){t=br(t,Zn);const e=br(t.firestore,hs);return $P(xh(e),t._key).then(n=>uD(e,t,n))}class Rm extends iD{constructor(e){super(),this.firestore=e}convertBytes(e){return new ea(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Zn(this.firestore,null,n)}}function Yr(t){t=br(t,Pi);const e=br(t.firestore,hs),n=xh(e),r=new Rm(e);return nD(t._query),BP(n,t._query).then(i=>new oD(e,r,t,i))}function lD(t,e,n){t=br(t,Zn);const r=br(t.firestore,hs),i=Hb(t.converter,e,n);return Oh(r,[Ub(jl(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,yr.none())])}function $t(t,e,n,...r){t=br(t,Zn);const i=br(t.firestore,hs),s=jl(i);let o;return o=typeof(e=Vt(e))=="string"||e instanceof Ch?JP(s,"updateDoc",t._key,e,n,r):ZP(s,"updateDoc",t._key,e),Oh(i,[o.toMutation(t._key,yr.exists(!0))])}function Sm(t){return Oh(br(t.firestore,hs),[new rm(t._key,yr.none())])}function li(t,e){const n=br(t.firestore,hs),r=ct(t),i=Hb(t.converter,e);return Oh(n,[Ub(jl(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,yr.exists(!1))]).then(()=>r)}function Oh(t,e){return function(r,i){const s=new si;return r.asyncQueue.enqueueAndForget(async()=>IP(await UP(r),i,s)),s.promise}(xh(t),e)}function uD(t,e,n){const r=n.docs.get(e._key),i=new Rm(t);return new Wb(t,i,e._key,r,new La(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vs(t){return cD(t,{count:sD()})}function cD(t,e){const n=br(t.firestore,hs),r=xh(n),i=function(o,a){const l=[];for(const u in o)Object.prototype.hasOwnProperty.call(o,u)&&l.push(a(o[u],u,o));return l}(e,(s,o)=>new eS(o,s._aggregateType,s._internalFieldPath));return function(o,a,l){const u=new si;return o.asyncQueue.enqueueAndForget(async()=>{try{const d=await FP(o);u.resolve(tP(d,a,l))}catch(d){u.reject(d)}}),u.promise}(r,t._query,i).then(s=>function(a,l,u){const d=new Rm(a);return new GP(l,d,u)}(n,t,s))}(function(e,n=!0){(function(i){la=i})(Zs),zs(new ns("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new hs(new cR(r.getProvider("auth-internal")),new pR(r.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Ce(me.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new pl(u.options.projectId,d)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),ni(F_,"4.2.0",e),ni(F_,"4.2.0","esm2017")})();const hD={class:"fixed bottom-0 left-0 right-0 top-0 z-50 bg-gray-600 bg-opacity-50"},dD={class:"fixed left-1/2 top-0 max-h-screen w-[100vw] -translate-x-1/2 overflow-auto rounded-md bg-gradient-to-br from-orange-600 to-green-400 px-3 py-10 text-center text-xl shadow-lg shadow-black"},fD=N("p",{class:"text-3xl"},"GUIDE",-1),pD={class:"text-sm"},mD=Pv('<div class="mt-5"><p class="mb-1 text-2xl">Adding Decks and Cards</p><p> Pressing the &#39;New Deck&#39; button initiates the deck creation menu, where you can specify three parameters: the deck name, the &#39;new cards per day&#39;, and whether the deck utilizes large cards.Opting for &#39;Large Cards&#39; allows for the inclusion of multiline text, HTML components, and Markdown formatting. To use Markdown, simply initiate the field with either &#39;[markdown]&#39; or &#39;[md]&#39; on the first line, with no additional text. When adding regular cards, accelerate the process by pressing &#39;Enter&#39; in the back field to add the card. Selecting for &#39;Create Reversed&#39; generates a mirrored card with swapped front and back values. Selecting &#39;Type Answer&#39; mandates inputting the back value during reviews. If &#39;Type Answer&#39; is chosen, any content within square brackets &#39;[]&#39; is ignored and doesn&#39;t need to be imputed (avoid using this with HTML or Markdown). </p></div><div class="mt-5"><p class="text-2xl">Reviews</p><p> Pressing the &#39;Review&#39; button will start the review. The number of reviews available for the day is shown above the &#39;Review&#39; button. During the review process, attempt to recall the answer on the other side of the card. Click the card or press the &#39;space bar&#39; to reveal the answer. If your answer is correct, click the &#39;correct&#39; button (blue) or press the &#39;space bar&#39;. If your answer is incorrect, click the &#39;wrong&#39; button (red) or press the &#39;c&#39; key. For &#39;type answer&#39; cards, input your response and press &#39;enter&#39; or click the &#39;Check&#39; button to reveal the correct answer. To continue, click the card or press either &#39;enter&#39; or &#39;space bar&#39;. Repeat this process until you&#39;ve reviewed all cards and the panel closes. Remember to return the next day for more reviews. Consistently answering correctly will reduce the frequency of seeing a card, while getting a wrong answer will reset its streak. </p></div><div class="mt-5"><p class="text-2xl">Settings</p><p> To access the settings, simply tap on your username. Card review dates are determined by the formula: &#39;today + ((time_multiplier^success_streak) * time_duration)&#39;. Customize your experience by adjusting the time_multiplier in the settings. Note that modifying the time_duration is currently not supported. Additionally, you can modify your username, update your email, or change your password. The default settings are 1.5 for the time_multiplier and 24 hours for the time_duration. </p></div><div class="mt-5"><p class="text-2xl">Editing and Deleting Cards and Decks</p><p> When you double-click on a deck, a variety of options become accessible, empowering you to make changes to both the overall deck and its individual cards. Additionally, card details such as card streaks and next review dates are easily visible. Furthermore, you can fine-tune settings such as the new cards per day and the use of large cards. </p></div><div class="mt-5"><p class="text-2xl">Searching Cards</p><p> When searching, your query will be matched from the beginning of the card&#39;s field. The search is case-sensitive. Additionally, you can utilize the following options: </p><ul class="ml-5 list-disc"><li> Use &#39;f&#39; or &#39;field&#39; to specify the field to search [f:f, f:front, f:b, f:back]. </li></ul></div><div class="mt-5"><p class="text-2xl">Notes</p><p> This app stores your data in Google&#39;s Firebase. All decks, cards and settings are synced between devices. The app works on both desktop and mobile. </p></div>',6),gD={__name:"Guide",props:["appVersion"],emits:["close","showChangelog"],setup(t,{emit:e}){return(n,r)=>(xe(),Pe("div",hD,[N("div",dD,[N("button",{onClick:r[0]||(r[0]=i=>n.$emit("close")),class:"mb-5 rounded-md bg-gray-500 p-2 shadow shadow-black"}," Close "),fD,N("p",pD,"App version: "+bt(t.appVersion),1),N("button",{onClick:r[1]||(r[1]=i=>n.$emit("showChangelog")),class:"rounded-md bg-green-800 p-2"}," Changelog "),mD])]))}},Pm=""+new URL("cancel-58c7ea43.svg",import.meta.url).href;var Tn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Nh(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function _D(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var Kb={exports:{}};/*!
* sweetalert2 v11.10.6
* Released under the MIT License.
*/(function(t,e){(function(n,r){t.exports=r()})(Tn,function(){function n(E,h,_){return h=m(h),I(E,i()?Reflect.construct(h,_||[],m(E).constructor):h.apply(E,_))}function r(E,h,_){if(i())return Reflect.construct.apply(null,arguments);var k=[null];k.push.apply(k,h);var j=new(E.bind.apply(E,k));return _&&b(j,_.prototype),j}function i(){try{var E=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(i=function(){return!!E})()}function s(E,h){var _=E==null?null:typeof Symbol<"u"&&E[Symbol.iterator]||E["@@iterator"];if(_!=null){var k,j,pe,De,ut=[],dt=!0,an=!1;try{if(pe=(_=_.call(E)).next,h===0){if(Object(_)!==_)return;dt=!1}else for(;!(dt=(k=pe.call(_)).done)&&(ut.push(k.value),ut.length!==h);dt=!0);}catch(_a){an=!0,j=_a}finally{try{if(!dt&&_.return!=null&&(De=_.return(),Object(De)!==De))return}finally{if(an)throw j}}return ut}}function o(E,h){if(typeof E!="object"||!E)return E;var _=E[Symbol.toPrimitive];if(_!==void 0){var k=_.call(E,h||"default");if(typeof k!="object")return k;throw new TypeError("@@toPrimitive must return a primitive value.")}return(h==="string"?String:Number)(E)}function a(E){var h=o(E,"string");return typeof h=="symbol"?h:String(h)}function l(E){"@babel/helpers - typeof";return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},l(E)}function u(E,h){if(!(E instanceof h))throw new TypeError("Cannot call a class as a function")}function d(E,h){for(var _=0;_<h.length;_++){var k=h[_];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(E,a(k.key),k)}}function f(E,h,_){return h&&d(E.prototype,h),_&&d(E,_),Object.defineProperty(E,"prototype",{writable:!1}),E}function p(E,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function");E.prototype=Object.create(h&&h.prototype,{constructor:{value:E,writable:!0,configurable:!0}}),Object.defineProperty(E,"prototype",{writable:!1}),h&&b(E,h)}function m(E){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(_){return _.__proto__||Object.getPrototypeOf(_)},m(E)}function b(E,h){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(k,j){return k.__proto__=j,k},b(E,h)}function v(E){if(E===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E}function I(E,h){if(h&&(typeof h=="object"||typeof h=="function"))return h;if(h!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return v(E)}function A(E,h){for(;!Object.prototype.hasOwnProperty.call(E,h)&&(E=m(E),E!==null););return E}function x(){return typeof Reflect<"u"&&Reflect.get?x=Reflect.get.bind():x=function(h,_,k){var j=A(h,_);if(j){var pe=Object.getOwnPropertyDescriptor(j,_);return pe.get?pe.get.call(arguments.length<3?h:k):pe.value}},x.apply(this,arguments)}function S(E,h){return X(E)||s(E,h)||se(E,h)||le()}function D(E){return B(E)||G(E)||se(E)||Q()}function B(E){if(Array.isArray(E))return re(E)}function X(E){if(Array.isArray(E))return E}function G(E){if(typeof Symbol<"u"&&E[Symbol.iterator]!=null||E["@@iterator"]!=null)return Array.from(E)}function se(E,h){if(E){if(typeof E=="string")return re(E,h);var _=Object.prototype.toString.call(E).slice(8,-1);if(_==="Object"&&E.constructor&&(_=E.constructor.name),_==="Map"||_==="Set")return Array.from(E);if(_==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_))return re(E,h)}}function re(E,h){(h==null||h>E.length)&&(h=E.length);for(var _=0,k=new Array(h);_<h;_++)k[_]=E[_];return k}function Q(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function le(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function F(E,h){var _=T(E,h,"get");return ee(E,_)}function K(E,h,_){var k=T(E,h,"set");return Y(E,k,_),_}function T(E,h,_){if(!h.has(E))throw new TypeError("attempted to "+_+" private field on non-instance");return h.get(E)}function ee(E,h){return h.get?h.get.call(E):h.value}function Y(E,h,_){if(h.set)h.set.call(E,_);else{if(!h.writable)throw new TypeError("attempted to set read only private field");h.value=_}}function M(E,h){if(h.has(E))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ce(E,h,_){M(E,h),h.set(E,_)}var ie=100,he={},te=function(){he.previousActiveElement instanceof HTMLElement?(he.previousActiveElement.focus(),he.previousActiveElement=null):document.body&&document.body.focus()},J=function(h){return new Promise(function(_){if(!h)return _();var k=window.scrollX,j=window.scrollY;he.restoreFocusTimeout=setTimeout(function(){te(),_()},ie),window.scrollTo(k,j)})},_e="swal2-",ve=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"],H=ve.reduce(function(E,h){return E[h]=_e+h,E},{}),Ze=["success","warning","info","question","error"],ze=Ze.reduce(function(E,h){return E[h]=_e+h,E},{}),Le="SweetAlert2:",Te=function(h){return h.charAt(0).toUpperCase()+h.slice(1)},Me=function(h){console.warn("".concat(Le," ").concat(l(h)==="object"?h.join(" "):h))},Ie=function(h){console.error("".concat(Le," ").concat(h))},U=[],V=function(h){U.includes(h)||(U.push(h),Me(h))},w=function(h,_){V('"'.concat(h,'" is deprecated and will be removed in the next major release. Please use "').concat(_,'" instead.'))},z=function(h){return typeof h=="function"?h():h},L=function(h){return h&&typeof h.toPromise=="function"},C=function(h){return L(h)?h.toPromise():Promise.resolve(h)},R=function(h){return h&&Promise.resolve(h)===h},O=function(){return document.body.querySelector(".".concat(H.container))},Z=function(h){var _=O();return _?_.querySelector(h):null},W=function(h){return Z(".".concat(h))},$=function(){return W(H.popup)},ae=function(){return W(H.icon)},fe=function(){return W(H["icon-content"])},de=function(){return W(H.title)},be=function(){return W(H["html-container"])},Ne=function(){return W(H.image)},Se=function(){return W(H["progress-steps"])},qe=function(){return W(H["validation-message"])},it=function(){return Z(".".concat(H.actions," .").concat(H.confirm))},ht=function(){return Z(".".concat(H.actions," .").concat(H.cancel))},Ut=function(){return Z(".".concat(H.actions," .").concat(H.deny))},pt=function(){return W(H["input-label"])},pn=function(){return Z(".".concat(H.loader))},Ot=function(){return W(H.actions)},Et=function(){return W(H.footer)},Kn=function(){return W(H["timer-progress-bar"])},Ye=function(){return W(H.close)},jt=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,Nn=function(){var h=$();if(!h)return[];var _=h.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),k=Array.from(_).sort(function(De,ut){var dt=parseInt(De.getAttribute("tabindex")||"0"),an=parseInt(ut.getAttribute("tabindex")||"0");return dt>an?1:dt<an?-1:0}),j=h.querySelectorAll(jt),pe=Array.from(j).filter(function(De){return De.getAttribute("tabindex")!=="-1"});return D(new Set(k.concat(pe))).filter(function(De){return kt(De)})},kr=function(){return Gn(document.body,H.shown)&&!Gn(document.body,H["toast-shown"])&&!Gn(document.body,H["no-backdrop"])},yn=function(){var h=$();return h?Gn(h,H.toast):!1},mr=function(){var h=$();return h?h.hasAttribute("data-loading"):!1},qt=function(h,_){if(h.textContent="",_){var k=new DOMParser,j=k.parseFromString(_,"text/html"),pe=j.querySelector("head");pe&&Array.from(pe.childNodes).forEach(function(ut){h.appendChild(ut)});var De=j.querySelector("body");De&&Array.from(De.childNodes).forEach(function(ut){ut instanceof HTMLVideoElement||ut instanceof HTMLAudioElement?h.appendChild(ut.cloneNode(!0)):h.appendChild(ut)})}},Gn=function(h,_){if(!_)return!1;for(var k=_.split(/\s+/),j=0;j<k.length;j++)if(!h.classList.contains(k[j]))return!1;return!0},Ae=function(h,_){Array.from(h.classList).forEach(function(k){!Object.values(H).includes(k)&&!Object.values(ze).includes(k)&&!Object.values(_.showClass||{}).includes(k)&&h.classList.remove(k)})},bn=function(h,_,k){if(Ae(h,_),_.customClass&&_.customClass[k]){if(typeof _.customClass[k]!="string"&&!_.customClass[k].forEach){Me("Invalid type of customClass.".concat(k,'! Expected string or iterable object, got "').concat(l(_.customClass[k]),'"'));return}st(h,_.customClass[k])}},tn=function(h,_){if(!_)return null;switch(_){case"select":case"textarea":case"file":return h.querySelector(".".concat(H.popup," > .").concat(H[_]));case"checkbox":return h.querySelector(".".concat(H.popup," > .").concat(H.checkbox," input"));case"radio":return h.querySelector(".".concat(H.popup," > .").concat(H.radio," input:checked"))||h.querySelector(".".concat(H.popup," > .").concat(H.radio," input:first-child"));case"range":return h.querySelector(".".concat(H.popup," > .").concat(H.range," input"));default:return h.querySelector(".".concat(H.popup," > .").concat(H.input))}},Ur=function(h){if(h.focus(),h.type!=="file"){var _=h.value;h.value="",h.value=_}},er=function(h,_,k){!h||!_||(typeof _=="string"&&(_=_.split(/\s+/).filter(Boolean)),_.forEach(function(j){Array.isArray(h)?h.forEach(function(pe){k?pe.classList.add(j):pe.classList.remove(j)}):k?h.classList.add(j):h.classList.remove(j)}))},st=function(h,_){er(h,_,!0)},dn=function(h,_){er(h,_,!1)},tr=function(h,_){for(var k=Array.from(h.children),j=0;j<k.length;j++){var pe=k[j];if(pe instanceof HTMLElement&&Gn(pe,_))return pe}},nn=function(h,_,k){k==="".concat(parseInt(k))&&(k=parseInt(k)),k||parseInt(k)===0?h.style.setProperty(_,typeof k=="number"?"".concat(k,"px"):k):h.style.removeProperty(_)},Xt=function(h){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"flex";h&&(h.style.display=_)},vt=function(h){h&&(h.style.display="none")},di=function(h){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"block";h&&new MutationObserver(function(){Fr(h,h.innerHTML,_)}).observe(h,{childList:!0,subtree:!0})},Di=function(h,_,k,j){var pe=h.querySelector(_);pe&&pe.style.setProperty(k,j)},Fr=function(h,_){var k=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"flex";_?Xt(h,k):vt(h)},kt=function(h){return!!(h&&(h.offsetWidth||h.offsetHeight||h.getClientRects().length))},so=function(){return!kt(it())&&!kt(Ut())&&!kt(ht())},Fe=function(h){return h.scrollHeight>h.clientHeight},ne=function(h){var _=window.getComputedStyle(h),k=parseFloat(_.getPropertyValue("animation-duration")||"0"),j=parseFloat(_.getPropertyValue("transition-duration")||"0");return k>0||j>0},Ee=function(h){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,k=Kn();k&&kt(k)&&(_&&(k.style.transition="none",k.style.width="100%"),setTimeout(function(){k.style.transition="width ".concat(h/1e3,"s linear"),k.style.width="0%"},10))},Oe=function(){var h=Kn();if(h){var _=parseInt(window.getComputedStyle(h).width);h.style.removeProperty("transition"),h.style.width="100%";var k=parseInt(window.getComputedStyle(h).width),j=_/k*100;h.style.width="".concat(j,"%")}},ot=function(){return typeof window>"u"||typeof document>"u"},Jt=`
 <div aria-labelledby="`.concat(H.title,'" aria-describedby="').concat(H["html-container"],'" class="').concat(H.popup,`" tabindex="-1">
   <button type="button" class="`).concat(H.close,`"></button>
   <ul class="`).concat(H["progress-steps"],`"></ul>
   <div class="`).concat(H.icon,`"></div>
   <img class="`).concat(H.image,`" />
   <h2 class="`).concat(H.title,'" id="').concat(H.title,`"></h2>
   <div class="`).concat(H["html-container"],'" id="').concat(H["html-container"],`"></div>
   <input class="`).concat(H.input,'" id="').concat(H.input,`" />
   <input type="file" class="`).concat(H.file,`" />
   <div class="`).concat(H.range,`">
     <input type="range" />
     <output></output>
   </div>
   <select class="`).concat(H.select,'" id="').concat(H.select,`"></select>
   <div class="`).concat(H.radio,`"></div>
   <label class="`).concat(H.checkbox,`">
     <input type="checkbox" id="`).concat(H.checkbox,`" />
     <span class="`).concat(H.label,`"></span>
   </label>
   <textarea class="`).concat(H.textarea,'" id="').concat(H.textarea,`"></textarea>
   <div class="`).concat(H["validation-message"],'" id="').concat(H["validation-message"],`"></div>
   <div class="`).concat(H.actions,`">
     <div class="`).concat(H.loader,`"></div>
     <button type="button" class="`).concat(H.confirm,`"></button>
     <button type="button" class="`).concat(H.deny,`"></button>
     <button type="button" class="`).concat(H.cancel,`"></button>
   </div>
   <div class="`).concat(H.footer,`"></div>
   <div class="`).concat(H["timer-progress-bar-container"],`">
     <div class="`).concat(H["timer-progress-bar"],`"></div>
   </div>
 </div>
`).replace(/(^|\n)\s*/g,""),rn=function(){var h=O();return h?(h.remove(),dn([document.documentElement,document.body],[H["no-backdrop"],H["toast-shown"],H["has-column"]]),!0):!1},Ht=function(){he.currentInstance.resetValidationMessage()},gr=function(){var h=$(),_=tr(h,H.input),k=tr(h,H.file),j=h.querySelector(".".concat(H.range," input")),pe=h.querySelector(".".concat(H.range," output")),De=tr(h,H.select),ut=h.querySelector(".".concat(H.checkbox," input")),dt=tr(h,H.textarea);_.oninput=Ht,k.onchange=Ht,De.onchange=Ht,ut.onchange=Ht,dt.oninput=Ht,j.oninput=function(){Ht(),pe.value=j.value},j.onchange=function(){Ht(),pe.value=j.value}},$r=function(h){return typeof h=="string"?document.querySelector(h):h},sn=function(h){var _=$();_.setAttribute("role",h.toast?"alert":"dialog"),_.setAttribute("aria-live",h.toast?"polite":"assertive"),h.toast||_.setAttribute("aria-modal","true")},ds=function(h){window.getComputedStyle(h).direction==="rtl"&&st(O(),H.rtl)},fi=function(h){var _=rn();if(ot()){Ie("SweetAlert2 requires document to initialize");return}var k=document.createElement("div");k.className=H.container,_&&st(k,H["no-transition"]),qt(k,Jt);var j=$r(h.target);j.appendChild(k),sn(h),ds(j),gr()},oo=function(h,_){h instanceof HTMLElement?_.appendChild(h):l(h)==="object"?Oi(h,_):h&&qt(_,h)},Oi=function(h,_){h.jquery?ha(_,h):qt(_,h.toString())},ha=function(h,_){if(h.textContent="",0 in _)for(var k=0;k in _;k++)h.appendChild(_[k].cloneNode(!0));else h.appendChild(_.cloneNode(!0))},Br=function(){if(ot())return!1;var E=document.createElement("div");return typeof E.style.webkitAnimation<"u"?"webkitAnimationEnd":typeof E.style.animation<"u"?"animationend":!1}(),Gl=function(h,_){var k=Ot(),j=pn();!k||!j||(!_.showConfirmButton&&!_.showDenyButton&&!_.showCancelButton?vt(k):Xt(k),bn(k,_,"actions"),Ql(k,j,_),qt(j,_.loaderHtml||""),bn(j,_,"loader"))};function Ql(E,h,_){var k=it(),j=Ut(),pe=ht();!k||!j||!pe||(ao(k,"confirm",_),ao(j,"deny",_),ao(pe,"cancel",_),Mh(k,j,pe,_),_.reverseButtons&&(_.toast?(E.insertBefore(pe,k),E.insertBefore(j,k)):(E.insertBefore(pe,h),E.insertBefore(j,h),E.insertBefore(k,h))))}function Mh(E,h,_,k){if(!k.buttonsStyling){dn([E,h,_],H.styled);return}st([E,h,_],H.styled),k.confirmButtonColor&&(E.style.backgroundColor=k.confirmButtonColor,st(E,H["default-outline"])),k.denyButtonColor&&(h.style.backgroundColor=k.denyButtonColor,st(h,H["default-outline"])),k.cancelButtonColor&&(_.style.backgroundColor=k.cancelButtonColor,st(_,H["default-outline"]))}function ao(E,h,_){var k=Te(h);Fr(E,_["show".concat(k,"Button")],"inline-block"),qt(E,_["".concat(h,"ButtonText")]||""),E.setAttribute("aria-label",_["".concat(h,"ButtonAriaLabel")]||""),E.className=H[h],bn(E,_,"".concat(h,"Button"))}var Yl=function(h,_){var k=Ye();k&&(qt(k,_.closeButtonHtml||""),bn(k,_,"closeButton"),Fr(k,_.showCloseButton),k.setAttribute("aria-label",_.closeButtonAriaLabel||""))},fs=function(h,_){var k=O();k&&(Xl(k,_.backdrop),Nt(k,_.position),ps(k,_.grow),bn(k,_,"container"))};function Xl(E,h){typeof h=="string"?E.style.background=h:h||st([document.documentElement,document.body],H["no-backdrop"])}function Nt(E,h){h&&(h in H?st(E,H[h]):(Me('The "position" parameter is not valid, defaulting to "center"'),st(E,H.center)))}function ps(E,h){h&&st(E,H["grow-".concat(h)])}var xt={innerParams:new WeakMap,domCache:new WeakMap},pi=["input","file","range","select","radio","checkbox","textarea"],lo=function(h,_){var k=$();if(k){var j=xt.innerParams.get(h),pe=!j||_.input!==j.input;pi.forEach(function(De){var ut=tr(k,H[De]);ut&&(ms(De,_.inputAttributes),ut.className=H[De],pe&&vt(ut))}),_.input&&(pe&&uo(_),Vh(_))}},uo=function(h){if(h.input){if(!Wt[h.input]){Ie("Unexpected type of input! Expected ".concat(Object.keys(Wt).join(" | "),', got "').concat(h.input,'"'));return}var _=ho(h.input),k=Wt[h.input](_,h);Xt(_),h.inputAutoFocus&&setTimeout(function(){Ur(k)})}},co=function(h){for(var _=0;_<h.attributes.length;_++){var k=h.attributes[_].name;["id","type","value","style"].includes(k)||h.removeAttribute(k)}},ms=function(h,_){var k=tn($(),h);if(k){co(k);for(var j in _)k.setAttribute(j,_[j])}},Vh=function(h){var _=ho(h.input);l(h.customClass)==="object"&&st(_,h.customClass.input)},da=function(h,_){(!h.placeholder||_.inputPlaceholder)&&(h.placeholder=_.inputPlaceholder)},Ni=function(h,_,k){if(k.inputLabel){var j=document.createElement("label"),pe=H["input-label"];j.setAttribute("for",h.id),j.className=pe,l(k.customClass)==="object"&&st(j,k.customClass.inputLabel),j.innerText=k.inputLabel,_.insertAdjacentElement("beforebegin",j)}},ho=function(h){return tr($(),H[h]||H.input)},gs=function(h,_){["string","number"].includes(l(_))?h.value="".concat(_):R(_)||Me('Unexpected type of inputValue! Expected "string", "number" or "Promise", got "'.concat(l(_),'"'))},Wt={};Wt.text=Wt.email=Wt.password=Wt.number=Wt.tel=Wt.url=Wt.search=Wt.date=Wt["datetime-local"]=Wt.time=Wt.week=Wt.month=function(E,h){return gs(E,h.inputValue),Ni(E,E,h),da(E,h),E.type=h.input,E},Wt.file=function(E,h){return Ni(E,E,h),da(E,h),E},Wt.range=function(E,h){var _=E.querySelector("input"),k=E.querySelector("output");return gs(_,h.inputValue),_.type=h.input,gs(k,h.inputValue),Ni(_,E,h),E},Wt.select=function(E,h){if(E.textContent="",h.inputPlaceholder){var _=document.createElement("option");qt(_,h.inputPlaceholder),_.value="",_.disabled=!0,_.selected=!0,E.appendChild(_)}return Ni(E,E,h),E},Wt.radio=function(E){return E.textContent="",E},Wt.checkbox=function(E,h){var _=tn($(),"checkbox");_.value="1",_.checked=!!h.inputValue;var k=E.querySelector("span");return qt(k,h.inputPlaceholder),_},Wt.textarea=function(E,h){gs(E,h.inputValue),da(E,h),Ni(E,E,h);var _=function(j){return parseInt(window.getComputedStyle(j).marginLeft)+parseInt(window.getComputedStyle(j).marginRight)};return setTimeout(function(){if("MutationObserver"in window){var k=parseInt(window.getComputedStyle($()).width),j=function(){if(document.body.contains(E)){var De=E.offsetWidth+_(E);De>k?$().style.width="".concat(De,"px"):nn($(),"width",h.width)}};new MutationObserver(j).observe(E,{attributes:!0,attributeFilter:["style"]})}}),E};var fa=function(h,_){var k=be();k&&(di(k),bn(k,_,"htmlContainer"),_.html?(oo(_.html,k),Xt(k,"block")):_.text?(k.textContent=_.text,Xt(k,"block")):vt(k),lo(h,_))},Uh=function(h,_){var k=Et();k&&(di(k),Fr(k,_.footer,"block"),_.footer&&oo(_.footer,k),bn(k,_,"footer"))},fo=function(h,_){var k=xt.innerParams.get(h),j=ae();if(j){if(k&&_.icon===k.icon){gi(j,_),_s(j,_);return}if(!_.icon&&!_.iconHtml){vt(j);return}if(_.icon&&Object.keys(ze).indexOf(_.icon)===-1){Ie('Unknown icon! Expected "success", "error", "warning", "info" or "question", got "'.concat(_.icon,'"')),vt(j);return}Xt(j),gi(j,_),_s(j,_),st(j,_.showClass&&_.showClass.icon)}},_s=function(h,_){for(var k=0,j=Object.entries(ze);k<j.length;k++){var pe=S(j[k],2),De=pe[0],ut=pe[1];_.icon!==De&&dn(h,ut)}st(h,_.icon&&ze[_.icon]),po(h,_),mi(),bn(h,_,"icon")},mi=function(){var h=$();if(h)for(var _=window.getComputedStyle(h).getPropertyValue("background-color"),k=h.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix"),j=0;j<k.length;j++)k[j].style.backgroundColor=_},pa=`
  <div class="swal2-success-circular-line-left"></div>
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>
  <div class="swal2-success-circular-line-right"></div>
`,Er=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,gi=function(h,_){if(!(!_.icon&&!_.iconHtml)){var k=h.innerHTML,j="";if(_.iconHtml)j=ma(_.iconHtml);else if(_.icon==="success")j=pa,k=k.replace(/ style=".*?"/g,"");else if(_.icon==="error")j=Er;else if(_.icon){var pe={question:"?",warning:"!",info:"i"};j=ma(pe[_.icon])}k.trim()!==j.trim()&&qt(h,j)}},po=function(h,_){if(_.iconColor){h.style.color=_.iconColor,h.style.borderColor=_.iconColor;for(var k=0,j=[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"];k<j.length;k++){var pe=j[k];Di(h,pe,"background-color",_.iconColor)}Di(h,".swal2-success-ring","border-color",_.iconColor)}},ma=function(h){return'<div class="'.concat(H["icon-content"],'">').concat(h,"</div>")},Fh=function(h,_){var k=Ne();if(k){if(!_.imageUrl){vt(k);return}Xt(k,""),k.setAttribute("src",_.imageUrl),k.setAttribute("alt",_.imageAlt||""),nn(k,"width",_.imageWidth),nn(k,"height",_.imageHeight),k.className=H.image,bn(k,_,"image")}},$e=function(h,_){var k=O(),j=$();if(!(!k||!j)){if(_.toast){nn(k,"width",_.width),j.style.width="100%";var pe=pn();pe&&j.insertBefore(pe,ae())}else nn(j,"width",_.width);nn(j,"padding",_.padding),_.color&&(j.style.color=_.color),_.background&&(j.style.background=_.background),vt(qe()),Zl(j,_)}},Zl=function(h,_){var k=_.showClass||{};h.className="".concat(H.popup," ").concat(kt(h)?k.popup:""),_.toast?(st([document.documentElement,document.body],H["toast-shown"]),st(h,H.toast)):st(h,H.modal),bn(h,_,"popup"),typeof _.customClass=="string"&&st(h,_.customClass),_.icon&&st(h,H["icon-".concat(_.icon)])},mo=function(h,_){var k=Se();if(k){var j=_.progressSteps,pe=_.currentProgressStep;if(!j||j.length===0||pe===void 0){vt(k);return}Xt(k),k.textContent="",pe>=j.length&&Me("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),j.forEach(function(De,ut){var dt=go(De);if(k.appendChild(dt),ut===pe&&st(dt,H["active-progress-step"]),ut!==j.length-1){var an=Jl(_);k.appendChild(an)}})}},go=function(h){var _=document.createElement("li");return st(_,H["progress-step"]),qt(_,h),_},Jl=function(h){var _=document.createElement("li");return st(_,H["progress-step-line"]),h.progressStepsDistance&&nn(_,"width",h.progressStepsDistance),_},ws=function(h,_){var k=de();k&&(di(k),Fr(k,_.title||_.titleText,"block"),_.title&&oo(_.title,k),_.titleText&&(k.innerText=_.titleText),bn(k,_,"title"))},Li=function(h,_){$e(h,_),fs(h,_),mo(h,_),fo(h,_),Fh(h,_),ws(h,_),Yl(h,_),fa(h,_),Gl(h,_),Uh(h,_);var k=$();typeof _.didRender=="function"&&k&&_.didRender(k)},zr=function(){return kt($())},vs=function(){var h;return(h=it())===null||h===void 0?void 0:h.click()},eu=function(){var h;return(h=Ut())===null||h===void 0?void 0:h.click()},c=function(){var h;return(h=ht())===null||h===void 0?void 0:h.click()},g=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),y=function(h){h.keydownTarget&&h.keydownHandlerAdded&&(h.keydownTarget.removeEventListener("keydown",h.keydownHandler,{capture:h.keydownListenerCapture}),h.keydownHandlerAdded=!1)},P=function(h,_,k){y(h),_.toast||(h.keydownHandler=function(j){return We(_,j,k)},h.keydownTarget=_.keydownListenerCapture?window:$(),h.keydownListenerCapture=_.keydownListenerCapture,h.keydownTarget.addEventListener("keydown",h.keydownHandler,{capture:h.keydownListenerCapture}),h.keydownHandlerAdded=!0)},q=function(h,_){var k,j=Nn();if(j.length){h=h+_,h===j.length?h=0:h===-1&&(h=j.length-1),j[h].focus();return}(k=$())===null||k===void 0||k.focus()},ue=["ArrowRight","ArrowDown"],ge=["ArrowLeft","ArrowUp"],We=function(h,_,k){h&&(_.isComposing||_.keyCode===229||(h.stopKeydownPropagation&&_.stopPropagation(),_.key==="Enter"?gt(_,h):_.key==="Tab"?rt(_):[].concat(ue,ge).includes(_.key)?on(_.key):_.key==="Escape"&&mn(_,h,k)))},gt=function(h,_){if(z(_.allowEnterKey)){var k=tn($(),_.input);if(h.target&&k&&h.target instanceof HTMLElement&&h.target.outerHTML===k.outerHTML){if(["textarea","file"].includes(_.input))return;vs(),h.preventDefault()}}},rt=function(h){for(var _=h.target,k=Nn(),j=-1,pe=0;pe<k.length;pe++)if(_===k[pe]){j=pe;break}h.shiftKey?q(j,-1):q(j,1),h.stopPropagation(),h.preventDefault()},on=function(h){var _=Ot(),k=it(),j=Ut(),pe=ht();if(!(!_||!k||!j||!pe)){var De=[k,j,pe];if(!(document.activeElement instanceof HTMLElement&&!De.includes(document.activeElement))){var ut=ue.includes(h)?"nextElementSibling":"previousElementSibling",dt=document.activeElement;if(dt){for(var an=0;an<_.children.length;an++){if(dt=dt[ut],!dt)return;if(dt instanceof HTMLButtonElement&&kt(dt))break}dt instanceof HTMLButtonElement&&dt.focus()}}}},mn=function(h,_,k){z(_.allowEscapeKey)&&(h.preventDefault(),k(g.esc))},_i={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap},$h=function(){var h=Array.from(document.body.children);h.forEach(function(_){_===O()||_.contains(O())||(_.hasAttribute("aria-hidden")&&_.setAttribute("data-previous-aria-hidden",_.getAttribute("aria-hidden")||""),_.setAttribute("aria-hidden","true"))})},ga=function(){var h=Array.from(document.body.children);h.forEach(function(_){_.hasAttribute("data-previous-aria-hidden")?(_.setAttribute("aria-hidden",_.getAttribute("data-previous-aria-hidden")||""),_.removeAttribute("data-previous-aria-hidden")):_.removeAttribute("aria-hidden")})},tu=typeof window<"u"&&!!window.GestureEvent,nu=function(){if(tu&&!Gn(document.body,H.iosfix)){var h=document.body.scrollTop;document.body.style.top="".concat(h*-1,"px"),st(document.body,H.iosfix),Bh()}},Bh=function(){var h=O();if(h){var _;h.ontouchstart=function(k){_=zh(k)},h.ontouchmove=function(k){_&&(k.preventDefault(),k.stopPropagation())}}},zh=function(h){var _=h.target,k=O(),j=be();return!k||!j||jh(h)||qh(h)?!1:_===k||!Fe(k)&&_ instanceof HTMLElement&&_.tagName!=="INPUT"&&_.tagName!=="TEXTAREA"&&!(Fe(j)&&j.contains(_))},jh=function(h){return h.touches&&h.touches.length&&h.touches[0].touchType==="stylus"},qh=function(h){return h.touches&&h.touches.length>1},Hh=function(){if(Gn(document.body,H.iosfix)){var h=parseInt(document.body.style.top,10);dn(document.body,H.iosfix),document.body.style.top="",document.body.scrollTop=h*-1}},Wh=function(){var h=document.createElement("div");h.className=H["scrollbar-measure"],document.body.appendChild(h);var _=h.getBoundingClientRect().width-h.clientWidth;return document.body.removeChild(h),_},Mi=null,Kh=function(h){Mi===null&&(document.body.scrollHeight>window.innerHeight||h==="scroll")&&(Mi=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight="".concat(Mi+Wh(),"px"))},ru=function(){Mi!==null&&(document.body.style.paddingRight="".concat(Mi,"px"),Mi=null)};function iu(E,h,_,k){yn()?au(E,k):(J(_).then(function(){return au(E,k)}),y(he)),tu?(h.setAttribute("style","display:none !important"),h.removeAttribute("class"),h.innerHTML=""):h.remove(),kr()&&(ru(),Hh(),ga()),Gh()}function Gh(){dn([document.documentElement,document.body],[H.shown,H["height-auto"],H["no-backdrop"],H["toast-shown"]])}function jr(E){E=Yh(E);var h=_i.swalPromiseResolve.get(this),_=Qh(this);this.isAwaitingPromise?E.isDismissed||(ys(this),h(E)):_&&h(E)}var Qh=function(h){var _=$();if(!_)return!1;var k=xt.innerParams.get(h);if(!k||Gn(_,k.hideClass.popup))return!1;dn(_,k.showClass.popup),st(_,k.hideClass.popup);var j=O();return dn(j,k.showClass.backdrop),st(j,k.hideClass.backdrop),ou(h,_,k),!0};function su(E){var h=_i.swalPromiseReject.get(this);ys(this),h&&h(E)}var ys=function(h){h.isAwaitingPromise&&(delete h.isAwaitingPromise,xt.innerParams.get(h)||h._destroy())},Yh=function(h){return typeof h>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},h)},ou=function(h,_,k){var j=O(),pe=Br&&ne(_);typeof k.willClose=="function"&&k.willClose(_),pe?Xh(h,_,j,k.returnFocus,k.didClose):iu(h,j,k.returnFocus,k.didClose)},Xh=function(h,_,k,j,pe){Br&&(he.swalCloseEventFinishedCallback=iu.bind(null,h,k,j,pe),_.addEventListener(Br,function(De){De.target===_&&(he.swalCloseEventFinishedCallback(),delete he.swalCloseEventFinishedCallback)}))},au=function(h,_){setTimeout(function(){typeof _=="function"&&_.bind(h.params)(),h._destroy&&h._destroy()})},Vi=function(h){var _=$();if(_||new fu,_=$(),!!_){var k=pn();yn()?vt(ae()):Zh(_,h),Xt(k),_.setAttribute("data-loading","true"),_.setAttribute("aria-busy","true"),_.focus()}},Zh=function(h,_){var k=Ot(),j=pn();!k||!j||(!_&&kt(it())&&(_=it()),Xt(k),_&&(vt(_),j.setAttribute("data-button-to-replace",_.className),k.insertBefore(j,_)),st([h,k],H.loading))},Jh=function(h,_){_.input==="select"||_.input==="radio"?rd(h,_):["text","email","number","tel","textarea"].some(function(k){return k===_.input})&&(L(_.inputValue)||R(_.inputValue))&&(Vi(it()),_o(h,_))},ed=function(h,_){var k=h.getInput();if(!k)return null;switch(_.input){case"checkbox":return lu(k);case"radio":return td(k);case"file":return nd(k);default:return _.inputAutoTrim?k.value.trim():k.value}},lu=function(h){return h.checked?1:0},td=function(h){return h.checked?h.value:null},nd=function(h){return h.files&&h.files.length?h.getAttribute("multiple")!==null?h.files:h.files[0]:null},rd=function(h,_){var k=$();if(k){var j=function(De){_.input==="select"?uu(k,oe(De),_):_.input==="radio"&&cu(k,oe(De),_)};L(_.inputOptions)||R(_.inputOptions)?(Vi(it()),C(_.inputOptions).then(function(pe){h.hideLoading(),j(pe)})):l(_.inputOptions)==="object"?j(_.inputOptions):Ie("Unexpected type of inputOptions! Expected object, Map or Promise, got ".concat(l(_.inputOptions)))}},_o=function(h,_){var k=h.getInput();k&&(vt(k),C(_.inputValue).then(function(j){k.value=_.input==="number"?"".concat(parseFloat(j)||0):"".concat(j),Xt(k),k.focus(),h.hideLoading()}).catch(function(j){Ie("Error in inputValue promise: ".concat(j)),k.value="",Xt(k),k.focus(),h.hideLoading()}))};function uu(E,h,_){var k=tr(E,H.select);if(k){var j=function(De,ut,dt){var an=document.createElement("option");an.value=dt,qt(an,ut),an.selected=ye(dt,_.inputValue),De.appendChild(an)};h.forEach(function(pe){var De=pe[0],ut=pe[1];if(Array.isArray(ut)){var dt=document.createElement("optgroup");dt.label=De,dt.disabled=!1,k.appendChild(dt),ut.forEach(function(an){return j(dt,an[1],an[0])})}else j(k,ut,De)}),k.focus()}}function cu(E,h,_){var k=tr(E,H.radio);if(k){h.forEach(function(pe){var De=pe[0],ut=pe[1],dt=document.createElement("input"),an=document.createElement("label");dt.type="radio",dt.name=H.radio,dt.value=De,ye(De,_.inputValue)&&(dt.checked=!0);var _a=document.createElement("span");qt(_a,ut),_a.className=H.label,an.appendChild(dt),an.appendChild(_a),k.appendChild(an)});var j=k.querySelectorAll("input");j.length&&j[0].focus()}}var oe=function E(h){var _=[];return h instanceof Map?h.forEach(function(k,j){var pe=k;l(pe)==="object"&&(pe=E(pe)),_.push([j,pe])}):Object.keys(h).forEach(function(k){var j=h[k];l(j)==="object"&&(j=E(j)),_.push([k,j])}),_},ye=function(h,_){return!!_&&_.toString()===h.toString()},Ve=void 0,Ge=function(h){var _=xt.innerParams.get(h);h.disableButtons(),_.input?nr(h,"confirm"):Tr(h,!0)},at=function(h){var _=xt.innerParams.get(h);h.disableButtons(),_.returnInputValueOnDeny?nr(h,"deny"):Cn(h,!1)},Pt=function(h,_){h.disableButtons(),_(g.cancel)},nr=function(h,_){var k=xt.innerParams.get(h);if(!k.input){Ie('The "input" parameter is needed to be set when using returnInputValueOn'.concat(Te(_)));return}var j=h.getInput(),pe=ed(h,k);k.inputValidator?rr(h,pe,_):j&&!j.checkValidity()?(h.enableButtons(),h.showValidationMessage(k.validationMessage||j.validationMessage)):_==="deny"?Cn(h,pe):Tr(h,pe)},rr=function(h,_,k){var j=xt.innerParams.get(h);h.disableInput();var pe=Promise.resolve().then(function(){return C(j.inputValidator(_,j.validationMessage))});pe.then(function(De){h.enableButtons(),h.enableInput(),De?h.showValidationMessage(De):k==="deny"?Cn(h,_):Tr(h,_)})},Cn=function(h,_){var k=xt.innerParams.get(h||Ve);if(k.showLoaderOnDeny&&Vi(Ut()),k.preDeny){h.isAwaitingPromise=!0;var j=Promise.resolve().then(function(){return C(k.preDeny(_,k.validationMessage))});j.then(function(pe){pe===!1?(h.hideLoading(),ys(h)):h.close({isDenied:!0,value:typeof pe>"u"?_:pe})}).catch(function(pe){return wo(h||Ve,pe)})}else h.close({isDenied:!0,value:_})},ir=function(h,_){h.close({isConfirmed:!0,value:_})},wo=function(h,_){h.rejectPromise(_)},Tr=function(h,_){var k=xt.innerParams.get(h||Ve);if(k.showLoaderOnConfirm&&Vi(),k.preConfirm){h.resetValidationMessage(),h.isAwaitingPromise=!0;var j=Promise.resolve().then(function(){return C(k.preConfirm(_,k.validationMessage))});j.then(function(pe){kt(qe())||pe===!1?(h.hideLoading(),ys(h)):ir(h,typeof pe>"u"?_:pe)}).catch(function(pe){return wo(h||Ve,pe)})}else ir(h,_)};function vo(){var E=xt.innerParams.get(this);if(E){var h=xt.domCache.get(this);vt(h.loader),yn()?E.icon&&Xt(ae()):M1(h),dn([h.popup,h.actions],H.loading),h.popup.removeAttribute("aria-busy"),h.popup.removeAttribute("data-loading"),h.confirmButton.disabled=!1,h.denyButton.disabled=!1,h.cancelButton.disabled=!1}}var M1=function(h){var _=h.popup.getElementsByClassName(h.loader.getAttribute("data-button-to-replace"));_.length?Xt(_[0],"inline-block"):so()&&vt(h.actions)};function Ym(){var E=xt.innerParams.get(this),h=xt.domCache.get(this);return h?tn(h.popup,E.input):null}function Xm(E,h,_){var k=xt.domCache.get(E);h.forEach(function(j){k[j].disabled=_})}function Zm(E,h){var _=$();if(!(!_||!E))if(E.type==="radio")for(var k=_.querySelectorAll('[name="'.concat(H.radio,'"]')),j=0;j<k.length;j++)k[j].disabled=h;else E.disabled=h}function Jm(){Xm(this,["confirmButton","denyButton","cancelButton"],!1)}function eg(){Xm(this,["confirmButton","denyButton","cancelButton"],!0)}function tg(){Zm(this.getInput(),!1)}function ng(){Zm(this.getInput(),!0)}function rg(E){var h=xt.domCache.get(this),_=xt.innerParams.get(this);qt(h.validationMessage,E),h.validationMessage.className=H["validation-message"],_.customClass&&_.customClass.validationMessage&&st(h.validationMessage,_.customClass.validationMessage),Xt(h.validationMessage);var k=this.getInput();k&&(k.setAttribute("aria-invalid","true"),k.setAttribute("aria-describedby",H["validation-message"]),Ur(k),st(k,H.inputerror))}function ig(){var E=xt.domCache.get(this);E.validationMessage&&vt(E.validationMessage);var h=this.getInput();h&&(h.removeAttribute("aria-invalid"),h.removeAttribute("aria-describedby"),dn(h,H.inputerror))}var yo={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,animation:!0,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},V1=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],U1={},F1=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],sg=function(h){return Object.prototype.hasOwnProperty.call(yo,h)},og=function(h){return V1.indexOf(h)!==-1},ag=function(h){return U1[h]},$1=function(h){sg(h)||Me('Unknown parameter "'.concat(h,'"'))},B1=function(h){F1.includes(h)&&Me('The parameter "'.concat(h,'" is incompatible with toasts'))},z1=function(h){var _=ag(h);_&&w(h,_)},j1=function(h){h.backdrop===!1&&h.allowOutsideClick&&Me('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(var _ in h)$1(_),h.toast&&B1(_),z1(_)};function lg(E){var h=$(),_=xt.innerParams.get(this);if(!h||Gn(h,_.hideClass.popup)){Me("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}var k=q1(E),j=Object.assign({},_,k);Li(this,j),xt.innerParams.set(this,j),Object.defineProperties(this,{params:{value:Object.assign({},this.params,E),writable:!1,enumerable:!0}})}var q1=function(h){var _={};return Object.keys(h).forEach(function(k){og(k)?_[k]=h[k]:Me("Invalid parameter to update: ".concat(k))}),_};function ug(){var E=xt.domCache.get(this),h=xt.innerParams.get(this);if(!h){cg(this);return}E.popup&&he.swalCloseEventFinishedCallback&&(he.swalCloseEventFinishedCallback(),delete he.swalCloseEventFinishedCallback),typeof h.didDestroy=="function"&&h.didDestroy(),H1(this)}var H1=function(h){cg(h),delete h.params,delete he.keydownHandler,delete he.keydownTarget,delete he.currentInstance},cg=function(h){h.isAwaitingPromise?(id(xt,h),h.isAwaitingPromise=!0):(id(_i,h),id(xt,h),delete h.isAwaitingPromise,delete h.disableButtons,delete h.enableButtons,delete h.getInput,delete h.disableInput,delete h.enableInput,delete h.hideLoading,delete h.disableLoading,delete h.showValidationMessage,delete h.resetValidationMessage,delete h.close,delete h.closePopup,delete h.closeModal,delete h.closeToast,delete h.rejectPromise,delete h.update,delete h._destroy)},id=function(h,_){for(var k in h)h[k].delete(_)},W1=Object.freeze({__proto__:null,_destroy:ug,close:jr,closeModal:jr,closePopup:jr,closeToast:jr,disableButtons:eg,disableInput:ng,disableLoading:vo,enableButtons:Jm,enableInput:tg,getInput:Ym,handleAwaitingPromise:ys,hideLoading:vo,rejectPromise:su,resetValidationMessage:ig,showValidationMessage:rg,update:lg}),K1=function(h,_,k){h.toast?G1(h,_,k):(Y1(_),X1(_),Z1(h,_,k))},G1=function(h,_,k){_.popup.onclick=function(){h&&(Q1(h)||h.timer||h.input)||k(g.close)}},Q1=function(h){return!!(h.showConfirmButton||h.showDenyButton||h.showCancelButton||h.showCloseButton)},hu=!1,Y1=function(h){h.popup.onmousedown=function(){h.container.onmouseup=function(_){h.container.onmouseup=function(){},_.target===h.container&&(hu=!0)}}},X1=function(h){h.container.onmousedown=function(){h.popup.onmouseup=function(_){h.popup.onmouseup=function(){},(_.target===h.popup||_.target instanceof HTMLElement&&h.popup.contains(_.target))&&(hu=!0)}}},Z1=function(h,_,k){_.container.onclick=function(j){if(hu){hu=!1;return}j.target===_.container&&z(h.allowOutsideClick)&&k(g.backdrop)}},J1=function(h){return l(h)==="object"&&h.jquery},hg=function(h){return h instanceof Element||J1(h)},ek=function(h){var _={};return l(h[0])==="object"&&!hg(h[0])?Object.assign(_,h[0]):["title","html","icon"].forEach(function(k,j){var pe=h[j];typeof pe=="string"||hg(pe)?_[k]=pe:pe!==void 0&&Ie("Unexpected type of ".concat(k,'! Expected "string" or "Element", got ').concat(l(pe)))}),_};function tk(){for(var E=this,h=arguments.length,_=new Array(h),k=0;k<h;k++)_[k]=arguments[k];return r(E,_)}function nk(E){var h=function(_){p(k,_);function k(){return u(this,k),n(this,k,arguments)}return f(k,[{key:"_main",value:function(pe,De){return x(m(k.prototype),"_main",this).call(this,pe,Object.assign({},E,De))}}]),k}(this);return h}var rk=function(){return he.timeout&&he.timeout.getTimerLeft()},dg=function(){if(he.timeout)return Oe(),he.timeout.stop()},fg=function(){if(he.timeout){var h=he.timeout.start();return Ee(h),h}},ik=function(){var h=he.timeout;return h&&(h.running?dg():fg())},sk=function(h){if(he.timeout){var _=he.timeout.increase(h);return Ee(_,!0),_}},ok=function(){return!!(he.timeout&&he.timeout.isRunning())},pg=!1,sd={};function ak(){var E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"data-swal-template";sd[E]=this,pg||(document.body.addEventListener("click",lk),pg=!0)}var lk=function(h){for(var _=h.target;_&&_!==document;_=_.parentNode)for(var k in sd){var j=_.getAttribute(k);if(j){sd[k].fire({template:j});return}}},uk=Object.freeze({__proto__:null,argsToParams:ek,bindClickHandler:ak,clickCancel:c,clickConfirm:vs,clickDeny:eu,enableLoading:Vi,fire:tk,getActions:Ot,getCancelButton:ht,getCloseButton:Ye,getConfirmButton:it,getContainer:O,getDenyButton:Ut,getFocusableElements:Nn,getFooter:Et,getHtmlContainer:be,getIcon:ae,getIconContent:fe,getImage:Ne,getInputLabel:pt,getLoader:pn,getPopup:$,getProgressSteps:Se,getTimerLeft:rk,getTimerProgressBar:Kn,getTitle:de,getValidationMessage:qe,increaseTimer:sk,isDeprecatedParameter:ag,isLoading:mr,isTimerRunning:ok,isUpdatableParameter:og,isValidParameter:sg,isVisible:zr,mixin:nk,resumeTimer:fg,showLoading:Vi,stopTimer:dg,toggleTimer:ik}),ck=function(){function E(h,_){u(this,E),this.callback=h,this.remaining=_,this.running=!1,this.start()}return f(E,[{key:"start",value:function(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}},{key:"stop",value:function(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}},{key:"increase",value:function(_){var k=this.running;return k&&this.stop(),this.remaining+=_,k&&this.start(),this.remaining}},{key:"getTimerLeft",value:function(){return this.running&&(this.stop(),this.start()),this.remaining}},{key:"isRunning",value:function(){return this.running}}]),E}(),mg=["swal-title","swal-html","swal-footer"],hk=function(h){var _=typeof h.template=="string"?document.querySelector(h.template):h.template;if(!_)return{};var k=_.content;vk(k);var j=Object.assign(dk(k),fk(k),pk(k),mk(k),gk(k),_k(k),wk(k,mg));return j},dk=function(h){var _={},k=Array.from(h.querySelectorAll("swal-param"));return k.forEach(function(j){bs(j,["name","value"]);var pe=j.getAttribute("name"),De=j.getAttribute("value");typeof yo[pe]=="boolean"?_[pe]=De!=="false":l(yo[pe])==="object"?_[pe]=JSON.parse(De):_[pe]=De}),_},fk=function(h){var _={},k=Array.from(h.querySelectorAll("swal-function-param"));return k.forEach(function(j){var pe=j.getAttribute("name"),De=j.getAttribute("value");_[pe]=new Function("return ".concat(De))()}),_},pk=function(h){var _={},k=Array.from(h.querySelectorAll("swal-button"));return k.forEach(function(j){bs(j,["type","color","aria-label"]);var pe=j.getAttribute("type");_["".concat(pe,"ButtonText")]=j.innerHTML,_["show".concat(Te(pe),"Button")]=!0,j.hasAttribute("color")&&(_["".concat(pe,"ButtonColor")]=j.getAttribute("color")),j.hasAttribute("aria-label")&&(_["".concat(pe,"ButtonAriaLabel")]=j.getAttribute("aria-label"))}),_},mk=function(h){var _={},k=h.querySelector("swal-image");return k&&(bs(k,["src","width","height","alt"]),k.hasAttribute("src")&&(_.imageUrl=k.getAttribute("src")),k.hasAttribute("width")&&(_.imageWidth=k.getAttribute("width")),k.hasAttribute("height")&&(_.imageHeight=k.getAttribute("height")),k.hasAttribute("alt")&&(_.imageAlt=k.getAttribute("alt"))),_},gk=function(h){var _={},k=h.querySelector("swal-icon");return k&&(bs(k,["type","color"]),k.hasAttribute("type")&&(_.icon=k.getAttribute("type")),k.hasAttribute("color")&&(_.iconColor=k.getAttribute("color")),_.iconHtml=k.innerHTML),_},_k=function(h){var _={},k=h.querySelector("swal-input");k&&(bs(k,["type","label","placeholder","value"]),_.input=k.getAttribute("type")||"text",k.hasAttribute("label")&&(_.inputLabel=k.getAttribute("label")),k.hasAttribute("placeholder")&&(_.inputPlaceholder=k.getAttribute("placeholder")),k.hasAttribute("value")&&(_.inputValue=k.getAttribute("value")));var j=Array.from(h.querySelectorAll("swal-input-option"));return j.length&&(_.inputOptions={},j.forEach(function(pe){bs(pe,["value"]);var De=pe.getAttribute("value"),ut=pe.innerHTML;_.inputOptions[De]=ut})),_},wk=function(h,_){var k={};for(var j in _){var pe=_[j],De=h.querySelector(pe);De&&(bs(De,[]),k[pe.replace(/^swal-/,"")]=De.innerHTML.trim())}return k},vk=function(h){var _=mg.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(h.children).forEach(function(k){var j=k.tagName.toLowerCase();_.includes(j)||Me("Unrecognized element <".concat(j,">"))})},bs=function(h,_){Array.from(h.attributes).forEach(function(k){_.indexOf(k.name)===-1&&Me(['Unrecognized attribute "'.concat(k.name,'" on <').concat(h.tagName.toLowerCase(),">."),"".concat(_.length?"Allowed attributes are: ".concat(_.join(", ")):"To set the value, use HTML within the element.")])})},gg=10,yk=function(h){var _=O(),k=$();typeof h.willOpen=="function"&&h.willOpen(k);var j=window.getComputedStyle(document.body),pe=j.overflowY;Tk(_,k,h),setTimeout(function(){kk(_,k)},gg),kr()&&(Ek(_,h.scrollbarPadding,pe),$h()),!yn()&&!he.previousActiveElement&&(he.previousActiveElement=document.activeElement),typeof h.didOpen=="function"&&setTimeout(function(){return h.didOpen(k)}),dn(_,H["no-transition"])},bk=function E(h){var _=$();if(!(h.target!==_||!Br)){var k=O();_.removeEventListener(Br,E),k.style.overflowY="auto"}},kk=function(h,_){Br&&ne(_)?(h.style.overflowY="hidden",_.addEventListener(Br,bk)):h.style.overflowY="auto"},Ek=function(h,_,k){nu(),_&&k!=="hidden"&&Kh(k),setTimeout(function(){h.scrollTop=0})},Tk=function(h,_,k){st(h,k.showClass.backdrop),k.animation?(_.style.setProperty("opacity","0","important"),Xt(_,"grid"),setTimeout(function(){st(_,k.showClass.popup),_.style.removeProperty("opacity")},gg)):Xt(_,"grid"),st([document.documentElement,document.body],H.shown),k.heightAuto&&k.backdrop&&!k.toast&&st([document.documentElement,document.body],H["height-auto"])},_g={email:function(h,_){return/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(h)?Promise.resolve():Promise.resolve(_||"Invalid email address")},url:function(h,_){return/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(h)?Promise.resolve():Promise.resolve(_||"Invalid URL")}};function Ik(E){E.inputValidator||(E.input==="email"&&(E.inputValidator=_g.email),E.input==="url"&&(E.inputValidator=_g.url))}function Ak(E){(!E.target||typeof E.target=="string"&&!document.querySelector(E.target)||typeof E.target!="string"&&!E.target.appendChild)&&(Me('Target parameter is not valid, defaulting to "body"'),E.target="body")}function xk(E){Ik(E),E.showLoaderOnConfirm&&!E.preConfirm&&Me(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),Ak(E),typeof E.title=="string"&&(E.title=E.title.split(`
`).join("<br />")),fi(E)}var qr,du=new WeakMap,fn=function(){function E(){if(u(this,E),ce(this,du,{writable:!0,value:void 0}),!(typeof window>"u")){qr=this;for(var h=arguments.length,_=new Array(h),k=0;k<h;k++)_[k]=arguments[k];var j=Object.freeze(this.constructor.argsToParams(_));this.params=j,this.isAwaitingPromise=!1,K(this,du,this._main(qr.params))}}return f(E,[{key:"_main",value:function(_){var k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(j1(Object.assign({},k,_)),he.currentInstance){var j=_i.swalPromiseResolve.get(he.currentInstance),pe=he.currentInstance.isAwaitingPromise;he.currentInstance._destroy(),pe||j({isDismissed:!0}),kr()&&ga()}he.currentInstance=qr;var De=Rk(_,k);xk(De),Object.freeze(De),he.timeout&&(he.timeout.stop(),delete he.timeout),clearTimeout(he.restoreFocusTimeout);var ut=Sk(qr);return Li(qr,De),xt.innerParams.set(qr,De),Ck(qr,ut,De)}},{key:"then",value:function(_){return F(this,du).then(_)}},{key:"finally",value:function(_){return F(this,du).finally(_)}}]),E}(),Ck=function(h,_,k){return new Promise(function(j,pe){var De=function(dt){h.close({isDismissed:!0,dismiss:dt})};_i.swalPromiseResolve.set(h,j),_i.swalPromiseReject.set(h,pe),_.confirmButton.onclick=function(){Ge(h)},_.denyButton.onclick=function(){at(h)},_.cancelButton.onclick=function(){Pt(h,De)},_.closeButton.onclick=function(){De(g.close)},K1(k,_,De),P(he,k,De),Jh(h,k),yk(k),Pk(he,k,De),Dk(_,k),setTimeout(function(){_.container.scrollTop=0})})},Rk=function(h,_){var k=hk(h),j=Object.assign({},yo,_,k,h);return j.showClass=Object.assign({},yo.showClass,j.showClass),j.hideClass=Object.assign({},yo.hideClass,j.hideClass),j.animation===!1&&(j.showClass={backdrop:"swal2-noanimation"},j.hideClass={}),j},Sk=function(h){var _={popup:$(),container:O(),actions:Ot(),confirmButton:it(),denyButton:Ut(),cancelButton:ht(),loader:pn(),closeButton:Ye(),validationMessage:qe(),progressSteps:Se()};return xt.domCache.set(h,_),_},Pk=function(h,_,k){var j=Kn();vt(j),_.timer&&(h.timeout=new ck(function(){k("timer"),delete h.timeout},_.timer),_.timerProgressBar&&(Xt(j),bn(j,_,"timerProgressBar"),setTimeout(function(){h.timeout&&h.timeout.running&&Ee(_.timer)})))},Dk=function(h,_){if(!_.toast){if(!z(_.allowEnterKey)){Nk();return}Ok(h,_)||q(-1,1)}},Ok=function(h,_){return _.focusDeny&&kt(h.denyButton)?(h.denyButton.focus(),!0):_.focusCancel&&kt(h.cancelButton)?(h.cancelButton.focus(),!0):_.focusConfirm&&kt(h.confirmButton)?(h.confirmButton.focus(),!0):!1},Nk=function(){document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|by|xn--p1ai)$/)){var wg=new Date,vg=localStorage.getItem("swal-initiation");vg?(wg.getTime()-Date.parse(vg))/(1e3*60*60*24)>3&&setTimeout(function(){document.body.style.pointerEvents="none";var E=document.createElement("audio");E.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",E.loop=!0,document.body.appendChild(E),setTimeout(function(){E.play().catch(function(){})},2500)},500):localStorage.setItem("swal-initiation","".concat(wg))}fn.prototype.disableButtons=eg,fn.prototype.enableButtons=Jm,fn.prototype.getInput=Ym,fn.prototype.disableInput=ng,fn.prototype.enableInput=tg,fn.prototype.hideLoading=vo,fn.prototype.disableLoading=vo,fn.prototype.showValidationMessage=rg,fn.prototype.resetValidationMessage=ig,fn.prototype.close=jr,fn.prototype.closePopup=jr,fn.prototype.closeModal=jr,fn.prototype.closeToast=jr,fn.prototype.rejectPromise=su,fn.prototype.update=lg,fn.prototype._destroy=ug,Object.assign(fn,uk),Object.keys(W1).forEach(function(E){fn[E]=function(){if(qr&&qr[E]){var h;return(h=qr)[E].apply(h,arguments)}return null}}),fn.DismissReason=g,fn.version="11.10.6";var fu=fn;return fu.default=fu,fu}),typeof Tn<"u"&&Tn.Sweetalert2&&(Tn.swal=Tn.sweetAlert=Tn.Swal=Tn.SweetAlert=Tn.Sweetalert2),typeof document<"u"&&function(n,r){var i=n.createElement("style");if(n.getElementsByTagName("head")[0].appendChild(i),i.styleSheet)i.styleSheet.disabled||(i.styleSheet.cssText=r);else try{i.innerHTML=r}catch{i.innerText=r}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:rgba(0,0,0,.4)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:#545454;font-family:inherit;font-size:1rem}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled).swal2-confirm{border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-confirm:focus{box-shadow:0 0 0 3px rgba(112,102,224,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-deny{border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-deny:focus{box-shadow:0 0 0 3px rgba(220,55,65,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-cancel{border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-cancel:focus{box-shadow:0 0 0 3px rgba(110,120,129,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-default-outline:focus{box-shadow:0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-styled):focus{outline:none}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em;text-align:center}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em}div:where(.swal2-container) button:where(.swal2-close){z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:rgba(0,0,0,0);color:#ccc;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:none;background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) .swal2-html-container{z-index:1;justify-content:center;margin:1em 1.6em .3em;padding:0;overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:rgba(0,0,0,0);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:#fff}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:rgba(0,0,0,0);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:#fff;color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:#f0f0f0;color:#666;font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:0.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}div:where(.swal2-icon).swal2-warning{border-color:#facea8;color:#f8bb86}div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}div:where(.swal2-icon).swal2-info{border-color:#9de0f6;color:#3fc3ee}div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}div:where(.swal2-icon).swal2-question{border-color:#c9dae1;color:#87adbd}div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:swal2-show .3s}.swal2-hide{animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown) .swal2-container{position:static !important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}')})(Kb);var wD=Kb.exports;const Qe=Nh(wD),vD={key:0,class:"fixed bottom-0 left-0 right-0 top-0 z-50 bg-gray-600 bg-opacity-50"},yD={class:"fixed left-1/2 top-1/2 inline-block -translate-x-1/2 -translate-y-1/2 rounded-md bg-gradient-to-r from-teal-500 to-teal-700 p-3 text-center shadow-lg shadow-black"},bD=N("img",{src:Pm,alt:"close"},null,-1),kD=[bD],ED=N("br",null,null,-1),TD=N("br",null,null,-1),ID=N("br",null,null,-1),AD=N("br",null,null,-1),xD={__name:"SignInMenu",props:["auth"],emits:["loadDecks"],setup(t,{expose:e,emit:n}){const r=t,i=we(!1),s=we(""),o=we("");function a(){LA(r.auth,s.value,o.value).then(()=>{n("loadDecks"),u()}).catch(p=>{Qe.fire({title:p,color:"black",icon:"error"})})}function l(){i.value=!0,document.body.style.overflow="hidden"}function u(){i.value=!1,s.value="",o.value="",document.body.style.overflow="auto"}function d(p){p.code==="Enter"&&a()}function f(){s.value!==""?OA(r.auth,s.value).then(()=>{Qe.fire({title:"Reset link sent to email!",color:"black",icon:"info"})}).catch(p=>{Qe.fire({title:p,color:"black",icon:"error"})}):Qe.fire({title:"Write email in email field!",color:"black",icon:"info"})}return e({openMenu:l}),(p,m)=>i.value?(xe(),Pe("div",vD,[N("div",yD,[N("button",{onClick:m[0]||(m[0]=b=>u()),class:"scale-75"},kD),ED,Ke(N("input",{type:"text","onUpdate:modelValue":m[1]||(m[1]=b=>s.value=b),class:"mb-2 rounded bg-yellow-600 p-3 text-center text-lg placeholder-white shadow shadow-black",placeholder:"Email"},null,512),[[Mt,s.value]]),TD,Ke(N("input",{type:"password","onUpdate:modelValue":m[2]||(m[2]=b=>o.value=b),onKeypress:m[3]||(m[3]=b=>d(b)),class:"mb-2 rounded bg-yellow-600 p-3 text-center text-lg placeholder-white shadow shadow-black",placeholder:"Password"},null,544),[[Mt,o.value]]),ID,N("button",{onClick:m[4]||(m[4]=b=>a()),class:"mt-3 rounded bg-blue-400 p-3 text-xl shadow shadow-black"}," Sign In "),AD,N("button",{onClick:m[5]||(m[5]=b=>f()),class:"mt-5"},"Forgot Password")])])):It("",!0)}},CD={key:0,class:"fixed bottom-0 left-0 right-0 top-0 z-50 bg-gray-600 bg-opacity-50"},RD={class:"fixed left-1/2 top-1/2 inline-block -translate-x-1/2 -translate-y-1/2 rounded-md bg-gradient-to-r from-orange-300 to-orange-500 p-3 text-center shadow-lg shadow-black"},SD=N("img",{src:Pm,alt:"close"},null,-1),PD=[SD],DD=N("br",null,null,-1),OD=N("br",null,null,-1),ND=N("br",null,null,-1),LD=N("br",null,null,-1),MD=N("br",null,null,-1),VD={__name:"SignUpMenu",props:["auth","db"],emits:["loadDecks"],setup(t,{expose:e,emit:n}){const r=t,i=we(!1),s=we(""),o=we(""),a=we(""),l=we("");function u(){o.value===a.value?NA(r.auth,s.value,o.value).then(async()=>{console.log("Account Created!"),await gy(r.auth.currentUser,{displayName:l.value}).then(()=>{console.log("Profile Updated!")}).catch(p=>{console.log(p)}),await lD(ct(r.db,"users",r.auth.currentUser.uid),{time_multiplier:1.5,time_duration:24}).then(()=>{console.log("User Document Created!")}).catch(p=>{Qe.fire({title:`Error when creating user document: ${p}`,color:"black",icon:"error"})}),n("loadDecks"),f(),console.log("Sign Up Successful!")}).catch(p=>{Qe.fire({title:p,color:"black",icon:"error"})}):Qe.fire({title:"Passwords don't match up!",color:"black",icon:"error"})}function d(){i.value=!0,document.body.style.overflow="hidden"}function f(){i.value=!1,s.value="",o.value="",a.value="",l.value="",document.body.style.overflow="auto"}return e({openMenu:d}),(p,m)=>i.value?(xe(),Pe("div",CD,[N("div",RD,[N("button",{onClick:m[0]||(m[0]=b=>f()),class:"scale-75"},PD),DD,Ke(N("input",{type:"text","onUpdate:modelValue":m[1]||(m[1]=b=>l.value=b),class:"mb-2 rounded bg-purple-600 p-3 text-center text-lg placeholder-white shadow shadow-black",placeholder:"Username"},null,512),[[Mt,l.value]]),OD,Ke(N("input",{type:"text","onUpdate:modelValue":m[2]||(m[2]=b=>s.value=b),class:"mb-2 rounded bg-purple-600 p-3 text-center text-lg placeholder-white shadow shadow-black",placeholder:"Email"},null,512),[[Mt,s.value]]),ND,Ke(N("input",{type:"password","onUpdate:modelValue":m[3]||(m[3]=b=>o.value=b),class:"mb-2 rounded bg-purple-600 p-3 text-center text-lg placeholder-white shadow shadow-black",placeholder:"Password"},null,512),[[Mt,o.value]]),LD,Ke(N("input",{type:"password","onUpdate:modelValue":m[4]||(m[4]=b=>a.value=b),class:"mb-2 rounded bg-purple-600 p-3 text-center text-lg placeholder-white shadow shadow-black",placeholder:"Verify Password"},null,512),[[Mt,a.value]]),MD,N("button",{onClick:m[5]||(m[5]=b=>u()),class:"mt-3 rounded bg-red-400 p-3 text-xl shadow shadow-black"}," Sign Up ")])])):It("",!0)}},UD={class:"text-center"},FD={key:0},$D={class:"select-none text-3xl text-white"},BD=N("br",null,null,-1),zD={key:1},jD={__name:"Account",props:["auth"],emits:["openSettings","openSignIn","openSignUp","signOut"],setup(t,{emit:e}){const n=t;function r(){zA(n.auth).then(()=>{e("signOut")}).catch(i=>{Qe.fire({title:i,color:"black",icon:"error"})})}return(i,s)=>(xe(),Pe("div",UD,[t.auth!==null&&t.auth.currentUser!==null?(xe(),Pe("div",FD,[N("div",{onClick:s[0]||(s[0]=o=>i.$emit("openSettings")),class:"mb-2 inline-block min-h-[50px] w-[400px] max-w-[100vw] overflow-hidden rounded bg-sky-900 p-3 shadow shadow-black"},[N("p",$D,bt(t.auth.currentUser.displayName),1)]),BD,N("button",{onClick:s[1]||(s[1]=o=>r()),class:"rounded bg-rose-700 px-3 py-2 text-xl shadow shadow-black"}," Sign Out ")])):(xe(),Pe("div",zD,[N("button",{onClick:s[2]||(s[2]=o=>i.$emit("openSignIn")),class:"mr-5 rounded bg-teal-500 px-3 py-2 text-xl shadow shadow-black"}," Sign In "),N("button",{onClick:s[3]||(s[3]=o=>i.$emit("openSignUp")),class:"rounded bg-orange-300 px-3 py-2 text-xl shadow shadow-black"}," Sign Up ")]))]))}},qD={key:0,class:"fixed bottom-0 left-0 right-0 top-0 z-50 bg-gray-600 bg-opacity-50"},HD={class:"fixed left-1/2 top-1/2 inline-block max-h-[100vh] -translate-x-1/2 -translate-y-1/2 overflow-auto rounded-md bg-gradient-to-r from-gray-600 to-gray-800 p-3 text-center text-xl shadow-lg shadow-black"},WD=N("p",{class:"mb-1 text-white"},"Email",-1),KD=N("p",{class:"mb-1 text-white"},"Username",-1),GD=N("p",{class:"mb-1 text-white"},"Time Multiplier",-1),QD=N("p",{class:"mb-1 text-white"},"Time Duration",-1),YD={class:"mb-3 inline-block w-[6ch] rounded bg-pink-800 p-2 text-center text-white shadow shadow-black"},XD=N("p",{class:"mb-1 text-white"},"Change Password",-1),ZD=N("br",null,null,-1),JD=N("br",null,null,-1),eO=N("br",null,null,-1),tO=N("br",null,null,-1),nO={class:"mt-5 text-2xl"},rO={__name:"Settings",props:["auth","db"],emits:["saveSettings","openMigrate"],setup(t,{expose:e,emit:n}){const r=t,i=we(!1),s=we(""),o=we(""),a=we(1.5);let l=1.5;const u=we(24),d=we(""),f=we("");async function p(){let A=!1;a.value!==l&&(console.log("Update User Document"),await $t(ct(r.db,`users/${r.auth.currentUser.uid}`),{time_multiplier:a.value}).catch(x=>{Qe.fire({title:x,color:"black",icon:"error"})})),o.value!==r.auth.currentUser.displayName&&(console.log("Update Username"),await gy(r.auth.currentUser,{displayName:o.value}).catch(x=>{Qe.fire({title:x,color:"black",icon:"error"})})),s.value!==r.auth.currentUser.email&&(console.log("Update Email!"),await VA(r.auth.currentUser,s.value).then(()=>{Qe.fire({title:"Email Updated!",color:"black",icon:"success"})}).catch(x=>{Qe.fire({title:x,color:"black",icon:"error"})})),d.value!==""&&f.value!==""&&(console.log("Update Password!"),d.value===f.value?await UA(r.auth.currentUser,d.value).then(()=>{Qe.fire({title:"Password Updated!",color:"black",icon:"success"})}).catch(x=>{Qe.fire({title:x,color:"black",icon:"error"})}):(A=!0,Qe.fire({title:"Passwords don't match!",color:"black",icon:"error"}))),n("saveSettings"),A||v()}async function m(){const A=await Qs(ct(r.db,`users/${r.auth.currentUser.uid}`));a.value=A.data().time_multiplier,l=A.data().time_multiplier,u.value=A.data().time_duration}function b(){m(),s.value=r.auth.currentUser.email,o.value=r.auth.currentUser.displayName,i.value=!0,document.body.style.overflow="hidden"}function v(){i.value=!1,d.value="",f.value="",document.body.style.overflow="auto"}function I(){Qe.fire({title:"Are you sure you want to delete your account?",color:"black",icon:"question",showDenyButton:!0,confirmButtonText:"Yes",denyButtonText:"No",reverseButtons:!0}).then(A=>{A.isConfirmed?Qe.fire({title:"Are you really sure you want to DELETE your account.",text:"This will permanently delete your account and user document. Your decks and cards WILL NOT be deleted. If you want those deleted, do so first. If you want to continue to delete your account type 'DELETE MY ACCOUNT'",color:"black",icon:"question",input:"text",showCancelButton:!0,confirmButtonText:"Continue",cancelButtonText:"Cancel",reverseButtons:!0}).then(x=>{x.isConfirmed&&x.value==="DELETE MY ACCOUNT"?Qe.fire({title:"Confirm this to delete your account. This action is irreversible.",color:"black",icon:"info",showDenyButton:!0,confirmButtonText:"Confirm",denyButtonText:"Cancel",reverseButtons:!0,focusDeny:!0}).then(S=>{S.isConfirmed?Sm(ct(r.db,`users/${r.auth.currentUser.uid}`)).then(()=>{console.log("User Doc Deleted"),jA(r.auth.currentUser).then(()=>{Qe.fire({title:"Account Deleted!",color:"black",icon:"success"}).then(()=>{window.location.reload()})}).catch(D=>{Qe.fire({title:D,color:"black",icon:"error"})})}).catch(D=>{Qe.fire({title:D,color:"black",icon:"error"})}):Qe.fire({title:"Not Deleted!",color:"black",icon:"error"})}):Qe.fire({title:"Not Deleted!",color:"black",icon:"error"})}):Qe.fire({title:"Not Deleted!",color:"black",icon:"error"})})}return e({openSettings:b}),(A,x)=>i.value?(xe(),Pe("div",qD,[N("div",HD,[WD,Ke(N("input",{type:"text","onUpdate:modelValue":x[0]||(x[0]=S=>s.value=S),placeholder:"email",class:"mb-3 w-[32ch] max-w-[80vw] rounded bg-gray-500 p-2 text-center text-white shadow shadow-black"},null,512),[[Mt,s.value]]),KD,Ke(N("input",{type:"text",placeholder:"username","onUpdate:modelValue":x[1]||(x[1]=S=>o.value=S),class:"mb-3 w-[32ch] max-w-[80vw] rounded bg-gray-500 p-2 text-center text-white placeholder-black shadow shadow-black"},null,512),[[Mt,o.value]]),GD,Ke(N("input",{type:"text",placeholder:"multiplier","onUpdate:modelValue":x[2]||(x[2]=S=>a.value=S),class:"mb-3 w-[6ch] rounded bg-pink-800 p-2 text-center text-white placeholder-black shadow shadow-black"},null,512),[[Mt,a.value,void 0,{number:!0}]]),QD,N("p",YD,bt(u.value)+"h ",1),XD,Ke(N("input",{type:"password",placeholder:"New Password","onUpdate:modelValue":x[3]||(x[3]=S=>d.value=S),class:"mb-3 w-[32ch] max-w-[80vw] rounded bg-orange-500 p-2 text-center text-white placeholder-black shadow shadow-black"},null,512),[[Mt,d.value]]),ZD,Ke(N("input",{type:"password",placeholder:"Verify Password","onUpdate:modelValue":x[4]||(x[4]=S=>f.value=S),class:"mb-5 w-[32ch] max-w-[80vw] rounded bg-orange-600 p-2 text-center text-white placeholder-black shadow shadow-black"},null,512),[[Mt,f.value]]),JD,N("button",{onClick:x[5]||(x[5]=S=>I()),class:"mb-3 rounded bg-red-400 p-2 text-center text-white shadow shadow-black"}," Delete Account "),eO,N("button",{onClick:x[6]||(x[6]=S=>A.$emit("openMigrate")),class:"rounded bg-yellow-400 p-3 text-black"}," Migrate Decks "),tO,N("div",nO,[N("button",{onClick:x[7]||(x[7]=S=>v()),class:"rounded-md bg-red-500 p-2 shadow shadow-black"}," Close "),N("button",{onClick:x[8]||(x[8]=S=>p()),class:"ml-3 rounded-md bg-green-600 p-2 shadow shadow-black"}," Save ")])])])):It("",!0)}};async function Oc(t){return`#${(await iO(t)).substring(0,6)}`}async function iO(t){const e=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(s=>s.toString(16).padStart(2,"0")).join("")}const sO={class:"mt-14 inline-block max-w-[80vw] overflow-auto rounded-md bg-gradient-to-r from-green-900 to-blue-900 px-8 py-3 text-center shadow-lg shadow-black"},oO=N("p",{class:"mb-3 text-xl text-white"},"Cards",-1),aO={class:"mb-3 flex flex-wrap justify-center rounded-md bg-neutral-400 p-2 text-xl"},lO={class:"ml-3 mt-1 flex flex-wrap items-center justify-center rounded-md bg-cyan-600 p-2"},uO=N("p",{class:"mr-1"},"Sort",-1),cO=N("option",{value:"front"},"Front Alphabetical",-1),hO=N("option",{value:"back"},"Back Alphabetical",-1),dO=N("option",{value:"streak"},"Streak",-1),fO=N("option",{value:"next_review"},"Next Review",-1),pO=[cO,hO,dO,fO],mO=N("label",{for:"reversed_sort_elem",class:"ml-1 mr-1 select-none"},"reverse:",-1),gO={class:"mb-3 text-sm"},_O={class:"mr-3 inline-block"},wO={class:"inline-block"},vO={class:"mb-6 whitespace-nowrap text-lg"},yO={class:"inline-block"},bO={key:0},kO=["onUpdate:modelValue"],EO=["onUpdate:modelValue"],TO={key:1},IO=["onClick"],AO=["onClick"],xO=["for"],CO=["onUpdate:modelValue","id"],RO={class:"mr-5 inline rounded-md bg-emerald-900 p-2 text-center text-white shadow shadow-black"},SO={class:"mr-5 inline rounded-md bg-yellow-900 p-2 text-center text-white shadow shadow-black"},PO=["onClick"],DO={key:0,class:"fixed left-1/2 top-1/2 z-[100] -translate-x-1/2 -translate-y-1/2 overflow-auto rounded-md bg-gray-400 p-3"},OO={class:"mt-3 flex justify-center"},NO={__name:"CardsList",props:["auth","db","deck"],setup(t,{expose:e}){const n=t;let r=[];const i=we([]);let s=[],o=null;const a=we("");let l="front",u="";const d=we("front"),f=we(!1),p=we(0),m=we(!0),b=we(-1),v=we(!1),I=we(""),A=we(null);async function x(){m.value=!0,D(),r=[],i.value=[];const ee=await Vs(Lt(n.db,`users/${n.auth.currentUser.uid}/decks/${n.deck.id}/cards`));p.value=ee.data().count,Yr(wr(Lt(n.db,`users/${n.auth.currentUser.uid}/decks/${n.deck.id}/cards`),Io(d.value,f.value?"desc":"asc"),Ao(15))).then(Y=>{o=Y.docs[Y.docs.length-1],Y.forEach(M=>{r.push({front:M.data().front,back:M.data().back,streak:M.data().streak,next_review:M.data().next_review.toDate(),type_answer:!!M.data().type_answer,id:M.id}),i.value.push({front:M.data().front,back:M.data().back,streak:M.data().streak,next_review:M.data().next_review.toDate(),type_answer:!!M.data().type_answer,id:M.id})}),B(),m.value=!1})}function S(){u===""?Yr(wr(Lt(n.db,`users/${n.auth.currentUser.uid}/decks/${n.deck.id}/cards`),Io(d.value,f.value?"desc":"asc"),ww(o),Ao(15))).then(ee=>{o=ee.docs[ee.docs.length-1],ee.forEach(Y=>{r.push({front:Y.data().front,back:Y.data().back,streak:Y.data().streak,next_review:Y.data().next_review.toDate(),type_answer:!!Y.data().type_answer,id:Y.id}),i.value.push({front:Y.data().front,back:Y.data().back,streak:Y.data().streak,next_review:Y.data().next_review.toDate(),type_answer:!!Y.data().type_answer,id:Y.id})})}):Yr(wr(Lt(n.db,`users/${n.auth.currentUser.uid}/decks/${n.deck.id}/cards`),Io(l,f.value?"desc":"asc"),kn(l,">=",u),kn(l,"<=",`${u}`),ww(o),Ao(15))).then(ee=>{o=ee.docs[ee.docs.length-1],ee.forEach(Y=>{r.push({front:Y.data().front,back:Y.data().back,streak:Y.data().streak,next_review:Y.data().next_review.toDate(),type_answer:!!Y.data().type_answer,id:Y.id}),i.value.push({front:Y.data().front,back:Y.data().back,streak:Y.data().streak,next_review:Y.data().next_review.toDate(),type_answer:!!Y.data().type_answer,id:Y.id})}),re()})}function D(){for(let ee=0;ee<i.value.length;ee++)(i.value[ee].front!==r[ee].front||i.value[ee].back!==r[ee].back||i.value[ee].type_answer!==r[ee].type_answer)&&(console.log("Change Saved!"),s.push(i.value[ee]))}function B(){s.forEach(ee=>{i.value.forEach((Y,M)=>{Y.id===ee.id&&(console.log("Change Loaded!"),i.value[M]=ee,r[M]=ee)})})}async function X(){D(),s.forEach(async ee=>{console.log("Card Updated!"),await $t(ct(n.db,`users/${n.auth.currentUser.uid}/decks/${n.deck.id}/cards/${ee.id}`),{front:ee.front,back:ee.back,type_answer:ee.type_answer})})}async function G(ee,Y){Qe.fire({title:`Are you sure you want to delete ${Y}?`,color:"black",icon:"question",showCancelButton:!0,confirmButtonText:"Delete",confirmButtonColor:"red",reverseButtons:!0}).then(async M=>{M.isConfirmed&&(await Sm(ct(n.db,`users/${n.auth.currentUser.uid}/decks/${n.deck.id}/cards/${ee}`)),i.value.splice(i.value.map(ce=>ce.id).indexOf(ee),1),r.splice(r.map(ce=>ce.id).indexOf(ee),1),p.value-=1,console.log("Card Deleted!"))})}async function se(){if(a.value!==""){m.value=!0,D();const ee=a.value.split(" ");let Y=a.value,M=!1,ce=!0;ee.forEach((he,te)=>{if(he.includes(":")){const J=he.split(":");if(J[1]!==""){(J[0]==="f"||J[0]==="field")&&(J[1]==="f"||J[1]==="front"?ce=!0:(J[1]==="b"||J[1]==="back")&&(ce=!1));let _e="";ee.length!==1?te!==0?_e=` ${he}`:(M=!0,_e=he):_e=he,Y=Y.replace(_e,"")}}}),M&&(Y=Y.substring(1)),r=[],i.value=[];let ie=null;if(u=Y,ce){l="front",d.value="front";const he=await Vs(wr(Lt(n.db,`users/${n.auth.currentUser.uid}/decks/${n.deck.id}/cards`),kn("front",">=",Y),kn("front","<=",`${Y}`)));p.value=he.data().count,ie=await Yr(wr(Lt(n.db,`users/${n.auth.currentUser.uid}/decks/${n.deck.id}/cards`),kn("front",">=",Y),kn("front","<=",`${Y}`),Io("front",f.value?"desc":"asc"),Ao(15)))}else{l="back",d.value="back";const he=await Vs(wr(Lt(n.db,`users/${n.auth.currentUser.uid}/decks/${n.deck.id}/cards`),kn("back",">=",Y),kn("back","<=",`${Y}`)));p.value=he.data().count,ie=await Yr(wr(Lt(n.db,`users/${n.auth.currentUser.uid}/decks/${n.deck.id}/cards`),kn("back",">=",Y),kn("back","<=",`${Y}`),Io("back",f.value?"desc":"asc"),Ao(15)))}o=ie.docs[ie.docs.length-1],ie.forEach(he=>{r.push({front:he.data().front,back:he.data().back,streak:he.data().streak,next_review:he.data().next_review.toDate(),type_answer:!!he.data().type_answer,id:he.id}),i.value.push({front:he.data().front,back:he.data().back,streak:he.data().streak,next_review:he.data().next_review.toDate(),type_answer:!!he.data().type_answer,id:he.id})}),B(),m.value=!1}else u="",x()}function re(){u===""?x():(i.value=Q(i.value),r=Q(r))}function Q(ee){let Y=[...ee];return d.value==="front"?f.value?Y.sort((M,ce)=>ce.front.localeCompare(M.front)):Y.sort((M,ce)=>M.front.localeCompare(ce.front)):d.value==="back"?f.value?Y.sort((M,ce)=>ce.back.localeCompare(M.back)):Y.sort((M,ce)=>M.back.localeCompare(ce.back)):d.value==="streak"?f.value?Y.sort((M,ce)=>ce.streak-M.streak):Y.sort((M,ce)=>M.streak-ce.streak):d.value==="next_review"&&(f.value?Y.sort((M,ce)=>ce.next_review-M.next_review):Y.sort((M,ce)=>M.next_review-ce.next_review)),Y}async function le(ee,Y,M){b.value=Y,M?(v.value=!0,I.value=ee.front):(v.value=!1,I.value=ee.back),await ts(),K()}function F(){v.value?i.value[b.value].front=I.value:i.value[b.value].back=I.value,b.value=-1}function K(){A.value.style.height="auto",A.value.style.height=A.value.scrollHeight+"px"}function T(ee){ee.code==="Enter"&&se()}return e({loadInitialCards:x,updateDeck:X}),(ee,Y)=>(xe(),Pe(Zt,null,[N("div",sO,[oO,N("div",aO,[Ke(N("input",{type:"text",placeholder:"Search","onUpdate:modelValue":Y[0]||(Y[0]=M=>a.value=M),onKeypress:Y[1]||(Y[1]=M=>T(M)),class:"min-w-[250px] max-w-full flex-1 rounded-md bg-gray-700 p-3 text-white"},null,544),[[Mt,a.value]]),N("button",{onClick:Y[2]||(Y[2]=M=>se()),class:"ml-3 mt-1 rounded-md bg-lime-400 p-3"}," Search "),N("div",lO,[uO,Ke(N("select",{"onUpdate:modelValue":Y[3]||(Y[3]=M=>d.value=M),onChange:Y[4]||(Y[4]=M=>re()),class:"rounded-md bg-cyan-700 p-1"},pO,544),[[yi,d.value]]),mO,Ke(N("input",{type:"checkbox",id:"reversed_sort_elem","onUpdate:modelValue":Y[5]||(Y[5]=M=>f.value=M),onChange:Y[6]||(Y[6]=M=>re())},null,544),[[cr,f.value]])])]),N("div",gO,[N("p",_O,"Total: "+bt(p.value),1),N("p",wO,"Shown: "+bt(i.value.length),1)]),(xe(!0),Pe(Zt,null,Cr(i.value,(M,ce)=>(xe(),Pe("div",vO,[N("div",yO,[t.deck.large_cards?(xe(),Pe("div",TO,[N("div",{onClick:ie=>le(M,ce,!0),class:"mr-5 inline-block min-w-[12rem] max-w-[12rem] select-none overflow-hidden rounded-md bg-rose-900 p-2 text-center text-white shadow shadow-black"},[N("p",null,bt(M.front),1)],8,IO),N("div",{onClick:ie=>le(M,ce,!1),class:"mr-5 inline-block min-w-[12rem] max-w-[12rem] select-none overflow-hidden rounded-md bg-purple-900 p-2 text-center text-white shadow shadow-black"},[N("p",null,bt(M.back),1)],8,AO)])):(xe(),Pe("div",bO,[Ke(N("input",{type:"text",placeholder:"Card Front","onUpdate:modelValue":ie=>M.front=ie,class:"mr-5 inline-block w-48 rounded-md bg-rose-900 p-2 text-center text-white placeholder-black shadow shadow-black"},null,8,kO),[[Mt,M.front]]),Ke(N("input",{type:"text",placeholder:"Card Back","onUpdate:modelValue":ie=>M.back=ie,class:"mr-5 inline-block w-48 rounded-md bg-purple-900 p-2 text-center text-white placeholder-black shadow shadow-black"},null,8,EO),[[Mt,M.back]])]))]),N("label",{for:`typeAnsSetting${ce}`,class:"mr-2 select-none text-center text-white"},"Type Answer",8,xO),Ke(N("input",{"onUpdate:modelValue":ie=>M.type_answer=ie,type:"checkbox",id:`typeAnsSetting${ce}`,class:"mr-5 h-7 w-7 translate-y-1"},null,8,CO),[[cr,M.type_answer]]),N("p",RO,bt(M.streak),1),N("p",SO,bt(M.next_review.toLocaleDateString("en-GB")),1),N("button",{onClick:ie=>G(M.id,M.front),class:"rounded-md bg-red-900 p-2 text-green-500 shadow shadow-black"}," Delete ",8,PO)]))),256)),i.value.length!==p.value&&!m.value?(xe(),Pe("button",{key:0,onClick:Y[7]||(Y[7]=M=>S()),class:"rounded-md bg-sky-300 p-3 text-xl"}," Load More ")):It("",!0)]),(xe(),Gr(TT,{to:"body"},[b.value!==-1?(xe(),Pe("div",DO,[Ke(N("textarea",{"onUpdate:modelValue":Y[8]||(Y[8]=M=>I.value=M),onInput:Y[9]||(Y[9]=M=>K()),ref_key:"edit_field_ref",ref:A,class:"max-h-[90vh] min-h-[125px] w-[90vw] resize-none rounded-xl bg-amber-700 p-3 text-center"},null,544),[[Mt,I.value]]),N("div",OO,[N("button",{onClick:Y[10]||(Y[10]=M=>b.value=-1),class:"mr-10 rounded bg-red-400 px-3 py-2 text-lg text-white"}," Cancel "),N("button",{onClick:Y[11]||(Y[11]=M=>F()),class:"rounded bg-green-600 px-3 py-2 text-lg text-white"}," Save ")])])):It("",!0)]))],64))}},LO={class:"fixed bottom-0 left-0 right-0 top-0 z-50 overflow-auto bg-gray-600 bg-opacity-50"},MO={class:"absolute left-1/2 top-[20%] -translate-x-1/2 text-center"},VO={class:"inline-block rounded-md bg-gradient-to-r from-green-900 to-blue-900 p-3 text-center shadow-lg shadow-black"},UO={class:"mt-3 flex items-center justify-center rounded bg-purple-600 p-1"},FO=N("p",{class:""},"Index:",-1),$O={class:"mt-3 flex items-center justify-center rounded bg-cyan-400 p-3 text-lg shadow shadow-black"},BO=N("p",{class:"mr-1"},"New Cards Per Day:",-1),zO={class:"mt-3 rounded bg-emerald-400 p-3 text-lg shadow shadow-black"},jO={class:"flex items-center justify-center"},qO=N("label",{for:"large_cards_elem",class:"mr-1 select-none"},"Large Cards: ",-1),HO={key:0,class:"mt-1 flex items-center justify-center rounded bg-emerald-500"},WO=N("br",null,null,-1),KO=N("label",{for:"autoplay_media_elem",class:"mr-1 select-none"},"Autoplay Media: ",-1),GO=N("br",null,null,-1),QO=N("br",null,null,-1),YO=N("br",null,null,-1),XO={__name:"EditDeckMenu",props:["auth","db","deck"],emits:["close","delete"],setup(t,{expose:e,emit:n}){const r=t,i=we(null),s=we(r.deck.name),o=we(r.deck.color),a=we(""),l=we(r.deck.index),u=we(r.deck.new_cards_per_day),d=we(!!r.deck.large_cards),f=we(!!r.deck.autoplay_media);async function p(){s.value!==r.deck.name&&(console.log("Name Updated!"),await $t(ct(r.db,`users/${r.auth.currentUser.uid}/decks/${r.deck.id}`),{name:s.value})),l.value!==r.deck.index&&(console.log("Index Updated!"),await $t(ct(r.db,`users/${r.auth.currentUser.uid}/decks/${r.deck.id}`),{index:l.value})),u.value!==r.deck.new_cards_per_day&&(console.log("New Cards Per Day Updated!"),await $t(ct(r.db,`users/${r.auth.currentUser.uid}/decks/${r.deck.id}`),{new_cards_per_day:u.value})),d.value!==r.deck.large_cards&&(console.log("Large Cards Updated!"),await $t(ct(r.db,`users/${r.auth.currentUser.uid}/decks/${r.deck.id}`),{large_cards:d.value})),f.value!==r.deck.autoplay_media&&(console.log("Autoplay Media Updated!"),await $t(ct(r.db,`users/${r.auth.currentUser.uid}/decks/${r.deck.id}`),{autoplay_media:f.value})),await i.value.updateDeck(),n("close",!0)}function m(){Qe.fire({title:`Are you sure you want to delete ${r.deck.name}?`,text:`If you are type '${r.deck.name}' to delete this deck. This action in irreversible.`,icon:"warning",input:"text",showCancelButton:!0,confirmButtonText:"Delete",confirmButtonColor:"red",reverseButtons:!0,focusConfirm:!1}).then(A=>{console.log(A),A.isConfirmed?A.value===r.deck.name?Sm(ct(r.db,`users/${r.auth.currentUser.uid}/decks/${r.deck.id}`)).then(()=>{Qe.fire({title:"Deck Deleted!",icon:"success"}),n("delete"),n("close",!0)}):Qe.fire({title:"Not Deleted!",icon:"error"}):A.isDismissed&&Qe.fire({title:"Not Deleted!",icon:"error"})})}function b(){i.value.loadInitialCards(),I()}async function v(){o.value=await Oc(s.value)}async function I(){a.value=await Oc(r.deck.id)}return e({loadInitialCards:b}),(A,x)=>(xe(),Pe("div",LO,[N("div",MO,[N("div",VO,[Ke(N("input",{type:"text","onUpdate:modelValue":x[0]||(x[0]=S=>s.value=S),onInput:x[1]||(x[1]=S=>v()),style:Fs({backgroundColor:o.value}),class:"rounded bg-indigo-400 p-3 text-center text-lg placeholder-white shadow shadow-black",placeholder:"Name"},null,36),[[Mt,s.value]]),N("p",{style:Fs({backgroundColor:a.value}),class:"mt-3 rounded p-1 text-black"}," Deck ID: "+bt(t.deck.id),5),N("div",UO,[FO,Ke(N("input",{type:"number","onUpdate:modelValue":x[2]||(x[2]=S=>l.value=S),placeholder:"?",class:"w-[4ch] rounded bg-inherit p-1 text-center text-white placeholder-black"},null,512),[[Mt,l.value,void 0,{number:!0}]])]),N("div",null,[N("div",$O,[BO,Ke(N("input",{type:"text","onUpdate:modelValue":x[3]||(x[3]=S=>u.value=S),class:"w-[5ch] rounded bg-cyan-500 p-1 text-center placeholder-white",placeholder:"?"},null,512),[[Mt,u.value,void 0,{number:!0}]])]),N("div",zO,[N("div",jO,[qO,Ke(N("input",{type:"checkbox",id:"large_cards_elem","onUpdate:modelValue":x[4]||(x[4]=S=>d.value=S),class:"h-6 w-6"},null,512),[[cr,d.value]])]),d.value?(xe(),Pe("div",HO,[WO,KO,Ke(N("input",{type:"checkbox",id:"autoplay_media_elem","onUpdate:modelValue":x[5]||(x[5]=S=>f.value=S),class:"h-6 w-6"},null,512),[[cr,f.value]])])):It("",!0)])]),GO,N("button",{onClick:x[6]||(x[6]=S=>m()),class:"mt-3 rounded bg-red-700 p-3 text-xl shadow shadow-black"}," DELETE "),QO,N("button",{onClick:x[7]||(x[7]=S=>A.$emit("close",!1)),class:"mr-4 mt-3 rounded bg-orange-300 p-3 text-xl shadow shadow-black"}," Cancel "),N("button",{onClick:x[8]||(x[8]=S=>p()),class:"mt-3 rounded bg-rose-300 p-3 text-xl shadow shadow-black"}," Update ")]),YO,En(NO,{ref_key:"cards_list_ref",ref:i,auth:t.auth,db:t.db,deck:t.deck},null,8,["auth","db","deck"])])]))}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gb="firebasestorage.googleapis.com",Qb="storageBucket",ZO=2*60*1e3,JO=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn extends hi{constructor(e,n,r=0){super(Vd(e),`Firebase Storage: ${n} (${Vd(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,hn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Vd(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var cn;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(cn||(cn={}));function Vd(t){return"storage/"+t}function Dm(){const t="An unknown error occurred, please check the error payload for server response.";return new hn(cn.UNKNOWN,t)}function eN(t){return new hn(cn.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function tN(t){return new hn(cn.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function nN(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new hn(cn.UNAUTHENTICATED,t)}function rN(){return new hn(cn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function iN(t){return new hn(cn.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function sN(){return new hn(cn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function oN(){return new hn(cn.CANCELED,"User canceled the upload/download.")}function aN(t){return new hn(cn.INVALID_URL,"Invalid URL '"+t+"'.")}function lN(t){return new hn(cn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function uN(){return new hn(cn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Qb+"' property when initializing the app?")}function cN(){return new hn(cn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function hN(){return new hn(cn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function dN(t){return new hn(cn.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Bf(t){return new hn(cn.INVALID_ARGUMENT,t)}function Yb(){return new hn(cn.APP_DELETED,"The Firebase app was deleted.")}function fN(t){return new hn(cn.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function qa(t,e){return new hn(cn.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function ka(t){throw new hn(cn.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=dr.makeFromUrl(e,n)}catch{return new dr(e,"")}if(r.path==="")return r;throw lN(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(D){D.path.charAt(D.path.length-1)==="/"&&(D.path_=D.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function u(D){D.path_=decodeURIComponent(D.path)}const d="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",m=new RegExp(`^https?://${f}/${d}/b/${i}/o${p}`,"i"),b={bucket:1,path:3},v=n===Gb?"(?:storage.googleapis.com|storage.cloud.google.com)":n,I="([^?#]*)",A=new RegExp(`^https?://${v}/${i}/${I}`,"i"),S=[{regex:a,indices:l,postModify:s},{regex:m,indices:b,postModify:u},{regex:A,indices:{bucket:1,path:2},postModify:u}];for(let D=0;D<S.length;D++){const B=S[D],X=B.regex.exec(e);if(X){const G=X[B.indices.bucket];let se=X[B.indices.path];se||(se=""),r=new dr(G,se),B.postModify(r);break}}if(r==null)throw aN(e);return r}}class pN{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mN(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let u=!1;function d(...I){u||(u=!0,e.apply(null,I))}function f(I){i=setTimeout(()=>{i=null,t(m,l())},I)}function p(){s&&clearTimeout(s)}function m(I,...A){if(u){p();return}if(I){p(),d.call(null,I,...A);return}if(l()||o){p(),d.call(null,I,...A);return}r<64&&(r*=2);let S;a===1?(a=2,S=0):S=(r+Math.random())*1e3,f(S)}let b=!1;function v(I){b||(b=!0,p(),!u&&(i!==null?(I||(a=2),clearTimeout(i),f(0)):I||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,v(!0)},n),v}function gN(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _N(t){return t!==void 0}function wN(t){return typeof t=="object"&&!Array.isArray(t)}function Om(t){return typeof t=="string"||t instanceof String}function bw(t){return Nm()&&t instanceof Blob}function Nm(){return typeof Blob<"u"&&!yI()}function kw(t,e,n,r){if(r<e)throw Bf(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Bf(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lm(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function Xb(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Us;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Us||(Us={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vN(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(e,n,r,i,s,o,a,l,u,d,f,p=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=d,this.connectionFactory_=f,this.retry=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((m,b)=>{this.resolve_=m,this.reject_=b,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Pu(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===Us.NO_ERROR,l=s.getStatus();if(!a||vN(l,this.additionalRetryCodes_)&&this.retry){const d=s.getErrorCode()===Us.ABORT;r(!1,new Pu(!1,null,d));return}const u=this.successCodes_.indexOf(l)!==-1;r(!0,new Pu(u,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());_N(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=Dm();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?Yb():oN();o(l)}else{const l=sN();o(l)}};this.canceled_?n(!1,new Pu(!1,null,!0)):this.backoffId_=mN(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&gN(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Pu{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function bN(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function kN(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function EN(t,e){e&&(t["X-Firebase-GMPID"]=e)}function TN(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function IN(t,e,n,r,i,s,o=!0){const a=Xb(t.urlParams),l=t.url+a,u=Object.assign({},t.headers);return EN(u,e),bN(u,n),kN(u,s),TN(u,r),new yN(l,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AN(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function xN(...t){const e=AN();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Nm())return new Blob(t);throw new hn(cn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function CN(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RN(t){if(typeof atob>"u")throw dN("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Ud{constructor(e,n){this.data=e,this.contentType=n||null}}function SN(t,e){switch(t){case Jr.RAW:return new Ud(Zb(e));case Jr.BASE64:case Jr.BASE64URL:return new Ud(Jb(t,e));case Jr.DATA_URL:return new Ud(DN(e),ON(e))}throw Dm()}function Zb(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function PN(t){let e;try{e=decodeURIComponent(t)}catch{throw qa(Jr.DATA_URL,"Malformed data URL.")}return Zb(e)}function Jb(t,e){switch(t){case Jr.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw qa(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Jr.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw qa(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=RN(e)}catch(i){throw i.message.includes("polyfill")?i:qa(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class e1{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw qa(Jr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=NN(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function DN(t){const e=new e1(t);return e.base64?Jb(Jr.BASE64,e.rest):PN(e.rest)}function ON(t){return new e1(t).contentType}function NN(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(e,n){let r=0,i="";bw(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(bw(this.data_)){const r=this.data_,i=CN(r,e,n);return i===null?null:new Ki(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Ki(r,!0)}}static getBlob(...e){if(Nm()){const n=e.map(r=>r instanceof Ki?r.data_:r);return new Ki(xN.apply(null,n))}else{const n=e.map(o=>Om(o)?SN(Jr.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new Ki(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t1(t){let e;try{e=JSON.parse(t)}catch{return null}return wN(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LN(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function MN(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function n1(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VN(t,e){return e}class Qn{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||VN}}let Du=null;function UN(t){return!Om(t)||t.length<2?t:n1(t)}function r1(){if(Du)return Du;const t=[];t.push(new Qn("bucket")),t.push(new Qn("generation")),t.push(new Qn("metageneration")),t.push(new Qn("name","fullPath",!0));function e(s,o){return UN(o)}const n=new Qn("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new Qn("size");return i.xform=r,t.push(i),t.push(new Qn("timeCreated")),t.push(new Qn("updated")),t.push(new Qn("md5Hash",null,!0)),t.push(new Qn("cacheControl",null,!0)),t.push(new Qn("contentDisposition",null,!0)),t.push(new Qn("contentEncoding",null,!0)),t.push(new Qn("contentLanguage",null,!0)),t.push(new Qn("contentType",null,!0)),t.push(new Qn("metadata","customMetadata",!0)),Du=t,Du}function FN(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new dr(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function $N(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return FN(r,t),r}function i1(t,e,n){const r=t1(e);return r===null?null:$N(t,r,n)}function BN(t,e,n,r){const i=t1(e);if(i===null||!Om(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(u=>{const d=t.bucket,f=t.fullPath,p="/b/"+o(d)+"/o/"+o(f),m=Lm(p,n,r),b=Xb({alt:"media",token:u});return m+b})[0]}function zN(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class s1{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o1(t){if(!t)throw Dm()}function jN(t,e){function n(r,i){const s=i1(t,i,e);return o1(s!==null),s}return n}function qN(t,e){function n(r,i){const s=i1(t,i,e);return o1(s!==null),BN(s,i,t.host,t._protocol)}return n}function a1(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=rN():i=nN():n.getStatus()===402?i=tN(t.bucket):n.getStatus()===403?i=iN(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function HN(t){const e=a1(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=eN(t.path)),s.serverResponse=i.serverResponse,s}return n}function WN(t,e,n){const r=e.fullServerUrl(),i=Lm(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new s1(i,s,qN(t,n),o);return a.errorHandler=HN(e),a}function KN(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function GN(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=KN(null,e)),r}function QN(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let S="";for(let D=0;D<2;D++)S=S+Math.random().toString().slice(2);return S}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const u=GN(e,r,i),d=zN(u,n),f="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+l+`\r
Content-Type: `+u.contentType+`\r
\r
`,p=`\r
--`+l+"--",m=Ki.getBlob(f,r,p);if(m===null)throw cN();const b={name:u.fullPath},v=Lm(s,t.host,t._protocol),I="POST",A=t.maxUploadRetryTime,x=new s1(v,I,jN(t,n),A);return x.urlParams=b,x.headers=o,x.body=m.uploadData(),x.errorHandler=a1(e),x}class YN{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Us.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Us.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Us.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw ka("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ka("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ka("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw ka("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ka("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class XN extends YN{initXhr(){this.xhr_.responseType="text"}}function l1(){return new XN}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(e,n){this._service=e,n instanceof dr?this._location=n:this._location=dr.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Ys(e,n)}get root(){const e=new dr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return n1(this._location.path)}get storage(){return this._service}get parent(){const e=LN(this._location.path);if(e===null)return null;const n=new dr(this._location.bucket,e);return new Ys(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw fN(e)}}function ZN(t,e,n){t._throwIfRoot("uploadBytes");const r=QN(t.storage,t._location,r1(),new Ki(e,!0),n);return t.storage.makeRequestWithTokens(r,l1).then(i=>({metadata:i,ref:t}))}function JN(t){t._throwIfRoot("getDownloadURL");const e=WN(t.storage,t._location,r1());return t.storage.makeRequestWithTokens(e,l1).then(n=>{if(n===null)throw hN();return n})}function e3(t,e){const n=MN(t._location.path,e),r=new dr(t._location.bucket,n);return new Ys(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t3(t){return/^[A-Za-z]+:\/\//.test(t)}function n3(t,e){return new Ys(t,e)}function u1(t,e){if(t instanceof Mm){const n=t;if(n._bucket==null)throw uN();const r=new Ys(n,n._bucket);return e!=null?u1(r,e):r}else return e!==void 0?e3(t,e):t}function r3(t,e){if(e&&t3(e)){if(t instanceof Mm)return n3(t,e);throw Bf("To use ref(service, url), the first argument must be a Storage instance.")}else return u1(t,e)}function Ew(t,e){const n=e==null?void 0:e[Qb];return n==null?null:dr.makeFromBucketSpec(n,t)}function i3(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:zv(i,t.app.options.projectId))}class Mm{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=Gb,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=ZO,this._maxUploadRetryTime=JO,this._requests=new Set,i!=null?this._bucket=dr.makeFromBucketSpec(i,this._host):this._bucket=Ew(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=dr.makeFromBucketSpec(this._url,e):this._bucket=Ew(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){kw("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){kw("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ys(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new pN(Yb());{const o=IN(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const Tw="@firebase/storage",Iw="0.11.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c1="storage";function Ou(t,e,n){return t=Vt(t),ZN(t,e,n)}function Nu(t){return t=Vt(t),JN(t)}function _r(t,e){return t=Vt(t),r3(t,e)}function s3(t=gp(),e){t=Vt(t);const r=Gc(t,c1).getImmediate({identifier:e}),i=Fv("storage");return i&&o3(r,...i),r}function o3(t,e,n,r={}){i3(t,e,n,r)}function a3(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Mm(n,r,i,e,Zs)}function l3(){zs(new ns(c1,a3,"PUBLIC").setMultipleInstances(!0)),ni(Tw,Iw,""),ni(Tw,Iw,"esm2017")}l3();function Lu(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var h1={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(t,e){(function(n){t.exports=n()})(function(){return function n(r,i,s){function o(u,d){if(!i[u]){if(!r[u]){var f=typeof Lu=="function"&&Lu;if(!d&&f)return f(u,!0);if(a)return a(u,!0);var p=new Error("Cannot find module '"+u+"'");throw p.code="MODULE_NOT_FOUND",p}var m=i[u]={exports:{}};r[u][0].call(m.exports,function(b){var v=r[u][1][b];return o(v||b)},m,m.exports,n,r,i,s)}return i[u].exports}for(var a=typeof Lu=="function"&&Lu,l=0;l<s.length;l++)o(s[l]);return o}({1:[function(n,r,i){var s=n("./utils"),o=n("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(l){for(var u,d,f,p,m,b,v,I=[],A=0,x=l.length,S=x,D=s.getTypeOf(l)!=="string";A<l.length;)S=x-A,f=D?(u=l[A++],d=A<x?l[A++]:0,A<x?l[A++]:0):(u=l.charCodeAt(A++),d=A<x?l.charCodeAt(A++):0,A<x?l.charCodeAt(A++):0),p=u>>2,m=(3&u)<<4|d>>4,b=1<S?(15&d)<<2|f>>6:64,v=2<S?63&f:64,I.push(a.charAt(p)+a.charAt(m)+a.charAt(b)+a.charAt(v));return I.join("")},i.decode=function(l){var u,d,f,p,m,b,v=0,I=0,A="data:";if(l.substr(0,A.length)===A)throw new Error("Invalid base64 input, it looks like a data url.");var x,S=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===a.charAt(64)&&S--,l.charAt(l.length-2)===a.charAt(64)&&S--,S%1!=0)throw new Error("Invalid base64 input, bad content length.");for(x=o.uint8array?new Uint8Array(0|S):new Array(0|S);v<l.length;)u=a.indexOf(l.charAt(v++))<<2|(p=a.indexOf(l.charAt(v++)))>>4,d=(15&p)<<4|(m=a.indexOf(l.charAt(v++)))>>2,f=(3&m)<<6|(b=a.indexOf(l.charAt(v++))),x[I++]=u,m!==64&&(x[I++]=d),b!==64&&(x[I++]=f);return x}},{"./support":30,"./utils":32}],2:[function(n,r,i){var s=n("./external"),o=n("./stream/DataWorker"),a=n("./stream/Crc32Probe"),l=n("./stream/DataLengthProbe");function u(d,f,p,m,b){this.compressedSize=d,this.uncompressedSize=f,this.crc32=p,this.compression=m,this.compressedContent=b}u.prototype={getContentWorker:function(){var d=new o(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),f=this;return d.on("end",function(){if(this.streamInfo.data_length!==f.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),d},getCompressedWorker:function(){return new o(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},u.createWorkerFrom=function(d,f,p){return d.pipe(new a).pipe(new l("uncompressedSize")).pipe(f.compressWorker(p)).pipe(new l("compressedSize")).withStreamInfo("compression",f)},r.exports=u},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,r,i){var s=n("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},i.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,r,i){var s=n("./utils"),o=function(){for(var a,l=[],u=0;u<256;u++){a=u;for(var d=0;d<8;d++)a=1&a?3988292384^a>>>1:a>>>1;l[u]=a}return l}();r.exports=function(a,l){return a!==void 0&&a.length?s.getTypeOf(a)!=="string"?function(u,d,f,p){var m=o,b=p+f;u^=-1;for(var v=p;v<b;v++)u=u>>>8^m[255&(u^d[v])];return-1^u}(0|l,a,a.length,0):function(u,d,f,p){var m=o,b=p+f;u^=-1;for(var v=p;v<b;v++)u=u>>>8^m[255&(u^d.charCodeAt(v))];return-1^u}(0|l,a,a.length,0):0}},{"./utils":32}],5:[function(n,r,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(n,r,i){var s=null;s=typeof Promise<"u"?Promise:n("lie"),r.exports={Promise:s}},{lie:37}],7:[function(n,r,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=n("pako"),a=n("./utils"),l=n("./stream/GenericWorker"),u=s?"uint8array":"array";function d(f,p){l.call(this,"FlateWorker/"+f),this._pako=null,this._pakoAction=f,this._pakoOptions=p,this.meta={}}i.magic="\b\0",a.inherits(d,l),d.prototype.processChunk=function(f){this.meta=f.meta,this._pako===null&&this._createPako(),this._pako.push(a.transformTo(u,f.data),!1)},d.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},d.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},d.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var f=this;this._pako.onData=function(p){f.push({data:p,meta:f.meta})}},i.compressWorker=function(f){return new d("Deflate",f)},i.uncompressWorker=function(){return new d("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,r,i){function s(m,b){var v,I="";for(v=0;v<b;v++)I+=String.fromCharCode(255&m),m>>>=8;return I}function o(m,b,v,I,A,x){var S,D,B=m.file,X=m.compression,G=x!==u.utf8encode,se=a.transformTo("string",x(B.name)),re=a.transformTo("string",u.utf8encode(B.name)),Q=B.comment,le=a.transformTo("string",x(Q)),F=a.transformTo("string",u.utf8encode(Q)),K=re.length!==B.name.length,T=F.length!==Q.length,ee="",Y="",M="",ce=B.dir,ie=B.date,he={crc32:0,compressedSize:0,uncompressedSize:0};b&&!v||(he.crc32=m.crc32,he.compressedSize=m.compressedSize,he.uncompressedSize=m.uncompressedSize);var te=0;b&&(te|=8),G||!K&&!T||(te|=2048);var J=0,_e=0;ce&&(J|=16),A==="UNIX"?(_e=798,J|=function(H,Ze){var ze=H;return H||(ze=Ze?16893:33204),(65535&ze)<<16}(B.unixPermissions,ce)):(_e=20,J|=function(H){return 63&(H||0)}(B.dosPermissions)),S=ie.getUTCHours(),S<<=6,S|=ie.getUTCMinutes(),S<<=5,S|=ie.getUTCSeconds()/2,D=ie.getUTCFullYear()-1980,D<<=4,D|=ie.getUTCMonth()+1,D<<=5,D|=ie.getUTCDate(),K&&(Y=s(1,1)+s(d(se),4)+re,ee+="up"+s(Y.length,2)+Y),T&&(M=s(1,1)+s(d(le),4)+F,ee+="uc"+s(M.length,2)+M);var ve="";return ve+=`
\0`,ve+=s(te,2),ve+=X.magic,ve+=s(S,2),ve+=s(D,2),ve+=s(he.crc32,4),ve+=s(he.compressedSize,4),ve+=s(he.uncompressedSize,4),ve+=s(se.length,2),ve+=s(ee.length,2),{fileRecord:f.LOCAL_FILE_HEADER+ve+se+ee,dirRecord:f.CENTRAL_FILE_HEADER+s(_e,2)+ve+s(le.length,2)+"\0\0\0\0"+s(J,4)+s(I,4)+se+ee+le}}var a=n("../utils"),l=n("../stream/GenericWorker"),u=n("../utf8"),d=n("../crc32"),f=n("../signature");function p(m,b,v,I){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=b,this.zipPlatform=v,this.encodeFileName=I,this.streamFiles=m,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(p,l),p.prototype.push=function(m){var b=m.meta.percent||0,v=this.entriesCount,I=this._sources.length;this.accumulate?this.contentBuffer.push(m):(this.bytesWritten+=m.data.length,l.prototype.push.call(this,{data:m.data,meta:{currentFile:this.currentFile,percent:v?(b+100*(v-I-1))/v:100}}))},p.prototype.openedSource=function(m){this.currentSourceOffset=this.bytesWritten,this.currentFile=m.file.name;var b=this.streamFiles&&!m.file.dir;if(b){var v=o(m,b,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:v.fileRecord,meta:{percent:0}})}else this.accumulate=!0},p.prototype.closedSource=function(m){this.accumulate=!1;var b=this.streamFiles&&!m.file.dir,v=o(m,b,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(v.dirRecord),b)this.push({data:function(I){return f.DATA_DESCRIPTOR+s(I.crc32,4)+s(I.compressedSize,4)+s(I.uncompressedSize,4)}(m),meta:{percent:100}});else for(this.push({data:v.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},p.prototype.flush=function(){for(var m=this.bytesWritten,b=0;b<this.dirRecords.length;b++)this.push({data:this.dirRecords[b],meta:{percent:100}});var v=this.bytesWritten-m,I=function(A,x,S,D,B){var X=a.transformTo("string",B(D));return f.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(A,2)+s(A,2)+s(x,4)+s(S,4)+s(X.length,2)+X}(this.dirRecords.length,v,m,this.zipComment,this.encodeFileName);this.push({data:I,meta:{percent:100}})},p.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},p.prototype.registerPrevious=function(m){this._sources.push(m);var b=this;return m.on("data",function(v){b.processChunk(v)}),m.on("end",function(){b.closedSource(b.previous.streamInfo),b._sources.length?b.prepareNextSource():b.end()}),m.on("error",function(v){b.error(v)}),this},p.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},p.prototype.error=function(m){var b=this._sources;if(!l.prototype.error.call(this,m))return!1;for(var v=0;v<b.length;v++)try{b[v].error(m)}catch{}return!0},p.prototype.lock=function(){l.prototype.lock.call(this);for(var m=this._sources,b=0;b<m.length;b++)m[b].lock()},r.exports=p},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,r,i){var s=n("../compressions"),o=n("./ZipFileWorker");i.generateWorker=function(a,l,u){var d=new o(l.streamFiles,u,l.platform,l.encodeFileName),f=0;try{a.forEach(function(p,m){f++;var b=function(x,S){var D=x||S,B=s[D];if(!B)throw new Error(D+" is not a valid compression method !");return B}(m.options.compression,l.compression),v=m.options.compressionOptions||l.compressionOptions||{},I=m.dir,A=m.date;m._compressWorker(b,v).withStreamInfo("file",{name:p,dir:I,date:A,comment:m.comment||"",unixPermissions:m.unixPermissions,dosPermissions:m.dosPermissions}).pipe(d)}),d.entriesCount=f}catch(p){d.error(p)}return d}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,r,i){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new s;for(var a in this)typeof this[a]!="function"&&(o[a]=this[a]);return o}}(s.prototype=n("./object")).loadAsync=n("./load"),s.support=n("./support"),s.defaults=n("./defaults"),s.version="3.10.1",s.loadAsync=function(o,a){return new s().loadAsync(o,a)},s.external=n("./external"),r.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,r,i){var s=n("./utils"),o=n("./external"),a=n("./utf8"),l=n("./zipEntries"),u=n("./stream/Crc32Probe"),d=n("./nodejsUtils");function f(p){return new o.Promise(function(m,b){var v=p.decompressed.getContentWorker().pipe(new u);v.on("error",function(I){b(I)}).on("end",function(){v.streamInfo.crc32!==p.decompressed.crc32?b(new Error("Corrupted zip : CRC32 mismatch")):m()}).resume()})}r.exports=function(p,m){var b=this;return m=s.extend(m||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),d.isNode&&d.isStream(p)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",p,!0,m.optimizedBinaryString,m.base64).then(function(v){var I=new l(m);return I.load(v),I}).then(function(v){var I=[o.Promise.resolve(v)],A=v.files;if(m.checkCRC32)for(var x=0;x<A.length;x++)I.push(f(A[x]));return o.Promise.all(I)}).then(function(v){for(var I=v.shift(),A=I.files,x=0;x<A.length;x++){var S=A[x],D=S.fileNameStr,B=s.resolve(S.fileNameStr);b.file(B,S.decompressed,{binary:!0,optimizedBinaryString:!0,date:S.date,dir:S.dir,comment:S.fileCommentStr.length?S.fileCommentStr:null,unixPermissions:S.unixPermissions,dosPermissions:S.dosPermissions,createFolders:m.createFolders}),S.dir||(b.file(B).unsafeOriginalName=D)}return I.zipComment.length&&(b.comment=I.zipComment),b})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,r,i){var s=n("../utils"),o=n("../stream/GenericWorker");function a(l,u){o.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(u)}s.inherits(a,o),a.prototype._bindStream=function(l){var u=this;(this._stream=l).pause(),l.on("data",function(d){u.push({data:d,meta:{percent:0}})}).on("error",function(d){u.isPaused?this.generatedError=d:u.error(d)}).on("end",function(){u.isPaused?u._upstreamEnded=!0:u.end()})},a.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,r,i){var s=n("readable-stream").Readable;function o(a,l,u){s.call(this,l),this._helper=a;var d=this;a.on("data",function(f,p){d.push(f)||d._helper.pause(),u&&u(p)}).on("error",function(f){d.emit("error",f)}).on("end",function(){d.push(null)})}n("../utils").inherits(o,s),o.prototype._read=function(){this._helper.resume()},r.exports=o},{"../utils":32,"readable-stream":16}],14:[function(n,r,i){r.exports={isNode:typeof Buffer<"u",newBufferFrom:function(s,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(s,o);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new Buffer(s,o)},allocBuffer:function(s){if(Buffer.alloc)return Buffer.alloc(s);var o=new Buffer(s);return o.fill(0),o},isBuffer:function(s){return Buffer.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(n,r,i){function s(B,X,G){var se,re=a.getTypeOf(X),Q=a.extend(G||{},d);Q.date=Q.date||new Date,Q.compression!==null&&(Q.compression=Q.compression.toUpperCase()),typeof Q.unixPermissions=="string"&&(Q.unixPermissions=parseInt(Q.unixPermissions,8)),Q.unixPermissions&&16384&Q.unixPermissions&&(Q.dir=!0),Q.dosPermissions&&16&Q.dosPermissions&&(Q.dir=!0),Q.dir&&(B=A(B)),Q.createFolders&&(se=I(B))&&x.call(this,se,!0);var le=re==="string"&&Q.binary===!1&&Q.base64===!1;G&&G.binary!==void 0||(Q.binary=!le),(X instanceof f&&X.uncompressedSize===0||Q.dir||!X||X.length===0)&&(Q.base64=!1,Q.binary=!0,X="",Q.compression="STORE",re="string");var F=null;F=X instanceof f||X instanceof l?X:b.isNode&&b.isStream(X)?new v(B,X):a.prepareContent(B,X,Q.binary,Q.optimizedBinaryString,Q.base64);var K=new p(B,F,Q);this.files[B]=K}var o=n("./utf8"),a=n("./utils"),l=n("./stream/GenericWorker"),u=n("./stream/StreamHelper"),d=n("./defaults"),f=n("./compressedObject"),p=n("./zipObject"),m=n("./generate"),b=n("./nodejsUtils"),v=n("./nodejs/NodejsStreamInputAdapter"),I=function(B){B.slice(-1)==="/"&&(B=B.substring(0,B.length-1));var X=B.lastIndexOf("/");return 0<X?B.substring(0,X):""},A=function(B){return B.slice(-1)!=="/"&&(B+="/"),B},x=function(B,X){return X=X!==void 0?X:d.createFolders,B=A(B),this.files[B]||s.call(this,B,null,{dir:!0,createFolders:X}),this.files[B]};function S(B){return Object.prototype.toString.call(B)==="[object RegExp]"}var D={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(B){var X,G,se;for(X in this.files)se=this.files[X],(G=X.slice(this.root.length,X.length))&&X.slice(0,this.root.length)===this.root&&B(G,se)},filter:function(B){var X=[];return this.forEach(function(G,se){B(G,se)&&X.push(se)}),X},file:function(B,X,G){if(arguments.length!==1)return B=this.root+B,s.call(this,B,X,G),this;if(S(B)){var se=B;return this.filter(function(Q,le){return!le.dir&&se.test(Q)})}var re=this.files[this.root+B];return re&&!re.dir?re:null},folder:function(B){if(!B)return this;if(S(B))return this.filter(function(re,Q){return Q.dir&&B.test(re)});var X=this.root+B,G=x.call(this,X),se=this.clone();return se.root=G.name,se},remove:function(B){B=this.root+B;var X=this.files[B];if(X||(B.slice(-1)!=="/"&&(B+="/"),X=this.files[B]),X&&!X.dir)delete this.files[B];else for(var G=this.filter(function(re,Q){return Q.name.slice(0,B.length)===B}),se=0;se<G.length;se++)delete this.files[G[se].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(B){var X,G={};try{if((G=a.extend(B||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=G.type.toLowerCase(),G.compression=G.compression.toUpperCase(),G.type==="binarystring"&&(G.type="string"),!G.type)throw new Error("No output type specified.");a.checkSupport(G.type),G.platform!=="darwin"&&G.platform!=="freebsd"&&G.platform!=="linux"&&G.platform!=="sunos"||(G.platform="UNIX"),G.platform==="win32"&&(G.platform="DOS");var se=G.comment||this.comment||"";X=m.generateWorker(this,G,se)}catch(re){(X=new l("error")).error(re)}return new u(X,G.type||"string",G.mimeType)},generateAsync:function(B,X){return this.generateInternalStream(B).accumulate(X)},generateNodeStream:function(B,X){return(B=B||{}).type||(B.type="nodebuffer"),this.generateInternalStream(B).toNodejsStream(X)}};r.exports=D},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,r,i){r.exports=n("stream")},{stream:void 0}],17:[function(n,r,i){var s=n("./DataReader");function o(a){s.call(this,a);for(var l=0;l<this.data.length;l++)a[l]=255&a[l]}n("../utils").inherits(o,s),o.prototype.byteAt=function(a){return this.data[this.zero+a]},o.prototype.lastIndexOfSignature=function(a){for(var l=a.charCodeAt(0),u=a.charCodeAt(1),d=a.charCodeAt(2),f=a.charCodeAt(3),p=this.length-4;0<=p;--p)if(this.data[p]===l&&this.data[p+1]===u&&this.data[p+2]===d&&this.data[p+3]===f)return p-this.zero;return-1},o.prototype.readAndCheckSignature=function(a){var l=a.charCodeAt(0),u=a.charCodeAt(1),d=a.charCodeAt(2),f=a.charCodeAt(3),p=this.readData(4);return l===p[0]&&u===p[1]&&d===p[2]&&f===p[3]},o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./DataReader":18}],18:[function(n,r,i){var s=n("../utils");function o(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var l,u=0;for(this.checkOffset(a),l=this.index+a-1;l>=this.index;l--)u=(u<<8)+this.byteAt(l);return this.index+=a,u},readString:function(a){return s.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC(1980+(a>>25&127),(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1))}},r.exports=o},{"../utils":32}],19:[function(n,r,i){var s=n("./Uint8ArrayReader");function o(a){s.call(this,a)}n("../utils").inherits(o,s),o.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,r,i){var s=n("./DataReader");function o(a){s.call(this,a)}n("../utils").inherits(o,s),o.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)},o.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero},o.prototype.readAndCheckSignature=function(a){return a===this.readData(4)},o.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./DataReader":18}],21:[function(n,r,i){var s=n("./ArrayReader");function o(a){s.call(this,a)}n("../utils").inherits(o,s),o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(n,r,i){var s=n("../utils"),o=n("../support"),a=n("./ArrayReader"),l=n("./StringReader"),u=n("./NodeBufferReader"),d=n("./Uint8ArrayReader");r.exports=function(f){var p=s.getTypeOf(f);return s.checkSupport(p),p!=="string"||o.uint8array?p==="nodebuffer"?new u(f):o.uint8array?new d(s.transformTo("uint8array",f)):new a(s.transformTo("array",f)):new l(f)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,r,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,r,i){var s=n("./GenericWorker"),o=n("../utils");function a(l){s.call(this,"ConvertWorker to "+l),this.destType=l}o.inherits(a,s),a.prototype.processChunk=function(l){this.push({data:o.transformTo(this.destType,l.data),meta:l.meta})},r.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(n,r,i){var s=n("./GenericWorker"),o=n("../crc32");function a(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(a,s),a.prototype.processChunk=function(l){this.streamInfo.crc32=o(l.data,this.streamInfo.crc32||0),this.push(l)},r.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,r,i){var s=n("../utils"),o=n("./GenericWorker");function a(l){o.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}s.inherits(a,o),a.prototype.processChunk=function(l){if(l){var u=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=u+l.data.length}o.prototype.processChunk.call(this,l)},r.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(n,r,i){var s=n("../utils"),o=n("./GenericWorker");function a(l){o.call(this,"DataWorker");var u=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(d){u.dataIsReady=!0,u.data=d,u.max=d&&d.length||0,u.type=s.getTypeOf(d),u.isPaused||u._tickAndRepeat()},function(d){u.error(d)})}s.inherits(a,o),a.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,u=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,u);break;case"uint8array":l=this.data.subarray(this.index,u);break;case"array":case"nodebuffer":l=this.data.slice(this.index,u)}return this.index=u,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(n,r,i){function s(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,a){return this._listeners[o].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,a){if(this._listeners[o])for(var l=0;l<this._listeners[o].length;l++)this._listeners[o][l].call(this,a)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var a=this;return o.on("data",function(l){a.processChunk(l)}),o.on("end",function(){a.end()}),o.on("error",function(l){a.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,a){return this.extraStreamInfo[o]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},r.exports=s},{}],29:[function(n,r,i){var s=n("../utils"),o=n("./ConvertWorker"),a=n("./GenericWorker"),l=n("../base64"),u=n("../support"),d=n("../external"),f=null;if(u.nodestream)try{f=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function p(b,v){return new d.Promise(function(I,A){var x=[],S=b._internalType,D=b._outputType,B=b._mimeType;b.on("data",function(X,G){x.push(X),v&&v(G)}).on("error",function(X){x=[],A(X)}).on("end",function(){try{var X=function(G,se,re){switch(G){case"blob":return s.newBlob(s.transformTo("arraybuffer",se),re);case"base64":return l.encode(se);default:return s.transformTo(G,se)}}(D,function(G,se){var re,Q=0,le=null,F=0;for(re=0;re<se.length;re++)F+=se[re].length;switch(G){case"string":return se.join("");case"array":return Array.prototype.concat.apply([],se);case"uint8array":for(le=new Uint8Array(F),re=0;re<se.length;re++)le.set(se[re],Q),Q+=se[re].length;return le;case"nodebuffer":return Buffer.concat(se);default:throw new Error("concat : unsupported type '"+G+"'")}}(S,x),B);I(X)}catch(G){A(G)}x=[]}).resume()})}function m(b,v,I){var A=v;switch(v){case"blob":case"arraybuffer":A="uint8array";break;case"base64":A="string"}try{this._internalType=A,this._outputType=v,this._mimeType=I,s.checkSupport(A),this._worker=b.pipe(new o(A)),b.lock()}catch(x){this._worker=new a("error"),this._worker.error(x)}}m.prototype={accumulate:function(b){return p(this,b)},on:function(b,v){var I=this;return b==="data"?this._worker.on(b,function(A){v.call(I,A.data,A.meta)}):this._worker.on(b,function(){s.delay(v,arguments,I)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(b){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new f(this,{objectMode:this._outputType!=="nodebuffer"},b)}},r.exports=m},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,r,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof Buffer<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var s=new ArrayBuffer(0);try{i.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(s),i.blob=o.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!n("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(n,r,i){for(var s=n("./utils"),o=n("./support"),a=n("./nodejsUtils"),l=n("./stream/GenericWorker"),u=new Array(256),d=0;d<256;d++)u[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;u[254]=u[254]=1;function f(){l.call(this,"utf-8 decode"),this.leftOver=null}function p(){l.call(this,"utf-8 encode")}i.utf8encode=function(m){return o.nodebuffer?a.newBufferFrom(m,"utf-8"):function(b){var v,I,A,x,S,D=b.length,B=0;for(x=0;x<D;x++)(64512&(I=b.charCodeAt(x)))==55296&&x+1<D&&(64512&(A=b.charCodeAt(x+1)))==56320&&(I=65536+(I-55296<<10)+(A-56320),x++),B+=I<128?1:I<2048?2:I<65536?3:4;for(v=o.uint8array?new Uint8Array(B):new Array(B),x=S=0;S<B;x++)(64512&(I=b.charCodeAt(x)))==55296&&x+1<D&&(64512&(A=b.charCodeAt(x+1)))==56320&&(I=65536+(I-55296<<10)+(A-56320),x++),I<128?v[S++]=I:(I<2048?v[S++]=192|I>>>6:(I<65536?v[S++]=224|I>>>12:(v[S++]=240|I>>>18,v[S++]=128|I>>>12&63),v[S++]=128|I>>>6&63),v[S++]=128|63&I);return v}(m)},i.utf8decode=function(m){return o.nodebuffer?s.transformTo("nodebuffer",m).toString("utf-8"):function(b){var v,I,A,x,S=b.length,D=new Array(2*S);for(v=I=0;v<S;)if((A=b[v++])<128)D[I++]=A;else if(4<(x=u[A]))D[I++]=65533,v+=x-1;else{for(A&=x===2?31:x===3?15:7;1<x&&v<S;)A=A<<6|63&b[v++],x--;1<x?D[I++]=65533:A<65536?D[I++]=A:(A-=65536,D[I++]=55296|A>>10&1023,D[I++]=56320|1023&A)}return D.length!==I&&(D.subarray?D=D.subarray(0,I):D.length=I),s.applyFromCharCode(D)}(m=s.transformTo(o.uint8array?"uint8array":"array",m))},s.inherits(f,l),f.prototype.processChunk=function(m){var b=s.transformTo(o.uint8array?"uint8array":"array",m.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var v=b;(b=new Uint8Array(v.length+this.leftOver.length)).set(this.leftOver,0),b.set(v,this.leftOver.length)}else b=this.leftOver.concat(b);this.leftOver=null}var I=function(x,S){var D;for((S=S||x.length)>x.length&&(S=x.length),D=S-1;0<=D&&(192&x[D])==128;)D--;return D<0||D===0?S:D+u[x[D]]>S?D:S}(b),A=b;I!==b.length&&(o.uint8array?(A=b.subarray(0,I),this.leftOver=b.subarray(I,b.length)):(A=b.slice(0,I),this.leftOver=b.slice(I,b.length))),this.push({data:i.utf8decode(A),meta:m.meta})},f.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=f,s.inherits(p,l),p.prototype.processChunk=function(m){this.push({data:i.utf8encode(m.data),meta:m.meta})},i.Utf8EncodeWorker=p},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,r,i){var s=n("./support"),o=n("./base64"),a=n("./nodejsUtils"),l=n("./external");function u(v){return v}function d(v,I){for(var A=0;A<v.length;++A)I[A]=255&v.charCodeAt(A);return I}n("setimmediate"),i.newBlob=function(v,I){i.checkSupport("blob");try{return new Blob([v],{type:I})}catch{try{var A=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return A.append(v),A.getBlob(I)}catch{throw new Error("Bug : can't construct the Blob.")}}};var f={stringifyByChunk:function(v,I,A){var x=[],S=0,D=v.length;if(D<=A)return String.fromCharCode.apply(null,v);for(;S<D;)I==="array"||I==="nodebuffer"?x.push(String.fromCharCode.apply(null,v.slice(S,Math.min(S+A,D)))):x.push(String.fromCharCode.apply(null,v.subarray(S,Math.min(S+A,D)))),S+=A;return x.join("")},stringifyByChar:function(v){for(var I="",A=0;A<v.length;A++)I+=String.fromCharCode(v[A]);return I},applyCanBeUsed:{uint8array:function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,a.allocBuffer(1)).length===1}catch{return!1}}()}};function p(v){var I=65536,A=i.getTypeOf(v),x=!0;if(A==="uint8array"?x=f.applyCanBeUsed.uint8array:A==="nodebuffer"&&(x=f.applyCanBeUsed.nodebuffer),x)for(;1<I;)try{return f.stringifyByChunk(v,A,I)}catch{I=Math.floor(I/2)}return f.stringifyByChar(v)}function m(v,I){for(var A=0;A<v.length;A++)I[A]=v[A];return I}i.applyFromCharCode=p;var b={};b.string={string:u,array:function(v){return d(v,new Array(v.length))},arraybuffer:function(v){return b.string.uint8array(v).buffer},uint8array:function(v){return d(v,new Uint8Array(v.length))},nodebuffer:function(v){return d(v,a.allocBuffer(v.length))}},b.array={string:p,array:u,arraybuffer:function(v){return new Uint8Array(v).buffer},uint8array:function(v){return new Uint8Array(v)},nodebuffer:function(v){return a.newBufferFrom(v)}},b.arraybuffer={string:function(v){return p(new Uint8Array(v))},array:function(v){return m(new Uint8Array(v),new Array(v.byteLength))},arraybuffer:u,uint8array:function(v){return new Uint8Array(v)},nodebuffer:function(v){return a.newBufferFrom(new Uint8Array(v))}},b.uint8array={string:p,array:function(v){return m(v,new Array(v.length))},arraybuffer:function(v){return v.buffer},uint8array:u,nodebuffer:function(v){return a.newBufferFrom(v)}},b.nodebuffer={string:p,array:function(v){return m(v,new Array(v.length))},arraybuffer:function(v){return b.nodebuffer.uint8array(v).buffer},uint8array:function(v){return m(v,new Uint8Array(v.length))},nodebuffer:u},i.transformTo=function(v,I){if(I=I||"",!v)return I;i.checkSupport(v);var A=i.getTypeOf(I);return b[A][v](I)},i.resolve=function(v){for(var I=v.split("/"),A=[],x=0;x<I.length;x++){var S=I[x];S==="."||S===""&&x!==0&&x!==I.length-1||(S===".."?A.pop():A.push(S))}return A.join("/")},i.getTypeOf=function(v){return typeof v=="string"?"string":Object.prototype.toString.call(v)==="[object Array]"?"array":s.nodebuffer&&a.isBuffer(v)?"nodebuffer":s.uint8array&&v instanceof Uint8Array?"uint8array":s.arraybuffer&&v instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(v){if(!s[v.toLowerCase()])throw new Error(v+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(v){var I,A,x="";for(A=0;A<(v||"").length;A++)x+="\\x"+((I=v.charCodeAt(A))<16?"0":"")+I.toString(16).toUpperCase();return x},i.delay=function(v,I,A){setImmediate(function(){v.apply(A||null,I||[])})},i.inherits=function(v,I){function A(){}A.prototype=I.prototype,v.prototype=new A},i.extend=function(){var v,I,A={};for(v=0;v<arguments.length;v++)for(I in arguments[v])Object.prototype.hasOwnProperty.call(arguments[v],I)&&A[I]===void 0&&(A[I]=arguments[v][I]);return A},i.prepareContent=function(v,I,A,x,S){return l.Promise.resolve(I).then(function(D){return s.blob&&(D instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(D))!==-1)&&typeof FileReader<"u"?new l.Promise(function(B,X){var G=new FileReader;G.onload=function(se){B(se.target.result)},G.onerror=function(se){X(se.target.error)},G.readAsArrayBuffer(D)}):D}).then(function(D){var B=i.getTypeOf(D);return B?(B==="arraybuffer"?D=i.transformTo("uint8array",D):B==="string"&&(S?D=o.decode(D):A&&x!==!0&&(D=function(X){return d(X,s.uint8array?new Uint8Array(X.length):new Array(X.length))}(D))),D):l.Promise.reject(new Error("Can't read the data of '"+v+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,r,i){var s=n("./reader/readerFor"),o=n("./utils"),a=n("./signature"),l=n("./zipEntry"),u=n("./support");function d(f){this.files=[],this.loadOptions=f}d.prototype={checkSignature:function(f){if(!this.reader.readAndCheckSignature(f)){this.reader.index-=4;var p=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(p)+", expected "+o.pretty(f)+")")}},isSignature:function(f,p){var m=this.reader.index;this.reader.setIndex(f);var b=this.reader.readString(4)===p;return this.reader.setIndex(m),b},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var f=this.reader.readData(this.zipCommentLength),p=u.uint8array?"uint8array":"array",m=o.transformTo(p,f);this.zipComment=this.loadOptions.decodeFileName(m)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var f,p,m,b=this.zip64EndOfCentralSize-44;0<b;)f=this.reader.readInt(2),p=this.reader.readInt(4),m=this.reader.readData(p),this.zip64ExtensibleData[f]={id:f,length:p,value:m}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var f,p;for(f=0;f<this.files.length;f++)p=this.files[f],this.reader.setIndex(p.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),p.readLocalPart(this.reader),p.handleUTF8(),p.processAttributes()},readCentralDir:function(){var f;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(f=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(f);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var f=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(f<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(f);var p=f;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(f=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(f),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var m=this.centralDirOffset+this.centralDirSize;this.zip64&&(m+=20,m+=12+this.zip64EndOfCentralSize);var b=p-m;if(0<b)this.isSignature(p,a.CENTRAL_FILE_HEADER)||(this.reader.zero=b);else if(b<0)throw new Error("Corrupted zip: missing "+Math.abs(b)+" bytes.")},prepareReader:function(f){this.reader=s(f)},load:function(f){this.prepareReader(f),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=d},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,r,i){var s=n("./reader/readerFor"),o=n("./utils"),a=n("./compressedObject"),l=n("./crc32"),u=n("./utf8"),d=n("./compressions"),f=n("./support");function p(m,b){this.options=m,this.loadOptions=b}p.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(m){var b,v;if(m.skip(22),this.fileNameLength=m.readInt(2),v=m.readInt(2),this.fileName=m.readData(this.fileNameLength),m.skip(v),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((b=function(I){for(var A in d)if(Object.prototype.hasOwnProperty.call(d,A)&&d[A].magic===I)return d[A];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,b,m.readData(this.compressedSize))},readCentralPart:function(m){this.versionMadeBy=m.readInt(2),m.skip(2),this.bitFlag=m.readInt(2),this.compressionMethod=m.readString(2),this.date=m.readDate(),this.crc32=m.readInt(4),this.compressedSize=m.readInt(4),this.uncompressedSize=m.readInt(4);var b=m.readInt(2);if(this.extraFieldsLength=m.readInt(2),this.fileCommentLength=m.readInt(2),this.diskNumberStart=m.readInt(2),this.internalFileAttributes=m.readInt(2),this.externalFileAttributes=m.readInt(4),this.localHeaderOffset=m.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");m.skip(b),this.readExtraFields(m),this.parseZIP64ExtraField(m),this.fileComment=m.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var m=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),m==0&&(this.dosPermissions=63&this.externalFileAttributes),m==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var m=s(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=m.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=m.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=m.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=m.readInt(4))}},readExtraFields:function(m){var b,v,I,A=m.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});m.index+4<A;)b=m.readInt(2),v=m.readInt(2),I=m.readData(v),this.extraFields[b]={id:b,length:v,value:I};m.setIndex(A)},handleUTF8:function(){var m=f.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=u.utf8decode(this.fileName),this.fileCommentStr=u.utf8decode(this.fileComment);else{var b=this.findExtraFieldUnicodePath();if(b!==null)this.fileNameStr=b;else{var v=o.transformTo(m,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(v)}var I=this.findExtraFieldUnicodeComment();if(I!==null)this.fileCommentStr=I;else{var A=o.transformTo(m,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(A)}}},findExtraFieldUnicodePath:function(){var m=this.extraFields[28789];if(m){var b=s(m.value);return b.readInt(1)!==1||l(this.fileName)!==b.readInt(4)?null:u.utf8decode(b.readData(m.length-5))}return null},findExtraFieldUnicodeComment:function(){var m=this.extraFields[25461];if(m){var b=s(m.value);return b.readInt(1)!==1||l(this.fileComment)!==b.readInt(4)?null:u.utf8decode(b.readData(m.length-5))}return null}},r.exports=p},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,r,i){function s(b,v,I){this.name=b,this.dir=I.dir,this.date=I.date,this.comment=I.comment,this.unixPermissions=I.unixPermissions,this.dosPermissions=I.dosPermissions,this._data=v,this._dataBinary=I.binary,this.options={compression:I.compression,compressionOptions:I.compressionOptions}}var o=n("./stream/StreamHelper"),a=n("./stream/DataWorker"),l=n("./utf8"),u=n("./compressedObject"),d=n("./stream/GenericWorker");s.prototype={internalStream:function(b){var v=null,I="string";try{if(!b)throw new Error("No output type specified.");var A=(I=b.toLowerCase())==="string"||I==="text";I!=="binarystring"&&I!=="text"||(I="string"),v=this._decompressWorker();var x=!this._dataBinary;x&&!A&&(v=v.pipe(new l.Utf8EncodeWorker)),!x&&A&&(v=v.pipe(new l.Utf8DecodeWorker))}catch(S){(v=new d("error")).error(S)}return new o(v,I,"")},async:function(b,v){return this.internalStream(b).accumulate(v)},nodeStream:function(b,v){return this.internalStream(b||"nodebuffer").toNodejsStream(v)},_compressWorker:function(b,v){if(this._data instanceof u&&this._data.compression.magic===b.magic)return this._data.getCompressedWorker();var I=this._decompressWorker();return this._dataBinary||(I=I.pipe(new l.Utf8EncodeWorker)),u.createWorkerFrom(I,b,v)},_decompressWorker:function(){return this._data instanceof u?this._data.getContentWorker():this._data instanceof d?this._data:new a(this._data)}};for(var f=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],p=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},m=0;m<f.length;m++)s.prototype[f[m]]=p;r.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,r,i){(function(s){var o,a,l=s.MutationObserver||s.WebKitMutationObserver;if(l){var u=0,d=new l(b),f=s.document.createTextNode("");d.observe(f,{characterData:!0}),o=function(){f.data=u=++u%2}}else if(s.setImmediate||s.MessageChannel===void 0)o="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var v=s.document.createElement("script");v.onreadystatechange=function(){b(),v.onreadystatechange=null,v.parentNode.removeChild(v),v=null},s.document.documentElement.appendChild(v)}:function(){setTimeout(b,0)};else{var p=new s.MessageChannel;p.port1.onmessage=b,o=function(){p.port2.postMessage(0)}}var m=[];function b(){var v,I;a=!0;for(var A=m.length;A;){for(I=m,m=[],v=-1;++v<A;)I[v]();A=m.length}a=!1}r.exports=function(v){m.push(v)!==1||a||o()}}).call(this,typeof Tn<"u"?Tn:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,r,i){var s=n("immediate");function o(){}var a={},l=["REJECTED"],u=["FULFILLED"],d=["PENDING"];function f(A){if(typeof A!="function")throw new TypeError("resolver must be a function");this.state=d,this.queue=[],this.outcome=void 0,A!==o&&v(this,A)}function p(A,x,S){this.promise=A,typeof x=="function"&&(this.onFulfilled=x,this.callFulfilled=this.otherCallFulfilled),typeof S=="function"&&(this.onRejected=S,this.callRejected=this.otherCallRejected)}function m(A,x,S){s(function(){var D;try{D=x(S)}catch(B){return a.reject(A,B)}D===A?a.reject(A,new TypeError("Cannot resolve promise with itself")):a.resolve(A,D)})}function b(A){var x=A&&A.then;if(A&&(typeof A=="object"||typeof A=="function")&&typeof x=="function")return function(){x.apply(A,arguments)}}function v(A,x){var S=!1;function D(G){S||(S=!0,a.reject(A,G))}function B(G){S||(S=!0,a.resolve(A,G))}var X=I(function(){x(B,D)});X.status==="error"&&D(X.value)}function I(A,x){var S={};try{S.value=A(x),S.status="success"}catch(D){S.status="error",S.value=D}return S}(r.exports=f).prototype.finally=function(A){if(typeof A!="function")return this;var x=this.constructor;return this.then(function(S){return x.resolve(A()).then(function(){return S})},function(S){return x.resolve(A()).then(function(){throw S})})},f.prototype.catch=function(A){return this.then(null,A)},f.prototype.then=function(A,x){if(typeof A!="function"&&this.state===u||typeof x!="function"&&this.state===l)return this;var S=new this.constructor(o);return this.state!==d?m(S,this.state===u?A:x,this.outcome):this.queue.push(new p(S,A,x)),S},p.prototype.callFulfilled=function(A){a.resolve(this.promise,A)},p.prototype.otherCallFulfilled=function(A){m(this.promise,this.onFulfilled,A)},p.prototype.callRejected=function(A){a.reject(this.promise,A)},p.prototype.otherCallRejected=function(A){m(this.promise,this.onRejected,A)},a.resolve=function(A,x){var S=I(b,x);if(S.status==="error")return a.reject(A,S.value);var D=S.value;if(D)v(A,D);else{A.state=u,A.outcome=x;for(var B=-1,X=A.queue.length;++B<X;)A.queue[B].callFulfilled(x)}return A},a.reject=function(A,x){A.state=l,A.outcome=x;for(var S=-1,D=A.queue.length;++S<D;)A.queue[S].callRejected(x);return A},f.resolve=function(A){return A instanceof this?A:a.resolve(new this(o),A)},f.reject=function(A){var x=new this(o);return a.reject(x,A)},f.all=function(A){var x=this;if(Object.prototype.toString.call(A)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=A.length,D=!1;if(!S)return this.resolve([]);for(var B=new Array(S),X=0,G=-1,se=new this(o);++G<S;)re(A[G],G);return se;function re(Q,le){x.resolve(Q).then(function(F){B[le]=F,++X!==S||D||(D=!0,a.resolve(se,B))},function(F){D||(D=!0,a.reject(se,F))})}},f.race=function(A){var x=this;if(Object.prototype.toString.call(A)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=A.length,D=!1;if(!S)return this.resolve([]);for(var B=-1,X=new this(o);++B<S;)G=A[B],x.resolve(G).then(function(se){D||(D=!0,a.resolve(X,se))},function(se){D||(D=!0,a.reject(X,se))});var G;return X}},{immediate:36}],38:[function(n,r,i){var s={};(0,n("./lib/utils/common").assign)(s,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),r.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,r,i){var s=n("./zlib/deflate"),o=n("./utils/common"),a=n("./utils/strings"),l=n("./zlib/messages"),u=n("./zlib/zstream"),d=Object.prototype.toString,f=0,p=-1,m=0,b=8;function v(A){if(!(this instanceof v))return new v(A);this.options=o.assign({level:p,method:b,chunkSize:16384,windowBits:15,memLevel:8,strategy:m,to:""},A||{});var x=this.options;x.raw&&0<x.windowBits?x.windowBits=-x.windowBits:x.gzip&&0<x.windowBits&&x.windowBits<16&&(x.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var S=s.deflateInit2(this.strm,x.level,x.method,x.windowBits,x.memLevel,x.strategy);if(S!==f)throw new Error(l[S]);if(x.header&&s.deflateSetHeader(this.strm,x.header),x.dictionary){var D;if(D=typeof x.dictionary=="string"?a.string2buf(x.dictionary):d.call(x.dictionary)==="[object ArrayBuffer]"?new Uint8Array(x.dictionary):x.dictionary,(S=s.deflateSetDictionary(this.strm,D))!==f)throw new Error(l[S]);this._dict_set=!0}}function I(A,x){var S=new v(x);if(S.push(A,!0),S.err)throw S.msg||l[S.err];return S.result}v.prototype.push=function(A,x){var S,D,B=this.strm,X=this.options.chunkSize;if(this.ended)return!1;D=x===~~x?x:x===!0?4:0,typeof A=="string"?B.input=a.string2buf(A):d.call(A)==="[object ArrayBuffer]"?B.input=new Uint8Array(A):B.input=A,B.next_in=0,B.avail_in=B.input.length;do{if(B.avail_out===0&&(B.output=new o.Buf8(X),B.next_out=0,B.avail_out=X),(S=s.deflate(B,D))!==1&&S!==f)return this.onEnd(S),!(this.ended=!0);B.avail_out!==0&&(B.avail_in!==0||D!==4&&D!==2)||(this.options.to==="string"?this.onData(a.buf2binstring(o.shrinkBuf(B.output,B.next_out))):this.onData(o.shrinkBuf(B.output,B.next_out)))}while((0<B.avail_in||B.avail_out===0)&&S!==1);return D===4?(S=s.deflateEnd(this.strm),this.onEnd(S),this.ended=!0,S===f):D!==2||(this.onEnd(f),!(B.avail_out=0))},v.prototype.onData=function(A){this.chunks.push(A)},v.prototype.onEnd=function(A){A===f&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=A,this.msg=this.strm.msg},i.Deflate=v,i.deflate=I,i.deflateRaw=function(A,x){return(x=x||{}).raw=!0,I(A,x)},i.gzip=function(A,x){return(x=x||{}).gzip=!0,I(A,x)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,r,i){var s=n("./zlib/inflate"),o=n("./utils/common"),a=n("./utils/strings"),l=n("./zlib/constants"),u=n("./zlib/messages"),d=n("./zlib/zstream"),f=n("./zlib/gzheader"),p=Object.prototype.toString;function m(v){if(!(this instanceof m))return new m(v);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},v||{});var I=this.options;I.raw&&0<=I.windowBits&&I.windowBits<16&&(I.windowBits=-I.windowBits,I.windowBits===0&&(I.windowBits=-15)),!(0<=I.windowBits&&I.windowBits<16)||v&&v.windowBits||(I.windowBits+=32),15<I.windowBits&&I.windowBits<48&&!(15&I.windowBits)&&(I.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var A=s.inflateInit2(this.strm,I.windowBits);if(A!==l.Z_OK)throw new Error(u[A]);this.header=new f,s.inflateGetHeader(this.strm,this.header)}function b(v,I){var A=new m(I);if(A.push(v,!0),A.err)throw A.msg||u[A.err];return A.result}m.prototype.push=function(v,I){var A,x,S,D,B,X,G=this.strm,se=this.options.chunkSize,re=this.options.dictionary,Q=!1;if(this.ended)return!1;x=I===~~I?I:I===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof v=="string"?G.input=a.binstring2buf(v):p.call(v)==="[object ArrayBuffer]"?G.input=new Uint8Array(v):G.input=v,G.next_in=0,G.avail_in=G.input.length;do{if(G.avail_out===0&&(G.output=new o.Buf8(se),G.next_out=0,G.avail_out=se),(A=s.inflate(G,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&re&&(X=typeof re=="string"?a.string2buf(re):p.call(re)==="[object ArrayBuffer]"?new Uint8Array(re):re,A=s.inflateSetDictionary(this.strm,X)),A===l.Z_BUF_ERROR&&Q===!0&&(A=l.Z_OK,Q=!1),A!==l.Z_STREAM_END&&A!==l.Z_OK)return this.onEnd(A),!(this.ended=!0);G.next_out&&(G.avail_out!==0&&A!==l.Z_STREAM_END&&(G.avail_in!==0||x!==l.Z_FINISH&&x!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(S=a.utf8border(G.output,G.next_out),D=G.next_out-S,B=a.buf2string(G.output,S),G.next_out=D,G.avail_out=se-D,D&&o.arraySet(G.output,G.output,S,D,0),this.onData(B)):this.onData(o.shrinkBuf(G.output,G.next_out)))),G.avail_in===0&&G.avail_out===0&&(Q=!0)}while((0<G.avail_in||G.avail_out===0)&&A!==l.Z_STREAM_END);return A===l.Z_STREAM_END&&(x=l.Z_FINISH),x===l.Z_FINISH?(A=s.inflateEnd(this.strm),this.onEnd(A),this.ended=!0,A===l.Z_OK):x!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(G.avail_out=0))},m.prototype.onData=function(v){this.chunks.push(v)},m.prototype.onEnd=function(v){v===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=v,this.msg=this.strm.msg},i.Inflate=m,i.inflate=b,i.inflateRaw=function(v,I){return(I=I||{}).raw=!0,b(v,I)},i.ungzip=b},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,r,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(l){for(var u=Array.prototype.slice.call(arguments,1);u.length;){var d=u.shift();if(d){if(typeof d!="object")throw new TypeError(d+"must be non-object");for(var f in d)d.hasOwnProperty(f)&&(l[f]=d[f])}}return l},i.shrinkBuf=function(l,u){return l.length===u?l:l.subarray?l.subarray(0,u):(l.length=u,l)};var o={arraySet:function(l,u,d,f,p){if(u.subarray&&l.subarray)l.set(u.subarray(d,d+f),p);else for(var m=0;m<f;m++)l[p+m]=u[d+m]},flattenChunks:function(l){var u,d,f,p,m,b;for(u=f=0,d=l.length;u<d;u++)f+=l[u].length;for(b=new Uint8Array(f),u=p=0,d=l.length;u<d;u++)m=l[u],b.set(m,p),p+=m.length;return b}},a={arraySet:function(l,u,d,f,p){for(var m=0;m<f;m++)l[p+m]=u[d+m]},flattenChunks:function(l){return[].concat.apply([],l)}};i.setTyped=function(l){l?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,o)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,a))},i.setTyped(s)},{}],42:[function(n,r,i){var s=n("./common"),o=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}for(var l=new s.Buf8(256),u=0;u<256;u++)l[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;function d(f,p){if(p<65537&&(f.subarray&&a||!f.subarray&&o))return String.fromCharCode.apply(null,s.shrinkBuf(f,p));for(var m="",b=0;b<p;b++)m+=String.fromCharCode(f[b]);return m}l[254]=l[254]=1,i.string2buf=function(f){var p,m,b,v,I,A=f.length,x=0;for(v=0;v<A;v++)(64512&(m=f.charCodeAt(v)))==55296&&v+1<A&&(64512&(b=f.charCodeAt(v+1)))==56320&&(m=65536+(m-55296<<10)+(b-56320),v++),x+=m<128?1:m<2048?2:m<65536?3:4;for(p=new s.Buf8(x),v=I=0;I<x;v++)(64512&(m=f.charCodeAt(v)))==55296&&v+1<A&&(64512&(b=f.charCodeAt(v+1)))==56320&&(m=65536+(m-55296<<10)+(b-56320),v++),m<128?p[I++]=m:(m<2048?p[I++]=192|m>>>6:(m<65536?p[I++]=224|m>>>12:(p[I++]=240|m>>>18,p[I++]=128|m>>>12&63),p[I++]=128|m>>>6&63),p[I++]=128|63&m);return p},i.buf2binstring=function(f){return d(f,f.length)},i.binstring2buf=function(f){for(var p=new s.Buf8(f.length),m=0,b=p.length;m<b;m++)p[m]=f.charCodeAt(m);return p},i.buf2string=function(f,p){var m,b,v,I,A=p||f.length,x=new Array(2*A);for(m=b=0;m<A;)if((v=f[m++])<128)x[b++]=v;else if(4<(I=l[v]))x[b++]=65533,m+=I-1;else{for(v&=I===2?31:I===3?15:7;1<I&&m<A;)v=v<<6|63&f[m++],I--;1<I?x[b++]=65533:v<65536?x[b++]=v:(v-=65536,x[b++]=55296|v>>10&1023,x[b++]=56320|1023&v)}return d(x,b)},i.utf8border=function(f,p){var m;for((p=p||f.length)>f.length&&(p=f.length),m=p-1;0<=m&&(192&f[m])==128;)m--;return m<0||m===0?p:m+l[f[m]]>p?m:p}},{"./common":41}],43:[function(n,r,i){r.exports=function(s,o,a,l){for(var u=65535&s|0,d=s>>>16&65535|0,f=0;a!==0;){for(a-=f=2e3<a?2e3:a;d=d+(u=u+o[l++]|0)|0,--f;);u%=65521,d%=65521}return u|d<<16|0}},{}],44:[function(n,r,i){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,r,i){var s=function(){for(var o,a=[],l=0;l<256;l++){o=l;for(var u=0;u<8;u++)o=1&o?3988292384^o>>>1:o>>>1;a[l]=o}return a}();r.exports=function(o,a,l,u){var d=s,f=u+l;o^=-1;for(var p=u;p<f;p++)o=o>>>8^d[255&(o^a[p])];return-1^o}},{}],46:[function(n,r,i){var s,o=n("../utils/common"),a=n("./trees"),l=n("./adler32"),u=n("./crc32"),d=n("./messages"),f=0,p=4,m=0,b=-2,v=-1,I=4,A=2,x=8,S=9,D=286,B=30,X=19,G=2*D+1,se=15,re=3,Q=258,le=Q+re+1,F=42,K=113,T=1,ee=2,Y=3,M=4;function ce(w,z){return w.msg=d[z],z}function ie(w){return(w<<1)-(4<w?9:0)}function he(w){for(var z=w.length;0<=--z;)w[z]=0}function te(w){var z=w.state,L=z.pending;L>w.avail_out&&(L=w.avail_out),L!==0&&(o.arraySet(w.output,z.pending_buf,z.pending_out,L,w.next_out),w.next_out+=L,z.pending_out+=L,w.total_out+=L,w.avail_out-=L,z.pending-=L,z.pending===0&&(z.pending_out=0))}function J(w,z){a._tr_flush_block(w,0<=w.block_start?w.block_start:-1,w.strstart-w.block_start,z),w.block_start=w.strstart,te(w.strm)}function _e(w,z){w.pending_buf[w.pending++]=z}function ve(w,z){w.pending_buf[w.pending++]=z>>>8&255,w.pending_buf[w.pending++]=255&z}function H(w,z){var L,C,R=w.max_chain_length,O=w.strstart,Z=w.prev_length,W=w.nice_match,$=w.strstart>w.w_size-le?w.strstart-(w.w_size-le):0,ae=w.window,fe=w.w_mask,de=w.prev,be=w.strstart+Q,Ne=ae[O+Z-1],Se=ae[O+Z];w.prev_length>=w.good_match&&(R>>=2),W>w.lookahead&&(W=w.lookahead);do if(ae[(L=z)+Z]===Se&&ae[L+Z-1]===Ne&&ae[L]===ae[O]&&ae[++L]===ae[O+1]){O+=2,L++;do;while(ae[++O]===ae[++L]&&ae[++O]===ae[++L]&&ae[++O]===ae[++L]&&ae[++O]===ae[++L]&&ae[++O]===ae[++L]&&ae[++O]===ae[++L]&&ae[++O]===ae[++L]&&ae[++O]===ae[++L]&&O<be);if(C=Q-(be-O),O=be-Q,Z<C){if(w.match_start=z,W<=(Z=C))break;Ne=ae[O+Z-1],Se=ae[O+Z]}}while((z=de[z&fe])>$&&--R!=0);return Z<=w.lookahead?Z:w.lookahead}function Ze(w){var z,L,C,R,O,Z,W,$,ae,fe,de=w.w_size;do{if(R=w.window_size-w.lookahead-w.strstart,w.strstart>=de+(de-le)){for(o.arraySet(w.window,w.window,de,de,0),w.match_start-=de,w.strstart-=de,w.block_start-=de,z=L=w.hash_size;C=w.head[--z],w.head[z]=de<=C?C-de:0,--L;);for(z=L=de;C=w.prev[--z],w.prev[z]=de<=C?C-de:0,--L;);R+=de}if(w.strm.avail_in===0)break;if(Z=w.strm,W=w.window,$=w.strstart+w.lookahead,ae=R,fe=void 0,fe=Z.avail_in,ae<fe&&(fe=ae),L=fe===0?0:(Z.avail_in-=fe,o.arraySet(W,Z.input,Z.next_in,fe,$),Z.state.wrap===1?Z.adler=l(Z.adler,W,fe,$):Z.state.wrap===2&&(Z.adler=u(Z.adler,W,fe,$)),Z.next_in+=fe,Z.total_in+=fe,fe),w.lookahead+=L,w.lookahead+w.insert>=re)for(O=w.strstart-w.insert,w.ins_h=w.window[O],w.ins_h=(w.ins_h<<w.hash_shift^w.window[O+1])&w.hash_mask;w.insert&&(w.ins_h=(w.ins_h<<w.hash_shift^w.window[O+re-1])&w.hash_mask,w.prev[O&w.w_mask]=w.head[w.ins_h],w.head[w.ins_h]=O,O++,w.insert--,!(w.lookahead+w.insert<re)););}while(w.lookahead<le&&w.strm.avail_in!==0)}function ze(w,z){for(var L,C;;){if(w.lookahead<le){if(Ze(w),w.lookahead<le&&z===f)return T;if(w.lookahead===0)break}if(L=0,w.lookahead>=re&&(w.ins_h=(w.ins_h<<w.hash_shift^w.window[w.strstart+re-1])&w.hash_mask,L=w.prev[w.strstart&w.w_mask]=w.head[w.ins_h],w.head[w.ins_h]=w.strstart),L!==0&&w.strstart-L<=w.w_size-le&&(w.match_length=H(w,L)),w.match_length>=re)if(C=a._tr_tally(w,w.strstart-w.match_start,w.match_length-re),w.lookahead-=w.match_length,w.match_length<=w.max_lazy_match&&w.lookahead>=re){for(w.match_length--;w.strstart++,w.ins_h=(w.ins_h<<w.hash_shift^w.window[w.strstart+re-1])&w.hash_mask,L=w.prev[w.strstart&w.w_mask]=w.head[w.ins_h],w.head[w.ins_h]=w.strstart,--w.match_length!=0;);w.strstart++}else w.strstart+=w.match_length,w.match_length=0,w.ins_h=w.window[w.strstart],w.ins_h=(w.ins_h<<w.hash_shift^w.window[w.strstart+1])&w.hash_mask;else C=a._tr_tally(w,0,w.window[w.strstart]),w.lookahead--,w.strstart++;if(C&&(J(w,!1),w.strm.avail_out===0))return T}return w.insert=w.strstart<re-1?w.strstart:re-1,z===p?(J(w,!0),w.strm.avail_out===0?Y:M):w.last_lit&&(J(w,!1),w.strm.avail_out===0)?T:ee}function Le(w,z){for(var L,C,R;;){if(w.lookahead<le){if(Ze(w),w.lookahead<le&&z===f)return T;if(w.lookahead===0)break}if(L=0,w.lookahead>=re&&(w.ins_h=(w.ins_h<<w.hash_shift^w.window[w.strstart+re-1])&w.hash_mask,L=w.prev[w.strstart&w.w_mask]=w.head[w.ins_h],w.head[w.ins_h]=w.strstart),w.prev_length=w.match_length,w.prev_match=w.match_start,w.match_length=re-1,L!==0&&w.prev_length<w.max_lazy_match&&w.strstart-L<=w.w_size-le&&(w.match_length=H(w,L),w.match_length<=5&&(w.strategy===1||w.match_length===re&&4096<w.strstart-w.match_start)&&(w.match_length=re-1)),w.prev_length>=re&&w.match_length<=w.prev_length){for(R=w.strstart+w.lookahead-re,C=a._tr_tally(w,w.strstart-1-w.prev_match,w.prev_length-re),w.lookahead-=w.prev_length-1,w.prev_length-=2;++w.strstart<=R&&(w.ins_h=(w.ins_h<<w.hash_shift^w.window[w.strstart+re-1])&w.hash_mask,L=w.prev[w.strstart&w.w_mask]=w.head[w.ins_h],w.head[w.ins_h]=w.strstart),--w.prev_length!=0;);if(w.match_available=0,w.match_length=re-1,w.strstart++,C&&(J(w,!1),w.strm.avail_out===0))return T}else if(w.match_available){if((C=a._tr_tally(w,0,w.window[w.strstart-1]))&&J(w,!1),w.strstart++,w.lookahead--,w.strm.avail_out===0)return T}else w.match_available=1,w.strstart++,w.lookahead--}return w.match_available&&(C=a._tr_tally(w,0,w.window[w.strstart-1]),w.match_available=0),w.insert=w.strstart<re-1?w.strstart:re-1,z===p?(J(w,!0),w.strm.avail_out===0?Y:M):w.last_lit&&(J(w,!1),w.strm.avail_out===0)?T:ee}function Te(w,z,L,C,R){this.good_length=w,this.max_lazy=z,this.nice_length=L,this.max_chain=C,this.func=R}function Me(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=x,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*G),this.dyn_dtree=new o.Buf16(2*(2*B+1)),this.bl_tree=new o.Buf16(2*(2*X+1)),he(this.dyn_ltree),he(this.dyn_dtree),he(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(se+1),this.heap=new o.Buf16(2*D+1),he(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*D+1),he(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Ie(w){var z;return w&&w.state?(w.total_in=w.total_out=0,w.data_type=A,(z=w.state).pending=0,z.pending_out=0,z.wrap<0&&(z.wrap=-z.wrap),z.status=z.wrap?F:K,w.adler=z.wrap===2?0:1,z.last_flush=f,a._tr_init(z),m):ce(w,b)}function U(w){var z=Ie(w);return z===m&&function(L){L.window_size=2*L.w_size,he(L.head),L.max_lazy_match=s[L.level].max_lazy,L.good_match=s[L.level].good_length,L.nice_match=s[L.level].nice_length,L.max_chain_length=s[L.level].max_chain,L.strstart=0,L.block_start=0,L.lookahead=0,L.insert=0,L.match_length=L.prev_length=re-1,L.match_available=0,L.ins_h=0}(w.state),z}function V(w,z,L,C,R,O){if(!w)return b;var Z=1;if(z===v&&(z=6),C<0?(Z=0,C=-C):15<C&&(Z=2,C-=16),R<1||S<R||L!==x||C<8||15<C||z<0||9<z||O<0||I<O)return ce(w,b);C===8&&(C=9);var W=new Me;return(w.state=W).strm=w,W.wrap=Z,W.gzhead=null,W.w_bits=C,W.w_size=1<<W.w_bits,W.w_mask=W.w_size-1,W.hash_bits=R+7,W.hash_size=1<<W.hash_bits,W.hash_mask=W.hash_size-1,W.hash_shift=~~((W.hash_bits+re-1)/re),W.window=new o.Buf8(2*W.w_size),W.head=new o.Buf16(W.hash_size),W.prev=new o.Buf16(W.w_size),W.lit_bufsize=1<<R+6,W.pending_buf_size=4*W.lit_bufsize,W.pending_buf=new o.Buf8(W.pending_buf_size),W.d_buf=1*W.lit_bufsize,W.l_buf=3*W.lit_bufsize,W.level=z,W.strategy=O,W.method=L,U(w)}s=[new Te(0,0,0,0,function(w,z){var L=65535;for(L>w.pending_buf_size-5&&(L=w.pending_buf_size-5);;){if(w.lookahead<=1){if(Ze(w),w.lookahead===0&&z===f)return T;if(w.lookahead===0)break}w.strstart+=w.lookahead,w.lookahead=0;var C=w.block_start+L;if((w.strstart===0||w.strstart>=C)&&(w.lookahead=w.strstart-C,w.strstart=C,J(w,!1),w.strm.avail_out===0)||w.strstart-w.block_start>=w.w_size-le&&(J(w,!1),w.strm.avail_out===0))return T}return w.insert=0,z===p?(J(w,!0),w.strm.avail_out===0?Y:M):(w.strstart>w.block_start&&(J(w,!1),w.strm.avail_out),T)}),new Te(4,4,8,4,ze),new Te(4,5,16,8,ze),new Te(4,6,32,32,ze),new Te(4,4,16,16,Le),new Te(8,16,32,32,Le),new Te(8,16,128,128,Le),new Te(8,32,128,256,Le),new Te(32,128,258,1024,Le),new Te(32,258,258,4096,Le)],i.deflateInit=function(w,z){return V(w,z,x,15,8,0)},i.deflateInit2=V,i.deflateReset=U,i.deflateResetKeep=Ie,i.deflateSetHeader=function(w,z){return w&&w.state?w.state.wrap!==2?b:(w.state.gzhead=z,m):b},i.deflate=function(w,z){var L,C,R,O;if(!w||!w.state||5<z||z<0)return w?ce(w,b):b;if(C=w.state,!w.output||!w.input&&w.avail_in!==0||C.status===666&&z!==p)return ce(w,w.avail_out===0?-5:b);if(C.strm=w,L=C.last_flush,C.last_flush=z,C.status===F)if(C.wrap===2)w.adler=0,_e(C,31),_e(C,139),_e(C,8),C.gzhead?(_e(C,(C.gzhead.text?1:0)+(C.gzhead.hcrc?2:0)+(C.gzhead.extra?4:0)+(C.gzhead.name?8:0)+(C.gzhead.comment?16:0)),_e(C,255&C.gzhead.time),_e(C,C.gzhead.time>>8&255),_e(C,C.gzhead.time>>16&255),_e(C,C.gzhead.time>>24&255),_e(C,C.level===9?2:2<=C.strategy||C.level<2?4:0),_e(C,255&C.gzhead.os),C.gzhead.extra&&C.gzhead.extra.length&&(_e(C,255&C.gzhead.extra.length),_e(C,C.gzhead.extra.length>>8&255)),C.gzhead.hcrc&&(w.adler=u(w.adler,C.pending_buf,C.pending,0)),C.gzindex=0,C.status=69):(_e(C,0),_e(C,0),_e(C,0),_e(C,0),_e(C,0),_e(C,C.level===9?2:2<=C.strategy||C.level<2?4:0),_e(C,3),C.status=K);else{var Z=x+(C.w_bits-8<<4)<<8;Z|=(2<=C.strategy||C.level<2?0:C.level<6?1:C.level===6?2:3)<<6,C.strstart!==0&&(Z|=32),Z+=31-Z%31,C.status=K,ve(C,Z),C.strstart!==0&&(ve(C,w.adler>>>16),ve(C,65535&w.adler)),w.adler=1}if(C.status===69)if(C.gzhead.extra){for(R=C.pending;C.gzindex<(65535&C.gzhead.extra.length)&&(C.pending!==C.pending_buf_size||(C.gzhead.hcrc&&C.pending>R&&(w.adler=u(w.adler,C.pending_buf,C.pending-R,R)),te(w),R=C.pending,C.pending!==C.pending_buf_size));)_e(C,255&C.gzhead.extra[C.gzindex]),C.gzindex++;C.gzhead.hcrc&&C.pending>R&&(w.adler=u(w.adler,C.pending_buf,C.pending-R,R)),C.gzindex===C.gzhead.extra.length&&(C.gzindex=0,C.status=73)}else C.status=73;if(C.status===73)if(C.gzhead.name){R=C.pending;do{if(C.pending===C.pending_buf_size&&(C.gzhead.hcrc&&C.pending>R&&(w.adler=u(w.adler,C.pending_buf,C.pending-R,R)),te(w),R=C.pending,C.pending===C.pending_buf_size)){O=1;break}O=C.gzindex<C.gzhead.name.length?255&C.gzhead.name.charCodeAt(C.gzindex++):0,_e(C,O)}while(O!==0);C.gzhead.hcrc&&C.pending>R&&(w.adler=u(w.adler,C.pending_buf,C.pending-R,R)),O===0&&(C.gzindex=0,C.status=91)}else C.status=91;if(C.status===91)if(C.gzhead.comment){R=C.pending;do{if(C.pending===C.pending_buf_size&&(C.gzhead.hcrc&&C.pending>R&&(w.adler=u(w.adler,C.pending_buf,C.pending-R,R)),te(w),R=C.pending,C.pending===C.pending_buf_size)){O=1;break}O=C.gzindex<C.gzhead.comment.length?255&C.gzhead.comment.charCodeAt(C.gzindex++):0,_e(C,O)}while(O!==0);C.gzhead.hcrc&&C.pending>R&&(w.adler=u(w.adler,C.pending_buf,C.pending-R,R)),O===0&&(C.status=103)}else C.status=103;if(C.status===103&&(C.gzhead.hcrc?(C.pending+2>C.pending_buf_size&&te(w),C.pending+2<=C.pending_buf_size&&(_e(C,255&w.adler),_e(C,w.adler>>8&255),w.adler=0,C.status=K)):C.status=K),C.pending!==0){if(te(w),w.avail_out===0)return C.last_flush=-1,m}else if(w.avail_in===0&&ie(z)<=ie(L)&&z!==p)return ce(w,-5);if(C.status===666&&w.avail_in!==0)return ce(w,-5);if(w.avail_in!==0||C.lookahead!==0||z!==f&&C.status!==666){var W=C.strategy===2?function($,ae){for(var fe;;){if($.lookahead===0&&(Ze($),$.lookahead===0)){if(ae===f)return T;break}if($.match_length=0,fe=a._tr_tally($,0,$.window[$.strstart]),$.lookahead--,$.strstart++,fe&&(J($,!1),$.strm.avail_out===0))return T}return $.insert=0,ae===p?(J($,!0),$.strm.avail_out===0?Y:M):$.last_lit&&(J($,!1),$.strm.avail_out===0)?T:ee}(C,z):C.strategy===3?function($,ae){for(var fe,de,be,Ne,Se=$.window;;){if($.lookahead<=Q){if(Ze($),$.lookahead<=Q&&ae===f)return T;if($.lookahead===0)break}if($.match_length=0,$.lookahead>=re&&0<$.strstart&&(de=Se[be=$.strstart-1])===Se[++be]&&de===Se[++be]&&de===Se[++be]){Ne=$.strstart+Q;do;while(de===Se[++be]&&de===Se[++be]&&de===Se[++be]&&de===Se[++be]&&de===Se[++be]&&de===Se[++be]&&de===Se[++be]&&de===Se[++be]&&be<Ne);$.match_length=Q-(Ne-be),$.match_length>$.lookahead&&($.match_length=$.lookahead)}if($.match_length>=re?(fe=a._tr_tally($,1,$.match_length-re),$.lookahead-=$.match_length,$.strstart+=$.match_length,$.match_length=0):(fe=a._tr_tally($,0,$.window[$.strstart]),$.lookahead--,$.strstart++),fe&&(J($,!1),$.strm.avail_out===0))return T}return $.insert=0,ae===p?(J($,!0),$.strm.avail_out===0?Y:M):$.last_lit&&(J($,!1),$.strm.avail_out===0)?T:ee}(C,z):s[C.level].func(C,z);if(W!==Y&&W!==M||(C.status=666),W===T||W===Y)return w.avail_out===0&&(C.last_flush=-1),m;if(W===ee&&(z===1?a._tr_align(C):z!==5&&(a._tr_stored_block(C,0,0,!1),z===3&&(he(C.head),C.lookahead===0&&(C.strstart=0,C.block_start=0,C.insert=0))),te(w),w.avail_out===0))return C.last_flush=-1,m}return z!==p?m:C.wrap<=0?1:(C.wrap===2?(_e(C,255&w.adler),_e(C,w.adler>>8&255),_e(C,w.adler>>16&255),_e(C,w.adler>>24&255),_e(C,255&w.total_in),_e(C,w.total_in>>8&255),_e(C,w.total_in>>16&255),_e(C,w.total_in>>24&255)):(ve(C,w.adler>>>16),ve(C,65535&w.adler)),te(w),0<C.wrap&&(C.wrap=-C.wrap),C.pending!==0?m:1)},i.deflateEnd=function(w){var z;return w&&w.state?(z=w.state.status)!==F&&z!==69&&z!==73&&z!==91&&z!==103&&z!==K&&z!==666?ce(w,b):(w.state=null,z===K?ce(w,-3):m):b},i.deflateSetDictionary=function(w,z){var L,C,R,O,Z,W,$,ae,fe=z.length;if(!w||!w.state||(O=(L=w.state).wrap)===2||O===1&&L.status!==F||L.lookahead)return b;for(O===1&&(w.adler=l(w.adler,z,fe,0)),L.wrap=0,fe>=L.w_size&&(O===0&&(he(L.head),L.strstart=0,L.block_start=0,L.insert=0),ae=new o.Buf8(L.w_size),o.arraySet(ae,z,fe-L.w_size,L.w_size,0),z=ae,fe=L.w_size),Z=w.avail_in,W=w.next_in,$=w.input,w.avail_in=fe,w.next_in=0,w.input=z,Ze(L);L.lookahead>=re;){for(C=L.strstart,R=L.lookahead-(re-1);L.ins_h=(L.ins_h<<L.hash_shift^L.window[C+re-1])&L.hash_mask,L.prev[C&L.w_mask]=L.head[L.ins_h],L.head[L.ins_h]=C,C++,--R;);L.strstart=C,L.lookahead=re-1,Ze(L)}return L.strstart+=L.lookahead,L.block_start=L.strstart,L.insert=L.lookahead,L.lookahead=0,L.match_length=L.prev_length=re-1,L.match_available=0,w.next_in=W,w.input=$,w.avail_in=Z,L.wrap=O,m},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,r,i){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,r,i){r.exports=function(s,o){var a,l,u,d,f,p,m,b,v,I,A,x,S,D,B,X,G,se,re,Q,le,F,K,T,ee;a=s.state,l=s.next_in,T=s.input,u=l+(s.avail_in-5),d=s.next_out,ee=s.output,f=d-(o-s.avail_out),p=d+(s.avail_out-257),m=a.dmax,b=a.wsize,v=a.whave,I=a.wnext,A=a.window,x=a.hold,S=a.bits,D=a.lencode,B=a.distcode,X=(1<<a.lenbits)-1,G=(1<<a.distbits)-1;e:do{S<15&&(x+=T[l++]<<S,S+=8,x+=T[l++]<<S,S+=8),se=D[x&X];t:for(;;){if(x>>>=re=se>>>24,S-=re,(re=se>>>16&255)===0)ee[d++]=65535&se;else{if(!(16&re)){if(!(64&re)){se=D[(65535&se)+(x&(1<<re)-1)];continue t}if(32&re){a.mode=12;break e}s.msg="invalid literal/length code",a.mode=30;break e}Q=65535&se,(re&=15)&&(S<re&&(x+=T[l++]<<S,S+=8),Q+=x&(1<<re)-1,x>>>=re,S-=re),S<15&&(x+=T[l++]<<S,S+=8,x+=T[l++]<<S,S+=8),se=B[x&G];n:for(;;){if(x>>>=re=se>>>24,S-=re,!(16&(re=se>>>16&255))){if(!(64&re)){se=B[(65535&se)+(x&(1<<re)-1)];continue n}s.msg="invalid distance code",a.mode=30;break e}if(le=65535&se,S<(re&=15)&&(x+=T[l++]<<S,(S+=8)<re&&(x+=T[l++]<<S,S+=8)),m<(le+=x&(1<<re)-1)){s.msg="invalid distance too far back",a.mode=30;break e}if(x>>>=re,S-=re,(re=d-f)<le){if(v<(re=le-re)&&a.sane){s.msg="invalid distance too far back",a.mode=30;break e}if(K=A,(F=0)===I){if(F+=b-re,re<Q){for(Q-=re;ee[d++]=A[F++],--re;);F=d-le,K=ee}}else if(I<re){if(F+=b+I-re,(re-=I)<Q){for(Q-=re;ee[d++]=A[F++],--re;);if(F=0,I<Q){for(Q-=re=I;ee[d++]=A[F++],--re;);F=d-le,K=ee}}}else if(F+=I-re,re<Q){for(Q-=re;ee[d++]=A[F++],--re;);F=d-le,K=ee}for(;2<Q;)ee[d++]=K[F++],ee[d++]=K[F++],ee[d++]=K[F++],Q-=3;Q&&(ee[d++]=K[F++],1<Q&&(ee[d++]=K[F++]))}else{for(F=d-le;ee[d++]=ee[F++],ee[d++]=ee[F++],ee[d++]=ee[F++],2<(Q-=3););Q&&(ee[d++]=ee[F++],1<Q&&(ee[d++]=ee[F++]))}break}}break}}while(l<u&&d<p);l-=Q=S>>3,x&=(1<<(S-=Q<<3))-1,s.next_in=l,s.next_out=d,s.avail_in=l<u?u-l+5:5-(l-u),s.avail_out=d<p?p-d+257:257-(d-p),a.hold=x,a.bits=S}},{}],49:[function(n,r,i){var s=n("../utils/common"),o=n("./adler32"),a=n("./crc32"),l=n("./inffast"),u=n("./inftrees"),d=1,f=2,p=0,m=-2,b=1,v=852,I=592;function A(F){return(F>>>24&255)+(F>>>8&65280)+((65280&F)<<8)+((255&F)<<24)}function x(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function S(F){var K;return F&&F.state?(K=F.state,F.total_in=F.total_out=K.total=0,F.msg="",K.wrap&&(F.adler=1&K.wrap),K.mode=b,K.last=0,K.havedict=0,K.dmax=32768,K.head=null,K.hold=0,K.bits=0,K.lencode=K.lendyn=new s.Buf32(v),K.distcode=K.distdyn=new s.Buf32(I),K.sane=1,K.back=-1,p):m}function D(F){var K;return F&&F.state?((K=F.state).wsize=0,K.whave=0,K.wnext=0,S(F)):m}function B(F,K){var T,ee;return F&&F.state?(ee=F.state,K<0?(T=0,K=-K):(T=1+(K>>4),K<48&&(K&=15)),K&&(K<8||15<K)?m:(ee.window!==null&&ee.wbits!==K&&(ee.window=null),ee.wrap=T,ee.wbits=K,D(F))):m}function X(F,K){var T,ee;return F?(ee=new x,(F.state=ee).window=null,(T=B(F,K))!==p&&(F.state=null),T):m}var G,se,re=!0;function Q(F){if(re){var K;for(G=new s.Buf32(512),se=new s.Buf32(32),K=0;K<144;)F.lens[K++]=8;for(;K<256;)F.lens[K++]=9;for(;K<280;)F.lens[K++]=7;for(;K<288;)F.lens[K++]=8;for(u(d,F.lens,0,288,G,0,F.work,{bits:9}),K=0;K<32;)F.lens[K++]=5;u(f,F.lens,0,32,se,0,F.work,{bits:5}),re=!1}F.lencode=G,F.lenbits=9,F.distcode=se,F.distbits=5}function le(F,K,T,ee){var Y,M=F.state;return M.window===null&&(M.wsize=1<<M.wbits,M.wnext=0,M.whave=0,M.window=new s.Buf8(M.wsize)),ee>=M.wsize?(s.arraySet(M.window,K,T-M.wsize,M.wsize,0),M.wnext=0,M.whave=M.wsize):(ee<(Y=M.wsize-M.wnext)&&(Y=ee),s.arraySet(M.window,K,T-ee,Y,M.wnext),(ee-=Y)?(s.arraySet(M.window,K,T-ee,ee,0),M.wnext=ee,M.whave=M.wsize):(M.wnext+=Y,M.wnext===M.wsize&&(M.wnext=0),M.whave<M.wsize&&(M.whave+=Y))),0}i.inflateReset=D,i.inflateReset2=B,i.inflateResetKeep=S,i.inflateInit=function(F){return X(F,15)},i.inflateInit2=X,i.inflate=function(F,K){var T,ee,Y,M,ce,ie,he,te,J,_e,ve,H,Ze,ze,Le,Te,Me,Ie,U,V,w,z,L,C,R=0,O=new s.Buf8(4),Z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!F||!F.state||!F.output||!F.input&&F.avail_in!==0)return m;(T=F.state).mode===12&&(T.mode=13),ce=F.next_out,Y=F.output,he=F.avail_out,M=F.next_in,ee=F.input,ie=F.avail_in,te=T.hold,J=T.bits,_e=ie,ve=he,z=p;e:for(;;)switch(T.mode){case b:if(T.wrap===0){T.mode=13;break}for(;J<16;){if(ie===0)break e;ie--,te+=ee[M++]<<J,J+=8}if(2&T.wrap&&te===35615){O[T.check=0]=255&te,O[1]=te>>>8&255,T.check=a(T.check,O,2,0),J=te=0,T.mode=2;break}if(T.flags=0,T.head&&(T.head.done=!1),!(1&T.wrap)||(((255&te)<<8)+(te>>8))%31){F.msg="incorrect header check",T.mode=30;break}if((15&te)!=8){F.msg="unknown compression method",T.mode=30;break}if(J-=4,w=8+(15&(te>>>=4)),T.wbits===0)T.wbits=w;else if(w>T.wbits){F.msg="invalid window size",T.mode=30;break}T.dmax=1<<w,F.adler=T.check=1,T.mode=512&te?10:12,J=te=0;break;case 2:for(;J<16;){if(ie===0)break e;ie--,te+=ee[M++]<<J,J+=8}if(T.flags=te,(255&T.flags)!=8){F.msg="unknown compression method",T.mode=30;break}if(57344&T.flags){F.msg="unknown header flags set",T.mode=30;break}T.head&&(T.head.text=te>>8&1),512&T.flags&&(O[0]=255&te,O[1]=te>>>8&255,T.check=a(T.check,O,2,0)),J=te=0,T.mode=3;case 3:for(;J<32;){if(ie===0)break e;ie--,te+=ee[M++]<<J,J+=8}T.head&&(T.head.time=te),512&T.flags&&(O[0]=255&te,O[1]=te>>>8&255,O[2]=te>>>16&255,O[3]=te>>>24&255,T.check=a(T.check,O,4,0)),J=te=0,T.mode=4;case 4:for(;J<16;){if(ie===0)break e;ie--,te+=ee[M++]<<J,J+=8}T.head&&(T.head.xflags=255&te,T.head.os=te>>8),512&T.flags&&(O[0]=255&te,O[1]=te>>>8&255,T.check=a(T.check,O,2,0)),J=te=0,T.mode=5;case 5:if(1024&T.flags){for(;J<16;){if(ie===0)break e;ie--,te+=ee[M++]<<J,J+=8}T.length=te,T.head&&(T.head.extra_len=te),512&T.flags&&(O[0]=255&te,O[1]=te>>>8&255,T.check=a(T.check,O,2,0)),J=te=0}else T.head&&(T.head.extra=null);T.mode=6;case 6:if(1024&T.flags&&(ie<(H=T.length)&&(H=ie),H&&(T.head&&(w=T.head.extra_len-T.length,T.head.extra||(T.head.extra=new Array(T.head.extra_len)),s.arraySet(T.head.extra,ee,M,H,w)),512&T.flags&&(T.check=a(T.check,ee,H,M)),ie-=H,M+=H,T.length-=H),T.length))break e;T.length=0,T.mode=7;case 7:if(2048&T.flags){if(ie===0)break e;for(H=0;w=ee[M+H++],T.head&&w&&T.length<65536&&(T.head.name+=String.fromCharCode(w)),w&&H<ie;);if(512&T.flags&&(T.check=a(T.check,ee,H,M)),ie-=H,M+=H,w)break e}else T.head&&(T.head.name=null);T.length=0,T.mode=8;case 8:if(4096&T.flags){if(ie===0)break e;for(H=0;w=ee[M+H++],T.head&&w&&T.length<65536&&(T.head.comment+=String.fromCharCode(w)),w&&H<ie;);if(512&T.flags&&(T.check=a(T.check,ee,H,M)),ie-=H,M+=H,w)break e}else T.head&&(T.head.comment=null);T.mode=9;case 9:if(512&T.flags){for(;J<16;){if(ie===0)break e;ie--,te+=ee[M++]<<J,J+=8}if(te!==(65535&T.check)){F.msg="header crc mismatch",T.mode=30;break}J=te=0}T.head&&(T.head.hcrc=T.flags>>9&1,T.head.done=!0),F.adler=T.check=0,T.mode=12;break;case 10:for(;J<32;){if(ie===0)break e;ie--,te+=ee[M++]<<J,J+=8}F.adler=T.check=A(te),J=te=0,T.mode=11;case 11:if(T.havedict===0)return F.next_out=ce,F.avail_out=he,F.next_in=M,F.avail_in=ie,T.hold=te,T.bits=J,2;F.adler=T.check=1,T.mode=12;case 12:if(K===5||K===6)break e;case 13:if(T.last){te>>>=7&J,J-=7&J,T.mode=27;break}for(;J<3;){if(ie===0)break e;ie--,te+=ee[M++]<<J,J+=8}switch(T.last=1&te,J-=1,3&(te>>>=1)){case 0:T.mode=14;break;case 1:if(Q(T),T.mode=20,K!==6)break;te>>>=2,J-=2;break e;case 2:T.mode=17;break;case 3:F.msg="invalid block type",T.mode=30}te>>>=2,J-=2;break;case 14:for(te>>>=7&J,J-=7&J;J<32;){if(ie===0)break e;ie--,te+=ee[M++]<<J,J+=8}if((65535&te)!=(te>>>16^65535)){F.msg="invalid stored block lengths",T.mode=30;break}if(T.length=65535&te,J=te=0,T.mode=15,K===6)break e;case 15:T.mode=16;case 16:if(H=T.length){if(ie<H&&(H=ie),he<H&&(H=he),H===0)break e;s.arraySet(Y,ee,M,H,ce),ie-=H,M+=H,he-=H,ce+=H,T.length-=H;break}T.mode=12;break;case 17:for(;J<14;){if(ie===0)break e;ie--,te+=ee[M++]<<J,J+=8}if(T.nlen=257+(31&te),te>>>=5,J-=5,T.ndist=1+(31&te),te>>>=5,J-=5,T.ncode=4+(15&te),te>>>=4,J-=4,286<T.nlen||30<T.ndist){F.msg="too many length or distance symbols",T.mode=30;break}T.have=0,T.mode=18;case 18:for(;T.have<T.ncode;){for(;J<3;){if(ie===0)break e;ie--,te+=ee[M++]<<J,J+=8}T.lens[Z[T.have++]]=7&te,te>>>=3,J-=3}for(;T.have<19;)T.lens[Z[T.have++]]=0;if(T.lencode=T.lendyn,T.lenbits=7,L={bits:T.lenbits},z=u(0,T.lens,0,19,T.lencode,0,T.work,L),T.lenbits=L.bits,z){F.msg="invalid code lengths set",T.mode=30;break}T.have=0,T.mode=19;case 19:for(;T.have<T.nlen+T.ndist;){for(;Te=(R=T.lencode[te&(1<<T.lenbits)-1])>>>16&255,Me=65535&R,!((Le=R>>>24)<=J);){if(ie===0)break e;ie--,te+=ee[M++]<<J,J+=8}if(Me<16)te>>>=Le,J-=Le,T.lens[T.have++]=Me;else{if(Me===16){for(C=Le+2;J<C;){if(ie===0)break e;ie--,te+=ee[M++]<<J,J+=8}if(te>>>=Le,J-=Le,T.have===0){F.msg="invalid bit length repeat",T.mode=30;break}w=T.lens[T.have-1],H=3+(3&te),te>>>=2,J-=2}else if(Me===17){for(C=Le+3;J<C;){if(ie===0)break e;ie--,te+=ee[M++]<<J,J+=8}J-=Le,w=0,H=3+(7&(te>>>=Le)),te>>>=3,J-=3}else{for(C=Le+7;J<C;){if(ie===0)break e;ie--,te+=ee[M++]<<J,J+=8}J-=Le,w=0,H=11+(127&(te>>>=Le)),te>>>=7,J-=7}if(T.have+H>T.nlen+T.ndist){F.msg="invalid bit length repeat",T.mode=30;break}for(;H--;)T.lens[T.have++]=w}}if(T.mode===30)break;if(T.lens[256]===0){F.msg="invalid code -- missing end-of-block",T.mode=30;break}if(T.lenbits=9,L={bits:T.lenbits},z=u(d,T.lens,0,T.nlen,T.lencode,0,T.work,L),T.lenbits=L.bits,z){F.msg="invalid literal/lengths set",T.mode=30;break}if(T.distbits=6,T.distcode=T.distdyn,L={bits:T.distbits},z=u(f,T.lens,T.nlen,T.ndist,T.distcode,0,T.work,L),T.distbits=L.bits,z){F.msg="invalid distances set",T.mode=30;break}if(T.mode=20,K===6)break e;case 20:T.mode=21;case 21:if(6<=ie&&258<=he){F.next_out=ce,F.avail_out=he,F.next_in=M,F.avail_in=ie,T.hold=te,T.bits=J,l(F,ve),ce=F.next_out,Y=F.output,he=F.avail_out,M=F.next_in,ee=F.input,ie=F.avail_in,te=T.hold,J=T.bits,T.mode===12&&(T.back=-1);break}for(T.back=0;Te=(R=T.lencode[te&(1<<T.lenbits)-1])>>>16&255,Me=65535&R,!((Le=R>>>24)<=J);){if(ie===0)break e;ie--,te+=ee[M++]<<J,J+=8}if(Te&&!(240&Te)){for(Ie=Le,U=Te,V=Me;Te=(R=T.lencode[V+((te&(1<<Ie+U)-1)>>Ie)])>>>16&255,Me=65535&R,!(Ie+(Le=R>>>24)<=J);){if(ie===0)break e;ie--,te+=ee[M++]<<J,J+=8}te>>>=Ie,J-=Ie,T.back+=Ie}if(te>>>=Le,J-=Le,T.back+=Le,T.length=Me,Te===0){T.mode=26;break}if(32&Te){T.back=-1,T.mode=12;break}if(64&Te){F.msg="invalid literal/length code",T.mode=30;break}T.extra=15&Te,T.mode=22;case 22:if(T.extra){for(C=T.extra;J<C;){if(ie===0)break e;ie--,te+=ee[M++]<<J,J+=8}T.length+=te&(1<<T.extra)-1,te>>>=T.extra,J-=T.extra,T.back+=T.extra}T.was=T.length,T.mode=23;case 23:for(;Te=(R=T.distcode[te&(1<<T.distbits)-1])>>>16&255,Me=65535&R,!((Le=R>>>24)<=J);){if(ie===0)break e;ie--,te+=ee[M++]<<J,J+=8}if(!(240&Te)){for(Ie=Le,U=Te,V=Me;Te=(R=T.distcode[V+((te&(1<<Ie+U)-1)>>Ie)])>>>16&255,Me=65535&R,!(Ie+(Le=R>>>24)<=J);){if(ie===0)break e;ie--,te+=ee[M++]<<J,J+=8}te>>>=Ie,J-=Ie,T.back+=Ie}if(te>>>=Le,J-=Le,T.back+=Le,64&Te){F.msg="invalid distance code",T.mode=30;break}T.offset=Me,T.extra=15&Te,T.mode=24;case 24:if(T.extra){for(C=T.extra;J<C;){if(ie===0)break e;ie--,te+=ee[M++]<<J,J+=8}T.offset+=te&(1<<T.extra)-1,te>>>=T.extra,J-=T.extra,T.back+=T.extra}if(T.offset>T.dmax){F.msg="invalid distance too far back",T.mode=30;break}T.mode=25;case 25:if(he===0)break e;if(H=ve-he,T.offset>H){if((H=T.offset-H)>T.whave&&T.sane){F.msg="invalid distance too far back",T.mode=30;break}Ze=H>T.wnext?(H-=T.wnext,T.wsize-H):T.wnext-H,H>T.length&&(H=T.length),ze=T.window}else ze=Y,Ze=ce-T.offset,H=T.length;for(he<H&&(H=he),he-=H,T.length-=H;Y[ce++]=ze[Ze++],--H;);T.length===0&&(T.mode=21);break;case 26:if(he===0)break e;Y[ce++]=T.length,he--,T.mode=21;break;case 27:if(T.wrap){for(;J<32;){if(ie===0)break e;ie--,te|=ee[M++]<<J,J+=8}if(ve-=he,F.total_out+=ve,T.total+=ve,ve&&(F.adler=T.check=T.flags?a(T.check,Y,ve,ce-ve):o(T.check,Y,ve,ce-ve)),ve=he,(T.flags?te:A(te))!==T.check){F.msg="incorrect data check",T.mode=30;break}J=te=0}T.mode=28;case 28:if(T.wrap&&T.flags){for(;J<32;){if(ie===0)break e;ie--,te+=ee[M++]<<J,J+=8}if(te!==(4294967295&T.total)){F.msg="incorrect length check",T.mode=30;break}J=te=0}T.mode=29;case 29:z=1;break e;case 30:z=-3;break e;case 31:return-4;case 32:default:return m}return F.next_out=ce,F.avail_out=he,F.next_in=M,F.avail_in=ie,T.hold=te,T.bits=J,(T.wsize||ve!==F.avail_out&&T.mode<30&&(T.mode<27||K!==4))&&le(F,F.output,F.next_out,ve-F.avail_out)?(T.mode=31,-4):(_e-=F.avail_in,ve-=F.avail_out,F.total_in+=_e,F.total_out+=ve,T.total+=ve,T.wrap&&ve&&(F.adler=T.check=T.flags?a(T.check,Y,ve,F.next_out-ve):o(T.check,Y,ve,F.next_out-ve)),F.data_type=T.bits+(T.last?64:0)+(T.mode===12?128:0)+(T.mode===20||T.mode===15?256:0),(_e==0&&ve===0||K===4)&&z===p&&(z=-5),z)},i.inflateEnd=function(F){if(!F||!F.state)return m;var K=F.state;return K.window&&(K.window=null),F.state=null,p},i.inflateGetHeader=function(F,K){var T;return F&&F.state&&2&(T=F.state).wrap?((T.head=K).done=!1,p):m},i.inflateSetDictionary=function(F,K){var T,ee=K.length;return F&&F.state?(T=F.state).wrap!==0&&T.mode!==11?m:T.mode===11&&o(1,K,ee,0)!==T.check?-3:le(F,K,ee,ee)?(T.mode=31,-4):(T.havedict=1,p):m},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,r,i){var s=n("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(d,f,p,m,b,v,I,A){var x,S,D,B,X,G,se,re,Q,le=A.bits,F=0,K=0,T=0,ee=0,Y=0,M=0,ce=0,ie=0,he=0,te=0,J=null,_e=0,ve=new s.Buf16(16),H=new s.Buf16(16),Ze=null,ze=0;for(F=0;F<=15;F++)ve[F]=0;for(K=0;K<m;K++)ve[f[p+K]]++;for(Y=le,ee=15;1<=ee&&ve[ee]===0;ee--);if(ee<Y&&(Y=ee),ee===0)return b[v++]=20971520,b[v++]=20971520,A.bits=1,0;for(T=1;T<ee&&ve[T]===0;T++);for(Y<T&&(Y=T),F=ie=1;F<=15;F++)if(ie<<=1,(ie-=ve[F])<0)return-1;if(0<ie&&(d===0||ee!==1))return-1;for(H[1]=0,F=1;F<15;F++)H[F+1]=H[F]+ve[F];for(K=0;K<m;K++)f[p+K]!==0&&(I[H[f[p+K]]++]=K);if(G=d===0?(J=Ze=I,19):d===1?(J=o,_e-=257,Ze=a,ze-=257,256):(J=l,Ze=u,-1),F=T,X=v,ce=K=te=0,D=-1,B=(he=1<<(M=Y))-1,d===1&&852<he||d===2&&592<he)return 1;for(;;){for(se=F-ce,Q=I[K]<G?(re=0,I[K]):I[K]>G?(re=Ze[ze+I[K]],J[_e+I[K]]):(re=96,0),x=1<<F-ce,T=S=1<<M;b[X+(te>>ce)+(S-=x)]=se<<24|re<<16|Q|0,S!==0;);for(x=1<<F-1;te&x;)x>>=1;if(x!==0?(te&=x-1,te+=x):te=0,K++,--ve[F]==0){if(F===ee)break;F=f[p+I[K]]}if(Y<F&&(te&B)!==D){for(ce===0&&(ce=Y),X+=T,ie=1<<(M=F-ce);M+ce<ee&&!((ie-=ve[M+ce])<=0);)M++,ie<<=1;if(he+=1<<M,d===1&&852<he||d===2&&592<he)return 1;b[D=te&B]=Y<<24|M<<16|X-v|0}}return te!==0&&(b[X+te]=F-ce<<24|64<<16|0),A.bits=Y,0}},{"../utils/common":41}],51:[function(n,r,i){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,r,i){var s=n("../utils/common"),o=0,a=1;function l(R){for(var O=R.length;0<=--O;)R[O]=0}var u=0,d=29,f=256,p=f+1+d,m=30,b=19,v=2*p+1,I=15,A=16,x=7,S=256,D=16,B=17,X=18,G=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],se=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],re=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Q=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],le=new Array(2*(p+2));l(le);var F=new Array(2*m);l(F);var K=new Array(512);l(K);var T=new Array(256);l(T);var ee=new Array(d);l(ee);var Y,M,ce,ie=new Array(m);function he(R,O,Z,W,$){this.static_tree=R,this.extra_bits=O,this.extra_base=Z,this.elems=W,this.max_length=$,this.has_stree=R&&R.length}function te(R,O){this.dyn_tree=R,this.max_code=0,this.stat_desc=O}function J(R){return R<256?K[R]:K[256+(R>>>7)]}function _e(R,O){R.pending_buf[R.pending++]=255&O,R.pending_buf[R.pending++]=O>>>8&255}function ve(R,O,Z){R.bi_valid>A-Z?(R.bi_buf|=O<<R.bi_valid&65535,_e(R,R.bi_buf),R.bi_buf=O>>A-R.bi_valid,R.bi_valid+=Z-A):(R.bi_buf|=O<<R.bi_valid&65535,R.bi_valid+=Z)}function H(R,O,Z){ve(R,Z[2*O],Z[2*O+1])}function Ze(R,O){for(var Z=0;Z|=1&R,R>>>=1,Z<<=1,0<--O;);return Z>>>1}function ze(R,O,Z){var W,$,ae=new Array(I+1),fe=0;for(W=1;W<=I;W++)ae[W]=fe=fe+Z[W-1]<<1;for($=0;$<=O;$++){var de=R[2*$+1];de!==0&&(R[2*$]=Ze(ae[de]++,de))}}function Le(R){var O;for(O=0;O<p;O++)R.dyn_ltree[2*O]=0;for(O=0;O<m;O++)R.dyn_dtree[2*O]=0;for(O=0;O<b;O++)R.bl_tree[2*O]=0;R.dyn_ltree[2*S]=1,R.opt_len=R.static_len=0,R.last_lit=R.matches=0}function Te(R){8<R.bi_valid?_e(R,R.bi_buf):0<R.bi_valid&&(R.pending_buf[R.pending++]=R.bi_buf),R.bi_buf=0,R.bi_valid=0}function Me(R,O,Z,W){var $=2*O,ae=2*Z;return R[$]<R[ae]||R[$]===R[ae]&&W[O]<=W[Z]}function Ie(R,O,Z){for(var W=R.heap[Z],$=Z<<1;$<=R.heap_len&&($<R.heap_len&&Me(O,R.heap[$+1],R.heap[$],R.depth)&&$++,!Me(O,W,R.heap[$],R.depth));)R.heap[Z]=R.heap[$],Z=$,$<<=1;R.heap[Z]=W}function U(R,O,Z){var W,$,ae,fe,de=0;if(R.last_lit!==0)for(;W=R.pending_buf[R.d_buf+2*de]<<8|R.pending_buf[R.d_buf+2*de+1],$=R.pending_buf[R.l_buf+de],de++,W===0?H(R,$,O):(H(R,(ae=T[$])+f+1,O),(fe=G[ae])!==0&&ve(R,$-=ee[ae],fe),H(R,ae=J(--W),Z),(fe=se[ae])!==0&&ve(R,W-=ie[ae],fe)),de<R.last_lit;);H(R,S,O)}function V(R,O){var Z,W,$,ae=O.dyn_tree,fe=O.stat_desc.static_tree,de=O.stat_desc.has_stree,be=O.stat_desc.elems,Ne=-1;for(R.heap_len=0,R.heap_max=v,Z=0;Z<be;Z++)ae[2*Z]!==0?(R.heap[++R.heap_len]=Ne=Z,R.depth[Z]=0):ae[2*Z+1]=0;for(;R.heap_len<2;)ae[2*($=R.heap[++R.heap_len]=Ne<2?++Ne:0)]=1,R.depth[$]=0,R.opt_len--,de&&(R.static_len-=fe[2*$+1]);for(O.max_code=Ne,Z=R.heap_len>>1;1<=Z;Z--)Ie(R,ae,Z);for($=be;Z=R.heap[1],R.heap[1]=R.heap[R.heap_len--],Ie(R,ae,1),W=R.heap[1],R.heap[--R.heap_max]=Z,R.heap[--R.heap_max]=W,ae[2*$]=ae[2*Z]+ae[2*W],R.depth[$]=(R.depth[Z]>=R.depth[W]?R.depth[Z]:R.depth[W])+1,ae[2*Z+1]=ae[2*W+1]=$,R.heap[1]=$++,Ie(R,ae,1),2<=R.heap_len;);R.heap[--R.heap_max]=R.heap[1],function(Se,qe){var it,ht,Ut,pt,pn,Ot,Et=qe.dyn_tree,Kn=qe.max_code,Ye=qe.stat_desc.static_tree,jt=qe.stat_desc.has_stree,Nn=qe.stat_desc.extra_bits,kr=qe.stat_desc.extra_base,yn=qe.stat_desc.max_length,mr=0;for(pt=0;pt<=I;pt++)Se.bl_count[pt]=0;for(Et[2*Se.heap[Se.heap_max]+1]=0,it=Se.heap_max+1;it<v;it++)yn<(pt=Et[2*Et[2*(ht=Se.heap[it])+1]+1]+1)&&(pt=yn,mr++),Et[2*ht+1]=pt,Kn<ht||(Se.bl_count[pt]++,pn=0,kr<=ht&&(pn=Nn[ht-kr]),Ot=Et[2*ht],Se.opt_len+=Ot*(pt+pn),jt&&(Se.static_len+=Ot*(Ye[2*ht+1]+pn)));if(mr!==0){do{for(pt=yn-1;Se.bl_count[pt]===0;)pt--;Se.bl_count[pt]--,Se.bl_count[pt+1]+=2,Se.bl_count[yn]--,mr-=2}while(0<mr);for(pt=yn;pt!==0;pt--)for(ht=Se.bl_count[pt];ht!==0;)Kn<(Ut=Se.heap[--it])||(Et[2*Ut+1]!==pt&&(Se.opt_len+=(pt-Et[2*Ut+1])*Et[2*Ut],Et[2*Ut+1]=pt),ht--)}}(R,O),ze(ae,Ne,R.bl_count)}function w(R,O,Z){var W,$,ae=-1,fe=O[1],de=0,be=7,Ne=4;for(fe===0&&(be=138,Ne=3),O[2*(Z+1)+1]=65535,W=0;W<=Z;W++)$=fe,fe=O[2*(W+1)+1],++de<be&&$===fe||(de<Ne?R.bl_tree[2*$]+=de:$!==0?($!==ae&&R.bl_tree[2*$]++,R.bl_tree[2*D]++):de<=10?R.bl_tree[2*B]++:R.bl_tree[2*X]++,ae=$,Ne=(de=0)===fe?(be=138,3):$===fe?(be=6,3):(be=7,4))}function z(R,O,Z){var W,$,ae=-1,fe=O[1],de=0,be=7,Ne=4;for(fe===0&&(be=138,Ne=3),W=0;W<=Z;W++)if($=fe,fe=O[2*(W+1)+1],!(++de<be&&$===fe)){if(de<Ne)for(;H(R,$,R.bl_tree),--de!=0;);else $!==0?($!==ae&&(H(R,$,R.bl_tree),de--),H(R,D,R.bl_tree),ve(R,de-3,2)):de<=10?(H(R,B,R.bl_tree),ve(R,de-3,3)):(H(R,X,R.bl_tree),ve(R,de-11,7));ae=$,Ne=(de=0)===fe?(be=138,3):$===fe?(be=6,3):(be=7,4)}}l(ie);var L=!1;function C(R,O,Z,W){ve(R,(u<<1)+(W?1:0),3),function($,ae,fe,de){Te($),de&&(_e($,fe),_e($,~fe)),s.arraySet($.pending_buf,$.window,ae,fe,$.pending),$.pending+=fe}(R,O,Z,!0)}i._tr_init=function(R){L||(function(){var O,Z,W,$,ae,fe=new Array(I+1);for($=W=0;$<d-1;$++)for(ee[$]=W,O=0;O<1<<G[$];O++)T[W++]=$;for(T[W-1]=$,$=ae=0;$<16;$++)for(ie[$]=ae,O=0;O<1<<se[$];O++)K[ae++]=$;for(ae>>=7;$<m;$++)for(ie[$]=ae<<7,O=0;O<1<<se[$]-7;O++)K[256+ae++]=$;for(Z=0;Z<=I;Z++)fe[Z]=0;for(O=0;O<=143;)le[2*O+1]=8,O++,fe[8]++;for(;O<=255;)le[2*O+1]=9,O++,fe[9]++;for(;O<=279;)le[2*O+1]=7,O++,fe[7]++;for(;O<=287;)le[2*O+1]=8,O++,fe[8]++;for(ze(le,p+1,fe),O=0;O<m;O++)F[2*O+1]=5,F[2*O]=Ze(O,5);Y=new he(le,G,f+1,p,I),M=new he(F,se,0,m,I),ce=new he(new Array(0),re,0,b,x)}(),L=!0),R.l_desc=new te(R.dyn_ltree,Y),R.d_desc=new te(R.dyn_dtree,M),R.bl_desc=new te(R.bl_tree,ce),R.bi_buf=0,R.bi_valid=0,Le(R)},i._tr_stored_block=C,i._tr_flush_block=function(R,O,Z,W){var $,ae,fe=0;0<R.level?(R.strm.data_type===2&&(R.strm.data_type=function(de){var be,Ne=4093624447;for(be=0;be<=31;be++,Ne>>>=1)if(1&Ne&&de.dyn_ltree[2*be]!==0)return o;if(de.dyn_ltree[18]!==0||de.dyn_ltree[20]!==0||de.dyn_ltree[26]!==0)return a;for(be=32;be<f;be++)if(de.dyn_ltree[2*be]!==0)return a;return o}(R)),V(R,R.l_desc),V(R,R.d_desc),fe=function(de){var be;for(w(de,de.dyn_ltree,de.l_desc.max_code),w(de,de.dyn_dtree,de.d_desc.max_code),V(de,de.bl_desc),be=b-1;3<=be&&de.bl_tree[2*Q[be]+1]===0;be--);return de.opt_len+=3*(be+1)+5+5+4,be}(R),$=R.opt_len+3+7>>>3,(ae=R.static_len+3+7>>>3)<=$&&($=ae)):$=ae=Z+5,Z+4<=$&&O!==-1?C(R,O,Z,W):R.strategy===4||ae===$?(ve(R,2+(W?1:0),3),U(R,le,F)):(ve(R,4+(W?1:0),3),function(de,be,Ne,Se){var qe;for(ve(de,be-257,5),ve(de,Ne-1,5),ve(de,Se-4,4),qe=0;qe<Se;qe++)ve(de,de.bl_tree[2*Q[qe]+1],3);z(de,de.dyn_ltree,be-1),z(de,de.dyn_dtree,Ne-1)}(R,R.l_desc.max_code+1,R.d_desc.max_code+1,fe+1),U(R,R.dyn_ltree,R.dyn_dtree)),Le(R),W&&Te(R)},i._tr_tally=function(R,O,Z){return R.pending_buf[R.d_buf+2*R.last_lit]=O>>>8&255,R.pending_buf[R.d_buf+2*R.last_lit+1]=255&O,R.pending_buf[R.l_buf+R.last_lit]=255&Z,R.last_lit++,O===0?R.dyn_ltree[2*Z]++:(R.matches++,O--,R.dyn_ltree[2*(T[Z]+f+1)]++,R.dyn_dtree[2*J(O)]++),R.last_lit===R.lit_bufsize-1},i._tr_align=function(R){ve(R,2,3),H(R,S,le),function(O){O.bi_valid===16?(_e(O,O.bi_buf),O.bi_buf=0,O.bi_valid=0):8<=O.bi_valid&&(O.pending_buf[O.pending++]=255&O.bi_buf,O.bi_buf>>=8,O.bi_valid-=8)}(R)}},{"../utils/common":41}],53:[function(n,r,i){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,r,i){(function(s){(function(o,a){if(!o.setImmediate){var l,u,d,f,p=1,m={},b=!1,v=o.document,I=Object.getPrototypeOf&&Object.getPrototypeOf(o);I=I&&I.setTimeout?I:o,l={}.toString.call(o.process)==="[object process]"?function(D){process.nextTick(function(){x(D)})}:function(){if(o.postMessage&&!o.importScripts){var D=!0,B=o.onmessage;return o.onmessage=function(){D=!1},o.postMessage("","*"),o.onmessage=B,D}}()?(f="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",S,!1):o.attachEvent("onmessage",S),function(D){o.postMessage(f+D,"*")}):o.MessageChannel?((d=new MessageChannel).port1.onmessage=function(D){x(D.data)},function(D){d.port2.postMessage(D)}):v&&"onreadystatechange"in v.createElement("script")?(u=v.documentElement,function(D){var B=v.createElement("script");B.onreadystatechange=function(){x(D),B.onreadystatechange=null,u.removeChild(B),B=null},u.appendChild(B)}):function(D){setTimeout(x,0,D)},I.setImmediate=function(D){typeof D!="function"&&(D=new Function(""+D));for(var B=new Array(arguments.length-1),X=0;X<B.length;X++)B[X]=arguments[X+1];var G={callback:D,args:B};return m[p]=G,l(p),p++},I.clearImmediate=A}function A(D){delete m[D]}function x(D){if(b)setTimeout(x,0,D);else{var B=m[D];if(B){b=!0;try{(function(X){var G=X.callback,se=X.args;switch(se.length){case 0:G();break;case 1:G(se[0]);break;case 2:G(se[0],se[1]);break;case 3:G(se[0],se[1],se[2]);break;default:G.apply(a,se)}})(B)}finally{A(D),b=!1}}}}function S(D){D.source===o&&typeof D.data=="string"&&D.data.indexOf(f)===0&&x(+D.data.slice(f.length))}})(typeof self>"u"?s===void 0?this:s:self)}).call(this,typeof Tn<"u"?Tn:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(h1);var u3=h1.exports;const c3=Nh(u3);var d1={exports:{}};const h3={},d3=Object.freeze(Object.defineProperty({__proto__:null,default:h3},Symbol.toStringTag,{value:"Module"})),nc=_D(d3);(function(t,e){var n=void 0,r=function(i){return n||(n=new Promise(function(s,o){var a=typeof i<"u"?i:{},l=a.onAbort;a.onAbort=function(c){o(new Error(c)),l&&l(c)},a.postRun=a.postRun||[],a.postRun.push(function(){s(a)}),t=void 0;var u;u||(u=typeof a<"u"?a:{}),u.onRuntimeInitialized=function(){function c(oe,ye){switch(typeof ye){case"boolean":rd(oe,ye?1:0);break;case"number":ed(oe,ye);break;case"string":td(oe,ye,-1,-1);break;case"object":if(ye===null)lu(oe);else if(ye.length!=null){var Ve=_s(ye,fo);nd(oe,Ve,ye.length,-1),go(Ve)}else _o(oe,"Wrong API use : tried to return a value of an unknown type ("+ye+").",-1);break;default:lu(oe)}}function g(oe,ye){for(var Ve=[],Ge=0;Ge<oe;Ge+=1){var at=L(ye+4*Ge,"i32"),Pt=Xh(at);if(Pt===1||Pt===2)at=Jh(at);else if(Pt===3)at=Vi(at);else if(Pt===4){Pt=at,at=au(Pt),Pt=Zh(Pt);for(var nr=new Uint8Array(at),rr=0;rr<at;rr+=1)nr[rr]=Q[Pt+rr];at=nr}else at=null;Ve.push(at)}return Ve}function y(oe,ye){this.La=oe,this.db=ye,this.Ja=1,this.fb=[]}function P(oe,ye){if(this.db=ye,ye=qe(oe)+1,this.Ya=mo(ye),this.Ya===null)throw Error("Unable to allocate memory for the SQL string");it(oe,le,this.Ya,ye),this.eb=this.Ya,this.Ua=this.ib=null}function q(oe){if(this.filename="dbfile_"+(4294967295*Math.random()>>>0),oe!=null){var ye=this.filename,Ve="/",Ge=ye;if(Ve&&(Ve=typeof Ve=="string"?Ve:Ur(Ve),Ge=ye?$(Ve+"/"+ye):Ve),ye=jt(!0,!0),Ge=Oe(Ge,(ye!==void 0?ye:438)&4095|32768,0),oe){if(typeof oe=="string"){Ve=Array(oe.length);for(var at=0,Pt=oe.length;at<Pt;++at)Ve[at]=oe.charCodeAt(at);oe=Ve}fi(Ge,ye|146),Ve=Oi(Ge,577),Ql(Ve,oe,0,oe.length,0),ha(Ve),fi(Ge,ye)}}this.handleError(We(this.filename,ue)),this.db=L(ue,"i32"),cu(this.db),this.Za={},this.Na={}}var ue=zr(4),ge=u.cwrap,We=ge("sqlite3_open","number",["string","number"]),gt=ge("sqlite3_close_v2","number",["number"]),rt=ge("sqlite3_exec","number",["number","string","number","number","number"]),on=ge("sqlite3_changes","number",["number"]),mn=ge("sqlite3_prepare_v2","number",["number","string","number","number","number"]),_i=ge("sqlite3_sql","string",["number"]),$h=ge("sqlite3_normalized_sql","string",["number"]),ga=ge("sqlite3_prepare_v2","number",["number","number","number","number","number"]),tu=ge("sqlite3_bind_text","number",["number","number","number","number","number"]),nu=ge("sqlite3_bind_blob","number",["number","number","number","number","number"]),Bh=ge("sqlite3_bind_double","number",["number","number","number"]),zh=ge("sqlite3_bind_int","number",["number","number","number"]),jh=ge("sqlite3_bind_parameter_index","number",["number","string"]),qh=ge("sqlite3_step","number",["number"]),Hh=ge("sqlite3_errmsg","string",["number"]),Wh=ge("sqlite3_column_count","number",["number"]),Mi=ge("sqlite3_data_count","number",["number"]),Kh=ge("sqlite3_column_double","number",["number","number"]),ru=ge("sqlite3_column_text","string",["number","number"]),iu=ge("sqlite3_column_blob","number",["number","number"]),Gh=ge("sqlite3_column_bytes","number",["number","number"]),jr=ge("sqlite3_column_type","number",["number","number"]),Qh=ge("sqlite3_column_name","string",["number","number"]),su=ge("sqlite3_reset","number",["number"]),ys=ge("sqlite3_clear_bindings","number",["number"]),Yh=ge("sqlite3_finalize","number",["number"]),ou=ge("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),Xh=ge("sqlite3_value_type","number",["number"]),au=ge("sqlite3_value_bytes","number",["number"]),Vi=ge("sqlite3_value_text","string",["number"]),Zh=ge("sqlite3_value_blob","number",["number"]),Jh=ge("sqlite3_value_double","number",["number"]),ed=ge("sqlite3_result_double","",["number","number"]),lu=ge("sqlite3_result_null","",["number"]),td=ge("sqlite3_result_text","",["number","string","number","number"]),nd=ge("sqlite3_result_blob","",["number","number","number","number"]),rd=ge("sqlite3_result_int","",["number","number"]),_o=ge("sqlite3_result_error","",["number","string","number"]),uu=ge("sqlite3_aggregate_context","number",["number","number"]),cu=ge("RegisterExtensionFunctions","number",["number"]);y.prototype.bind=function(oe){if(!this.La)throw"Statement closed";return this.reset(),Array.isArray(oe)?this.wb(oe):oe!=null&&typeof oe=="object"?this.xb(oe):!0},y.prototype.step=function(){if(!this.La)throw"Statement closed";this.Ja=1;var oe=qh(this.La);switch(oe){case 100:return!0;case 101:return!1;default:throw this.db.handleError(oe)}},y.prototype.rb=function(oe){return oe==null&&(oe=this.Ja,this.Ja+=1),Kh(this.La,oe)},y.prototype.Ab=function(oe){if(oe==null&&(oe=this.Ja,this.Ja+=1),oe=ru(this.La,oe),typeof BigInt!="function")throw Error("BigInt is not supported");return BigInt(oe)},y.prototype.Bb=function(oe){return oe==null&&(oe=this.Ja,this.Ja+=1),ru(this.La,oe)},y.prototype.getBlob=function(oe){oe==null&&(oe=this.Ja,this.Ja+=1);var ye=Gh(this.La,oe);oe=iu(this.La,oe);for(var Ve=new Uint8Array(ye),Ge=0;Ge<ye;Ge+=1)Ve[Ge]=Q[oe+Ge];return Ve},y.prototype.get=function(oe,ye){ye=ye||{},oe!=null&&this.bind(oe)&&this.step(),oe=[];for(var Ve=Mi(this.La),Ge=0;Ge<Ve;Ge+=1)switch(jr(this.La,Ge)){case 1:var at=ye.useBigInt?this.Ab(Ge):this.rb(Ge);oe.push(at);break;case 2:oe.push(this.rb(Ge));break;case 3:oe.push(this.Bb(Ge));break;case 4:oe.push(this.getBlob(Ge));break;default:oe.push(null)}return oe},y.prototype.getColumnNames=function(){for(var oe=[],ye=Wh(this.La),Ve=0;Ve<ye;Ve+=1)oe.push(Qh(this.La,Ve));return oe},y.prototype.getAsObject=function(oe,ye){oe=this.get(oe,ye),ye=this.getColumnNames();for(var Ve={},Ge=0;Ge<ye.length;Ge+=1)Ve[ye[Ge]]=oe[Ge];return Ve},y.prototype.getSQL=function(){return _i(this.La)},y.prototype.getNormalizedSQL=function(){return $h(this.La)},y.prototype.run=function(oe){return oe!=null&&this.bind(oe),this.step(),this.reset()},y.prototype.nb=function(oe,ye){ye==null&&(ye=this.Ja,this.Ja+=1),oe=ht(oe);var Ve=_s(oe,fo);this.fb.push(Ve),this.db.handleError(tu(this.La,ye,Ve,oe.length-1,0))},y.prototype.vb=function(oe,ye){ye==null&&(ye=this.Ja,this.Ja+=1);var Ve=_s(oe,fo);this.fb.push(Ve),this.db.handleError(nu(this.La,ye,Ve,oe.length,0))},y.prototype.mb=function(oe,ye){ye==null&&(ye=this.Ja,this.Ja+=1),this.db.handleError((oe===(oe|0)?zh:Bh)(this.La,ye,oe))},y.prototype.yb=function(oe){oe==null&&(oe=this.Ja,this.Ja+=1),nu(this.La,oe,0,0,0)},y.prototype.ob=function(oe,ye){switch(ye==null&&(ye=this.Ja,this.Ja+=1),typeof oe){case"string":this.nb(oe,ye);return;case"number":this.mb(oe,ye);return;case"bigint":this.nb(oe.toString(),ye);return;case"boolean":this.mb(oe+0,ye);return;case"object":if(oe===null){this.yb(ye);return}if(oe.length!=null){this.vb(oe,ye);return}}throw"Wrong API use : tried to bind a value of an unknown type ("+oe+")."},y.prototype.xb=function(oe){var ye=this;return Object.keys(oe).forEach(function(Ve){var Ge=jh(ye.La,Ve);Ge!==0&&ye.ob(oe[Ve],Ge)}),!0},y.prototype.wb=function(oe){for(var ye=0;ye<oe.length;ye+=1)this.ob(oe[ye],ye+1);return!0},y.prototype.reset=function(){return this.freemem(),ys(this.La)===0&&su(this.La)===0},y.prototype.freemem=function(){for(var oe;(oe=this.fb.pop())!==void 0;)go(oe)},y.prototype.free=function(){this.freemem();var oe=Yh(this.La)===0;return delete this.db.Za[this.La],this.La=0,oe},P.prototype.next=function(){if(this.Ya===null)return{done:!0};if(this.Ua!==null&&(this.Ua.free(),this.Ua=null),!this.db.db)throw this.gb(),Error("Database closed");var oe=ws(),ye=zr(4);C(ue),C(ye);try{this.db.handleError(ga(this.db.db,this.eb,-1,ue,ye)),this.eb=L(ye,"i32");var Ve=L(ue,"i32");return Ve===0?(this.gb(),{done:!0}):(this.Ua=new y(Ve,this.db),this.db.Za[Ve]=this.Ua,{value:this.Ua,done:!1})}catch(Ge){throw this.ib=Z(this.eb),this.gb(),Ge}finally{Li(oe)}},P.prototype.gb=function(){go(this.Ya),this.Ya=null},P.prototype.getRemainingSQL=function(){return this.ib!==null?this.ib:Z(this.eb)},typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(P.prototype[Symbol.iterator]=function(){return this}),q.prototype.run=function(oe,ye){if(!this.db)throw"Database closed";if(ye){oe=this.prepare(oe,ye);try{oe.step()}finally{oe.free()}}else this.handleError(rt(this.db,oe,0,0,ue));return this},q.prototype.exec=function(oe,ye,Ve){if(!this.db)throw"Database closed";var Ge=ws(),at=null;try{var Pt=fa(oe),nr=zr(4);for(oe=[];L(Pt,"i8")!==0;){C(ue),C(nr),this.handleError(ga(this.db,Pt,-1,ue,nr));var rr=L(ue,"i32");if(Pt=L(nr,"i32"),rr!==0){var Cn=null;for(at=new y(rr,this),ye!=null&&at.bind(ye);at.step();)Cn===null&&(Cn={columns:at.getColumnNames(),values:[]},oe.push(Cn)),Cn.values.push(at.get(null,Ve));at.free()}}return oe}catch(ir){throw at&&at.free(),ir}finally{Li(Ge)}},q.prototype.each=function(oe,ye,Ve,Ge,at){typeof ye=="function"&&(Ge=Ve,Ve=ye,ye=void 0),oe=this.prepare(oe,ye);try{for(;oe.step();)Ve(oe.getAsObject(null,at))}finally{oe.free()}if(typeof Ge=="function")return Ge()},q.prototype.prepare=function(oe,ye){if(C(ue),this.handleError(mn(this.db,oe,-1,ue,0)),oe=L(ue,"i32"),oe===0)throw"Nothing to prepare";var Ve=new y(oe,this);return ye!=null&&Ve.bind(ye),this.Za[oe]=Ve},q.prototype.iterateStatements=function(oe){return new P(oe,this)},q.prototype.export=function(){Object.values(this.Za).forEach(function(ye){ye.free()}),Object.values(this.Na).forEach(gi),this.Na={},this.handleError(gt(this.db));var oe=Mh(this.filename);return this.handleError(We(this.filename,ue)),this.db=L(ue,"i32"),cu(this.db),oe},q.prototype.close=function(){this.db!==null&&(Object.values(this.Za).forEach(function(oe){oe.free()}),Object.values(this.Na).forEach(gi),this.Na={},this.handleError(gt(this.db)),gr("/"+this.filename),this.db=null)},q.prototype.handleError=function(oe){if(oe===0)return null;throw oe=Hh(this.db),Error(oe)},q.prototype.getRowsModified=function(){return on(this.db)},q.prototype.create_function=function(oe,ye){Object.prototype.hasOwnProperty.call(this.Na,oe)&&(gi(this.Na[oe]),delete this.Na[oe]);var Ve=po(function(Ge,at,Pt){at=g(at,Pt);try{var nr=ye.apply(null,at)}catch(rr){_o(Ge,rr,-1);return}c(Ge,nr)},"viii");return this.Na[oe]=Ve,this.handleError(ou(this.db,oe,ye.length,1,0,Ve,0,0,0)),this},q.prototype.create_aggregate=function(oe,ye){var Ve=ye.init||function(){return null},Ge=ye.finalize||function(Cn){return Cn},at=ye.step;if(!at)throw"An aggregate function must have a step function in "+oe;var Pt={};Object.hasOwnProperty.call(this.Na,oe)&&(gi(this.Na[oe]),delete this.Na[oe]),ye=oe+"__finalize",Object.hasOwnProperty.call(this.Na,ye)&&(gi(this.Na[ye]),delete this.Na[ye]);var nr=po(function(Cn,ir,wo){var Tr=uu(Cn,1);Object.hasOwnProperty.call(Pt,Tr)||(Pt[Tr]=Ve()),ir=g(ir,wo),ir=[Pt[Tr]].concat(ir);try{Pt[Tr]=at.apply(null,ir)}catch(vo){delete Pt[Tr],_o(Cn,vo,-1)}},"viii"),rr=po(function(Cn){var ir=uu(Cn,1);try{var wo=Ge(Pt[ir])}catch(Tr){delete Pt[ir],_o(Cn,Tr,-1);return}c(Cn,wo),delete Pt[ir]},"vi");return this.Na[oe]=nr,this.Na[ye]=rr,this.handleError(ou(this.db,oe,at.length-1,1,0,0,nr,rr,0)),this},u.Database=q};var d=Object.assign({},u),f="./this.program",p=typeof window=="object",m=typeof importScripts=="function",b=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",v="",I,A,x;if(b){var S=nc,D=nc;v=m?D.dirname(v)+"/":__dirname+"/",I=(c,g)=>(c=Ze(c)?new URL(c):D.normalize(c),S.readFileSync(c,g?void 0:"utf8")),x=c=>(c=I(c,!0),c.buffer||(c=new Uint8Array(c)),c),A=(c,g,y,P=!0)=>{c=Ze(c)?new URL(c):D.normalize(c),S.readFile(c,P?void 0:"utf8",(q,ue)=>{q?y(q):g(P?ue.buffer:ue)})},!u.thisProgram&&1<process.argv.length&&(f=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),t.exports=u,u.inspect=()=>"[Emscripten Module object]"}else(p||m)&&(m?v=self.location.href:typeof document<"u"&&document.currentScript&&(v=document.currentScript.src),v=v.indexOf("blob:")!==0?v.substr(0,v.replace(/[?#].*/,"").lastIndexOf("/")+1):"",I=c=>{var g=new XMLHttpRequest;return g.open("GET",c,!1),g.send(null),g.responseText},m&&(x=c=>{var g=new XMLHttpRequest;return g.open("GET",c,!1),g.responseType="arraybuffer",g.send(null),new Uint8Array(g.response)}),A=(c,g,y)=>{var P=new XMLHttpRequest;P.open("GET",c,!0),P.responseType="arraybuffer",P.onload=()=>{P.status==200||P.status==0&&P.response?g(P.response):y()},P.onerror=y,P.send(null)});var B=u.print||console.log.bind(console),X=u.printErr||console.error.bind(console);Object.assign(u,d),d=null,u.thisProgram&&(f=u.thisProgram);var G;u.wasmBinary&&(G=u.wasmBinary),typeof WebAssembly!="object"&&ve("no native wasm support detected");var se,re=!1,Q,le,F,K,T,ee,Y;function M(){var c=se.buffer;u.HEAP8=Q=new Int8Array(c),u.HEAP16=F=new Int16Array(c),u.HEAPU8=le=new Uint8Array(c),u.HEAPU16=new Uint16Array(c),u.HEAP32=K=new Int32Array(c),u.HEAPU32=T=new Uint32Array(c),u.HEAPF32=ee=new Float32Array(c),u.HEAPF64=Y=new Float64Array(c)}var ce=[],ie=[],he=[];function te(){var c=u.preRun.shift();ce.unshift(c)}var J=0,_e=null;function ve(c){var g;throw(g=u.onAbort)==null||g.call(u,c),c="Aborted("+c+")",X(c),re=!0,new WebAssembly.RuntimeError(c+". Build with -sASSERTIONS for more info.")}var H=c=>c.startsWith("data:application/octet-stream;base64,"),Ze=c=>c.startsWith("file://"),ze;if(ze="sql-wasm.wasm",!H(ze)){var Le=ze;ze=u.locateFile?u.locateFile(Le,v):v+Le}function Te(c){if(c==ze&&G)return new Uint8Array(G);if(x)return x(c);throw"both async and sync fetching of the wasm failed"}function Me(c){if(!G&&(p||m)){if(typeof fetch=="function"&&!Ze(c))return fetch(c,{credentials:"same-origin"}).then(g=>{if(!g.ok)throw"failed to load wasm binary file at '"+c+"'";return g.arrayBuffer()}).catch(()=>Te(c));if(A)return new Promise((g,y)=>{A(c,P=>g(new Uint8Array(P)),y)})}return Promise.resolve().then(()=>Te(c))}function Ie(c,g,y){return Me(c).then(P=>WebAssembly.instantiate(P,g)).then(P=>P).then(y,P=>{X(`failed to asynchronously prepare wasm: ${P}`),ve(P)})}function U(c,g){var y=ze;G||typeof WebAssembly.instantiateStreaming!="function"||H(y)||Ze(y)||b||typeof fetch!="function"?Ie(y,c,g):fetch(y,{credentials:"same-origin"}).then(P=>WebAssembly.instantiateStreaming(P,c).then(g,function(q){return X(`wasm streaming compile failed: ${q}`),X("falling back to ArrayBuffer instantiation"),Ie(y,c,g)}))}var V,w,z=c=>{for(;0<c.length;)c.shift()(u)};function L(c,g="i8"){switch(g.endsWith("*")&&(g="*"),g){case"i1":return Q[c>>0];case"i8":return Q[c>>0];case"i16":return F[c>>1];case"i32":return K[c>>2];case"i64":ve("to do getValue(i64) use WASM_BIGINT");case"float":return ee[c>>2];case"double":return Y[c>>3];case"*":return T[c>>2];default:ve(`invalid type for getValue: ${g}`)}}function C(c){var g="i32";switch(g.endsWith("*")&&(g="*"),g){case"i1":Q[c>>0]=0;break;case"i8":Q[c>>0]=0;break;case"i16":F[c>>1]=0;break;case"i32":K[c>>2]=0;break;case"i64":ve("to do setValue(i64) use WASM_BIGINT");case"float":ee[c>>2]=0;break;case"double":Y[c>>3]=0;break;case"*":T[c>>2]=0;break;default:ve(`invalid type for setValue: ${g}`)}}var R=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,O=(c,g,y)=>{var P=g+y;for(y=g;c[y]&&!(y>=P);)++y;if(16<y-g&&c.buffer&&R)return R.decode(c.subarray(g,y));for(P="";g<y;){var q=c[g++];if(q&128){var ue=c[g++]&63;if((q&224)==192)P+=String.fromCharCode((q&31)<<6|ue);else{var ge=c[g++]&63;q=(q&240)==224?(q&15)<<12|ue<<6|ge:(q&7)<<18|ue<<12|ge<<6|c[g++]&63,65536>q?P+=String.fromCharCode(q):(q-=65536,P+=String.fromCharCode(55296|q>>10,56320|q&1023))}}else P+=String.fromCharCode(q)}return P},Z=(c,g)=>c?O(le,c,g):"",W=(c,g)=>{for(var y=0,P=c.length-1;0<=P;P--){var q=c[P];q==="."?c.splice(P,1):q===".."?(c.splice(P,1),y++):y&&(c.splice(P,1),y--)}if(g)for(;y;y--)c.unshift("..");return c},$=c=>{var g=c.charAt(0)==="/",y=c.substr(-1)==="/";return(c=W(c.split("/").filter(P=>!!P),!g).join("/"))||g||(c="."),c&&y&&(c+="/"),(g?"/":"")+c},ae=c=>{var g=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(c).slice(1);return c=g[0],g=g[1],!c&&!g?".":(g&&(g=g.substr(0,g.length-1)),c+g)},fe=c=>{if(c==="/")return"/";c=$(c),c=c.replace(/\/$/,"");var g=c.lastIndexOf("/");return g===-1?c:c.substr(g+1)},de=()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return y=>crypto.getRandomValues(y);if(b)try{var c=nc;if(c.randomFillSync)return y=>c.randomFillSync(y);var g=c.randomBytes;return y=>(y.set(g(y.byteLength)),y)}catch{}ve("initRandomDevice")},be=c=>(be=de())(c);function Ne(){for(var c="",g=!1,y=arguments.length-1;-1<=y&&!g;y--){if(g=0<=y?arguments[y]:"/",typeof g!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!g)return"";c=g+"/"+c,g=g.charAt(0)==="/"}return c=W(c.split("/").filter(P=>!!P),!g).join("/"),(g?"/":"")+c||"."}var Se=[],qe=c=>{for(var g=0,y=0;y<c.length;++y){var P=c.charCodeAt(y);127>=P?g++:2047>=P?g+=2:55296<=P&&57343>=P?(g+=4,++y):g+=3}return g},it=(c,g,y,P)=>{if(!(0<P))return 0;var q=y;P=y+P-1;for(var ue=0;ue<c.length;++ue){var ge=c.charCodeAt(ue);if(55296<=ge&&57343>=ge){var We=c.charCodeAt(++ue);ge=65536+((ge&1023)<<10)|We&1023}if(127>=ge){if(y>=P)break;g[y++]=ge}else{if(2047>=ge){if(y+1>=P)break;g[y++]=192|ge>>6}else{if(65535>=ge){if(y+2>=P)break;g[y++]=224|ge>>12}else{if(y+3>=P)break;g[y++]=240|ge>>18,g[y++]=128|ge>>12&63}g[y++]=128|ge>>6&63}g[y++]=128|ge&63}}return g[y]=0,y-q};function ht(c,g){var y=Array(qe(c)+1);return c=it(c,y,0,y.length),g&&(y.length=c),y}var Ut=[];function pt(c,g){Ut[c]={input:[],output:[],Xa:g},ne(c,pn)}var pn={open(c){var g=Ut[c.node.rdev];if(!g)throw new Ae(43);c.tty=g,c.seekable=!1},close(c){c.tty.Xa.fsync(c.tty)},fsync(c){c.tty.Xa.fsync(c.tty)},read(c,g,y,P){if(!c.tty||!c.tty.Xa.sb)throw new Ae(60);for(var q=0,ue=0;ue<P;ue++){try{var ge=c.tty.Xa.sb(c.tty)}catch{throw new Ae(29)}if(ge===void 0&&q===0)throw new Ae(6);if(ge==null)break;q++,g[y+ue]=ge}return q&&(c.node.timestamp=Date.now()),q},write(c,g,y,P){if(!c.tty||!c.tty.Xa.jb)throw new Ae(60);try{for(var q=0;q<P;q++)c.tty.Xa.jb(c.tty,g[y+q])}catch{throw new Ae(29)}return P&&(c.node.timestamp=Date.now()),q}},Ot={sb(){e:{if(!Se.length){var c=null;if(b){var g=Buffer.alloc(256),y=0,P=process.stdin.fd;try{y=S.readSync(P,g)}catch(q){if(q.toString().includes("EOF"))y=0;else throw q}0<y?c=g.slice(0,y).toString("utf-8"):c=null}else typeof window<"u"&&typeof window.prompt=="function"?(c=window.prompt("Input: "),c!==null&&(c+=`
`)):typeof readline=="function"&&(c=readline(),c!==null&&(c+=`
`));if(!c){c=null;break e}Se=ht(c,!0)}c=Se.shift()}return c},jb(c,g){g===null||g===10?(B(O(c.output,0)),c.output=[]):g!=0&&c.output.push(g)},fsync(c){c.output&&0<c.output.length&&(B(O(c.output,0)),c.output=[])},Mb(){return{Ib:25856,Kb:5,Hb:191,Jb:35387,Gb:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},Nb(){return 0},Ob(){return[24,80]}},Et={jb(c,g){g===null||g===10?(X(O(c.output,0)),c.output=[]):g!=0&&c.output.push(g)},fsync(c){c.output&&0<c.output.length&&(X(O(c.output,0)),c.output=[])}};function Kn(c,g){var y=c.Ia?c.Ia.length:0;y>=g||(g=Math.max(g,y*(1048576>y?2:1.125)>>>0),y!=0&&(g=Math.max(g,256)),y=c.Ia,c.Ia=new Uint8Array(g),0<c.Ma&&c.Ia.set(y.subarray(0,c.Ma),0))}var Ye={Qa:null,Ra(){return Ye.createNode(null,"/",16895,0)},createNode(c,g,y,P){if((y&61440)===24576||(y&61440)===4096)throw new Ae(63);return Ye.Qa||(Ye.Qa={dir:{node:{Pa:Ye.Ga.Pa,Oa:Ye.Ga.Oa,lookup:Ye.Ga.lookup,ab:Ye.Ga.ab,rename:Ye.Ga.rename,unlink:Ye.Ga.unlink,rmdir:Ye.Ga.rmdir,readdir:Ye.Ga.readdir,symlink:Ye.Ga.symlink},stream:{Ta:Ye.Ha.Ta}},file:{node:{Pa:Ye.Ga.Pa,Oa:Ye.Ga.Oa},stream:{Ta:Ye.Ha.Ta,read:Ye.Ha.read,write:Ye.Ha.write,lb:Ye.Ha.lb,bb:Ye.Ha.bb,cb:Ye.Ha.cb}},link:{node:{Pa:Ye.Ga.Pa,Oa:Ye.Ga.Oa,readlink:Ye.Ga.readlink},stream:{}},pb:{node:{Pa:Ye.Ga.Pa,Oa:Ye.Ga.Oa},stream:Fe}}),y=tr(c,g,y,P),nn(y.mode)?(y.Ga=Ye.Qa.dir.node,y.Ha=Ye.Qa.dir.stream,y.Ia={}):(y.mode&61440)===32768?(y.Ga=Ye.Qa.file.node,y.Ha=Ye.Qa.file.stream,y.Ma=0,y.Ia=null):(y.mode&61440)===40960?(y.Ga=Ye.Qa.link.node,y.Ha=Ye.Qa.link.stream):(y.mode&61440)===8192&&(y.Ga=Ye.Qa.pb.node,y.Ha=Ye.Qa.pb.stream),y.timestamp=Date.now(),c&&(c.Ia[g]=y,c.timestamp=y.timestamp),y},Lb(c){return c.Ia?c.Ia.subarray?c.Ia.subarray(0,c.Ma):new Uint8Array(c.Ia):new Uint8Array(0)},Ga:{Pa(c){var g={};return g.dev=(c.mode&61440)===8192?c.id:1,g.ino=c.id,g.mode=c.mode,g.nlink=1,g.uid=0,g.gid=0,g.rdev=c.rdev,nn(c.mode)?g.size=4096:(c.mode&61440)===32768?g.size=c.Ma:(c.mode&61440)===40960?g.size=c.link.length:g.size=0,g.atime=new Date(c.timestamp),g.mtime=new Date(c.timestamp),g.ctime=new Date(c.timestamp),g.zb=4096,g.blocks=Math.ceil(g.size/g.zb),g},Oa(c,g){if(g.mode!==void 0&&(c.mode=g.mode),g.timestamp!==void 0&&(c.timestamp=g.timestamp),g.size!==void 0&&(g=g.size,c.Ma!=g))if(g==0)c.Ia=null,c.Ma=0;else{var y=c.Ia;c.Ia=new Uint8Array(g),y&&c.Ia.set(y.subarray(0,Math.min(g,c.Ma))),c.Ma=g}},lookup(){throw bn[44]},ab(c,g,y,P){return Ye.createNode(c,g,y,P)},rename(c,g,y){if(nn(c.mode)){try{var P=dn(g,y)}catch{}if(P)for(var q in P.Ia)throw new Ae(55)}delete c.parent.Ia[c.name],c.parent.timestamp=Date.now(),c.name=y,g.Ia[y]=c,g.timestamp=c.parent.timestamp,c.parent=g},unlink(c,g){delete c.Ia[g],c.timestamp=Date.now()},rmdir(c,g){var y=dn(c,g),P;for(P in y.Ia)throw new Ae(55);delete c.Ia[g],c.timestamp=Date.now()},readdir(c){var g=[".",".."],y;for(y of Object.keys(c.Ia))g.push(y);return g},symlink(c,g,y){return c=Ye.createNode(c,g,41471,0),c.link=y,c},readlink(c){if((c.mode&61440)!==40960)throw new Ae(28);return c.link}},Ha:{read(c,g,y,P,q){var ue=c.node.Ia;if(q>=c.node.Ma)return 0;if(c=Math.min(c.node.Ma-q,P),8<c&&ue.subarray)g.set(ue.subarray(q,q+c),y);else for(P=0;P<c;P++)g[y+P]=ue[q+P];return c},write(c,g,y,P,q,ue){if(g.buffer===Q.buffer&&(ue=!1),!P)return 0;if(c=c.node,c.timestamp=Date.now(),g.subarray&&(!c.Ia||c.Ia.subarray)){if(ue)return c.Ia=g.subarray(y,y+P),c.Ma=P;if(c.Ma===0&&q===0)return c.Ia=g.slice(y,y+P),c.Ma=P;if(q+P<=c.Ma)return c.Ia.set(g.subarray(y,y+P),q),P}if(Kn(c,q+P),c.Ia.subarray&&g.subarray)c.Ia.set(g.subarray(y,y+P),q);else for(ue=0;ue<P;ue++)c.Ia[q+ue]=g[y+ue];return c.Ma=Math.max(c.Ma,q+P),P},Ta(c,g,y){if(y===1?g+=c.position:y===2&&(c.node.mode&61440)===32768&&(g+=c.node.Ma),0>g)throw new Ae(28);return g},lb(c,g,y){Kn(c.node,g+y),c.node.Ma=Math.max(c.node.Ma,g+y)},bb(c,g,y,P,q){if((c.node.mode&61440)!==32768)throw new Ae(43);if(c=c.node.Ia,q&2||c.buffer!==Q.buffer){if((0<y||y+g<c.length)&&(c.subarray?c=c.subarray(y,y+g):c=Array.prototype.slice.call(c,y,y+g)),y=!0,g=65536*Math.ceil(g/65536),(q=Jl(65536,g))?(le.fill(0,q,q+g),g=q):g=0,!g)throw new Ae(48);Q.set(c,g)}else y=!1,g=c.byteOffset;return{Db:g,ub:y}},cb(c,g,y,P){return Ye.Ha.write(c,g,0,P,y,!1),0}}},jt=(c,g)=>{var y=0;return c&&(y|=365),g&&(y|=146),y},Nn=null,kr={},yn=[],mr=1,qt=null,Gn=!0,Ae=null,bn={};function tn(c,g={}){if(c=Ne(c),!c)return{path:"",node:null};if(g=Object.assign({qb:!0,kb:0},g),8<g.kb)throw new Ae(32);c=c.split("/").filter(ge=>!!ge);for(var y=Nn,P="/",q=0;q<c.length;q++){var ue=q===c.length-1;if(ue&&g.parent)break;if(y=dn(y,c[q]),P=$(P+"/"+c[q]),y.Va&&(!ue||ue&&g.qb)&&(y=y.Va.root),!ue||g.Sa){for(ue=0;(y.mode&61440)===40960;)if(y=$r(P),P=Ne(ae(P),y),y=tn(P,{kb:g.kb+1}).node,40<ue++)throw new Ae(32)}}return{path:P,node:y}}function Ur(c){for(var g;;){if(c===c.parent)return c=c.Ra.tb,g?c[c.length-1]!=="/"?`${c}/${g}`:c+g:c;g=g?`${c.name}/${g}`:c.name,c=c.parent}}function er(c,g){for(var y=0,P=0;P<g.length;P++)y=(y<<5)-y+g.charCodeAt(P)|0;return(c+y>>>0)%qt.length}function st(c){var g=er(c.parent.id,c.name);if(qt[g]===c)qt[g]=c.Wa;else for(g=qt[g];g;){if(g.Wa===c){g.Wa=c.Wa;break}g=g.Wa}}function dn(c,g){var y;if(y=(y=vt(c,"x"))?y:c.Ga.lookup?0:2)throw new Ae(y,c);for(y=qt[er(c.id,g)];y;y=y.Wa){var P=y.name;if(y.parent.id===c.id&&P===g)return y}return c.Ga.lookup(c,g)}function tr(c,g,y,P){return c=new ma(c,g,y,P),g=er(c.parent.id,c.name),c.Wa=qt[g],qt[g]=c}function nn(c){return(c&61440)===16384}function Xt(c){var g=["r","w","rw"][c&3];return c&512&&(g+="w"),g}function vt(c,g){if(Gn)return 0;if(!g.includes("r")||c.mode&292){if(g.includes("w")&&!(c.mode&146)||g.includes("x")&&!(c.mode&73))return 2}else return 2;return 0}function di(c,g){try{return dn(c,g),20}catch{}return vt(c,"wx")}function Di(c,g,y){try{var P=dn(c,g)}catch(q){return q.Ka}if(c=vt(c,"wx"))return c;if(y){if(!nn(P.mode))return 54;if(P===P.parent||Ur(P)==="/")return 10}else if(nn(P.mode))return 31;return 0}function Fr(){for(var c=0;4096>=c;c++)if(!yn[c])return c;throw new Ae(33)}function kt(c){if(c=yn[c],!c)throw new Ae(8);return c}function so(c,g=-1){return ps||(ps=function(){this.$a={}},ps.prototype={},Object.defineProperties(ps.prototype,{object:{get(){return this.node},set(y){this.node=y}},flags:{get(){return this.$a.flags},set(y){this.$a.flags=y}},position:{get(){return this.$a.position},set(y){this.$a.position=y}}})),c=Object.assign(new ps,c),g==-1&&(g=Fr()),c.fd=g,yn[g]=c}var Fe={open(c){var g,y;c.Ha=kr[c.node.rdev].Ha,(y=(g=c.Ha).open)==null||y.call(g,c)},Ta(){throw new Ae(70)}};function ne(c,g){kr[c]={Ha:g}}function Ee(c,g){var y=g==="/",P=!g;if(y&&Nn)throw new Ae(10);if(!y&&!P){var q=tn(g,{qb:!1});if(g=q.path,q=q.node,q.Va)throw new Ae(10);if(!nn(q.mode))throw new Ae(54)}g={type:c,Pb:{},tb:g,Cb:[]},c=c.Ra(g),c.Ra=g,g.root=c,y?Nn=c:q&&(q.Va=g,q.Ra&&q.Ra.Cb.push(g))}function Oe(c,g,y){var P=tn(c,{parent:!0}).node;if(c=fe(c),!c||c==="."||c==="..")throw new Ae(28);var q=di(P,c);if(q)throw new Ae(q);if(!P.Ga.ab)throw new Ae(63);return P.Ga.ab(P,c,g,y)}function ot(c,g){return Oe(c,(g!==void 0?g:511)&1023|16384,0)}function Jt(c,g,y){typeof y>"u"&&(y=g,g=438),Oe(c,g|8192,y)}function rn(c,g){if(!Ne(c))throw new Ae(44);var y=tn(g,{parent:!0}).node;if(!y)throw new Ae(44);g=fe(g);var P=di(y,g);if(P)throw new Ae(P);if(!y.Ga.symlink)throw new Ae(63);y.Ga.symlink(y,g,c)}function Ht(c){var g=tn(c,{parent:!0}).node;c=fe(c);var y=dn(g,c),P=Di(g,c,!0);if(P)throw new Ae(P);if(!g.Ga.rmdir)throw new Ae(63);if(y.Va)throw new Ae(10);g.Ga.rmdir(g,c),st(y)}function gr(c){var g=tn(c,{parent:!0}).node;if(!g)throw new Ae(44);c=fe(c);var y=dn(g,c),P=Di(g,c,!1);if(P)throw new Ae(P);if(!g.Ga.unlink)throw new Ae(63);if(y.Va)throw new Ae(10);g.Ga.unlink(g,c),st(y)}function $r(c){if(c=tn(c).node,!c)throw new Ae(44);if(!c.Ga.readlink)throw new Ae(28);return Ne(Ur(c.parent),c.Ga.readlink(c))}function sn(c,g){if(c=tn(c,{Sa:!g}).node,!c)throw new Ae(44);if(!c.Ga.Pa)throw new Ae(63);return c.Ga.Pa(c)}function ds(c){return sn(c,!0)}function fi(c,g){if(c=typeof c=="string"?tn(c,{Sa:!0}).node:c,!c.Ga.Oa)throw new Ae(63);c.Ga.Oa(c,{mode:g&4095|c.mode&-4096,timestamp:Date.now()})}function oo(c,g){if(0>g)throw new Ae(28);if(c=typeof c=="string"?tn(c,{Sa:!0}).node:c,!c.Ga.Oa)throw new Ae(63);if(nn(c.mode))throw new Ae(31);if((c.mode&61440)!==32768)throw new Ae(28);var y=vt(c,"w");if(y)throw new Ae(y);c.Ga.Oa(c,{size:g,timestamp:Date.now()})}function Oi(c,g,y){if(c==="")throw new Ae(44);if(typeof g=="string"){var P={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[g];if(typeof P>"u")throw Error(`Unknown file open mode: ${g}`);g=P}if(y=g&64?(typeof y>"u"?438:y)&4095|32768:0,typeof c=="object")var q=c;else{c=$(c);try{q=tn(c,{Sa:!(g&131072)}).node}catch{}}if(P=!1,g&64)if(q){if(g&128)throw new Ae(20)}else q=Oe(c,y,0),P=!0;if(!q)throw new Ae(44);if((q.mode&61440)===8192&&(g&=-513),g&65536&&!nn(q.mode))throw new Ae(54);if(!P&&(y=q?(q.mode&61440)===40960?32:nn(q.mode)&&(Xt(g)!=="r"||g&512)?31:vt(q,Xt(g)):44))throw new Ae(y);return g&512&&!P&&oo(q,0),g&=-131713,q=so({node:q,path:Ur(q),flags:g,seekable:!0,position:0,Ha:q.Ha,Fb:[],error:!1}),q.Ha.open&&q.Ha.open(q),!u.logReadFiles||g&1||(xt||(xt={}),c in xt||(xt[c]=1)),q}function ha(c){if(c.fd===null)throw new Ae(8);c.hb&&(c.hb=null);try{c.Ha.close&&c.Ha.close(c)}catch(g){throw g}finally{yn[c.fd]=null}c.fd=null}function Br(c,g,y){if(c.fd===null)throw new Ae(8);if(!c.seekable||!c.Ha.Ta)throw new Ae(70);if(y!=0&&y!=1&&y!=2)throw new Ae(28);c.position=c.Ha.Ta(c,g,y),c.Fb=[]}function Gl(c,g,y,P,q){if(0>P||0>q)throw new Ae(28);if(c.fd===null)throw new Ae(8);if((c.flags&2097155)===1)throw new Ae(8);if(nn(c.node.mode))throw new Ae(31);if(!c.Ha.read)throw new Ae(28);var ue=typeof q<"u";if(!ue)q=c.position;else if(!c.seekable)throw new Ae(70);return g=c.Ha.read(c,g,y,P,q),ue||(c.position+=g),g}function Ql(c,g,y,P,q){if(0>P||0>q)throw new Ae(28);if(c.fd===null)throw new Ae(8);if(!(c.flags&2097155))throw new Ae(8);if(nn(c.node.mode))throw new Ae(31);if(!c.Ha.write)throw new Ae(28);c.seekable&&c.flags&1024&&Br(c,0,2);var ue=typeof q<"u";if(!ue)q=c.position;else if(!c.seekable)throw new Ae(70);return g=c.Ha.write(c,g,y,P,q,void 0),ue||(c.position+=g),g}function Mh(c){var g,y=Oi(c,y||0);c=sn(c).size;var P=new Uint8Array(c);return Gl(y,P,0,c,0),g=P,ha(y),g}function ao(){Ae||(Ae=function(c,g){this.name="ErrnoError",this.node=g,this.Eb=function(y){this.Ka=y},this.Eb(c),this.message="FS error"},Ae.prototype=Error(),Ae.prototype.constructor=Ae,[44].forEach(c=>{bn[c]=new Ae(c),bn[c].stack="<generic error, no stack>"}))}var Yl;function fs(c,g,y){c=$("/dev/"+c);var P=jt(!!g,!!y);Xl||(Xl=64);var q=Xl++<<8|0;ne(q,{open(ue){ue.seekable=!1},close(){var ue;(ue=y==null?void 0:y.buffer)!=null&&ue.length&&y(10)},read(ue,ge,We,gt){for(var rt=0,on=0;on<gt;on++){try{var mn=g()}catch{throw new Ae(29)}if(mn===void 0&&rt===0)throw new Ae(6);if(mn==null)break;rt++,ge[We+on]=mn}return rt&&(ue.node.timestamp=Date.now()),rt},write(ue,ge,We,gt){for(var rt=0;rt<gt;rt++)try{y(ge[We+rt])}catch{throw new Ae(29)}return gt&&(ue.node.timestamp=Date.now()),rt}}),Jt(c,P,q)}var Xl,Nt={},ps,xt;function pi(c,g,y){if(g.charAt(0)==="/")return g;if(c=c===-100?"/":kt(c).path,g.length==0){if(!y)throw new Ae(44);return c}return $(c+"/"+g)}function lo(c,g,y){try{var P=c(g)}catch(ue){if(ue&&ue.node&&$(g)!==$(Ur(ue.node)))return-54;throw ue}K[y>>2]=P.dev,K[y+4>>2]=P.mode,T[y+8>>2]=P.nlink,K[y+12>>2]=P.uid,K[y+16>>2]=P.gid,K[y+20>>2]=P.rdev,w=[P.size>>>0,(V=P.size,1<=+Math.abs(V)?0<V?+Math.floor(V/4294967296)>>>0:~~+Math.ceil((V-+(~~V>>>0))/4294967296)>>>0:0)],K[y+24>>2]=w[0],K[y+28>>2]=w[1],K[y+32>>2]=4096,K[y+36>>2]=P.blocks,c=P.atime.getTime(),g=P.mtime.getTime();var q=P.ctime.getTime();return w=[Math.floor(c/1e3)>>>0,(V=Math.floor(c/1e3),1<=+Math.abs(V)?0<V?+Math.floor(V/4294967296)>>>0:~~+Math.ceil((V-+(~~V>>>0))/4294967296)>>>0:0)],K[y+40>>2]=w[0],K[y+44>>2]=w[1],T[y+48>>2]=c%1e3*1e3,w=[Math.floor(g/1e3)>>>0,(V=Math.floor(g/1e3),1<=+Math.abs(V)?0<V?+Math.floor(V/4294967296)>>>0:~~+Math.ceil((V-+(~~V>>>0))/4294967296)>>>0:0)],K[y+56>>2]=w[0],K[y+60>>2]=w[1],T[y+64>>2]=g%1e3*1e3,w=[Math.floor(q/1e3)>>>0,(V=Math.floor(q/1e3),1<=+Math.abs(V)?0<V?+Math.floor(V/4294967296)>>>0:~~+Math.ceil((V-+(~~V>>>0))/4294967296)>>>0:0)],K[y+72>>2]=w[0],K[y+76>>2]=w[1],T[y+80>>2]=q%1e3*1e3,w=[P.ino>>>0,(V=P.ino,1<=+Math.abs(V)?0<V?+Math.floor(V/4294967296)>>>0:~~+Math.ceil((V-+(~~V>>>0))/4294967296)>>>0:0)],K[y+88>>2]=w[0],K[y+92>>2]=w[1],0}var uo=void 0;function co(){var c=K[+uo>>2];return uo+=4,c}var ms=(c,g)=>g+2097152>>>0<4194305-!!c?(c>>>0)+4294967296*g:NaN,Vh=[0,31,60,91,121,152,182,213,244,274,305,335],da=[0,31,59,90,120,151,181,212,243,273,304,334],Ni=c=>{var g=qe(c)+1,y=mo(g);return y&&it(c,le,y,g),y},ho={},gs=()=>{if(!Wt){var c={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:f||"./this.program"},g;for(g in ho)ho[g]===void 0?delete c[g]:c[g]=ho[g];var y=[];for(g in c)y.push(`${g}=${c[g]}`);Wt=y}return Wt},Wt,fa=c=>{var g=qe(c)+1,y=zr(g);return it(c,le,y,g),y},Uh=(c,g,y,P)=>{var q={string:rt=>{var on=0;return rt!=null&&rt!==0&&(on=fa(rt)),on},array:rt=>{var on=zr(rt.length);return Q.set(rt,on),on}};c=u["_"+c];var ue=[],ge=0;if(P)for(var We=0;We<P.length;We++){var gt=q[y[We]];gt?(ge===0&&(ge=ws()),ue[We]=gt(P[We])):ue[We]=P[We]}return y=c.apply(null,ue),y=function(rt){return ge!==0&&Li(ge),g==="string"?rt?O(le,rt):"":g==="boolean"?!!rt:rt}(y)},fo=0,_s=(c,g)=>(g=g==1?zr(c.length):mo(c.length),c.subarray||c.slice||(c=new Uint8Array(c)),le.set(c,g),g),mi,pa=[],Er,gi=c=>{mi.delete(Er.get(c)),Er.set(c,null),pa.push(c)},po=(c,g)=>{if(!mi){mi=new WeakMap;var y=Er.length;if(mi)for(var P=0;P<0+y;P++){var q=Er.get(P);q&&mi.set(q,P)}}if(y=mi.get(c)||0)return y;if(pa.length)y=pa.pop();else{try{Er.grow(1)}catch(We){throw We instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":We}y=Er.length-1}try{Er.set(y,c)}catch(We){if(!(We instanceof TypeError))throw We;if(typeof WebAssembly.Function=="function"){P=WebAssembly.Function,q={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"};for(var ue={parameters:[],results:g[0]=="v"?[]:[q[g[0]]]},ge=1;ge<g.length;++ge)ue.parameters.push(q[g[ge]]);g=new P(ue,c)}else{for(P=[1],q=g.slice(0,1),g=g.slice(1),ue={i:127,p:127,j:126,f:125,d:124,e:111},P.push(96),ge=g.length,128>ge?P.push(ge):P.push(ge%128|128,ge>>7),ge=0;ge<g.length;++ge)P.push(ue[g[ge]]);q=="v"?P.push(0):P.push(1,ue[q]),g=[0,97,115,109,1,0,0,0,1],q=P.length,128>q?g.push(q):g.push(q%128|128,q>>7),g.push.apply(g,P),g.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),g=new WebAssembly.Module(new Uint8Array(g)),g=new WebAssembly.Instance(g,{e:{f:c}}).exports.f}Er.set(y,g)}return mi.set(c,y),y};function ma(c,g,y,P){c||(c=this),this.parent=c,this.Ra=c.Ra,this.Va=null,this.id=mr++,this.name=g,this.mode=y,this.Ga={},this.Ha={},this.rdev=P}Object.defineProperties(ma.prototype,{read:{get:function(){return(this.mode&365)===365},set:function(c){c?this.mode|=365:this.mode&=-366}},write:{get:function(){return(this.mode&146)===146},set:function(c){c?this.mode|=146:this.mode&=-147}}}),ao(),qt=Array(4096),Ee(Ye,"/"),ot("/tmp"),ot("/home"),ot("/home/web_user"),function(){ot("/dev"),ne(259,{read:()=>0,write:(P,q,ue,ge)=>ge}),Jt("/dev/null",259),pt(1280,Ot),pt(1536,Et),Jt("/dev/tty",1280),Jt("/dev/tty1",1536);var c=new Uint8Array(1024),g=0,y=()=>(g===0&&(g=be(c).byteLength),c[--g]);fs("random",y),fs("urandom",y),ot("/dev/shm"),ot("/dev/shm/tmp")}(),function(){ot("/proc");var c=ot("/proc/self");ot("/proc/self/fd"),Ee({Ra(){var g=tr(c,"fd",16895,73);return g.Ga={lookup(y,P){var q=kt(+P);return y={parent:null,Ra:{tb:"fake"},Ga:{readlink:()=>q.path}},y.parent=y}},g}},"/proc/self/fd")}();var Fh={a:(c,g,y,P)=>{ve(`Assertion failed: ${c?O(le,c):""}, at: `+[g?g?O(le,g):"":"unknown filename",y,P?P?O(le,P):"":"unknown function"])},h:function(c,g){try{return c=c?O(le,c):"",fi(c,g),0}catch(y){if(typeof Nt>"u"||y.name!=="ErrnoError")throw y;return-y.Ka}},H:function(c,g,y){try{if(g=g?O(le,g):"",g=pi(c,g),y&-8)return-28;var P=tn(g,{Sa:!0}).node;return P?(c="",y&4&&(c+="r"),y&2&&(c+="w"),y&1&&(c+="x"),c&&vt(P,c)?-2:0):-44}catch(q){if(typeof Nt>"u"||q.name!=="ErrnoError")throw q;return-q.Ka}},i:function(c,g){try{var y=kt(c);return fi(y.node,g),0}catch(P){if(typeof Nt>"u"||P.name!=="ErrnoError")throw P;return-P.Ka}},g:function(c){try{var g=kt(c).node,y=typeof g=="string"?tn(g,{Sa:!0}).node:g;if(!y.Ga.Oa)throw new Ae(63);return y.Ga.Oa(y,{timestamp:Date.now()}),0}catch(P){if(typeof Nt>"u"||P.name!=="ErrnoError")throw P;return-P.Ka}},b:function(c,g,y){uo=y;try{var P=kt(c);switch(g){case 0:var q=co();if(0>q)return-28;for(;yn[q];)q++;return so(P,q).fd;case 1:case 2:return 0;case 3:return P.flags;case 4:return q=co(),P.flags|=q,0;case 5:return q=co(),F[q+0>>1]=2,0;case 6:case 7:return 0;case 16:case 8:return-28;case 9:return K[Zl()>>2]=28,-1;default:return-28}}catch(ue){if(typeof Nt>"u"||ue.name!=="ErrnoError")throw ue;return-ue.Ka}},f:function(c,g){try{var y=kt(c);return lo(sn,y.path,g)}catch(P){if(typeof Nt>"u"||P.name!=="ErrnoError")throw P;return-P.Ka}},n:function(c,g,y){g=ms(g,y);try{if(isNaN(g))return 61;var P=kt(c);if(!(P.flags&2097155))throw new Ae(28);return oo(P.node,g),0}catch(q){if(typeof Nt>"u"||q.name!=="ErrnoError")throw q;return-q.Ka}},C:function(c,g){try{if(g===0)return-28;var y=qe("/")+1;return g<y?-68:(it("/",le,c,g),y)}catch(P){if(typeof Nt>"u"||P.name!=="ErrnoError")throw P;return-P.Ka}},F:function(c,g){try{return c=c?O(le,c):"",lo(ds,c,g)}catch(y){if(typeof Nt>"u"||y.name!=="ErrnoError")throw y;return-y.Ka}},z:function(c,g,y){try{return g=g?O(le,g):"",g=pi(c,g),g=$(g),g[g.length-1]==="/"&&(g=g.substr(0,g.length-1)),ot(g,y),0}catch(P){if(typeof Nt>"u"||P.name!=="ErrnoError")throw P;return-P.Ka}},E:function(c,g,y,P){try{g=g?O(le,g):"";var q=P&256;return g=pi(c,g,P&4096),lo(q?ds:sn,g,y)}catch(ue){if(typeof Nt>"u"||ue.name!=="ErrnoError")throw ue;return-ue.Ka}},y:function(c,g,y,P){uo=P;try{g=g?O(le,g):"",g=pi(c,g);var q=P?co():0;return Oi(g,y,q).fd}catch(ue){if(typeof Nt>"u"||ue.name!=="ErrnoError")throw ue;return-ue.Ka}},w:function(c,g,y,P){try{if(g=g?O(le,g):"",g=pi(c,g),0>=P)return-28;var q=$r(g),ue=Math.min(P,qe(q)),ge=Q[y+ue];return it(q,le,y,P+1),Q[y+ue]=ge,ue}catch(We){if(typeof Nt>"u"||We.name!=="ErrnoError")throw We;return-We.Ka}},v:function(c){try{return c=c?O(le,c):"",Ht(c),0}catch(g){if(typeof Nt>"u"||g.name!=="ErrnoError")throw g;return-g.Ka}},G:function(c,g){try{return c=c?O(le,c):"",lo(sn,c,g)}catch(y){if(typeof Nt>"u"||y.name!=="ErrnoError")throw y;return-y.Ka}},r:function(c,g,y){try{return g=g?O(le,g):"",g=pi(c,g),y===0?gr(g):y===512?Ht(g):ve("Invalid flags passed to unlinkat"),0}catch(P){if(typeof Nt>"u"||P.name!=="ErrnoError")throw P;return-P.Ka}},q:function(c,g,y){try{if(g=g?O(le,g):"",g=pi(c,g,!0),y){var P=T[y>>2]+4294967296*K[y+4>>2],q=K[y+8>>2];ue=1e3*P+q/1e6,y+=16,P=T[y>>2]+4294967296*K[y+4>>2],q=K[y+8>>2],ge=1e3*P+q/1e6}else var ue=Date.now(),ge=ue;c=ue;var We=tn(g,{Sa:!0}).node;return We.Ga.Oa(We,{timestamp:Math.max(c,ge)}),0}catch(gt){if(typeof Nt>"u"||gt.name!=="ErrnoError")throw gt;return-gt.Ka}},l:function(c,g,y){c=new Date(1e3*ms(c,g)),K[y>>2]=c.getSeconds(),K[y+4>>2]=c.getMinutes(),K[y+8>>2]=c.getHours(),K[y+12>>2]=c.getDate(),K[y+16>>2]=c.getMonth(),K[y+20>>2]=c.getFullYear()-1900,K[y+24>>2]=c.getDay(),g=c.getFullYear(),K[y+28>>2]=(g%4!==0||g%100===0&&g%400!==0?da:Vh)[c.getMonth()]+c.getDate()-1|0,K[y+36>>2]=-(60*c.getTimezoneOffset()),g=new Date(c.getFullYear(),6,1).getTimezoneOffset();var P=new Date(c.getFullYear(),0,1).getTimezoneOffset();K[y+32>>2]=(g!=P&&c.getTimezoneOffset()==Math.min(P,g))|0},j:function(c,g,y,P,q,ue,ge,We){q=ms(q,ue);try{if(isNaN(q))return 61;var gt=kt(P);if(g&2&&!(y&2)&&(gt.flags&2097155)!==2)throw new Ae(2);if((gt.flags&2097155)===1)throw new Ae(2);if(!gt.Ha.bb)throw new Ae(43);var rt=gt.Ha.bb(gt,c,q,g,y),on=rt.Db;return K[ge>>2]=rt.ub,T[We>>2]=on,0}catch(mn){if(typeof Nt>"u"||mn.name!=="ErrnoError")throw mn;return-mn.Ka}},k:function(c,g,y,P,q,ue,ge){ue=ms(ue,ge);try{if(isNaN(ue))return 61;var We=kt(q);if(y&2){if((We.node.mode&61440)!==32768)throw new Ae(43);if(!(P&2)){var gt=le.slice(c,c+g);We.Ha.cb&&We.Ha.cb(We,gt,ue,g,P)}}}catch(rt){if(typeof Nt>"u"||rt.name!=="ErrnoError")throw rt;return-rt.Ka}},s:(c,g,y)=>{function P(gt){return(gt=gt.toTimeString().match(/\(([A-Za-z ]+)\)$/))?gt[1]:"GMT"}var q=new Date().getFullYear(),ue=new Date(q,0,1),ge=new Date(q,6,1);q=ue.getTimezoneOffset();var We=ge.getTimezoneOffset();T[c>>2]=60*Math.max(q,We),K[g>>2]=+(q!=We),c=P(ue),g=P(ge),c=Ni(c),g=Ni(g),We<q?(T[y>>2]=c,T[y+4>>2]=g):(T[y>>2]=g,T[y+4>>2]=c)},d:()=>Date.now(),t:()=>2147483648,c:()=>performance.now(),o:c=>{var g=le.length;if(c>>>=0,2147483648<c)return!1;for(var y=1;4>=y;y*=2){var P=g*(1+.2/y);P=Math.min(P,c+100663296);var q=Math;P=Math.max(c,P);e:{q=(q.min.call(q,2147483648,P+(65536-P%65536)%65536)-se.buffer.byteLength+65535)/65536;try{se.grow(q),M();var ue=1;break e}catch{}ue=void 0}if(ue)return!0}return!1},A:(c,g)=>{var y=0;return gs().forEach((P,q)=>{var ue=g+y;for(q=T[c+4*q>>2]=ue,ue=0;ue<P.length;++ue)Q[q++>>0]=P.charCodeAt(ue);Q[q>>0]=0,y+=P.length+1}),0},B:(c,g)=>{var y=gs();T[c>>2]=y.length;var P=0;return y.forEach(q=>P+=q.length+1),T[g>>2]=P,0},e:function(c){try{var g=kt(c);return ha(g),0}catch(y){if(typeof Nt>"u"||y.name!=="ErrnoError")throw y;return y.Ka}},p:function(c,g){try{var y=kt(c);return Q[g>>0]=y.tty?2:nn(y.mode)?3:(y.mode&61440)===40960?7:4,F[g+2>>1]=0,w=[0,(V=0,1<=+Math.abs(V)?0<V?+Math.floor(V/4294967296)>>>0:~~+Math.ceil((V-+(~~V>>>0))/4294967296)>>>0:0)],K[g+8>>2]=w[0],K[g+12>>2]=w[1],w=[0,(V=0,1<=+Math.abs(V)?0<V?+Math.floor(V/4294967296)>>>0:~~+Math.ceil((V-+(~~V>>>0))/4294967296)>>>0:0)],K[g+16>>2]=w[0],K[g+20>>2]=w[1],0}catch(P){if(typeof Nt>"u"||P.name!=="ErrnoError")throw P;return P.Ka}},x:function(c,g,y,P){try{e:{var q=kt(c);c=g;for(var ue,ge=g=0;ge<y;ge++){var We=T[c>>2],gt=T[c+4>>2];c+=8;var rt=Gl(q,Q,We,gt,ue);if(0>rt){var on=-1;break e}if(g+=rt,rt<gt)break;typeof ue<"u"&&(ue+=rt)}on=g}return T[P>>2]=on,0}catch(mn){if(typeof Nt>"u"||mn.name!=="ErrnoError")throw mn;return mn.Ka}},m:function(c,g,y,P,q){g=ms(g,y);try{if(isNaN(g))return 61;var ue=kt(c);return Br(ue,g,P),w=[ue.position>>>0,(V=ue.position,1<=+Math.abs(V)?0<V?+Math.floor(V/4294967296)>>>0:~~+Math.ceil((V-+(~~V>>>0))/4294967296)>>>0:0)],K[q>>2]=w[0],K[q+4>>2]=w[1],ue.hb&&g===0&&P===0&&(ue.hb=null),0}catch(ge){if(typeof Nt>"u"||ge.name!=="ErrnoError")throw ge;return ge.Ka}},D:function(c){var y;try{var g=kt(c);return(y=g.Ha)!=null&&y.fsync?g.Ha.fsync(g):0}catch(P){if(typeof Nt>"u"||P.name!=="ErrnoError")throw P;return P.Ka}},u:function(c,g,y,P){try{e:{var q=kt(c);c=g;for(var ue,ge=g=0;ge<y;ge++){var We=T[c>>2],gt=T[c+4>>2];c+=8;var rt=Ql(q,Q,We,gt,ue);if(0>rt){var on=-1;break e}g+=rt,typeof ue<"u"&&(ue+=rt)}on=g}return T[P>>2]=on,0}catch(mn){if(typeof Nt>"u"||mn.name!=="ErrnoError")throw mn;return mn.Ka}}},$e=function(){var y;function c(P){var q;return $e=P.exports,se=$e.I,M(),Er=$e.Aa,ie.unshift($e.J),J--,(q=u.monitorRunDependencies)==null||q.call(u,J),J==0&&_e&&(P=_e,_e=null,P()),$e}var g={a:Fh};if(J++,(y=u.monitorRunDependencies)==null||y.call(u,J),u.instantiateWasm)try{return u.instantiateWasm(g,c)}catch(P){return X(`Module.instantiateWasm callback failed with error: ${P}`),!1}return U(g,function(P){c(P.instance)}),{}}();u._sqlite3_free=c=>(u._sqlite3_free=$e.K)(c),u._sqlite3_value_text=c=>(u._sqlite3_value_text=$e.L)(c);var Zl=()=>(Zl=$e.M)();u._sqlite3_prepare_v2=(c,g,y,P,q)=>(u._sqlite3_prepare_v2=$e.N)(c,g,y,P,q),u._sqlite3_step=c=>(u._sqlite3_step=$e.O)(c),u._sqlite3_finalize=c=>(u._sqlite3_finalize=$e.P)(c),u._sqlite3_reset=c=>(u._sqlite3_reset=$e.Q)(c),u._sqlite3_clear_bindings=c=>(u._sqlite3_clear_bindings=$e.R)(c),u._sqlite3_value_blob=c=>(u._sqlite3_value_blob=$e.S)(c),u._sqlite3_value_bytes=c=>(u._sqlite3_value_bytes=$e.T)(c),u._sqlite3_value_double=c=>(u._sqlite3_value_double=$e.U)(c),u._sqlite3_value_int=c=>(u._sqlite3_value_int=$e.V)(c),u._sqlite3_value_type=c=>(u._sqlite3_value_type=$e.W)(c),u._sqlite3_result_blob=(c,g,y,P)=>(u._sqlite3_result_blob=$e.X)(c,g,y,P),u._sqlite3_result_double=(c,g)=>(u._sqlite3_result_double=$e.Y)(c,g),u._sqlite3_result_error=(c,g,y)=>(u._sqlite3_result_error=$e.Z)(c,g,y),u._sqlite3_result_int=(c,g)=>(u._sqlite3_result_int=$e._)(c,g),u._sqlite3_result_int64=(c,g,y)=>(u._sqlite3_result_int64=$e.$)(c,g,y),u._sqlite3_result_null=c=>(u._sqlite3_result_null=$e.aa)(c),u._sqlite3_result_text=(c,g,y,P)=>(u._sqlite3_result_text=$e.ba)(c,g,y,P),u._sqlite3_aggregate_context=(c,g)=>(u._sqlite3_aggregate_context=$e.ca)(c,g),u._sqlite3_column_count=c=>(u._sqlite3_column_count=$e.da)(c),u._sqlite3_data_count=c=>(u._sqlite3_data_count=$e.ea)(c),u._sqlite3_column_blob=(c,g)=>(u._sqlite3_column_blob=$e.fa)(c,g),u._sqlite3_column_bytes=(c,g)=>(u._sqlite3_column_bytes=$e.ga)(c,g),u._sqlite3_column_double=(c,g)=>(u._sqlite3_column_double=$e.ha)(c,g),u._sqlite3_column_text=(c,g)=>(u._sqlite3_column_text=$e.ia)(c,g),u._sqlite3_column_type=(c,g)=>(u._sqlite3_column_type=$e.ja)(c,g),u._sqlite3_column_name=(c,g)=>(u._sqlite3_column_name=$e.ka)(c,g),u._sqlite3_bind_blob=(c,g,y,P,q)=>(u._sqlite3_bind_blob=$e.la)(c,g,y,P,q),u._sqlite3_bind_double=(c,g,y)=>(u._sqlite3_bind_double=$e.ma)(c,g,y),u._sqlite3_bind_int=(c,g,y)=>(u._sqlite3_bind_int=$e.na)(c,g,y),u._sqlite3_bind_text=(c,g,y,P,q)=>(u._sqlite3_bind_text=$e.oa)(c,g,y,P,q),u._sqlite3_bind_parameter_index=(c,g)=>(u._sqlite3_bind_parameter_index=$e.pa)(c,g),u._sqlite3_sql=c=>(u._sqlite3_sql=$e.qa)(c),u._sqlite3_normalized_sql=c=>(u._sqlite3_normalized_sql=$e.ra)(c),u._sqlite3_errmsg=c=>(u._sqlite3_errmsg=$e.sa)(c),u._sqlite3_exec=(c,g,y,P,q)=>(u._sqlite3_exec=$e.ta)(c,g,y,P,q),u._sqlite3_changes=c=>(u._sqlite3_changes=$e.ua)(c),u._sqlite3_close_v2=c=>(u._sqlite3_close_v2=$e.va)(c),u._sqlite3_create_function_v2=(c,g,y,P,q,ue,ge,We,gt)=>(u._sqlite3_create_function_v2=$e.wa)(c,g,y,P,q,ue,ge,We,gt),u._sqlite3_open=(c,g)=>(u._sqlite3_open=$e.xa)(c,g);var mo=u._malloc=c=>(mo=u._malloc=$e.ya)(c),go=u._free=c=>(go=u._free=$e.za)(c);u._RegisterExtensionFunctions=c=>(u._RegisterExtensionFunctions=$e.Ba)(c);var Jl=(c,g)=>(Jl=$e.Ca)(c,g),ws=()=>(ws=$e.Da)(),Li=c=>(Li=$e.Ea)(c),zr=c=>(zr=$e.Fa)(c);u.stackAlloc=zr,u.stackSave=ws,u.stackRestore=Li,u.cwrap=(c,g,y,P)=>{var q=!y||y.every(ue=>ue==="number"||ue==="boolean");return g!=="string"&&q&&!P?u["_"+c]:function(){return Uh(c,g,y,arguments)}},u.addFunction=po,u.removeFunction=gi,u.UTF8ToString=Z,u.ALLOC_NORMAL=fo,u.allocate=_s,u.allocateUTF8OnStack=fa;var vs;_e=function c(){vs||eu(),vs||(_e=c)};function eu(){function c(){if(!vs&&(vs=!0,u.calledRun=!0,!re)){if(u.noFSInit||Yl||(Yl=!0,ao(),u.stdin=u.stdin,u.stdout=u.stdout,u.stderr=u.stderr,u.stdin?fs("stdin",u.stdin):rn("/dev/tty","/dev/stdin"),u.stdout?fs("stdout",null,u.stdout):rn("/dev/tty","/dev/stdout"),u.stderr?fs("stderr",null,u.stderr):rn("/dev/tty1","/dev/stderr"),Oi("/dev/stdin",0),Oi("/dev/stdout",1),Oi("/dev/stderr",1)),Gn=!1,z(ie),u.onRuntimeInitialized&&u.onRuntimeInitialized(),u.postRun)for(typeof u.postRun=="function"&&(u.postRun=[u.postRun]);u.postRun.length;){var g=u.postRun.shift();he.unshift(g)}z(he)}}if(!(0<J)){if(u.preRun)for(typeof u.preRun=="function"&&(u.preRun=[u.preRun]);u.preRun.length;)te();z(ce),0<J||(u.setStatus?(u.setStatus("Running..."),setTimeout(function(){setTimeout(function(){u.setStatus("")},1),c()},1)):c())}}if(u.preInit)for(typeof u.preInit=="function"&&(u.preInit=[u.preInit]);0<u.preInit.length;)u.preInit.pop()();return eu(),a}),n)};t.exports=r,t.exports.default=r})(d1);var f3=d1.exports;const p3=Nh(f3);var Vm={exports:{}};Vm.exports;(function(t){(function(e,n,r){function i(l){var u=this,d=a();u.next=function(){var f=2091639*u.s0+u.c*23283064365386963e-26;return u.s0=u.s1,u.s1=u.s2,u.s2=f-(u.c=f|0)},u.c=1,u.s0=d(" "),u.s1=d(" "),u.s2=d(" "),u.s0-=d(l),u.s0<0&&(u.s0+=1),u.s1-=d(l),u.s1<0&&(u.s1+=1),u.s2-=d(l),u.s2<0&&(u.s2+=1),d=null}function s(l,u){return u.c=l.c,u.s0=l.s0,u.s1=l.s1,u.s2=l.s2,u}function o(l,u){var d=new i(l),f=u&&u.state,p=d.next;return p.int32=function(){return d.next()*4294967296|0},p.double=function(){return p()+(p()*2097152|0)*11102230246251565e-32},p.quick=p,f&&(typeof f=="object"&&s(f,d),p.state=function(){return s(d,{})}),p}function a(){var l=4022871197,u=function(d){d=String(d);for(var f=0;f<d.length;f++){l+=d.charCodeAt(f);var p=.02519603282416938*l;l=p>>>0,p-=l,p*=l,l=p>>>0,p-=l,l+=p*4294967296}return(l>>>0)*23283064365386963e-26};return u}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.alea=o})(Tn,t,!1)})(Vm);var m3=Vm.exports,Um={exports:{}};Um.exports;(function(t){(function(e,n,r){function i(a){var l=this,u="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var f=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^f^f>>>8},a===(a|0)?l.x=a:u+=a;for(var d=0;d<u.length+64;d++)l.x^=u.charCodeAt(d)|0,l.next()}function s(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l}function o(a,l){var u=new i(a),d=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var p=u.next()>>>11,m=(u.next()>>>0)/4294967296,b=(p+m)/(1<<21);while(b===0);return b},f.int32=u.next,f.quick=f,d&&(typeof d=="object"&&s(d,u),f.state=function(){return s(u,{})}),f}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xor128=o})(Tn,t,!1)})(Um);var g3=Um.exports,Fm={exports:{}};Fm.exports;(function(t){(function(e,n,r){function i(a){var l=this,u="";l.next=function(){var f=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(f^f<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,a===(a|0)?l.x=a:u+=a;for(var d=0;d<u.length+64;d++)l.x^=u.charCodeAt(d)|0,d==u.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function s(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l.v=a.v,l.d=a.d,l}function o(a,l){var u=new i(a),d=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var p=u.next()>>>11,m=(u.next()>>>0)/4294967296,b=(p+m)/(1<<21);while(b===0);return b},f.int32=u.next,f.quick=f,d&&(typeof d=="object"&&s(d,u),f.state=function(){return s(u,{})}),f}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xorwow=o})(Tn,t,!1)})(Fm);var _3=Fm.exports,$m={exports:{}};$m.exports;(function(t){(function(e,n,r){function i(a){var l=this;l.next=function(){var d=l.x,f=l.i,p,m;return p=d[f],p^=p>>>7,m=p^p<<24,p=d[f+1&7],m^=p^p>>>10,p=d[f+3&7],m^=p^p>>>3,p=d[f+4&7],m^=p^p<<7,p=d[f+7&7],p=p^p<<13,m^=p^p<<9,d[f]=m,l.i=f+1&7,m};function u(d,f){var p,m=[];if(f===(f|0))m[0]=f;else for(f=""+f,p=0;p<f.length;++p)m[p&7]=m[p&7]<<15^f.charCodeAt(p)+m[p+1&7]<<13;for(;m.length<8;)m.push(0);for(p=0;p<8&&m[p]===0;++p);for(p==8?m[7]=-1:m[p],d.x=m,d.i=0,p=256;p>0;--p)d.next()}u(l,a)}function s(a,l){return l.x=a.x.slice(),l.i=a.i,l}function o(a,l){a==null&&(a=+new Date);var u=new i(a),d=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var p=u.next()>>>11,m=(u.next()>>>0)/4294967296,b=(p+m)/(1<<21);while(b===0);return b},f.int32=u.next,f.quick=f,d&&(d.x&&s(d,u),f.state=function(){return s(u,{})}),f}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xorshift7=o})(Tn,t,!1)})($m);var w3=$m.exports,Bm={exports:{}};Bm.exports;(function(t){(function(e,n,r){function i(a){var l=this;l.next=function(){var d=l.w,f=l.X,p=l.i,m,b;return l.w=d=d+1640531527|0,b=f[p+34&127],m=f[p=p+1&127],b^=b<<13,m^=m<<17,b^=b>>>15,m^=m>>>12,b=f[p]=b^m,l.i=p,b+(d^d>>>16)|0};function u(d,f){var p,m,b,v,I,A=[],x=128;for(f===(f|0)?(m=f,f=null):(f=f+"\0",m=0,x=Math.max(x,f.length)),b=0,v=-32;v<x;++v)f&&(m^=f.charCodeAt((v+32)%f.length)),v===0&&(I=m),m^=m<<10,m^=m>>>15,m^=m<<4,m^=m>>>13,v>=0&&(I=I+1640531527|0,p=A[v&127]^=m+I,b=p==0?b+1:0);for(b>=128&&(A[(f&&f.length||0)&127]=-1),b=127,v=4*128;v>0;--v)m=A[b+34&127],p=A[b=b+1&127],m^=m<<13,p^=p<<17,m^=m>>>15,p^=p>>>12,A[b]=m^p;d.w=I,d.X=A,d.i=b}u(l,a)}function s(a,l){return l.i=a.i,l.w=a.w,l.X=a.X.slice(),l}function o(a,l){a==null&&(a=+new Date);var u=new i(a),d=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var p=u.next()>>>11,m=(u.next()>>>0)/4294967296,b=(p+m)/(1<<21);while(b===0);return b},f.int32=u.next,f.quick=f,d&&(d.X&&s(d,u),f.state=function(){return s(u,{})}),f}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xor4096=o})(Tn,t,!1)})(Bm);var v3=Bm.exports,zm={exports:{}};zm.exports;(function(t){(function(e,n,r){function i(a){var l=this,u="";l.next=function(){var f=l.b,p=l.c,m=l.d,b=l.a;return f=f<<25^f>>>7^p,p=p-m|0,m=m<<24^m>>>8^b,b=b-f|0,l.b=f=f<<20^f>>>12^p,l.c=p=p-m|0,l.d=m<<16^p>>>16^b,l.a=b-f|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,a===Math.floor(a)?(l.a=a/4294967296|0,l.b=a|0):u+=a;for(var d=0;d<u.length+20;d++)l.b^=u.charCodeAt(d)|0,l.next()}function s(a,l){return l.a=a.a,l.b=a.b,l.c=a.c,l.d=a.d,l}function o(a,l){var u=new i(a),d=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var p=u.next()>>>11,m=(u.next()>>>0)/4294967296,b=(p+m)/(1<<21);while(b===0);return b},f.int32=u.next,f.quick=f,d&&(typeof d=="object"&&s(d,u),f.state=function(){return s(u,{})}),f}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.tychei=o})(Tn,t,!1)})(zm);var y3=zm.exports,f1={exports:{}};(function(t){(function(e,n,r){var i=256,s=6,o=52,a="random",l=r.pow(i,s),u=r.pow(2,o),d=u*2,f=i-1,p;function m(D,B,X){var G=[];B=B==!0?{entropy:!0}:B||{};var se=A(I(B.entropy?[D,S(n)]:D??x(),3),G),re=new b(G),Q=function(){for(var le=re.g(s),F=l,K=0;le<u;)le=(le+K)*i,F*=i,K=re.g(1);for(;le>=d;)le/=2,F/=2,K>>>=1;return(le+K)/F};return Q.int32=function(){return re.g(4)|0},Q.quick=function(){return re.g(4)/4294967296},Q.double=Q,A(S(re.S),n),(B.pass||X||function(le,F,K,T){return T&&(T.S&&v(T,re),le.state=function(){return v(re,{})}),K?(r[a]=le,F):le})(Q,se,"global"in B?B.global:this==r,B.state)}function b(D){var B,X=D.length,G=this,se=0,re=G.i=G.j=0,Q=G.S=[];for(X||(D=[X++]);se<i;)Q[se]=se++;for(se=0;se<i;se++)Q[se]=Q[re=f&re+D[se%X]+(B=Q[se])],Q[re]=B;(G.g=function(le){for(var F,K=0,T=G.i,ee=G.j,Y=G.S;le--;)F=Y[T=f&T+1],K=K*i+Y[f&(Y[T]=Y[ee=f&ee+F])+(Y[ee]=F)];return G.i=T,G.j=ee,K})(i)}function v(D,B){return B.i=D.i,B.j=D.j,B.S=D.S.slice(),B}function I(D,B){var X=[],G=typeof D,se;if(B&&G=="object")for(se in D)try{X.push(I(D[se],B-1))}catch{}return X.length?X:G=="string"?D:D+"\0"}function A(D,B){for(var X=D+"",G,se=0;se<X.length;)B[f&se]=f&(G^=B[f&se]*19)+X.charCodeAt(se++);return S(B)}function x(){try{var D;return p&&(D=p.randomBytes)?D=D(i):(D=new Uint8Array(i),(e.crypto||e.msCrypto).getRandomValues(D)),S(D)}catch{var B=e.navigator,X=B&&B.plugins;return[+new Date,e,X,e.screen,S(n)]}}function S(D){return String.fromCharCode.apply(0,D)}if(A(r.random(),n),t.exports){t.exports=m;try{p=nc}catch{}}else r["seed"+a]=m})(typeof self<"u"?self:Tn,[],Math)})(f1);var b3=f1.exports,k3=m3,E3=g3,T3=_3,I3=w3,A3=v3,x3=y3,ro=b3;ro.alea=k3;ro.xor128=E3;ro.xorwow=T3;ro.xorshift7=I3;ro.xor4096=A3;ro.tychei=x3;var C3=ro;const R3=Nh(C3),S3={class:"fixed left-1/2 top-1/2 inline-block max-h-[100vh] max-w-[100vw] -translate-x-1/2 -translate-y-1/2 overflow-auto rounded-md bg-cyan-500 p-3 text-center shadow-lg shadow-black"},P3=N("p",{class:"text-4xl"},"Deck Importer",-1),D3={class:"mt-1"},O3={class:"mt-3 rounded bg-lime-400 p-3 text-xl"},N3=N("label",{for:"import_file_selector"},"Anki Deck: ",-1),L3={key:0,class:"mt-5 rounded bg-teal-700 p-3 text-xl"},M3=N("p",null,"Fields From:",-1),V3=N("option",{value:"0",disabled:""},"Select",-1),U3=["value"],F3={key:1},$3={class:"mt-5 text-xl"},B3={class:"rounded bg-teal-500 p-3"},z3=N("p",null,"Front:",-1),j3=N("option",{value:"0",disabled:""},"Select",-1),q3=["value"],H3={class:"mt-3 rounded bg-teal-500 p-3"},W3=N("p",null,"Back:",-1),K3=N("option",{value:"0",disabled:""},"Select",-1),G3=["value"],Q3={class:"mt-3 rounded bg-yellow-500 p-3"},Y3=N("p",null,"Sort By:",-1),X3=N("option",{value:0,disabled:""},"Select",-1),Z3=N("option",{value:1},"Random",-1),J3=["value"],e5={class:"mt-3 rounded bg-violet-600 p-3"},t5=N("p",null,"Image:",-1),n5=N("option",{value:0},"None",-1),r5=["value"],i5=N("br",null,null,-1),s5={class:"mt-1 flex items-center justify-center"},o5=N("label",{for:"select_image_front_elem"},"On front: ",-1),a5={class:"mt-3 rounded bg-pink-500 p-3"},l5=N("p",null,"Sound:",-1),u5=N("option",{value:0},"None",-1),c5=["value"],h5=N("br",null,null,-1),d5={class:"mt-1 flex items-center justify-center"},f5=N("label",{for:"select_sound_front_elem"},"On front: ",-1),p5={class:"mt-3 rounded bg-blue-500 p-3"},m5=N("p",null,"Amount:",-1),g5=["max"],_5={class:"mt-5 rounded bg-emerald-400 p-3 text-xl"},w5={class:"flex items-center justify-center"},v5=N("label",{for:"exist_deck_checkbox"},"Add To Existing Deck: ",-1),y5={key:0,class:"mt-3"},b5=["value"],k5={class:"mt-5 rounded bg-gray-400 p-3 text-xl"},E5={class:"flex items-center justify-center"},T5=N("label",{for:"type_ans_checkbox"},"Import As Type Answer: ",-1),I5={class:"mt-5"},A5={key:0,class:"flex justify-center"},x5={key:0},C5={key:1},R5={class:"mt-3 rounded bg-cyan-600 p-3"},S5={__name:"ImportDeck",props:["auth","db","storage","decks"],emits:["close"],setup(t,{emit:e}){const n=t,r=+"300";let i=null,s=null,o=null,a=null;const l=we(!1);let u=null;const d=we([]),f=we(0),p=we([]),m=we(0),b=we(0),v=we(0),I=we(r),A=we(0),x=we(!1),S=we(0),D=we(!1),B=we(!1),X=we(""),G=we(!1),se=we(!1);let re="";const Q=we("");async function le(ee){if(p.value=[],d.value=[],f.value=0,m.value=0,b.value=0,v.value=0,I.value=r,A.value=0,x.value=!1,S.value=0,D.value=!1,B.value=!1,X.value="",G.value=!1,Q.value="",l.value=!0,ee.target.files.length!==0){const Y=ee.target.files[0];re=Y.name.split(".")[0],Q.value="Loading Zip",i=await c3.loadAsync(Y),Q.value="Getting Collection File";const M=await i.file("collection.anki2").async("uint8array");Q.value="Getting Media File";const ce=await i.file("media").async("string");Q.value="Parsing Media File";const ie=await JSON.parse(ce);a=Object.fromEntries(Object.entries(ie).map(([te,J])=>[J,te])),Q.value="Initializing SQL",s=await p3({locateFile:te=>"../../node_modules/sql.js/dist/sql-wasm.wasm"}),Q.value="Initializing Database",o=new s.Database(M),Q.value="Reading Field List Names";const he=o.exec("SELECT models FROM col LIMIT 1;");if(he.length>0&&he[0].values.length>0){u=JSON.parse(he[0].values[0][0]);for(const te in u)if(Object.hasOwnProperty.call(u,te)){const J=u[te];d.value.push(J)}}}}function F(){Q.value="Reading Field Names",p.value=u[Object.keys(u)[f.value-1]].flds,Q.value="Awaiting User Selection"}async function K(){if(I.value<=r&&I.value>0){Q.value="Checking Last Import and Amount Imported";let ee=null,Y=null;const M=await Qs(ct(n.db,`users/${n.auth.currentUser.uid}`));M.data().last_import==null?(Q.value="Creating Last Import Field",await $t(ct(n.db,`users/${n.auth.currentUser.uid}`),{last_import:nt.fromDate(new Date(0))}).then(()=>{ee=new Date(0)})):ee=M.data().last_import.toDate();const ce=new Date,ie=new Date(ce.getFullYear(),ce.getMonth(),ce.getDate());if(new Date(ee.getFullYear(),ee.getMonth(),ee.getDate())<ie?(Q.value="Updating Imports Remaining",await $t(ct(n.db,`users/${n.auth.currentUser.uid}`),{imports_remaining:r,last_import:nt.fromDate(new Date)}).then(()=>{Y=r})):M.data().imports_remaining==null?(Q.value="Creating Import Remaining Field",await $t(ct(n.db,`users/${n.auth.currentUser.uid}`),{imports_remaining:r,last_import:nt.fromDate(new Date)}).then(()=>{Y=r})):Y=M.data().imports_remaining,Y>0)if(Y>=I.value){Q.value="Getting Cards";const te=o.exec("SELECT flds FROM notes;");if(te.length>0&&te[0].values.length>0){const J=te[0].values;let _e="";B.value?_e=X.value:(Q.value="Creating Deck",_e=(await li(Lt(n.db,`users/${n.auth.currentUser.uid}/decks`),{name:re,new_cards_per_day:10,new_cards_today:10,last_update:nt.fromDate(new Date(0)),index:n.decks.length,large_cards:!0,autoplay_media:!0,import_progress:0}).catch(Le=>{Qe.fire({title:Le,color:"black",icon:"error"})})).id);let ve=[];const H=R3(_e);for(let ze=0;ze<J.length;ze++){const Te=J[ze][0].split(""),Me=Te[m.value-1],Ie=Te[b.value-1];let U=null;if(A.value!==0){const z=Te[A.value-1].match(/<img[^>]+src=["']([^"']+)["']/i);z!==null&&(U=z[1])}let V=null;S.value!==0&&(V=Te[S.value-1],V=V.substring(7,V.length-1));let w=null;v.value!==1?w=Te[v.value-2]:w=H(),ve.push({front:Me,back:Ie,index:w,image:U,audio:V})}ve.sort((ze,Le)=>ze.index-Le.index),Q.value="Updating Last Import";let Ze=null;ve.length>I.value?Ze=Y-I.value:Ze=Y-ve.length,$t(ct(n.db,`users/${n.auth.currentUser.uid}`),{imports_remaining:Ze}).then(async()=>{if(B.value)Q.value="Getting Deck Import Progress",Qs(ct(n.db,`users/${n.auth.currentUser.uid}/decks/${X.value}`)).then(async ze=>{let Le=null;ze.data().import_progress==null?(Q.value="Creating Import Progress Field",await $t(ct(n.db,`users/${n.auth.currentUser.uid}/decks/${X.value}`),{import_progress:0}),Le=0):Le=ze.data().import_progress,Q.value="Adding Cards";let Te=!1;for(let Me=Le;Me<ve.length;Me++){const Ie=ve[Me];if(Me<Le+I.value){Q.value=`Adding Cards ${Me}/${ve.length}`;let U=Ie.front,V=Ie.back;if(Ie.image!==null&&Ie.image.includes("<img")||Ie.front.includes("<img")||Ie.back.includes("<img")){let w=null,z=null,L=null;if(Ie.image!==null)w=_r(n.storage,`users/${n.auth.currentUser.uid}/decks/${_e}/images/${Ie.image}`),z=a[Ie.image].toString();else if(Ie.front.includes("<img")){L=Ie.front.match(/<img.*src=(.|\n)*?>/)[0];const O=L.match(/<img[^>]+src=["']([^"']+)["']/i)[1];w=_r(n.storage,`users/${n.auth.currentUser.uid}/decks/${_e}/images/${O}`),z=a[O].toString()}else if(Ie.back.includes("<img")){L=Ie.back.match(/<img.*src=(.|\n)*?>/)[0];const O=L.match(/<img[^>]+src=["']([^"']+)["']/i)[1];w=_r(n.storage,`users/${n.auth.currentUser.uid}/decks/${_e}/images/${O}`),z=a[O].toString()}const C=await i.file(z).async("uint8array");await Ou(w,C);const R=await Nu(w);Ie.image!==null?x.value?U+=`
<img src="${R}">`:V+=`
<img src="${R}">`:Ie.front.includes("<img")?U=U.replace(L,`<img src="${R}">`):Ie.back.includes("<img")&&(V=V.replace(L,`<img src="${R}">`))}if(Ie.audio!==null&&Ie.audio!==""||Ie.front.includes("[sound:")||Ie.back.includes("[sound:")){let w=null,z=null,L=null;if(Ie.audio!==null&&Ie.audio!=="")w=_r(n.storage,`users/${n.auth.currentUser.uid}/decks/${_e}/audio/${Ie.audio}`),z=a[Ie.audio].toString();else if(Ie.front.includes("[sound:")){L=Ie.front.match(/\[sound:.*?\]/)[0];const O=L.substring(7,L.length-1);w=_r(n.storage,`users/${n.auth.currentUser.uid}/decks/${_e}/audio/${O}`),z=a[O].toString()}else if(Ie.back.includes("[sound:")){L=Ie.back.match(/\[sound:.*?\]/)[0];const O=L.substring(7,L.length-1);w=_r(n.storage,`users/${n.auth.currentUser.uid}/decks/${_e}/audio/${O}`),z=a[O].toString()}const C=await i.file(z).async("uint8array");await Ou(w,C);const R=await Nu(w);Ie.audio!==null&&Ie.audio!==""?D.value?U+=`
<audio src="${R}" controls></audio>`:V+=`
<audio src="${R}" controls></audio>`:Ie.front.includes("[sound:")?U=U.replace(L,`<audio src="${R}" controls></audio>`):Ie.back.includes("[sound:")&&(V=V.replace(L,`<audio src="${R}" controls></audio>`))}await li(Lt(n.db,`users/${n.auth.currentUser.uid}/decks/${X.value}/cards/`),{front:U,back:V,streak:-1,new_card:!0,next_review:nt.fromDate(new Date(new Date().getTime()+Me)),type_answer:G.value}).catch(w=>{Qe.fire({title:w,color:"black",icon:"error"})})}else{Te=!0,Q.value="Updating Import Progress",await $t(ct(n.db,`users/${n.auth.currentUser.uid}/decks/${X.value}`),{import_progress:Me});break}}Te?Q.value="Selected Amount Reached":(Q.value="Resetting Import Progress",await $t(ct(n.db,`users/${n.auth.currentUser.uid}/decks/${X.value}`),{import_progress:0}),Q.value="Fully Imported"),se.value=!0});else{Q.value="Adding Cards";let ze=!1;for(let Le=0;Le<ve.length;Le++){const Te=ve[Le];if(Le<I.value){Q.value=`Adding Cards ${Le}/${ve.length}`;let Me=Te.front,Ie=Te.back;if(Te.image!==null&&Te.image.includes("<img")||Te.front.includes("<img")||Te.back.includes("<img")){let U=null,V=null,w=null;if(Te.image!==null)U=_r(n.storage,`users/${n.auth.currentUser.uid}/decks/${_e}/images/${Te.image}`),V=a[Te.image].toString();else if(Te.front.includes("<img")){w=Te.front.match(/<img.*src=(.|\n)*?>/)[0];const C=w.match(/<img[^>]+src=["']([^"']+)["']/i)[1];U=_r(n.storage,`users/${n.auth.currentUser.uid}/decks/${_e}/images/${C}`),V=a[C].toString()}else if(Te.back.includes("<img")){w=Te.back.match(/<img.*src=(.|\n)*?>/)[0];const C=w.match(/<img[^>]+src=["']([^"']+)["']/i)[1];U=_r(n.storage,`users/${n.auth.currentUser.uid}/decks/${_e}/images/${C}`),V=a[C].toString()}const z=await i.file(V).async("uint8array");await Ou(U,z);const L=await Nu(U);Te.image!==null?x.value?Me+=`
<img src="${L}">`:Ie+=`
<img src="${L}">`:Te.front.includes("<img")?Me=Me.replace(w,`<img src="${L}">`):Te.back.includes("<img")&&(Ie=Ie.replace(w,`<img src="${L}">`))}if(Te.audio!==null&&Te.audio!==""||Te.front.includes("[sound:")||Te.back.includes("[sound:")){let U=null,V=null,w=null;if(Te.audio!==null&&Te.audio!=="")U=_r(n.storage,`users/${n.auth.currentUser.uid}/decks/${_e}/audio/${Te.audio}`),V=a[Te.audio].toString();else if(Te.front.includes("[sound:")){w=Te.front.match(/\[sound:.*?\]/)[0];const C=w.substring(7,w.length-1);U=_r(n.storage,`users/${n.auth.currentUser.uid}/decks/${_e}/audio/${C}`),V=a[C].toString()}else if(Te.back.includes("[sound:")){w=Te.back.match(/\[sound:.*?\]/)[0];const C=w.substring(7,w.length-1);U=_r(n.storage,`users/${n.auth.currentUser.uid}/decks/${_e}/audio/${C}`),V=a[C].toString()}const z=await i.file(V).async("uint8array");await Ou(U,z);const L=await Nu(U);Te.audio!==null&&Te.audio!==""?D.value?Me+=`
<audio src="${L}" controls></audio>`:Ie+=`
<audio src="${L}" controls></audio>`:Te.front.includes("[sound:")?Me=Me.replace(w,`<audio src="${L}" controls></audio>`):Te.back.includes("[sound:")&&(Ie=Ie.replace(w,`<audio src="${L}" controls></audio>`))}await li(Lt(n.db,`users/${n.auth.currentUser.uid}/decks/${_e}/cards/`),{front:Me,back:Ie,streak:-1,new_card:!0,next_review:nt.fromDate(new Date(new Date().getTime()+Le)),type_answer:G.value}).catch(U=>{Qe.fire({title:U,color:"black",icon:"error"})})}else{ze=!0,Q.value="Updating Import Progress",await $t(ct(n.db,`users/${n.auth.currentUser.uid}/decks/${_e}`),{import_progress:Le});break}}ze?Q.value="Selected Amount Reached":(Q.value="Resetting Import Progress",await $t(ct(n.db,`users/${n.auth.currentUser.uid}/decks/${_e}`),{import_progress:0}),Q.value="Fully Imported"),se.value=!0}}).catch(ze=>{Qe.fire({title:ze,color:"black",icon:"error"})})}}else Qe.fire({title:`You have ${Y} imports remaining today cards, which is lower than the selected amount. Please lower the selected amount.`,color:"black",icon:"error"});else Qe.fire({title:`You have already imported ${r} cards today!`,color:"black",icon:"error"})}else Qe.fire({title:`Amount can't be larger than ${r} or smaller than 1`,color:"black",icon:"error"})}function T(){window.location.reload()}return(ee,Y)=>(xe(),Pe("div",S3,[P3,N("p",D3," You can only import max "+bt(xr(r))+" cards total per day. Larger decks have to be imported over multiple days. Use the same settings and only select 'Add To Existing Deck' when importing over multiple days. ",1),N("div",O3,[N3,N("input",{onChange:Y[0]||(Y[0]=M=>le(M)),type:"file",accept:".apkg",id:"import_file_selector"},null,32)]),l.value?(xe(),Pe("div",L3,[M3,Ke(N("select",{"onUpdate:modelValue":Y[1]||(Y[1]=M=>f.value=M),onChange:Y[2]||(Y[2]=M=>F()),class:"rounded bg-teal-800 p-1"},[V3,(xe(!0),Pe(Zt,null,Cr(d.value,(M,ce)=>(xe(),Pe("option",{value:ce+1},bt(M.name),9,U3))),256))],544),[[yi,f.value]])])):It("",!0),p.value.length>0?(xe(),Pe("div",F3,[N("div",$3,[N("div",B3,[z3,Ke(N("select",{"onUpdate:modelValue":Y[3]||(Y[3]=M=>m.value=M),class:"rounded bg-teal-600 p-1"},[j3,(xe(!0),Pe(Zt,null,Cr(p.value,M=>(xe(),Pe("option",{value:M.ord+1},bt(M.name),9,q3))),256))],512),[[yi,m.value]])]),N("div",H3,[W3,Ke(N("select",{"onUpdate:modelValue":Y[4]||(Y[4]=M=>b.value=M),class:"rounded bg-teal-600 p-1"},[K3,(xe(!0),Pe(Zt,null,Cr(p.value,M=>(xe(),Pe("option",{value:M.ord+1},bt(M.name),9,G3))),256))],512),[[yi,b.value]])]),N("div",Q3,[Y3,Ke(N("select",{"onUpdate:modelValue":Y[5]||(Y[5]=M=>v.value=M),class:"rounded bg-yellow-600 p-1"},[X3,Z3,(xe(!0),Pe(Zt,null,Cr(p.value,M=>(xe(),Pe("option",{value:M.ord+2},bt(M.name),9,J3))),256))],512),[[yi,v.value]])]),N("div",e5,[t5,Ke(N("select",{"onUpdate:modelValue":Y[6]||(Y[6]=M=>A.value=M),class:"rounded bg-violet-700 p-1"},[n5,(xe(!0),Pe(Zt,null,Cr(p.value,M=>(xe(),Pe("option",{value:M.ord+1},bt(M.name),9,r5))),256))],512),[[yi,A.value]]),i5,N("div",s5,[o5,Ke(N("input",{type:"checkbox",id:"select_image_front_elem","onUpdate:modelValue":Y[7]||(Y[7]=M=>x.value=M),class:"h-7 w-7"},null,512),[[cr,x.value]])])]),N("div",a5,[l5,Ke(N("select",{"onUpdate:modelValue":Y[8]||(Y[8]=M=>S.value=M),class:"rounded bg-pink-600 p-1"},[u5,(xe(!0),Pe(Zt,null,Cr(p.value,M=>(xe(),Pe("option",{value:M.ord+1},bt(M.name),9,c5))),256))],512),[[yi,S.value]]),h5,N("div",d5,[f5,Ke(N("input",{type:"checkbox",id:"select_sound_front_elem","onUpdate:modelValue":Y[9]||(Y[9]=M=>D.value=M),class:"h-7 w-7"},null,512),[[cr,D.value]])])]),N("div",p5,[m5,Ke(N("input",{"onUpdate:modelValue":Y[10]||(Y[10]=M=>I.value=M),type:"number",min:"1",max:xr(r),class:"w-[10ch] rounded bg-blue-600 p-3 text-center"},null,8,g5),[[Mt,I.value]])])]),N("div",_5,[N("div",w5,[v5,Ke(N("input",{type:"checkbox","onUpdate:modelValue":Y[11]||(Y[11]=M=>B.value=M),id:"exist_deck_checkbox",class:"h-7 w-7"},null,512),[[cr,B.value]])]),B.value?(xe(),Pe("div",y5,[Ke(N("select",{"onUpdate:modelValue":Y[12]||(Y[12]=M=>X.value=M),class:"rounded bg-emerald-600 p-1"},[(xe(!0),Pe(Zt,null,Cr(t.decks,M=>(xe(),Pe("option",{value:M.id},bt(M.name),9,b5))),256))],512),[[yi,X.value]])])):It("",!0)]),N("div",k5,[N("div",E5,[T5,Ke(N("input",{type:"checkbox","onUpdate:modelValue":Y[13]||(Y[13]=M=>G.value=M),id:"type_ans_checkbox",class:"h-7 w-7"},null,512),[[cr,G.value]])])])])):It("",!0),N("div",I5,[se.value?(xe(),Pe("div",C5,[N("button",{onClick:Y[16]||(Y[16]=M=>T()),class:"rounded bg-green-600 p-3 text-xl shadow shadow-black"}," Refresh ")])):(xe(),Pe("div",A5,[N("button",{onClick:Y[14]||(Y[14]=M=>ee.$emit("close")),class:"rounded bg-red-600 p-3 text-xl shadow shadow-black"}," Cancel "),m.value!==0&&b.value!==0&&v.value!==0&&(!B.value||X.value!=="")&&I.value<=xr(r)&&I.value>0?(xe(),Pe("div",x5,[N("button",{onClick:Y[15]||(Y[15]=M=>K()),class:"ml-3 rounded bg-orange-600 p-3 text-xl shadow shadow-black"}," Import ")])):It("",!0)]))]),N("div",R5,[N("p",null,"Status : "+bt(Q.value),1)])]))}},P5={class:"fixed bottom-0 left-0 right-0 top-0 z-50 bg-gray-600 bg-opacity-50"},D5={class:"fixed left-1/2 top-1/2 inline-block -translate-x-1/2 -translate-y-1/2 rounded-md bg-gradient-to-r from-green-900 to-blue-900 p-3 text-center shadow-lg shadow-black"},O5={class:"mt-3 flex items-center justify-center rounded bg-cyan-400 p-3 text-lg shadow shadow-black"},N5=N("p",{class:"mr-1"},"New Cards Per Day:",-1),L5={class:"mt-3 flex items-center justify-center rounded bg-emerald-400 p-3 text-lg shadow shadow-black"},M5=N("label",{for:"large_cards_elem",class:"mr-1 select-none"},"Large Cards: ",-1),V5={__name:"NewDeckMenu",props:["auth","db","storage","decks"],emits:["close","save"],setup(t,{emit:e}){const n=t,r=we(""),i=we(""),s=we(10),o=we(!1),a=we(!1);function l(){r.value!==""?s.value!==""?li(Lt(n.db,`users/${n.auth.currentUser.uid}/decks`),{name:r.value,new_cards_per_day:s.value,new_cards_today:s.value,last_update:nt.fromDate(new Date(0)),index:n.decks.length,large_cards:o.value,autoplay_media:!0}).then(()=>{e("save"),e("close")}):Qe.fire({title:"New cards per day cannot be empty!",color:"black",icon:"error"}):Qe.fire({title:"Name cannot be empty!",color:"black",icon:"error"})}async function u(){i.value=await Oc(r.value)}function d(){a.value=!0}function f(){a.value=!1}return(p,m)=>(xe(),Pe("div",P5,[N("div",D5,[Ke(N("input",{type:"text","onUpdate:modelValue":m[0]||(m[0]=b=>r.value=b),onInput:m[1]||(m[1]=b=>u()),style:Fs({backgroundColor:i.value}),class:"rounded bg-indigo-400 p-3 text-center text-lg placeholder-white shadow shadow-black",placeholder:"Name"},null,36),[[Mt,r.value]]),N("div",O5,[N5,Ke(N("input",{type:"number","onUpdate:modelValue":m[2]||(m[2]=b=>s.value=b),class:"w-[5ch] rounded bg-cyan-500 p-1 text-center placeholder-white",placeholder:"?"},null,512),[[Mt,s.value,void 0,{number:!0}]])]),N("div",L5,[M5,Ke(N("input",{type:"checkbox",id:"large_cards_elem","onUpdate:modelValue":m[3]||(m[3]=b=>o.value=b),class:"h-6 w-6"},null,512),[[cr,o.value]])]),N("div",null,[N("button",{onClick:m[4]||(m[4]=b=>p.$emit("close")),class:"mr-4 mt-3 rounded bg-orange-300 p-3 text-xl shadow shadow-black"}," Cancel "),N("button",{onClick:l,class:"mt-3 rounded bg-rose-300 p-3 text-xl shadow shadow-black"}," Create ")]),N("div",null,[N("button",{onClick:m[5]||(m[5]=b=>d()),class:"mt-7 rounded bg-cyan-300 p-3 text-sm shadow shadow-black"}," Import ")])]),a.value?(xe(),Gr(S5,{key:0,auth:t.auth,db:t.db,storage:t.storage,decks:t.decks,onClose:m[6]||(m[6]=b=>f())},null,8,["auth","db","storage","decks"])):It("",!0)]))}},U5={class:"fixed bottom-0 left-0 right-0 top-0 z-50 bg-gray-600 bg-opacity-50"},F5={class:"fixed left-1/2 top-1/2 inline-block -translate-x-1/2 -translate-y-1/2 rounded-md bg-gradient-to-tr from-cyan-700 to-zinc-400 p-3 text-center shadow-lg shadow-black"},$5=N("p",null,"Front",-1),B5=N("hr",{class:"mb-4 mt-4 rounded border-2 border-gray-400"},null,-1),z5=N("p",null,"Back",-1),j5=N("hr",{class:"mb-4 mt-4 rounded border-2 border-gray-400"},null,-1),q5={class:"rounded-md bg-gray-500 p-3 shadow shadow-black"},H5=N("label",{for:"reversedCheck",class:"mr-3 text-center text-lg text-white"},"Create Reversed",-1),W5=N("br",null,null,-1),K5=N("label",{for:"typeAnsCheck",class:"mr-3 text-center text-lg text-white"},"Type Answer",-1),G5=N("hr",{class:"mb-4 mt-4 rounded border-2 border-gray-400"},null,-1),Q5={__name:"NewCardMenu",props:["auth","db","deckId"],emits:["close"],setup(t,{emit:e}){const n=t,r=we(""),i=we(""),s=we(!1),o=we(!1),a=we(null);function l(){li(Lt(n.db,`users/${n.auth.currentUser.uid}/decks/${n.deckId}/cards/`),{front:r.value,back:i.value,streak:-1,new_card:!0,next_review:nt.fromDate(new Date),type_answer:o.value}).catch(d=>{Qe.fire({title:d,color:"black",icon:"error"})}),s.value&&li(Lt(n.db,`users/${n.auth.currentUser.uid}/decks/${n.deckId}/cards/`),{front:i.value,back:r.value,streak:-1,new_card:!0,next_review:nt.fromDate(new Date),type_answer:o.value}).catch(d=>{Qe.fire({title:d,color:"black",icon:"error"})}),r.value="",i.value="",a.value.focus()}function u(d){d.code=="Enter"&&l()}return(d,f)=>(xe(),Pe("div",U5,[N("div",F5,[$5,Ke(N("input",{type:"text",ref_key:"front_field_ref",ref:a,"onUpdate:modelValue":f[0]||(f[0]=p=>r.value=p),class:"rounded bg-gray-600 p-3 text-center text-lg text-white shadow shadow-black"},null,512),[[Mt,r.value]]),B5,z5,Ke(N("input",{type:"text","onUpdate:modelValue":f[1]||(f[1]=p=>i.value=p),onKeypress:f[2]||(f[2]=p=>u(p)),class:"rounded bg-gray-600 p-3 text-center text-lg text-white shadow shadow-black"},null,544),[[Mt,i.value]]),j5,N("div",q5,[H5,Ke(N("input",{"onUpdate:modelValue":f[3]||(f[3]=p=>s.value=p),type:"checkbox",id:"reversedCheck",class:"h-7 w-7 translate-y-1"},null,512),[[cr,s.value]]),W5,K5,Ke(N("input",{"onUpdate:modelValue":f[4]||(f[4]=p=>o.value=p),type:"checkbox",id:"typeAnsCheck",class:"h-7 w-7 translate-y-1"},null,512),[[cr,o.value]])]),G5,N("button",{onClick:f[5]||(f[5]=p=>d.$emit("close")),class:"mr-10 rounded bg-red-400 px-3 py-2 text-lg text-white shadow-md shadow-gray-800"}," Cancel "),N("button",{onClick:f[6]||(f[6]=p=>l()),class:"rounded bg-green-600 px-3 py-2 text-lg text-white shadow-md shadow-gray-800"}," Create ")])]))}},Y5={class:"fixed bottom-0 left-0 right-0 top-0 z-50 bg-gray-600 bg-opacity-50"},X5={class:"fixed left-1/2 top-1/2 inline-block h-[600px] max-h-[100vh] w-[800px] max-w-[100vw] -translate-x-1/2 -translate-y-1/2 overflow-auto rounded-md bg-gradient-to-tr from-slate-700 to-fuchsia-800 p-3 text-center shadow-lg shadow-black"},Z5=N("p",{class:"text-lg text-white"},"Front",-1),J5=N("hr",{class:"mb-4 mt-4 rounded border-2 border-gray-400"},null,-1),eL=N("p",{class:"text-lg text-white"},"Back",-1),tL=N("hr",{class:"mb-4 mt-4 rounded border-2 border-gray-400"},null,-1),nL={class:"rounded-md bg-gray-500 p-3 shadow shadow-black"},rL=N("label",{for:"reversedCheck",class:"mr-3 text-center text-lg text-white"},"Create Reversed",-1),iL=N("br",null,null,-1),sL=N("label",{for:"typeAnsCheck",class:"mr-3 text-center text-lg text-white"},"Type Answer",-1),oL=N("hr",{class:"mb-4 mt-4 rounded border-2 border-gray-400"},null,-1),aL={__name:"NewLargeCard",props:["auth","db","deckId"],emits:["close"],setup(t,{emit:e}){const n=t,r=we(""),i=we(""),s=we(!1),o=we(!1),a=we(null),l=we(null);function u(){li(Lt(n.db,`users/${n.auth.currentUser.uid}/decks/${n.deckId}/cards/`),{front:r.value,back:i.value,streak:-1,new_card:!0,next_review:nt.fromDate(new Date),type_answer:o.value}).catch(f=>{Qe.fire({title:f,color:"black",icon:"error"})}),s.value&&li(Lt(n.db,`users/${n.auth.currentUser.uid}/decks/${n.deckId}/cards/`),{front:i.value,back:r.value,streak:-1,new_card:!0,next_review:nt.fromDate(new Date),type_answer:o.value}).catch(f=>{Qe.fire({title:f,color:"black",icon:"error"})}),r.value="",i.value="",a.value.style.height="auto",l.value.style.height="auto",a.value.focus()}function d(f){f?(a.value.style.height="auto",a.value.style.height=a.value.scrollHeight+"px"):(l.value.style.height="auto",l.value.style.height=l.value.scrollHeight+"px")}return(f,p)=>(xe(),Pe("div",Y5,[N("div",X5,[Z5,Ke(N("textarea",{ref_key:"front_field_ref",ref:a,"onUpdate:modelValue":p[0]||(p[0]=m=>r.value=m),onInput:p[1]||(p[1]=m=>d(!0)),class:"min-h-[150px] w-full resize-none rounded bg-gray-300 p-3 text-center text-lg text-black shadow shadow-black"},null,544),[[Mt,r.value]]),J5,eL,Ke(N("textarea",{ref_key:"back_field_ref",ref:l,"onUpdate:modelValue":p[2]||(p[2]=m=>i.value=m),onInput:p[3]||(p[3]=m=>d(!1)),class:"min-h-[150px] w-full resize-none rounded bg-gray-300 p-3 text-center text-lg text-black shadow shadow-black"},null,544),[[Mt,i.value]]),tL,N("div",nL,[rL,Ke(N("input",{"onUpdate:modelValue":p[4]||(p[4]=m=>s.value=m),type:"checkbox",id:"reversedCheck",class:"h-7 w-7 translate-y-1"},null,512),[[cr,s.value]]),iL,sL,Ke(N("input",{"onUpdate:modelValue":p[5]||(p[5]=m=>o.value=m),type:"checkbox",id:"typeAnsCheck",class:"h-7 w-7 translate-y-1"},null,512),[[cr,o.value]])]),oL,N("button",{onClick:p[6]||(p[6]=m=>f.$emit("close")),class:"mr-10 rounded bg-red-400 px-3 py-2 text-lg text-white shadow-md shadow-gray-800"}," Cancel "),N("button",{onClick:p[7]||(p[7]=m=>u()),class:"rounded bg-green-600 px-3 py-2 text-lg text-white shadow-md shadow-gray-800"}," Create ")])]))}},lL={class:"flex justify-center"},uL={class:"mt-8 inline-block rounded-xl bg-sky-600 p-3 text-center"},cL=N("p",{class:"text-lg text-white"},"Timeline",-1),hL={class:"mt-1 rounded-xl bg-blue-200 p-1 text-xl"},dL={class:"mt-3"},fL=N("p",{class:"text-lg text-white"},"New Card Forecast",-1),pL={class:"rounded-xl bg-green-200 p-1"},mL={class:"text-lg"},gL={class:"mt-3"},_L=N("p",{class:"text-lg text-white"},"Deck Data",-1),wL={class:"rounded-xl bg-orange-200 p-1 text-xl"},vL={__name:"Timeline",props:["auth","db","deckId","showDays","newCards","reviewsDue","totalCards"],setup(t,{expose:e}){const n=t,r=we([]);async function i(){r.value=[];let s=[];const o=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],a=new Date,l=new Date(a.getFullYear(),a.getMonth(),a.getDate()),u=l.getDay();for(let d=0;d<n.showDays;d++){let f=u+d;f>=o.length&&(f-=o.length),r.value.push({name:o[f],reviews:0}),s.push({name:o[f],reviews:0})}for(let d=0;d<n.showDays;d++){let f=new Date(l);f.setDate(f.getDate()+d);let p=new Date(f);if(p.setDate(p.getDate()+1),d===0)s[0].reviews=n.reviewsDue;else{const m=await Vs(wr(Lt(n.db,`users/${n.auth.currentUser.uid}/decks/${n.deckId}/cards`),kn("next_review",">=",nt.fromDate(f)),kn("next_review","<",nt.fromDate(p))));s[d].reviews=m.data().count}}r.value=s}return e({loadDays:i}),(s,o)=>(xe(),Pe("div",lL,[N("div",uL,[N("div",null,[cL,(xe(!0),Pe(Zt,null,Cr(r.value,(a,l)=>(xe(),Pe("p",hL,[Rs(" Reviews "+bt(l===0?"Now":l===1?"Tomorrow":`on ${a.name}`)+": ",1),N("b",null,bt(a.reviews),1)]))),256))]),N("div",dL,[fL,N("div",pL,[N("p",null," At the rate of "+bt(t.newCards)+" new cards per day, you will accumulate... ",1),N("div",mL,[N("p",null,[N("b",null,bt(t.newCards*7),1),Rs(" per Week ")]),N("p",null,[N("b",null,bt(t.newCards*30),1),Rs(" per Month ")]),N("p",null,[N("b",null,bt(t.newCards*365),1),Rs(" per Year ")])])])]),N("div",gL,[_L,N("div",wL,[N("p",null,"Total Cards: "+bt(t.totalCards),1)])])])]))}},yL={key:0,class:"mt-5 overflow-auto whitespace-nowrap pb-3 text-center"},bL=["onClick","onDblclick"],kL={key:3,class:"mt-10"},EL={class:"flex justify-center text-center"},TL={class:"mr-10 text-lg"},IL={class:"text-lg"},AL={class:"flex justify-center"},xL={class:"mt-2"},CL={__name:"Decks",props:["auth","db","storage"],emits:["loadSettings","review","largeReview"],setup(t,{expose:e,emit:n}){const r=t,i=we([]),s=we(""),o=we(0),a=we(0),l=we(0),u=we(-1),d=we(!1),f=we(!1),p=we(!1),m=we(null),b=we(null),v=we(null),I=we(0),A=we(!1);async function x(M){s.value=M;const ce=await Vs(Lt(r.db,`users/${r.auth.currentUser.uid}/decks/${s.value}/cards`));l.value=ce.data().count;const ie=new Date,he=await Vs(wr(Lt(r.db,`users/${r.auth.currentUser.uid}/decks/${s.value}/cards`),kn("next_review","<=",nt.fromDate(ie)))),te=await Vs(wr(Lt(r.db,`users/${r.auth.currentUser.uid}/decks/${s.value}/cards`),kn("next_review","<=",nt.fromDate(ie)),kn("streak","==",-1)));o.value=he.data().count-te.data().count,a.value=te.data().count,await ts(),v.value.loadDays();const J=i.value.find(_e=>_e.id===M);I.value=J.new_cards_per_day,A.value=J.large_cards}async function S(){let M=[];Yr(Lt(r.db,`users/${r.auth.currentUser.uid}/decks`)).then(async ce=>{await Promise.all(ce.docs.map(async ie=>{M.push({name:ie.data().name,color:await Oc(ie.data().name),new_cards_per_day:ie.data().new_cards_per_day,id:ie.id,index:ie.data().index,large_cards:ie.data().large_cards,autoplay_media:ie.data().autoplay_media})})),M.sort((ie,he)=>ie.index-he.index),i.value=M}),D(),n("loadSettings")}function D(){s.value!==""&&x(s.value)}async function B(){const M=await Qs(ct(r.db,`users/${r.auth.currentUser.uid}/decks/${s.value}`));let ce=[],ie=M.data().new_cards_today;const he=new Date,te=new Date(he.getFullYear(),he.getMonth(),he.getDate());te>M.data().last_update.toDate()&&($t(ct(r.db,`users/${r.auth.currentUser.uid}/decks/${s.value}`),{new_cards_today:M.data().new_cards_per_day,last_update:nt.fromDate(te)}),ie=M.data().new_cards_per_day);const J=await Yr(wr(Lt(r.db,`users/${r.auth.currentUser.uid}/decks/${s.value}/cards`),kn("next_review","<=",nt.fromDate(he)),kn("new_card","==",!1)));let _e=null;ie>0&&(_e=await Yr(wr(Lt(r.db,`users/${r.auth.currentUser.uid}/decks/${s.value}/cards`),kn("next_review","<=",nt.fromDate(he)),kn("new_card","==",!0),Io("next_review"),Ao(ie)))),J.forEach(ve=>{ce.push({id:ve.id,front:ve.data().front,back:ve.data().back,streak:ve.data().streak,type_answer:!!ve.data().type_answer})}),_e!==null&&_e.forEach(ve=>{ce.push({id:ve.id,front:ve.data().front,back:ve.data().back,streak:0,type_answer:!!ve.data().type_answer}),$t(ct(r.db,`users/${r.auth.currentUser.uid}/decks/${s.value}/cards/${ve.id}`),{streak:0,new_card:!1}),ie-=1}),$t(ct(r.db,`users/${r.auth.currentUser.uid}/decks/${s.value}`),{new_cards_today:ie}),ce.length!==0?M.data().large_cards?n("largeReview",s.value,ce,M.data().autoplay_media):n("review",s.value,ce):Qe.fire({title:"No reviews on this deck at this time.",color:"black",icon:"info"})}async function X(M){u.value=M,T(!1),await ts(),m.value.loadInitialCards()}function G(M){u.value=-1,T(!0),M&&S()}function se(){d.value=!0,T(!1)}function re(){d.value=!1,T(!0)}function Q(){S()}function le(){A.value?p.value=!0:f.value=!0,T(!1)}function F(){f.value=!1,T(!0)}function K(){p.value=!1,T(!0)}function T(M){M?document.body.style.overflow="auto":document.body.style.overflow="hidden"}function ee(){s.value=""}function Y(){ee(),i.value=[]}return e({loadDecks:S,reselectDeck:D,logout:Y}),(M,ce)=>(xe(),Pe(Zt,null,[t.auth!==null&&t.auth.currentUser!==null?(xe(),Pe("div",yL,[(xe(!0),Pe(Zt,null,Cr(i.value,(ie,he)=>(xe(),Pe("div",{key:ie.id,class:"mb-3 inline-block"},[N("button",{onClick:te=>x(ie.id),onDblclick:te=>X(he),style:Fs({backgroundColor:ie.color,borderWidth:s.value==ie.id?"4px":"0px"}),class:"mr-5 rounded border-white bg-white p-5 text-lg shadow-md shadow-black"},bt(ie.name),45,bL)]))),128)),N("button",{onClick:ce[0]||(ce[0]=ie=>se()),class:"rounded bg-gradient-to-r from-emerald-700 to-lime-600 p-5 text-lg text-white shadow-md shadow-black"}," New Deck ")])):It("",!0),u.value!==-1?(xe(),Gr(XO,{key:1,auth:t.auth,db:t.db,deck:i.value[u.value],onClose:ce[1]||(ce[1]=ie=>G(ie)),onDelete:ce[2]||(ce[2]=ie=>ee()),ref_key:"edit_deck_menu_ref",ref:m},null,8,["auth","db","deck"])):It("",!0),d.value?(xe(),Gr(V5,{key:2,auth:t.auth,db:t.db,storage:t.storage,decks:i.value,onClose:ce[3]||(ce[3]=ie=>re()),onSave:ce[4]||(ce[4]=ie=>Q()),ref_key:"new_deck_menu_ref",ref:b},null,8,["auth","db","storage","decks"])):It("",!0),s.value!==""?(xe(),Pe("div",kL,[N("div",EL,[N("p",TL,[Rs(" New Cards: "),N("b",null,bt(a.value),1)]),N("p",IL,[Rs(" Reviews: "),N("b",null,bt(o.value),1)])]),N("div",AL,[N("div",xL,[N("button",{onClick:ce[5]||(ce[5]=ie=>le()),class:"mr-5 rounded-lg bg-gradient-to-tr from-orange-600 to-blue-500 p-3 text-2xl text-white shadow-lg shadow-black"}," New Card "),N("button",{onClick:ce[6]||(ce[6]=ie=>B()),class:"rounded-lg bg-gradient-to-r from-green-500 to-amber-800 p-3 text-2xl text-white shadow-lg shadow-black"}," Review ")])])])):It("",!0),f.value?(xe(),Gr(Q5,{key:4,auth:t.auth,db:t.db,"deck-id":s.value,onClose:ce[7]||(ce[7]=ie=>F())},null,8,["auth","db","deck-id"])):It("",!0),p.value?(xe(),Gr(aL,{key:5,auth:t.auth,db:t.db,"deck-id":s.value,onClose:ce[8]||(ce[8]=ie=>K())},null,8,["auth","db","deck-id"])):It("",!0),s.value!==""?(xe(),Gr(vL,{key:6,auth:t.auth,db:t.db,"deck-id":s.value,"show-days":7,"new-cards":I.value,"reviews-due":o.value,"total-cards":l.value,ref_key:"timeline_ref",ref:v},null,8,["auth","db","deck-id","new-cards","reviews-due","total-cards"])):It("",!0)],64))}},RL=""+new URL("yes-6050e699.svg",import.meta.url).href;var Fd=typeof navigator<"u"?navigator.userAgent.toLowerCase().indexOf("firefox")>0:!1;function $d(t,e,n,r){t.addEventListener?t.addEventListener(e,n,r):t.attachEvent&&t.attachEvent("on".concat(e),function(){n(window.event)})}function p1(t,e){for(var n=e.slice(0,e.length-1),r=0;r<n.length;r++)n[r]=t[n[r].toLowerCase()];return n}function m1(t){typeof t!="string"&&(t=""),t=t.replace(/\s/g,"");for(var e=t.split(","),n=e.lastIndexOf("");n>=0;)e[n-1]+=",",e.splice(n,1),n=e.lastIndexOf("");return e}function SL(t,e){for(var n=t.length>=e.length?t:e,r=t.length>=e.length?e:t,i=!0,s=0;s<n.length;s++)r.indexOf(n[s])===-1&&(i=!1);return i}var wl={backspace:8,"⌫":8,tab:9,clear:12,enter:13,"↩":13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"⇪":20,",":188,".":190,"/":191,"`":192,"-":Fd?173:189,"=":Fd?61:187,";":Fd?59:186,"'":222,"[":219,"]":221,"\\":220},ci={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,cmd:91,command:91},zf={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},Sn={16:!1,18:!1,17:!1,91:!1},ln={};for(var Mu=1;Mu<20;Mu++)wl["f".concat(Mu)]=111+Mu;var Ft=[],Aw=!1,g1="all",_1=[],Hl=function(e){return wl[e.toLowerCase()]||ci[e.toLowerCase()]||e.toUpperCase().charCodeAt(0)},PL=function(e){return Object.keys(wl).find(function(n){return wl[n]===e})},DL=function(e){return Object.keys(ci).find(function(n){return ci[n]===e})};function w1(t){g1=t||"all"}function vl(){return g1||"all"}function OL(){return Ft.slice(0)}function NL(){return Ft.map(function(t){return PL(t)||DL(t)||String.fromCharCode(t)})}function LL(){var t=[];return Object.keys(ln).forEach(function(e){ln[e].forEach(function(n){var r=n.key,i=n.scope,s=n.mods,o=n.shortcut;t.push({scope:i,shortcut:o,mods:s,keys:r.split("+").map(function(a){return Hl(a)})})})}),t}function ML(t){var e=t.target||t.srcElement,n=e.tagName,r=!0;return(e.isContentEditable||(n==="INPUT"||n==="TEXTAREA"||n==="SELECT")&&!e.readOnly)&&(r=!1),r}function VL(t){return typeof t=="string"&&(t=Hl(t)),Ft.indexOf(t)!==-1}function UL(t,e){var n,r;t||(t=vl());for(var i in ln)if(Object.prototype.hasOwnProperty.call(ln,i))for(n=ln[i],r=0;r<n.length;)n[r].scope===t?n.splice(r,1):r++;vl()===t&&w1(e||"all")}function FL(t){var e=t.keyCode||t.which||t.charCode,n=Ft.indexOf(e);if(n>=0&&Ft.splice(n,1),t.key&&t.key.toLowerCase()==="meta"&&Ft.splice(0,Ft.length),(e===93||e===224)&&(e=91),e in Sn){Sn[e]=!1;for(var r in ci)ci[r]===e&&(Rt[r]=!1)}}function $L(t){if(typeof t>"u")Object.keys(ln).forEach(function(o){return delete ln[o]});else if(Array.isArray(t))t.forEach(function(o){o.key&&Bd(o)});else if(typeof t=="object")t.key&&Bd(t);else if(typeof t=="string"){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i=n[0],s=n[1];typeof i=="function"&&(s=i,i=""),Bd({key:t,scope:i,method:s,splitKey:"+"})}}var Bd=function(e){var n=e.key,r=e.scope,i=e.method,s=e.splitKey,o=s===void 0?"+":s,a=m1(n);a.forEach(function(l){var u=l.split(o),d=u.length,f=u[d-1],p=f==="*"?"*":Hl(f);if(ln[p]){r||(r=vl());var m=d>1?p1(ci,u):[];ln[p]=ln[p].filter(function(b){var v=i?b.method===i:!0;return!(v&&b.scope===r&&SL(b.mods,m))})}})};function xw(t,e,n,r){if(e.element===r){var i;if(e.scope===n||e.scope==="all"){i=e.mods.length>0;for(var s in Sn)Object.prototype.hasOwnProperty.call(Sn,s)&&(!Sn[s]&&e.mods.indexOf(+s)>-1||Sn[s]&&e.mods.indexOf(+s)===-1)&&(i=!1);(e.mods.length===0&&!Sn[16]&&!Sn[18]&&!Sn[17]&&!Sn[91]||i||e.shortcut==="*")&&(e.keys=[],e.keys=e.keys.concat(Ft),e.method(t,e)===!1&&(t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation&&t.stopPropagation(),t.cancelBubble&&(t.cancelBubble=!0)))}}}function Cw(t,e){var n=ln["*"],r=t.keyCode||t.which||t.charCode;if(Rt.filter.call(this,t)){if((r===93||r===224)&&(r=91),Ft.indexOf(r)===-1&&r!==229&&Ft.push(r),["ctrlKey","altKey","shiftKey","metaKey"].forEach(function(b){var v=zf[b];t[b]&&Ft.indexOf(v)===-1?Ft.push(v):!t[b]&&Ft.indexOf(v)>-1?Ft.splice(Ft.indexOf(v),1):b==="metaKey"&&t[b]&&Ft.length===3&&(t.ctrlKey||t.shiftKey||t.altKey||(Ft=Ft.slice(Ft.indexOf(v))))}),r in Sn){Sn[r]=!0;for(var i in ci)ci[i]===r&&(Rt[i]=!0);if(!n)return}for(var s in Sn)Object.prototype.hasOwnProperty.call(Sn,s)&&(Sn[s]=t[zf[s]]);t.getModifierState&&!(t.altKey&&!t.ctrlKey)&&t.getModifierState("AltGraph")&&(Ft.indexOf(17)===-1&&Ft.push(17),Ft.indexOf(18)===-1&&Ft.push(18),Sn[17]=!0,Sn[18]=!0);var o=vl();if(n)for(var a=0;a<n.length;a++)n[a].scope===o&&(t.type==="keydown"&&n[a].keydown||t.type==="keyup"&&n[a].keyup)&&xw(t,n[a],o,e);if(r in ln){for(var l=0;l<ln[r].length;l++)if((t.type==="keydown"&&ln[r][l].keydown||t.type==="keyup"&&ln[r][l].keyup)&&ln[r][l].key){for(var u=ln[r][l],d=u.splitKey,f=u.key.split(d),p=[],m=0;m<f.length;m++)p.push(Hl(f[m]));p.sort().join("")===Ft.sort().join("")&&xw(t,u,o,e)}}}}function BL(t){return _1.indexOf(t)>-1}function Rt(t,e,n){Ft=[];var r=m1(t),i=[],s="all",o=document,a=0,l=!1,u=!0,d="+",f=!1;for(n===void 0&&typeof e=="function"&&(n=e),Object.prototype.toString.call(e)==="[object Object]"&&(e.scope&&(s=e.scope),e.element&&(o=e.element),e.keyup&&(l=e.keyup),e.keydown!==void 0&&(u=e.keydown),e.capture!==void 0&&(f=e.capture),typeof e.splitKey=="string"&&(d=e.splitKey)),typeof e=="string"&&(s=e);a<r.length;a++)t=r[a].split(d),i=[],t.length>1&&(i=p1(ci,t)),t=t[t.length-1],t=t==="*"?"*":Hl(t),t in ln||(ln[t]=[]),ln[t].push({keyup:l,keydown:u,scope:s,mods:i,shortcut:r[a],method:n,key:r[a],splitKey:d,element:o});typeof o<"u"&&!BL(o)&&window&&(_1.push(o),$d(o,"keydown",function(p){Cw(p,o)},f),Aw||(Aw=!0,$d(window,"focus",function(){Ft=[]},f)),$d(o,"keyup",function(p){Cw(p,o),FL(p)},f))}function zL(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"all";Object.keys(ln).forEach(function(n){var r=ln[n].filter(function(i){return i.scope===e&&i.shortcut===t});r.forEach(function(i){i&&i.method&&i.method()})})}var zd={getPressedKeyString:NL,setScope:w1,getScope:vl,deleteScope:UL,getPressedKeyCodes:OL,getAllKeyCodes:LL,isPressed:VL,filter:ML,trigger:zL,unbind:$L,keyMap:wl,modifier:ci,modifierMap:zf};for(var jd in zd)Object.prototype.hasOwnProperty.call(zd,jd)&&(Rt[jd]=zd[jd]);if(typeof window<"u"){var jL=window.hotkeys;Rt.noConflict=function(t){return t&&window.hotkeys===Rt&&(window.hotkeys=jL),Rt},window.hotkeys=Rt}const qL={key:0,class:"fixed bottom-0 left-0 right-0 top-0 z-50 bg-gray-600 bg-opacity-50"},HL={class:"mx-8 my-4 max-h-[10vh] overflow-auto break-all text-2xl text-white"},WL={key:0},KL=N("hr",{class:"mx-3 rounded-full border-2 border-white"},null,-1),GL={class:"mx-8 my-4 max-h-[10vh] overflow-auto break-all text-2xl text-white"},QL=N("br",null,null,-1),YL={key:0,class:"mt-8"},XL=N("img",{height:"65",width:"65",src:Pm,alt:"No",draggable:"false"},null,-1),ZL=[XL],JL=N("img",{height:"65",width:"65",src:RL,alt:"Yes",draggable:"false"},null,-1),eM=[JL],tM={key:1},nM=N("hr",{class:"mx-3 rounded-full border-2 border-white"},null,-1),rM=N("br",null,null,-1),iM={__name:"Review",props:["auth","db","timeDuration","timeMultiplier"],emits:["reselectDeck"],setup(t,{expose:e,emit:n}){const r=t;Rt("space","review",function(X,G){X.preventDefault(),p()}),Rt("space","yes_no",function(X,G){X.preventDefault(),b(!0)}),Rt("c","yes_no",function(X,G){X.preventDefault(),b(!1)}),Rt("space","check_type_ans",function(X,G){X.preventDefault(),m()}),Rt("enter","check_type_ans",function(X,G){X.preventDefault(),m()});const i=we(!1),s=we(""),o=we([]),a=we(0),l=we(!1),u=we(""),d=we(null);function f(X,G){s.value=X,o.value=G,a.value=A(0,o.value.length),i.value=!0,Rt.setScope("review"),document.body.style.overflow="hidden",o.value[a.value].type_answer&&I()}function p(){o.value[a.value].type_answer?Rt.getScope()==="check_type_ans"&&m():(l.value=!0,Rt.setScope("yes_no"))}function m(){const X=o.value[a.value].back.replace(/\[.*?\]/g,"");u.value===X?(b(!0),u.value=""):(b(!1),u.value="")}function b(X){const G=new Date,se=new Date(G.getFullYear(),G.getMonth(),G.getDate());if(X===!0)if(o.value[a.value].streak===0)o.value[a.value].streak=.5,D(!0);else if(o.value[a.value].streak===.5){let re=new Date(se);re.setDate(re.getDate()+1),$t(ct(r.db,`users/${r.auth.currentUser.uid}/decks/${s.value}/cards/${o.value[a.value].id}`),{next_review:nt.fromDate(re),streak:1}),S()}else{const re=Math.pow(r.timeMultiplier,o.value[a.value].streak)*r.timeDuration,Q=Math.floor(re/24);let le=new Date(se);le.setDate(le.getDate()+Q),$t(ct(r.db,`users/${r.auth.currentUser.uid}/decks/${s.value}/cards/${o.value[a.value].id}`),{next_review:nt.fromDate(le),streak:o.value[a.value].streak+1}),S()}else o.value[a.value].streak!==0&&o.value[a.value].streak!==.5&&$t(ct(r.db,`users/${r.auth.currentUser.uid}/decks/${s.value}/cards/${o.value[a.value].id}`),{next_review:nt.fromDate(new Date),streak:0}),o.value[a.value].streak=0,D(!0);o.value.length>0&&o.value[a.value].type_answer&&I()}function v(){l.value=!0,Rt.setScope("check_type_ans")}async function I(){await ts(),d.value.focus()}function A(X,G){return Math.floor(Math.random()*(G-X))+X}function x(){i.value=!1,l.value=!1,Rt.setScope("all"),document.body.style.overflow="auto",n("reselectDeck")}function S(){o.value.splice(a.value,1),o.value.length!==0?D(!1):(x(),Qe.fire({title:"You've finished all reviews for today.",text:"Come back tomorrow for more.",color:"black",icon:"success"}))}function D(X){if(X)if(o.value.length!==1){let G=A(0,o.value.length);for(;G===a.value;)G=A(0,o.value.length);a.value=G}else a.value=0;else a.value=A(0,o.value.length);l.value=!1,Rt.setScope("review")}function B(X){X.code=="Enter"&&v()}return e({reviewCards:f}),(X,G)=>i.value?(xe(),Pe("div",qL,[N("button",{onClick:G[0]||(G[0]=se=>x()),class:"fixed left-1/2 top-[20%] -translate-x-1/2 rounded bg-gray-700 p-3 text-white"}," Cancel "),N("div",{onClick:G[6]||(G[6]=se=>p()),class:"fixed left-1/2 top-1/3 min-w-[300px] -translate-x-1/2 rounded-lg bg-gradient-to-t from-pink-700 to-purple-800 p-10 text-center shadow-xl shadow-black"},[N("p",HL,bt(o.value[a.value].front),1),l.value===!0?(xe(),Pe("div",WL,[KL,N("p",GL,bt(o.value[a.value].back),1),QL,o.value[a.value].type_answer?It("",!0):(xe(),Pe("div",YL,[N("button",{onClick:G[1]||(G[1]=fd(se=>b(!1),["stop"])),class:"mr-10 rounded-full bg-gradient-to-br from-pink-500 to-red-900 p-1 shadow-md shadow-black"},ZL),N("button",{onClick:G[2]||(G[2]=fd(se=>b(!0),["stop"])),class:"rounded-full bg-gradient-to-br from-purple-500 to-blue-900 p-1 shadow-md shadow-black"},eM)]))])):It("",!0),o.value[a.value].type_answer===!0&&l.value===!1?(xe(),Pe("div",tM,[nM,Ke(N("input",{ref_key:"answer_field_ref",ref:d,"onUpdate:modelValue":G[3]||(G[3]=se=>u.value=se),type:"text",placeholder:"Type Answer",onKeypress:G[4]||(G[4]=se=>B(se)),class:"my-4 w-[250px] rounded-md bg-gradient-to-r from-purple-500 to-pink-500 p-3 text-center text-2xl text-white placeholder-black shadow shadow-black"},null,544),[[Mt,u.value]]),rM,N("button",{onClick:G[5]||(G[5]=fd(se=>v(),["stop"])),class:"mt-2 rounded-md bg-gradient-to-br from-purple-500 to-blue-900 p-3 text-xl text-white shadow-md shadow-black"}," Check ")])):It("",!0)])])):It("",!0)}};/*! @license DOMPurify 3.0.9 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.0.9/LICENSE */const{entries:v1,setPrototypeOf:Rw,isFrozen:sM,getPrototypeOf:oM,getOwnPropertyDescriptor:aM}=Object;let{freeze:Jn,seal:Vr,create:y1}=Object,{apply:jf,construct:qf}=typeof Reflect<"u"&&Reflect;Jn||(Jn=function(e){return e});Vr||(Vr=function(e){return e});jf||(jf=function(e,n,r){return e.apply(n,r)});qf||(qf=function(e,n){return new e(...n)});const Vu=pr(Array.prototype.forEach),Sw=pr(Array.prototype.pop),Ea=pr(Array.prototype.push),rc=pr(String.prototype.toLowerCase),qd=pr(String.prototype.toString),lM=pr(String.prototype.match),Ta=pr(String.prototype.replace),uM=pr(String.prototype.indexOf),cM=pr(String.prototype.trim),Ar=pr(Object.prototype.hasOwnProperty),lr=pr(RegExp.prototype.test),Ia=hM(TypeError);function pr(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return jf(t,e,r)}}function hM(t){return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return qf(t,n)}}function ft(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:rc;Rw&&Rw(t,null);let r=e.length;for(;r--;){let i=e[r];if(typeof i=="string"){const s=n(i);s!==i&&(sM(e)||(e[r]=s),i=s)}t[i]=!0}return t}function dM(t){for(let e=0;e<t.length;e++)Ar(t,e)||(t[e]=null);return t}function Is(t){const e=y1(null);for(const[n,r]of v1(t))Ar(t,n)&&(Array.isArray(r)?e[n]=dM(r):r&&typeof r=="object"&&r.constructor===Object?e[n]=Is(r):e[n]=r);return e}function Uu(t,e){for(;t!==null;){const r=aM(t,e);if(r){if(r.get)return pr(r.get);if(typeof r.value=="function")return pr(r.value)}t=oM(t)}function n(){return null}return n}const Pw=Jn(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Hd=Jn(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Wd=Jn(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),fM=Jn(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Kd=Jn(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),pM=Jn(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Dw=Jn(["#text"]),Ow=Jn(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Gd=Jn(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Nw=Jn(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Fu=Jn(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),mM=Vr(/\{\{[\w\W]*|[\w\W]*\}\}/gm),gM=Vr(/<%[\w\W]*|[\w\W]*%>/gm),_M=Vr(/\${[\w\W]*}/gm),wM=Vr(/^data-[\-\w.\u00B7-\uFFFF]/),vM=Vr(/^aria-[\-\w]+$/),b1=Vr(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),yM=Vr(/^(?:\w+script|data):/i),bM=Vr(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),k1=Vr(/^html$/i);var Lw=Object.freeze({__proto__:null,MUSTACHE_EXPR:mM,ERB_EXPR:gM,TMPLIT_EXPR:_M,DATA_ATTR:wM,ARIA_ATTR:vM,IS_ALLOWED_URI:b1,IS_SCRIPT_OR_DATA:yM,ATTR_WHITESPACE:bM,DOCTYPE_NAME:k1});const kM=function(){return typeof window>"u"?null:window},EM=function(e,n){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let r=null;const i="data-tt-policy-suffix";n&&n.hasAttribute(i)&&(r=n.getAttribute(i));const s="dompurify"+(r?"#"+r:"");try{return e.createPolicy(s,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+s+" could not be created."),null}};function E1(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:kM();const e=Fe=>E1(Fe);if(e.version="3.0.9",e.removed=[],!t||!t.document||t.document.nodeType!==9)return e.isSupported=!1,e;let{document:n}=t;const r=n,i=r.currentScript,{DocumentFragment:s,HTMLTemplateElement:o,Node:a,Element:l,NodeFilter:u,NamedNodeMap:d=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:f,DOMParser:p,trustedTypes:m}=t,b=l.prototype,v=Uu(b,"cloneNode"),I=Uu(b,"nextSibling"),A=Uu(b,"childNodes"),x=Uu(b,"parentNode");if(typeof o=="function"){const Fe=n.createElement("template");Fe.content&&Fe.content.ownerDocument&&(n=Fe.content.ownerDocument)}let S,D="";const{implementation:B,createNodeIterator:X,createDocumentFragment:G,getElementsByTagName:se}=n,{importNode:re}=r;let Q={};e.isSupported=typeof v1=="function"&&typeof x=="function"&&B&&B.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:le,ERB_EXPR:F,TMPLIT_EXPR:K,DATA_ATTR:T,ARIA_ATTR:ee,IS_SCRIPT_OR_DATA:Y,ATTR_WHITESPACE:M}=Lw;let{IS_ALLOWED_URI:ce}=Lw,ie=null;const he=ft({},[...Pw,...Hd,...Wd,...Kd,...Dw]);let te=null;const J=ft({},[...Ow,...Gd,...Nw,...Fu]);let _e=Object.seal(y1(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ve=null,H=null,Ze=!0,ze=!0,Le=!1,Te=!0,Me=!1,Ie=!1,U=!1,V=!1,w=!1,z=!1,L=!1,C=!0,R=!1;const O="user-content-";let Z=!0,W=!1,$={},ae=null;const fe=ft({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let de=null;const be=ft({},["audio","video","img","source","image","track"]);let Ne=null;const Se=ft({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),qe="http://www.w3.org/1998/Math/MathML",it="http://www.w3.org/2000/svg",ht="http://www.w3.org/1999/xhtml";let Ut=ht,pt=!1,pn=null;const Ot=ft({},[qe,it,ht],qd);let Et=null;const Kn=["application/xhtml+xml","text/html"],Ye="text/html";let jt=null,Nn=null;const kr=n.createElement("form"),yn=function(ne){return ne instanceof RegExp||ne instanceof Function},mr=function(){let ne=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Nn&&Nn===ne)){if((!ne||typeof ne!="object")&&(ne={}),ne=Is(ne),Et=Kn.indexOf(ne.PARSER_MEDIA_TYPE)===-1?Ye:ne.PARSER_MEDIA_TYPE,jt=Et==="application/xhtml+xml"?qd:rc,ie=Ar(ne,"ALLOWED_TAGS")?ft({},ne.ALLOWED_TAGS,jt):he,te=Ar(ne,"ALLOWED_ATTR")?ft({},ne.ALLOWED_ATTR,jt):J,pn=Ar(ne,"ALLOWED_NAMESPACES")?ft({},ne.ALLOWED_NAMESPACES,qd):Ot,Ne=Ar(ne,"ADD_URI_SAFE_ATTR")?ft(Is(Se),ne.ADD_URI_SAFE_ATTR,jt):Se,de=Ar(ne,"ADD_DATA_URI_TAGS")?ft(Is(be),ne.ADD_DATA_URI_TAGS,jt):be,ae=Ar(ne,"FORBID_CONTENTS")?ft({},ne.FORBID_CONTENTS,jt):fe,ve=Ar(ne,"FORBID_TAGS")?ft({},ne.FORBID_TAGS,jt):{},H=Ar(ne,"FORBID_ATTR")?ft({},ne.FORBID_ATTR,jt):{},$=Ar(ne,"USE_PROFILES")?ne.USE_PROFILES:!1,Ze=ne.ALLOW_ARIA_ATTR!==!1,ze=ne.ALLOW_DATA_ATTR!==!1,Le=ne.ALLOW_UNKNOWN_PROTOCOLS||!1,Te=ne.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Me=ne.SAFE_FOR_TEMPLATES||!1,Ie=ne.WHOLE_DOCUMENT||!1,w=ne.RETURN_DOM||!1,z=ne.RETURN_DOM_FRAGMENT||!1,L=ne.RETURN_TRUSTED_TYPE||!1,V=ne.FORCE_BODY||!1,C=ne.SANITIZE_DOM!==!1,R=ne.SANITIZE_NAMED_PROPS||!1,Z=ne.KEEP_CONTENT!==!1,W=ne.IN_PLACE||!1,ce=ne.ALLOWED_URI_REGEXP||b1,Ut=ne.NAMESPACE||ht,_e=ne.CUSTOM_ELEMENT_HANDLING||{},ne.CUSTOM_ELEMENT_HANDLING&&yn(ne.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(_e.tagNameCheck=ne.CUSTOM_ELEMENT_HANDLING.tagNameCheck),ne.CUSTOM_ELEMENT_HANDLING&&yn(ne.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(_e.attributeNameCheck=ne.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),ne.CUSTOM_ELEMENT_HANDLING&&typeof ne.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(_e.allowCustomizedBuiltInElements=ne.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Me&&(ze=!1),z&&(w=!0),$&&(ie=ft({},Dw),te=[],$.html===!0&&(ft(ie,Pw),ft(te,Ow)),$.svg===!0&&(ft(ie,Hd),ft(te,Gd),ft(te,Fu)),$.svgFilters===!0&&(ft(ie,Wd),ft(te,Gd),ft(te,Fu)),$.mathMl===!0&&(ft(ie,Kd),ft(te,Nw),ft(te,Fu))),ne.ADD_TAGS&&(ie===he&&(ie=Is(ie)),ft(ie,ne.ADD_TAGS,jt)),ne.ADD_ATTR&&(te===J&&(te=Is(te)),ft(te,ne.ADD_ATTR,jt)),ne.ADD_URI_SAFE_ATTR&&ft(Ne,ne.ADD_URI_SAFE_ATTR,jt),ne.FORBID_CONTENTS&&(ae===fe&&(ae=Is(ae)),ft(ae,ne.FORBID_CONTENTS,jt)),Z&&(ie["#text"]=!0),Ie&&ft(ie,["html","head","body"]),ie.table&&(ft(ie,["tbody"]),delete ve.tbody),ne.TRUSTED_TYPES_POLICY){if(typeof ne.TRUSTED_TYPES_POLICY.createHTML!="function")throw Ia('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof ne.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Ia('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');S=ne.TRUSTED_TYPES_POLICY,D=S.createHTML("")}else S===void 0&&(S=EM(m,i)),S!==null&&typeof D=="string"&&(D=S.createHTML(""));Jn&&Jn(ne),Nn=ne}},qt=ft({},["mi","mo","mn","ms","mtext"]),Gn=ft({},["foreignobject","desc","title","annotation-xml"]),Ae=ft({},["title","style","font","a","script"]),bn=ft({},[...Hd,...Wd,...fM]),tn=ft({},[...Kd,...pM]),Ur=function(ne){let Ee=x(ne);(!Ee||!Ee.tagName)&&(Ee={namespaceURI:Ut,tagName:"template"});const Oe=rc(ne.tagName),ot=rc(Ee.tagName);return pn[ne.namespaceURI]?ne.namespaceURI===it?Ee.namespaceURI===ht?Oe==="svg":Ee.namespaceURI===qe?Oe==="svg"&&(ot==="annotation-xml"||qt[ot]):!!bn[Oe]:ne.namespaceURI===qe?Ee.namespaceURI===ht?Oe==="math":Ee.namespaceURI===it?Oe==="math"&&Gn[ot]:!!tn[Oe]:ne.namespaceURI===ht?Ee.namespaceURI===it&&!Gn[ot]||Ee.namespaceURI===qe&&!qt[ot]?!1:!tn[Oe]&&(Ae[Oe]||!bn[Oe]):!!(Et==="application/xhtml+xml"&&pn[ne.namespaceURI]):!1},er=function(ne){Ea(e.removed,{element:ne});try{ne.parentNode.removeChild(ne)}catch{ne.remove()}},st=function(ne,Ee){try{Ea(e.removed,{attribute:Ee.getAttributeNode(ne),from:Ee})}catch{Ea(e.removed,{attribute:null,from:Ee})}if(Ee.removeAttribute(ne),ne==="is"&&!te[ne])if(w||z)try{er(Ee)}catch{}else try{Ee.setAttribute(ne,"")}catch{}},dn=function(ne){let Ee=null,Oe=null;if(V)ne="<remove></remove>"+ne;else{const rn=lM(ne,/^[\r\n\t ]+/);Oe=rn&&rn[0]}Et==="application/xhtml+xml"&&Ut===ht&&(ne='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+ne+"</body></html>");const ot=S?S.createHTML(ne):ne;if(Ut===ht)try{Ee=new p().parseFromString(ot,Et)}catch{}if(!Ee||!Ee.documentElement){Ee=B.createDocument(Ut,"template",null);try{Ee.documentElement.innerHTML=pt?D:ot}catch{}}const Jt=Ee.body||Ee.documentElement;return ne&&Oe&&Jt.insertBefore(n.createTextNode(Oe),Jt.childNodes[0]||null),Ut===ht?se.call(Ee,Ie?"html":"body")[0]:Ie?Ee.documentElement:Jt},tr=function(ne){return X.call(ne.ownerDocument||ne,ne,u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT,null)},nn=function(ne){return ne instanceof f&&(typeof ne.nodeName!="string"||typeof ne.textContent!="string"||typeof ne.removeChild!="function"||!(ne.attributes instanceof d)||typeof ne.removeAttribute!="function"||typeof ne.setAttribute!="function"||typeof ne.namespaceURI!="string"||typeof ne.insertBefore!="function"||typeof ne.hasChildNodes!="function")},Xt=function(ne){return typeof a=="function"&&ne instanceof a},vt=function(ne,Ee,Oe){Q[ne]&&Vu(Q[ne],ot=>{ot.call(e,Ee,Oe,Nn)})},di=function(ne){let Ee=null;if(vt("beforeSanitizeElements",ne,null),nn(ne))return er(ne),!0;const Oe=jt(ne.nodeName);if(vt("uponSanitizeElement",ne,{tagName:Oe,allowedTags:ie}),ne.hasChildNodes()&&!Xt(ne.firstElementChild)&&lr(/<[/\w]/g,ne.innerHTML)&&lr(/<[/\w]/g,ne.textContent))return er(ne),!0;if(!ie[Oe]||ve[Oe]){if(!ve[Oe]&&Fr(Oe)&&(_e.tagNameCheck instanceof RegExp&&lr(_e.tagNameCheck,Oe)||_e.tagNameCheck instanceof Function&&_e.tagNameCheck(Oe)))return!1;if(Z&&!ae[Oe]){const ot=x(ne)||ne.parentNode,Jt=A(ne)||ne.childNodes;if(Jt&&ot){const rn=Jt.length;for(let Ht=rn-1;Ht>=0;--Ht)ot.insertBefore(v(Jt[Ht],!0),I(ne))}}return er(ne),!0}return ne instanceof l&&!Ur(ne)||(Oe==="noscript"||Oe==="noembed"||Oe==="noframes")&&lr(/<\/no(script|embed|frames)/i,ne.innerHTML)?(er(ne),!0):(Me&&ne.nodeType===3&&(Ee=ne.textContent,Vu([le,F,K],ot=>{Ee=Ta(Ee,ot," ")}),ne.textContent!==Ee&&(Ea(e.removed,{element:ne.cloneNode()}),ne.textContent=Ee)),vt("afterSanitizeElements",ne,null),!1)},Di=function(ne,Ee,Oe){if(C&&(Ee==="id"||Ee==="name")&&(Oe in n||Oe in kr))return!1;if(!(ze&&!H[Ee]&&lr(T,Ee))){if(!(Ze&&lr(ee,Ee))){if(!te[Ee]||H[Ee]){if(!(Fr(ne)&&(_e.tagNameCheck instanceof RegExp&&lr(_e.tagNameCheck,ne)||_e.tagNameCheck instanceof Function&&_e.tagNameCheck(ne))&&(_e.attributeNameCheck instanceof RegExp&&lr(_e.attributeNameCheck,Ee)||_e.attributeNameCheck instanceof Function&&_e.attributeNameCheck(Ee))||Ee==="is"&&_e.allowCustomizedBuiltInElements&&(_e.tagNameCheck instanceof RegExp&&lr(_e.tagNameCheck,Oe)||_e.tagNameCheck instanceof Function&&_e.tagNameCheck(Oe))))return!1}else if(!Ne[Ee]){if(!lr(ce,Ta(Oe,M,""))){if(!((Ee==="src"||Ee==="xlink:href"||Ee==="href")&&ne!=="script"&&uM(Oe,"data:")===0&&de[ne])){if(!(Le&&!lr(Y,Ta(Oe,M,"")))){if(Oe)return!1}}}}}}return!0},Fr=function(ne){return ne!=="annotation-xml"&&ne.indexOf("-")>0},kt=function(ne){vt("beforeSanitizeAttributes",ne,null);const{attributes:Ee}=ne;if(!Ee)return;const Oe={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:te};let ot=Ee.length;for(;ot--;){const Jt=Ee[ot],{name:rn,namespaceURI:Ht,value:gr}=Jt,$r=jt(rn);let sn=rn==="value"?gr:cM(gr);if(Oe.attrName=$r,Oe.attrValue=sn,Oe.keepAttr=!0,Oe.forceKeepAttr=void 0,vt("uponSanitizeAttribute",ne,Oe),sn=Oe.attrValue,Oe.forceKeepAttr||(st(rn,ne),!Oe.keepAttr))continue;if(!Te&&lr(/\/>/i,sn)){st(rn,ne);continue}Me&&Vu([le,F,K],fi=>{sn=Ta(sn,fi," ")});const ds=jt(ne.nodeName);if(Di(ds,$r,sn)){if(R&&($r==="id"||$r==="name")&&(st(rn,ne),sn=O+sn),S&&typeof m=="object"&&typeof m.getAttributeType=="function"&&!Ht)switch(m.getAttributeType(ds,$r)){case"TrustedHTML":{sn=S.createHTML(sn);break}case"TrustedScriptURL":{sn=S.createScriptURL(sn);break}}try{Ht?ne.setAttributeNS(Ht,rn,sn):ne.setAttribute(rn,sn),Sw(e.removed)}catch{}}}vt("afterSanitizeAttributes",ne,null)},so=function Fe(ne){let Ee=null;const Oe=tr(ne);for(vt("beforeSanitizeShadowDOM",ne,null);Ee=Oe.nextNode();)vt("uponSanitizeShadowNode",Ee,null),!di(Ee)&&(Ee.content instanceof s&&Fe(Ee.content),kt(Ee));vt("afterSanitizeShadowDOM",ne,null)};return e.sanitize=function(Fe){let ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ee=null,Oe=null,ot=null,Jt=null;if(pt=!Fe,pt&&(Fe="<!-->"),typeof Fe!="string"&&!Xt(Fe))if(typeof Fe.toString=="function"){if(Fe=Fe.toString(),typeof Fe!="string")throw Ia("dirty is not a string, aborting")}else throw Ia("toString is not a function");if(!e.isSupported)return Fe;if(U||mr(ne),e.removed=[],typeof Fe=="string"&&(W=!1),W){if(Fe.nodeName){const gr=jt(Fe.nodeName);if(!ie[gr]||ve[gr])throw Ia("root node is forbidden and cannot be sanitized in-place")}}else if(Fe instanceof a)Ee=dn("<!---->"),Oe=Ee.ownerDocument.importNode(Fe,!0),Oe.nodeType===1&&Oe.nodeName==="BODY"||Oe.nodeName==="HTML"?Ee=Oe:Ee.appendChild(Oe);else{if(!w&&!Me&&!Ie&&Fe.indexOf("<")===-1)return S&&L?S.createHTML(Fe):Fe;if(Ee=dn(Fe),!Ee)return w?null:L?D:""}Ee&&V&&er(Ee.firstChild);const rn=tr(W?Fe:Ee);for(;ot=rn.nextNode();)di(ot)||(ot.content instanceof s&&so(ot.content),kt(ot));if(W)return Fe;if(w){if(z)for(Jt=G.call(Ee.ownerDocument);Ee.firstChild;)Jt.appendChild(Ee.firstChild);else Jt=Ee;return(te.shadowroot||te.shadowrootmode)&&(Jt=re.call(r,Jt,!0)),Jt}let Ht=Ie?Ee.outerHTML:Ee.innerHTML;return Ie&&ie["!doctype"]&&Ee.ownerDocument&&Ee.ownerDocument.doctype&&Ee.ownerDocument.doctype.name&&lr(k1,Ee.ownerDocument.doctype.name)&&(Ht="<!DOCTYPE "+Ee.ownerDocument.doctype.name+`>
`+Ht),Me&&Vu([le,F,K],gr=>{Ht=Ta(Ht,gr," ")}),S&&L?S.createHTML(Ht):Ht},e.setConfig=function(){let Fe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};mr(Fe),U=!0},e.clearConfig=function(){Nn=null,U=!1},e.isValidAttribute=function(Fe,ne,Ee){Nn||mr({});const Oe=jt(Fe),ot=jt(ne);return Di(Oe,ot,Ee)},e.addHook=function(Fe,ne){typeof ne=="function"&&(Q[Fe]=Q[Fe]||[],Ea(Q[Fe],ne))},e.removeHook=function(Fe){if(Q[Fe])return Sw(Q[Fe])},e.removeHooks=function(Fe){Q[Fe]&&(Q[Fe]=[])},e.removeAllHooks=function(){Q={}},e}var Qd=E1();function jm(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let io=jm();function T1(t){io=t}const I1=/[&<>"']/,TM=new RegExp(I1.source,"g"),A1=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,IM=new RegExp(A1.source,"g"),AM={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Mw=t=>AM[t];function ur(t,e){if(e){if(I1.test(t))return t.replace(TM,Mw)}else if(A1.test(t))return t.replace(IM,Mw);return t}const xM=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function CM(t){return t.replace(xM,(e,n)=>(n=n.toLowerCase(),n==="colon"?":":n.charAt(0)==="#"?n.charAt(1)==="x"?String.fromCharCode(parseInt(n.substring(2),16)):String.fromCharCode(+n.substring(1)):""))}const RM=/(^|[^\[])\^/g;function Dt(t,e){let n=typeof t=="string"?t:t.source;e=e||"";const r={replace:(i,s)=>{let o=typeof s=="string"?s:s.source;return o=o.replace(RM,"$1"),n=n.replace(i,o),r},getRegex:()=>new RegExp(n,e)};return r}function Vw(t){try{t=encodeURI(t).replace(/%25/g,"%")}catch{return null}return t}const Ha={exec:()=>null};function Uw(t,e){const n=t.replace(/\|/g,(s,o,a)=>{let l=!1,u=o;for(;--u>=0&&a[u]==="\\";)l=!l;return l?"|":" |"}),r=n.split(/ \|/);let i=0;if(r[0].trim()||r.shift(),r.length>0&&!r[r.length-1].trim()&&r.pop(),e)if(r.length>e)r.splice(e);else for(;r.length<e;)r.push("");for(;i<r.length;i++)r[i]=r[i].trim().replace(/\\\|/g,"|");return r}function $u(t,e,n){const r=t.length;if(r===0)return"";let i=0;for(;i<r;){const s=t.charAt(r-i-1);if(s===e&&!n)i++;else if(s!==e&&n)i++;else break}return t.slice(0,r-i)}function SM(t,e){if(t.indexOf(e[1])===-1)return-1;let n=0;for(let r=0;r<t.length;r++)if(t[r]==="\\")r++;else if(t[r]===e[0])n++;else if(t[r]===e[1]&&(n--,n<0))return r;return-1}function Fw(t,e,n,r){const i=e.href,s=e.title?ur(e.title):null,o=t[1].replace(/\\([\[\]])/g,"$1");if(t[0].charAt(0)!=="!"){r.state.inLink=!0;const a={type:"link",raw:n,href:i,title:s,text:o,tokens:r.inlineTokens(o)};return r.state.inLink=!1,a}return{type:"image",raw:n,href:i,title:s,text:ur(o)}}function PM(t,e){const n=t.match(/^(\s+)(?:```)/);if(n===null)return e;const r=n[1];return e.split(`
`).map(i=>{const s=i.match(/^\s+/);if(s===null)return i;const[o]=s;return o.length>=r.length?i.slice(r.length):i}).join(`
`)}class Nc{constructor(e){Kt(this,"options");Kt(this,"rules");Kt(this,"lexer");this.options=e||io}space(e){const n=this.rules.block.newline.exec(e);if(n&&n[0].length>0)return{type:"space",raw:n[0]}}code(e){const n=this.rules.block.code.exec(e);if(n){const r=n[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:n[0],codeBlockStyle:"indented",text:this.options.pedantic?r:$u(r,`
`)}}}fences(e){const n=this.rules.block.fences.exec(e);if(n){const r=n[0],i=PM(r,n[3]||"");return{type:"code",raw:r,lang:n[2]?n[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):n[2],text:i}}}heading(e){const n=this.rules.block.heading.exec(e);if(n){let r=n[2].trim();if(/#$/.test(r)){const i=$u(r,"#");(this.options.pedantic||!i||/ $/.test(i))&&(r=i.trim())}return{type:"heading",raw:n[0],depth:n[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(e){const n=this.rules.block.hr.exec(e);if(n)return{type:"hr",raw:n[0]}}blockquote(e){const n=this.rules.block.blockquote.exec(e);if(n){const r=$u(n[0].replace(/^ *>[ \t]?/gm,""),`
`),i=this.lexer.state.top;this.lexer.state.top=!0;const s=this.lexer.blockTokens(r);return this.lexer.state.top=i,{type:"blockquote",raw:n[0],tokens:s,text:r}}}list(e){let n=this.rules.block.list.exec(e);if(n){let r=n[1].trim();const i=r.length>1,s={type:"list",raw:"",ordered:i,start:i?+r.slice(0,-1):"",loose:!1,items:[]};r=i?`\\d{1,9}\\${r.slice(-1)}`:`\\${r}`,this.options.pedantic&&(r=i?r:"[*+-]");const o=new RegExp(`^( {0,3}${r})((?:[	 ][^\\n]*)?(?:\\n|$))`);let a="",l="",u=!1;for(;e;){let d=!1;if(!(n=o.exec(e))||this.rules.block.hr.test(e))break;a=n[0],e=e.substring(a.length);let f=n[2].split(`
`,1)[0].replace(/^\t+/,A=>" ".repeat(3*A.length)),p=e.split(`
`,1)[0],m=0;this.options.pedantic?(m=2,l=f.trimStart()):(m=n[2].search(/[^ ]/),m=m>4?1:m,l=f.slice(m),m+=n[1].length);let b=!1;if(!f&&/^ *$/.test(p)&&(a+=p+`
`,e=e.substring(p.length+1),d=!0),!d){const A=new RegExp(`^ {0,${Math.min(3,m-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),x=new RegExp(`^ {0,${Math.min(3,m-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),S=new RegExp(`^ {0,${Math.min(3,m-1)}}(?:\`\`\`|~~~)`),D=new RegExp(`^ {0,${Math.min(3,m-1)}}#`);for(;e;){const B=e.split(`
`,1)[0];if(p=B,this.options.pedantic&&(p=p.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),S.test(p)||D.test(p)||A.test(p)||x.test(e))break;if(p.search(/[^ ]/)>=m||!p.trim())l+=`
`+p.slice(m);else{if(b||f.search(/[^ ]/)>=4||S.test(f)||D.test(f)||x.test(f))break;l+=`
`+p}!b&&!p.trim()&&(b=!0),a+=B+`
`,e=e.substring(B.length+1),f=p.slice(m)}}s.loose||(u?s.loose=!0:/\n *\n *$/.test(a)&&(u=!0));let v=null,I;this.options.gfm&&(v=/^\[[ xX]\] /.exec(l),v&&(I=v[0]!=="[ ] ",l=l.replace(/^\[[ xX]\] +/,""))),s.items.push({type:"list_item",raw:a,task:!!v,checked:I,loose:!1,text:l,tokens:[]}),s.raw+=a}s.items[s.items.length-1].raw=a.trimEnd(),s.items[s.items.length-1].text=l.trimEnd(),s.raw=s.raw.trimEnd();for(let d=0;d<s.items.length;d++)if(this.lexer.state.top=!1,s.items[d].tokens=this.lexer.blockTokens(s.items[d].text,[]),!s.loose){const f=s.items[d].tokens.filter(m=>m.type==="space"),p=f.length>0&&f.some(m=>/\n.*\n/.test(m.raw));s.loose=p}if(s.loose)for(let d=0;d<s.items.length;d++)s.items[d].loose=!0;return s}}html(e){const n=this.rules.block.html.exec(e);if(n)return{type:"html",block:!0,raw:n[0],pre:n[1]==="pre"||n[1]==="script"||n[1]==="style",text:n[0]}}def(e){const n=this.rules.block.def.exec(e);if(n){const r=n[1].toLowerCase().replace(/\s+/g," "),i=n[2]?n[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",s=n[3]?n[3].substring(1,n[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):n[3];return{type:"def",tag:r,raw:n[0],href:i,title:s}}}table(e){const n=this.rules.block.table.exec(e);if(!n||!/[:|]/.test(n[2]))return;const r=Uw(n[1]),i=n[2].replace(/^\||\| *$/g,"").split("|"),s=n[3]&&n[3].trim()?n[3].replace(/\n[ \t]*$/,"").split(`
`):[],o={type:"table",raw:n[0],header:[],align:[],rows:[]};if(r.length===i.length){for(const a of i)/^ *-+: *$/.test(a)?o.align.push("right"):/^ *:-+: *$/.test(a)?o.align.push("center"):/^ *:-+ *$/.test(a)?o.align.push("left"):o.align.push(null);for(const a of r)o.header.push({text:a,tokens:this.lexer.inline(a)});for(const a of s)o.rows.push(Uw(a,o.header.length).map(l=>({text:l,tokens:this.lexer.inline(l)})));return o}}lheading(e){const n=this.rules.block.lheading.exec(e);if(n)return{type:"heading",raw:n[0],depth:n[2].charAt(0)==="="?1:2,text:n[1],tokens:this.lexer.inline(n[1])}}paragraph(e){const n=this.rules.block.paragraph.exec(e);if(n){const r=n[1].charAt(n[1].length-1)===`
`?n[1].slice(0,-1):n[1];return{type:"paragraph",raw:n[0],text:r,tokens:this.lexer.inline(r)}}}text(e){const n=this.rules.block.text.exec(e);if(n)return{type:"text",raw:n[0],text:n[0],tokens:this.lexer.inline(n[0])}}escape(e){const n=this.rules.inline.escape.exec(e);if(n)return{type:"escape",raw:n[0],text:ur(n[1])}}tag(e){const n=this.rules.inline.tag.exec(e);if(n)return!this.lexer.state.inLink&&/^<a /i.test(n[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(n[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(n[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(n[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:n[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:n[0]}}link(e){const n=this.rules.inline.link.exec(e);if(n){const r=n[2].trim();if(!this.options.pedantic&&/^</.test(r)){if(!/>$/.test(r))return;const o=$u(r.slice(0,-1),"\\");if((r.length-o.length)%2===0)return}else{const o=SM(n[2],"()");if(o>-1){const l=(n[0].indexOf("!")===0?5:4)+n[1].length+o;n[2]=n[2].substring(0,o),n[0]=n[0].substring(0,l).trim(),n[3]=""}}let i=n[2],s="";if(this.options.pedantic){const o=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(i);o&&(i=o[1],s=o[3])}else s=n[3]?n[3].slice(1,-1):"";return i=i.trim(),/^</.test(i)&&(this.options.pedantic&&!/>$/.test(r)?i=i.slice(1):i=i.slice(1,-1)),Fw(n,{href:i&&i.replace(this.rules.inline.anyPunctuation,"$1"),title:s&&s.replace(this.rules.inline.anyPunctuation,"$1")},n[0],this.lexer)}}reflink(e,n){let r;if((r=this.rules.inline.reflink.exec(e))||(r=this.rules.inline.nolink.exec(e))){const i=(r[2]||r[1]).replace(/\s+/g," "),s=n[i.toLowerCase()];if(!s){const o=r[0].charAt(0);return{type:"text",raw:o,text:o}}return Fw(r,s,r[0],this.lexer)}}emStrong(e,n,r=""){let i=this.rules.inline.emStrongLDelim.exec(e);if(!i||i[3]&&r.match(/[\p{L}\p{N}]/u))return;if(!(i[1]||i[2]||"")||!r||this.rules.inline.punctuation.exec(r)){const o=[...i[0]].length-1;let a,l,u=o,d=0;const f=i[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(f.lastIndex=0,n=n.slice(-1*e.length+o);(i=f.exec(n))!=null;){if(a=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!a)continue;if(l=[...a].length,i[3]||i[4]){u+=l;continue}else if((i[5]||i[6])&&o%3&&!((o+l)%3)){d+=l;continue}if(u-=l,u>0)continue;l=Math.min(l,l+u+d);const p=[...i[0]][0].length,m=e.slice(0,o+i.index+p+l);if(Math.min(o,l)%2){const v=m.slice(1,-1);return{type:"em",raw:m,text:v,tokens:this.lexer.inlineTokens(v)}}const b=m.slice(2,-2);return{type:"strong",raw:m,text:b,tokens:this.lexer.inlineTokens(b)}}}}codespan(e){const n=this.rules.inline.code.exec(e);if(n){let r=n[2].replace(/\n/g," ");const i=/[^ ]/.test(r),s=/^ /.test(r)&&/ $/.test(r);return i&&s&&(r=r.substring(1,r.length-1)),r=ur(r,!0),{type:"codespan",raw:n[0],text:r}}}br(e){const n=this.rules.inline.br.exec(e);if(n)return{type:"br",raw:n[0]}}del(e){const n=this.rules.inline.del.exec(e);if(n)return{type:"del",raw:n[0],text:n[2],tokens:this.lexer.inlineTokens(n[2])}}autolink(e){const n=this.rules.inline.autolink.exec(e);if(n){let r,i;return n[2]==="@"?(r=ur(n[1]),i="mailto:"+r):(r=ur(n[1]),i=r),{type:"link",raw:n[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}url(e){var r;let n;if(n=this.rules.inline.url.exec(e)){let i,s;if(n[2]==="@")i=ur(n[0]),s="mailto:"+i;else{let o;do o=n[0],n[0]=((r=this.rules.inline._backpedal.exec(n[0]))==null?void 0:r[0])??"";while(o!==n[0]);i=ur(n[0]),n[1]==="www."?s="http://"+n[0]:s=n[0]}return{type:"link",raw:n[0],text:i,href:s,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(e){const n=this.rules.inline.text.exec(e);if(n){let r;return this.lexer.state.inRawBlock?r=n[0]:r=ur(n[0]),{type:"text",raw:n[0],text:r}}}}const DM=/^(?: *(?:\n|$))+/,OM=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,NM=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Wl=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,LM=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,x1=/(?:[*+-]|\d{1,9}[.)])/,C1=Dt(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,x1).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),qm=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,MM=/^[^\n]+/,Hm=/(?!\s*\])(?:\\.|[^\[\]\\])+/,VM=Dt(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",Hm).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),UM=Dt(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,x1).getRegex(),Lh="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Wm=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,FM=Dt("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",Wm).replace("tag",Lh).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),R1=Dt(qm).replace("hr",Wl).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Lh).getRegex(),$M=Dt(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",R1).getRegex(),Km={blockquote:$M,code:OM,def:VM,fences:NM,heading:LM,hr:Wl,html:FM,lheading:C1,list:UM,newline:DM,paragraph:R1,table:Ha,text:MM},$w=Dt("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Wl).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Lh).getRegex(),BM={...Km,table:$w,paragraph:Dt(qm).replace("hr",Wl).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",$w).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Lh).getRegex()},zM={...Km,html:Dt(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Wm).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Ha,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Dt(qm).replace("hr",Wl).replace("heading",` *#{1,6} *[^
]`).replace("lheading",C1).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},S1=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,jM=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,P1=/^( {2,}|\\)\n(?!\s*$)/,qM=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Kl="\\p{P}\\p{S}",HM=Dt(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,Kl).getRegex(),WM=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,KM=Dt(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,Kl).getRegex(),GM=Dt("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,Kl).getRegex(),QM=Dt("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,Kl).getRegex(),YM=Dt(/\\([punct])/,"gu").replace(/punct/g,Kl).getRegex(),XM=Dt(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),ZM=Dt(Wm).replace("(?:-->|$)","-->").getRegex(),JM=Dt("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",ZM).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Lc=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,e4=Dt(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",Lc).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),D1=Dt(/^!?\[(label)\]\[(ref)\]/).replace("label",Lc).replace("ref",Hm).getRegex(),O1=Dt(/^!?\[(ref)\](?:\[\])?/).replace("ref",Hm).getRegex(),t4=Dt("reflink|nolink(?!\\()","g").replace("reflink",D1).replace("nolink",O1).getRegex(),Gm={_backpedal:Ha,anyPunctuation:YM,autolink:XM,blockSkip:WM,br:P1,code:jM,del:Ha,emStrongLDelim:KM,emStrongRDelimAst:GM,emStrongRDelimUnd:QM,escape:S1,link:e4,nolink:O1,punctuation:HM,reflink:D1,reflinkSearch:t4,tag:JM,text:qM,url:Ha},n4={...Gm,link:Dt(/^!?\[(label)\]\((.*?)\)/).replace("label",Lc).getRegex(),reflink:Dt(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Lc).getRegex()},Hf={...Gm,escape:Dt(S1).replace("])","~|])").getRegex(),url:Dt(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},r4={...Hf,br:Dt(P1).replace("{2,}","*").getRegex(),text:Dt(Hf.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Bu={normal:Km,gfm:BM,pedantic:zM},Aa={normal:Gm,gfm:Hf,breaks:r4,pedantic:n4};class ei{constructor(e){Kt(this,"tokens");Kt(this,"options");Kt(this,"state");Kt(this,"tokenizer");Kt(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||io,this.options.tokenizer=this.options.tokenizer||new Nc,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const n={block:Bu.normal,inline:Aa.normal};this.options.pedantic?(n.block=Bu.pedantic,n.inline=Aa.pedantic):this.options.gfm&&(n.block=Bu.gfm,this.options.breaks?n.inline=Aa.breaks:n.inline=Aa.gfm),this.tokenizer.rules=n}static get rules(){return{block:Bu,inline:Aa}}static lex(e,n){return new ei(n).lex(e)}static lexInline(e,n){return new ei(n).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,`
`),this.blockTokens(e,this.tokens);for(let n=0;n<this.inlineQueue.length;n++){const r=this.inlineQueue[n];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,n=[]){this.options.pedantic?e=e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e=e.replace(/^( *)(\t+)/gm,(a,l,u)=>l+"    ".repeat(u.length));let r,i,s,o;for(;e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>(r=a.call({lexer:this},e,n))?(e=e.substring(r.raw.length),n.push(r),!0):!1))){if(r=this.tokenizer.space(e)){e=e.substring(r.raw.length),r.raw.length===1&&n.length>0?n[n.length-1].raw+=`
`:n.push(r);continue}if(r=this.tokenizer.code(e)){e=e.substring(r.raw.length),i=n[n.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+r.raw,i.text+=`
`+r.text,this.inlineQueue[this.inlineQueue.length-1].src=i.text):n.push(r);continue}if(r=this.tokenizer.fences(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.heading(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.hr(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.blockquote(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.list(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.html(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.def(e)){e=e.substring(r.raw.length),i=n[n.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+r.raw,i.text+=`
`+r.raw,this.inlineQueue[this.inlineQueue.length-1].src=i.text):this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title});continue}if(r=this.tokenizer.table(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.lheading(e)){e=e.substring(r.raw.length),n.push(r);continue}if(s=e,this.options.extensions&&this.options.extensions.startBlock){let a=1/0;const l=e.slice(1);let u;this.options.extensions.startBlock.forEach(d=>{u=d.call({lexer:this},l),typeof u=="number"&&u>=0&&(a=Math.min(a,u))}),a<1/0&&a>=0&&(s=e.substring(0,a+1))}if(this.state.top&&(r=this.tokenizer.paragraph(s))){i=n[n.length-1],o&&i.type==="paragraph"?(i.raw+=`
`+r.raw,i.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):n.push(r),o=s.length!==e.length,e=e.substring(r.raw.length);continue}if(r=this.tokenizer.text(e)){e=e.substring(r.raw.length),i=n[n.length-1],i&&i.type==="text"?(i.raw+=`
`+r.raw,i.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):n.push(r);continue}if(e){const a="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(a);break}else throw new Error(a)}}return this.state.top=!0,n}inline(e,n=[]){return this.inlineQueue.push({src:e,tokens:n}),n}inlineTokens(e,n=[]){let r,i,s,o=e,a,l,u;if(this.tokens.links){const d=Object.keys(this.tokens.links);if(d.length>0)for(;(a=this.tokenizer.rules.inline.reflinkSearch.exec(o))!=null;)d.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(a=this.tokenizer.rules.inline.blockSkip.exec(o))!=null;)o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(a=this.tokenizer.rules.inline.anyPunctuation.exec(o))!=null;)o=o.slice(0,a.index)+"++"+o.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;e;)if(l||(u=""),l=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(d=>(r=d.call({lexer:this},e,n))?(e=e.substring(r.raw.length),n.push(r),!0):!1))){if(r=this.tokenizer.escape(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.tag(e)){e=e.substring(r.raw.length),i=n[n.length-1],i&&r.type==="text"&&i.type==="text"?(i.raw+=r.raw,i.text+=r.text):n.push(r);continue}if(r=this.tokenizer.link(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(r.raw.length),i=n[n.length-1],i&&r.type==="text"&&i.type==="text"?(i.raw+=r.raw,i.text+=r.text):n.push(r);continue}if(r=this.tokenizer.emStrong(e,o,u)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.codespan(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.br(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.del(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.autolink(e)){e=e.substring(r.raw.length),n.push(r);continue}if(!this.state.inLink&&(r=this.tokenizer.url(e))){e=e.substring(r.raw.length),n.push(r);continue}if(s=e,this.options.extensions&&this.options.extensions.startInline){let d=1/0;const f=e.slice(1);let p;this.options.extensions.startInline.forEach(m=>{p=m.call({lexer:this},f),typeof p=="number"&&p>=0&&(d=Math.min(d,p))}),d<1/0&&d>=0&&(s=e.substring(0,d+1))}if(r=this.tokenizer.inlineText(s)){e=e.substring(r.raw.length),r.raw.slice(-1)!=="_"&&(u=r.raw.slice(-1)),l=!0,i=n[n.length-1],i&&i.type==="text"?(i.raw+=r.raw,i.text+=r.text):n.push(r);continue}if(e){const d="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(d);break}else throw new Error(d)}}return n}}class Mc{constructor(e){Kt(this,"options");this.options=e||io}code(e,n,r){var s;const i=(s=(n||"").match(/^\S*/))==null?void 0:s[0];return e=e.replace(/\n$/,"")+`
`,i?'<pre><code class="language-'+ur(i)+'">'+(r?e:ur(e,!0))+`</code></pre>
`:"<pre><code>"+(r?e:ur(e,!0))+`</code></pre>
`}blockquote(e){return`<blockquote>
${e}</blockquote>
`}html(e,n){return e}heading(e,n,r){return`<h${n}>${e}</h${n}>
`}hr(){return`<hr>
`}list(e,n,r){const i=n?"ol":"ul",s=n&&r!==1?' start="'+r+'"':"";return"<"+i+s+`>
`+e+"</"+i+`>
`}listitem(e,n,r){return`<li>${e}</li>
`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph(e){return`<p>${e}</p>
`}table(e,n){return n&&(n=`<tbody>${n}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+n+`</table>
`}tablerow(e){return`<tr>
${e}</tr>
`}tablecell(e,n){const r=n.header?"th":"td";return(n.align?`<${r} align="${n.align}">`:`<${r}>`)+e+`</${r}>
`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return"<br>"}del(e){return`<del>${e}</del>`}link(e,n,r){const i=Vw(e);if(i===null)return r;e=i;let s='<a href="'+e+'"';return n&&(s+=' title="'+n+'"'),s+=">"+r+"</a>",s}image(e,n,r){const i=Vw(e);if(i===null)return r;e=i;let s=`<img src="${e}" alt="${r}"`;return n&&(s+=` title="${n}"`),s+=">",s}text(e){return e}}class Qm{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,n,r){return""+r}image(e,n,r){return""+r}br(){return""}}class ti{constructor(e){Kt(this,"options");Kt(this,"renderer");Kt(this,"textRenderer");this.options=e||io,this.options.renderer=this.options.renderer||new Mc,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new Qm}static parse(e,n){return new ti(n).parse(e)}static parseInline(e,n){return new ti(n).parseInline(e)}parse(e,n=!0){let r="";for(let i=0;i<e.length;i++){const s=e[i];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]){const o=s,a=this.options.extensions.renderers[o.type].call({parser:this},o);if(a!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(o.type)){r+=a||"";continue}}switch(s.type){case"space":continue;case"hr":{r+=this.renderer.hr();continue}case"heading":{const o=s;r+=this.renderer.heading(this.parseInline(o.tokens),o.depth,CM(this.parseInline(o.tokens,this.textRenderer)));continue}case"code":{const o=s;r+=this.renderer.code(o.text,o.lang,!!o.escaped);continue}case"table":{const o=s;let a="",l="";for(let d=0;d<o.header.length;d++)l+=this.renderer.tablecell(this.parseInline(o.header[d].tokens),{header:!0,align:o.align[d]});a+=this.renderer.tablerow(l);let u="";for(let d=0;d<o.rows.length;d++){const f=o.rows[d];l="";for(let p=0;p<f.length;p++)l+=this.renderer.tablecell(this.parseInline(f[p].tokens),{header:!1,align:o.align[p]});u+=this.renderer.tablerow(l)}r+=this.renderer.table(a,u);continue}case"blockquote":{const o=s,a=this.parse(o.tokens);r+=this.renderer.blockquote(a);continue}case"list":{const o=s,a=o.ordered,l=o.start,u=o.loose;let d="";for(let f=0;f<o.items.length;f++){const p=o.items[f],m=p.checked,b=p.task;let v="";if(p.task){const I=this.renderer.checkbox(!!m);u?p.tokens.length>0&&p.tokens[0].type==="paragraph"?(p.tokens[0].text=I+" "+p.tokens[0].text,p.tokens[0].tokens&&p.tokens[0].tokens.length>0&&p.tokens[0].tokens[0].type==="text"&&(p.tokens[0].tokens[0].text=I+" "+p.tokens[0].tokens[0].text)):p.tokens.unshift({type:"text",text:I+" "}):v+=I+" "}v+=this.parse(p.tokens,u),d+=this.renderer.listitem(v,b,!!m)}r+=this.renderer.list(d,a,l);continue}case"html":{const o=s;r+=this.renderer.html(o.text,o.block);continue}case"paragraph":{const o=s;r+=this.renderer.paragraph(this.parseInline(o.tokens));continue}case"text":{let o=s,a=o.tokens?this.parseInline(o.tokens):o.text;for(;i+1<e.length&&e[i+1].type==="text";)o=e[++i],a+=`
`+(o.tokens?this.parseInline(o.tokens):o.text);r+=n?this.renderer.paragraph(a):a;continue}default:{const o='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return r}parseInline(e,n){n=n||this.renderer;let r="";for(let i=0;i<e.length;i++){const s=e[i];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]){const o=this.options.extensions.renderers[s.type].call({parser:this},s);if(o!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type)){r+=o||"";continue}}switch(s.type){case"escape":{const o=s;r+=n.text(o.text);break}case"html":{const o=s;r+=n.html(o.text);break}case"link":{const o=s;r+=n.link(o.href,o.title,this.parseInline(o.tokens,n));break}case"image":{const o=s;r+=n.image(o.href,o.title,o.text);break}case"strong":{const o=s;r+=n.strong(this.parseInline(o.tokens,n));break}case"em":{const o=s;r+=n.em(this.parseInline(o.tokens,n));break}case"codespan":{const o=s;r+=n.codespan(o.text);break}case"br":{r+=n.br();break}case"del":{const o=s;r+=n.del(this.parseInline(o.tokens,n));break}case"text":{const o=s;r+=n.text(o.text);break}default:{const o='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return r}}class Wa{constructor(e){Kt(this,"options");this.options=e||io}preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}}Kt(Wa,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));var yl,Wf,Vc,N1;class i4{constructor(...e){od(this,yl);od(this,Vc);Kt(this,"defaults",jm());Kt(this,"options",this.setOptions);Kt(this,"parse",pu(this,yl,Wf).call(this,ei.lex,ti.parse));Kt(this,"parseInline",pu(this,yl,Wf).call(this,ei.lexInline,ti.parseInline));Kt(this,"Parser",ti);Kt(this,"Renderer",Mc);Kt(this,"TextRenderer",Qm);Kt(this,"Lexer",ei);Kt(this,"Tokenizer",Nc);Kt(this,"Hooks",Wa);this.use(...e)}walkTokens(e,n){var i,s;let r=[];for(const o of e)switch(r=r.concat(n.call(this,o)),o.type){case"table":{const a=o;for(const l of a.header)r=r.concat(this.walkTokens(l.tokens,n));for(const l of a.rows)for(const u of l)r=r.concat(this.walkTokens(u.tokens,n));break}case"list":{const a=o;r=r.concat(this.walkTokens(a.items,n));break}default:{const a=o;(s=(i=this.defaults.extensions)==null?void 0:i.childTokens)!=null&&s[a.type]?this.defaults.extensions.childTokens[a.type].forEach(l=>{const u=a[l].flat(1/0);r=r.concat(this.walkTokens(u,n))}):a.tokens&&(r=r.concat(this.walkTokens(a.tokens,n)))}}return r}use(...e){const n=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(r=>{const i={...r};if(i.async=this.defaults.async||i.async||!1,r.extensions&&(r.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if("renderer"in s){const o=n.renderers[s.name];o?n.renderers[s.name]=function(...a){let l=s.renderer.apply(this,a);return l===!1&&(l=o.apply(this,a)),l}:n.renderers[s.name]=s.renderer}if("tokenizer"in s){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const o=n[s.level];o?o.unshift(s.tokenizer):n[s.level]=[s.tokenizer],s.start&&(s.level==="block"?n.startBlock?n.startBlock.push(s.start):n.startBlock=[s.start]:s.level==="inline"&&(n.startInline?n.startInline.push(s.start):n.startInline=[s.start]))}"childTokens"in s&&s.childTokens&&(n.childTokens[s.name]=s.childTokens)}),i.extensions=n),r.renderer){const s=this.defaults.renderer||new Mc(this.defaults);for(const o in r.renderer){if(!(o in s))throw new Error(`renderer '${o}' does not exist`);if(o==="options")continue;const a=o,l=r.renderer[a],u=s[a];s[a]=(...d)=>{let f=l.apply(s,d);return f===!1&&(f=u.apply(s,d)),f||""}}i.renderer=s}if(r.tokenizer){const s=this.defaults.tokenizer||new Nc(this.defaults);for(const o in r.tokenizer){if(!(o in s))throw new Error(`tokenizer '${o}' does not exist`);if(["options","rules","lexer"].includes(o))continue;const a=o,l=r.tokenizer[a],u=s[a];s[a]=(...d)=>{let f=l.apply(s,d);return f===!1&&(f=u.apply(s,d)),f}}i.tokenizer=s}if(r.hooks){const s=this.defaults.hooks||new Wa;for(const o in r.hooks){if(!(o in s))throw new Error(`hook '${o}' does not exist`);if(o==="options")continue;const a=o,l=r.hooks[a],u=s[a];Wa.passThroughHooks.has(o)?s[a]=d=>{if(this.defaults.async)return Promise.resolve(l.call(s,d)).then(p=>u.call(s,p));const f=l.call(s,d);return u.call(s,f)}:s[a]=(...d)=>{let f=l.apply(s,d);return f===!1&&(f=u.apply(s,d)),f}}i.hooks=s}if(r.walkTokens){const s=this.defaults.walkTokens,o=r.walkTokens;i.walkTokens=function(a){let l=[];return l.push(o.call(this,a)),s&&(l=l.concat(s.call(this,a))),l}}this.defaults={...this.defaults,...i}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,n){return ei.lex(e,n??this.defaults)}parser(e,n){return ti.parse(e,n??this.defaults)}}yl=new WeakSet,Wf=function(e,n){return(r,i)=>{const s={...i},o={...this.defaults,...s};this.defaults.async===!0&&s.async===!1&&(o.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),o.async=!0);const a=pu(this,Vc,N1).call(this,!!o.silent,!!o.async);if(typeof r>"u"||r===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof r!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(r)+", string expected"));if(o.hooks&&(o.hooks.options=o),o.async)return Promise.resolve(o.hooks?o.hooks.preprocess(r):r).then(l=>e(l,o)).then(l=>o.hooks?o.hooks.processAllTokens(l):l).then(l=>o.walkTokens?Promise.all(this.walkTokens(l,o.walkTokens)).then(()=>l):l).then(l=>n(l,o)).then(l=>o.hooks?o.hooks.postprocess(l):l).catch(a);try{o.hooks&&(r=o.hooks.preprocess(r));let l=e(r,o);o.hooks&&(l=o.hooks.processAllTokens(l)),o.walkTokens&&this.walkTokens(l,o.walkTokens);let u=n(l,o);return o.hooks&&(u=o.hooks.postprocess(u)),u}catch(l){return a(l)}}},Vc=new WeakSet,N1=function(e,n){return r=>{if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,e){const i="<p>An error occurred:</p><pre>"+ur(r.message+"",!0)+"</pre>";return n?Promise.resolve(i):i}if(n)return Promise.reject(r);throw r}};const Xs=new i4;function Ct(t,e){return Xs.parse(t,e)}Ct.options=Ct.setOptions=function(t){return Xs.setOptions(t),Ct.defaults=Xs.defaults,T1(Ct.defaults),Ct};Ct.getDefaults=jm;Ct.defaults=io;Ct.use=function(...t){return Xs.use(...t),Ct.defaults=Xs.defaults,T1(Ct.defaults),Ct};Ct.walkTokens=function(t,e){return Xs.walkTokens(t,e)};Ct.parseInline=Xs.parseInline;Ct.Parser=ti;Ct.parser=ti.parse;Ct.Renderer=Mc;Ct.TextRenderer=Qm;Ct.Lexer=ei;Ct.lexer=ei.lex;Ct.Tokenizer=Nc;Ct.Hooks=Wa;Ct.parse=Ct;Ct.options;Ct.setOptions;Ct.use;Ct.walkTokens;Ct.parseInline;ti.parse;ei.lex;const s4={key:0,class:"fixed bottom-0 left-0 right-0 top-0 z-50 bg-gradient-to-t from-pink-700 to-purple-800 p-10 text-center shadow-xl shadow-black"},o4={class:"max-h-[80vh] overflow-auto"},a4=["innerHTML"],l4={key:0},u4=N("hr",{class:"mx-3 rounded-full border-2 border-white"},null,-1),c4=["innerHTML"],h4=N("br",null,null,-1),d4={key:1},f4=N("hr",{class:"mx-3 rounded-full border-2 border-white"},null,-1),p4={class:"absolute bottom-0 left-1/2 w-full -translate-x-1/2 text-5xl"},m4={key:0},g4={key:1},_4={key:0,class:"flex"},w4={key:1},v4={__name:"LargeReview",props:["auth","db","timeDuration","timeMultiplier"],emits:["reselectDeck"],setup(t,{expose:e,emit:n}){const r=t;Rt("space","large_review",function(Q,le){Q.preventDefault(),v()}),Rt("space","large_yes_no",function(Q,le){Q.preventDefault(),A(!0)}),Rt("c","large_yes_no",function(Q,le){Q.preventDefault(),A(!1)}),Rt("space","large_check_type_ans",function(Q,le){Q.preventDefault(),I()}),Rt("enter","large_check_type_ans",function(Q,le){Q.preventDefault(),I()});const i=we(!1),s=we(""),o=we([]),a=we(0),l=we(!1),u=we(""),d=we(null),f=we(null),p=we(null);let m=!1;function b(Q,le,F){le.forEach(K=>{(K.front.split(`
`)[0]==="[markdown]"||K.front.split(`
`)[0]==="[md]")&&(K.front=K.front.split(`
`).slice(1).join(`
`),K.front=Qd.sanitize(Ct.parse(K.front))),(K.back.split(`
`)[0]==="[markdown]"||K.back.split(`
`)[0]==="[md]")&&(K.back=K.back.split(`
`).slice(1).join(`
`),K.back=Ct.parse(K.back)),K.front=Qd.sanitize(K.front),K.back=Qd.sanitize(K.back)}),s.value=Q,o.value=le,a.value=B(0,o.value.length),m=F,i.value=!0,Rt.setScope("large_review"),document.body.style.overflow="hidden",o.value[a.value].type_answer&&S(),m&&D(!0)}function v(){l.value=!0,Rt.setScope("large_yes_no"),m&&D(!1)}function I(){const Q=o.value[a.value].back.replace(/\[.*?\]/gs,"");u.value===Q?(A(!0),u.value=""):(A(!1),u.value="")}function A(Q){const le=new Date,F=new Date(le.getFullYear(),le.getMonth(),le.getDate());if(Q===!0)if(o.value[a.value].streak===0)o.value[a.value].streak=.5,se(!0);else if(o.value[a.value].streak===.5){let K=new Date(F);K.setDate(K.getDate()+1),$t(ct(r.db,`users/${r.auth.currentUser.uid}/decks/${s.value}/cards/${o.value[a.value].id}`),{next_review:nt.fromDate(K),streak:1}),G()}else{const K=Math.pow(r.timeMultiplier,o.value[a.value].streak)*r.timeDuration,T=Math.floor(K/24);let ee=new Date(F);ee.setDate(ee.getDate()+T),$t(ct(r.db,`users/${r.auth.currentUser.uid}/decks/${s.value}/cards/${o.value[a.value].id}`),{next_review:nt.fromDate(ee),streak:o.value[a.value].streak+1}),G()}else o.value[a.value].streak!==0&&o.value[a.value].streak!==.5&&$t(ct(r.db,`users/${r.auth.currentUser.uid}/decks/${s.value}/cards/${o.value[a.value].id}`),{next_review:nt.fromDate(new Date),streak:0}),o.value[a.value].streak=0,se(!0)}function x(){l.value=!0,Rt.setScope("large_check_type_ans")}async function S(){await ts(),d.value.focus()}async function D(Q){await ts();let le=null,F=null;Q?(le=f.value.querySelector("audio"),F=f.value.querySelector("video")):(le=p.value.querySelector("audio"),F=p.value.querySelector("video")),F!==null?F.play():le!==null&&le.play()}function B(Q,le){return Math.floor(Math.random()*(le-Q))+Q}function X(){i.value=!1,l.value=!1,document.body.style.overflow="auto",Rt.setScope("all"),n("reselectDeck")}function G(){o.value.splice(a.value,1),o.value.length!==0?se(!1):(X(),Qe.fire({title:"You've finished all reviews for today.",text:"Come back tomorrow for more.",color:"black",icon:"success"}))}function se(Q){if(Q)if(o.value.length!==1){let le=B(0,o.value.length);for(;le===a.value;)le=B(0,o.value.length);a.value=le}else a.value=0;else a.value=B(0,o.value.length);l.value=!1,Rt.setScope("large_review"),o.value.length>0&&(o.value[a.value].type_answer&&S(),m&&D(!0))}function re(){d.value.style.height="auto",d.value.style.height=d.value.scrollHeight+"px"}return e({reviewCards:b}),(Q,le)=>i.value?(xe(),Pe("div",s4,[N("button",{onClick:le[0]||(le[0]=F=>X()),class:"fixed left-5 top-5 rounded bg-gray-700 p-3 text-white"}," Cancel "),N("div",o4,[N("div",{innerHTML:o.value[a.value].front,ref_key:"front_ref",ref:f,class:"prose mx-8 my-4 inline-block whitespace-pre-wrap text-2xl text-white prose-headings:text-inherit prose-a:text-blue-500 prose-blockquote:text-inherit prose-strong:text-inherit prose-code:text-inherit prose-li:marker:text-inherit prose-img:m-auto prose-img:block prose-video:m-auto prose-video:block"},null,8,a4),l.value===!0?(xe(),Pe("div",l4,[u4,N("div",{innerHTML:o.value[a.value].back,ref_key:"back_ref",ref:p,class:"prose mx-8 my-4 inline-block whitespace-pre-wrap text-2xl text-white prose-headings:text-inherit prose-a:text-blue-500 prose-blockquote:text-inherit prose-strong:text-inherit prose-code:text-inherit prose-li:marker:text-inherit prose-img:m-auto prose-img:block prose-video:m-auto prose-video:block"},null,8,c4),h4])):It("",!0),o.value[a.value].type_answer===!0&&l.value===!1?(xe(),Pe("div",d4,[f4,Ke(N("textarea",{ref_key:"answer_field_ref",ref:d,"onUpdate:modelValue":le[1]||(le[1]=F=>u.value=F),onInput:le[2]||(le[2]=F=>re()),placeholder:"Type Answer",class:"my-4 min-h-[125px] w-full resize-none rounded-md bg-gradient-to-r from-purple-500 to-pink-500 p-3 text-center text-2xl text-white placeholder-black shadow shadow-black"},null,544),[[Mt,u.value]])])):It("",!0)]),N("div",p4,[l.value?(xe(),Pe("div",g4,[o.value[a.value].type_answer?(xe(),Pe("div",w4,[N("button",{onClick:le[7]||(le[7]=F=>I()),class:"w-full bg-gray-300 p-3"}," Next ")])):(xe(),Pe("div",_4,[N("button",{onClick:le[5]||(le[5]=F=>A(!1)),class:"w-full flex-1 bg-red-400 p-3"}," Wrong "),N("button",{onClick:le[6]||(le[6]=F=>A(!0)),class:"w-full flex-1 bg-green-400 p-3"}," Correct ")]))])):(xe(),Pe("div",m4,[o.value[a.value].type_answer?(xe(),Pe("button",{key:1,onClick:le[4]||(le[4]=F=>x()),class:"w-full bg-gray-400 p-3"}," Check ")):(xe(),Pe("button",{key:0,onClick:le[3]||(le[3]=F=>v()),class:"w-full bg-gray-400 p-3"}," Show Back "))]))])])):It("",!0)}},y4={class:"fixed bottom-0 left-0 right-0 top-0 z-50 bg-gray-600 bg-opacity-50"},b4={class:"fixed left-1/2 top-1/2 max-h-screen w-[500px] max-w-[80vw] -translate-x-1/2 -translate-y-1/2 overflow-auto rounded-md bg-orange-300 px-3 py-10 text-center text-xl shadow-lg shadow-black"},k4=Pv('<div><p class="text-3xl">Update 0.7.2</p><p> This update introduces the capability to import media like images and audio files, while also offering the option to enable autoplay for both audio and video content during review sessions. Additionally, various minor issues have been addressed and resolved. To ensure smooth functionality, we kindly ask users to navigate to the settings of each deck and click the &#39;Update&#39; button. This step is crucial for seamlessly integrating the new autoplay_media feature </p></div><div class="mt-5"><p class="text-3xl">Update 0.7.1</p><p> This update addresses several issues related to deck importing, including resolving scaling problems on smaller screens and enabling smooth importing of decks with multiple field lists. Additionally, it introduces a new feature: random sort order. Unlike traditional random sorting methods, this feature ensures an enhanced user experience by providing a unique random order for each deck. It guarantees that no cards are duplicated within a deck, as it generates random numbers based on the deck ID </p></div><div class="mt-5"><p class="text-3xl">Update 0.7.0</p><div class="mt-5"><p class="text-2xl">Summary</p><p> This update introduces two significant features: Large Cards and Anki Import. Large Cards offer users increased customization options with support for HTML and Markdown formats, enabling seamless integration of multimedia elements. With the addition of Anki Import functionality, users can effortlessly incorporate premade decks into their study routines, enhancing versatility and accessibility. </p></div><div class="mt-5"><p class="text-2xl">Changelog</p><ul class="ml-5 list-disc"><li><strong>Anki Import Added:</strong> Implemented Anki Import feature for seamless deck integration. Find premade decks at <a href="https://ankiweb.net/shared/decks" class="text-blue-900">AnkiWeb</a>. </li><li><strong>Large Cards Added:</strong> Introduced Large Cards supporting HTML and Markdown formats for enhanced customization and multimedia integration. </li><li><strong>Deck Card Editor Update:</strong> Enhanced search functionality by querying firestore instead of local storage and introduced pagination. </li><li><strong>Alerts Switched:</strong> Replaced regular alerts with sweetalert2 library. </li><li><strong>Improved Settings:</strong> Refined the settings interface and relocated the DeckMigration button. </li><li><strong>Fixed Background Scrolling:</strong> Prevented background scrolling when a menu is open. </li><li><strong>Review Issues Fix:</strong> Addressed various review-related issues. </li><li><strong>Total Cards Display:</strong> Added total cards text feature. </li></ul></div></div>',3),E4={__name:"Changelog",emits:["close"],setup(t,{emit:e}){return(n,r)=>(xe(),Pe("div",y4,[N("div",b4,[N("button",{onClick:r[0]||(r[0]=i=>n.$emit("close")),class:"mb-5 rounded-md bg-gray-500 p-2 shadow shadow-black"}," Close "),k4])]))}},T4={key:0,class:"absolute left-5 top-5"},I4={key:1,class:"fixed bottom-0 left-0 right-0 top-0 z-50 bg-gray-600 bg-opacity-50"},A4={class:"fixed left-1/2 top-1/2 inline-block -translate-x-1/2 -translate-y-1/2 rounded-md bg-yellow-300 p-3 text-center shadow-lg shadow-black"},x4=N("p",{class:"text-lg"},"Deck Migration Tool",-1),C4=N("p",null," This tool adds a required new_card field to all new cards in your deck. ",-1),R4=N("option",{selected:"",disabled:"",value:""},"Select Deck",-1),S4=["value"],P4=N("br",null,null,-1),D4={key:0,class:"mt-3 rounded bg-amber-400 p-3"},O4={__name:"DeckMigration",props:["auth","db"],emits:["loadDecks"],setup(t,{expose:e,emit:n}){const r=t,i=we(!1),s=we([]),o=we(null),a=we("");async function l(){s.value=[],(await Yr(Lt(r.db,`users/${r.auth.currentUser.uid}/decks`))).forEach(p=>{s.value.push({name:p.data().name,id:p.id})}),i.value=!0,document.body.style.overflow="hidden"}function u(){i.value=!1,document.body.style.overflow="auto"}async function d(){console.log(o.value),a.value="Getting Old Deck";const f=await Qs(ct(r.db,`users/${r.auth.currentUser.uid}/decks/${o.value}`));a.value="Creating New Deck";const p=await li(Lt(r.db,`users/${r.auth.currentUser.uid}/decks`),{name:f.data().name+"(new)",new_cards_today:f.data().new_cards_today,last_update:f.data().last_update,index:f.data().index,new_cards_per_day:f.data().new_cards_per_day,large_cards:f.data().large_cards}).catch(v=>{Qe.fire({title:v,color:"black",icon:"error"})});a.value="Getting Old Cards";const m=await Yr(Lt(r.db,`users/${r.auth.currentUser.uid}/decks/${o.value}/cards`)),b=m.size;m.forEach(async(v,I)=>{a.value="Creating New Cards"+I+"/"+b,await li(Lt(r.db,`users/${r.auth.currentUser.uid}/decks/${p.id}/cards/`),{front:v.data().front,back:v.data().back,streak:v.data().streak,next_review:v.data().next_review,type_answer:!!v.data().type_answer,new_card:v.data().streak===-1}).catch(A=>{Qe.fire({title:A,color:"black",icon:"error"})})}),a.value="Done",n("loadDecks")}return e({openMigrate:l}),(f,p)=>(xe(),Pe(Zt,null,[t.auth!==null&&t.auth.currentUser!==null?(xe(),Pe("div",T4)):It("",!0),i.value?(xe(),Pe("div",I4,[N("div",A4,[N("button",{onClick:p[0]||(p[0]=m=>u()),class:"rounded bg-red-400 p-3"}," Close "),x4,C4,Ke(N("select",{"onUpdate:modelValue":p[1]||(p[1]=m=>o.value=m),class:"mt-3 rounded bg-orange-300 p-3"},[R4,(xe(!0),Pe(Zt,null,Cr(s.value,m=>(xe(),Pe("option",{value:m.id},bt(m.name),9,S4))),256))],512),[[yi,o.value]]),P4,N("div",null,[o.value?(xe(),Pe("button",{key:0,onClick:p[2]||(p[2]=m=>d()),class:"mt-3 rounded bg-blue-500 p-3"}," Migrate ")):It("",!0)]),a.value!==""?(xe(),Pe("div",D4,[N("p",null,bt(a.value),1)])):It("",!0)])])):It("",!0)],64))}},N4={class:"mb-5 mt-8"},L4=N("br",null,null,-1),M4={__name:"App",setup(t){const e=we(null);let n=!1;const r=we(null),i=we(null),s=we(null),o=we(null),a=we(null),l=we(null),u=we(null),d=we(!1),f=we(!1),p=we(1.5),m=we(24),b=we("0.7.2");vv(()=>{const x=tC();BA(x,async()=>{n||(n=!0,e.value=x,await ts(),e.value.currentUser!==null&&(o.value.loadDecks(),A()))})});async function v(){const x=await Qs(ct(wi,`users/${e.value.currentUser.uid}`));p.value=x.data().time_multiplier,m.value=x.data().time_duration}function I(){f.value=!1,e.value.currentUser!==null&&$t(ct(wi,`users/${e.value.currentUser.uid}`),{seen_changelog_version:b.value})}function A(){e.value.currentUser!==null&&Qs(ct(wi,`users/${e.value.currentUser.uid}`)).then(x=>{x.data().seen_changelog_version!==b.value&&(f.value=!0)})}return(x,S)=>(xe(),Pe(Zt,null,[N("div",N4,[En(jD,{auth:e.value,onOpenSettings:S[0]||(S[0]=D=>s.value.openSettings()),onOpenSignIn:S[1]||(S[1]=D=>r.value.openMenu()),onOpenSignUp:S[2]||(S[2]=D=>i.value.openMenu()),onSignOut:S[3]||(S[3]=D=>o.value.logout())},null,8,["auth"]),L4,En(CL,{auth:e.value,db:xr(wi),storage:xr($4),onLoadSettings:S[4]||(S[4]=D=>v()),onReview:S[5]||(S[5]=(D,B)=>a.value.reviewCards(D,B)),onLargeReview:S[6]||(S[6]=(D,B,X)=>l.value.reviewCards(D,B,X)),ref_key:"decks_ref",ref:o},null,8,["auth","db","storage"])]),En(xD,{auth:e.value,onLoadDecks:S[7]||(S[7]=D=>{o.value.loadDecks(),A()}),ref_key:"sign_in_menu_ref",ref:r},null,8,["auth"]),En(VD,{auth:e.value,db:xr(wi),onLoadDecks:S[8]||(S[8]=D=>{o.value.loadDecks(),A()}),ref_key:"sign_up_menu_ref",ref:i},null,8,["auth","db"]),En(iM,{auth:e.value,db:xr(wi),"time-duration":m.value,"time-multiplier":p.value,onReselectDeck:S[9]||(S[9]=D=>o.value.reselectDeck()),ref_key:"review_ref",ref:a},null,8,["auth","db","time-duration","time-multiplier"]),En(v4,{auth:e.value,db:xr(wi),"time-duration":m.value,"time-multiplier":p.value,onReselectDeck:S[10]||(S[10]=D=>o.value.reselectDeck()),ref_key:"large_review_ref",ref:l},null,8,["auth","db","time-duration","time-multiplier"]),En(rO,{auth:e.value,db:xr(wi),onSaveSettings:S[11]||(S[11]=D=>v()),onOpenMigrate:S[12]||(S[12]=D=>u.value.openMigrate()),ref_key:"settings_ref",ref:s},null,8,["auth","db"]),N("div",null,[N("button",{onClick:S[13]||(S[13]=D=>d.value=!0),class:"absolute right-5 top-5 rounded-md bg-gray-500 p-2 shadow shadow-black"}," Guide "),d.value?(xe(),Gr(gD,{key:0,"app-version":b.value,onClose:S[14]||(S[14]=D=>d.value=!1),onShowChangelog:S[15]||(S[15]=D=>f.value=!0)},null,8,["app-version"])):It("",!0)]),f.value?(xe(),Gr(E4,{key:0,onClose:S[16]||(S[16]=D=>I())})):It("",!0),En(O4,{auth:e.value,db:xr(wi),onLoadDecks:S[17]||(S[17]=D=>o.value.loadDecks()),ref_key:"deck_migrate_ref",ref:u},null,8,["auth","db"])],64))}};var V4="firebase",U4="10.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ni(V4,U4,"app");const F4={apiKey:"AIzaSyAGYqERiL1fj0l2m1ZmlkHFd5Vq8OiMubw",authDomain:"spare-a6401.firebaseapp.com",projectId:"spare-a6401",storageBucket:"spare-a6401.appspot.com",messagingSenderId:"277807224978",appId:"1:277807224978:web:6420ae19b4ca94e41c6e4b"},L1=Hv(F4),wi=WP(L1),$4=s3(L1);uI(M4).mount("#app");
